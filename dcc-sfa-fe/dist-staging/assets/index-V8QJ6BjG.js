var lq=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var o$e=lq((oi,li)=>{function cq(t,s){for(var a=0;a<s.length;a++){const r=s[a];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();function Ji(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var w2={exports:{}},Ph={};var G6;function dq(){if(G6)return Ph;G6=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function a(r,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var l in n)l!=="key"&&(i[l]=n[l])}else i=n;return n=i.ref,{$$typeof:t,type:r,key:o,ref:n!==void 0?n:null,props:i}}return Ph.Fragment=s,Ph.jsx=a,Ph.jsxs=a,Ph}var K6;function uq(){return K6||(K6=1,w2.exports=dq()),w2.exports}var e=uq(),_2={exports:{}},Fs={};var Q6;function mq(){if(Q6)return Fs;Q6=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function f(D){return D===null||typeof D!="object"?null:(D=h&&D[h]||D["@@iterator"],typeof D=="function"?D:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function j(D,R,$){this.props=D,this.context=R,this.refs=S,this.updater=$||b}j.prototype.isReactComponent={},j.prototype.setState=function(D,R){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,R,"setState")},j.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function v(){}v.prototype=j.prototype;function N(D,R,$){this.props=D,this.context=R,this.refs=S,this.updater=$||b}var C=N.prototype=new v;C.constructor=N,w(C,j.prototype),C.isPureReactComponent=!0;var P=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function T(D,R,$,W,J,te){return $=te.ref,{$$typeof:t,type:D,key:R,ref:$!==void 0?$:null,props:te}}function A(D,R){return T(D.type,R,void 0,void 0,void 0,D.props)}function L(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function F(D){var R={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function($){return R[$]})}var z=/\/+/g;function I(D,R){return typeof D=="object"&&D!==null&&D.key!=null?F(""+D.key):R.toString(36)}function Q(){}function Y(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Q,Q):(D.status="pending",D.then(function(R){D.status==="pending"&&(D.status="fulfilled",D.value=R)},function(R){D.status==="pending"&&(D.status="rejected",D.reason=R)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function B(D,R,$,W,J){var te=typeof D;(te==="undefined"||te==="boolean")&&(D=null);var ee=!1;if(D===null)ee=!0;else switch(te){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(D.$$typeof){case t:case s:ee=!0;break;case u:return ee=D._init,B(ee(D._payload),R,$,W,J)}}if(ee)return J=J(D),ee=W===""?"."+I(D,0):W,P(J)?($="",ee!=null&&($=ee.replace(z,"$&/")+"/"),B(J,R,$,"",function(he){return he})):J!=null&&(L(J)&&(J=A(J,$+(J.key==null||D&&D.key===J.key?"":(""+J.key).replace(z,"$&/")+"/")+ee)),R.push(J)),1;ee=0;var ae=W===""?".":W+":";if(P(D))for(var ce=0;ce<D.length;ce++)W=D[ce],te=ae+I(W,ce),ee+=B(W,R,$,te,J);else if(ce=f(D),typeof ce=="function")for(D=ce.call(D),ce=0;!(W=D.next()).done;)W=W.value,te=ae+I(W,ce++),ee+=B(W,R,$,te,J);else if(te==="object"){if(typeof D.then=="function")return B(Y(D),R,$,W,J);throw R=String(D),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return ee}function q(D,R,$){if(D==null)return D;var W=[],J=0;return B(D,W,"","",function(te){return R.call($,te,J++)}),W}function V(D){if(D._status===-1){var R=D._result;R=R(),R.then(function($){(D._status===0||D._status===-1)&&(D._status=1,D._result=$)},function($){(D._status===0||D._status===-1)&&(D._status=2,D._result=$)}),D._status===-1&&(D._status=0,D._result=R)}if(D._status===1)return D._result.default;throw D._result}var G=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function H(){}return Fs.Children={map:q,forEach:function(D,R,$){q(D,function(){R.apply(this,arguments)},$)},count:function(D){var R=0;return q(D,function(){R++}),R},toArray:function(D){return q(D,function(R){return R})||[]},only:function(D){if(!L(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Fs.Component=j,Fs.Fragment=a,Fs.Profiler=n,Fs.PureComponent=N,Fs.StrictMode=r,Fs.Suspense=c,Fs.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Fs.__COMPILER_RUNTIME={__proto__:null,c:function(D){return E.H.useMemoCache(D)}},Fs.cache=function(D){return function(){return D.apply(null,arguments)}},Fs.cloneElement=function(D,R,$){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var W=w({},D.props),J=D.key,te=void 0;if(R!=null)for(ee in R.ref!==void 0&&(te=void 0),R.key!==void 0&&(J=""+R.key),R)!M.call(R,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&R.ref===void 0||(W[ee]=R[ee]);var ee=arguments.length-2;if(ee===1)W.children=$;else if(1<ee){for(var ae=Array(ee),ce=0;ce<ee;ce++)ae[ce]=arguments[ce+2];W.children=ae}return T(D.type,J,void 0,void 0,te,W)},Fs.createContext=function(D){return D={$$typeof:o,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:i,_context:D},D},Fs.createElement=function(D,R,$){var W,J={},te=null;if(R!=null)for(W in R.key!==void 0&&(te=""+R.key),R)M.call(R,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(J[W]=R[W]);var ee=arguments.length-2;if(ee===1)J.children=$;else if(1<ee){for(var ae=Array(ee),ce=0;ce<ee;ce++)ae[ce]=arguments[ce+2];J.children=ae}if(D&&D.defaultProps)for(W in ee=D.defaultProps,ee)J[W]===void 0&&(J[W]=ee[W]);return T(D,te,void 0,void 0,null,J)},Fs.createRef=function(){return{current:null}},Fs.forwardRef=function(D){return{$$typeof:l,render:D}},Fs.isValidElement=L,Fs.lazy=function(D){return{$$typeof:u,_payload:{_status:-1,_result:D},_init:V}},Fs.memo=function(D,R){return{$$typeof:m,type:D,compare:R===void 0?null:R}},Fs.startTransition=function(D){var R=E.T,$={};E.T=$;try{var W=D(),J=E.S;J!==null&&J($,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(H,G)}catch(te){G(te)}finally{E.T=R}},Fs.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Fs.use=function(D){return E.H.use(D)},Fs.useActionState=function(D,R,$){return E.H.useActionState(D,R,$)},Fs.useCallback=function(D,R){return E.H.useCallback(D,R)},Fs.useContext=function(D){return E.H.useContext(D)},Fs.useDebugValue=function(){},Fs.useDeferredValue=function(D,R){return E.H.useDeferredValue(D,R)},Fs.useEffect=function(D,R,$){var W=E.H;if(typeof $=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(D,R)},Fs.useId=function(){return E.H.useId()},Fs.useImperativeHandle=function(D,R,$){return E.H.useImperativeHandle(D,R,$)},Fs.useInsertionEffect=function(D,R){return E.H.useInsertionEffect(D,R)},Fs.useLayoutEffect=function(D,R){return E.H.useLayoutEffect(D,R)},Fs.useMemo=function(D,R){return E.H.useMemo(D,R)},Fs.useOptimistic=function(D,R){return E.H.useOptimistic(D,R)},Fs.useReducer=function(D,R,$){return E.H.useReducer(D,R,$)},Fs.useRef=function(D){return E.H.useRef(D)},Fs.useState=function(D){return E.H.useState(D)},Fs.useSyncExternalStore=function(D,R,$){return E.H.useSyncExternalStore(D,R,$)},Fs.useTransition=function(){return E.H.useTransition()},Fs.version="19.1.1",Fs}var Z6;function Wb(){return Z6||(Z6=1,_2.exports=mq()),_2.exports}var g=Wb();const vt=Ji(g),rx=cq({__proto__:null,default:vt},[g]);var S2={exports:{}},kh={},C2={exports:{}},P2={};var X6;function pq(){return X6||(X6=1,(function(t){function s(q,V){var G=q.length;q.push(V);e:for(;0<G;){var H=G-1>>>1,D=q[H];if(0<n(D,V))q[H]=V,q[G]=D,G=H;else break e}}function a(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var V=q[0],G=q.pop();if(G!==V){q[0]=G;e:for(var H=0,D=q.length,R=D>>>1;H<R;){var $=2*(H+1)-1,W=q[$],J=$+1,te=q[J];if(0>n(W,G))J<D&&0>n(te,W)?(q[H]=te,q[J]=G,H=J):(q[H]=W,q[$]=G,H=$);else if(J<D&&0>n(te,G))q[H]=te,q[J]=G,H=J;else break e}}return V}function n(q,V){var G=q.sortIndex-V.sortIndex;return G!==0?G:q.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],m=[],u=1,h=null,f=3,b=!1,w=!1,S=!1,j=!1,v=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function P(q){for(var V=a(m);V!==null;){if(V.callback===null)r(m);else if(V.startTime<=q)r(m),V.sortIndex=V.expirationTime,s(c,V);else break;V=a(m)}}function E(q){if(S=!1,P(q),!w)if(a(c)!==null)w=!0,M||(M=!0,I());else{var V=a(m);V!==null&&B(E,V.startTime-q)}}var M=!1,T=-1,A=5,L=-1;function F(){return j?!0:!(t.unstable_now()-L<A)}function z(){if(j=!1,M){var q=t.unstable_now();L=q;var V=!0;try{e:{w=!1,S&&(S=!1,N(T),T=-1),b=!0;var G=f;try{t:{for(P(q),h=a(c);h!==null&&!(h.expirationTime>q&&F());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var D=H(h.expirationTime<=q);if(q=t.unstable_now(),typeof D=="function"){h.callback=D,P(q),V=!0;break t}h===a(c)&&r(c),P(q)}else r(c);h=a(c)}if(h!==null)V=!0;else{var R=a(m);R!==null&&B(E,R.startTime-q),V=!1}}break e}finally{h=null,f=G,b=!1}V=void 0}}finally{V?I():M=!1}}}var I;if(typeof C=="function")I=function(){C(z)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,Y=Q.port2;Q.port1.onmessage=z,I=function(){Y.postMessage(null)}}else I=function(){v(z,0)};function B(q,V){T=v(function(){q(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var G=f;f=V;try{return q()}finally{f=G}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(q,V){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=f;f=q;try{return V()}finally{f=G}},t.unstable_scheduleCallback=function(q,V,G){var H=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?H+G:H):G=H,q){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=G+D,q={id:u++,callback:V,priorityLevel:q,startTime:G,expirationTime:D,sortIndex:-1},G>H?(q.sortIndex=G,s(m,q),a(c)===null&&q===a(m)&&(S?(N(T),T=-1):S=!0,B(E,G-H))):(q.sortIndex=D,s(c,q),w||b||(w=!0,M||(M=!0,I()))),q},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(q){var V=f;return function(){var G=f;f=V;try{return q.apply(this,arguments)}finally{f=G}}}})(P2)),P2}var J6;function hq(){return J6||(J6=1,C2.exports=pq()),C2.exports}var k2={exports:{}},en={};var eP;function fq(){if(eP)return en;eP=1;var t=Wb();function s(c){var m="https://react.dev/errors/"+c;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)m+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(s(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(c,m,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:h==null?null:""+h,children:c,containerInfo:m,implementation:u}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,m){if(c==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,en.createPortal=function(c,m){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(s(299));return i(c,m,null,u)},en.flushSync=function(c){var m=o.T,u=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=m,r.p=u,r.d.f()}},en.preconnect=function(c,m){typeof c=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(c,m))},en.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},en.preinit=function(c,m){if(typeof c=="string"&&m&&typeof m.as=="string"){var u=m.as,h=l(u,m.crossOrigin),f=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;u==="style"?r.d.S(c,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:h,integrity:f,fetchPriority:b}):u==="script"&&r.d.X(c,{crossOrigin:h,integrity:f,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},en.preinitModule=function(c,m){if(typeof c=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var u=l(m.as,m.crossOrigin);r.d.M(c,{crossOrigin:u,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(c)},en.preload=function(c,m){if(typeof c=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var u=m.as,h=l(u,m.crossOrigin);r.d.L(c,u,{crossOrigin:h,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},en.preloadModule=function(c,m){if(typeof c=="string")if(m){var u=l(m.as,m.crossOrigin);r.d.m(c,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:u,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(c)},en.requestFormReset=function(c){r.d.r(c)},en.unstable_batchedUpdates=function(c,m){return c(m)},en.useFormState=function(c,m,u){return o.H.useFormState(c,m,u)},en.useFormStatus=function(){return o.H.useHostTransitionStatus()},en.version="19.1.1",en}var tP;function GD(){if(tP)return k2.exports;tP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),k2.exports=fq(),k2.exports}var sP;function xq(){if(sP)return kh;sP=1;var t=hq(),s=Wb(),a=GD();function r(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function i(d){var p=d,_=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(_=p.return),d=p.return;while(d)}return p.tag===3?_:null}function o(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function l(d){if(i(d)!==d)throw Error(r(188))}function c(d){var p=d.alternate;if(!p){if(p=i(d),p===null)throw Error(r(188));return p!==d?null:d}for(var _=d,k=p;;){var O=_.return;if(O===null)break;var U=O.alternate;if(U===null){if(k=O.return,k!==null){_=k;continue}break}if(O.child===U.child){for(U=O.child;U;){if(U===_)return l(O),d;if(U===k)return l(O),p;U=U.sibling}throw Error(r(188))}if(_.return!==k.return)_=O,k=U;else{for(var se=!1,ue=O.child;ue;){if(ue===_){se=!0,_=O,k=U;break}if(ue===k){se=!0,k=O,_=U;break}ue=ue.sibling}if(!se){for(ue=U.child;ue;){if(ue===_){se=!0,_=U,k=O;break}if(ue===k){se=!0,k=U,_=O;break}ue=ue.sibling}if(!se)throw Error(r(189))}}if(_.alternate!==k)throw Error(r(190))}if(_.tag!==3)throw Error(r(188));return _.stateNode.current===_?d:p}function m(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d;for(d=d.child;d!==null;){if(p=m(d),p!==null)return p;d=d.sibling}return null}var u=Object.assign,h=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),C=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function I(d){return d===null||typeof d!="object"?null:(d=z&&d[z]||d["@@iterator"],typeof d=="function"?d:null)}var Q=Symbol.for("react.client.reference");function Y(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===Q?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case w:return"Fragment";case j:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case M:return"SuspenseList";case L:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case b:return"Portal";case C:return(d.displayName||"Context")+".Provider";case N:return(d._context.displayName||"Context")+".Consumer";case P:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case T:return p=d.displayName||null,p!==null?p:Y(d.type)||"Memo";case A:p=d._payload,d=d._init;try{return Y(d(p))}catch{}}return null}var B=Array.isArray,q=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},H=[],D=-1;function R(d){return{current:d}}function $(d){0>D||(d.current=H[D],H[D]=null,D--)}function W(d,p){D++,H[D]=d.current,d.current=p}var J=R(null),te=R(null),ee=R(null),ae=R(null);function ce(d,p){switch(W(ee,p),W(te,d),W(J,null),p.nodeType){case 9:case 11:d=(d=p.documentElement)&&(d=d.namespaceURI)?N6(d):0;break;default:if(d=p.tagName,p=p.namespaceURI)p=N6(p),d=w6(p,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}$(J),W(J,d)}function he(){$(J),$(te),$(ee)}function ne(d){d.memoizedState!==null&&W(ae,d);var p=J.current,_=w6(p,d.type);p!==_&&(W(te,d),W(J,_))}function xe(d){te.current===d&&($(J),$(te)),ae.current===d&&($(ae),Nh._currentValue=G)}var ge=Object.prototype.hasOwnProperty,le=t.unstable_scheduleCallback,pe=t.unstable_cancelCallback,Re=t.unstable_shouldYield,Se=t.unstable_requestPaint,He=t.unstable_now,ze=t.unstable_getCurrentPriorityLevel,st=t.unstable_ImmediatePriority,ke=t.unstable_UserBlockingPriority,We=t.unstable_NormalPriority,ye=t.unstable_LowPriority,Ye=t.unstable_IdlePriority,at=t.log,bt=t.unstable_setDisableYieldValue,ct=null,ht=null;function Et(d){if(typeof at=="function"&&bt(d),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(ct,d)}catch{}}var be=Math.clz32?Math.clz32:jt,Oe=Math.log,Le=Math.LN2;function jt(d){return d>>>=0,d===0?32:31-(Oe(d)/Le|0)|0}var Jt=256,Kt=4194304;function rt(d){var p=d&42;if(p!==0)return p;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function Lt(d,p,_){var k=d.pendingLanes;if(k===0)return 0;var O=0,U=d.suspendedLanes,se=d.pingedLanes;d=d.warmLanes;var ue=k&134217727;return ue!==0?(k=ue&~U,k!==0?O=rt(k):(se&=ue,se!==0?O=rt(se):_||(_=ue&~d,_!==0&&(O=rt(_))))):(ue=k&~U,ue!==0?O=rt(ue):se!==0?O=rt(se):_||(_=k&~d,_!==0&&(O=rt(_)))),O===0?0:p!==0&&p!==O&&(p&U)===0&&(U=O&-O,_=p&-p,U>=_||U===32&&(_&4194048)!==0)?p:O}function Nt(d,p){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&p)===0}function ps(d,p){switch(d){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cs(){var d=Jt;return Jt<<=1,(Jt&4194048)===0&&(Jt=256),d}function Ns(){var d=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),d}function Ys(d){for(var p=[],_=0;31>_;_++)p.push(d);return p}function Is(d,p){d.pendingLanes|=p,p!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Ms(d,p,_,k,O,U){var se=d.pendingLanes;d.pendingLanes=_,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=_,d.entangledLanes&=_,d.errorRecoveryDisabledLanes&=_,d.shellSuspendCounter=0;var ue=d.entanglements,we=d.expirationTimes,Ve=d.hiddenUpdates;for(_=se&~_;0<_;){var pt=31-be(_),wt=1<<pt;ue[pt]=0,we[pt]=-1;var Ke=Ve[pt];if(Ke!==null)for(Ve[pt]=null,pt=0;pt<Ke.length;pt++){var Ze=Ke[pt];Ze!==null&&(Ze.lane&=-536870913)}_&=~wt}k!==0&&pa(d,k,0),U!==0&&O===0&&d.tag!==0&&(d.suspendedLanes|=U&~(se&~p))}function pa(d,p,_){d.pendingLanes|=p,d.suspendedLanes&=~p;var k=31-be(p);d.entangledLanes|=p,d.entanglements[k]=d.entanglements[k]|1073741824|_&4194090}function ha(d,p){var _=d.entangledLanes|=p;for(d=d.entanglements;_;){var k=31-be(_),O=1<<k;O&p|d[k]&p&&(d[k]|=p),_&=~O}}function ia(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function $t(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function $s(){var d=V.p;return d!==0?d:(d=window.event,d===void 0?32:B6(d.type))}function zt(d,p){var _=V.p;try{return V.p=d,p()}finally{V.p=_}}var qt=Math.random().toString(36).slice(2),ds="__reactFiber$"+qt,ve="__reactProps$"+qt,Ce="__reactContainer$"+qt,qe="__reactEvents$"+qt,gt="__reactListeners$"+qt,de="__reactHandles$"+qt,Ee="__reactResources$"+qt,Ae="__reactMarker$"+qt;function ft(d){delete d[ds],delete d[ve],delete d[qe],delete d[gt],delete d[de]}function _t(d){var p=d[ds];if(p)return p;for(var _=d.parentNode;_;){if(p=_[Ce]||_[ds]){if(_=p.alternate,p.child!==null||_!==null&&_.child!==null)for(d=P6(d);d!==null;){if(_=d[ds])return _;d=P6(d)}return p}d=_,_=d.parentNode}return null}function Gt(d){if(d=d[ds]||d[Ce]){var p=d.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return d}return null}function ss(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d.stateNode;throw Error(r(33))}function $e(d){var p=d[Ee];return p||(p=d[Ee]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Rt(d){d[Ae]=!0}var Pe=new Set,Be={};function Mt(d,p){Qt(d,p),Qt(d+"Capture",p)}function Qt(d,p){for(Be[d]=p,d=0;d<p.length;d++)Pe.add(p[d])}var Ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Us={},Qs={};function lr(d){return ge.call(Qs,d)?!0:ge.call(Us,d)?!1:Ht.test(d)?Qs[d]=!0:(Us[d]=!0,!1)}function Rs(d,p,_){if(lr(p))if(_===null)d.removeAttribute(p);else{switch(typeof _){case"undefined":case"function":case"symbol":d.removeAttribute(p);return;case"boolean":var k=p.toLowerCase().slice(0,5);if(k!=="data-"&&k!=="aria-"){d.removeAttribute(p);return}}d.setAttribute(p,""+_)}}function Oa(d,p,_){if(_===null)d.removeAttribute(p);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(p);return}d.setAttribute(p,""+_)}}function Ua(d,p,_,k){if(k===null)d.removeAttribute(_);else{switch(typeof k){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(_);return}d.setAttributeNS(p,_,""+k)}}var Xr,Cs;function Za(d){if(Xr===void 0)try{throw Error()}catch(_){var p=_.stack.trim().match(/\n( *(at )?)/);Xr=p&&p[1]||"",Cs=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xr+d+Cs}var Sr=!1;function Ps(d,p){if(!d||Sr)return"";Sr=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var k={DetermineComponentFrameRoot:function(){try{if(p){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(Ze){var Ke=Ze}Reflect.construct(d,[],wt)}else{try{wt.call()}catch(Ze){Ke=Ze}d.call(wt.prototype)}}else{try{throw Error()}catch(Ze){Ke=Ze}(wt=d())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(Ze){if(Ze&&Ke&&typeof Ze.stack=="string")return[Ze.stack,Ke.stack]}return[null,null]}};k.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(k.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(k.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=k.DetermineComponentFrameRoot(),se=U[0],ue=U[1];if(se&&ue){var we=se.split(`
`),Ve=ue.split(`
`);for(O=k=0;k<we.length&&!we[k].includes("DetermineComponentFrameRoot");)k++;for(;O<Ve.length&&!Ve[O].includes("DetermineComponentFrameRoot");)O++;if(k===we.length||O===Ve.length)for(k=we.length-1,O=Ve.length-1;1<=k&&0<=O&&we[k]!==Ve[O];)O--;for(;1<=k&&0<=O;k--,O--)if(we[k]!==Ve[O]){if(k!==1||O!==1)do if(k--,O--,0>O||we[k]!==Ve[O]){var pt=`
`+we[k].replace(" at new "," at ");return d.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",d.displayName)),pt}while(1<=k&&0<=O);break}}}finally{Sr=!1,Error.prepareStackTrace=_}return(_=d?d.displayName||d.name:"")?Za(_):""}function yr(d){switch(d.tag){case 26:case 27:case 5:return Za(d.type);case 16:return Za("Lazy");case 13:return Za("Suspense");case 19:return Za("SuspenseList");case 0:case 15:return Ps(d.type,!1);case 11:return Ps(d.type.render,!1);case 1:return Ps(d.type,!0);case 31:return Za("Activity");default:return""}}function ao(d){try{var p="";do p+=yr(d),d=d.return;while(d);return p}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function Xa(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Ra(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Pu(d){var p=Ra(d)?"checked":"value",_=Object.getOwnPropertyDescriptor(d.constructor.prototype,p),k=""+d[p];if(!d.hasOwnProperty(p)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var O=_.get,U=_.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return O.call(this)},set:function(se){k=""+se,U.call(this,se)}}),Object.defineProperty(d,p,{enumerable:_.enumerable}),{getValue:function(){return k},setValue:function(se){k=""+se},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function id(d){d._valueTracker||(d._valueTracker=Pu(d))}function Dg(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var _=p.getValue(),k="";return d&&(k=Ra(d)?d.checked?"true":"false":d.value),d=k,d!==_?(p.setValue(d),!0):!1}function Rg(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var r$=/[\n"\\]/g;function bi(d){return d.replace(r$,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function v1(d,p,_,k,O,U,se,ue){d.name="",se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?d.type=se:d.removeAttribute("type"),p!=null?se==="number"?(p===0&&d.value===""||d.value!=p)&&(d.value=""+Xa(p)):d.value!==""+Xa(p)&&(d.value=""+Xa(p)):se!=="submit"&&se!=="reset"||d.removeAttribute("value"),p!=null?j1(d,se,Xa(p)):_!=null?j1(d,se,Xa(_)):k!=null&&d.removeAttribute("value"),O==null&&U!=null&&(d.defaultChecked=!!U),O!=null&&(d.checked=O&&typeof O!="function"&&typeof O!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?d.name=""+Xa(ue):d.removeAttribute("name")}function b3(d,p,_,k,O,U,se,ue){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(d.type=U),p!=null||_!=null){if(!(U!=="submit"&&U!=="reset"||p!=null))return;_=_!=null?""+Xa(_):"",p=p!=null?""+Xa(p):_,ue||p===d.value||(d.value=p),d.defaultValue=p}k=k??O,k=typeof k!="function"&&typeof k!="symbol"&&!!k,d.checked=ue?d.checked:!!k,d.defaultChecked=!!k,se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(d.name=se)}function j1(d,p,_){p==="number"&&Rg(d.ownerDocument)===d||d.defaultValue===""+_||(d.defaultValue=""+_)}function ku(d,p,_,k){if(d=d.options,p){p={};for(var O=0;O<_.length;O++)p["$"+_[O]]=!0;for(_=0;_<d.length;_++)O=p.hasOwnProperty("$"+d[_].value),d[_].selected!==O&&(d[_].selected=O),O&&k&&(d[_].defaultSelected=!0)}else{for(_=""+Xa(_),p=null,O=0;O<d.length;O++){if(d[O].value===_){d[O].selected=!0,k&&(d[O].defaultSelected=!0);return}p!==null||d[O].disabled||(p=d[O])}p!==null&&(p.selected=!0)}}function v3(d,p,_){if(p!=null&&(p=""+Xa(p),p!==d.value&&(d.value=p),_==null)){d.defaultValue!==p&&(d.defaultValue=p);return}d.defaultValue=_!=null?""+Xa(_):""}function j3(d,p,_,k){if(p==null){if(k!=null){if(_!=null)throw Error(r(92));if(B(k)){if(1<k.length)throw Error(r(93));k=k[0]}_=k}_==null&&(_=""),p=_}_=Xa(p),d.defaultValue=_,k=d.textContent,k===_&&k!==""&&k!==null&&(d.value=k)}function Eu(d,p){if(p){var _=d.firstChild;if(_&&_===d.lastChild&&_.nodeType===3){_.nodeValue=p;return}}d.textContent=p}var n$=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function N3(d,p,_){var k=p.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?k?d.setProperty(p,""):p==="float"?d.cssFloat="":d[p]="":k?d.setProperty(p,_):typeof _!="number"||_===0||n$.has(p)?p==="float"?d.cssFloat=_:d[p]=(""+_).trim():d[p]=_+"px"}function w3(d,p,_){if(p!=null&&typeof p!="object")throw Error(r(62));if(d=d.style,_!=null){for(var k in _)!_.hasOwnProperty(k)||p!=null&&p.hasOwnProperty(k)||(k.indexOf("--")===0?d.setProperty(k,""):k==="float"?d.cssFloat="":d[k]="");for(var O in p)k=p[O],p.hasOwnProperty(O)&&_[O]!==k&&N3(d,O,k)}else for(var U in p)p.hasOwnProperty(U)&&N3(d,U,p[U])}function N1(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var i$=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),o$=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ag(d){return o$.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var w1=null;function _1(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Tu=null,Mu=null;function _3(d){var p=Gt(d);if(p&&(d=p.stateNode)){var _=d[ve]||null;e:switch(d=p.stateNode,p.type){case"input":if(v1(d,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),p=_.name,_.type==="radio"&&p!=null){for(_=d;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+bi(""+p)+'"][type="radio"]'),p=0;p<_.length;p++){var k=_[p];if(k!==d&&k.form===d.form){var O=k[ve]||null;if(!O)throw Error(r(90));v1(k,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name)}}for(p=0;p<_.length;p++)k=_[p],k.form===d.form&&Dg(k)}break e;case"textarea":v3(d,_.value,_.defaultValue);break e;case"select":p=_.value,p!=null&&ku(d,!!_.multiple,p,!1)}}}var S1=!1;function S3(d,p,_){if(S1)return d(p,_);S1=!0;try{var k=d(p);return k}finally{if(S1=!1,(Tu!==null||Mu!==null)&&(b0(),Tu&&(p=Tu,d=Mu,Mu=Tu=null,_3(p),d)))for(p=0;p<d.length;p++)_3(d[p])}}function Ip(d,p){var _=d.stateNode;if(_===null)return null;var k=_[ve]||null;if(k===null)return null;_=k[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(d=d.type,k=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!k;break e;default:d=!1}if(d)return null;if(_&&typeof _!="function")throw Error(r(231,p,typeof _));return _}var ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C1=!1;if(ol)try{var Op={};Object.defineProperty(Op,"passive",{get:function(){C1=!0}}),window.addEventListener("test",Op,Op),window.removeEventListener("test",Op,Op)}catch{C1=!1}var ec=null,P1=null,Ig=null;function C3(){if(Ig)return Ig;var d,p=P1,_=p.length,k,O="value"in ec?ec.value:ec.textContent,U=O.length;for(d=0;d<_&&p[d]===O[d];d++);var se=_-d;for(k=1;k<=se&&p[_-k]===O[U-k];k++);return Ig=O.slice(d,1<k?1-k:void 0)}function Og(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function Fg(){return!0}function P3(){return!1}function Cn(d){function p(_,k,O,U,se){this._reactName=_,this._targetInst=O,this.type=k,this.nativeEvent=U,this.target=se,this.currentTarget=null;for(var ue in d)d.hasOwnProperty(ue)&&(_=d[ue],this[ue]=_?_(U):U[ue]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?Fg:P3,this.isPropagationStopped=P3,this}return u(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=Fg)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=Fg)},persist:function(){},isPersistent:Fg}),p}var od={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lg=Cn(od),Fp=u({},od,{view:0,detail:0}),l$=Cn(Fp),k1,E1,Lp,$g=u({},Fp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:M1,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Lp&&(Lp&&d.type==="mousemove"?(k1=d.screenX-Lp.screenX,E1=d.screenY-Lp.screenY):E1=k1=0,Lp=d),k1)},movementY:function(d){return"movementY"in d?d.movementY:E1}}),k3=Cn($g),c$=u({},$g,{dataTransfer:0}),d$=Cn(c$),u$=u({},Fp,{relatedTarget:0}),T1=Cn(u$),m$=u({},od,{animationName:0,elapsedTime:0,pseudoElement:0}),p$=Cn(m$),h$=u({},od,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),f$=Cn(h$),x$=u({},od,{data:0}),E3=Cn(x$),g$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v$(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=b$[d])?!!p[d]:!1}function M1(){return v$}var j$=u({},Fp,{key:function(d){if(d.key){var p=g$[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=Og(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?y$[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:M1,charCode:function(d){return d.type==="keypress"?Og(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Og(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),N$=Cn(j$),w$=u({},$g,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T3=Cn(w$),_$=u({},Fp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:M1}),S$=Cn(_$),C$=u({},od,{propertyName:0,elapsedTime:0,pseudoElement:0}),P$=Cn(C$),k$=u({},$g,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),E$=Cn(k$),T$=u({},od,{newState:0,oldState:0}),M$=Cn(T$),D$=[9,13,27,32],D1=ol&&"CompositionEvent"in window,$p=null;ol&&"documentMode"in document&&($p=document.documentMode);var R$=ol&&"TextEvent"in window&&!$p,M3=ol&&(!D1||$p&&8<$p&&11>=$p),D3=" ",R3=!1;function A3(d,p){switch(d){case"keyup":return D$.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I3(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Du=!1;function A$(d,p){switch(d){case"compositionend":return I3(p);case"keypress":return p.which!==32?null:(R3=!0,D3);case"textInput":return d=p.data,d===D3&&R3?null:d;default:return null}}function I$(d,p){if(Du)return d==="compositionend"||!D1&&A3(d,p)?(d=C3(),Ig=P1=ec=null,Du=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return M3&&p.locale!=="ko"?null:p.data;default:return null}}var O$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O3(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!O$[d.type]:p==="textarea"}function F3(d,p,_,k){Tu?Mu?Mu.push(k):Mu=[k]:Tu=k,p=S0(p,"onChange"),0<p.length&&(_=new Lg("onChange","change",null,_,k),d.push({event:_,listeners:p}))}var zp=null,qp=null;function F$(d){g6(d,0)}function zg(d){var p=ss(d);if(Dg(p))return d}function L3(d,p){if(d==="change")return p}var $3=!1;if(ol){var R1;if(ol){var A1="oninput"in document;if(!A1){var z3=document.createElement("div");z3.setAttribute("oninput","return;"),A1=typeof z3.oninput=="function"}R1=A1}else R1=!1;$3=R1&&(!document.documentMode||9<document.documentMode)}function q3(){zp&&(zp.detachEvent("onpropertychange",B3),qp=zp=null)}function B3(d){if(d.propertyName==="value"&&zg(qp)){var p=[];F3(p,qp,d,_1(d)),S3(F$,p)}}function L$(d,p,_){d==="focusin"?(q3(),zp=p,qp=_,zp.attachEvent("onpropertychange",B3)):d==="focusout"&&q3()}function $$(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return zg(qp)}function z$(d,p){if(d==="click")return zg(p)}function q$(d,p){if(d==="input"||d==="change")return zg(p)}function B$(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var Hn=typeof Object.is=="function"?Object.is:B$;function Bp(d,p){if(Hn(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var _=Object.keys(d),k=Object.keys(p);if(_.length!==k.length)return!1;for(k=0;k<_.length;k++){var O=_[k];if(!ge.call(p,O)||!Hn(d[O],p[O]))return!1}return!0}function U3(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function V3(d,p){var _=U3(d);d=0;for(var k;_;){if(_.nodeType===3){if(k=d+_.textContent.length,d<=p&&k>=p)return{node:_,offset:p-d};d=k}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=U3(_)}}function H3(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?H3(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function W3(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var p=Rg(d.document);p instanceof d.HTMLIFrameElement;){try{var _=typeof p.contentWindow.location.href=="string"}catch{_=!1}if(_)d=p.contentWindow;else break;p=Rg(d.document)}return p}function I1(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}var U$=ol&&"documentMode"in document&&11>=document.documentMode,Ru=null,O1=null,Up=null,F1=!1;function Y3(d,p,_){var k=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;F1||Ru==null||Ru!==Rg(k)||(k=Ru,"selectionStart"in k&&I1(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Up&&Bp(Up,k)||(Up=k,k=S0(O1,"onSelect"),0<k.length&&(p=new Lg("onSelect","select",null,p,_),d.push({event:p,listeners:k}),p.target=Ru)))}function ld(d,p){var _={};return _[d.toLowerCase()]=p.toLowerCase(),_["Webkit"+d]="webkit"+p,_["Moz"+d]="moz"+p,_}var Au={animationend:ld("Animation","AnimationEnd"),animationiteration:ld("Animation","AnimationIteration"),animationstart:ld("Animation","AnimationStart"),transitionrun:ld("Transition","TransitionRun"),transitionstart:ld("Transition","TransitionStart"),transitioncancel:ld("Transition","TransitionCancel"),transitionend:ld("Transition","TransitionEnd")},L1={},G3={};ol&&(G3=document.createElement("div").style,"AnimationEvent"in window||(delete Au.animationend.animation,delete Au.animationiteration.animation,delete Au.animationstart.animation),"TransitionEvent"in window||delete Au.transitionend.transition);function cd(d){if(L1[d])return L1[d];if(!Au[d])return d;var p=Au[d],_;for(_ in p)if(p.hasOwnProperty(_)&&_ in G3)return L1[d]=p[_];return d}var K3=cd("animationend"),Q3=cd("animationiteration"),Z3=cd("animationstart"),V$=cd("transitionrun"),H$=cd("transitionstart"),W$=cd("transitioncancel"),X3=cd("transitionend"),J3=new Map,$1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$1.push("scrollEnd");function ro(d,p){J3.set(d,p),Mt(p,[d])}var eC=new WeakMap;function vi(d,p){if(typeof d=="object"&&d!==null){var _=eC.get(d);return _!==void 0?_:(p={value:d,source:p,stack:ao(p)},eC.set(d,p),p)}return{value:d,source:p,stack:ao(p)}}var ji=[],Iu=0,z1=0;function qg(){for(var d=Iu,p=z1=Iu=0;p<d;){var _=ji[p];ji[p++]=null;var k=ji[p];ji[p++]=null;var O=ji[p];ji[p++]=null;var U=ji[p];if(ji[p++]=null,k!==null&&O!==null){var se=k.pending;se===null?O.next=O:(O.next=se.next,se.next=O),k.pending=O}U!==0&&tC(_,O,U)}}function Bg(d,p,_,k){ji[Iu++]=d,ji[Iu++]=p,ji[Iu++]=_,ji[Iu++]=k,z1|=k,d.lanes|=k,d=d.alternate,d!==null&&(d.lanes|=k)}function q1(d,p,_,k){return Bg(d,p,_,k),Ug(d)}function Ou(d,p){return Bg(d,null,null,p),Ug(d)}function tC(d,p,_){d.lanes|=_;var k=d.alternate;k!==null&&(k.lanes|=_);for(var O=!1,U=d.return;U!==null;)U.childLanes|=_,k=U.alternate,k!==null&&(k.childLanes|=_),U.tag===22&&(d=U.stateNode,d===null||d._visibility&1||(O=!0)),d=U,U=U.return;return d.tag===3?(U=d.stateNode,O&&p!==null&&(O=31-be(_),d=U.hiddenUpdates,k=d[O],k===null?d[O]=[p]:k.push(p),p.lane=_|536870912),U):null}function Ug(d){if(50<hh)throw hh=0,Yj=null,Error(r(185));for(var p=d.return;p!==null;)d=p,p=d.return;return d.tag===3?d.stateNode:null}var Fu={};function Y$(d,p,_,k){this.tag=d,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(d,p,_,k){return new Y$(d,p,_,k)}function B1(d){return d=d.prototype,!(!d||!d.isReactComponent)}function ll(d,p){var _=d.alternate;return _===null?(_=Wn(d.tag,p,d.key,d.mode),_.elementType=d.elementType,_.type=d.type,_.stateNode=d.stateNode,_.alternate=d,d.alternate=_):(_.pendingProps=p,_.type=d.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=d.flags&65011712,_.childLanes=d.childLanes,_.lanes=d.lanes,_.child=d.child,_.memoizedProps=d.memoizedProps,_.memoizedState=d.memoizedState,_.updateQueue=d.updateQueue,p=d.dependencies,_.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},_.sibling=d.sibling,_.index=d.index,_.ref=d.ref,_.refCleanup=d.refCleanup,_}function sC(d,p){d.flags&=65011714;var _=d.alternate;return _===null?(d.childLanes=0,d.lanes=p,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=_.childLanes,d.lanes=_.lanes,d.child=_.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=_.memoizedProps,d.memoizedState=_.memoizedState,d.updateQueue=_.updateQueue,d.type=_.type,p=_.dependencies,d.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),d}function Vg(d,p,_,k,O,U){var se=0;if(k=d,typeof d=="function")B1(d)&&(se=1);else if(typeof d=="string")se=Kz(d,_,J.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case L:return d=Wn(31,_,p,O),d.elementType=L,d.lanes=U,d;case w:return dd(_.children,O,U,p);case S:se=8,O|=24;break;case j:return d=Wn(12,_,p,O|2),d.elementType=j,d.lanes=U,d;case E:return d=Wn(13,_,p,O),d.elementType=E,d.lanes=U,d;case M:return d=Wn(19,_,p,O),d.elementType=M,d.lanes=U,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case v:case C:se=10;break e;case N:se=9;break e;case P:se=11;break e;case T:se=14;break e;case A:se=16,k=null;break e}se=29,_=Error(r(130,d===null?"null":typeof d,"")),k=null}return p=Wn(se,_,p,O),p.elementType=d,p.type=k,p.lanes=U,p}function dd(d,p,_,k){return d=Wn(7,d,k,p),d.lanes=_,d}function U1(d,p,_){return d=Wn(6,d,null,p),d.lanes=_,d}function V1(d,p,_){return p=Wn(4,d.children!==null?d.children:[],d.key,p),p.lanes=_,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}var Lu=[],$u=0,Hg=null,Wg=0,Ni=[],wi=0,ud=null,cl=1,dl="";function md(d,p){Lu[$u++]=Wg,Lu[$u++]=Hg,Hg=d,Wg=p}function aC(d,p,_){Ni[wi++]=cl,Ni[wi++]=dl,Ni[wi++]=ud,ud=d;var k=cl;d=dl;var O=32-be(k)-1;k&=~(1<<O),_+=1;var U=32-be(p)+O;if(30<U){var se=O-O%5;U=(k&(1<<se)-1).toString(32),k>>=se,O-=se,cl=1<<32-be(p)+O|_<<O|k,dl=U+d}else cl=1<<U|_<<O|k,dl=d}function H1(d){d.return!==null&&(md(d,1),aC(d,1,0))}function W1(d){for(;d===Hg;)Hg=Lu[--$u],Lu[$u]=null,Wg=Lu[--$u],Lu[$u]=null;for(;d===ud;)ud=Ni[--wi],Ni[wi]=null,dl=Ni[--wi],Ni[wi]=null,cl=Ni[--wi],Ni[wi]=null}var hn=null,Ja=null,da=!1,pd=null,wo=!1,Y1=Error(r(519));function hd(d){var p=Error(r(418,""));throw Wp(vi(p,d)),Y1}function rC(d){var p=d.stateNode,_=d.type,k=d.memoizedProps;switch(p[ds]=d,p[ve]=k,_){case"dialog":Xs("cancel",p),Xs("close",p);break;case"iframe":case"object":case"embed":Xs("load",p);break;case"video":case"audio":for(_=0;_<xh.length;_++)Xs(xh[_],p);break;case"source":Xs("error",p);break;case"img":case"image":case"link":Xs("error",p),Xs("load",p);break;case"details":Xs("toggle",p);break;case"input":Xs("invalid",p),b3(p,k.value,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name,!0),id(p);break;case"select":Xs("invalid",p);break;case"textarea":Xs("invalid",p),j3(p,k.value,k.defaultValue,k.children),id(p)}_=k.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||p.textContent===""+_||k.suppressHydrationWarning===!0||j6(p.textContent,_)?(k.popover!=null&&(Xs("beforetoggle",p),Xs("toggle",p)),k.onScroll!=null&&Xs("scroll",p),k.onScrollEnd!=null&&Xs("scrollend",p),k.onClick!=null&&(p.onclick=C0),p=!0):p=!1,p||hd(d)}function nC(d){for(hn=d.return;hn;)switch(hn.tag){case 5:case 13:wo=!1;return;case 27:case 3:wo=!0;return;default:hn=hn.return}}function Vp(d){if(d!==hn)return!1;if(!da)return nC(d),da=!0,!1;var p=d.tag,_;if((_=p!==3&&p!==27)&&((_=p===5)&&(_=d.type,_=!(_!=="form"&&_!=="button")||c2(d.type,d.memoizedProps)),_=!_),_&&Ja&&hd(d),nC(d),p===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));e:{for(d=d.nextSibling,p=0;d;){if(d.nodeType===8)if(_=d.data,_==="/$"){if(p===0){Ja=io(d.nextSibling);break e}p--}else _!=="$"&&_!=="$!"&&_!=="$?"||p++;d=d.nextSibling}Ja=null}}else p===27?(p=Ja,xc(d.type)?(d=p2,p2=null,Ja=d):Ja=p):Ja=hn?io(d.stateNode.nextSibling):null;return!0}function Hp(){Ja=hn=null,da=!1}function iC(){var d=pd;return d!==null&&(En===null?En=d:En.push.apply(En,d),pd=null),d}function Wp(d){pd===null?pd=[d]:pd.push(d)}var G1=R(null),fd=null,ul=null;function tc(d,p,_){W(G1,p._currentValue),p._currentValue=_}function ml(d){d._currentValue=G1.current,$(G1)}function K1(d,p,_){for(;d!==null;){var k=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,k!==null&&(k.childLanes|=p)):k!==null&&(k.childLanes&p)!==p&&(k.childLanes|=p),d===_)break;d=d.return}}function Q1(d,p,_,k){var O=d.child;for(O!==null&&(O.return=d);O!==null;){var U=O.dependencies;if(U!==null){var se=O.child;U=U.firstContext;e:for(;U!==null;){var ue=U;U=O;for(var we=0;we<p.length;we++)if(ue.context===p[we]){U.lanes|=_,ue=U.alternate,ue!==null&&(ue.lanes|=_),K1(U.return,_,d),k||(se=null);break e}U=ue.next}}else if(O.tag===18){if(se=O.return,se===null)throw Error(r(341));se.lanes|=_,U=se.alternate,U!==null&&(U.lanes|=_),K1(se,_,d),se=null}else se=O.child;if(se!==null)se.return=O;else for(se=O;se!==null;){if(se===d){se=null;break}if(O=se.sibling,O!==null){O.return=se.return,se=O;break}se=se.return}O=se}}function Yp(d,p,_,k){d=null;for(var O=p,U=!1;O!==null;){if(!U){if((O.flags&524288)!==0)U=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var se=O.alternate;if(se===null)throw Error(r(387));if(se=se.memoizedProps,se!==null){var ue=O.type;Hn(O.pendingProps.value,se.value)||(d!==null?d.push(ue):d=[ue])}}else if(O===ae.current){if(se=O.alternate,se===null)throw Error(r(387));se.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(d!==null?d.push(Nh):d=[Nh])}O=O.return}d!==null&&Q1(p,d,_,k),p.flags|=262144}function Yg(d){for(d=d.firstContext;d!==null;){if(!Hn(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function xd(d){fd=d,ul=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Jr(d){return oC(fd,d)}function Gg(d,p){return fd===null&&xd(d),oC(d,p)}function oC(d,p){var _=p._currentValue;if(p={context:p,memoizedValue:_,next:null},ul===null){if(d===null)throw Error(r(308));ul=p,d.dependencies={lanes:0,firstContext:p},d.flags|=524288}else ul=ul.next=p;return _}var G$=typeof AbortController<"u"?AbortController:function(){var d=[],p=this.signal={aborted:!1,addEventListener:function(_,k){d.push(k)}};this.abort=function(){p.aborted=!0,d.forEach(function(_){return _()})}},K$=t.unstable_scheduleCallback,Q$=t.unstable_NormalPriority,Cr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Z1(){return{controller:new G$,data:new Map,refCount:0}}function Gp(d){d.refCount--,d.refCount===0&&K$(Q$,function(){d.controller.abort()})}var Kp=null,X1=0,zu=0,qu=null;function Z$(d,p){if(Kp===null){var _=Kp=[];X1=0,zu=e2(),qu={status:"pending",value:void 0,then:function(k){_.push(k)}}}return X1++,p.then(lC,lC),p}function lC(){if(--X1===0&&Kp!==null){qu!==null&&(qu.status="fulfilled");var d=Kp;Kp=null,zu=0,qu=null;for(var p=0;p<d.length;p++)(0,d[p])()}}function X$(d,p){var _=[],k={status:"pending",value:null,reason:null,then:function(O){_.push(O)}};return d.then(function(){k.status="fulfilled",k.value=p;for(var O=0;O<_.length;O++)(0,_[O])(p)},function(O){for(k.status="rejected",k.reason=O,O=0;O<_.length;O++)(0,_[O])(void 0)}),k}var cC=q.S;q.S=function(d,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Z$(d,p),cC!==null&&cC(d,p)};var gd=R(null);function J1(){var d=gd.current;return d!==null?d:Fa.pooledCache}function Kg(d,p){p===null?W(gd,gd.current):W(gd,p.pool)}function dC(){var d=J1();return d===null?null:{parent:Cr._currentValue,pool:d}}var Qp=Error(r(460)),uC=Error(r(474)),Qg=Error(r(542)),ej={then:function(){}};function mC(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Zg(){}function pC(d,p,_){switch(_=d[_],_===void 0?d.push(p):_!==p&&(p.then(Zg,Zg),p=_),p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,fC(d),d;default:if(typeof p.status=="string")p.then(Zg,Zg);else{if(d=Fa,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=p,d.status="pending",d.then(function(k){if(p.status==="pending"){var O=p;O.status="fulfilled",O.value=k}},function(k){if(p.status==="pending"){var O=p;O.status="rejected",O.reason=k}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,fC(d),d}throw Zp=p,Qp}}var Zp=null;function hC(){if(Zp===null)throw Error(r(459));var d=Zp;return Zp=null,d}function fC(d){if(d===Qp||d===Qg)throw Error(r(483))}var sc=!1;function tj(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sj(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function ac(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function rc(d,p,_){var k=d.updateQueue;if(k===null)return null;if(k=k.shared,(va&2)!==0){var O=k.pending;return O===null?p.next=p:(p.next=O.next,O.next=p),k.pending=p,p=Ug(d),tC(d,null,_),p}return Bg(d,k,p,_),Ug(d)}function Xp(d,p,_){if(p=p.updateQueue,p!==null&&(p=p.shared,(_&4194048)!==0)){var k=p.lanes;k&=d.pendingLanes,_|=k,p.lanes=_,ha(d,_)}}function aj(d,p){var _=d.updateQueue,k=d.alternate;if(k!==null&&(k=k.updateQueue,_===k)){var O=null,U=null;if(_=_.firstBaseUpdate,_!==null){do{var se={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};U===null?O=U=se:U=U.next=se,_=_.next}while(_!==null);U===null?O=U=p:U=U.next=p}else O=U=p;_={baseState:k.baseState,firstBaseUpdate:O,lastBaseUpdate:U,shared:k.shared,callbacks:k.callbacks},d.updateQueue=_;return}d=_.lastBaseUpdate,d===null?_.firstBaseUpdate=p:d.next=p,_.lastBaseUpdate=p}var rj=!1;function Jp(){if(rj){var d=qu;if(d!==null)throw d}}function eh(d,p,_,k){rj=!1;var O=d.updateQueue;sc=!1;var U=O.firstBaseUpdate,se=O.lastBaseUpdate,ue=O.shared.pending;if(ue!==null){O.shared.pending=null;var we=ue,Ve=we.next;we.next=null,se===null?U=Ve:se.next=Ve,se=we;var pt=d.alternate;pt!==null&&(pt=pt.updateQueue,ue=pt.lastBaseUpdate,ue!==se&&(ue===null?pt.firstBaseUpdate=Ve:ue.next=Ve,pt.lastBaseUpdate=we))}if(U!==null){var wt=O.baseState;se=0,pt=Ve=we=null,ue=U;do{var Ke=ue.lane&-536870913,Ze=Ke!==ue.lane;if(Ze?(aa&Ke)===Ke:(k&Ke)===Ke){Ke!==0&&Ke===zu&&(rj=!0),pt!==null&&(pt=pt.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var Ss=d,js=ue;Ke=p;var Ea=_;switch(js.tag){case 1:if(Ss=js.payload,typeof Ss=="function"){wt=Ss.call(Ea,wt,Ke);break e}wt=Ss;break e;case 3:Ss.flags=Ss.flags&-65537|128;case 0:if(Ss=js.payload,Ke=typeof Ss=="function"?Ss.call(Ea,wt,Ke):Ss,Ke==null)break e;wt=u({},wt,Ke);break e;case 2:sc=!0}}Ke=ue.callback,Ke!==null&&(d.flags|=64,Ze&&(d.flags|=8192),Ze=O.callbacks,Ze===null?O.callbacks=[Ke]:Ze.push(Ke))}else Ze={lane:Ke,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},pt===null?(Ve=pt=Ze,we=wt):pt=pt.next=Ze,se|=Ke;if(ue=ue.next,ue===null){if(ue=O.shared.pending,ue===null)break;Ze=ue,ue=Ze.next,Ze.next=null,O.lastBaseUpdate=Ze,O.shared.pending=null}}while(!0);pt===null&&(we=wt),O.baseState=we,O.firstBaseUpdate=Ve,O.lastBaseUpdate=pt,U===null&&(O.shared.lanes=0),mc|=se,d.lanes=se,d.memoizedState=wt}}function xC(d,p){if(typeof d!="function")throw Error(r(191,d));d.call(p)}function gC(d,p){var _=d.callbacks;if(_!==null)for(d.callbacks=null,d=0;d<_.length;d++)xC(_[d],p)}var Bu=R(null),Xg=R(0);function yC(d,p){d=bl,W(Xg,d),W(Bu,p),bl=d|p.baseLanes}function nj(){W(Xg,bl),W(Bu,Bu.current)}function ij(){bl=Xg.current,$(Bu),$(Xg)}var nc=0,Vs=null,Pa=null,br=null,Jg=!1,Uu=!1,yd=!1,e0=0,th=0,Vu=null,J$=0;function cr(){throw Error(r(321))}function oj(d,p){if(p===null)return!1;for(var _=0;_<p.length&&_<d.length;_++)if(!Hn(d[_],p[_]))return!1;return!0}function lj(d,p,_,k,O,U){return nc=U,Vs=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,q.H=d===null||d.memoizedState===null?t5:s5,yd=!1,U=_(k,O),yd=!1,Uu&&(U=vC(p,_,k,O)),bC(d),U}function bC(d){q.H=i0;var p=Pa!==null&&Pa.next!==null;if(nc=0,br=Pa=Vs=null,Jg=!1,th=0,Vu=null,p)throw Error(r(300));d===null||Mr||(d=d.dependencies,d!==null&&Yg(d)&&(Mr=!0))}function vC(d,p,_,k){Vs=d;var O=0;do{if(Uu&&(Vu=null),th=0,Uu=!1,25<=O)throw Error(r(301));if(O+=1,br=Pa=null,d.updateQueue!=null){var U=d.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}q.H=iz,U=p(_,k)}while(Uu);return U}function ez(){var d=q.H,p=d.useState()[0];return p=typeof p.then=="function"?sh(p):p,d=d.useState()[0],(Pa!==null?Pa.memoizedState:null)!==d&&(Vs.flags|=1024),p}function cj(){var d=e0!==0;return e0=0,d}function dj(d,p,_){p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~_}function uj(d){if(Jg){for(d=d.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Jg=!1}nc=0,br=Pa=Vs=null,Uu=!1,th=e0=0,Vu=null}function Pn(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Vs.memoizedState=br=d:br=br.next=d,br}function vr(){if(Pa===null){var d=Vs.alternate;d=d!==null?d.memoizedState:null}else d=Pa.next;var p=br===null?Vs.memoizedState:br.next;if(p!==null)br=p,Pa=d;else{if(d===null)throw Vs.alternate===null?Error(r(467)):Error(r(310));Pa=d,d={memoizedState:Pa.memoizedState,baseState:Pa.baseState,baseQueue:Pa.baseQueue,queue:Pa.queue,next:null},br===null?Vs.memoizedState=br=d:br=br.next=d}return br}function mj(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sh(d){var p=th;return th+=1,Vu===null&&(Vu=[]),d=pC(Vu,d,p),p=Vs,(br===null?p.memoizedState:br.next)===null&&(p=p.alternate,q.H=p===null||p.memoizedState===null?t5:s5),d}function t0(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return sh(d);if(d.$$typeof===C)return Jr(d)}throw Error(r(438,String(d)))}function pj(d){var p=null,_=Vs.updateQueue;if(_!==null&&(p=_.memoCache),p==null){var k=Vs.alternate;k!==null&&(k=k.updateQueue,k!==null&&(k=k.memoCache,k!=null&&(p={data:k.data.map(function(O){return O.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),_===null&&(_=mj(),Vs.updateQueue=_),_.memoCache=p,_=p.data[p.index],_===void 0)for(_=p.data[p.index]=Array(d),k=0;k<d;k++)_[k]=F;return p.index++,_}function pl(d,p){return typeof p=="function"?p(d):p}function s0(d){var p=vr();return hj(p,Pa,d)}function hj(d,p,_){var k=d.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=_;var O=d.baseQueue,U=k.pending;if(U!==null){if(O!==null){var se=O.next;O.next=U.next,U.next=se}p.baseQueue=O=U,k.pending=null}if(U=d.baseState,O===null)d.memoizedState=U;else{p=O.next;var ue=se=null,we=null,Ve=p,pt=!1;do{var wt=Ve.lane&-536870913;if(wt!==Ve.lane?(aa&wt)===wt:(nc&wt)===wt){var Ke=Ve.revertLane;if(Ke===0)we!==null&&(we=we.next={lane:0,revertLane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),wt===zu&&(pt=!0);else if((nc&Ke)===Ke){Ve=Ve.next,Ke===zu&&(pt=!0);continue}else wt={lane:0,revertLane:Ve.revertLane,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null},we===null?(ue=we=wt,se=U):we=we.next=wt,Vs.lanes|=Ke,mc|=Ke;wt=Ve.action,yd&&_(U,wt),U=Ve.hasEagerState?Ve.eagerState:_(U,wt)}else Ke={lane:wt,revertLane:Ve.revertLane,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null},we===null?(ue=we=Ke,se=U):we=we.next=Ke,Vs.lanes|=wt,mc|=wt;Ve=Ve.next}while(Ve!==null&&Ve!==p);if(we===null?se=U:we.next=ue,!Hn(U,d.memoizedState)&&(Mr=!0,pt&&(_=qu,_!==null)))throw _;d.memoizedState=U,d.baseState=se,d.baseQueue=we,k.lastRenderedState=U}return O===null&&(k.lanes=0),[d.memoizedState,k.dispatch]}function fj(d){var p=vr(),_=p.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=d;var k=_.dispatch,O=_.pending,U=p.memoizedState;if(O!==null){_.pending=null;var se=O=O.next;do U=d(U,se.action),se=se.next;while(se!==O);Hn(U,p.memoizedState)||(Mr=!0),p.memoizedState=U,p.baseQueue===null&&(p.baseState=U),_.lastRenderedState=U}return[U,k]}function jC(d,p,_){var k=Vs,O=vr(),U=da;if(U){if(_===void 0)throw Error(r(407));_=_()}else _=p();var se=!Hn((Pa||O).memoizedState,_);se&&(O.memoizedState=_,Mr=!0),O=O.queue;var ue=_C.bind(null,k,O,d);if(ah(2048,8,ue,[d]),O.getSnapshot!==p||se||br!==null&&br.memoizedState.tag&1){if(k.flags|=2048,Hu(9,a0(),wC.bind(null,k,O,_,p),null),Fa===null)throw Error(r(349));U||(nc&124)!==0||NC(k,p,_)}return _}function NC(d,p,_){d.flags|=16384,d={getSnapshot:p,value:_},p=Vs.updateQueue,p===null?(p=mj(),Vs.updateQueue=p,p.stores=[d]):(_=p.stores,_===null?p.stores=[d]:_.push(d))}function wC(d,p,_,k){p.value=_,p.getSnapshot=k,SC(p)&&CC(d)}function _C(d,p,_){return _(function(){SC(p)&&CC(d)})}function SC(d){var p=d.getSnapshot;d=d.value;try{var _=p();return!Hn(d,_)}catch{return!0}}function CC(d){var p=Ou(d,2);p!==null&&Zn(p,d,2)}function xj(d){var p=Pn();if(typeof d=="function"){var _=d;if(d=_(),yd){Et(!0);try{_()}finally{Et(!1)}}}return p.memoizedState=p.baseState=d,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:d},p}function PC(d,p,_,k){return d.baseState=_,hj(d,Pa,typeof k=="function"?k:pl)}function tz(d,p,_,k,O){if(n0(d))throw Error(r(485));if(d=p.action,d!==null){var U={payload:O,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(se){U.listeners.push(se)}};q.T!==null?_(!0):U.isTransition=!1,k(U),_=p.pending,_===null?(U.next=p.pending=U,kC(p,U)):(U.next=_.next,p.pending=_.next=U)}}function kC(d,p){var _=p.action,k=p.payload,O=d.state;if(p.isTransition){var U=q.T,se={};q.T=se;try{var ue=_(O,k),we=q.S;we!==null&&we(se,ue),EC(d,p,ue)}catch(Ve){gj(d,p,Ve)}finally{q.T=U}}else try{U=_(O,k),EC(d,p,U)}catch(Ve){gj(d,p,Ve)}}function EC(d,p,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(k){TC(d,p,k)},function(k){return gj(d,p,k)}):TC(d,p,_)}function TC(d,p,_){p.status="fulfilled",p.value=_,MC(p),d.state=_,p=d.pending,p!==null&&(_=p.next,_===p?d.pending=null:(_=_.next,p.next=_,kC(d,_)))}function gj(d,p,_){var k=d.pending;if(d.pending=null,k!==null){k=k.next;do p.status="rejected",p.reason=_,MC(p),p=p.next;while(p!==k)}d.action=null}function MC(d){d=d.listeners;for(var p=0;p<d.length;p++)(0,d[p])()}function DC(d,p){return p}function RC(d,p){if(da){var _=Fa.formState;if(_!==null){e:{var k=Vs;if(da){if(Ja){t:{for(var O=Ja,U=wo;O.nodeType!==8;){if(!U){O=null;break t}if(O=io(O.nextSibling),O===null){O=null;break t}}U=O.data,O=U==="F!"||U==="F"?O:null}if(O){Ja=io(O.nextSibling),k=O.data==="F!";break e}}hd(k)}k=!1}k&&(p=_[0])}}return _=Pn(),_.memoizedState=_.baseState=p,k={pending:null,lanes:0,dispatch:null,lastRenderedReducer:DC,lastRenderedState:p},_.queue=k,_=XC.bind(null,Vs,k),k.dispatch=_,k=xj(!1),U=Nj.bind(null,Vs,!1,k.queue),k=Pn(),O={state:p,dispatch:null,action:d,pending:null},k.queue=O,_=tz.bind(null,Vs,O,U,_),O.dispatch=_,k.memoizedState=d,[p,_,!1]}function AC(d){var p=vr();return IC(p,Pa,d)}function IC(d,p,_){if(p=hj(d,p,DC)[0],d=s0(pl)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var k=sh(p)}catch(se){throw se===Qp?Qg:se}else k=p;p=vr();var O=p.queue,U=O.dispatch;return _!==p.memoizedState&&(Vs.flags|=2048,Hu(9,a0(),sz.bind(null,O,_),null)),[k,U,d]}function sz(d,p){d.action=p}function OC(d){var p=vr(),_=Pa;if(_!==null)return IC(p,_,d);vr(),p=p.memoizedState,_=vr();var k=_.queue.dispatch;return _.memoizedState=d,[p,k,!1]}function Hu(d,p,_,k){return d={tag:d,create:_,deps:k,inst:p,next:null},p=Vs.updateQueue,p===null&&(p=mj(),Vs.updateQueue=p),_=p.lastEffect,_===null?p.lastEffect=d.next=d:(k=_.next,_.next=d,d.next=k,p.lastEffect=d),d}function a0(){return{destroy:void 0,resource:void 0}}function FC(){return vr().memoizedState}function r0(d,p,_,k){var O=Pn();k=k===void 0?null:k,Vs.flags|=d,O.memoizedState=Hu(1|p,a0(),_,k)}function ah(d,p,_,k){var O=vr();k=k===void 0?null:k;var U=O.memoizedState.inst;Pa!==null&&k!==null&&oj(k,Pa.memoizedState.deps)?O.memoizedState=Hu(p,U,_,k):(Vs.flags|=d,O.memoizedState=Hu(1|p,U,_,k))}function LC(d,p){r0(8390656,8,d,p)}function $C(d,p){ah(2048,8,d,p)}function zC(d,p){return ah(4,2,d,p)}function qC(d,p){return ah(4,4,d,p)}function BC(d,p){if(typeof p=="function"){d=d();var _=p(d);return function(){typeof _=="function"?_():p(null)}}if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function UC(d,p,_){_=_!=null?_.concat([d]):null,ah(4,4,BC.bind(null,p,d),_)}function yj(){}function VC(d,p){var _=vr();p=p===void 0?null:p;var k=_.memoizedState;return p!==null&&oj(p,k[1])?k[0]:(_.memoizedState=[d,p],d)}function HC(d,p){var _=vr();p=p===void 0?null:p;var k=_.memoizedState;if(p!==null&&oj(p,k[1]))return k[0];if(k=d(),yd){Et(!0);try{d()}finally{Et(!1)}}return _.memoizedState=[k,p],k}function bj(d,p,_){return _===void 0||(nc&1073741824)!==0?d.memoizedState=p:(d.memoizedState=_,d=G5(),Vs.lanes|=d,mc|=d,_)}function WC(d,p,_,k){return Hn(_,p)?_:Bu.current!==null?(d=bj(d,_,k),Hn(d,p)||(Mr=!0),d):(nc&42)===0?(Mr=!0,d.memoizedState=_):(d=G5(),Vs.lanes|=d,mc|=d,p)}function YC(d,p,_,k,O){var U=V.p;V.p=U!==0&&8>U?U:8;var se=q.T,ue={};q.T=ue,Nj(d,!1,p,_);try{var we=O(),Ve=q.S;if(Ve!==null&&Ve(ue,we),we!==null&&typeof we=="object"&&typeof we.then=="function"){var pt=X$(we,k);rh(d,p,pt,Qn(d))}else rh(d,p,k,Qn(d))}catch(wt){rh(d,p,{then:function(){},status:"rejected",reason:wt},Qn())}finally{V.p=U,q.T=se}}function az(){}function vj(d,p,_,k){if(d.tag!==5)throw Error(r(476));var O=GC(d).queue;YC(d,O,p,G,_===null?az:function(){return KC(d),_(k)})}function GC(d){var p=d.memoizedState;if(p!==null)return p;p={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:G},next:null};var _={};return p.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:_},next:null},d.memoizedState=p,d=d.alternate,d!==null&&(d.memoizedState=p),p}function KC(d){var p=GC(d).next.queue;rh(d,p,{},Qn())}function jj(){return Jr(Nh)}function QC(){return vr().memoizedState}function ZC(){return vr().memoizedState}function rz(d){for(var p=d.return;p!==null;){switch(p.tag){case 24:case 3:var _=Qn();d=ac(_);var k=rc(p,d,_);k!==null&&(Zn(k,p,_),Xp(k,p,_)),p={cache:Z1()},d.payload=p;return}p=p.return}}function nz(d,p,_){var k=Qn();_={lane:k,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null},n0(d)?JC(p,_):(_=q1(d,p,_,k),_!==null&&(Zn(_,d,k),e5(_,p,k)))}function XC(d,p,_){var k=Qn();rh(d,p,_,k)}function rh(d,p,_,k){var O={lane:k,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null};if(n0(d))JC(p,O);else{var U=d.alternate;if(d.lanes===0&&(U===null||U.lanes===0)&&(U=p.lastRenderedReducer,U!==null))try{var se=p.lastRenderedState,ue=U(se,_);if(O.hasEagerState=!0,O.eagerState=ue,Hn(ue,se))return Bg(d,p,O,0),Fa===null&&qg(),!1}catch{}if(_=q1(d,p,O,k),_!==null)return Zn(_,d,k),e5(_,p,k),!0}return!1}function Nj(d,p,_,k){if(k={lane:2,revertLane:e2(),action:k,hasEagerState:!1,eagerState:null,next:null},n0(d)){if(p)throw Error(r(479))}else p=q1(d,_,k,2),p!==null&&Zn(p,d,2)}function n0(d){var p=d.alternate;return d===Vs||p!==null&&p===Vs}function JC(d,p){Uu=Jg=!0;var _=d.pending;_===null?p.next=p:(p.next=_.next,_.next=p),d.pending=p}function e5(d,p,_){if((_&4194048)!==0){var k=p.lanes;k&=d.pendingLanes,_|=k,p.lanes=_,ha(d,_)}}var i0={readContext:Jr,use:t0,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useLayoutEffect:cr,useInsertionEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useSyncExternalStore:cr,useId:cr,useHostTransitionStatus:cr,useFormState:cr,useActionState:cr,useOptimistic:cr,useMemoCache:cr,useCacheRefresh:cr},t5={readContext:Jr,use:t0,useCallback:function(d,p){return Pn().memoizedState=[d,p===void 0?null:p],d},useContext:Jr,useEffect:LC,useImperativeHandle:function(d,p,_){_=_!=null?_.concat([d]):null,r0(4194308,4,BC.bind(null,p,d),_)},useLayoutEffect:function(d,p){return r0(4194308,4,d,p)},useInsertionEffect:function(d,p){r0(4,2,d,p)},useMemo:function(d,p){var _=Pn();p=p===void 0?null:p;var k=d();if(yd){Et(!0);try{d()}finally{Et(!1)}}return _.memoizedState=[k,p],k},useReducer:function(d,p,_){var k=Pn();if(_!==void 0){var O=_(p);if(yd){Et(!0);try{_(p)}finally{Et(!1)}}}else O=p;return k.memoizedState=k.baseState=O,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:O},k.queue=d,d=d.dispatch=nz.bind(null,Vs,d),[k.memoizedState,d]},useRef:function(d){var p=Pn();return d={current:d},p.memoizedState=d},useState:function(d){d=xj(d);var p=d.queue,_=XC.bind(null,Vs,p);return p.dispatch=_,[d.memoizedState,_]},useDebugValue:yj,useDeferredValue:function(d,p){var _=Pn();return bj(_,d,p)},useTransition:function(){var d=xj(!1);return d=YC.bind(null,Vs,d.queue,!0,!1),Pn().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,p,_){var k=Vs,O=Pn();if(da){if(_===void 0)throw Error(r(407));_=_()}else{if(_=p(),Fa===null)throw Error(r(349));(aa&124)!==0||NC(k,p,_)}O.memoizedState=_;var U={value:_,getSnapshot:p};return O.queue=U,LC(_C.bind(null,k,U,d),[d]),k.flags|=2048,Hu(9,a0(),wC.bind(null,k,U,_,p),null),_},useId:function(){var d=Pn(),p=Fa.identifierPrefix;if(da){var _=dl,k=cl;_=(k&~(1<<32-be(k)-1)).toString(32)+_,p=""+p+"R"+_,_=e0++,0<_&&(p+="H"+_.toString(32)),p+=""}else _=J$++,p=""+p+"r"+_.toString(32)+"";return d.memoizedState=p},useHostTransitionStatus:jj,useFormState:RC,useActionState:RC,useOptimistic:function(d){var p=Pn();p.memoizedState=p.baseState=d;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=_,p=Nj.bind(null,Vs,!0,_),_.dispatch=p,[d,p]},useMemoCache:pj,useCacheRefresh:function(){return Pn().memoizedState=rz.bind(null,Vs)}},s5={readContext:Jr,use:t0,useCallback:VC,useContext:Jr,useEffect:$C,useImperativeHandle:UC,useInsertionEffect:zC,useLayoutEffect:qC,useMemo:HC,useReducer:s0,useRef:FC,useState:function(){return s0(pl)},useDebugValue:yj,useDeferredValue:function(d,p){var _=vr();return WC(_,Pa.memoizedState,d,p)},useTransition:function(){var d=s0(pl)[0],p=vr().memoizedState;return[typeof d=="boolean"?d:sh(d),p]},useSyncExternalStore:jC,useId:QC,useHostTransitionStatus:jj,useFormState:AC,useActionState:AC,useOptimistic:function(d,p){var _=vr();return PC(_,Pa,d,p)},useMemoCache:pj,useCacheRefresh:ZC},iz={readContext:Jr,use:t0,useCallback:VC,useContext:Jr,useEffect:$C,useImperativeHandle:UC,useInsertionEffect:zC,useLayoutEffect:qC,useMemo:HC,useReducer:fj,useRef:FC,useState:function(){return fj(pl)},useDebugValue:yj,useDeferredValue:function(d,p){var _=vr();return Pa===null?bj(_,d,p):WC(_,Pa.memoizedState,d,p)},useTransition:function(){var d=fj(pl)[0],p=vr().memoizedState;return[typeof d=="boolean"?d:sh(d),p]},useSyncExternalStore:jC,useId:QC,useHostTransitionStatus:jj,useFormState:OC,useActionState:OC,useOptimistic:function(d,p){var _=vr();return Pa!==null?PC(_,Pa,d,p):(_.baseState=d,[d,_.queue.dispatch])},useMemoCache:pj,useCacheRefresh:ZC},Wu=null,nh=0;function o0(d){var p=nh;return nh+=1,Wu===null&&(Wu=[]),pC(Wu,d,p)}function ih(d,p){p=p.props.ref,d.ref=p!==void 0?p:null}function l0(d,p){throw p.$$typeof===h?Error(r(525)):(d=Object.prototype.toString.call(p),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d)))}function a5(d){var p=d._init;return p(d._payload)}function r5(d){function p(Fe,Te){if(d){var Ue=Fe.deletions;Ue===null?(Fe.deletions=[Te],Fe.flags|=16):Ue.push(Te)}}function _(Fe,Te){if(!d)return null;for(;Te!==null;)p(Fe,Te),Te=Te.sibling;return null}function k(Fe){for(var Te=new Map;Fe!==null;)Fe.key!==null?Te.set(Fe.key,Fe):Te.set(Fe.index,Fe),Fe=Fe.sibling;return Te}function O(Fe,Te){return Fe=ll(Fe,Te),Fe.index=0,Fe.sibling=null,Fe}function U(Fe,Te,Ue){return Fe.index=Ue,d?(Ue=Fe.alternate,Ue!==null?(Ue=Ue.index,Ue<Te?(Fe.flags|=67108866,Te):Ue):(Fe.flags|=67108866,Te)):(Fe.flags|=1048576,Te)}function se(Fe){return d&&Fe.alternate===null&&(Fe.flags|=67108866),Fe}function ue(Fe,Te,Ue,yt){return Te===null||Te.tag!==6?(Te=U1(Ue,Fe.mode,yt),Te.return=Fe,Te):(Te=O(Te,Ue),Te.return=Fe,Te)}function we(Fe,Te,Ue,yt){var ns=Ue.type;return ns===w?pt(Fe,Te,Ue.props.children,yt,Ue.key):Te!==null&&(Te.elementType===ns||typeof ns=="object"&&ns!==null&&ns.$$typeof===A&&a5(ns)===Te.type)?(Te=O(Te,Ue.props),ih(Te,Ue),Te.return=Fe,Te):(Te=Vg(Ue.type,Ue.key,Ue.props,null,Fe.mode,yt),ih(Te,Ue),Te.return=Fe,Te)}function Ve(Fe,Te,Ue,yt){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Ue.containerInfo||Te.stateNode.implementation!==Ue.implementation?(Te=V1(Ue,Fe.mode,yt),Te.return=Fe,Te):(Te=O(Te,Ue.children||[]),Te.return=Fe,Te)}function pt(Fe,Te,Ue,yt,ns){return Te===null||Te.tag!==7?(Te=dd(Ue,Fe.mode,yt,ns),Te.return=Fe,Te):(Te=O(Te,Ue),Te.return=Fe,Te)}function wt(Fe,Te,Ue){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Te=U1(""+Te,Fe.mode,Ue),Te.return=Fe,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case f:return Ue=Vg(Te.type,Te.key,Te.props,null,Fe.mode,Ue),ih(Ue,Te),Ue.return=Fe,Ue;case b:return Te=V1(Te,Fe.mode,Ue),Te.return=Fe,Te;case A:var yt=Te._init;return Te=yt(Te._payload),wt(Fe,Te,Ue)}if(B(Te)||I(Te))return Te=dd(Te,Fe.mode,Ue,null),Te.return=Fe,Te;if(typeof Te.then=="function")return wt(Fe,o0(Te),Ue);if(Te.$$typeof===C)return wt(Fe,Gg(Fe,Te),Ue);l0(Fe,Te)}return null}function Ke(Fe,Te,Ue,yt){var ns=Te!==null?Te.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return ns!==null?null:ue(Fe,Te,""+Ue,yt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case f:return Ue.key===ns?we(Fe,Te,Ue,yt):null;case b:return Ue.key===ns?Ve(Fe,Te,Ue,yt):null;case A:return ns=Ue._init,Ue=ns(Ue._payload),Ke(Fe,Te,Ue,yt)}if(B(Ue)||I(Ue))return ns!==null?null:pt(Fe,Te,Ue,yt,null);if(typeof Ue.then=="function")return Ke(Fe,Te,o0(Ue),yt);if(Ue.$$typeof===C)return Ke(Fe,Te,Gg(Fe,Ue),yt);l0(Fe,Ue)}return null}function Ze(Fe,Te,Ue,yt,ns){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return Fe=Fe.get(Ue)||null,ue(Te,Fe,""+yt,ns);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case f:return Fe=Fe.get(yt.key===null?Ue:yt.key)||null,we(Te,Fe,yt,ns);case b:return Fe=Fe.get(yt.key===null?Ue:yt.key)||null,Ve(Te,Fe,yt,ns);case A:var Gs=yt._init;return yt=Gs(yt._payload),Ze(Fe,Te,Ue,yt,ns)}if(B(yt)||I(yt))return Fe=Fe.get(Ue)||null,pt(Te,Fe,yt,ns,null);if(typeof yt.then=="function")return Ze(Fe,Te,Ue,o0(yt),ns);if(yt.$$typeof===C)return Ze(Fe,Te,Ue,Gg(Te,yt),ns);l0(Te,yt)}return null}function Ss(Fe,Te,Ue,yt){for(var ns=null,Gs=null,us=Te,ws=Te=0,Rr=null;us!==null&&ws<Ue.length;ws++){us.index>ws?(Rr=us,us=null):Rr=us.sibling;var ca=Ke(Fe,us,Ue[ws],yt);if(ca===null){us===null&&(us=Rr);break}d&&us&&ca.alternate===null&&p(Fe,us),Te=U(ca,Te,ws),Gs===null?ns=ca:Gs.sibling=ca,Gs=ca,us=Rr}if(ws===Ue.length)return _(Fe,us),da&&md(Fe,ws),ns;if(us===null){for(;ws<Ue.length;ws++)us=wt(Fe,Ue[ws],yt),us!==null&&(Te=U(us,Te,ws),Gs===null?ns=us:Gs.sibling=us,Gs=us);return da&&md(Fe,ws),ns}for(us=k(us);ws<Ue.length;ws++)Rr=Ze(us,Fe,ws,Ue[ws],yt),Rr!==null&&(d&&Rr.alternate!==null&&us.delete(Rr.key===null?ws:Rr.key),Te=U(Rr,Te,ws),Gs===null?ns=Rr:Gs.sibling=Rr,Gs=Rr);return d&&us.forEach(function(jc){return p(Fe,jc)}),da&&md(Fe,ws),ns}function js(Fe,Te,Ue,yt){if(Ue==null)throw Error(r(151));for(var ns=null,Gs=null,us=Te,ws=Te=0,Rr=null,ca=Ue.next();us!==null&&!ca.done;ws++,ca=Ue.next()){us.index>ws?(Rr=us,us=null):Rr=us.sibling;var jc=Ke(Fe,us,ca.value,yt);if(jc===null){us===null&&(us=Rr);break}d&&us&&jc.alternate===null&&p(Fe,us),Te=U(jc,Te,ws),Gs===null?ns=jc:Gs.sibling=jc,Gs=jc,us=Rr}if(ca.done)return _(Fe,us),da&&md(Fe,ws),ns;if(us===null){for(;!ca.done;ws++,ca=Ue.next())ca=wt(Fe,ca.value,yt),ca!==null&&(Te=U(ca,Te,ws),Gs===null?ns=ca:Gs.sibling=ca,Gs=ca);return da&&md(Fe,ws),ns}for(us=k(us);!ca.done;ws++,ca=Ue.next())ca=Ze(us,Fe,ws,ca.value,yt),ca!==null&&(d&&ca.alternate!==null&&us.delete(ca.key===null?ws:ca.key),Te=U(ca,Te,ws),Gs===null?ns=ca:Gs.sibling=ca,Gs=ca);return d&&us.forEach(function(oq){return p(Fe,oq)}),da&&md(Fe,ws),ns}function Ea(Fe,Te,Ue,yt){if(typeof Ue=="object"&&Ue!==null&&Ue.type===w&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case f:e:{for(var ns=Ue.key;Te!==null;){if(Te.key===ns){if(ns=Ue.type,ns===w){if(Te.tag===7){_(Fe,Te.sibling),yt=O(Te,Ue.props.children),yt.return=Fe,Fe=yt;break e}}else if(Te.elementType===ns||typeof ns=="object"&&ns!==null&&ns.$$typeof===A&&a5(ns)===Te.type){_(Fe,Te.sibling),yt=O(Te,Ue.props),ih(yt,Ue),yt.return=Fe,Fe=yt;break e}_(Fe,Te);break}else p(Fe,Te);Te=Te.sibling}Ue.type===w?(yt=dd(Ue.props.children,Fe.mode,yt,Ue.key),yt.return=Fe,Fe=yt):(yt=Vg(Ue.type,Ue.key,Ue.props,null,Fe.mode,yt),ih(yt,Ue),yt.return=Fe,Fe=yt)}return se(Fe);case b:e:{for(ns=Ue.key;Te!==null;){if(Te.key===ns)if(Te.tag===4&&Te.stateNode.containerInfo===Ue.containerInfo&&Te.stateNode.implementation===Ue.implementation){_(Fe,Te.sibling),yt=O(Te,Ue.children||[]),yt.return=Fe,Fe=yt;break e}else{_(Fe,Te);break}else p(Fe,Te);Te=Te.sibling}yt=V1(Ue,Fe.mode,yt),yt.return=Fe,Fe=yt}return se(Fe);case A:return ns=Ue._init,Ue=ns(Ue._payload),Ea(Fe,Te,Ue,yt)}if(B(Ue))return Ss(Fe,Te,Ue,yt);if(I(Ue)){if(ns=I(Ue),typeof ns!="function")throw Error(r(150));return Ue=ns.call(Ue),js(Fe,Te,Ue,yt)}if(typeof Ue.then=="function")return Ea(Fe,Te,o0(Ue),yt);if(Ue.$$typeof===C)return Ea(Fe,Te,Gg(Fe,Ue),yt);l0(Fe,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint"?(Ue=""+Ue,Te!==null&&Te.tag===6?(_(Fe,Te.sibling),yt=O(Te,Ue),yt.return=Fe,Fe=yt):(_(Fe,Te),yt=U1(Ue,Fe.mode,yt),yt.return=Fe,Fe=yt),se(Fe)):_(Fe,Te)}return function(Fe,Te,Ue,yt){try{nh=0;var ns=Ea(Fe,Te,Ue,yt);return Wu=null,ns}catch(us){if(us===Qp||us===Qg)throw us;var Gs=Wn(29,us,null,Fe.mode);return Gs.lanes=yt,Gs.return=Fe,Gs}}}var Yu=r5(!0),n5=r5(!1),_i=R(null),_o=null;function ic(d){var p=d.alternate;W(Pr,Pr.current&1),W(_i,d),_o===null&&(p===null||Bu.current!==null||p.memoizedState!==null)&&(_o=d)}function i5(d){if(d.tag===22){if(W(Pr,Pr.current),W(_i,d),_o===null){var p=d.alternate;p!==null&&p.memoizedState!==null&&(_o=d)}}else oc()}function oc(){W(Pr,Pr.current),W(_i,_i.current)}function hl(d){$(_i),_o===d&&(_o=null),$(Pr)}var Pr=R(0);function c0(d){for(var p=d;p!==null;){if(p.tag===13){var _=p.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||m2(_)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function wj(d,p,_,k){p=d.memoizedState,_=_(k,p),_=_==null?p:u({},p,_),d.memoizedState=_,d.lanes===0&&(d.updateQueue.baseState=_)}var _j={enqueueSetState:function(d,p,_){d=d._reactInternals;var k=Qn(),O=ac(k);O.payload=p,_!=null&&(O.callback=_),p=rc(d,O,k),p!==null&&(Zn(p,d,k),Xp(p,d,k))},enqueueReplaceState:function(d,p,_){d=d._reactInternals;var k=Qn(),O=ac(k);O.tag=1,O.payload=p,_!=null&&(O.callback=_),p=rc(d,O,k),p!==null&&(Zn(p,d,k),Xp(p,d,k))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var _=Qn(),k=ac(_);k.tag=2,p!=null&&(k.callback=p),p=rc(d,k,_),p!==null&&(Zn(p,d,_),Xp(p,d,_))}};function o5(d,p,_,k,O,U,se){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(k,U,se):p.prototype&&p.prototype.isPureReactComponent?!Bp(_,k)||!Bp(O,U):!0}function l5(d,p,_,k){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(_,k),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(_,k),p.state!==d&&_j.enqueueReplaceState(p,p.state,null)}function bd(d,p){var _=p;if("ref"in p){_={};for(var k in p)k!=="ref"&&(_[k]=p[k])}if(d=d.defaultProps){_===p&&(_=u({},_));for(var O in d)_[O]===void 0&&(_[O]=d[O])}return _}var d0=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function c5(d){d0(d)}function d5(d){console.error(d)}function u5(d){d0(d)}function u0(d,p){try{var _=d.onUncaughtError;_(p.value,{componentStack:p.stack})}catch(k){setTimeout(function(){throw k})}}function m5(d,p,_){try{var k=d.onCaughtError;k(_.value,{componentStack:_.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function Sj(d,p,_){return _=ac(_),_.tag=3,_.payload={element:null},_.callback=function(){u0(d,p)},_}function p5(d){return d=ac(d),d.tag=3,d}function h5(d,p,_,k){var O=_.type.getDerivedStateFromError;if(typeof O=="function"){var U=k.value;d.payload=function(){return O(U)},d.callback=function(){m5(p,_,k)}}var se=_.stateNode;se!==null&&typeof se.componentDidCatch=="function"&&(d.callback=function(){m5(p,_,k),typeof O!="function"&&(pc===null?pc=new Set([this]):pc.add(this));var ue=k.stack;this.componentDidCatch(k.value,{componentStack:ue!==null?ue:""})})}function oz(d,p,_,k,O){if(_.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){if(p=_.alternate,p!==null&&Yp(p,_,O,!0),_=_i.current,_!==null){switch(_.tag){case 13:return _o===null?Kj():_.alternate===null&&er===0&&(er=3),_.flags&=-257,_.flags|=65536,_.lanes=O,k===ej?_.flags|=16384:(p=_.updateQueue,p===null?_.updateQueue=new Set([k]):p.add(k),Zj(d,k,O)),!1;case 22:return _.flags|=65536,k===ej?_.flags|=16384:(p=_.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([k])},_.updateQueue=p):(_=p.retryQueue,_===null?p.retryQueue=new Set([k]):_.add(k)),Zj(d,k,O)),!1}throw Error(r(435,_.tag))}return Zj(d,k,O),Kj(),!1}if(da)return p=_i.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=O,k!==Y1&&(d=Error(r(422),{cause:k}),Wp(vi(d,_)))):(k!==Y1&&(p=Error(r(423),{cause:k}),Wp(vi(p,_))),d=d.current.alternate,d.flags|=65536,O&=-O,d.lanes|=O,k=vi(k,_),O=Sj(d.stateNode,k,O),aj(d,O),er!==4&&(er=2)),!1;var U=Error(r(520),{cause:k});if(U=vi(U,_),ph===null?ph=[U]:ph.push(U),er!==4&&(er=2),p===null)return!0;k=vi(k,_),_=p;do{switch(_.tag){case 3:return _.flags|=65536,d=O&-O,_.lanes|=d,d=Sj(_.stateNode,k,d),aj(_,d),!1;case 1:if(p=_.type,U=_.stateNode,(_.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(pc===null||!pc.has(U))))return _.flags|=65536,O&=-O,_.lanes|=O,O=p5(O),h5(O,d,_,k),aj(_,O),!1}_=_.return}while(_!==null);return!1}var f5=Error(r(461)),Mr=!1;function qr(d,p,_,k){p.child=d===null?n5(p,null,_,k):Yu(p,d.child,_,k)}function x5(d,p,_,k,O){_=_.render;var U=p.ref;if("ref"in k){var se={};for(var ue in k)ue!=="ref"&&(se[ue]=k[ue])}else se=k;return xd(p),k=lj(d,p,_,se,U,O),ue=cj(),d!==null&&!Mr?(dj(d,p,O),fl(d,p,O)):(da&&ue&&H1(p),p.flags|=1,qr(d,p,k,O),p.child)}function g5(d,p,_,k,O){if(d===null){var U=_.type;return typeof U=="function"&&!B1(U)&&U.defaultProps===void 0&&_.compare===null?(p.tag=15,p.type=U,y5(d,p,U,k,O)):(d=Vg(_.type,null,k,p,p.mode,O),d.ref=p.ref,d.return=p,p.child=d)}if(U=d.child,!Rj(d,O)){var se=U.memoizedProps;if(_=_.compare,_=_!==null?_:Bp,_(se,k)&&d.ref===p.ref)return fl(d,p,O)}return p.flags|=1,d=ll(U,k),d.ref=p.ref,d.return=p,p.child=d}function y5(d,p,_,k,O){if(d!==null){var U=d.memoizedProps;if(Bp(U,k)&&d.ref===p.ref)if(Mr=!1,p.pendingProps=k=U,Rj(d,O))(d.flags&131072)!==0&&(Mr=!0);else return p.lanes=d.lanes,fl(d,p,O)}return Cj(d,p,_,k,O)}function b5(d,p,_){var k=p.pendingProps,O=k.children,U=d!==null?d.memoizedState:null;if(k.mode==="hidden"){if((p.flags&128)!==0){if(k=U!==null?U.baseLanes|_:_,d!==null){for(O=p.child=d.child,U=0;O!==null;)U=U|O.lanes|O.childLanes,O=O.sibling;p.childLanes=U&~k}else p.childLanes=0,p.child=null;return v5(d,p,k,_)}if((_&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},d!==null&&Kg(p,U!==null?U.cachePool:null),U!==null?yC(p,U):nj(),i5(p);else return p.lanes=p.childLanes=536870912,v5(d,p,U!==null?U.baseLanes|_:_,_)}else U!==null?(Kg(p,U.cachePool),yC(p,U),oc(),p.memoizedState=null):(d!==null&&Kg(p,null),nj(),oc());return qr(d,p,O,_),p.child}function v5(d,p,_,k){var O=J1();return O=O===null?null:{parent:Cr._currentValue,pool:O},p.memoizedState={baseLanes:_,cachePool:O},d!==null&&Kg(p,null),nj(),i5(p),d!==null&&Yp(d,p,k,!0),null}function m0(d,p){var _=p.ref;if(_===null)d!==null&&d.ref!==null&&(p.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(r(284));(d===null||d.ref!==_)&&(p.flags|=4194816)}}function Cj(d,p,_,k,O){return xd(p),_=lj(d,p,_,k,void 0,O),k=cj(),d!==null&&!Mr?(dj(d,p,O),fl(d,p,O)):(da&&k&&H1(p),p.flags|=1,qr(d,p,_,O),p.child)}function j5(d,p,_,k,O,U){return xd(p),p.updateQueue=null,_=vC(p,k,_,O),bC(d),k=cj(),d!==null&&!Mr?(dj(d,p,U),fl(d,p,U)):(da&&k&&H1(p),p.flags|=1,qr(d,p,_,U),p.child)}function N5(d,p,_,k,O){if(xd(p),p.stateNode===null){var U=Fu,se=_.contextType;typeof se=="object"&&se!==null&&(U=Jr(se)),U=new _(k,U),p.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=_j,p.stateNode=U,U._reactInternals=p,U=p.stateNode,U.props=k,U.state=p.memoizedState,U.refs={},tj(p),se=_.contextType,U.context=typeof se=="object"&&se!==null?Jr(se):Fu,U.state=p.memoizedState,se=_.getDerivedStateFromProps,typeof se=="function"&&(wj(p,_,se,k),U.state=p.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(se=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),se!==U.state&&_j.enqueueReplaceState(U,U.state,null),eh(p,k,U,O),Jp(),U.state=p.memoizedState),typeof U.componentDidMount=="function"&&(p.flags|=4194308),k=!0}else if(d===null){U=p.stateNode;var ue=p.memoizedProps,we=bd(_,ue);U.props=we;var Ve=U.context,pt=_.contextType;se=Fu,typeof pt=="object"&&pt!==null&&(se=Jr(pt));var wt=_.getDerivedStateFromProps;pt=typeof wt=="function"||typeof U.getSnapshotBeforeUpdate=="function",ue=p.pendingProps!==ue,pt||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ue||Ve!==se)&&l5(p,U,k,se),sc=!1;var Ke=p.memoizedState;U.state=Ke,eh(p,k,U,O),Jp(),Ve=p.memoizedState,ue||Ke!==Ve||sc?(typeof wt=="function"&&(wj(p,_,wt,k),Ve=p.memoizedState),(we=sc||o5(p,_,we,k,Ke,Ve,se))?(pt||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(p.flags|=4194308)):(typeof U.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=k,p.memoizedState=Ve),U.props=k,U.state=Ve,U.context=se,k=we):(typeof U.componentDidMount=="function"&&(p.flags|=4194308),k=!1)}else{U=p.stateNode,sj(d,p),se=p.memoizedProps,pt=bd(_,se),U.props=pt,wt=p.pendingProps,Ke=U.context,Ve=_.contextType,we=Fu,typeof Ve=="object"&&Ve!==null&&(we=Jr(Ve)),ue=_.getDerivedStateFromProps,(Ve=typeof ue=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(se!==wt||Ke!==we)&&l5(p,U,k,we),sc=!1,Ke=p.memoizedState,U.state=Ke,eh(p,k,U,O),Jp();var Ze=p.memoizedState;se!==wt||Ke!==Ze||sc||d!==null&&d.dependencies!==null&&Yg(d.dependencies)?(typeof ue=="function"&&(wj(p,_,ue,k),Ze=p.memoizedState),(pt=sc||o5(p,_,pt,k,Ke,Ze,we)||d!==null&&d.dependencies!==null&&Yg(d.dependencies))?(Ve||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(k,Ze,we),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(k,Ze,we)),typeof U.componentDidUpdate=="function"&&(p.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof U.componentDidUpdate!="function"||se===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||se===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=1024),p.memoizedProps=k,p.memoizedState=Ze),U.props=k,U.state=Ze,U.context=we,k=pt):(typeof U.componentDidUpdate!="function"||se===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||se===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=1024),k=!1)}return U=k,m0(d,p),k=(p.flags&128)!==0,U||k?(U=p.stateNode,_=k&&typeof _.getDerivedStateFromError!="function"?null:U.render(),p.flags|=1,d!==null&&k?(p.child=Yu(p,d.child,null,O),p.child=Yu(p,null,_,O)):qr(d,p,_,O),p.memoizedState=U.state,d=p.child):d=fl(d,p,O),d}function w5(d,p,_,k){return Hp(),p.flags|=256,qr(d,p,_,k),p.child}var Pj={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kj(d){return{baseLanes:d,cachePool:dC()}}function Ej(d,p,_){return d=d!==null?d.childLanes&~_:0,p&&(d|=Si),d}function _5(d,p,_){var k=p.pendingProps,O=!1,U=(p.flags&128)!==0,se;if((se=U)||(se=d!==null&&d.memoizedState===null?!1:(Pr.current&2)!==0),se&&(O=!0,p.flags&=-129),se=(p.flags&32)!==0,p.flags&=-33,d===null){if(da){if(O?ic(p):oc(),da){var ue=Ja,we;if(we=ue){e:{for(we=ue,ue=wo;we.nodeType!==8;){if(!ue){ue=null;break e}if(we=io(we.nextSibling),we===null){ue=null;break e}}ue=we}ue!==null?(p.memoizedState={dehydrated:ue,treeContext:ud!==null?{id:cl,overflow:dl}:null,retryLane:536870912,hydrationErrors:null},we=Wn(18,null,null,0),we.stateNode=ue,we.return=p,p.child=we,hn=p,Ja=null,we=!0):we=!1}we||hd(p)}if(ue=p.memoizedState,ue!==null&&(ue=ue.dehydrated,ue!==null))return m2(ue)?p.lanes=32:p.lanes=536870912,null;hl(p)}return ue=k.children,k=k.fallback,O?(oc(),O=p.mode,ue=p0({mode:"hidden",children:ue},O),k=dd(k,O,_,null),ue.return=p,k.return=p,ue.sibling=k,p.child=ue,O=p.child,O.memoizedState=kj(_),O.childLanes=Ej(d,se,_),p.memoizedState=Pj,k):(ic(p),Tj(p,ue))}if(we=d.memoizedState,we!==null&&(ue=we.dehydrated,ue!==null)){if(U)p.flags&256?(ic(p),p.flags&=-257,p=Mj(d,p,_)):p.memoizedState!==null?(oc(),p.child=d.child,p.flags|=128,p=null):(oc(),O=k.fallback,ue=p.mode,k=p0({mode:"visible",children:k.children},ue),O=dd(O,ue,_,null),O.flags|=2,k.return=p,O.return=p,k.sibling=O,p.child=k,Yu(p,d.child,null,_),k=p.child,k.memoizedState=kj(_),k.childLanes=Ej(d,se,_),p.memoizedState=Pj,p=O);else if(ic(p),m2(ue)){if(se=ue.nextSibling&&ue.nextSibling.dataset,se)var Ve=se.dgst;se=Ve,k=Error(r(419)),k.stack="",k.digest=se,Wp({value:k,source:null,stack:null}),p=Mj(d,p,_)}else if(Mr||Yp(d,p,_,!1),se=(_&d.childLanes)!==0,Mr||se){if(se=Fa,se!==null&&(k=_&-_,k=(k&42)!==0?1:ia(k),k=(k&(se.suspendedLanes|_))!==0?0:k,k!==0&&k!==we.retryLane))throw we.retryLane=k,Ou(d,k),Zn(se,d,k),f5;ue.data==="$?"||Kj(),p=Mj(d,p,_)}else ue.data==="$?"?(p.flags|=192,p.child=d.child,p=null):(d=we.treeContext,Ja=io(ue.nextSibling),hn=p,da=!0,pd=null,wo=!1,d!==null&&(Ni[wi++]=cl,Ni[wi++]=dl,Ni[wi++]=ud,cl=d.id,dl=d.overflow,ud=p),p=Tj(p,k.children),p.flags|=4096);return p}return O?(oc(),O=k.fallback,ue=p.mode,we=d.child,Ve=we.sibling,k=ll(we,{mode:"hidden",children:k.children}),k.subtreeFlags=we.subtreeFlags&65011712,Ve!==null?O=ll(Ve,O):(O=dd(O,ue,_,null),O.flags|=2),O.return=p,k.return=p,k.sibling=O,p.child=k,k=O,O=p.child,ue=d.child.memoizedState,ue===null?ue=kj(_):(we=ue.cachePool,we!==null?(Ve=Cr._currentValue,we=we.parent!==Ve?{parent:Ve,pool:Ve}:we):we=dC(),ue={baseLanes:ue.baseLanes|_,cachePool:we}),O.memoizedState=ue,O.childLanes=Ej(d,se,_),p.memoizedState=Pj,k):(ic(p),_=d.child,d=_.sibling,_=ll(_,{mode:"visible",children:k.children}),_.return=p,_.sibling=null,d!==null&&(se=p.deletions,se===null?(p.deletions=[d],p.flags|=16):se.push(d)),p.child=_,p.memoizedState=null,_)}function Tj(d,p){return p=p0({mode:"visible",children:p},d.mode),p.return=d,d.child=p}function p0(d,p){return d=Wn(22,d,null,p),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function Mj(d,p,_){return Yu(p,d.child,null,_),d=Tj(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function S5(d,p,_){d.lanes|=p;var k=d.alternate;k!==null&&(k.lanes|=p),K1(d.return,p,_)}function Dj(d,p,_,k,O){var U=d.memoizedState;U===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:k,tail:_,tailMode:O}:(U.isBackwards=p,U.rendering=null,U.renderingStartTime=0,U.last=k,U.tail=_,U.tailMode=O)}function C5(d,p,_){var k=p.pendingProps,O=k.revealOrder,U=k.tail;if(qr(d,p,k.children,_),k=Pr.current,(k&2)!==0)k=k&1|2,p.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&S5(d,_,p);else if(d.tag===19)S5(d,_,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}k&=1}switch(W(Pr,k),O){case"forwards":for(_=p.child,O=null;_!==null;)d=_.alternate,d!==null&&c0(d)===null&&(O=_),_=_.sibling;_=O,_===null?(O=p.child,p.child=null):(O=_.sibling,_.sibling=null),Dj(p,!1,O,_,U);break;case"backwards":for(_=null,O=p.child,p.child=null;O!==null;){if(d=O.alternate,d!==null&&c0(d)===null){p.child=O;break}d=O.sibling,O.sibling=_,_=O,O=d}Dj(p,!0,_,null,U);break;case"together":Dj(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function fl(d,p,_){if(d!==null&&(p.dependencies=d.dependencies),mc|=p.lanes,(_&p.childLanes)===0)if(d!==null){if(Yp(d,p,_,!1),(_&p.childLanes)===0)return null}else return null;if(d!==null&&p.child!==d.child)throw Error(r(153));if(p.child!==null){for(d=p.child,_=ll(d,d.pendingProps),p.child=_,_.return=p;d.sibling!==null;)d=d.sibling,_=_.sibling=ll(d,d.pendingProps),_.return=p;_.sibling=null}return p.child}function Rj(d,p){return(d.lanes&p)!==0?!0:(d=d.dependencies,!!(d!==null&&Yg(d)))}function lz(d,p,_){switch(p.tag){case 3:ce(p,p.stateNode.containerInfo),tc(p,Cr,d.memoizedState.cache),Hp();break;case 27:case 5:ne(p);break;case 4:ce(p,p.stateNode.containerInfo);break;case 10:tc(p,p.type,p.memoizedProps.value);break;case 13:var k=p.memoizedState;if(k!==null)return k.dehydrated!==null?(ic(p),p.flags|=128,null):(_&p.child.childLanes)!==0?_5(d,p,_):(ic(p),d=fl(d,p,_),d!==null?d.sibling:null);ic(p);break;case 19:var O=(d.flags&128)!==0;if(k=(_&p.childLanes)!==0,k||(Yp(d,p,_,!1),k=(_&p.childLanes)!==0),O){if(k)return C5(d,p,_);p.flags|=128}if(O=p.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),W(Pr,Pr.current),k)break;return null;case 22:case 23:return p.lanes=0,b5(d,p,_);case 24:tc(p,Cr,d.memoizedState.cache)}return fl(d,p,_)}function P5(d,p,_){if(d!==null)if(d.memoizedProps!==p.pendingProps)Mr=!0;else{if(!Rj(d,_)&&(p.flags&128)===0)return Mr=!1,lz(d,p,_);Mr=(d.flags&131072)!==0}else Mr=!1,da&&(p.flags&1048576)!==0&&aC(p,Wg,p.index);switch(p.lanes=0,p.tag){case 16:e:{d=p.pendingProps;var k=p.elementType,O=k._init;if(k=O(k._payload),p.type=k,typeof k=="function")B1(k)?(d=bd(k,d),p.tag=1,p=N5(null,p,k,d,_)):(p.tag=0,p=Cj(null,p,k,d,_));else{if(k!=null){if(O=k.$$typeof,O===P){p.tag=11,p=x5(null,p,k,d,_);break e}else if(O===T){p.tag=14,p=g5(null,p,k,d,_);break e}}throw p=Y(k)||k,Error(r(306,p,""))}}return p;case 0:return Cj(d,p,p.type,p.pendingProps,_);case 1:return k=p.type,O=bd(k,p.pendingProps),N5(d,p,k,O,_);case 3:e:{if(ce(p,p.stateNode.containerInfo),d===null)throw Error(r(387));k=p.pendingProps;var U=p.memoizedState;O=U.element,sj(d,p),eh(p,k,null,_);var se=p.memoizedState;if(k=se.cache,tc(p,Cr,k),k!==U.cache&&Q1(p,[Cr],_,!0),Jp(),k=se.element,U.isDehydrated)if(U={element:k,isDehydrated:!1,cache:se.cache},p.updateQueue.baseState=U,p.memoizedState=U,p.flags&256){p=w5(d,p,k,_);break e}else if(k!==O){O=vi(Error(r(424)),p),Wp(O),p=w5(d,p,k,_);break e}else for(d=p.stateNode.containerInfo,d.nodeType===9?d=d.body:d=d.nodeName==="HTML"?d.ownerDocument.body:d,Ja=io(d.firstChild),hn=p,da=!0,pd=null,wo=!0,_=n5(p,null,k,_),p.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Hp(),k===O){p=fl(d,p,_);break e}qr(d,p,k,_)}p=p.child}return p;case 26:return m0(d,p),d===null?(_=M6(p.type,null,p.pendingProps,null))?p.memoizedState=_:da||(_=p.type,d=p.pendingProps,k=P0(ee.current).createElement(_),k[ds]=p,k[ve]=d,Ur(k,_,d),Rt(k),p.stateNode=k):p.memoizedState=M6(p.type,d.memoizedProps,p.pendingProps,d.memoizedState),null;case 27:return ne(p),d===null&&da&&(k=p.stateNode=k6(p.type,p.pendingProps,ee.current),hn=p,wo=!0,O=Ja,xc(p.type)?(p2=O,Ja=io(k.firstChild)):Ja=O),qr(d,p,p.pendingProps.children,_),m0(d,p),d===null&&(p.flags|=4194304),p.child;case 5:return d===null&&da&&((O=k=Ja)&&(k=Oz(k,p.type,p.pendingProps,wo),k!==null?(p.stateNode=k,hn=p,Ja=io(k.firstChild),wo=!1,O=!0):O=!1),O||hd(p)),ne(p),O=p.type,U=p.pendingProps,se=d!==null?d.memoizedProps:null,k=U.children,c2(O,U)?k=null:se!==null&&c2(O,se)&&(p.flags|=32),p.memoizedState!==null&&(O=lj(d,p,ez,null,null,_),Nh._currentValue=O),m0(d,p),qr(d,p,k,_),p.child;case 6:return d===null&&da&&((d=_=Ja)&&(_=Fz(_,p.pendingProps,wo),_!==null?(p.stateNode=_,hn=p,Ja=null,d=!0):d=!1),d||hd(p)),null;case 13:return _5(d,p,_);case 4:return ce(p,p.stateNode.containerInfo),k=p.pendingProps,d===null?p.child=Yu(p,null,k,_):qr(d,p,k,_),p.child;case 11:return x5(d,p,p.type,p.pendingProps,_);case 7:return qr(d,p,p.pendingProps,_),p.child;case 8:return qr(d,p,p.pendingProps.children,_),p.child;case 12:return qr(d,p,p.pendingProps.children,_),p.child;case 10:return k=p.pendingProps,tc(p,p.type,k.value),qr(d,p,k.children,_),p.child;case 9:return O=p.type._context,k=p.pendingProps.children,xd(p),O=Jr(O),k=k(O),p.flags|=1,qr(d,p,k,_),p.child;case 14:return g5(d,p,p.type,p.pendingProps,_);case 15:return y5(d,p,p.type,p.pendingProps,_);case 19:return C5(d,p,_);case 31:return k=p.pendingProps,_=p.mode,k={mode:k.mode,children:k.children},d===null?(_=p0(k,_),_.ref=p.ref,p.child=_,_.return=p,p=_):(_=ll(d.child,k),_.ref=p.ref,p.child=_,_.return=p,p=_),p;case 22:return b5(d,p,_);case 24:return xd(p),k=Jr(Cr),d===null?(O=J1(),O===null&&(O=Fa,U=Z1(),O.pooledCache=U,U.refCount++,U!==null&&(O.pooledCacheLanes|=_),O=U),p.memoizedState={parent:k,cache:O},tj(p),tc(p,Cr,O)):((d.lanes&_)!==0&&(sj(d,p),eh(p,null,null,_),Jp()),O=d.memoizedState,U=p.memoizedState,O.parent!==k?(O={parent:k,cache:k},p.memoizedState=O,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=O),tc(p,Cr,k)):(k=U.cache,tc(p,Cr,k),k!==O.cache&&Q1(p,[Cr],_,!0))),qr(d,p,p.pendingProps.children,_),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function xl(d){d.flags|=4}function k5(d,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!O6(p)){if(p=_i.current,p!==null&&((aa&4194048)===aa?_o!==null:(aa&62914560)!==aa&&(aa&536870912)===0||p!==_o))throw Zp=ej,uC;d.flags|=8192}}function h0(d,p){p!==null&&(d.flags|=4),d.flags&16384&&(p=d.tag!==22?Ns():536870912,d.lanes|=p,Zu|=p)}function oh(d,p){if(!da)switch(d.tailMode){case"hidden":p=d.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?d.tail=null:_.sibling=null;break;case"collapsed":_=d.tail;for(var k=null;_!==null;)_.alternate!==null&&(k=_),_=_.sibling;k===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:k.sibling=null}}function Ga(d){var p=d.alternate!==null&&d.alternate.child===d.child,_=0,k=0;if(p)for(var O=d.child;O!==null;)_|=O.lanes|O.childLanes,k|=O.subtreeFlags&65011712,k|=O.flags&65011712,O.return=d,O=O.sibling;else for(O=d.child;O!==null;)_|=O.lanes|O.childLanes,k|=O.subtreeFlags,k|=O.flags,O.return=d,O=O.sibling;return d.subtreeFlags|=k,d.childLanes=_,p}function cz(d,p,_){var k=p.pendingProps;switch(W1(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(p),null;case 1:return Ga(p),null;case 3:return _=p.stateNode,k=null,d!==null&&(k=d.memoizedState.cache),p.memoizedState.cache!==k&&(p.flags|=2048),ml(Cr),he(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(d===null||d.child===null)&&(Vp(p)?xl(p):d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,iC())),Ga(p),null;case 26:return _=p.memoizedState,d===null?(xl(p),_!==null?(Ga(p),k5(p,_)):(Ga(p),p.flags&=-16777217)):_?_!==d.memoizedState?(xl(p),Ga(p),k5(p,_)):(Ga(p),p.flags&=-16777217):(d.memoizedProps!==k&&xl(p),Ga(p),p.flags&=-16777217),null;case 27:xe(p),_=ee.current;var O=p.type;if(d!==null&&p.stateNode!=null)d.memoizedProps!==k&&xl(p);else{if(!k){if(p.stateNode===null)throw Error(r(166));return Ga(p),null}d=J.current,Vp(p)?rC(p):(d=k6(O,k,_),p.stateNode=d,xl(p))}return Ga(p),null;case 5:if(xe(p),_=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==k&&xl(p);else{if(!k){if(p.stateNode===null)throw Error(r(166));return Ga(p),null}if(d=J.current,Vp(p))rC(p);else{switch(O=P0(ee.current),d){case 1:d=O.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:d=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":d=O.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":d=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":d=O.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof k.is=="string"?O.createElement("select",{is:k.is}):O.createElement("select"),k.multiple?d.multiple=!0:k.size&&(d.size=k.size);break;default:d=typeof k.is=="string"?O.createElement(_,{is:k.is}):O.createElement(_)}}d[ds]=p,d[ve]=k;e:for(O=p.child;O!==null;){if(O.tag===5||O.tag===6)d.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===p)break e;for(;O.sibling===null;){if(O.return===null||O.return===p)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}p.stateNode=d;e:switch(Ur(d,_,k),_){case"button":case"input":case"select":case"textarea":d=!!k.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&xl(p)}}return Ga(p),p.flags&=-16777217,null;case 6:if(d&&p.stateNode!=null)d.memoizedProps!==k&&xl(p);else{if(typeof k!="string"&&p.stateNode===null)throw Error(r(166));if(d=ee.current,Vp(p)){if(d=p.stateNode,_=p.memoizedProps,k=null,O=hn,O!==null)switch(O.tag){case 27:case 5:k=O.memoizedProps}d[ds]=p,d=!!(d.nodeValue===_||k!==null&&k.suppressHydrationWarning===!0||j6(d.nodeValue,_)),d||hd(p)}else d=P0(d).createTextNode(k),d[ds]=p,p.stateNode=d}return Ga(p),null;case 13:if(k=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(O=Vp(p),k!==null&&k.dehydrated!==null){if(d===null){if(!O)throw Error(r(318));if(O=p.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(r(317));O[ds]=p}else Hp(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Ga(p),O=!1}else O=iC(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=O),O=!0;if(!O)return p.flags&256?(hl(p),p):(hl(p),null)}if(hl(p),(p.flags&128)!==0)return p.lanes=_,p;if(_=k!==null,d=d!==null&&d.memoizedState!==null,_){k=p.child,O=null,k.alternate!==null&&k.alternate.memoizedState!==null&&k.alternate.memoizedState.cachePool!==null&&(O=k.alternate.memoizedState.cachePool.pool);var U=null;k.memoizedState!==null&&k.memoizedState.cachePool!==null&&(U=k.memoizedState.cachePool.pool),U!==O&&(k.flags|=2048)}return _!==d&&_&&(p.child.flags|=8192),h0(p,p.updateQueue),Ga(p),null;case 4:return he(),d===null&&r2(p.stateNode.containerInfo),Ga(p),null;case 10:return ml(p.type),Ga(p),null;case 19:if($(Pr),O=p.memoizedState,O===null)return Ga(p),null;if(k=(p.flags&128)!==0,U=O.rendering,U===null)if(k)oh(O,!1);else{if(er!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(U=c0(d),U!==null){for(p.flags|=128,oh(O,!1),d=U.updateQueue,p.updateQueue=d,h0(p,d),p.subtreeFlags=0,d=_,_=p.child;_!==null;)sC(_,d),_=_.sibling;return W(Pr,Pr.current&1|2),p.child}d=d.sibling}O.tail!==null&&He()>g0&&(p.flags|=128,k=!0,oh(O,!1),p.lanes=4194304)}else{if(!k)if(d=c0(U),d!==null){if(p.flags|=128,k=!0,d=d.updateQueue,p.updateQueue=d,h0(p,d),oh(O,!0),O.tail===null&&O.tailMode==="hidden"&&!U.alternate&&!da)return Ga(p),null}else 2*He()-O.renderingStartTime>g0&&_!==536870912&&(p.flags|=128,k=!0,oh(O,!1),p.lanes=4194304);O.isBackwards?(U.sibling=p.child,p.child=U):(d=O.last,d!==null?d.sibling=U:p.child=U,O.last=U)}return O.tail!==null?(p=O.tail,O.rendering=p,O.tail=p.sibling,O.renderingStartTime=He(),p.sibling=null,d=Pr.current,W(Pr,k?d&1|2:d&1),p):(Ga(p),null);case 22:case 23:return hl(p),ij(),k=p.memoizedState!==null,d!==null?d.memoizedState!==null!==k&&(p.flags|=8192):k&&(p.flags|=8192),k?(_&536870912)!==0&&(p.flags&128)===0&&(Ga(p),p.subtreeFlags&6&&(p.flags|=8192)):Ga(p),_=p.updateQueue,_!==null&&h0(p,_.retryQueue),_=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),k=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(k=p.memoizedState.cachePool.pool),k!==_&&(p.flags|=2048),d!==null&&$(gd),null;case 24:return _=null,d!==null&&(_=d.memoizedState.cache),p.memoizedState.cache!==_&&(p.flags|=2048),ml(Cr),Ga(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function dz(d,p){switch(W1(p),p.tag){case 1:return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return ml(Cr),he(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 26:case 27:case 5:return xe(p),null;case 13:if(hl(p),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Hp()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return $(Pr),null;case 4:return he(),null;case 10:return ml(p.type),null;case 22:case 23:return hl(p),ij(),d!==null&&$(gd),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 24:return ml(Cr),null;case 25:return null;default:return null}}function E5(d,p){switch(W1(p),p.tag){case 3:ml(Cr),he();break;case 26:case 27:case 5:xe(p);break;case 4:he();break;case 13:hl(p);break;case 19:$(Pr);break;case 10:ml(p.type);break;case 22:case 23:hl(p),ij(),d!==null&&$(gd);break;case 24:ml(Cr)}}function lh(d,p){try{var _=p.updateQueue,k=_!==null?_.lastEffect:null;if(k!==null){var O=k.next;_=O;do{if((_.tag&d)===d){k=void 0;var U=_.create,se=_.inst;k=U(),se.destroy=k}_=_.next}while(_!==O)}}catch(ue){Aa(p,p.return,ue)}}function lc(d,p,_){try{var k=p.updateQueue,O=k!==null?k.lastEffect:null;if(O!==null){var U=O.next;k=U;do{if((k.tag&d)===d){var se=k.inst,ue=se.destroy;if(ue!==void 0){se.destroy=void 0,O=p;var we=_,Ve=ue;try{Ve()}catch(pt){Aa(O,we,pt)}}}k=k.next}while(k!==U)}}catch(pt){Aa(p,p.return,pt)}}function T5(d){var p=d.updateQueue;if(p!==null){var _=d.stateNode;try{gC(p,_)}catch(k){Aa(d,d.return,k)}}}function M5(d,p,_){_.props=bd(d.type,d.memoizedProps),_.state=d.memoizedState;try{_.componentWillUnmount()}catch(k){Aa(d,p,k)}}function ch(d,p){try{var _=d.ref;if(_!==null){switch(d.tag){case 26:case 27:case 5:var k=d.stateNode;break;case 30:k=d.stateNode;break;default:k=d.stateNode}typeof _=="function"?d.refCleanup=_(k):_.current=k}}catch(O){Aa(d,p,O)}}function So(d,p){var _=d.ref,k=d.refCleanup;if(_!==null)if(typeof k=="function")try{k()}catch(O){Aa(d,p,O)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(O){Aa(d,p,O)}else _.current=null}function D5(d){var p=d.type,_=d.memoizedProps,k=d.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":_.autoFocus&&k.focus();break e;case"img":_.src?k.src=_.src:_.srcSet&&(k.srcset=_.srcSet)}}catch(O){Aa(d,d.return,O)}}function Aj(d,p,_){try{var k=d.stateNode;Mz(k,d.type,_,p),k[ve]=p}catch(O){Aa(d,d.return,O)}}function R5(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&xc(d.type)||d.tag===4}function Ij(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||R5(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&xc(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Oj(d,p,_){var k=d.tag;if(k===5||k===6)d=d.stateNode,p?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(d,p):(p=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,p.appendChild(d),_=_._reactRootContainer,_!=null||p.onclick!==null||(p.onclick=C0));else if(k!==4&&(k===27&&xc(d.type)&&(_=d.stateNode,p=null),d=d.child,d!==null))for(Oj(d,p,_),d=d.sibling;d!==null;)Oj(d,p,_),d=d.sibling}function f0(d,p,_){var k=d.tag;if(k===5||k===6)d=d.stateNode,p?_.insertBefore(d,p):_.appendChild(d);else if(k!==4&&(k===27&&xc(d.type)&&(_=d.stateNode),d=d.child,d!==null))for(f0(d,p,_),d=d.sibling;d!==null;)f0(d,p,_),d=d.sibling}function A5(d){var p=d.stateNode,_=d.memoizedProps;try{for(var k=d.type,O=p.attributes;O.length;)p.removeAttributeNode(O[0]);Ur(p,k,_),p[ds]=d,p[ve]=_}catch(U){Aa(d,d.return,U)}}var gl=!1,dr=!1,Fj=!1,I5=typeof WeakSet=="function"?WeakSet:Set,Dr=null;function uz(d,p){if(d=d.containerInfo,o2=R0,d=W3(d),I1(d)){if("selectionStart"in d)var _={start:d.selectionStart,end:d.selectionEnd};else e:{_=(_=d.ownerDocument)&&_.defaultView||window;var k=_.getSelection&&_.getSelection();if(k&&k.rangeCount!==0){_=k.anchorNode;var O=k.anchorOffset,U=k.focusNode;k=k.focusOffset;try{_.nodeType,U.nodeType}catch{_=null;break e}var se=0,ue=-1,we=-1,Ve=0,pt=0,wt=d,Ke=null;t:for(;;){for(var Ze;wt!==_||O!==0&&wt.nodeType!==3||(ue=se+O),wt!==U||k!==0&&wt.nodeType!==3||(we=se+k),wt.nodeType===3&&(se+=wt.nodeValue.length),(Ze=wt.firstChild)!==null;)Ke=wt,wt=Ze;for(;;){if(wt===d)break t;if(Ke===_&&++Ve===O&&(ue=se),Ke===U&&++pt===k&&(we=se),(Ze=wt.nextSibling)!==null)break;wt=Ke,Ke=wt.parentNode}wt=Ze}_=ue===-1||we===-1?null:{start:ue,end:we}}else _=null}_=_||{start:0,end:0}}else _=null;for(l2={focusedElem:d,selectionRange:_},R0=!1,Dr=p;Dr!==null;)if(p=Dr,d=p.child,(p.subtreeFlags&1024)!==0&&d!==null)d.return=p,Dr=d;else for(;Dr!==null;){switch(p=Dr,U=p.alternate,d=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&U!==null){d=void 0,_=p,O=U.memoizedProps,U=U.memoizedState,k=_.stateNode;try{var Ss=bd(_.type,O,_.elementType===_.type);d=k.getSnapshotBeforeUpdate(Ss,U),k.__reactInternalSnapshotBeforeUpdate=d}catch(js){Aa(_,_.return,js)}}break;case 3:if((d&1024)!==0){if(d=p.stateNode.containerInfo,_=d.nodeType,_===9)u2(d);else if(_===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":u2(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=p.sibling,d!==null){d.return=p.return,Dr=d;break}Dr=p.return}}function O5(d,p,_){var k=_.flags;switch(_.tag){case 0:case 11:case 15:cc(d,_),k&4&&lh(5,_);break;case 1:if(cc(d,_),k&4)if(d=_.stateNode,p===null)try{d.componentDidMount()}catch(se){Aa(_,_.return,se)}else{var O=bd(_.type,p.memoizedProps);p=p.memoizedState;try{d.componentDidUpdate(O,p,d.__reactInternalSnapshotBeforeUpdate)}catch(se){Aa(_,_.return,se)}}k&64&&T5(_),k&512&&ch(_,_.return);break;case 3:if(cc(d,_),k&64&&(d=_.updateQueue,d!==null)){if(p=null,_.child!==null)switch(_.child.tag){case 27:case 5:p=_.child.stateNode;break;case 1:p=_.child.stateNode}try{gC(d,p)}catch(se){Aa(_,_.return,se)}}break;case 27:p===null&&k&4&&A5(_);case 26:case 5:cc(d,_),p===null&&k&4&&D5(_),k&512&&ch(_,_.return);break;case 12:cc(d,_);break;case 13:cc(d,_),k&4&&$5(d,_),k&64&&(d=_.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(_=vz.bind(null,_),Lz(d,_))));break;case 22:if(k=_.memoizedState!==null||gl,!k){p=p!==null&&p.memoizedState!==null||dr,O=gl;var U=dr;gl=k,(dr=p)&&!U?dc(d,_,(_.subtreeFlags&8772)!==0):cc(d,_),gl=O,dr=U}break;case 30:break;default:cc(d,_)}}function F5(d){var p=d.alternate;p!==null&&(d.alternate=null,F5(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&ft(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Va=null,kn=!1;function yl(d,p,_){for(_=_.child;_!==null;)L5(d,p,_),_=_.sibling}function L5(d,p,_){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(ct,_)}catch{}switch(_.tag){case 26:dr||So(_,p),yl(d,p,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:dr||So(_,p);var k=Va,O=kn;xc(_.type)&&(Va=_.stateNode,kn=!1),yl(d,p,_),yh(_.stateNode),Va=k,kn=O;break;case 5:dr||So(_,p);case 6:if(k=Va,O=kn,Va=null,yl(d,p,_),Va=k,kn=O,Va!==null)if(kn)try{(Va.nodeType===9?Va.body:Va.nodeName==="HTML"?Va.ownerDocument.body:Va).removeChild(_.stateNode)}catch(U){Aa(_,p,U)}else try{Va.removeChild(_.stateNode)}catch(U){Aa(_,p,U)}break;case 18:Va!==null&&(kn?(d=Va,C6(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,_.stateNode),Ch(d)):C6(Va,_.stateNode));break;case 4:k=Va,O=kn,Va=_.stateNode.containerInfo,kn=!0,yl(d,p,_),Va=k,kn=O;break;case 0:case 11:case 14:case 15:dr||lc(2,_,p),dr||lc(4,_,p),yl(d,p,_);break;case 1:dr||(So(_,p),k=_.stateNode,typeof k.componentWillUnmount=="function"&&M5(_,p,k)),yl(d,p,_);break;case 21:yl(d,p,_);break;case 22:dr=(k=dr)||_.memoizedState!==null,yl(d,p,_),dr=k;break;default:yl(d,p,_)}}function $5(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Ch(d)}catch(_){Aa(p,p.return,_)}}function mz(d){switch(d.tag){case 13:case 19:var p=d.stateNode;return p===null&&(p=d.stateNode=new I5),p;case 22:return d=d.stateNode,p=d._retryCache,p===null&&(p=d._retryCache=new I5),p;default:throw Error(r(435,d.tag))}}function Lj(d,p){var _=mz(d);p.forEach(function(k){var O=jz.bind(null,d,k);_.has(k)||(_.add(k),k.then(O,O))})}function Yn(d,p){var _=p.deletions;if(_!==null)for(var k=0;k<_.length;k++){var O=_[k],U=d,se=p,ue=se;e:for(;ue!==null;){switch(ue.tag){case 27:if(xc(ue.type)){Va=ue.stateNode,kn=!1;break e}break;case 5:Va=ue.stateNode,kn=!1;break e;case 3:case 4:Va=ue.stateNode.containerInfo,kn=!0;break e}ue=ue.return}if(Va===null)throw Error(r(160));L5(U,se,O),Va=null,kn=!1,U=O.alternate,U!==null&&(U.return=null),O.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)z5(p,d),p=p.sibling}var no=null;function z5(d,p){var _=d.alternate,k=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Yn(p,d),Gn(d),k&4&&(lc(3,d,d.return),lh(3,d),lc(5,d,d.return));break;case 1:Yn(p,d),Gn(d),k&512&&(dr||_===null||So(_,_.return)),k&64&&gl&&(d=d.updateQueue,d!==null&&(k=d.callbacks,k!==null&&(_=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=_===null?k:_.concat(k))));break;case 26:var O=no;if(Yn(p,d),Gn(d),k&512&&(dr||_===null||So(_,_.return)),k&4){var U=_!==null?_.memoizedState:null;if(k=d.memoizedState,_===null)if(k===null)if(d.stateNode===null){e:{k=d.type,_=d.memoizedProps,O=O.ownerDocument||O;t:switch(k){case"title":U=O.getElementsByTagName("title")[0],(!U||U[Ae]||U[ds]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=O.createElement(k),O.head.insertBefore(U,O.querySelector("head > title"))),Ur(U,k,_),U[ds]=d,Rt(U),k=U;break e;case"link":var se=A6("link","href",O).get(k+(_.href||""));if(se){for(var ue=0;ue<se.length;ue++)if(U=se[ue],U.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&U.getAttribute("rel")===(_.rel==null?null:_.rel)&&U.getAttribute("title")===(_.title==null?null:_.title)&&U.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){se.splice(ue,1);break t}}U=O.createElement(k),Ur(U,k,_),O.head.appendChild(U);break;case"meta":if(se=A6("meta","content",O).get(k+(_.content||""))){for(ue=0;ue<se.length;ue++)if(U=se[ue],U.getAttribute("content")===(_.content==null?null:""+_.content)&&U.getAttribute("name")===(_.name==null?null:_.name)&&U.getAttribute("property")===(_.property==null?null:_.property)&&U.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&U.getAttribute("charset")===(_.charSet==null?null:_.charSet)){se.splice(ue,1);break t}}U=O.createElement(k),Ur(U,k,_),O.head.appendChild(U);break;default:throw Error(r(468,k))}U[ds]=d,Rt(U),k=U}d.stateNode=k}else I6(O,d.type,d.stateNode);else d.stateNode=R6(O,k,d.memoizedProps);else U!==k?(U===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):U.count--,k===null?I6(O,d.type,d.stateNode):R6(O,k,d.memoizedProps)):k===null&&d.stateNode!==null&&Aj(d,d.memoizedProps,_.memoizedProps)}break;case 27:Yn(p,d),Gn(d),k&512&&(dr||_===null||So(_,_.return)),_!==null&&k&4&&Aj(d,d.memoizedProps,_.memoizedProps);break;case 5:if(Yn(p,d),Gn(d),k&512&&(dr||_===null||So(_,_.return)),d.flags&32){O=d.stateNode;try{Eu(O,"")}catch(Ze){Aa(d,d.return,Ze)}}k&4&&d.stateNode!=null&&(O=d.memoizedProps,Aj(d,O,_!==null?_.memoizedProps:O)),k&1024&&(Fj=!0);break;case 6:if(Yn(p,d),Gn(d),k&4){if(d.stateNode===null)throw Error(r(162));k=d.memoizedProps,_=d.stateNode;try{_.nodeValue=k}catch(Ze){Aa(d,d.return,Ze)}}break;case 3:if(T0=null,O=no,no=k0(p.containerInfo),Yn(p,d),no=O,Gn(d),k&4&&_!==null&&_.memoizedState.isDehydrated)try{Ch(p.containerInfo)}catch(Ze){Aa(d,d.return,Ze)}Fj&&(Fj=!1,q5(d));break;case 4:k=no,no=k0(d.stateNode.containerInfo),Yn(p,d),Gn(d),no=k;break;case 12:Yn(p,d),Gn(d);break;case 13:Yn(p,d),Gn(d),d.child.flags&8192&&d.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(Vj=He()),k&4&&(k=d.updateQueue,k!==null&&(d.updateQueue=null,Lj(d,k)));break;case 22:O=d.memoizedState!==null;var we=_!==null&&_.memoizedState!==null,Ve=gl,pt=dr;if(gl=Ve||O,dr=pt||we,Yn(p,d),dr=pt,gl=Ve,Gn(d),k&8192)e:for(p=d.stateNode,p._visibility=O?p._visibility&-2:p._visibility|1,O&&(_===null||we||gl||dr||vd(d)),_=null,p=d;;){if(p.tag===5||p.tag===26){if(_===null){we=_=p;try{if(U=we.stateNode,O)se=U.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none";else{ue=we.stateNode;var wt=we.memoizedProps.style,Ke=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;ue.style.display=Ke==null||typeof Ke=="boolean"?"":(""+Ke).trim()}}catch(Ze){Aa(we,we.return,Ze)}}}else if(p.tag===6){if(_===null){we=p;try{we.stateNode.nodeValue=O?"":we.memoizedProps}catch(Ze){Aa(we,we.return,Ze)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===d)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break e;for(;p.sibling===null;){if(p.return===null||p.return===d)break e;_===p&&(_=null),p=p.return}_===p&&(_=null),p.sibling.return=p.return,p=p.sibling}k&4&&(k=d.updateQueue,k!==null&&(_=k.retryQueue,_!==null&&(k.retryQueue=null,Lj(d,_))));break;case 19:Yn(p,d),Gn(d),k&4&&(k=d.updateQueue,k!==null&&(d.updateQueue=null,Lj(d,k)));break;case 30:break;case 21:break;default:Yn(p,d),Gn(d)}}function Gn(d){var p=d.flags;if(p&2){try{for(var _,k=d.return;k!==null;){if(R5(k)){_=k;break}k=k.return}if(_==null)throw Error(r(160));switch(_.tag){case 27:var O=_.stateNode,U=Ij(d);f0(d,U,O);break;case 5:var se=_.stateNode;_.flags&32&&(Eu(se,""),_.flags&=-33);var ue=Ij(d);f0(d,ue,se);break;case 3:case 4:var we=_.stateNode.containerInfo,Ve=Ij(d);Oj(d,Ve,we);break;default:throw Error(r(161))}}catch(pt){Aa(d,d.return,pt)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function q5(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var p=d;q5(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),d=d.sibling}}function cc(d,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)O5(d,p.alternate,p),p=p.sibling}function vd(d){for(d=d.child;d!==null;){var p=d;switch(p.tag){case 0:case 11:case 14:case 15:lc(4,p,p.return),vd(p);break;case 1:So(p,p.return);var _=p.stateNode;typeof _.componentWillUnmount=="function"&&M5(p,p.return,_),vd(p);break;case 27:yh(p.stateNode);case 26:case 5:So(p,p.return),vd(p);break;case 22:p.memoizedState===null&&vd(p);break;case 30:vd(p);break;default:vd(p)}d=d.sibling}}function dc(d,p,_){for(_=_&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var k=p.alternate,O=d,U=p,se=U.flags;switch(U.tag){case 0:case 11:case 15:dc(O,U,_),lh(4,U);break;case 1:if(dc(O,U,_),k=U,O=k.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(Ve){Aa(k,k.return,Ve)}if(k=U,O=k.updateQueue,O!==null){var ue=k.stateNode;try{var we=O.shared.hiddenCallbacks;if(we!==null)for(O.shared.hiddenCallbacks=null,O=0;O<we.length;O++)xC(we[O],ue)}catch(Ve){Aa(k,k.return,Ve)}}_&&se&64&&T5(U),ch(U,U.return);break;case 27:A5(U);case 26:case 5:dc(O,U,_),_&&k===null&&se&4&&D5(U),ch(U,U.return);break;case 12:dc(O,U,_);break;case 13:dc(O,U,_),_&&se&4&&$5(O,U);break;case 22:U.memoizedState===null&&dc(O,U,_),ch(U,U.return);break;case 30:break;default:dc(O,U,_)}p=p.sibling}}function $j(d,p){var _=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),d=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(d=p.memoizedState.cachePool.pool),d!==_&&(d!=null&&d.refCount++,_!=null&&Gp(_))}function zj(d,p){d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&Gp(d))}function Co(d,p,_,k){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)B5(d,p,_,k),p=p.sibling}function B5(d,p,_,k){var O=p.flags;switch(p.tag){case 0:case 11:case 15:Co(d,p,_,k),O&2048&&lh(9,p);break;case 1:Co(d,p,_,k);break;case 3:Co(d,p,_,k),O&2048&&(d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&Gp(d)));break;case 12:if(O&2048){Co(d,p,_,k),d=p.stateNode;try{var U=p.memoizedProps,se=U.id,ue=U.onPostCommit;typeof ue=="function"&&ue(se,p.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(we){Aa(p,p.return,we)}}else Co(d,p,_,k);break;case 13:Co(d,p,_,k);break;case 23:break;case 22:U=p.stateNode,se=p.alternate,p.memoizedState!==null?U._visibility&2?Co(d,p,_,k):dh(d,p):U._visibility&2?Co(d,p,_,k):(U._visibility|=2,Gu(d,p,_,k,(p.subtreeFlags&10256)!==0)),O&2048&&$j(se,p);break;case 24:Co(d,p,_,k),O&2048&&zj(p.alternate,p);break;default:Co(d,p,_,k)}}function Gu(d,p,_,k,O){for(O=O&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var U=d,se=p,ue=_,we=k,Ve=se.flags;switch(se.tag){case 0:case 11:case 15:Gu(U,se,ue,we,O),lh(8,se);break;case 23:break;case 22:var pt=se.stateNode;se.memoizedState!==null?pt._visibility&2?Gu(U,se,ue,we,O):dh(U,se):(pt._visibility|=2,Gu(U,se,ue,we,O)),O&&Ve&2048&&$j(se.alternate,se);break;case 24:Gu(U,se,ue,we,O),O&&Ve&2048&&zj(se.alternate,se);break;default:Gu(U,se,ue,we,O)}p=p.sibling}}function dh(d,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var _=d,k=p,O=k.flags;switch(k.tag){case 22:dh(_,k),O&2048&&$j(k.alternate,k);break;case 24:dh(_,k),O&2048&&zj(k.alternate,k);break;default:dh(_,k)}p=p.sibling}}var uh=8192;function Ku(d){if(d.subtreeFlags&uh)for(d=d.child;d!==null;)U5(d),d=d.sibling}function U5(d){switch(d.tag){case 26:Ku(d),d.flags&uh&&d.memoizedState!==null&&Zz(no,d.memoizedState,d.memoizedProps);break;case 5:Ku(d);break;case 3:case 4:var p=no;no=k0(d.stateNode.containerInfo),Ku(d),no=p;break;case 22:d.memoizedState===null&&(p=d.alternate,p!==null&&p.memoizedState!==null?(p=uh,uh=16777216,Ku(d),uh=p):Ku(d));break;default:Ku(d)}}function V5(d){var p=d.alternate;if(p!==null&&(d=p.child,d!==null)){p.child=null;do p=d.sibling,d.sibling=null,d=p;while(d!==null)}}function mh(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var _=0;_<p.length;_++){var k=p[_];Dr=k,W5(k,d)}V5(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)H5(d),d=d.sibling}function H5(d){switch(d.tag){case 0:case 11:case 15:mh(d),d.flags&2048&&lc(9,d,d.return);break;case 3:mh(d);break;case 12:mh(d);break;case 22:var p=d.stateNode;d.memoizedState!==null&&p._visibility&2&&(d.return===null||d.return.tag!==13)?(p._visibility&=-3,x0(d)):mh(d);break;default:mh(d)}}function x0(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var _=0;_<p.length;_++){var k=p[_];Dr=k,W5(k,d)}V5(d)}for(d=d.child;d!==null;){switch(p=d,p.tag){case 0:case 11:case 15:lc(8,p,p.return),x0(p);break;case 22:_=p.stateNode,_._visibility&2&&(_._visibility&=-3,x0(p));break;default:x0(p)}d=d.sibling}}function W5(d,p){for(;Dr!==null;){var _=Dr;switch(_.tag){case 0:case 11:case 15:lc(8,_,p);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var k=_.memoizedState.cachePool.pool;k!=null&&k.refCount++}break;case 24:Gp(_.memoizedState.cache)}if(k=_.child,k!==null)k.return=_,Dr=k;else e:for(_=d;Dr!==null;){k=Dr;var O=k.sibling,U=k.return;if(F5(k),k===_){Dr=null;break e}if(O!==null){O.return=U,Dr=O;break e}Dr=U}}}var pz={getCacheForType:function(d){var p=Jr(Cr),_=p.data.get(d);return _===void 0&&(_=d(),p.data.set(d,_)),_}},hz=typeof WeakMap=="function"?WeakMap:Map,va=0,Fa=null,Zs=null,aa=0,ja=0,Kn=null,uc=!1,Qu=!1,qj=!1,bl=0,er=0,mc=0,jd=0,Bj=0,Si=0,Zu=0,ph=null,En=null,Uj=!1,Vj=0,g0=1/0,y0=null,pc=null,Br=0,hc=null,Xu=null,Ju=0,Hj=0,Wj=null,Y5=null,hh=0,Yj=null;function Qn(){if((va&2)!==0&&aa!==0)return aa&-aa;if(q.T!==null){var d=zu;return d!==0?d:e2()}return $s()}function G5(){Si===0&&(Si=(aa&536870912)===0||da?cs():536870912);var d=_i.current;return d!==null&&(d.flags|=32),Si}function Zn(d,p,_){(d===Fa&&(ja===2||ja===9)||d.cancelPendingCommit!==null)&&(em(d,0),fc(d,aa,Si,!1)),Is(d,_),((va&2)===0||d!==Fa)&&(d===Fa&&((va&2)===0&&(jd|=_),er===4&&fc(d,aa,Si,!1)),Po(d))}function K5(d,p,_){if((va&6)!==0)throw Error(r(327));var k=!_&&(p&124)===0&&(p&d.expiredLanes)===0||Nt(d,p),O=k?gz(d,p):Qj(d,p,!0),U=k;do{if(O===0){Qu&&!k&&fc(d,p,0,!1);break}else{if(_=d.current.alternate,U&&!fz(_)){O=Qj(d,p,!1),U=!1;continue}if(O===2){if(U=p,d.errorRecoveryDisabledLanes&U)var se=0;else se=d.pendingLanes&-536870913,se=se!==0?se:se&536870912?536870912:0;if(se!==0){p=se;e:{var ue=d;O=ph;var we=ue.current.memoizedState.isDehydrated;if(we&&(em(ue,se).flags|=256),se=Qj(ue,se,!1),se!==2){if(qj&&!we){ue.errorRecoveryDisabledLanes|=U,jd|=U,O=4;break e}U=En,En=O,U!==null&&(En===null?En=U:En.push.apply(En,U))}O=se}if(U=!1,O!==2)continue}}if(O===1){em(d,0),fc(d,p,0,!0);break}e:{switch(k=d,U=O,U){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:fc(k,p,Si,!uc);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(O=Vj+300-He(),10<O)){if(fc(k,p,Si,!uc),Lt(k,0,!0)!==0)break e;k.timeoutHandle=_6(Q5.bind(null,k,_,En,y0,Uj,p,Si,jd,Zu,uc,U,2,-0,0),O);break e}Q5(k,_,En,y0,Uj,p,Si,jd,Zu,uc,U,0,-0,0)}}break}while(!0);Po(d)}function Q5(d,p,_,k,O,U,se,ue,we,Ve,pt,wt,Ke,Ze){if(d.timeoutHandle=-1,wt=p.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(jh={stylesheets:null,count:0,unsuspend:Qz},U5(p),wt=Xz(),wt!==null)){d.cancelPendingCommit=wt(a6.bind(null,d,p,U,_,k,O,se,ue,we,pt,1,Ke,Ze)),fc(d,U,se,!Ve);return}a6(d,p,U,_,k,O,se,ue,we)}function fz(d){for(var p=d;;){var _=p.tag;if((_===0||_===11||_===15)&&p.flags&16384&&(_=p.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var k=0;k<_.length;k++){var O=_[k],U=O.getSnapshot;O=O.value;try{if(!Hn(U(),O))return!1}catch{return!1}}if(_=p.child,p.subtreeFlags&16384&&_!==null)_.return=p,p=_;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function fc(d,p,_,k){p&=~Bj,p&=~jd,d.suspendedLanes|=p,d.pingedLanes&=~p,k&&(d.warmLanes|=p),k=d.expirationTimes;for(var O=p;0<O;){var U=31-be(O),se=1<<U;k[U]=-1,O&=~se}_!==0&&pa(d,_,p)}function b0(){return(va&6)===0?(fh(0),!1):!0}function Gj(){if(Zs!==null){if(ja===0)var d=Zs.return;else d=Zs,ul=fd=null,uj(d),Wu=null,nh=0,d=Zs;for(;d!==null;)E5(d.alternate,d),d=d.return;Zs=null}}function em(d,p){var _=d.timeoutHandle;_!==-1&&(d.timeoutHandle=-1,Rz(_)),_=d.cancelPendingCommit,_!==null&&(d.cancelPendingCommit=null,_()),Gj(),Fa=d,Zs=_=ll(d.current,null),aa=p,ja=0,Kn=null,uc=!1,Qu=Nt(d,p),qj=!1,Zu=Si=Bj=jd=mc=er=0,En=ph=null,Uj=!1,(p&8)!==0&&(p|=p&32);var k=d.entangledLanes;if(k!==0)for(d=d.entanglements,k&=p;0<k;){var O=31-be(k),U=1<<O;p|=d[O],k&=~U}return bl=p,qg(),_}function Z5(d,p){Vs=null,q.H=i0,p===Qp||p===Qg?(p=hC(),ja=3):p===uC?(p=hC(),ja=4):ja=p===f5?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Kn=p,Zs===null&&(er=1,u0(d,vi(p,d.current)))}function X5(){var d=q.H;return q.H=i0,d===null?i0:d}function J5(){var d=q.A;return q.A=pz,d}function Kj(){er=4,uc||(aa&4194048)!==aa&&_i.current!==null||(Qu=!0),(mc&134217727)===0&&(jd&134217727)===0||Fa===null||fc(Fa,aa,Si,!1)}function Qj(d,p,_){var k=va;va|=2;var O=X5(),U=J5();(Fa!==d||aa!==p)&&(y0=null,em(d,p)),p=!1;var se=er;e:do try{if(ja!==0&&Zs!==null){var ue=Zs,we=Kn;switch(ja){case 8:Gj(),se=6;break e;case 3:case 2:case 9:case 6:_i.current===null&&(p=!0);var Ve=ja;if(ja=0,Kn=null,tm(d,ue,we,Ve),_&&Qu){se=0;break e}break;default:Ve=ja,ja=0,Kn=null,tm(d,ue,we,Ve)}}xz(),se=er;break}catch(pt){Z5(d,pt)}while(!0);return p&&d.shellSuspendCounter++,ul=fd=null,va=k,q.H=O,q.A=U,Zs===null&&(Fa=null,aa=0,qg()),se}function xz(){for(;Zs!==null;)e6(Zs)}function gz(d,p){var _=va;va|=2;var k=X5(),O=J5();Fa!==d||aa!==p?(y0=null,g0=He()+500,em(d,p)):Qu=Nt(d,p);e:do try{if(ja!==0&&Zs!==null){p=Zs;var U=Kn;t:switch(ja){case 1:ja=0,Kn=null,tm(d,p,U,1);break;case 2:case 9:if(mC(U)){ja=0,Kn=null,t6(p);break}p=function(){ja!==2&&ja!==9||Fa!==d||(ja=7),Po(d)},U.then(p,p);break e;case 3:ja=7;break e;case 4:ja=5;break e;case 7:mC(U)?(ja=0,Kn=null,t6(p)):(ja=0,Kn=null,tm(d,p,U,7));break;case 5:var se=null;switch(Zs.tag){case 26:se=Zs.memoizedState;case 5:case 27:var ue=Zs;if(!se||O6(se)){ja=0,Kn=null;var we=ue.sibling;if(we!==null)Zs=we;else{var Ve=ue.return;Ve!==null?(Zs=Ve,v0(Ve)):Zs=null}break t}}ja=0,Kn=null,tm(d,p,U,5);break;case 6:ja=0,Kn=null,tm(d,p,U,6);break;case 8:Gj(),er=6;break e;default:throw Error(r(462))}}yz();break}catch(pt){Z5(d,pt)}while(!0);return ul=fd=null,q.H=k,q.A=O,va=_,Zs!==null?0:(Fa=null,aa=0,qg(),er)}function yz(){for(;Zs!==null&&!Re();)e6(Zs)}function e6(d){var p=P5(d.alternate,d,bl);d.memoizedProps=d.pendingProps,p===null?v0(d):Zs=p}function t6(d){var p=d,_=p.alternate;switch(p.tag){case 15:case 0:p=j5(_,p,p.pendingProps,p.type,void 0,aa);break;case 11:p=j5(_,p,p.pendingProps,p.type.render,p.ref,aa);break;case 5:uj(p);default:E5(_,p),p=Zs=sC(p,bl),p=P5(_,p,bl)}d.memoizedProps=d.pendingProps,p===null?v0(d):Zs=p}function tm(d,p,_,k){ul=fd=null,uj(p),Wu=null,nh=0;var O=p.return;try{if(oz(d,O,p,_,aa)){er=1,u0(d,vi(_,d.current)),Zs=null;return}}catch(U){if(O!==null)throw Zs=O,U;er=1,u0(d,vi(_,d.current)),Zs=null;return}p.flags&32768?(da||k===1?d=!0:Qu||(aa&536870912)!==0?d=!1:(uc=d=!0,(k===2||k===9||k===3||k===6)&&(k=_i.current,k!==null&&k.tag===13&&(k.flags|=16384))),s6(p,d)):v0(p)}function v0(d){var p=d;do{if((p.flags&32768)!==0){s6(p,uc);return}d=p.return;var _=cz(p.alternate,p,bl);if(_!==null){Zs=_;return}if(p=p.sibling,p!==null){Zs=p;return}Zs=p=d}while(p!==null);er===0&&(er=5)}function s6(d,p){do{var _=dz(d.alternate,d);if(_!==null){_.flags&=32767,Zs=_;return}if(_=d.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!p&&(d=d.sibling,d!==null)){Zs=d;return}Zs=d=_}while(d!==null);er=6,Zs=null}function a6(d,p,_,k,O,U,se,ue,we){d.cancelPendingCommit=null;do j0();while(Br!==0);if((va&6)!==0)throw Error(r(327));if(p!==null){if(p===d.current)throw Error(r(177));if(U=p.lanes|p.childLanes,U|=z1,Ms(d,_,U,se,ue,we),d===Fa&&(Zs=Fa=null,aa=0),Xu=p,hc=d,Ju=_,Hj=U,Wj=O,Y5=k,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Nz(We,function(){return l6(),null})):(d.callbackNode=null,d.callbackPriority=0),k=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||k){k=q.T,q.T=null,O=V.p,V.p=2,se=va,va|=4;try{uz(d,p,_)}finally{va=se,V.p=O,q.T=k}}Br=1,r6(),n6(),i6()}}function r6(){if(Br===1){Br=0;var d=hc,p=Xu,_=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||_){_=q.T,q.T=null;var k=V.p;V.p=2;var O=va;va|=4;try{z5(p,d);var U=l2,se=W3(d.containerInfo),ue=U.focusedElem,we=U.selectionRange;if(se!==ue&&ue&&ue.ownerDocument&&H3(ue.ownerDocument.documentElement,ue)){if(we!==null&&I1(ue)){var Ve=we.start,pt=we.end;if(pt===void 0&&(pt=Ve),"selectionStart"in ue)ue.selectionStart=Ve,ue.selectionEnd=Math.min(pt,ue.value.length);else{var wt=ue.ownerDocument||document,Ke=wt&&wt.defaultView||window;if(Ke.getSelection){var Ze=Ke.getSelection(),Ss=ue.textContent.length,js=Math.min(we.start,Ss),Ea=we.end===void 0?js:Math.min(we.end,Ss);!Ze.extend&&js>Ea&&(se=Ea,Ea=js,js=se);var Fe=V3(ue,js),Te=V3(ue,Ea);if(Fe&&Te&&(Ze.rangeCount!==1||Ze.anchorNode!==Fe.node||Ze.anchorOffset!==Fe.offset||Ze.focusNode!==Te.node||Ze.focusOffset!==Te.offset)){var Ue=wt.createRange();Ue.setStart(Fe.node,Fe.offset),Ze.removeAllRanges(),js>Ea?(Ze.addRange(Ue),Ze.extend(Te.node,Te.offset)):(Ue.setEnd(Te.node,Te.offset),Ze.addRange(Ue))}}}}for(wt=[],Ze=ue;Ze=Ze.parentNode;)Ze.nodeType===1&&wt.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof ue.focus=="function"&&ue.focus(),ue=0;ue<wt.length;ue++){var yt=wt[ue];yt.element.scrollLeft=yt.left,yt.element.scrollTop=yt.top}}R0=!!o2,l2=o2=null}finally{va=O,V.p=k,q.T=_}}d.current=p,Br=2}}function n6(){if(Br===2){Br=0;var d=hc,p=Xu,_=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||_){_=q.T,q.T=null;var k=V.p;V.p=2;var O=va;va|=4;try{O5(d,p.alternate,p)}finally{va=O,V.p=k,q.T=_}}Br=3}}function i6(){if(Br===4||Br===3){Br=0,Se();var d=hc,p=Xu,_=Ju,k=Y5;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Br=5:(Br=0,Xu=hc=null,o6(d,d.pendingLanes));var O=d.pendingLanes;if(O===0&&(pc=null),$t(_),p=p.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(ct,p,void 0,(p.current.flags&128)===128)}catch{}if(k!==null){p=q.T,O=V.p,V.p=2,q.T=null;try{for(var U=d.onRecoverableError,se=0;se<k.length;se++){var ue=k[se];U(ue.value,{componentStack:ue.stack})}}finally{q.T=p,V.p=O}}(Ju&3)!==0&&j0(),Po(d),O=d.pendingLanes,(_&4194090)!==0&&(O&42)!==0?d===Yj?hh++:(hh=0,Yj=d):hh=0,fh(0)}}function o6(d,p){(d.pooledCacheLanes&=p)===0&&(p=d.pooledCache,p!=null&&(d.pooledCache=null,Gp(p)))}function j0(d){return r6(),n6(),i6(),l6()}function l6(){if(Br!==5)return!1;var d=hc,p=Hj;Hj=0;var _=$t(Ju),k=q.T,O=V.p;try{V.p=32>_?32:_,q.T=null,_=Wj,Wj=null;var U=hc,se=Ju;if(Br=0,Xu=hc=null,Ju=0,(va&6)!==0)throw Error(r(331));var ue=va;if(va|=4,H5(U.current),B5(U,U.current,se,_),va=ue,fh(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(ct,U)}catch{}return!0}finally{V.p=O,q.T=k,o6(d,p)}}function c6(d,p,_){p=vi(_,p),p=Sj(d.stateNode,p,2),d=rc(d,p,2),d!==null&&(Is(d,2),Po(d))}function Aa(d,p,_){if(d.tag===3)c6(d,d,_);else for(;p!==null;){if(p.tag===3){c6(p,d,_);break}else if(p.tag===1){var k=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(pc===null||!pc.has(k))){d=vi(_,d),_=p5(2),k=rc(p,_,2),k!==null&&(h5(_,k,p,d),Is(k,2),Po(k));break}}p=p.return}}function Zj(d,p,_){var k=d.pingCache;if(k===null){k=d.pingCache=new hz;var O=new Set;k.set(p,O)}else O=k.get(p),O===void 0&&(O=new Set,k.set(p,O));O.has(_)||(qj=!0,O.add(_),d=bz.bind(null,d,p,_),p.then(d,d))}function bz(d,p,_){var k=d.pingCache;k!==null&&k.delete(p),d.pingedLanes|=d.suspendedLanes&_,d.warmLanes&=~_,Fa===d&&(aa&_)===_&&(er===4||er===3&&(aa&62914560)===aa&&300>He()-Vj?(va&2)===0&&em(d,0):Bj|=_,Zu===aa&&(Zu=0)),Po(d)}function d6(d,p){p===0&&(p=Ns()),d=Ou(d,p),d!==null&&(Is(d,p),Po(d))}function vz(d){var p=d.memoizedState,_=0;p!==null&&(_=p.retryLane),d6(d,_)}function jz(d,p){var _=0;switch(d.tag){case 13:var k=d.stateNode,O=d.memoizedState;O!==null&&(_=O.retryLane);break;case 19:k=d.stateNode;break;case 22:k=d.stateNode._retryCache;break;default:throw Error(r(314))}k!==null&&k.delete(p),d6(d,_)}function Nz(d,p){return le(d,p)}var N0=null,sm=null,Xj=!1,w0=!1,Jj=!1,Nd=0;function Po(d){d!==sm&&d.next===null&&(sm===null?N0=sm=d:sm=sm.next=d),w0=!0,Xj||(Xj=!0,_z())}function fh(d,p){if(!Jj&&w0){Jj=!0;do for(var _=!1,k=N0;k!==null;){if(d!==0){var O=k.pendingLanes;if(O===0)var U=0;else{var se=k.suspendedLanes,ue=k.pingedLanes;U=(1<<31-be(42|d)+1)-1,U&=O&~(se&~ue),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(_=!0,h6(k,U))}else U=aa,U=Lt(k,k===Fa?U:0,k.cancelPendingCommit!==null||k.timeoutHandle!==-1),(U&3)===0||Nt(k,U)||(_=!0,h6(k,U));k=k.next}while(_);Jj=!1}}function wz(){u6()}function u6(){w0=Xj=!1;var d=0;Nd!==0&&(Dz()&&(d=Nd),Nd=0);for(var p=He(),_=null,k=N0;k!==null;){var O=k.next,U=m6(k,p);U===0?(k.next=null,_===null?N0=O:_.next=O,O===null&&(sm=_)):(_=k,(d!==0||(U&3)!==0)&&(w0=!0)),k=O}fh(d)}function m6(d,p){for(var _=d.suspendedLanes,k=d.pingedLanes,O=d.expirationTimes,U=d.pendingLanes&-62914561;0<U;){var se=31-be(U),ue=1<<se,we=O[se];we===-1?((ue&_)===0||(ue&k)!==0)&&(O[se]=ps(ue,p)):we<=p&&(d.expiredLanes|=ue),U&=~ue}if(p=Fa,_=aa,_=Lt(d,d===p?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),k=d.callbackNode,_===0||d===p&&(ja===2||ja===9)||d.cancelPendingCommit!==null)return k!==null&&k!==null&&pe(k),d.callbackNode=null,d.callbackPriority=0;if((_&3)===0||Nt(d,_)){if(p=_&-_,p===d.callbackPriority)return p;switch(k!==null&&pe(k),$t(_)){case 2:case 8:_=ke;break;case 32:_=We;break;case 268435456:_=Ye;break;default:_=We}return k=p6.bind(null,d),_=le(_,k),d.callbackPriority=p,d.callbackNode=_,p}return k!==null&&k!==null&&pe(k),d.callbackPriority=2,d.callbackNode=null,2}function p6(d,p){if(Br!==0&&Br!==5)return d.callbackNode=null,d.callbackPriority=0,null;var _=d.callbackNode;if(j0()&&d.callbackNode!==_)return null;var k=aa;return k=Lt(d,d===Fa?k:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),k===0?null:(K5(d,k,p),m6(d,He()),d.callbackNode!=null&&d.callbackNode===_?p6.bind(null,d):null)}function h6(d,p){if(j0())return null;K5(d,p,!0)}function _z(){Az(function(){(va&6)!==0?le(st,wz):u6()})}function e2(){return Nd===0&&(Nd=cs()),Nd}function f6(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Ag(""+d)}function x6(d,p){var _=p.ownerDocument.createElement("input");return _.name=p.name,_.value=p.value,d.id&&_.setAttribute("form",d.id),p.parentNode.insertBefore(_,p),d=new FormData(d),_.parentNode.removeChild(_),d}function Sz(d,p,_,k,O){if(p==="submit"&&_&&_.stateNode===O){var U=f6((O[ve]||null).action),se=k.submitter;se&&(p=(p=se[ve]||null)?f6(p.formAction):se.getAttribute("formAction"),p!==null&&(U=p,se=null));var ue=new Lg("action","action",null,k,O);d.push({event:ue,listeners:[{instance:null,listener:function(){if(k.defaultPrevented){if(Nd!==0){var we=se?x6(O,se):new FormData(O);vj(_,{pending:!0,data:we,method:O.method,action:U},null,we)}}else typeof U=="function"&&(ue.preventDefault(),we=se?x6(O,se):new FormData(O),vj(_,{pending:!0,data:we,method:O.method,action:U},U,we))},currentTarget:O}]})}}for(var t2=0;t2<$1.length;t2++){var s2=$1[t2],Cz=s2.toLowerCase(),Pz=s2[0].toUpperCase()+s2.slice(1);ro(Cz,"on"+Pz)}ro(K3,"onAnimationEnd"),ro(Q3,"onAnimationIteration"),ro(Z3,"onAnimationStart"),ro("dblclick","onDoubleClick"),ro("focusin","onFocus"),ro("focusout","onBlur"),ro(V$,"onTransitionRun"),ro(H$,"onTransitionStart"),ro(W$,"onTransitionCancel"),ro(X3,"onTransitionEnd"),Qt("onMouseEnter",["mouseout","mouseover"]),Qt("onMouseLeave",["mouseout","mouseover"]),Qt("onPointerEnter",["pointerout","pointerover"]),Qt("onPointerLeave",["pointerout","pointerover"]),Mt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xh));function g6(d,p){p=(p&4)!==0;for(var _=0;_<d.length;_++){var k=d[_],O=k.event;k=k.listeners;e:{var U=void 0;if(p)for(var se=k.length-1;0<=se;se--){var ue=k[se],we=ue.instance,Ve=ue.currentTarget;if(ue=ue.listener,we!==U&&O.isPropagationStopped())break e;U=ue,O.currentTarget=Ve;try{U(O)}catch(pt){d0(pt)}O.currentTarget=null,U=we}else for(se=0;se<k.length;se++){if(ue=k[se],we=ue.instance,Ve=ue.currentTarget,ue=ue.listener,we!==U&&O.isPropagationStopped())break e;U=ue,O.currentTarget=Ve;try{U(O)}catch(pt){d0(pt)}O.currentTarget=null,U=we}}}}function Xs(d,p){var _=p[qe];_===void 0&&(_=p[qe]=new Set);var k=d+"__bubble";_.has(k)||(y6(p,d,2,!1),_.add(k))}function a2(d,p,_){var k=0;p&&(k|=4),y6(_,d,k,p)}var _0="_reactListening"+Math.random().toString(36).slice(2);function r2(d){if(!d[_0]){d[_0]=!0,Pe.forEach(function(_){_!=="selectionchange"&&(kz.has(_)||a2(_,!1,d),a2(_,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[_0]||(p[_0]=!0,a2("selectionchange",!1,p))}}function y6(d,p,_,k){switch(B6(p)){case 2:var O=tq;break;case 8:O=sq;break;default:O=y2}_=O.bind(null,p,_,d),O=void 0,!C1||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(O=!0),k?O!==void 0?d.addEventListener(p,_,{capture:!0,passive:O}):d.addEventListener(p,_,!0):O!==void 0?d.addEventListener(p,_,{passive:O}):d.addEventListener(p,_,!1)}function n2(d,p,_,k,O){var U=k;if((p&1)===0&&(p&2)===0&&k!==null)e:for(;;){if(k===null)return;var se=k.tag;if(se===3||se===4){var ue=k.stateNode.containerInfo;if(ue===O)break;if(se===4)for(se=k.return;se!==null;){var we=se.tag;if((we===3||we===4)&&se.stateNode.containerInfo===O)return;se=se.return}for(;ue!==null;){if(se=_t(ue),se===null)return;if(we=se.tag,we===5||we===6||we===26||we===27){k=U=se;continue e}ue=ue.parentNode}}k=k.return}S3(function(){var Ve=U,pt=_1(_),wt=[];e:{var Ke=J3.get(d);if(Ke!==void 0){var Ze=Lg,Ss=d;switch(d){case"keypress":if(Og(_)===0)break e;case"keydown":case"keyup":Ze=N$;break;case"focusin":Ss="focus",Ze=T1;break;case"focusout":Ss="blur",Ze=T1;break;case"beforeblur":case"afterblur":Ze=T1;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=k3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=d$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=S$;break;case K3:case Q3:case Z3:Ze=p$;break;case X3:Ze=P$;break;case"scroll":case"scrollend":Ze=l$;break;case"wheel":Ze=E$;break;case"copy":case"cut":case"paste":Ze=f$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=T3;break;case"toggle":case"beforetoggle":Ze=M$}var js=(p&4)!==0,Ea=!js&&(d==="scroll"||d==="scrollend"),Fe=js?Ke!==null?Ke+"Capture":null:Ke;js=[];for(var Te=Ve,Ue;Te!==null;){var yt=Te;if(Ue=yt.stateNode,yt=yt.tag,yt!==5&&yt!==26&&yt!==27||Ue===null||Fe===null||(yt=Ip(Te,Fe),yt!=null&&js.push(gh(Te,yt,Ue))),Ea)break;Te=Te.return}0<js.length&&(Ke=new Ze(Ke,Ss,null,_,pt),wt.push({event:Ke,listeners:js}))}}if((p&7)===0){e:{if(Ke=d==="mouseover"||d==="pointerover",Ze=d==="mouseout"||d==="pointerout",Ke&&_!==w1&&(Ss=_.relatedTarget||_.fromElement)&&(_t(Ss)||Ss[Ce]))break e;if((Ze||Ke)&&(Ke=pt.window===pt?pt:(Ke=pt.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,Ze?(Ss=_.relatedTarget||_.toElement,Ze=Ve,Ss=Ss?_t(Ss):null,Ss!==null&&(Ea=i(Ss),js=Ss.tag,Ss!==Ea||js!==5&&js!==27&&js!==6)&&(Ss=null)):(Ze=null,Ss=Ve),Ze!==Ss)){if(js=k3,yt="onMouseLeave",Fe="onMouseEnter",Te="mouse",(d==="pointerout"||d==="pointerover")&&(js=T3,yt="onPointerLeave",Fe="onPointerEnter",Te="pointer"),Ea=Ze==null?Ke:ss(Ze),Ue=Ss==null?Ke:ss(Ss),Ke=new js(yt,Te+"leave",Ze,_,pt),Ke.target=Ea,Ke.relatedTarget=Ue,yt=null,_t(pt)===Ve&&(js=new js(Fe,Te+"enter",Ss,_,pt),js.target=Ue,js.relatedTarget=Ea,yt=js),Ea=yt,Ze&&Ss)t:{for(js=Ze,Fe=Ss,Te=0,Ue=js;Ue;Ue=am(Ue))Te++;for(Ue=0,yt=Fe;yt;yt=am(yt))Ue++;for(;0<Te-Ue;)js=am(js),Te--;for(;0<Ue-Te;)Fe=am(Fe),Ue--;for(;Te--;){if(js===Fe||Fe!==null&&js===Fe.alternate)break t;js=am(js),Fe=am(Fe)}js=null}else js=null;Ze!==null&&b6(wt,Ke,Ze,js,!1),Ss!==null&&Ea!==null&&b6(wt,Ea,Ss,js,!0)}}e:{if(Ke=Ve?ss(Ve):window,Ze=Ke.nodeName&&Ke.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&Ke.type==="file")var ns=L3;else if(O3(Ke))if($3)ns=q$;else{ns=$$;var Gs=L$}else Ze=Ke.nodeName,!Ze||Ze.toLowerCase()!=="input"||Ke.type!=="checkbox"&&Ke.type!=="radio"?Ve&&N1(Ve.elementType)&&(ns=L3):ns=z$;if(ns&&(ns=ns(d,Ve))){F3(wt,ns,_,pt);break e}Gs&&Gs(d,Ke,Ve),d==="focusout"&&Ve&&Ke.type==="number"&&Ve.memoizedProps.value!=null&&j1(Ke,"number",Ke.value)}switch(Gs=Ve?ss(Ve):window,d){case"focusin":(O3(Gs)||Gs.contentEditable==="true")&&(Ru=Gs,O1=Ve,Up=null);break;case"focusout":Up=O1=Ru=null;break;case"mousedown":F1=!0;break;case"contextmenu":case"mouseup":case"dragend":F1=!1,Y3(wt,_,pt);break;case"selectionchange":if(U$)break;case"keydown":case"keyup":Y3(wt,_,pt)}var us;if(D1)e:{switch(d){case"compositionstart":var ws="onCompositionStart";break e;case"compositionend":ws="onCompositionEnd";break e;case"compositionupdate":ws="onCompositionUpdate";break e}ws=void 0}else Du?A3(d,_)&&(ws="onCompositionEnd"):d==="keydown"&&_.keyCode===229&&(ws="onCompositionStart");ws&&(M3&&_.locale!=="ko"&&(Du||ws!=="onCompositionStart"?ws==="onCompositionEnd"&&Du&&(us=C3()):(ec=pt,P1="value"in ec?ec.value:ec.textContent,Du=!0)),Gs=S0(Ve,ws),0<Gs.length&&(ws=new E3(ws,d,null,_,pt),wt.push({event:ws,listeners:Gs}),us?ws.data=us:(us=I3(_),us!==null&&(ws.data=us)))),(us=R$?A$(d,_):I$(d,_))&&(ws=S0(Ve,"onBeforeInput"),0<ws.length&&(Gs=new E3("onBeforeInput","beforeinput",null,_,pt),wt.push({event:Gs,listeners:ws}),Gs.data=us)),Sz(wt,d,Ve,_,pt)}g6(wt,p)})}function gh(d,p,_){return{instance:d,listener:p,currentTarget:_}}function S0(d,p){for(var _=p+"Capture",k=[];d!==null;){var O=d,U=O.stateNode;if(O=O.tag,O!==5&&O!==26&&O!==27||U===null||(O=Ip(d,_),O!=null&&k.unshift(gh(d,O,U)),O=Ip(d,p),O!=null&&k.push(gh(d,O,U))),d.tag===3)return k;d=d.return}return[]}function am(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function b6(d,p,_,k,O){for(var U=p._reactName,se=[];_!==null&&_!==k;){var ue=_,we=ue.alternate,Ve=ue.stateNode;if(ue=ue.tag,we!==null&&we===k)break;ue!==5&&ue!==26&&ue!==27||Ve===null||(we=Ve,O?(Ve=Ip(_,U),Ve!=null&&se.unshift(gh(_,Ve,we))):O||(Ve=Ip(_,U),Ve!=null&&se.push(gh(_,Ve,we)))),_=_.return}se.length!==0&&d.push({event:p,listeners:se})}var Ez=/\r\n?/g,Tz=/\u0000|\uFFFD/g;function v6(d){return(typeof d=="string"?d:""+d).replace(Ez,`
`).replace(Tz,"")}function j6(d,p){return p=v6(p),v6(d)===p}function C0(){}function ka(d,p,_,k,O,U){switch(_){case"children":typeof k=="string"?p==="body"||p==="textarea"&&k===""||Eu(d,k):(typeof k=="number"||typeof k=="bigint")&&p!=="body"&&Eu(d,""+k);break;case"className":Oa(d,"class",k);break;case"tabIndex":Oa(d,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":Oa(d,_,k);break;case"style":w3(d,k,U);break;case"data":if(p!=="object"){Oa(d,"data",k);break}case"src":case"href":if(k===""&&(p!=="a"||_!=="href")){d.removeAttribute(_);break}if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean"){d.removeAttribute(_);break}k=Ag(""+k),d.setAttribute(_,k);break;case"action":case"formAction":if(typeof k=="function"){d.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(_==="formAction"?(p!=="input"&&ka(d,p,"name",O.name,O,null),ka(d,p,"formEncType",O.formEncType,O,null),ka(d,p,"formMethod",O.formMethod,O,null),ka(d,p,"formTarget",O.formTarget,O,null)):(ka(d,p,"encType",O.encType,O,null),ka(d,p,"method",O.method,O,null),ka(d,p,"target",O.target,O,null)));if(k==null||typeof k=="symbol"||typeof k=="boolean"){d.removeAttribute(_);break}k=Ag(""+k),d.setAttribute(_,k);break;case"onClick":k!=null&&(d.onclick=C0);break;case"onScroll":k!=null&&Xs("scroll",d);break;case"onScrollEnd":k!=null&&Xs("scrollend",d);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(_=k.__html,_!=null){if(O.children!=null)throw Error(r(60));d.innerHTML=_}}break;case"multiple":d.multiple=k&&typeof k!="function"&&typeof k!="symbol";break;case"muted":d.muted=k&&typeof k!="function"&&typeof k!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(k==null||typeof k=="function"||typeof k=="boolean"||typeof k=="symbol"){d.removeAttribute("xlink:href");break}_=Ag(""+k),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":k!=null&&typeof k!="function"&&typeof k!="symbol"?d.setAttribute(_,""+k):d.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"?d.setAttribute(_,""):d.removeAttribute(_);break;case"capture":case"download":k===!0?d.setAttribute(_,""):k!==!1&&k!=null&&typeof k!="function"&&typeof k!="symbol"?d.setAttribute(_,k):d.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":k!=null&&typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k?d.setAttribute(_,k):d.removeAttribute(_);break;case"rowSpan":case"start":k==null||typeof k=="function"||typeof k=="symbol"||isNaN(k)?d.removeAttribute(_):d.setAttribute(_,k);break;case"popover":Xs("beforetoggle",d),Xs("toggle",d),Rs(d,"popover",k);break;case"xlinkActuate":Ua(d,"http://www.w3.org/1999/xlink","xlink:actuate",k);break;case"xlinkArcrole":Ua(d,"http://www.w3.org/1999/xlink","xlink:arcrole",k);break;case"xlinkRole":Ua(d,"http://www.w3.org/1999/xlink","xlink:role",k);break;case"xlinkShow":Ua(d,"http://www.w3.org/1999/xlink","xlink:show",k);break;case"xlinkTitle":Ua(d,"http://www.w3.org/1999/xlink","xlink:title",k);break;case"xlinkType":Ua(d,"http://www.w3.org/1999/xlink","xlink:type",k);break;case"xmlBase":Ua(d,"http://www.w3.org/XML/1998/namespace","xml:base",k);break;case"xmlLang":Ua(d,"http://www.w3.org/XML/1998/namespace","xml:lang",k);break;case"xmlSpace":Ua(d,"http://www.w3.org/XML/1998/namespace","xml:space",k);break;case"is":Rs(d,"is",k);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=i$.get(_)||_,Rs(d,_,k))}}function i2(d,p,_,k,O,U){switch(_){case"style":w3(d,k,U);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(r(61));if(_=k.__html,_!=null){if(O.children!=null)throw Error(r(60));d.innerHTML=_}}break;case"children":typeof k=="string"?Eu(d,k):(typeof k=="number"||typeof k=="bigint")&&Eu(d,""+k);break;case"onScroll":k!=null&&Xs("scroll",d);break;case"onScrollEnd":k!=null&&Xs("scrollend",d);break;case"onClick":k!=null&&(d.onclick=C0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Be.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(O=_.endsWith("Capture"),p=_.slice(2,O?_.length-7:void 0),U=d[ve]||null,U=U!=null?U[_]:null,typeof U=="function"&&d.removeEventListener(p,U,O),typeof k=="function")){typeof U!="function"&&U!==null&&(_ in d?d[_]=null:d.hasAttribute(_)&&d.removeAttribute(_)),d.addEventListener(p,k,O);break e}_ in d?d[_]=k:k===!0?d.setAttribute(_,""):Rs(d,_,k)}}}function Ur(d,p,_){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xs("error",d),Xs("load",d);var k=!1,O=!1,U;for(U in _)if(_.hasOwnProperty(U)){var se=_[U];if(se!=null)switch(U){case"src":k=!0;break;case"srcSet":O=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:ka(d,p,U,se,_,null)}}O&&ka(d,p,"srcSet",_.srcSet,_,null),k&&ka(d,p,"src",_.src,_,null);return;case"input":Xs("invalid",d);var ue=U=se=O=null,we=null,Ve=null;for(k in _)if(_.hasOwnProperty(k)){var pt=_[k];if(pt!=null)switch(k){case"name":O=pt;break;case"type":se=pt;break;case"checked":we=pt;break;case"defaultChecked":Ve=pt;break;case"value":U=pt;break;case"defaultValue":ue=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,p));break;default:ka(d,p,k,pt,_,null)}}b3(d,U,ue,we,Ve,se,O,!1),id(d);return;case"select":Xs("invalid",d),k=se=U=null;for(O in _)if(_.hasOwnProperty(O)&&(ue=_[O],ue!=null))switch(O){case"value":U=ue;break;case"defaultValue":se=ue;break;case"multiple":k=ue;default:ka(d,p,O,ue,_,null)}p=U,_=se,d.multiple=!!k,p!=null?ku(d,!!k,p,!1):_!=null&&ku(d,!!k,_,!0);return;case"textarea":Xs("invalid",d),U=O=k=null;for(se in _)if(_.hasOwnProperty(se)&&(ue=_[se],ue!=null))switch(se){case"value":k=ue;break;case"defaultValue":O=ue;break;case"children":U=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(91));break;default:ka(d,p,se,ue,_,null)}j3(d,k,O,U),id(d);return;case"option":for(we in _)_.hasOwnProperty(we)&&(k=_[we],k!=null)&&(we==="selected"?d.selected=k&&typeof k!="function"&&typeof k!="symbol":ka(d,p,we,k,_,null));return;case"dialog":Xs("beforetoggle",d),Xs("toggle",d),Xs("cancel",d),Xs("close",d);break;case"iframe":case"object":Xs("load",d);break;case"video":case"audio":for(k=0;k<xh.length;k++)Xs(xh[k],d);break;case"image":Xs("error",d),Xs("load",d);break;case"details":Xs("toggle",d);break;case"embed":case"source":case"link":Xs("error",d),Xs("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ve in _)if(_.hasOwnProperty(Ve)&&(k=_[Ve],k!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:ka(d,p,Ve,k,_,null)}return;default:if(N1(p)){for(pt in _)_.hasOwnProperty(pt)&&(k=_[pt],k!==void 0&&i2(d,p,pt,k,_,void 0));return}}for(ue in _)_.hasOwnProperty(ue)&&(k=_[ue],k!=null&&ka(d,p,ue,k,_,null))}function Mz(d,p,_,k){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var O=null,U=null,se=null,ue=null,we=null,Ve=null,pt=null;for(Ze in _){var wt=_[Ze];if(_.hasOwnProperty(Ze)&&wt!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":we=wt;default:k.hasOwnProperty(Ze)||ka(d,p,Ze,null,k,wt)}}for(var Ke in k){var Ze=k[Ke];if(wt=_[Ke],k.hasOwnProperty(Ke)&&(Ze!=null||wt!=null))switch(Ke){case"type":U=Ze;break;case"name":O=Ze;break;case"checked":Ve=Ze;break;case"defaultChecked":pt=Ze;break;case"value":se=Ze;break;case"defaultValue":ue=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(r(137,p));break;default:Ze!==wt&&ka(d,p,Ke,Ze,k,wt)}}v1(d,se,ue,we,Ve,pt,U,O);return;case"select":Ze=se=ue=Ke=null;for(U in _)if(we=_[U],_.hasOwnProperty(U)&&we!=null)switch(U){case"value":break;case"multiple":Ze=we;default:k.hasOwnProperty(U)||ka(d,p,U,null,k,we)}for(O in k)if(U=k[O],we=_[O],k.hasOwnProperty(O)&&(U!=null||we!=null))switch(O){case"value":Ke=U;break;case"defaultValue":ue=U;break;case"multiple":se=U;default:U!==we&&ka(d,p,O,U,k,we)}p=ue,_=se,k=Ze,Ke!=null?ku(d,!!_,Ke,!1):!!k!=!!_&&(p!=null?ku(d,!!_,p,!0):ku(d,!!_,_?[]:"",!1));return;case"textarea":Ze=Ke=null;for(ue in _)if(O=_[ue],_.hasOwnProperty(ue)&&O!=null&&!k.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:ka(d,p,ue,null,k,O)}for(se in k)if(O=k[se],U=_[se],k.hasOwnProperty(se)&&(O!=null||U!=null))switch(se){case"value":Ke=O;break;case"defaultValue":Ze=O;break;case"children":break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:O!==U&&ka(d,p,se,O,k,U)}v3(d,Ke,Ze);return;case"option":for(var Ss in _)Ke=_[Ss],_.hasOwnProperty(Ss)&&Ke!=null&&!k.hasOwnProperty(Ss)&&(Ss==="selected"?d.selected=!1:ka(d,p,Ss,null,k,Ke));for(we in k)Ke=k[we],Ze=_[we],k.hasOwnProperty(we)&&Ke!==Ze&&(Ke!=null||Ze!=null)&&(we==="selected"?d.selected=Ke&&typeof Ke!="function"&&typeof Ke!="symbol":ka(d,p,we,Ke,k,Ze));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var js in _)Ke=_[js],_.hasOwnProperty(js)&&Ke!=null&&!k.hasOwnProperty(js)&&ka(d,p,js,null,k,Ke);for(Ve in k)if(Ke=k[Ve],Ze=_[Ve],k.hasOwnProperty(Ve)&&Ke!==Ze&&(Ke!=null||Ze!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(r(137,p));break;default:ka(d,p,Ve,Ke,k,Ze)}return;default:if(N1(p)){for(var Ea in _)Ke=_[Ea],_.hasOwnProperty(Ea)&&Ke!==void 0&&!k.hasOwnProperty(Ea)&&i2(d,p,Ea,void 0,k,Ke);for(pt in k)Ke=k[pt],Ze=_[pt],!k.hasOwnProperty(pt)||Ke===Ze||Ke===void 0&&Ze===void 0||i2(d,p,pt,Ke,k,Ze);return}}for(var Fe in _)Ke=_[Fe],_.hasOwnProperty(Fe)&&Ke!=null&&!k.hasOwnProperty(Fe)&&ka(d,p,Fe,null,k,Ke);for(wt in k)Ke=k[wt],Ze=_[wt],!k.hasOwnProperty(wt)||Ke===Ze||Ke==null&&Ze==null||ka(d,p,wt,Ke,k,Ze)}var o2=null,l2=null;function P0(d){return d.nodeType===9?d:d.ownerDocument}function N6(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w6(d,p){if(d===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&p==="foreignObject"?0:d}function c2(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var d2=null;function Dz(){var d=window.event;return d&&d.type==="popstate"?d===d2?!1:(d2=d,!0):(d2=null,!1)}var _6=typeof setTimeout=="function"?setTimeout:void 0,Rz=typeof clearTimeout=="function"?clearTimeout:void 0,S6=typeof Promise=="function"?Promise:void 0,Az=typeof queueMicrotask=="function"?queueMicrotask:typeof S6<"u"?function(d){return S6.resolve(null).then(d).catch(Iz)}:_6;function Iz(d){setTimeout(function(){throw d})}function xc(d){return d==="head"}function C6(d,p){var _=p,k=0,O=0;do{var U=_.nextSibling;if(d.removeChild(_),U&&U.nodeType===8)if(_=U.data,_==="/$"){if(0<k&&8>k){_=k;var se=d.ownerDocument;if(_&1&&yh(se.documentElement),_&2&&yh(se.body),_&4)for(_=se.head,yh(_),se=_.firstChild;se;){var ue=se.nextSibling,we=se.nodeName;se[Ae]||we==="SCRIPT"||we==="STYLE"||we==="LINK"&&se.rel.toLowerCase()==="stylesheet"||_.removeChild(se),se=ue}}if(O===0){d.removeChild(U),Ch(p);return}O--}else _==="$"||_==="$?"||_==="$!"?O++:k=_.charCodeAt(0)-48;else k=0;_=U}while(_);Ch(p)}function u2(d){var p=d.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var _=p;switch(p=p.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":u2(_),ft(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}d.removeChild(_)}}function Oz(d,p,_,k){for(;d.nodeType===1;){var O=_;if(d.nodeName.toLowerCase()!==p.toLowerCase()){if(!k&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(k){if(!d[Ae])switch(p){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(U=d.getAttribute("rel"),U==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(U!==O.rel||d.getAttribute("href")!==(O.href==null||O.href===""?null:O.href)||d.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin)||d.getAttribute("title")!==(O.title==null?null:O.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(U=d.getAttribute("src"),(U!==(O.src==null?null:O.src)||d.getAttribute("type")!==(O.type==null?null:O.type)||d.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin))&&U&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(p==="input"&&d.type==="hidden"){var U=O.name==null?null:""+O.name;if(O.type==="hidden"&&d.getAttribute("name")===U)return d}else return d;if(d=io(d.nextSibling),d===null)break}return null}function Fz(d,p,_){if(p==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!_||(d=io(d.nextSibling),d===null))return null;return d}function m2(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function Lz(d,p){var _=d.ownerDocument;if(d.data!=="$?"||_.readyState==="complete")p();else{var k=function(){p(),_.removeEventListener("DOMContentLoaded",k)};_.addEventListener("DOMContentLoaded",k),d._reactRetry=k}}function io(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return d}var p2=null;function P6(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var _=d.data;if(_==="$"||_==="$!"||_==="$?"){if(p===0)return d;p--}else _==="/$"&&p++}d=d.previousSibling}return null}function k6(d,p,_){switch(p=P0(_),d){case"html":if(d=p.documentElement,!d)throw Error(r(452));return d;case"head":if(d=p.head,!d)throw Error(r(453));return d;case"body":if(d=p.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function yh(d){for(var p=d.attributes;p.length;)d.removeAttributeNode(p[0]);ft(d)}var Ci=new Map,E6=new Set;function k0(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var vl=V.d;V.d={f:$z,r:zz,D:qz,C:Bz,L:Uz,m:Vz,X:Wz,S:Hz,M:Yz};function $z(){var d=vl.f(),p=b0();return d||p}function zz(d){var p=Gt(d);p!==null&&p.tag===5&&p.type==="form"?KC(p):vl.r(d)}var rm=typeof document>"u"?null:document;function T6(d,p,_){var k=rm;if(k&&typeof p=="string"&&p){var O=bi(p);O='link[rel="'+d+'"][href="'+O+'"]',typeof _=="string"&&(O+='[crossorigin="'+_+'"]'),E6.has(O)||(E6.add(O),d={rel:d,crossOrigin:_,href:p},k.querySelector(O)===null&&(p=k.createElement("link"),Ur(p,"link",d),Rt(p),k.head.appendChild(p)))}}function qz(d){vl.D(d),T6("dns-prefetch",d,null)}function Bz(d,p){vl.C(d,p),T6("preconnect",d,p)}function Uz(d,p,_){vl.L(d,p,_);var k=rm;if(k&&d&&p){var O='link[rel="preload"][as="'+bi(p)+'"]';p==="image"&&_&&_.imageSrcSet?(O+='[imagesrcset="'+bi(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(O+='[imagesizes="'+bi(_.imageSizes)+'"]')):O+='[href="'+bi(d)+'"]';var U=O;switch(p){case"style":U=nm(d);break;case"script":U=im(d)}Ci.has(U)||(d=u({rel:"preload",href:p==="image"&&_&&_.imageSrcSet?void 0:d,as:p},_),Ci.set(U,d),k.querySelector(O)!==null||p==="style"&&k.querySelector(bh(U))||p==="script"&&k.querySelector(vh(U))||(p=k.createElement("link"),Ur(p,"link",d),Rt(p),k.head.appendChild(p)))}}function Vz(d,p){vl.m(d,p);var _=rm;if(_&&d){var k=p&&typeof p.as=="string"?p.as:"script",O='link[rel="modulepreload"][as="'+bi(k)+'"][href="'+bi(d)+'"]',U=O;switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=im(d)}if(!Ci.has(U)&&(d=u({rel:"modulepreload",href:d},p),Ci.set(U,d),_.querySelector(O)===null)){switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(vh(U)))return}k=_.createElement("link"),Ur(k,"link",d),Rt(k),_.head.appendChild(k)}}}function Hz(d,p,_){vl.S(d,p,_);var k=rm;if(k&&d){var O=$e(k).hoistableStyles,U=nm(d);p=p||"default";var se=O.get(U);if(!se){var ue={loading:0,preload:null};if(se=k.querySelector(bh(U)))ue.loading=5;else{d=u({rel:"stylesheet",href:d,"data-precedence":p},_),(_=Ci.get(U))&&h2(d,_);var we=se=k.createElement("link");Rt(we),Ur(we,"link",d),we._p=new Promise(function(Ve,pt){we.onload=Ve,we.onerror=pt}),we.addEventListener("load",function(){ue.loading|=1}),we.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,E0(se,p,k)}se={type:"stylesheet",instance:se,count:1,state:ue},O.set(U,se)}}}function Wz(d,p){vl.X(d,p);var _=rm;if(_&&d){var k=$e(_).hoistableScripts,O=im(d),U=k.get(O);U||(U=_.querySelector(vh(O)),U||(d=u({src:d,async:!0},p),(p=Ci.get(O))&&f2(d,p),U=_.createElement("script"),Rt(U),Ur(U,"link",d),_.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},k.set(O,U))}}function Yz(d,p){vl.M(d,p);var _=rm;if(_&&d){var k=$e(_).hoistableScripts,O=im(d),U=k.get(O);U||(U=_.querySelector(vh(O)),U||(d=u({src:d,async:!0,type:"module"},p),(p=Ci.get(O))&&f2(d,p),U=_.createElement("script"),Rt(U),Ur(U,"link",d),_.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},k.set(O,U))}}function M6(d,p,_,k){var O=(O=ee.current)?k0(O):null;if(!O)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(p=nm(_.href),_=$e(O).hoistableStyles,k=_.get(p),k||(k={type:"style",instance:null,count:0,state:null},_.set(p,k)),k):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){d=nm(_.href);var U=$e(O).hoistableStyles,se=U.get(d);if(se||(O=O.ownerDocument||O,se={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(d,se),(U=O.querySelector(bh(d)))&&!U._p&&(se.instance=U,se.state.loading=5),Ci.has(d)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},Ci.set(d,_),U||Gz(O,d,_,se.state))),p&&k===null)throw Error(r(528,""));return se}if(p&&k!==null)throw Error(r(529,""));return null;case"script":return p=_.async,_=_.src,typeof _=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=im(_),_=$e(O).hoistableScripts,k=_.get(p),k||(k={type:"script",instance:null,count:0,state:null},_.set(p,k)),k):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function nm(d){return'href="'+bi(d)+'"'}function bh(d){return'link[rel="stylesheet"]['+d+"]"}function D6(d){return u({},d,{"data-precedence":d.precedence,precedence:null})}function Gz(d,p,_,k){d.querySelector('link[rel="preload"][as="style"]['+p+"]")?k.loading=1:(p=d.createElement("link"),k.preload=p,p.addEventListener("load",function(){return k.loading|=1}),p.addEventListener("error",function(){return k.loading|=2}),Ur(p,"link",_),Rt(p),d.head.appendChild(p))}function im(d){return'[src="'+bi(d)+'"]'}function vh(d){return"script[async]"+d}function R6(d,p,_){if(p.count++,p.instance===null)switch(p.type){case"style":var k=d.querySelector('style[data-href~="'+bi(_.href)+'"]');if(k)return p.instance=k,Rt(k),k;var O=u({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return k=(d.ownerDocument||d).createElement("style"),Rt(k),Ur(k,"style",O),E0(k,_.precedence,d),p.instance=k;case"stylesheet":O=nm(_.href);var U=d.querySelector(bh(O));if(U)return p.state.loading|=4,p.instance=U,Rt(U),U;k=D6(_),(O=Ci.get(O))&&h2(k,O),U=(d.ownerDocument||d).createElement("link"),Rt(U);var se=U;return se._p=new Promise(function(ue,we){se.onload=ue,se.onerror=we}),Ur(U,"link",k),p.state.loading|=4,E0(U,_.precedence,d),p.instance=U;case"script":return U=im(_.src),(O=d.querySelector(vh(U)))?(p.instance=O,Rt(O),O):(k=_,(O=Ci.get(U))&&(k=u({},_),f2(k,O)),d=d.ownerDocument||d,O=d.createElement("script"),Rt(O),Ur(O,"link",k),d.head.appendChild(O),p.instance=O);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(k=p.instance,p.state.loading|=4,E0(k,_.precedence,d));return p.instance}function E0(d,p,_){for(var k=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),O=k.length?k[k.length-1]:null,U=O,se=0;se<k.length;se++){var ue=k[se];if(ue.dataset.precedence===p)U=ue;else if(U!==O)break}U?U.parentNode.insertBefore(d,U.nextSibling):(p=_.nodeType===9?_.head:_,p.insertBefore(d,p.firstChild))}function h2(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.title==null&&(d.title=p.title)}function f2(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.integrity==null&&(d.integrity=p.integrity)}var T0=null;function A6(d,p,_){if(T0===null){var k=new Map,O=T0=new Map;O.set(_,k)}else O=T0,k=O.get(_),k||(k=new Map,O.set(_,k));if(k.has(d))return k;for(k.set(d,null),_=_.getElementsByTagName(d),O=0;O<_.length;O++){var U=_[O];if(!(U[Ae]||U[ds]||d==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var se=U.getAttribute(p)||"";se=d+se;var ue=k.get(se);ue?ue.push(U):k.set(se,[U])}}return k}function I6(d,p,_){d=d.ownerDocument||d,d.head.insertBefore(_,p==="title"?d.querySelector("head > title"):null)}function Kz(d,p,_){if(_===1||p.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;return p.rel==="stylesheet"?(d=p.disabled,typeof p.precedence=="string"&&d==null):!0;case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function O6(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var jh=null;function Qz(){}function Zz(d,p,_){if(jh===null)throw Error(r(475));var k=jh;if(p.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var O=nm(_.href),U=d.querySelector(bh(O));if(U){d=U._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(k.count++,k=M0.bind(k),d.then(k,k)),p.state.loading|=4,p.instance=U,Rt(U);return}U=d.ownerDocument||d,_=D6(_),(O=Ci.get(O))&&h2(_,O),U=U.createElement("link"),Rt(U);var se=U;se._p=new Promise(function(ue,we){se.onload=ue,se.onerror=we}),Ur(U,"link",_),p.instance=U}k.stylesheets===null&&(k.stylesheets=new Map),k.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(k.count++,p=M0.bind(k),d.addEventListener("load",p),d.addEventListener("error",p))}}function Xz(){if(jh===null)throw Error(r(475));var d=jh;return d.stylesheets&&d.count===0&&x2(d,d.stylesheets),0<d.count?function(p){var _=setTimeout(function(){if(d.stylesheets&&x2(d,d.stylesheets),d.unsuspend){var k=d.unsuspend;d.unsuspend=null,k()}},6e4);return d.unsuspend=p,function(){d.unsuspend=null,clearTimeout(_)}}:null}function M0(){if(this.count--,this.count===0){if(this.stylesheets)x2(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var D0=null;function x2(d,p){d.stylesheets=null,d.unsuspend!==null&&(d.count++,D0=new Map,p.forEach(Jz,d),D0=null,M0.call(d))}function Jz(d,p){if(!(p.state.loading&4)){var _=D0.get(d);if(_)var k=_.get(null);else{_=new Map,D0.set(d,_);for(var O=d.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<O.length;U++){var se=O[U];(se.nodeName==="LINK"||se.getAttribute("media")!=="not all")&&(_.set(se.dataset.precedence,se),k=se)}k&&_.set(null,k)}O=p.instance,se=O.getAttribute("data-precedence"),U=_.get(se)||k,U===k&&_.set(null,O),_.set(se,O),this.count++,k=M0.bind(this),O.addEventListener("load",k),O.addEventListener("error",k),U?U.parentNode.insertBefore(O,U.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(O,d.firstChild)),p.state.loading|=4}}var Nh={$$typeof:C,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function eq(d,p,_,k,O,U,se,ue){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ys(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ys(0),this.hiddenUpdates=Ys(null),this.identifierPrefix=k,this.onUncaughtError=O,this.onCaughtError=U,this.onRecoverableError=se,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function F6(d,p,_,k,O,U,se,ue,we,Ve,pt,wt){return d=new eq(d,p,_,se,ue,we,Ve,wt),p=1,U===!0&&(p|=24),U=Wn(3,null,null,p),d.current=U,U.stateNode=d,p=Z1(),p.refCount++,d.pooledCache=p,p.refCount++,U.memoizedState={element:k,isDehydrated:_,cache:p},tj(U),d}function L6(d){return d?(d=Fu,d):Fu}function $6(d,p,_,k,O,U){O=L6(O),k.context===null?k.context=O:k.pendingContext=O,k=ac(p),k.payload={element:_},U=U===void 0?null:U,U!==null&&(k.callback=U),_=rc(d,k,p),_!==null&&(Zn(_,d,p),Xp(_,d,p))}function z6(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var _=d.retryLane;d.retryLane=_!==0&&_<p?_:p}}function g2(d,p){z6(d,p),(d=d.alternate)&&z6(d,p)}function q6(d){if(d.tag===13){var p=Ou(d,67108864);p!==null&&Zn(p,d,67108864),g2(d,67108864)}}var R0=!0;function tq(d,p,_,k){var O=q.T;q.T=null;var U=V.p;try{V.p=2,y2(d,p,_,k)}finally{V.p=U,q.T=O}}function sq(d,p,_,k){var O=q.T;q.T=null;var U=V.p;try{V.p=8,y2(d,p,_,k)}finally{V.p=U,q.T=O}}function y2(d,p,_,k){if(R0){var O=b2(k);if(O===null)n2(d,p,k,A0,_),U6(d,k);else if(rq(O,d,p,_,k))k.stopPropagation();else if(U6(d,k),p&4&&-1<aq.indexOf(d)){for(;O!==null;){var U=Gt(O);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var se=rt(U.pendingLanes);if(se!==0){var ue=U;for(ue.pendingLanes|=2,ue.entangledLanes|=2;se;){var we=1<<31-be(se);ue.entanglements[1]|=we,se&=~we}Po(U),(va&6)===0&&(g0=He()+500,fh(0))}}break;case 13:ue=Ou(U,2),ue!==null&&Zn(ue,U,2),b0(),g2(U,2)}if(U=b2(k),U===null&&n2(d,p,k,A0,_),U===O)break;O=U}O!==null&&k.stopPropagation()}else n2(d,p,k,null,_)}}function b2(d){return d=_1(d),v2(d)}var A0=null;function v2(d){if(A0=null,d=_t(d),d!==null){var p=i(d);if(p===null)d=null;else{var _=p.tag;if(_===13){if(d=o(p),d!==null)return d;d=null}else if(_===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null)}}return A0=d,null}function B6(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ze()){case st:return 2;case ke:return 8;case We:case ye:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var j2=!1,gc=null,yc=null,bc=null,wh=new Map,_h=new Map,vc=[],aq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U6(d,p){switch(d){case"focusin":case"focusout":gc=null;break;case"dragenter":case"dragleave":yc=null;break;case"mouseover":case"mouseout":bc=null;break;case"pointerover":case"pointerout":wh.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":_h.delete(p.pointerId)}}function Sh(d,p,_,k,O,U){return d===null||d.nativeEvent!==U?(d={blockedOn:p,domEventName:_,eventSystemFlags:k,nativeEvent:U,targetContainers:[O]},p!==null&&(p=Gt(p),p!==null&&q6(p)),d):(d.eventSystemFlags|=k,p=d.targetContainers,O!==null&&p.indexOf(O)===-1&&p.push(O),d)}function rq(d,p,_,k,O){switch(p){case"focusin":return gc=Sh(gc,d,p,_,k,O),!0;case"dragenter":return yc=Sh(yc,d,p,_,k,O),!0;case"mouseover":return bc=Sh(bc,d,p,_,k,O),!0;case"pointerover":var U=O.pointerId;return wh.set(U,Sh(wh.get(U)||null,d,p,_,k,O)),!0;case"gotpointercapture":return U=O.pointerId,_h.set(U,Sh(_h.get(U)||null,d,p,_,k,O)),!0}return!1}function V6(d){var p=_t(d.target);if(p!==null){var _=i(p);if(_!==null){if(p=_.tag,p===13){if(p=o(_),p!==null){d.blockedOn=p,zt(d.priority,function(){if(_.tag===13){var k=Qn();k=ia(k);var O=Ou(_,k);O!==null&&Zn(O,_,k),g2(_,k)}});return}}else if(p===3&&_.stateNode.current.memoizedState.isDehydrated){d.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}d.blockedOn=null}function I0(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var _=b2(d.nativeEvent);if(_===null){_=d.nativeEvent;var k=new _.constructor(_.type,_);w1=k,_.target.dispatchEvent(k),w1=null}else return p=Gt(_),p!==null&&q6(p),d.blockedOn=_,!1;p.shift()}return!0}function H6(d,p,_){I0(d)&&_.delete(p)}function nq(){j2=!1,gc!==null&&I0(gc)&&(gc=null),yc!==null&&I0(yc)&&(yc=null),bc!==null&&I0(bc)&&(bc=null),wh.forEach(H6),_h.forEach(H6)}function O0(d,p){d.blockedOn===p&&(d.blockedOn=null,j2||(j2=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nq)))}var F0=null;function W6(d){F0!==d&&(F0=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){F0===d&&(F0=null);for(var p=0;p<d.length;p+=3){var _=d[p],k=d[p+1],O=d[p+2];if(typeof k!="function"){if(v2(k||_)===null)continue;break}var U=Gt(_);U!==null&&(d.splice(p,3),p-=3,vj(U,{pending:!0,data:O,method:_.method,action:k},k,O))}}))}function Ch(d){function p(we){return O0(we,d)}gc!==null&&O0(gc,d),yc!==null&&O0(yc,d),bc!==null&&O0(bc,d),wh.forEach(p),_h.forEach(p);for(var _=0;_<vc.length;_++){var k=vc[_];k.blockedOn===d&&(k.blockedOn=null)}for(;0<vc.length&&(_=vc[0],_.blockedOn===null);)V6(_),_.blockedOn===null&&vc.shift();if(_=(d.ownerDocument||d).$$reactFormReplay,_!=null)for(k=0;k<_.length;k+=3){var O=_[k],U=_[k+1],se=O[ve]||null;if(typeof U=="function")se||W6(_);else if(se){var ue=null;if(U&&U.hasAttribute("formAction")){if(O=U,se=U[ve]||null)ue=se.formAction;else if(v2(O)!==null)continue}else ue=se.action;typeof ue=="function"?_[k+1]=ue:(_.splice(k,3),k-=3),W6(_)}}}function N2(d){this._internalRoot=d}L0.prototype.render=N2.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(r(409));var _=p.current,k=Qn();$6(_,k,d,p,null,null)},L0.prototype.unmount=N2.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;$6(d.current,2,null,d,null,null),b0(),p[Ce]=null}};function L0(d){this._internalRoot=d}L0.prototype.unstable_scheduleHydration=function(d){if(d){var p=$s();d={blockedOn:null,target:d,priority:p};for(var _=0;_<vc.length&&p!==0&&p<vc[_].priority;_++);vc.splice(_,0,d),_===0&&V6(d)}};var Y6=s.version;if(Y6!=="19.1.1")throw Error(r(527,Y6,"19.1.1"));V.findDOMNode=function(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=c(p),d=d!==null?m(d):null,d=d===null?null:d.stateNode,d};var iq={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$0.isDisabled&&$0.supportsFiber)try{ct=$0.inject(iq),ht=$0}catch{}}return kh.createRoot=function(d,p){if(!n(d))throw Error(r(299));var _=!1,k="",O=c5,U=d5,se=u5,ue=null;return p!=null&&(p.unstable_strictMode===!0&&(_=!0),p.identifierPrefix!==void 0&&(k=p.identifierPrefix),p.onUncaughtError!==void 0&&(O=p.onUncaughtError),p.onCaughtError!==void 0&&(U=p.onCaughtError),p.onRecoverableError!==void 0&&(se=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ue=p.unstable_transitionCallbacks)),p=F6(d,1,!1,null,null,_,k,O,U,se,ue,null),d[Ce]=p.current,r2(d),new N2(p)},kh.hydrateRoot=function(d,p,_){if(!n(d))throw Error(r(299));var k=!1,O="",U=c5,se=d5,ue=u5,we=null,Ve=null;return _!=null&&(_.unstable_strictMode===!0&&(k=!0),_.identifierPrefix!==void 0&&(O=_.identifierPrefix),_.onUncaughtError!==void 0&&(U=_.onUncaughtError),_.onCaughtError!==void 0&&(se=_.onCaughtError),_.onRecoverableError!==void 0&&(ue=_.onRecoverableError),_.unstable_transitionCallbacks!==void 0&&(we=_.unstable_transitionCallbacks),_.formState!==void 0&&(Ve=_.formState)),p=F6(d,1,!0,p,_??null,k,O,U,se,ue,we,Ve),p.context=L6(null),_=p.current,k=Qn(),k=ia(k),O=ac(k),O.callback=null,rc(_,O,k),_=k,p.current.lanes=_,Is(p,_),Po(p),d[Ce]=p.current,r2(d),new L0(p)},kh.version="19.1.1",kh}var aP;function gq(){if(aP)return S2.exports;aP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),S2.exports=xq(),S2.exports}var yq=gq();var KD=t=>{throw TypeError(t)},bq=(t,s,a)=>s.has(t)||KD("Cannot "+a),E2=(t,s,a)=>(bq(t,s,"read from private field"),a?a.call(t):s.get(t)),vq=(t,s,a)=>s.has(t)?KD("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,a),rP="popstate";function jq(t={}){function s(r,n){let{pathname:i,search:o,hash:l}=r.location;return nx("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(r,n){return typeof n=="string"?n:el(n)}return wq(s,a,null,t)}function Hs(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function fr(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Nq(){return Math.random().toString(36).substring(2,10)}function nP(t,s){return{usr:t.state,key:t.key,idx:s}}function nx(t,s,a=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof s=="string"?Xc(s):s,state:a,key:s&&s.key||r||Nq()}}function el({pathname:t="/",search:s="",hash:a=""}){return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Xc(t){let s={};if(t){let a=t.indexOf("#");a>=0&&(s.hash=t.substring(a),t=t.substring(0,a));let r=t.indexOf("?");r>=0&&(s.search=t.substring(r),t=t.substring(0,r)),t&&(s.pathname=t)}return s}function wq(t,s,a,r={}){let{window:n=document.defaultView,v5Compat:i=!1}=r,o=n.history,l="POP",c=null,m=u();m==null&&(m=0,o.replaceState({...o.state,idx:m},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let j=u(),v=j==null?null:j-m;m=j,c&&c({action:l,location:S.location,delta:v})}function f(j,v){l="PUSH";let N=nx(S.location,j,v);m=u()+1;let C=nP(N,m),P=S.createHref(N);try{o.pushState(C,"",P)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;n.location.assign(P)}i&&c&&c({action:l,location:S.location,delta:1})}function b(j,v){l="REPLACE";let N=nx(S.location,j,v);m=u();let C=nP(N,m),P=S.createHref(N);o.replaceState(C,"",P),i&&c&&c({action:l,location:S.location,delta:0})}function w(j){return QD(j)}let S={get action(){return l},get location(){return t(n,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(rP,h),c=j,()=>{n.removeEventListener(rP,h),c=null}},createHref(j){return s(n,j)},createURL:w,encodeLocation(j){let v=w(j);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:b,go(j){return o.go(j)}};return S}function QD(t,s=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Hs(a,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:el(t);return r=r.replace(/ $/,"%20"),!s&&r.startsWith("//")&&(r=a+r),new URL(r,a)}var tf,iP=class{constructor(t){if(vq(this,tf,new Map),t)for(let[s,a]of t)this.set(s,a)}get(t){if(E2(this,tf).has(t))return E2(this,tf).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,s){E2(this,tf).set(t,s)}};tf=new WeakMap;var _q=new Set(["lazy","caseSensitive","path","id","index","children"]);function Sq(t){return _q.has(t)}var Cq=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function Pq(t){return Cq.has(t)}function kq(t){return t.index===!0}function ix(t,s,a=[],r={},n=!1){return t.map((i,o)=>{let l=[...a,String(o)],c=typeof i.id=="string"?i.id:l.join("-");if(Hs(i.index!==!0||!i.children,"Cannot specify children on an index route"),Hs(n||!r[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),kq(i)){let m={...i,id:c};return r[c]=oP(m,s(m)),m}else{let m={...i,id:c,children:void 0};return r[c]=oP(m,s(m)),i.children&&(m.children=ix(i.children,s,l,r,n)),m}})}function oP(t,s){return Object.assign(t,{...s,...typeof s.lazy=="object"&&s.lazy!=null?{lazy:{...t.lazy,...s.lazy}}:{}})}function Cc(t,s,a="/"){return sf(t,s,a,!1)}function sf(t,s,a,r){let n=typeof s=="string"?Xc(s):s,i=Gi(n.pathname||"/",a);if(i==null)return null;let o=ZD(t);Tq(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let m=qq(i);l=$q(o[c],m,r)}return l}function Eq(t,s){let{route:a,pathname:r,params:n}=t;return{id:a.id,pathname:r,params:n,data:s[a.id],loaderData:s[a.id],handle:a.handle}}function ZD(t,s=[],a=[],r="",n=!1){let i=(o,l,c=n,m)=>{let u={relativePath:m===void 0?o.path||"":m,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&c)return;Hs(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let h=Go([r,u.relativePath]),f=a.concat(u);o.children&&o.children.length>0&&(Hs(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),ZD(o.children,s,f,h,c)),!(o.path==null&&!o.index)&&s.push({path:h,score:Fq(h,o.index),routesMeta:f})};return t.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of XD(o.path))i(o,l,!0,c)}),s}function XD(t){let s=t.split("/");if(s.length===0)return[];let[a,...r]=s,n=a.endsWith("?"),i=a.replace(/\?$/,"");if(r.length===0)return n?[i,""]:[i];let o=XD(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Tq(t){t.sort((s,a)=>s.score!==a.score?a.score-s.score:Lq(s.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var Mq=/^:[\w-]+$/,Dq=3,Rq=2,Aq=1,Iq=10,Oq=-2,lP=t=>t==="*";function Fq(t,s){let a=t.split("/"),r=a.length;return a.some(lP)&&(r+=Oq),s&&(r+=Rq),a.filter(n=>!lP(n)).reduce((n,i)=>n+(Mq.test(i)?Dq:i===""?Aq:Iq),r)}function Lq(t,s){return t.length===s.length&&t.slice(0,-1).every((r,n)=>r===s[n])?t[t.length-1]-s[s.length-1]:0}function $q(t,s,a=!1){let{routesMeta:r}=t,n={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],m=l===r.length-1,u=i==="/"?s:s.slice(i.length)||"/",h=ob({path:c.relativePath,caseSensitive:c.caseSensitive,end:m},u),f=c.route;if(!h&&m&&a&&!r[r.length-1].route.index&&(h=ob({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),o.push({params:n,pathname:Go([i,h.pathname]),pathnameBase:Vq(Go([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Go([i,h.pathnameBase]))}return o}function ob(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=zq(t.path,t.caseSensitive,t.end),n=s.match(a);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:r.reduce((m,{paramName:u,isOptional:h},f)=>{if(u==="*"){let w=l[f]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const b=l[f];return h&&!b?m[u]=void 0:m[u]=(b||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:o,pattern:t}}function zq(t,s=!1,a=!0){fr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),r]}function qq(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return fr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),t}}function Gi(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}function Bq({basename:t,pathname:s}){return s==="/"?t:Go([t,s])}var JD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,I_=t=>JD.test(t);function Uq(t,s="/"){let{pathname:a,search:r="",hash:n=""}=typeof t=="string"?Xc(t):t,i;return a?(a=a.replace(/\/\/+/g,"/"),a.startsWith("/")?i=cP(a.substring(1),"/"):i=cP(a,s)):i=s,{pathname:i,search:Hq(r),hash:Wq(n)}}function cP(t,s){let a=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function T2(t,s,a,r){return`Cannot include a '${t}' character in a manually specified \`to.${s}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function e7(t){return t.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function Yb(t){let s=e7(t);return s.map((a,r)=>r===s.length-1?a.pathname:a.pathnameBase)}function Gb(t,s,a,r=!1){let n;typeof t=="string"?n=Xc(t):(n={...t},Hs(!n.pathname||!n.pathname.includes("?"),T2("?","pathname","search",n)),Hs(!n.pathname||!n.pathname.includes("#"),T2("#","pathname","hash",n)),Hs(!n.search||!n.search.includes("#"),T2("#","search","hash",n)));let i=t===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=a;else{let h=s.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;n.pathname=f.join("/")}l=h>=0?s[h]:"/"}let c=Uq(n,l),m=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(m||u)&&(c.pathname+="/"),c}var Go=t=>t.join("/").replace(/\/\/+/g,"/"),Vq=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Hq=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Wq=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Gx=class{constructor(t,s,a,r=!1){this.status=t,this.statusText=s||"",this.internal=r,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function ox(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Kx(t){return t.map(s=>s.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var t7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function s7(t,s){let a=t;if(typeof a!="string"||!JD.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let r=a,n=!1;if(t7)try{let i=new URL(window.location.href),o=a.startsWith("//")?new URL(i.protocol+a):new URL(a),l=Gi(o.pathname,s);o.origin===i.origin&&l!=null?a=l+o.search+o.hash:n=!0}catch{fr(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:n,to:a}}var Mc=Symbol("Uninstrumented");function Yq(t,s){let a={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};t.forEach(n=>n({id:s.id,index:s.index,path:s.path,instrument(i){let o=Object.keys(a);for(let l of o)i[l]&&a[l].push(i[l])}}));let r={};if(typeof s.lazy=="function"&&a.lazy.length>0){let n=wm(a.lazy,s.lazy,()=>{});n&&(r.lazy=n)}if(typeof s.lazy=="object"){let n=s.lazy;["middleware","loader","action"].forEach(i=>{let o=n[i],l=a[`lazy.${i}`];if(typeof o=="function"&&l.length>0){let c=wm(l,o,()=>{});c&&(r.lazy=Object.assign(r.lazy||{},{[i]:c}))}})}return["loader","action"].forEach(n=>{let i=s[n];if(typeof i=="function"&&a[n].length>0){let o=i[Mc]??i,l=wm(a[n],o,(...c)=>dP(c[0]));l&&(n==="loader"&&o.hydrate===!0&&(l.hydrate=!0),l[Mc]=o,r[n]=l)}}),s.middleware&&s.middleware.length>0&&a.middleware.length>0&&(r.middleware=s.middleware.map(n=>{let i=n[Mc]??n,o=wm(a.middleware,i,(...l)=>dP(l[0]));return o?(o[Mc]=i,o):n})),r}function Gq(t,s){let a={navigate:[],fetch:[]};if(s.forEach(r=>r({instrument(n){let i=Object.keys(n);for(let o of i)n[o]&&a[o].push(n[o])}})),a.navigate.length>0){let r=t.navigate[Mc]??t.navigate,n=wm(a.navigate,r,(...i)=>{let[o,l]=i;return{to:typeof o=="number"||typeof o=="string"?o:o?el(o):".",...uP(t,l??{})}});n&&(n[Mc]=r,t.navigate=n)}if(a.fetch.length>0){let r=t.fetch[Mc]??t.fetch,n=wm(a.fetch,r,(...i)=>{let[o,,l,c]=i;return{href:l??".",fetcherKey:o,...uP(t,c??{})}});n&&(n[Mc]=r,t.fetch=n)}return t}function wm(t,s,a){return t.length===0?null:async(...r)=>{let n=await a7(t,a(...r),()=>s(...r),t.length-1);if(n.type==="error")throw n.value;return n.value}}async function a7(t,s,a,r){let n=t[r],i;if(n){let o,l=async()=>(o?console.error("You cannot call instrumented handlers more than once"):o=a7(t,s,a,r-1),i=await o,Hs(i,"Expected a result"),i.type==="error"&&i.value instanceof Error?{status:"error",error:i.value}:{status:"success",error:void 0});try{await n(l,s)}catch(c){console.error("An instrumentation function threw an error:",c)}o||await l(),await o}else try{i={type:"success",value:await a()}}catch(o){i={type:"error",value:o}}return i||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function dP(t){let{request:s,context:a,params:r,unstable_pattern:n}=t;return{request:Kq(s),params:{...r},unstable_pattern:n,context:Qq(a)}}function uP(t,s){return{currentUrl:el(t.state.location),..."formMethod"in s?{formMethod:s.formMethod}:{},..."formEncType"in s?{formEncType:s.formEncType}:{},..."formData"in s?{formData:s.formData}:{},..."body"in s?{body:s.body}:{}}}function Kq(t){return{method:t.method,url:t.url,headers:{get:(...s)=>t.headers.get(...s)}}}function Qq(t){if(Xq(t)){let s={...t};return Object.freeze(s),s}else return{get:s=>t.get(s)}}var Zq=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xq(t){if(t===null||typeof t!="object")return!1;const s=Object.getPrototypeOf(t);return s===Object.prototype||s===null||Object.getOwnPropertyNames(s).sort().join("\0")===Zq}var r7=["POST","PUT","PATCH","DELETE"],Jq=new Set(r7),eB=["GET",...r7],tB=new Set(eB),n7=new Set([301,302,303,307,308]),sB=new Set([307,308]),M2={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},aB={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Eh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},rB=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),i7="remix-router-transitions",o7=Symbol("ResetLoaderData");function nB(t){const s=t.window?t.window:typeof window<"u"?window:void 0,a=typeof s<"u"&&typeof s.document<"u"&&typeof s.document.createElement<"u";Hs(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],n=t.mapRouteProperties||rB,i=n;if(t.unstable_instrumentations){let ve=t.unstable_instrumentations;i=Ce=>({...n(Ce),...Yq(ve.map(qe=>qe.route).filter(Boolean),Ce)})}let o={},l=ix(t.routes,i,void 0,o),c,m=t.basename||"/";m.startsWith("/")||(m=`/${m}`);let u=t.dataStrategy||dB,h={...t.future},f=null,b=new Set,w=null,S=null,j=null,v=t.hydrationData!=null,N=Cc(l,t.history.location,m),C=!1,P=null,E;if(N==null&&!t.patchRoutesOnNavigation){let ve=Ai(404,{pathname:t.history.location.pathname}),{matches:Ce,route:qe}=z0(l);E=!0,N=Ce,P={[qe.id]:ve}}else if(N&&!t.hydrationData&&$t(N,l,t.history.location.pathname).active&&(N=null),N)if(N.some(ve=>ve.route.lazy))E=!1;else if(!N.some(ve=>O_(ve.route)))E=!0;else{let ve=t.hydrationData?t.hydrationData.loaderData:null,Ce=t.hydrationData?t.hydrationData.errors:null;if(Ce){let qe=N.findIndex(gt=>Ce[gt.route.id]!==void 0);E=N.slice(0,qe+1).every(gt=>!JN(gt.route,ve,Ce))}else E=N.every(qe=>!JN(qe.route,ve,Ce))}else{E=!1,N=[];let ve=$t(null,l,t.history.location.pathname);ve.active&&ve.matches&&(C=!0,N=ve.matches)}let M,T={historyAction:t.history.action,location:t.history.location,matches:N,initialized:E,navigation:M2,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||P,fetchers:new Map,blockers:new Map},A="POP",L=null,F=!1,z,I=!1,Q=new Map,Y=null,B=!1,q=!1,V=new Set,G=new Map,H=0,D=-1,R=new Map,$=new Set,W=new Map,J=new Map,te=new Set,ee=new Map,ae,ce=null;function he(){if(f=t.history.listen(({action:ve,location:Ce,delta:qe})=>{if(ae){ae(),ae=void 0;return}fr(ee.size===0||qe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let gt=Ys({currentLocation:T.location,nextLocation:Ce,historyAction:ve});if(gt&&qe!=null){let de=new Promise(Ee=>{ae=Ee});t.history.go(qe*-1),Ns(gt,{state:"blocked",location:Ce,proceed(){Ns(gt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),de.then(()=>t.history.go(qe))},reset(){let Ee=new Map(T.blockers);Ee.set(gt,Eh),ge({blockers:Ee})}}),L?.resolve(),L=null;return}return Se(ve,Ce)}),a){kB(s,Q);let ve=()=>EB(s,Q);s.addEventListener("pagehide",ve),Y=()=>s.removeEventListener("pagehide",ve)}return T.initialized||Se("POP",T.location,{initialHydration:!0}),M}function ne(){f&&f(),Y&&Y(),b.clear(),z&&z.abort(),T.fetchers.forEach((ve,Ce)=>jt(Ce)),T.blockers.forEach((ve,Ce)=>cs(Ce))}function xe(ve){return b.add(ve),()=>b.delete(ve)}function ge(ve,Ce={}){ve.matches&&(ve.matches=ve.matches.map(de=>{let Ee=o[de.route.id],Ae=de.route;return Ae.element!==Ee.element||Ae.errorElement!==Ee.errorElement||Ae.hydrateFallbackElement!==Ee.hydrateFallbackElement?{...de,route:Ee}:de})),T={...T,...ve};let qe=[],gt=[];T.fetchers.forEach((de,Ee)=>{de.state==="idle"&&(te.has(Ee)?qe.push(Ee):gt.push(Ee))}),te.forEach(de=>{!T.fetchers.has(de)&&!G.has(de)&&qe.push(de)}),[...b].forEach(de=>de(T,{deletedFetchers:qe,newErrors:ve.errors??null,viewTransitionOpts:Ce.viewTransitionOpts,flushSync:Ce.flushSync===!0})),qe.forEach(de=>jt(de)),gt.forEach(de=>T.fetchers.delete(de))}function le(ve,Ce,{flushSync:qe}={}){let gt=T.actionData!=null&&T.navigation.formMethod!=null&&an(T.navigation.formMethod)&&T.navigation.state==="loading"&&ve.state?._isRedirect!==!0,de;Ce.actionData?Object.keys(Ce.actionData).length>0?de=Ce.actionData:de=null:gt?de=T.actionData:de=null;let Ee=Ce.loaderData?jP(T.loaderData,Ce.loaderData,Ce.matches||[],Ce.errors):T.loaderData,Ae=T.blockers;Ae.size>0&&(Ae=new Map(Ae),Ae.forEach((ss,$e)=>Ae.set($e,Eh)));let ft=B?!1:ia(ve,Ce.matches||T.matches),_t=F===!0||T.navigation.formMethod!=null&&an(T.navigation.formMethod)&&ve.state?._isRedirect!==!0;c&&(l=c,c=void 0),B||A==="POP"||(A==="PUSH"?t.history.push(ve,ve.state):A==="REPLACE"&&t.history.replace(ve,ve.state));let Gt;if(A==="POP"){let ss=Q.get(T.location.pathname);ss&&ss.has(ve.pathname)?Gt={currentLocation:T.location,nextLocation:ve}:Q.has(ve.pathname)&&(Gt={currentLocation:ve,nextLocation:T.location})}else if(I){let ss=Q.get(T.location.pathname);ss?ss.add(ve.pathname):(ss=new Set([ve.pathname]),Q.set(T.location.pathname,ss)),Gt={currentLocation:T.location,nextLocation:ve}}ge({...Ce,actionData:de,loaderData:Ee,historyAction:A,location:ve,initialized:!0,navigation:M2,revalidation:"idle",restoreScrollPosition:ft,preventScrollReset:_t,blockers:Ae},{viewTransitionOpts:Gt,flushSync:qe===!0}),A="POP",F=!1,I=!1,B=!1,q=!1,L?.resolve(),L=null,ce?.resolve(),ce=null}async function pe(ve,Ce){if(L?.resolve(),L=null,typeof ve=="number"){L||(L=SP());let Pe=L.promise;return t.history.go(ve),Pe}let qe=XN(T.location,T.matches,m,ve,Ce?.fromRouteId,Ce?.relative),{path:gt,submission:de,error:Ee}=mP(!1,qe,Ce),Ae=T.location,ft=nx(T.location,gt,Ce&&Ce.state);ft={...ft,...t.history.encodeLocation(ft)};let _t=Ce&&Ce.replace!=null?Ce.replace:void 0,Gt="PUSH";_t===!0?Gt="REPLACE":_t===!1||de!=null&&an(de.formMethod)&&de.formAction===T.location.pathname+T.location.search&&(Gt="REPLACE");let ss=Ce&&"preventScrollReset"in Ce?Ce.preventScrollReset===!0:void 0,$e=(Ce&&Ce.flushSync)===!0,Rt=Ys({currentLocation:Ae,nextLocation:ft,historyAction:Gt});if(Rt){Ns(Rt,{state:"blocked",location:ft,proceed(){Ns(Rt,{state:"proceeding",proceed:void 0,reset:void 0,location:ft}),pe(ve,Ce)},reset(){let Pe=new Map(T.blockers);Pe.set(Rt,Eh),ge({blockers:Pe})}});return}await Se(Gt,ft,{submission:de,pendingError:Ee,preventScrollReset:ss,replace:Ce&&Ce.replace,enableViewTransition:Ce&&Ce.viewTransition,flushSync:$e,callSiteDefaultShouldRevalidate:Ce&&Ce.unstable_defaultShouldRevalidate})}function Re(){ce||(ce=SP()),ht(),ge({revalidation:"loading"});let ve=ce.promise;return T.navigation.state==="submitting"?ve:T.navigation.state==="idle"?(Se(T.historyAction,T.location,{startUninterruptedRevalidation:!0}),ve):(Se(A||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:I===!0}),ve)}async function Se(ve,Ce,qe){z&&z.abort(),z=null,A=ve,B=(qe&&qe.startUninterruptedRevalidation)===!0,ha(T.location,T.matches),F=(qe&&qe.preventScrollReset)===!0,I=(qe&&qe.enableViewTransition)===!0;let gt=c||l,de=qe&&qe.overrideNavigation,Ee=qe?.initialHydration&&T.matches&&T.matches.length>0&&!C?T.matches:Cc(gt,Ce,m),Ae=(qe&&qe.flushSync)===!0;if(Ee&&T.initialized&&!q&&yB(T.location,Ce)&&!(qe&&qe.submission&&an(qe.submission.formMethod))){le(Ce,{matches:Ee},{flushSync:Ae});return}let ft=$t(Ee,gt,Ce.pathname);if(ft.active&&ft.matches&&(Ee=ft.matches),!Ee){let{error:Mt,notFoundMatches:Qt,route:Ht}=Is(Ce.pathname);le(Ce,{matches:Qt,loaderData:{},errors:{[Ht.id]:Mt}},{flushSync:Ae});return}z=new AbortController;let _t=ym(t.history,Ce,z.signal,qe&&qe.submission),Gt=t.getContext?await t.getContext():new iP,ss;if(qe&&qe.pendingError)ss=[Pc(Ee).route.id,{type:"error",error:qe.pendingError}];else if(qe&&qe.submission&&an(qe.submission.formMethod)){let Mt=await He(_t,Ce,qe.submission,Ee,Gt,ft.active,qe&&qe.initialHydration===!0,{replace:qe.replace,flushSync:Ae});if(Mt.shortCircuited)return;if(Mt.pendingActionResult){let[Qt,Ht]=Mt.pendingActionResult;if(ei(Ht)&&ox(Ht.error)&&Ht.error.status===404){z=null,le(Ce,{matches:Mt.matches,loaderData:{},errors:{[Qt]:Ht.error}});return}}Ee=Mt.matches||Ee,ss=Mt.pendingActionResult,de=D2(Ce,qe.submission),Ae=!1,ft.active=!1,_t=ym(t.history,_t.url,_t.signal)}let{shortCircuited:$e,matches:Rt,loaderData:Pe,errors:Be}=await ze(_t,Ce,Ee,Gt,ft.active,de,qe&&qe.submission,qe&&qe.fetcherSubmission,qe&&qe.replace,qe&&qe.initialHydration===!0,Ae,ss,qe&&qe.callSiteDefaultShouldRevalidate);$e||(z=null,le(Ce,{matches:Rt||Ee,...NP(ss),loaderData:Pe,errors:Be}))}async function He(ve,Ce,qe,gt,de,Ee,Ae,ft={}){ht();let _t=CB(Ce,qe);if(ge({navigation:_t},{flushSync:ft.flushSync===!0}),Ee){let $e=await $s(gt,Ce.pathname,ve.signal);if($e.type==="aborted")return{shortCircuited:!0};if($e.type==="error"){if($e.partialMatches.length===0){let{matches:Pe,route:Be}=z0(l);return{matches:Pe,pendingActionResult:[Be.id,{type:"error",error:$e.error}]}}let Rt=Pc($e.partialMatches).route.id;return{matches:$e.partialMatches,pendingActionResult:[Rt,{type:"error",error:$e.error}]}}else if($e.matches)gt=$e.matches;else{let{notFoundMatches:Rt,error:Pe,route:Be}=Is(Ce.pathname);return{matches:Rt,pendingActionResult:[Be.id,{type:"error",error:Pe}]}}}let Gt,ss=My(gt,Ce);if(!ss.route.action&&!ss.route.lazy)Gt={type:"error",error:Ai(405,{method:ve.method,pathname:Ce.pathname,routeId:ss.route.id})};else{let $e=qm(i,o,ve,gt,ss,Ae?[]:r,de),Rt=await bt(ve,$e,de,null);if(Gt=Rt[ss.route.id],!Gt){for(let Pe of gt)if(Rt[Pe.route.id]){Gt=Rt[Pe.route.id];break}}if(ve.signal.aborted)return{shortCircuited:!0}}if(Bd(Gt)){let $e;return ft&&ft.replace!=null?$e=ft.replace:$e=yP(Gt.response.headers.get("Location"),new URL(ve.url),m,t.history)===T.location.pathname+T.location.search,await at(ve,Gt,!0,{submission:qe,replace:$e}),{shortCircuited:!0}}if(ei(Gt)){let $e=Pc(gt,ss.route.id);return(ft&&ft.replace)!==!0&&(A="PUSH"),{matches:gt,pendingActionResult:[$e.route.id,Gt,ss.route.id]}}return{matches:gt,pendingActionResult:[ss.route.id,Gt]}}async function ze(ve,Ce,qe,gt,de,Ee,Ae,ft,_t,Gt,ss,$e,Rt){let Pe=Ee||D2(Ce,Ae),Be=Ae||ft||_P(Pe),Mt=!B&&!Gt;if(de){if(Mt){let yr=st($e);ge({navigation:Pe,...yr!==void 0?{actionData:yr}:{}},{flushSync:ss})}let Ps=await $s(qe,Ce.pathname,ve.signal);if(Ps.type==="aborted")return{shortCircuited:!0};if(Ps.type==="error"){if(Ps.partialMatches.length===0){let{matches:ao,route:Xa}=z0(l);return{matches:ao,loaderData:{},errors:{[Xa.id]:Ps.error}}}let yr=Pc(Ps.partialMatches).route.id;return{matches:Ps.partialMatches,loaderData:{},errors:{[yr]:Ps.error}}}else if(Ps.matches)qe=Ps.matches;else{let{error:yr,notFoundMatches:ao,route:Xa}=Is(Ce.pathname);return{matches:ao,loaderData:{},errors:{[Xa.id]:yr}}}}let Qt=c||l,{dsMatches:Ht,revalidatingFetchers:Us}=pP(ve,gt,i,o,t.history,T,qe,Be,Ce,Gt?[]:r,Gt===!0,q,V,te,W,$,Qt,m,t.patchRoutesOnNavigation!=null,$e,Rt);if(D=++H,!t.dataStrategy&&!Ht.some(Ps=>Ps.shouldLoad)&&!Ht.some(Ps=>Ps.route.middleware&&Ps.route.middleware.length>0)&&Us.length===0){let Ps=Lt();return le(Ce,{matches:qe,loaderData:{},errors:$e&&ei($e[1])?{[$e[0]]:$e[1].error}:null,...NP($e),...Ps?{fetchers:new Map(T.fetchers)}:{}},{flushSync:ss}),{shortCircuited:!0}}if(Mt){let Ps={};if(!de){Ps.navigation=Pe;let yr=st($e);yr!==void 0&&(Ps.actionData=yr)}Us.length>0&&(Ps.fetchers=ke(Us)),ge(Ps,{flushSync:ss})}Us.forEach(Ps=>{Kt(Ps.key),Ps.controller&&G.set(Ps.key,Ps.controller)});let Qs=()=>Us.forEach(Ps=>Kt(Ps.key));z&&z.signal.addEventListener("abort",Qs);let{loaderResults:lr,fetcherResults:Rs}=await ct(Ht,Us,ve,gt);if(ve.signal.aborted)return{shortCircuited:!0};z&&z.signal.removeEventListener("abort",Qs),Us.forEach(Ps=>G.delete(Ps.key));let Oa=q0(lr);if(Oa)return await at(ve,Oa.result,!0,{replace:_t}),{shortCircuited:!0};if(Oa=q0(Rs),Oa)return $.add(Oa.key),await at(ve,Oa.result,!0,{replace:_t}),{shortCircuited:!0};let{loaderData:Ua,errors:Xr}=vP(T,qe,lr,$e,Us,Rs);Gt&&T.errors&&(Xr={...T.errors,...Xr});let Cs=Lt(),Za=Nt(D),Sr=Cs||Za||Us.length>0;return{matches:qe,loaderData:Ua,errors:Xr,...Sr?{fetchers:new Map(T.fetchers)}:{}}}function st(ve){if(ve&&!ei(ve[1]))return{[ve[0]]:ve[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function ke(ve){return ve.forEach(Ce=>{let qe=T.fetchers.get(Ce.key),gt=Th(void 0,qe?qe.data:void 0);T.fetchers.set(Ce.key,gt)}),new Map(T.fetchers)}async function We(ve,Ce,qe,gt){Kt(ve);let de=(gt&&gt.flushSync)===!0,Ee=c||l,Ae=XN(T.location,T.matches,m,qe,Ce,gt?.relative),ft=Cc(Ee,Ae,m),_t=$t(ft,Ee,Ae);if(_t.active&&_t.matches&&(ft=_t.matches),!ft){be(ve,Ce,Ai(404,{pathname:Ae}),{flushSync:de});return}let{path:Gt,submission:ss,error:$e}=mP(!0,Ae,gt);if($e){be(ve,Ce,$e,{flushSync:de});return}let Rt=t.getContext?await t.getContext():new iP,Pe=(gt&&gt.preventScrollReset)===!0;if(ss&&an(ss.formMethod)){await ye(ve,Ce,Gt,ft,Rt,_t.active,de,Pe,ss,gt&&gt.unstable_defaultShouldRevalidate);return}W.set(ve,{routeId:Ce,path:Gt}),await Ye(ve,Ce,Gt,ft,Rt,_t.active,de,Pe,ss)}async function ye(ve,Ce,qe,gt,de,Ee,Ae,ft,_t,Gt){ht(),W.delete(ve);let ss=T.fetchers.get(ve);Et(ve,PB(_t,ss),{flushSync:Ae});let $e=new AbortController,Rt=ym(t.history,qe,$e.signal,_t);if(Ee){let Ra=await $s(gt,new URL(Rt.url).pathname,Rt.signal,ve);if(Ra.type==="aborted")return;if(Ra.type==="error"){be(ve,Ce,Ra.error,{flushSync:Ae});return}else if(Ra.matches)gt=Ra.matches;else{be(ve,Ce,Ai(404,{pathname:qe}),{flushSync:Ae});return}}let Pe=My(gt,qe);if(!Pe.route.action&&!Pe.route.lazy){let Ra=Ai(405,{method:_t.formMethod,pathname:qe,routeId:Ce});be(ve,Ce,Ra,{flushSync:Ae});return}G.set(ve,$e);let Be=H,Mt=qm(i,o,Rt,gt,Pe,r,de),Qt=await bt(Rt,Mt,de,ve),Ht=Qt[Pe.route.id];if(!Ht){for(let Ra of Mt)if(Qt[Ra.route.id]){Ht=Qt[Ra.route.id];break}}if(Rt.signal.aborted){G.get(ve)===$e&&G.delete(ve);return}if(te.has(ve)){if(Bd(Ht)||ei(Ht)){Et(ve,Sl(void 0));return}}else{if(Bd(Ht))if(G.delete(ve),D>Be){Et(ve,Sl(void 0));return}else return $.add(ve),Et(ve,Th(_t)),at(Rt,Ht,!1,{fetcherSubmission:_t,preventScrollReset:ft});if(ei(Ht)){be(ve,Ce,Ht.error);return}}let Us=T.navigation.location||T.location,Qs=ym(t.history,Us,$e.signal),lr=c||l,Rs=T.navigation.state!=="idle"?Cc(lr,T.navigation.location,m):T.matches;Hs(Rs,"Didn't find any matches after fetcher action");let Oa=++H;R.set(ve,Oa);let Ua=Th(_t,Ht.data);T.fetchers.set(ve,Ua);let{dsMatches:Xr,revalidatingFetchers:Cs}=pP(Qs,de,i,o,t.history,T,Rs,_t,Us,r,!1,q,V,te,W,$,lr,m,t.patchRoutesOnNavigation!=null,[Pe.route.id,Ht],Gt);Cs.filter(Ra=>Ra.key!==ve).forEach(Ra=>{let Pu=Ra.key,id=T.fetchers.get(Pu),Dg=Th(void 0,id?id.data:void 0);T.fetchers.set(Pu,Dg),Kt(Pu),Ra.controller&&G.set(Pu,Ra.controller)}),ge({fetchers:new Map(T.fetchers)});let Za=()=>Cs.forEach(Ra=>Kt(Ra.key));$e.signal.addEventListener("abort",Za);let{loaderResults:Sr,fetcherResults:Ps}=await ct(Xr,Cs,Qs,de);if($e.signal.aborted)return;if($e.signal.removeEventListener("abort",Za),R.delete(ve),G.delete(ve),Cs.forEach(Ra=>G.delete(Ra.key)),T.fetchers.has(ve)){let Ra=Sl(Ht.data);T.fetchers.set(ve,Ra)}let yr=q0(Sr);if(yr)return at(Qs,yr.result,!1,{preventScrollReset:ft});if(yr=q0(Ps),yr)return $.add(yr.key),at(Qs,yr.result,!1,{preventScrollReset:ft});let{loaderData:ao,errors:Xa}=vP(T,Rs,Sr,void 0,Cs,Ps);Nt(Oa),T.navigation.state==="loading"&&Oa>D?(Hs(A,"Expected pending action"),z&&z.abort(),le(T.navigation.location,{matches:Rs,loaderData:ao,errors:Xa,fetchers:new Map(T.fetchers)})):(ge({errors:Xa,loaderData:jP(T.loaderData,ao,Rs,Xa),fetchers:new Map(T.fetchers)}),q=!1)}async function Ye(ve,Ce,qe,gt,de,Ee,Ae,ft,_t){let Gt=T.fetchers.get(ve);Et(ve,Th(_t,Gt?Gt.data:void 0),{flushSync:Ae});let ss=new AbortController,$e=ym(t.history,qe,ss.signal);if(Ee){let Ht=await $s(gt,new URL($e.url).pathname,$e.signal,ve);if(Ht.type==="aborted")return;if(Ht.type==="error"){be(ve,Ce,Ht.error,{flushSync:Ae});return}else if(Ht.matches)gt=Ht.matches;else{be(ve,Ce,Ai(404,{pathname:qe}),{flushSync:Ae});return}}let Rt=My(gt,qe);G.set(ve,ss);let Pe=H,Be=qm(i,o,$e,gt,Rt,r,de),Qt=(await bt($e,Be,de,ve))[Rt.route.id];if(G.get(ve)===ss&&G.delete(ve),!$e.signal.aborted){if(te.has(ve)){Et(ve,Sl(void 0));return}if(Bd(Qt))if(D>Pe){Et(ve,Sl(void 0));return}else{$.add(ve),await at($e,Qt,!1,{preventScrollReset:ft});return}if(ei(Qt)){be(ve,Ce,Qt.error);return}Et(ve,Sl(Qt.data))}}async function at(ve,Ce,qe,{submission:gt,fetcherSubmission:de,preventScrollReset:Ee,replace:Ae}={}){qe||(L?.resolve(),L=null),Ce.response.headers.has("X-Remix-Revalidate")&&(q=!0);let ft=Ce.response.headers.get("Location");Hs(ft,"Expected a Location header on the redirect Response"),ft=yP(ft,new URL(ve.url),m,t.history);let _t=nx(T.location,ft,{_isRedirect:!0});if(a){let Be=!1;if(Ce.response.headers.has("X-Remix-Reload-Document"))Be=!0;else if(I_(ft)){const Mt=QD(ft,!0);Be=Mt.origin!==s.location.origin||Gi(Mt.pathname,m)==null}if(Be){Ae?s.location.replace(ft):s.location.assign(ft);return}}z=null;let Gt=Ae===!0||Ce.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ss,formAction:$e,formEncType:Rt}=T.navigation;!gt&&!de&&ss&&$e&&Rt&&(gt=_P(T.navigation));let Pe=gt||de;if(sB.has(Ce.response.status)&&Pe&&an(Pe.formMethod))await Se(Gt,_t,{submission:{...Pe,formAction:ft},preventScrollReset:Ee||F,enableViewTransition:qe?I:void 0});else{let Be=D2(_t,gt);await Se(Gt,_t,{overrideNavigation:Be,fetcherSubmission:de,preventScrollReset:Ee||F,enableViewTransition:qe?I:void 0})}}async function bt(ve,Ce,qe,gt){let de,Ee={};try{de=await mB(u,ve,Ce,gt,qe,!1)}catch(Ae){return Ce.filter(ft=>ft.shouldLoad).forEach(ft=>{Ee[ft.route.id]={type:"error",error:Ae}}),Ee}if(ve.signal.aborted)return Ee;if(!an(ve.method))for(let Ae of Ce){if(de[Ae.route.id]?.type==="error")break;!de.hasOwnProperty(Ae.route.id)&&!T.loaderData.hasOwnProperty(Ae.route.id)&&(!T.errors||!T.errors.hasOwnProperty(Ae.route.id))&&Ae.shouldCallHandler()&&(de[Ae.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Ae.route.id}`)})}for(let[Ae,ft]of Object.entries(de))if(NB(ft)){let _t=ft.result;Ee[Ae]={type:"redirect",response:xB(_t,ve,Ae,Ce,m)}}else Ee[Ae]=await fB(ft);return Ee}async function ct(ve,Ce,qe,gt){let de=bt(qe,ve,gt,null),Ee=Promise.all(Ce.map(async _t=>{if(_t.matches&&_t.match&&_t.request&&_t.controller){let ss=(await bt(_t.request,_t.matches,gt,_t.key))[_t.match.route.id];return{[_t.key]:ss}}else return Promise.resolve({[_t.key]:{type:"error",error:Ai(404,{pathname:_t.path})}})})),Ae=await de,ft=(await Ee).reduce((_t,Gt)=>Object.assign(_t,Gt),{});return{loaderResults:Ae,fetcherResults:ft}}function ht(){q=!0,W.forEach((ve,Ce)=>{G.has(Ce)&&V.add(Ce),Kt(Ce)})}function Et(ve,Ce,qe={}){T.fetchers.set(ve,Ce),ge({fetchers:new Map(T.fetchers)},{flushSync:(qe&&qe.flushSync)===!0})}function be(ve,Ce,qe,gt={}){let de=Pc(T.matches,Ce);jt(ve),ge({errors:{[de.route.id]:qe},fetchers:new Map(T.fetchers)},{flushSync:(gt&&gt.flushSync)===!0})}function Oe(ve){return J.set(ve,(J.get(ve)||0)+1),te.has(ve)&&te.delete(ve),T.fetchers.get(ve)||aB}function Le(ve,Ce){Kt(ve,Ce?.reason),Et(ve,Sl(null))}function jt(ve){let Ce=T.fetchers.get(ve);G.has(ve)&&!(Ce&&Ce.state==="loading"&&R.has(ve))&&Kt(ve),W.delete(ve),R.delete(ve),$.delete(ve),te.delete(ve),V.delete(ve),T.fetchers.delete(ve)}function Jt(ve){let Ce=(J.get(ve)||0)-1;Ce<=0?(J.delete(ve),te.add(ve)):J.set(ve,Ce),ge({fetchers:new Map(T.fetchers)})}function Kt(ve,Ce){let qe=G.get(ve);qe&&(qe.abort(Ce),G.delete(ve))}function rt(ve){for(let Ce of ve){let qe=Oe(Ce),gt=Sl(qe.data);T.fetchers.set(Ce,gt)}}function Lt(){let ve=[],Ce=!1;for(let qe of $){let gt=T.fetchers.get(qe);Hs(gt,`Expected fetcher: ${qe}`),gt.state==="loading"&&($.delete(qe),ve.push(qe),Ce=!0)}return rt(ve),Ce}function Nt(ve){let Ce=[];for(let[qe,gt]of R)if(gt<ve){let de=T.fetchers.get(qe);Hs(de,`Expected fetcher: ${qe}`),de.state==="loading"&&(Kt(qe),R.delete(qe),Ce.push(qe))}return rt(Ce),Ce.length>0}function ps(ve,Ce){let qe=T.blockers.get(ve)||Eh;return ee.get(ve)!==Ce&&ee.set(ve,Ce),qe}function cs(ve){T.blockers.delete(ve),ee.delete(ve)}function Ns(ve,Ce){let qe=T.blockers.get(ve)||Eh;Hs(qe.state==="unblocked"&&Ce.state==="blocked"||qe.state==="blocked"&&Ce.state==="blocked"||qe.state==="blocked"&&Ce.state==="proceeding"||qe.state==="blocked"&&Ce.state==="unblocked"||qe.state==="proceeding"&&Ce.state==="unblocked",`Invalid blocker state transition: ${qe.state} -> ${Ce.state}`);let gt=new Map(T.blockers);gt.set(ve,Ce),ge({blockers:gt})}function Ys({currentLocation:ve,nextLocation:Ce,historyAction:qe}){if(ee.size===0)return;ee.size>1&&fr(!1,"A router only supports one blocker at a time");let gt=Array.from(ee.entries()),[de,Ee]=gt[gt.length-1],Ae=T.blockers.get(de);if(!(Ae&&Ae.state==="proceeding")&&Ee({currentLocation:ve,nextLocation:Ce,historyAction:qe}))return de}function Is(ve){let Ce=Ai(404,{pathname:ve}),qe=c||l,{matches:gt,route:de}=z0(qe);return{notFoundMatches:gt,route:de,error:Ce}}function Ms(ve,Ce,qe){if(w=ve,j=Ce,S=qe||null,!v&&T.navigation===M2){v=!0;let gt=ia(T.location,T.matches);gt!=null&&ge({restoreScrollPosition:gt})}return()=>{w=null,j=null,S=null}}function pa(ve,Ce){return S&&S(ve,Ce.map(gt=>Eq(gt,T.loaderData)))||ve.key}function ha(ve,Ce){if(w&&j){let qe=pa(ve,Ce);w[qe]=j()}}function ia(ve,Ce){if(w){let qe=pa(ve,Ce),gt=w[qe];if(typeof gt=="number")return gt}return null}function $t(ve,Ce,qe){if(t.patchRoutesOnNavigation)if(ve){if(Object.keys(ve[0].params).length>0)return{active:!0,matches:sf(Ce,qe,m,!0)}}else return{active:!0,matches:sf(Ce,qe,m,!0)||[]};return{active:!1,matches:null}}async function $s(ve,Ce,qe,gt){if(!t.patchRoutesOnNavigation)return{type:"success",matches:ve};let de=ve;for(;;){let Ee=c==null,Ae=c||l,ft=o;try{await t.patchRoutesOnNavigation({signal:qe,path:Ce,matches:de,fetcherKey:gt,patch:(ss,$e)=>{qe.aborted||hP(ss,$e,Ae,ft,i,!1)}})}catch(ss){return{type:"error",error:ss,partialMatches:de}}finally{Ee&&!qe.aborted&&(l=[...l])}if(qe.aborted)return{type:"aborted"};let _t=Cc(Ae,Ce,m),Gt=null;if(_t){if(Object.keys(_t[0].params).length===0)return{type:"success",matches:_t};if(Gt=sf(Ae,Ce,m,!0),!(Gt&&de.length<Gt.length&&zt(de,Gt.slice(0,de.length))))return{type:"success",matches:_t}}if(Gt||(Gt=sf(Ae,Ce,m,!0)),!Gt||zt(de,Gt))return{type:"success",matches:null};de=Gt}}function zt(ve,Ce){return ve.length===Ce.length&&ve.every((qe,gt)=>qe.route.id===Ce[gt].route.id)}function qt(ve){o={},c=ix(ve,i,void 0,o)}function ds(ve,Ce,qe=!1){let gt=c==null;hP(ve,Ce,c||l,o,i,qe),gt&&(l=[...l],ge({}))}return M={get basename(){return m},get future(){return h},get state(){return T},get routes(){return l},get window(){return s},initialize:he,subscribe:xe,enableScrollRestoration:Ms,navigate:pe,fetch:We,revalidate:Re,createHref:ve=>t.history.createHref(ve),encodeLocation:ve=>t.history.encodeLocation(ve),getFetcher:Oe,resetFetcher:Le,deleteFetcher:Jt,dispose:ne,getBlocker:ps,deleteBlocker:cs,patchRoutes:ds,_internalFetchControllers:G,_internalSetRoutes:qt,_internalSetStateDoNotUseOrYouWillBreakYourApp(ve){ge(ve)}},t.unstable_instrumentations&&(M=Gq(M,t.unstable_instrumentations.map(ve=>ve.router).filter(Boolean))),M}function iB(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function XN(t,s,a,r,n,i){let o,l;if(n){o=[];for(let m of s)if(o.push(m),m.route.id===n){l=m;break}}else o=s,l=s[s.length-1];let c=Gb(r||".",Yb(o),Gi(t.pathname,a)||t.pathname,i==="path");if(r==null&&(c.search=t.search,c.hash=t.hash),(r==null||r===""||r===".")&&l){let m=L_(c.search);if(l.route.index&&!m)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!l.route.index&&m){let u=new URLSearchParams(c.search),h=u.getAll("index");u.delete("index"),h.filter(b=>b).forEach(b=>u.append("index",b));let f=u.toString();c.search=f?`?${f}`:""}}return a!=="/"&&(c.pathname=Bq({basename:a,pathname:c.pathname})),el(c)}function mP(t,s,a){if(!a||!iB(a))return{path:s};if(a.formMethod&&!SB(a.formMethod))return{path:s,error:Ai(405,{method:a.formMethod})};let r=()=>({path:s,error:Ai(400,{type:"invalid-body"})}),i=(a.formMethod||"get").toUpperCase(),o=p7(s);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!an(i))return r();let h=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((f,[b,w])=>`${f}${b}=${w}
`,""):String(a.body);return{path:s,submission:{formMethod:i,formAction:o,formEncType:a.formEncType,formData:void 0,json:void 0,text:h}}}else if(a.formEncType==="application/json"){if(!an(i))return r();try{let h=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:s,submission:{formMethod:i,formAction:o,formEncType:a.formEncType,formData:void 0,json:h,text:void 0}}}catch{return r()}}}Hs(typeof FormData=="function","FormData is not available in this environment");let l,c;if(a.formData)l=tw(a.formData),c=a.formData;else if(a.body instanceof FormData)l=tw(a.body),c=a.body;else if(a.body instanceof URLSearchParams)l=a.body,c=bP(l);else if(a.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(a.body),c=bP(l)}catch{return r()}let m={formMethod:i,formAction:o,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(an(m.formMethod))return{path:s,submission:m};let u=Xc(s);return t&&u.search&&L_(u.search)&&l.append("index",""),u.search=`?${l}`,{path:el(u),submission:m}}function pP(t,s,a,r,n,i,o,l,c,m,u,h,f,b,w,S,j,v,N,C,P){let E=C?ei(C[1])?C[1].error:C[1].data:void 0,M=n.createURL(i.location),T=n.createURL(c),A;if(u&&i.errors){let B=Object.keys(i.errors)[0];A=o.findIndex(q=>q.route.id===B)}else if(C&&ei(C[1])){let B=C[0];A=o.findIndex(q=>q.route.id===B)-1}let L=C?C[1].statusCode:void 0,F=L&&L>=400,z={currentUrl:M,currentParams:i.matches[0]?.params||{},nextUrl:T,nextParams:o[0].params,...l,actionResult:E,actionStatus:L},I=Kx(o),Q=o.map((B,q)=>{let{route:V}=B,G=null;if(A!=null&&q>A?G=!1:V.lazy?G=!0:O_(V)?u?G=JN(V,i.loaderData,i.errors):oB(i.loaderData,i.matches[q],B)&&(G=!0):G=!1,G!==null)return ew(a,r,t,I,B,m,s,G);let H=!1;typeof P=="boolean"?H=P:F?H=!1:(h||M.pathname+M.search===T.pathname+T.search||M.search!==T.search||lB(i.matches[q],B))&&(H=!0);let D={...z,defaultShouldRevalidate:H},R=$f(B,D);return ew(a,r,t,I,B,m,s,R,D,P)}),Y=[];return w.forEach((B,q)=>{if(u||!o.some(J=>J.route.id===B.routeId)||b.has(q))return;let V=i.fetchers.get(q),G=V&&V.state!=="idle"&&V.data===void 0,H=Cc(j,B.path,v);if(!H){if(N&&G)return;Y.push({key:q,routeId:B.routeId,path:B.path,matches:null,match:null,request:null,controller:null});return}if(S.has(q))return;let D=My(H,B.path),R=new AbortController,$=ym(n,B.path,R.signal),W=null;if(f.has(q))f.delete(q),W=qm(a,r,$,H,D,m,s);else if(G)h&&(W=qm(a,r,$,H,D,m,s));else{let J;typeof P=="boolean"?J=P:F?J=!1:J=h;let te={...z,defaultShouldRevalidate:J};$f(D,te)&&(W=qm(a,r,$,H,D,m,s,te))}W&&Y.push({key:q,routeId:B.routeId,path:B.path,matches:W,match:D,request:$,controller:R})}),{dsMatches:Q,revalidatingFetchers:Y}}function O_(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function JN(t,s,a){if(t.lazy)return!0;if(!O_(t))return!1;let r=s!=null&&t.id in s,n=a!=null&&a[t.id]!==void 0;return!r&&n?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!n}function oB(t,s,a){let r=!s||a.route.id!==s.route.id,n=!t.hasOwnProperty(a.route.id);return r||n}function lB(t,s){let a=t.route.path;return t.pathname!==s.pathname||a!=null&&a.endsWith("*")&&t.params["*"]!==s.params["*"]}function $f(t,s){if(t.route.shouldRevalidate){let a=t.route.shouldRevalidate(s);if(typeof a=="boolean")return a}return s.defaultShouldRevalidate}function hP(t,s,a,r,n,i){let o;if(t){let m=r[t];Hs(m,`No route found to patch children into: routeId = ${t}`),m.children||(m.children=[]),o=m.children}else o=a;let l=[],c=[];if(s.forEach(m=>{let u=o.find(h=>l7(m,h));u?c.push({existingRoute:u,newRoute:m}):l.push(m)}),l.length>0){let m=ix(l,n,[t||"_","patch",String(o?.length||"0")],r);o.push(...m)}if(i&&c.length>0)for(let m=0;m<c.length;m++){let{existingRoute:u,newRoute:h}=c[m],f=u,[b]=ix([h],n,[],{},!0);Object.assign(f,{element:b.element?b.element:f.element,errorElement:b.errorElement?b.errorElement:f.errorElement,hydrateFallbackElement:b.hydrateFallbackElement?b.hydrateFallbackElement:f.hydrateFallbackElement})}}function l7(t,s){return"id"in t&&"id"in s&&t.id===s.id?!0:t.index===s.index&&t.path===s.path&&t.caseSensitive===s.caseSensitive?(!t.children||t.children.length===0)&&(!s.children||s.children.length===0)?!0:t.children.every((a,r)=>s.children?.some(n=>l7(a,n))):!1}var fP=new WeakMap,c7=({key:t,route:s,manifest:a,mapRouteProperties:r})=>{let n=a[s.id];if(Hs(n,"No route found in manifest"),!n.lazy||typeof n.lazy!="object")return;let i=n.lazy[t];if(!i)return;let o=fP.get(n);o||(o={},fP.set(n,o));let l=o[t];if(l)return l;let c=(async()=>{let m=Sq(t),h=n[t]!==void 0&&t!=="hasErrorBoundary";if(m)fr(!m,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),o[t]=Promise.resolve();else if(h)fr(!1,`Route "${n.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let f=await i();f!=null&&(Object.assign(n,{[t]:f}),Object.assign(n,r(n)))}typeof n.lazy=="object"&&(n.lazy[t]=void 0,Object.values(n.lazy).every(f=>f===void 0)&&(n.lazy=void 0))})();return o[t]=c,c},xP=new WeakMap;function cB(t,s,a,r,n){let i=a[t.id];if(Hs(i,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let u=xP.get(i);if(u)return{lazyRoutePromise:u,lazyHandlerPromise:u};let h=(async()=>{Hs(typeof t.lazy=="function","No lazy route function found");let f=await t.lazy(),b={};for(let w in f){let S=f[w];if(S===void 0)continue;let j=Pq(w),N=i[w]!==void 0&&w!=="hasErrorBoundary";j?fr(!j,"Route property "+w+" is not a supported property to be returned from a lazy route function. This property will be ignored."):N?fr(!N,`Route "${i.id}" has a static property "${w}" defined but its lazy function is also returning a value for this property. The lazy route property "${w}" will be ignored.`):b[w]=S}Object.assign(i,b),Object.assign(i,{...r(i),lazy:void 0})})();return xP.set(i,h),h.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:h}}let o=Object.keys(t.lazy),l=[],c;for(let u of o){if(n&&n.includes(u))continue;let h=c7({key:u,route:t,manifest:a,mapRouteProperties:r});h&&(l.push(h),u===s&&(c=h))}let m=l.length>0?Promise.all(l).then(()=>{}):void 0;return m?.catch(()=>{}),c?.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:c}}async function gP(t){let s=t.matches.filter(n=>n.shouldLoad),a={};return(await Promise.all(s.map(n=>n.resolve()))).forEach((n,i)=>{a[s[i].route.id]=n}),a}async function dB(t){return t.matches.some(s=>s.route.middleware)?d7(t,()=>gP(t)):gP(t)}function d7(t,s){return uB(t,s,r=>{if(_B(r))throw r;return r},vB,a);function a(r,n,i){if(i)return Promise.resolve(Object.assign(i.value,{[n]:{type:"error",result:r}}));{let{matches:o}=t,l=Math.min(Math.max(o.findIndex(m=>m.route.id===n),0),Math.max(o.findIndex(m=>m.shouldCallHandler()),0)),c=Pc(o,o[l].route.id).route.id;return Promise.resolve({[c]:{type:"error",result:r}})}}}async function uB(t,s,a,r,n){let{matches:i,request:o,params:l,context:c,unstable_pattern:m}=t,u=i.flatMap(f=>f.route.middleware?f.route.middleware.map(b=>[f.route.id,b]):[]);return await u7({request:o,params:l,context:c,unstable_pattern:m},u,s,a,r,n)}async function u7(t,s,a,r,n,i,o=0){let{request:l}=t;if(l.signal.aborted)throw l.signal.reason??new Error(`Request aborted: ${l.method} ${l.url}`);let c=s[o];if(!c)return await a();let[m,u]=c,h,f=async()=>{if(h)throw new Error("You may only call `next()` once per middleware");try{return h={value:await u7(t,s,a,r,n,i,o+1)},h.value}catch(b){return h={value:await i(b,m,h)},h.value}};try{let b=await u(t,f),w=b!=null?r(b):void 0;return n(w)?w:h?w??h.value:(h={value:await f()},h.value)}catch(b){return await i(b,m,h)}}function m7(t,s,a,r,n){let i=c7({key:"middleware",route:r.route,manifest:s,mapRouteProperties:t}),o=cB(r.route,an(a.method)?"action":"loader",s,t,n);return{middleware:i,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function ew(t,s,a,r,n,i,o,l,c=null,m){let u=!1,h=m7(t,s,a,n,i);return{...n,_lazyPromises:h,shouldLoad:l,shouldRevalidateArgs:c,shouldCallHandler(f){return u=!0,c?typeof m=="boolean"?$f(n,{...c,defaultShouldRevalidate:m}):typeof f=="boolean"?$f(n,{...c,defaultShouldRevalidate:f}):$f(n,c):l},resolve(f){let{lazy:b,loader:w,middleware:S}=n.route,j=u||l||f&&!an(a.method)&&(b||w),v=S&&S.length>0&&!w&&!b;return j&&(an(a.method)||!v)?pB({request:a,unstable_pattern:r,match:n,lazyHandlerPromise:h?.handler,lazyRoutePromise:h?.route,handlerOverride:f,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function qm(t,s,a,r,n,i,o,l=null){return r.map(c=>c.route.id!==n.route.id?{...c,shouldLoad:!1,shouldRevalidateArgs:l,shouldCallHandler:()=>!1,_lazyPromises:m7(t,s,a,c,i),resolve:()=>Promise.resolve({type:"data",result:void 0})}:ew(t,s,a,Kx(r),c,i,o,!0,l))}async function mB(t,s,a,r,n,i){a.some(m=>m._lazyPromises?.middleware)&&await Promise.all(a.map(m=>m._lazyPromises?.middleware));let o={request:s,unstable_pattern:Kx(a),params:a[0].params,context:n,matches:a},c=await t({...o,fetcherKey:r,runClientMiddleware:m=>{let u=o;return d7(u,()=>m({...u,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(a.flatMap(m=>[m._lazyPromises?.handler,m._lazyPromises?.route]))}catch{}return c}async function pB({request:t,unstable_pattern:s,match:a,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:i,scopedContext:o}){let l,c,m=an(t.method),u=m?"action":"loader",h=f=>{let b,w=new Promise((v,N)=>b=N);c=()=>b(),t.signal.addEventListener("abort",c);let S=v=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${a.route.id}]`)):f({request:t,unstable_pattern:s,params:a.params,context:o},...v!==void 0?[v]:[]),j=(async()=>{try{return{type:"data",result:await(i?i(N=>S(N)):S())}}catch(v){return{type:"error",result:v}}})();return Promise.race([j,w])};try{let f=m?a.route.action:a.route.loader;if(r||n)if(f){let b,[w]=await Promise.all([h(f).catch(S=>{b=S}),r,n]);if(b!==void 0)throw b;l=w}else{await r;let b=m?a.route.action:a.route.loader;if(b)[l]=await Promise.all([h(b),n]);else if(u==="action"){let w=new URL(t.url),S=w.pathname+w.search;throw Ai(405,{method:t.method,pathname:S,routeId:a.route.id})}else return{type:"data",result:void 0}}else if(f)l=await h(f);else{let b=new URL(t.url),w=b.pathname+b.search;throw Ai(404,{pathname:w})}}catch(f){return{type:"error",result:f}}finally{c&&t.signal.removeEventListener("abort",c)}return l}async function hB(t){let s=t.headers.get("Content-Type");return s&&/\bapplication\/json\b/.test(s)?t.body==null?null:t.json():t.text()}async function fB(t){let{result:s,type:a}=t;if(F_(s)){let r;try{r=await hB(s)}catch(n){return{type:"error",error:n}}return a==="error"?{type:"error",error:new Gx(s.status,s.statusText,r),statusCode:s.status,headers:s.headers}:{type:"data",data:r,statusCode:s.status,headers:s.headers}}return a==="error"?wP(s)?s.data instanceof Error?{type:"error",error:s.data,statusCode:s.init?.status,headers:s.init?.headers?new Headers(s.init.headers):void 0}:{type:"error",error:bB(s),statusCode:ox(s)?s.status:void 0,headers:s.init?.headers?new Headers(s.init.headers):void 0}:{type:"error",error:s,statusCode:ox(s)?s.status:void 0}:wP(s)?{type:"data",data:s.data,statusCode:s.init?.status,headers:s.init?.headers?new Headers(s.init.headers):void 0}:{type:"data",data:s}}function xB(t,s,a,r,n){let i=t.headers.get("Location");if(Hs(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!I_(i)){let o=r.slice(0,r.findIndex(l=>l.route.id===a)+1);i=XN(new URL(s.url),o,n,i),t.headers.set("Location",i)}return t}function yP(t,s,a,r){let n=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(I_(t)){let i=t,o=i.startsWith("//")?new URL(s.protocol+i):new URL(i);if(n.includes(o.protocol))throw new Error("Invalid redirect location");let l=Gi(o.pathname,a)!=null;if(o.origin===s.origin&&l)return o.pathname+o.search+o.hash}try{let i=r.createURL(t);if(n.includes(i.protocol))throw new Error("Invalid redirect location")}catch{}return t}function ym(t,s,a,r){let n=t.createURL(p7(s)).toString(),i={signal:a};if(r&&an(r.formMethod)){let{formMethod:o,formEncType:l}=r;i.method=o.toUpperCase(),l==="application/json"?(i.headers=new Headers({"Content-Type":l}),i.body=JSON.stringify(r.json)):l==="text/plain"?i.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?i.body=tw(r.formData):i.body=r.formData}return new Request(n,i)}function tw(t){let s=new URLSearchParams;for(let[a,r]of t.entries())s.append(a,typeof r=="string"?r:r.name);return s}function bP(t){let s=new FormData;for(let[a,r]of t.entries())s.append(a,r);return s}function gB(t,s,a,r=!1,n=!1){let i={},o=null,l,c=!1,m={},u=a&&ei(a[1])?a[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in s))return;let f=h.route.id,b=s[f];if(Hs(!Bd(b),"Cannot handle redirect results in processLoaderData"),ei(b)){let w=b.error;if(u!==void 0&&(w=u,u=void 0),o=o||{},n)o[f]=w;else{let S=Pc(t,f);o[S.route.id]==null&&(o[S.route.id]=w)}r||(i[f]=o7),c||(c=!0,l=ox(b.error)?b.error.status:500),b.headers&&(m[f]=b.headers)}else i[f]=b.data,b.statusCode&&b.statusCode!==200&&!c&&(l=b.statusCode),b.headers&&(m[f]=b.headers)}),u!==void 0&&a&&(o={[a[0]]:u},a[2]&&(i[a[2]]=void 0)),{loaderData:i,errors:o,statusCode:l||200,loaderHeaders:m}}function vP(t,s,a,r,n,i){let{loaderData:o,errors:l}=gB(s,a,r);return n.filter(c=>!c.matches||c.matches.some(m=>m.shouldLoad)).forEach(c=>{let{key:m,match:u,controller:h}=c;if(h&&h.signal.aborted)return;let f=i[m];if(Hs(f,"Did not find corresponding fetcher result"),ei(f)){let b=Pc(t.matches,u?.route.id);l&&l[b.route.id]||(l={...l,[b.route.id]:f.error}),t.fetchers.delete(m)}else if(Bd(f))Hs(!1,"Unhandled fetcher revalidation redirect");else{let b=Sl(f.data);t.fetchers.set(m,b)}}),{loaderData:o,errors:l}}function jP(t,s,a,r){let n=Object.entries(s).filter(([,i])=>i!==o7).reduce((i,[o,l])=>(i[o]=l,i),{});for(let i of a){let o=i.route.id;if(!s.hasOwnProperty(o)&&t.hasOwnProperty(o)&&i.route.loader&&(n[o]=t[o]),r&&r.hasOwnProperty(o))break}return n}function NP(t){return t?ei(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Pc(t,s){return(s?t.slice(0,t.findIndex(r=>r.route.id===s)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function z0(t){let s=t.length===1?t[0]:t.find(a=>a.index||!a.path||a.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:s}],route:s}}function Ai(t,{pathname:s,routeId:a,method:r,type:n,message:i}={}){let o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",r&&s&&a?l=`You made a ${r} request to "${s}" but did not provide a \`loader\` for route "${a}", so there is no way to handle the request.`:n==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l=`Route "${a}" does not match URL "${s}"`):t===404?(o="Not Found",l=`No route matches URL "${s}"`):t===405&&(o="Method Not Allowed",r&&s&&a?l=`You made a ${r.toUpperCase()} request to "${s}" but did not provide an \`action\` for route "${a}", so there is no way to handle the request.`:r&&(l=`Invalid request method "${r.toUpperCase()}"`)),new Gx(t||500,o,new Error(l),!0)}function q0(t){let s=Object.entries(t);for(let a=s.length-1;a>=0;a--){let[r,n]=s[a];if(Bd(n))return{key:r,result:n}}}function p7(t){let s=typeof t=="string"?Xc(t):t;return el({...s,hash:""})}function yB(t,s){return t.pathname!==s.pathname||t.search!==s.search?!1:t.hash===""?s.hash!=="":t.hash===s.hash?!0:s.hash!==""}function bB(t){return new Gx(t.init?.status??500,t.init?.statusText??"Internal Server Error",t.data)}function vB(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([s,a])=>typeof s=="string"&&jB(a))}function jB(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function NB(t){return F_(t.result)&&n7.has(t.result.status)}function ei(t){return t.type==="error"}function Bd(t){return(t&&t.type)==="redirect"}function wP(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function F_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function wB(t){return n7.has(t)}function _B(t){return F_(t)&&wB(t.status)&&t.headers.has("Location")}function SB(t){return tB.has(t.toUpperCase())}function an(t){return Jq.has(t.toUpperCase())}function L_(t){return new URLSearchParams(t).getAll("index").some(s=>s==="")}function My(t,s){let a=typeof s=="string"?Xc(s).search:s.search;if(t[t.length-1].route.index&&L_(a||""))return t[t.length-1];let r=e7(t);return r[r.length-1]}function _P(t){let{formMethod:s,formAction:a,formEncType:r,text:n,formData:i,json:o}=t;if(!(!s||!a||!r)){if(n!=null)return{formMethod:s,formAction:a,formEncType:r,formData:void 0,json:void 0,text:n};if(i!=null)return{formMethod:s,formAction:a,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:s,formAction:a,formEncType:r,formData:void 0,json:o,text:void 0}}}function D2(t,s){return s?{state:"loading",location:t,formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function CB(t,s){return{state:"submitting",location:t,formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text}}function Th(t,s){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:s}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function PB(t,s){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:s?s.data:void 0}}function Sl(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function kB(t,s){try{let a=t.sessionStorage.getItem(i7);if(a){let r=JSON.parse(a);for(let[n,i]of Object.entries(r||{}))i&&Array.isArray(i)&&s.set(n,new Set(i||[]))}}catch{}}function EB(t,s){if(s.size>0){let a={};for(let[r,n]of s)a[r]=[...n];try{t.sessionStorage.setItem(i7,JSON.stringify(a))}catch(r){fr(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function SP(){let t,s,a=new Promise((r,n)=>{t=async i=>{r(i);try{await a}catch{}},s=async i=>{n(i);try{await a}catch{}}});return{promise:a,resolve:t,reject:s}}var gu=g.createContext(null);gu.displayName="DataRouter";var Qx=g.createContext(null);Qx.displayName="DataRouterState";var h7=g.createContext(!1);function TB(){return g.useContext(h7)}var $_=g.createContext({isTransitioning:!1});$_.displayName="ViewTransition";var f7=g.createContext(new Map);f7.displayName="Fetchers";var MB=g.createContext(null);MB.displayName="Await";var hi=g.createContext(null);hi.displayName="Navigation";var Kb=g.createContext(null);Kb.displayName="Location";var eo=g.createContext({outlet:null,matches:[],isDataRoute:!1});eo.displayName="Route";var z_=g.createContext(null);z_.displayName="RouteError";var x7="REACT_ROUTER_ERROR",DB="REDIRECT",RB="ROUTE_ERROR_RESPONSE";function AB(t){if(t.startsWith(`${x7}:${DB}:{`))try{let s=JSON.parse(t.slice(28));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.location=="string"&&typeof s.reloadDocument=="boolean"&&typeof s.replace=="boolean")return s}catch{}}function IB(t){if(t.startsWith(`${x7}:${RB}:{`))try{let s=JSON.parse(t.slice(40));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string")return new Gx(s.status,s.statusText,s.data)}catch{}}function OB(t,{relative:s}={}){Hs(yp(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=g.useContext(hi),{hash:n,pathname:i,search:o}=Zx(t,{relative:s}),l=i;return a!=="/"&&(l=i==="/"?a:Go([a,i])),r.createHref({pathname:l,search:o,hash:n})}function yp(){return g.useContext(Kb)!=null}function fi(){return Hs(yp(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Kb).location}var g7="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function y7(t){g.useContext(hi).static||g.useLayoutEffect(t)}function Ws(){let{isDataRoute:t}=g.useContext(eo);return t?ZB():FB()}function FB(){Hs(yp(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(gu),{basename:s,navigator:a}=g.useContext(hi),{matches:r}=g.useContext(eo),{pathname:n}=fi(),i=JSON.stringify(Yb(r)),o=g.useRef(!1);return y7(()=>{o.current=!0}),g.useCallback((c,m={})=>{if(fr(o.current,g7),!o.current)return;if(typeof c=="number"){a.go(c);return}let u=Gb(c,JSON.parse(i),n,m.relative==="path");t==null&&s!=="/"&&(u.pathname=u.pathname==="/"?s:Go([s,u.pathname])),(m.replace?a.replace:a.push)(u,m.state,m)},[s,a,i,n,t])}var LB=g.createContext(null);function $B(t){let s=g.useContext(eo).outlet;return g.useMemo(()=>s&&g.createElement(LB.Provider,{value:t},s),[s,t])}function Kr(){let{matches:t}=g.useContext(eo),s=t[t.length-1];return s?s.params:{}}function Zx(t,{relative:s}={}){let{matches:a}=g.useContext(eo),{pathname:r}=fi(),n=JSON.stringify(Yb(a));return g.useMemo(()=>Gb(t,JSON.parse(n),r,s==="path"),[t,n,r,s])}function zB(t,s,a,r,n){Hs(yp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(hi),{matches:o}=g.useContext(eo),l=o[o.length-1],c=l?l.params:{},m=l?l.pathname:"/",u=l?l.pathnameBase:"/",h=l&&l.route;{let N=h&&h.path||"";v7(m,!h||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let f=fi(),b;b=f;let w=b.pathname||"/",S=w;if(u!=="/"){let N=u.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let j=Cc(t,{pathname:S});return fr(h||j!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),fr(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),HB(j&&j.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Go([u,i.encodeLocation?i.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Go([u,i.encodeLocation?i.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),o,a,r,n)}function qB(){let t=QB(),s=ox(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},s),a?g.createElement("pre",{style:n},a):null,o)}var BB=g.createElement(qB,null),b7=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){this.props.onError?this.props.onError(t,s):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const a=IB(t.digest);a&&(t=a)}let s=t!==void 0?g.createElement(eo.Provider,{value:this.props.routeContext},g.createElement(z_.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?g.createElement(UB,{error:t},s):s}};b7.contextType=h7;var R2=new WeakMap;function UB({children:t,error:s}){let{basename:a}=g.useContext(hi);if(typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){let r=AB(s.digest);if(r){let n=R2.get(s);if(n)throw n;let i=s7(r.location,a);if(t7&&!R2.get(s))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw R2.set(s,o),o}return g.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function VB({routeContext:t,match:s,children:a}){let r=g.useContext(gu);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),g.createElement(eo.Provider,{value:t},a)}function HB(t,s=[],a=null,r=null,n=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(s.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let i=t,o=a?.errors;if(o!=null){let u=i.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);Hs(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(a)for(let u=0;u<i.length;u++){let h=i[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:b}=a,w=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!b||b[h.route.id]===void 0);if(h.route.lazy||w){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let m=a&&r?(u,h)=>{r(u,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:Kx(a.matches),errorInfo:h})}:void 0;return i.reduceRight((u,h,f)=>{let b,w=!1,S=null,j=null;a&&(b=o&&h.route.id?o[h.route.id]:void 0,S=h.route.errorElement||BB,l&&(c<0&&f===0?(v7("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,j=null):c===f&&(w=!0,j=h.route.hydrateFallbackElement||null)));let v=s.concat(i.slice(0,f+1)),N=()=>{let C;return b?C=S:w?C=j:h.route.Component?C=g.createElement(h.route.Component,null):h.route.element?C=h.route.element:C=u,g.createElement(VB,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:a!=null},children:C})};return a&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?g.createElement(b7,{location:a.location,revalidation:a.revalidation,component:S,error:b,children:N(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:m}):N()},null)}function q_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WB(t){let s=g.useContext(gu);return Hs(s,q_(t)),s}function YB(t){let s=g.useContext(Qx);return Hs(s,q_(t)),s}function GB(t){let s=g.useContext(eo);return Hs(s,q_(t)),s}function B_(t){let s=GB(t),a=s.matches[s.matches.length-1];return Hs(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function KB(){return B_("useRouteId")}function QB(){let t=g.useContext(z_),s=YB("useRouteError"),a=B_("useRouteError");return t!==void 0?t:s.errors?.[a]}function ZB(){let{router:t}=WB("useNavigate"),s=B_("useNavigate"),a=g.useRef(!1);return y7(()=>{a.current=!0}),g.useCallback(async(n,i={})=>{fr(a.current,g7),a.current&&(typeof n=="number"?await t.navigate(n):await t.navigate(n,{fromRouteId:s,...i}))},[t,s])}var CP={};function v7(t,s,a){!s&&!CP[t]&&(CP[t]=!0,fr(!1,a))}var PP={};function kP(t,s){!t&&!PP[s]&&(PP[s]=!0,console.warn(s))}var XB="useOptimistic",EP=rx[XB],JB=()=>{};function eU(t){return EP?EP(t):[t,JB]}function tU(t){let s={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&fr(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(s,{element:g.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&fr(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(s,{hydrateFallbackElement:g.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&fr(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(s,{errorElement:g.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),s}var sU=["HydrateFallback","hydrateFallbackElement"],aU=class{constructor(){this.status="pending",this.promise=new Promise((t,s)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",t(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",s(a))}})}};function rU({router:t,flushSync:s,onError:a,unstable_useTransitions:r}){r=TB()||r;let[i,o]=g.useState(t.state),[l,c]=eU(i),[m,u]=g.useState(),[h,f]=g.useState({isTransitioning:!1}),[b,w]=g.useState(),[S,j]=g.useState(),[v,N]=g.useState(),C=g.useRef(new Map),P=g.useCallback((A,{deletedFetchers:L,newErrors:F,flushSync:z,viewTransitionOpts:I})=>{F&&a&&Object.values(F).forEach(Y=>a(Y,{location:A.location,params:A.matches[0]?.params??{},unstable_pattern:Kx(A.matches)})),A.fetchers.forEach((Y,B)=>{Y.data!==void 0&&C.current.set(B,Y.data)}),L.forEach(Y=>C.current.delete(Y)),kP(z===!1||s!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let Q=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(kP(I==null||Q,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!I||!Q){s&&z?s(()=>o(A)):r===!1?o(A):g.startTransition(()=>{r===!0&&c(Y=>TP(Y,A)),o(A)});return}if(s&&z){s(()=>{S&&(b?.resolve(),S.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let Y=t.window.document.startViewTransition(()=>{s(()=>o(A))});Y.finished.finally(()=>{s(()=>{w(void 0),j(void 0),u(void 0),f({isTransitioning:!1})})}),s(()=>j(Y));return}S?(b?.resolve(),S.skipTransition(),N({state:A,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(u(A),f({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[t.window,s,S,b,r,c,a]);g.useLayoutEffect(()=>t.subscribe(P),[t,P]),g.useEffect(()=>{h.isTransitioning&&!h.flushSync&&w(new aU)},[h]),g.useEffect(()=>{if(b&&m&&t.window){let A=m,L=b.promise,F=t.window.document.startViewTransition(async()=>{r===!1?o(A):g.startTransition(()=>{r===!0&&c(z=>TP(z,A)),o(A)}),await L});F.finished.finally(()=>{w(void 0),j(void 0),u(void 0),f({isTransitioning:!1})}),j(F)}},[m,b,t.window,r,c]),g.useEffect(()=>{b&&m&&l.location.key===m.location.key&&b.resolve()},[b,S,l.location,m]),g.useEffect(()=>{!h.isTransitioning&&v&&(u(v.state),f({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),N(void 0))},[h.isTransitioning,v]);let E=g.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:A=>t.navigate(A),push:(A,L,F)=>t.navigate(A,{state:L,preventScrollReset:F?.preventScrollReset}),replace:(A,L,F)=>t.navigate(A,{replace:!0,state:L,preventScrollReset:F?.preventScrollReset})}),[t]),M=t.basename||"/",T=g.useMemo(()=>({router:t,navigator:E,static:!1,basename:M,onError:a}),[t,E,M,a]);return g.createElement(g.Fragment,null,g.createElement(gu.Provider,{value:T},g.createElement(Qx.Provider,{value:l},g.createElement(f7.Provider,{value:C.current},g.createElement($_.Provider,{value:h},g.createElement(cU,{basename:M,location:l.location,navigationType:l.historyAction,navigator:E,unstable_useTransitions:r},g.createElement(nU,{routes:t.routes,future:t.future,state:l,onError:a})))))),null)}function TP(t,s){return{...t,navigation:s.navigation.state!=="idle"?s.navigation:t.navigation,revalidation:s.revalidation!=="idle"?s.revalidation:t.revalidation,actionData:s.navigation.state!=="submitting"?s.actionData:t.actionData,fetchers:s.fetchers}}var nU=g.memo(iU);function iU({routes:t,future:s,state:a,onError:r}){return zB(t,void 0,a,r,s)}function oU({to:t,replace:s,state:a,relative:r}){Hs(yp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=g.useContext(hi);fr(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=g.useContext(eo),{pathname:o}=fi(),l=Ws(),c=Gb(t,Yb(i),o,r==="path"),m=JSON.stringify(c);return g.useEffect(()=>{l(JSON.parse(m),{replace:s,state:a,relative:r})},[l,m,r,s,a]),null}function lU(t){return $B(t.context)}function cU({basename:t="/",children:s=null,location:a,navigationType:r="POP",navigator:n,static:i=!1,unstable_useTransitions:o}){Hs(!yp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:l,navigator:n,static:i,unstable_useTransitions:o,future:{}}),[l,n,i,o]);typeof a=="string"&&(a=Xc(a));let{pathname:m="/",search:u="",hash:h="",state:f=null,key:b="default"}=a,w=g.useMemo(()=>{let S=Gi(m,l);return S==null?null:{location:{pathname:S,search:u,hash:h,state:f,key:b},navigationType:r}},[l,m,u,h,f,b,r]);return fr(w!=null,`<Router basename="${l}"> is not able to match the URL "${m}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:g.createElement(hi.Provider,{value:c},g.createElement(Kb.Provider,{children:s,value:w}))}var Dy="get",Ry="application/x-www-form-urlencoded";function Qb(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function dU(t){return Qb(t)&&t.tagName.toLowerCase()==="button"}function uU(t){return Qb(t)&&t.tagName.toLowerCase()==="form"}function mU(t){return Qb(t)&&t.tagName.toLowerCase()==="input"}function pU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hU(t,s){return t.button===0&&(!s||s==="_self")&&!pU(t)}var B0=null;function fU(){if(B0===null)try{new FormData(document.createElement("form"),0),B0=!1}catch{B0=!0}return B0}var xU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function A2(t){return t!=null&&!xU.has(t)?(fr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ry}"`),null):t}function gU(t,s){let a,r,n,i,o;if(uU(t)){let l=t.getAttribute("action");r=l?Gi(l,s):null,a=t.getAttribute("method")||Dy,n=A2(t.getAttribute("enctype"))||Ry,i=new FormData(t)}else if(dU(t)||mU(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?Gi(c,s):null,a=t.getAttribute("formmethod")||l.getAttribute("method")||Dy,n=A2(t.getAttribute("formenctype"))||A2(l.getAttribute("enctype"))||Ry,i=new FormData(l,t),!fU()){let{name:m,type:u,value:h}=t;if(u==="image"){let f=m?`${m}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else m&&i.append(m,h)}}else{if(Qb(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Dy,r=null,n=Ry,o=t}return i&&n==="text/plain"&&(o=i,i=void 0),{action:r,method:a.toLowerCase(),encType:n,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function U_(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function yU(t,s,a,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a?n.pathname.endsWith("/")?n.pathname=`${n.pathname}_.${r}`:n.pathname=`${n.pathname}.${r}`:n.pathname==="/"?n.pathname=`_root.${r}`:s&&Gi(n.pathname,s)==="/"?n.pathname=`${s.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function bU(t,s){if(t.id in s)return s[t.id];try{let a=await import(t.module);return s[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vU(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function jU(t,s,a){let r=await Promise.all(t.map(async n=>{let i=s.routes[n.route.id];if(i){let o=await bU(i,a);return o.links?o.links():[]}return[]}));return SU(r.flat(1).filter(vU).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function MP(t,s,a,r,n,i){let o=(c,m)=>a[m]?c.route.id!==a[m].route.id:!0,l=(c,m)=>a[m].pathname!==c.pathname||a[m].route.path?.endsWith("*")&&a[m].params["*"]!==c.params["*"];return i==="assets"?s.filter((c,m)=>o(c,m)||l(c,m)):i==="data"?s.filter((c,m)=>{let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,m)||l(c,m))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function NU(t,s,{includeHydrateFallback:a}={}){return wU(t.map(r=>{let n=s.routes[r.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),a&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function wU(t){return[...new Set(t)]}function _U(t){let s={},a=Object.keys(t).sort();for(let r of a)s[r]=t[r];return s}function SU(t,s){let a=new Set;return new Set(s),t.reduce((r,n)=>{let i=JSON.stringify(_U(n));return a.has(i)||(a.add(i),r.push({key:i,link:n})),r},[])}function j7(){let t=g.useContext(gu);return U_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function CU(){let t=g.useContext(Qx);return U_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var V_=g.createContext(void 0);V_.displayName="FrameworkContext";function N7(){let t=g.useContext(V_);return U_(t,"You must render this element inside a <HydratedRouter> element"),t}function PU(t,s){let a=g.useContext(V_),[r,n]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:m,onMouseLeave:u,onTouchStart:h}=s,f=g.useRef(null);g.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let S=v=>{v.forEach(N=>{o(N.isIntersecting)})},j=new IntersectionObserver(S,{threshold:.5});return f.current&&j.observe(f.current),()=>{j.disconnect()}}},[t]),g.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let b=()=>{n(!0)},w=()=>{n(!1),o(!1)};return a?t!=="intent"?[i,f,{}]:[i,f,{onFocus:Mh(l,b),onBlur:Mh(c,w),onMouseEnter:Mh(m,b),onMouseLeave:Mh(u,w),onTouchStart:Mh(h,b)}]:[!1,f,{}]}function Mh(t,s){return a=>{t&&t(a),a.defaultPrevented||s(a)}}function kU({page:t,...s}){let{router:a}=j7(),r=g.useMemo(()=>Cc(a.routes,t,a.basename),[a.routes,t,a.basename]);return r?g.createElement(TU,{page:t,matches:r,...s}):null}function EU(t){let{manifest:s,routeModules:a}=N7(),[r,n]=g.useState([]);return g.useEffect(()=>{let i=!1;return jU(t,s,a).then(o=>{i||n(o)}),()=>{i=!0}},[t,s,a]),r}function TU({page:t,matches:s,...a}){let r=fi(),{future:n,manifest:i,routeModules:o}=N7(),{basename:l}=j7(),{loaderData:c,matches:m}=CU(),u=g.useMemo(()=>MP(t,s,m,i,r,"data"),[t,s,m,i,r]),h=g.useMemo(()=>MP(t,s,m,i,r,"assets"),[t,s,m,i,r]),f=g.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,j=!1;if(s.forEach(N=>{let C=i.routes[N.route.id];!C||!C.hasLoader||(!u.some(P=>P.route.id===N.route.id)&&N.route.id in c&&o[N.route.id]?.shouldRevalidate||C.hasClientLoader?j=!0:S.add(N.route.id))}),S.size===0)return[];let v=yU(t,l,n.unstable_trailingSlashAwareDataRequests,"data");return j&&S.size>0&&v.searchParams.set("_routes",s.filter(N=>S.has(N.route.id)).map(N=>N.route.id).join(",")),[v.pathname+v.search]},[l,n.unstable_trailingSlashAwareDataRequests,c,r,i,u,s,t,o]),b=g.useMemo(()=>NU(h,i),[h,i]),w=EU(h);return g.createElement(g.Fragment,null,f.map(S=>g.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...a})),b.map(S=>g.createElement("link",{key:S,rel:"modulepreload",href:S,...a})),w.map(({key:S,link:j})=>g.createElement("link",{key:S,nonce:a.nonce,...j,crossOrigin:j.crossOrigin??a.crossOrigin})))}function MU(...t){return s=>{t.forEach(a=>{typeof a=="function"?a(s):a!=null&&(a.current=s)})}}var DU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{DU&&(window.__reactRouterVersion="7.13.0")}catch{}function RU(t,s){return nB({basename:s?.basename,getContext:s?.getContext,future:s?.future,history:jq({window:s?.window}),hydrationData:s?.hydrationData||AU(),routes:t,mapRouteProperties:tU,hydrationRouteProperties:sU,dataStrategy:s?.dataStrategy,patchRoutesOnNavigation:s?.patchRoutesOnNavigation,window:s?.window,unstable_instrumentations:s?.unstable_instrumentations}).initialize()}function AU(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:IU(t.errors)}),t}function IU(t){if(!t)return null;let s=Object.entries(t),a={};for(let[r,n]of s)if(n&&n.__type==="RouteErrorResponse")a[r]=new Gx(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let i=window[n.__subType];if(typeof i=="function")try{let o=new i(n.message);o.stack="",a[r]=o}catch{}}if(a[r]==null){let i=new Error(n.message);i.stack="",a[r]=i}}else a[r]=n;return a}var w7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lx=g.forwardRef(function({onClick:s,discover:a="render",prefetch:r="none",relative:n,reloadDocument:i,replace:o,state:l,target:c,to:m,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:f,...b},w){let{basename:S,unstable_useTransitions:j}=g.useContext(hi),v=typeof m=="string"&&w7.test(m),N=s7(m,S);m=N.to;let C=OB(m,{relative:n}),[P,E,M]=PU(r,b),T=$U(m,{replace:o,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:h,unstable_defaultShouldRevalidate:f,unstable_useTransitions:j});function A(F){s&&s(F),F.defaultPrevented||T(F)}let L=g.createElement("a",{...b,...M,href:N.absoluteURL||C,onClick:N.isExternal||i?s:A,ref:MU(w,E),target:c,"data-discover":!v&&a==="render"?"true":void 0});return P&&!v?g.createElement(g.Fragment,null,L,g.createElement(kU,{page:C})):L});lx.displayName="Link";var OU=g.forwardRef(function({"aria-current":s="page",caseSensitive:a=!1,className:r="",end:n=!1,style:i,to:o,viewTransition:l,children:c,...m},u){let h=Zx(o,{relative:m.relative}),f=fi(),b=g.useContext(Qx),{navigator:w,basename:S}=g.useContext(hi),j=b!=null&&VU(h)&&l===!0,v=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,N=f.pathname,C=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(N=N.toLowerCase(),C=C?C.toLowerCase():null,v=v.toLowerCase()),C&&S&&(C=Gi(C,S)||C);const P=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let E=N===v||!n&&N.startsWith(v)&&N.charAt(P)==="/",M=C!=null&&(C===v||!n&&C.startsWith(v)&&C.charAt(v.length)==="/"),T={isActive:E,isPending:M,isTransitioning:j},A=E?s:void 0,L;typeof r=="function"?L=r(T):L=[r,E?"active":null,M?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let F=typeof i=="function"?i(T):i;return g.createElement(lx,{...m,"aria-current":A,className:L,ref:u,style:F,to:o,viewTransition:l},typeof c=="function"?c(T):c)});OU.displayName="NavLink";var FU=g.forwardRef(({discover:t="render",fetcherKey:s,navigate:a,reloadDocument:r,replace:n,state:i,method:o=Dy,action:l,onSubmit:c,relative:m,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:f,...b},w)=>{let{unstable_useTransitions:S}=g.useContext(hi),j=BU(),v=UU(l,{relative:m}),N=o.toLowerCase()==="get"?"get":"post",C=typeof l=="string"&&w7.test(l),P=E=>{if(c&&c(E),E.defaultPrevented)return;E.preventDefault();let M=E.nativeEvent.submitter,T=M?.getAttribute("formmethod")||o,A=()=>j(M||E.currentTarget,{fetcherKey:s,method:T,navigate:a,replace:n,state:i,relative:m,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:f});S&&a!==!1?g.startTransition(()=>A()):A()};return g.createElement("form",{ref:w,method:N,action:v,onSubmit:r?c:P,...b,"data-discover":!C&&t==="render"?"true":void 0})});FU.displayName="Form";function LU(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _7(t){let s=g.useContext(gu);return Hs(s,LU(t)),s}function $U(t,{target:s,replace:a,state:r,preventScrollReset:n,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let m=Ws(),u=fi(),h=Zx(t,{relative:i});return g.useCallback(f=>{if(hU(f,s)){f.preventDefault();let b=a!==void 0?a:el(u)===el(h),w=()=>m(t,{replace:b,state:r,preventScrollReset:n,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?g.startTransition(()=>w()):w()}},[u,m,h,a,r,s,t,n,i,o,l,c])}var zU=0,qU=()=>`__${String(++zU)}__`;function BU(){let{router:t}=_7("useSubmit"),{basename:s}=g.useContext(hi),a=KB(),r=t.fetch,n=t.navigate;return g.useCallback(async(i,o={})=>{let{action:l,method:c,encType:m,formData:u,body:h}=gU(i,s);if(o.navigate===!1){let f=o.fetcherKey||qU();await r(f,a,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||c,formEncType:o.encType||m,flushSync:o.flushSync})}else await n(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||c,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,n,s,a])}function UU(t,{relative:s}={}){let{basename:a}=g.useContext(hi),r=g.useContext(eo);Hs(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),i={...Zx(t||".",{relative:s})},o=fi();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:Go([a,i.pathname])),el(i)}function VU(t,{relative:s}={}){let a=g.useContext($_);Hs(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=_7("useViewTransitionState"),n=Zx(t,{relative:s});if(!a.isTransitioning)return!1;let i=Gi(a.currentLocation.pathname,r)||a.currentLocation.pathname,o=Gi(a.nextLocation.pathname,r)||a.nextLocation.pathname;return ob(n.pathname,o)!=null||ob(n.pathname,i)!=null}var Xx=GD();const af=Ji(Xx);function HU(t){return g.createElement(rU,{flushSync:Xx.flushSync,...t})}class WU{TOKEN_KEY="dcc_sfa_token";USER_KEY="dcc_sfa_user";EXPIRES_KEY="dcc_sfa_expires";setToken(s,a,r){try{if(localStorage.setItem(this.TOKEN_KEY,s),localStorage.setItem(this.USER_KEY,JSON.stringify(a)),r){const n=Date.now()+r*1e3;localStorage.setItem(this.EXPIRES_KEY,n.toString())}window.dispatchEvent(new Event("auth-change"))}catch(n){throw console.error("Failed to store token:",n),new Error("Token storage failed")}}getToken(){try{const s=localStorage.getItem(this.TOKEN_KEY);return s?this.isTokenExpired()?(this.clearAuth(),null):s:null}catch(s){return console.error("Failed to retrieve token:",s),null}}getUser(){try{const s=localStorage.getItem(this.USER_KEY);return s?JSON.parse(s):null}catch(s){return console.error("Failed to retrieve user data:",s),null}}isTokenExpired(){try{const s=localStorage.getItem(this.EXPIRES_KEY);if(!s)return!1;const a=parseInt(s);return Date.now()>=a}catch(s){return console.error("Failed to check token expiration:",s),!0}}isAuthenticated(){const s=this.getToken(),a=this.getUser();return!!(s&&a&&!this.isTokenExpired())}clearAuth(){try{localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_KEY),localStorage.removeItem(this.EXPIRES_KEY),window.dispatchEvent(new Event("auth-change"))}catch(s){console.error("Failed to clear auth data:",s)}}}const Bi=new WU,YU=({children:t})=>{const s=fi();return Bi.isAuthenticated()?e.jsx(e.Fragment,{children:t}):e.jsx(oU,{to:"/login",state:{from:s},replace:!0})},cx={black:"#000",white:"#fff"},om={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},lm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},cm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},dm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},um={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Dh={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},GU={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Vl(t,...s){const a=new URL(`https://mui.com/production-error/?code=${t}`);return s.forEach(r=>a.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${a} for the full message.`}const Ui="$$material";function je(){return je=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)({}).hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},je.apply(null,arguments)}function KU(t){if(t.sheet)return t.sheet;for(var s=0;s<document.styleSheets.length;s++)if(document.styleSheets[s].ownerNode===t)return document.styleSheets[s]}function QU(t){var s=document.createElement("style");return s.setAttribute("data-emotion",t.key),t.nonce!==void 0&&s.setAttribute("nonce",t.nonce),s.appendChild(document.createTextNode("")),s.setAttribute("data-s",""),s}var ZU=(function(){function t(a){var r=this;this._insertTag=function(n){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(n,i),r.tags.push(n)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var s=t.prototype;return s.hydrate=function(r){r.forEach(this._insertTag)},s.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(QU(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var i=KU(n);try{i.insertRule(r,i.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},s.flush=function(){this.tags.forEach(function(r){var n;return(n=r.parentNode)==null?void 0:n.removeChild(r)}),this.tags=[],this.ctr=0},t})(),tn="-ms-",lb="-moz-",ua="-webkit-",S7="comm",H_="rule",W_="decl",XU="@import",C7="@keyframes",JU="@layer",eV=Math.abs,Zb=String.fromCharCode,tV=Object.assign;function sV(t,s){return Hr(t,0)^45?(((s<<2^Hr(t,0))<<2^Hr(t,1))<<2^Hr(t,2))<<2^Hr(t,3):0}function P7(t){return t.trim()}function aV(t,s){return(t=s.exec(t))?t[0]:t}function ma(t,s,a){return t.replace(s,a)}function sw(t,s){return t.indexOf(s)}function Hr(t,s){return t.charCodeAt(s)|0}function dx(t,s,a){return t.slice(s,a)}function Ao(t){return t.length}function Y_(t){return t.length}function U0(t,s){return s.push(t),t}function rV(t,s){return t.map(s).join("")}var Xb=1,Km=1,k7=0,qn=0,jr=0,bp="";function Jb(t,s,a,r,n,i,o){return{value:t,root:s,parent:a,type:r,props:n,children:i,line:Xb,column:Km,length:o,return:""}}function Rh(t,s){return tV(Jb("",null,null,"",null,null,0),t,{length:-t.length},s)}function nV(){return jr}function iV(){return jr=qn>0?Hr(bp,--qn):0,Km--,jr===10&&(Km=1,Xb--),jr}function ci(){return jr=qn<k7?Hr(bp,qn++):0,Km++,jr===10&&(Km=1,Xb++),jr}function Ko(){return Hr(bp,qn)}function Ay(){return qn}function Jx(t,s){return dx(bp,t,s)}function ux(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function E7(t){return Xb=Km=1,k7=Ao(bp=t),qn=0,[]}function T7(t){return bp="",t}function Iy(t){return P7(Jx(qn-1,aw(t===91?t+2:t===40?t+1:t)))}function oV(t){for(;(jr=Ko())&&jr<33;)ci();return ux(t)>2||ux(jr)>3?"":" "}function lV(t,s){for(;--s&&ci()&&!(jr<48||jr>102||jr>57&&jr<65||jr>70&&jr<97););return Jx(t,Ay()+(s<6&&Ko()==32&&ci()==32))}function aw(t){for(;ci();)switch(jr){case t:return qn;case 34:case 39:t!==34&&t!==39&&aw(jr);break;case 40:t===41&&aw(t);break;case 92:ci();break}return qn}function cV(t,s){for(;ci()&&t+jr!==57;)if(t+jr===84&&Ko()===47)break;return"/*"+Jx(s,qn-1)+"*"+Zb(t===47?t:ci())}function dV(t){for(;!ux(Ko());)ci();return Jx(t,qn)}function uV(t){return T7(Oy("",null,null,null,[""],t=E7(t),0,[0],t))}function Oy(t,s,a,r,n,i,o,l,c){for(var m=0,u=0,h=o,f=0,b=0,w=0,S=1,j=1,v=1,N=0,C="",P=n,E=i,M=r,T=C;j;)switch(w=N,N=ci()){case 40:if(w!=108&&Hr(T,h-1)==58){sw(T+=ma(Iy(N),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:T+=Iy(N);break;case 9:case 10:case 13:case 32:T+=oV(w);break;case 92:T+=lV(Ay()-1,7);continue;case 47:switch(Ko()){case 42:case 47:U0(mV(cV(ci(),Ay()),s,a),c);break;default:T+="/"}break;case 123*S:l[m++]=Ao(T)*v;case 125*S:case 59:case 0:switch(N){case 0:case 125:j=0;case 59+u:v==-1&&(T=ma(T,/\f/g,"")),b>0&&Ao(T)-h&&U0(b>32?RP(T+";",r,a,h-1):RP(ma(T," ","")+";",r,a,h-2),c);break;case 59:T+=";";default:if(U0(M=DP(T,s,a,m,u,n,l,C,P=[],E=[],h),i),N===123)if(u===0)Oy(T,s,M,M,P,i,h,l,E);else switch(f===99&&Hr(T,3)===110?100:f){case 100:case 108:case 109:case 115:Oy(t,M,M,r&&U0(DP(t,M,M,0,0,n,l,C,n,P=[],h),E),n,E,h,l,r?P:E);break;default:Oy(T,M,M,M,[""],E,0,l,E)}}m=u=b=0,S=v=1,C=T="",h=o;break;case 58:h=1+Ao(T),b=w;default:if(S<1){if(N==123)--S;else if(N==125&&S++==0&&iV()==125)continue}switch(T+=Zb(N),N*S){case 38:v=u>0?1:(T+="\f",-1);break;case 44:l[m++]=(Ao(T)-1)*v,v=1;break;case 64:Ko()===45&&(T+=Iy(ci())),f=Ko(),u=h=Ao(C=T+=dV(Ay())),N++;break;case 45:w===45&&Ao(T)==2&&(S=0)}}return i}function DP(t,s,a,r,n,i,o,l,c,m,u){for(var h=n-1,f=n===0?i:[""],b=Y_(f),w=0,S=0,j=0;w<r;++w)for(var v=0,N=dx(t,h+1,h=eV(S=o[w])),C=t;v<b;++v)(C=P7(S>0?f[v]+" "+N:ma(N,/&\f/g,f[v])))&&(c[j++]=C);return Jb(t,s,a,n===0?H_:l,c,m,u)}function mV(t,s,a){return Jb(t,s,a,S7,Zb(nV()),dx(t,2,-2),0)}function RP(t,s,a,r){return Jb(t,s,a,W_,dx(t,0,r),dx(t,r+1,-1),r)}function Bm(t,s){for(var a="",r=Y_(t),n=0;n<r;n++)a+=s(t[n],n,t,s)||"";return a}function pV(t,s,a,r){switch(t.type){case JU:if(t.children.length)break;case XU:case W_:return t.return=t.return||t.value;case S7:return"";case C7:return t.return=t.value+"{"+Bm(t.children,r)+"}";case H_:t.value=t.props.join(",")}return Ao(a=Bm(t.children,r))?t.return=t.value+"{"+a+"}":""}function hV(t){var s=Y_(t);return function(a,r,n,i){for(var o="",l=0;l<s;l++)o+=t[l](a,r,n,i)||"";return o}}function fV(t){return function(s){s.root||(s=s.return)&&t(s)}}function M7(t){var s=Object.create(null);return function(a){return s[a]===void 0&&(s[a]=t(a)),s[a]}}var xV=function(s,a,r){for(var n=0,i=0;n=i,i=Ko(),n===38&&i===12&&(a[r]=1),!ux(i);)ci();return Jx(s,qn)},gV=function(s,a){var r=-1,n=44;do switch(ux(n)){case 0:n===38&&Ko()===12&&(a[r]=1),s[r]+=xV(qn-1,a,r);break;case 2:s[r]+=Iy(n);break;case 4:if(n===44){s[++r]=Ko()===58?"&\f":"",a[r]=s[r].length;break}default:s[r]+=Zb(n)}while(n=ci());return s},yV=function(s,a){return T7(gV(E7(s),a))},AP=new WeakMap,bV=function(s){if(!(s.type!=="rule"||!s.parent||s.length<1)){for(var a=s.value,r=s.parent,n=s.column===r.column&&s.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(s.props.length===1&&a.charCodeAt(0)!==58&&!AP.get(r))&&!n){AP.set(s,!0);for(var i=[],o=yV(a,i),l=r.props,c=0,m=0;c<o.length;c++)for(var u=0;u<l.length;u++,m++)s.props[m]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},vV=function(s){if(s.type==="decl"){var a=s.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(s.return="",s.value="")}};function D7(t,s){switch(sV(t,s)){case 5103:return ua+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ua+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ua+t+lb+t+tn+t+t;case 6828:case 4268:return ua+t+tn+t+t;case 6165:return ua+t+tn+"flex-"+t+t;case 5187:return ua+t+ma(t,/(\w+).+(:[^]+)/,ua+"box-$1$2"+tn+"flex-$1$2")+t;case 5443:return ua+t+tn+"flex-item-"+ma(t,/flex-|-self/,"")+t;case 4675:return ua+t+tn+"flex-line-pack"+ma(t,/align-content|flex-|-self/,"")+t;case 5548:return ua+t+tn+ma(t,"shrink","negative")+t;case 5292:return ua+t+tn+ma(t,"basis","preferred-size")+t;case 6060:return ua+"box-"+ma(t,"-grow","")+ua+t+tn+ma(t,"grow","positive")+t;case 4554:return ua+ma(t,/([^-])(transform)/g,"$1"+ua+"$2")+t;case 6187:return ma(ma(ma(t,/(zoom-|grab)/,ua+"$1"),/(image-set)/,ua+"$1"),t,"")+t;case 5495:case 3959:return ma(t,/(image-set\([^]*)/,ua+"$1$`$1");case 4968:return ma(ma(t,/(.+:)(flex-)?(.*)/,ua+"box-pack:$3"+tn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ua+t+t;case 4095:case 3583:case 4068:case 2532:return ma(t,/(.+)-inline(.+)/,ua+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ao(t)-1-s>6)switch(Hr(t,s+1)){case 109:if(Hr(t,s+4)!==45)break;case 102:return ma(t,/(.+:)(.+)-([^]+)/,"$1"+ua+"$2-$3$1"+lb+(Hr(t,s+3)==108?"$3":"$2-$3"))+t;case 115:return~sw(t,"stretch")?D7(ma(t,"stretch","fill-available"),s)+t:t}break;case 4949:if(Hr(t,s+1)!==115)break;case 6444:switch(Hr(t,Ao(t)-3-(~sw(t,"!important")&&10))){case 107:return ma(t,":",":"+ua)+t;case 101:return ma(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ua+(Hr(t,14)===45?"inline-":"")+"box$3$1"+ua+"$2$3$1"+tn+"$2box$3")+t}break;case 5936:switch(Hr(t,s+11)){case 114:return ua+t+tn+ma(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ua+t+tn+ma(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ua+t+tn+ma(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ua+t+tn+t+t}return t}var jV=function(s,a,r,n){if(s.length>-1&&!s.return)switch(s.type){case W_:s.return=D7(s.value,s.length);break;case C7:return Bm([Rh(s,{value:ma(s.value,"@","@"+ua)})],n);case H_:if(s.length)return rV(s.props,function(i){switch(aV(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Bm([Rh(s,{props:[ma(i,/:(read-\w+)/,":"+lb+"$1")]})],n);case"::placeholder":return Bm([Rh(s,{props:[ma(i,/:(plac\w+)/,":"+ua+"input-$1")]}),Rh(s,{props:[ma(i,/:(plac\w+)/,":"+lb+"$1")]}),Rh(s,{props:[ma(i,/:(plac\w+)/,tn+"input-$1")]})],n)}return""})}},NV=[jV],wV=function(s){var a=s.key;if(a==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(S){var j=S.getAttribute("data-emotion");j.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var n=s.stylisPlugins||NV,i={},o,l=[];o=s.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(S){for(var j=S.getAttribute("data-emotion").split(" "),v=1;v<j.length;v++)i[j[v]]=!0;l.push(S)});var c,m=[bV,vV];{var u,h=[pV,fV(function(S){u.insert(S)})],f=hV(m.concat(n,h)),b=function(j){return Bm(uV(j),f)};c=function(j,v,N,C){u=N,b(j?j+"{"+v.styles+"}":v.styles),C&&(w.inserted[v.name]=!0)}}var w={key:a,sheet:new ZU({key:a,container:o,nonce:s.nonce,speedy:s.speedy,prepend:s.prepend,insertionPoint:s.insertionPoint}),nonce:s.nonce,inserted:i,registered:{},insert:c};return w.sheet.hydrate(l),w},I2={exports:{}},fa={};var IP;function _V(){if(IP)return fa;IP=1;var t=typeof Symbol=="function"&&Symbol.for,s=t?Symbol.for("react.element"):60103,a=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,n=t?Symbol.for("react.strict_mode"):60108,i=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,m=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,f=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,w=t?Symbol.for("react.lazy"):60116,S=t?Symbol.for("react.block"):60121,j=t?Symbol.for("react.fundamental"):60117,v=t?Symbol.for("react.responder"):60118,N=t?Symbol.for("react.scope"):60119;function C(E){if(typeof E=="object"&&E!==null){var M=E.$$typeof;switch(M){case s:switch(E=E.type,E){case c:case m:case r:case i:case n:case h:return E;default:switch(E=E&&E.$$typeof,E){case l:case u:case w:case b:case o:return E;default:return M}}case a:return M}}}function P(E){return C(E)===m}return fa.AsyncMode=c,fa.ConcurrentMode=m,fa.ContextConsumer=l,fa.ContextProvider=o,fa.Element=s,fa.ForwardRef=u,fa.Fragment=r,fa.Lazy=w,fa.Memo=b,fa.Portal=a,fa.Profiler=i,fa.StrictMode=n,fa.Suspense=h,fa.isAsyncMode=function(E){return P(E)||C(E)===c},fa.isConcurrentMode=P,fa.isContextConsumer=function(E){return C(E)===l},fa.isContextProvider=function(E){return C(E)===o},fa.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===s},fa.isForwardRef=function(E){return C(E)===u},fa.isFragment=function(E){return C(E)===r},fa.isLazy=function(E){return C(E)===w},fa.isMemo=function(E){return C(E)===b},fa.isPortal=function(E){return C(E)===a},fa.isProfiler=function(E){return C(E)===i},fa.isStrictMode=function(E){return C(E)===n},fa.isSuspense=function(E){return C(E)===h},fa.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===r||E===m||E===i||E===n||E===h||E===f||typeof E=="object"&&E!==null&&(E.$$typeof===w||E.$$typeof===b||E.$$typeof===o||E.$$typeof===l||E.$$typeof===u||E.$$typeof===j||E.$$typeof===v||E.$$typeof===N||E.$$typeof===S)},fa.typeOf=C,fa}var OP;function SV(){return OP||(OP=1,I2.exports=_V()),I2.exports}var O2,FP;function CV(){if(FP)return O2;FP=1;var t=SV(),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[t.ForwardRef]=r,i[t.Memo]=n;function o(w){return t.isMemo(w)?n:i[w.$$typeof]||s}var l=Object.defineProperty,c=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;function b(w,S,j){if(typeof S!="string"){if(f){var v=h(S);v&&v!==f&&b(w,v,j)}var N=c(S);m&&(N=N.concat(m(S)));for(var C=o(w),P=o(S),E=0;E<N.length;++E){var M=N[E];if(!a[M]&&!(j&&j[M])&&!(P&&P[M])&&!(C&&C[M])){var T=u(S,M);try{l(w,M,T)}catch{}}}}return w}return O2=b,O2}CV();var PV=!0;function R7(t,s,a){var r="";return a.split(" ").forEach(function(n){t[n]!==void 0?s.push(t[n]+";"):n&&(r+=n+" ")}),r}var G_=function(s,a,r){var n=s.key+"-"+a.name;(r===!1||PV===!1)&&s.registered[n]===void 0&&(s.registered[n]=a.styles)},K_=function(s,a,r){G_(s,a,r);var n=s.key+"-"+a.name;if(s.inserted[a.name]===void 0){var i=a;do s.insert(a===i?"."+n:"",i,s.sheet,!0),i=i.next;while(i!==void 0)}};function kV(t){for(var s=0,a,r=0,n=t.length;n>=4;++r,n-=4)a=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,s=(a&65535)*1540483477+((a>>>16)*59797<<16)^(s&65535)*1540483477+((s>>>16)*59797<<16);switch(n){case 3:s^=(t.charCodeAt(r+2)&255)<<16;case 2:s^=(t.charCodeAt(r+1)&255)<<8;case 1:s^=t.charCodeAt(r)&255,s=(s&65535)*1540483477+((s>>>16)*59797<<16)}return s^=s>>>13,s=(s&65535)*1540483477+((s>>>16)*59797<<16),((s^s>>>15)>>>0).toString(36)}var EV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},TV=/[A-Z]|^ms/g,MV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,A7=function(s){return s.charCodeAt(1)===45},LP=function(s){return s!=null&&typeof s!="boolean"},F2=M7(function(t){return A7(t)?t:t.replace(TV,"-$&").toLowerCase()}),$P=function(s,a){switch(s){case"animation":case"animationName":if(typeof a=="string")return a.replace(MV,function(r,n,i){return Io={name:n,styles:i,next:Io},n})}return EV[s]!==1&&!A7(s)&&typeof a=="number"&&a!==0?a+"px":a};function mx(t,s,a){if(a==null)return"";var r=a;if(r.__emotion_styles!==void 0)return r;switch(typeof a){case"boolean":return"";case"object":{var n=a;if(n.anim===1)return Io={name:n.name,styles:n.styles,next:Io},n.name;var i=a;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Io={name:o.name,styles:o.styles,next:Io},o=o.next;var l=i.styles+";";return l}return DV(t,s,a)}case"function":{if(t!==void 0){var c=Io,m=a(t);return Io=c,mx(t,s,m)}break}}var u=a;if(s==null)return u;var h=s[u];return h!==void 0?h:u}function DV(t,s,a){var r="";if(Array.isArray(a))for(var n=0;n<a.length;n++)r+=mx(t,s,a[n])+";";else for(var i in a){var o=a[i];if(typeof o!="object"){var l=o;s!=null&&s[l]!==void 0?r+=i+"{"+s[l]+"}":LP(l)&&(r+=F2(i)+":"+$P(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(s==null||s[o[0]]===void 0))for(var c=0;c<o.length;c++)LP(o[c])&&(r+=F2(i)+":"+$P(i,o[c])+";");else{var m=mx(t,s,o);switch(i){case"animation":case"animationName":{r+=F2(i)+":"+m+";";break}default:r+=i+"{"+m+"}"}}}return r}var zP=/label:\s*([^\s;{]+)\s*(;|$)/g,Io;function eg(t,s,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,n="";Io=void 0;var i=t[0];if(i==null||i.raw===void 0)r=!1,n+=mx(a,s,i);else{var o=i;n+=o[0]}for(var l=1;l<t.length;l++)if(n+=mx(a,s,t[l]),r){var c=i;n+=c[l]}zP.lastIndex=0;for(var m="",u;(u=zP.exec(n))!==null;)m+="-"+u[1];var h=kV(n)+m;return{name:h,styles:n,next:Io}}var RV=function(s){return s()},I7=rx.useInsertionEffect?rx.useInsertionEffect:!1,O7=I7||RV,qP=I7||g.useLayoutEffect,F7=g.createContext(typeof HTMLElement<"u"?wV({key:"css"}):null);F7.Provider;var Q_=function(s){return g.forwardRef(function(a,r){var n=g.useContext(F7);return s(a,n,r)})},tg=g.createContext({}),Z_={}.hasOwnProperty,rw="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",AV=function(s,a){var r={};for(var n in a)Z_.call(a,n)&&(r[n]=a[n]);return r[rw]=s,r},IV=function(s){var a=s.cache,r=s.serialized,n=s.isStringTag;return G_(a,r,n),O7(function(){return K_(a,r,n)}),null},OV=Q_(function(t,s,a){var r=t.css;typeof r=="string"&&s.registered[r]!==void 0&&(r=s.registered[r]);var n=t[rw],i=[r],o="";typeof t.className=="string"?o=R7(s.registered,i,t.className):t.className!=null&&(o=t.className+" ");var l=eg(i,void 0,g.useContext(tg));o+=s.key+"-"+l.name;var c={};for(var m in t)Z_.call(t,m)&&m!=="css"&&m!==rw&&(c[m]=t[m]);return c.className=o,a&&(c.ref=a),g.createElement(g.Fragment,null,g.createElement(IV,{cache:s,serialized:l,isStringTag:typeof n=="string"}),g.createElement(n,c))}),FV=OV,BP=function(s,a){var r=arguments;if(a==null||!Z_.call(a,"css"))return g.createElement.apply(void 0,r);var n=r.length,i=new Array(n);i[0]=FV,i[1]=AV(s,a);for(var o=2;o<n;o++)i[o]=r[o];return g.createElement.apply(null,i)};(function(t){var s;s||(s=t.JSX||(t.JSX={}))})(BP||(BP={}));var LV=Q_(function(t,s){var a=t.styles,r=eg([a],void 0,g.useContext(tg)),n=g.useRef();return qP(function(){var i=s.key+"-global",o=new s.sheet.constructor({key:i,nonce:s.sheet.nonce,container:s.sheet.container,speedy:s.sheet.isSpeedy}),l=!1,c=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return s.sheet.tags.length&&(o.before=s.sheet.tags[0]),c!==null&&(l=!0,c.setAttribute("data-emotion",i),o.hydrate([c])),n.current=[o,l],function(){o.flush()}},[s]),qP(function(){var i=n.current,o=i[0],l=i[1];if(l){i[1]=!1;return}if(r.next!==void 0&&K_(s,r.next,!0),o.tags.length){var c=o.tags[o.tags.length-1].nextElementSibling;o.before=c,o.flush()}s.insert("",r,o,!1)},[s,r.name]),null});function Jc(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return eg(s)}function al(){var t=Jc.apply(void 0,arguments),s="animation-"+t.name;return{name:s,styles:"@keyframes "+s+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var $V=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,zV=M7(function(t){return $V.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),qV=zV,BV=function(s){return s!=="theme"},UP=function(s){return typeof s=="string"&&s.charCodeAt(0)>96?qV:BV},VP=function(s,a,r){var n;if(a){var i=a.shouldForwardProp;n=s.__emotion_forwardProp&&i?function(o){return s.__emotion_forwardProp(o)&&i(o)}:i}return typeof n!="function"&&r&&(n=s.__emotion_forwardProp),n},UV=function(s){var a=s.cache,r=s.serialized,n=s.isStringTag;return G_(a,r,n),O7(function(){return K_(a,r,n)}),null},VV=function t(s,a){var r=s.__emotion_real===s,n=r&&s.__emotion_base||s,i,o;a!==void 0&&(i=a.label,o=a.target);var l=VP(s,a,r),c=l||UP(n),m=!c("as");return function(){var u=arguments,h=r&&s.__emotion_styles!==void 0?s.__emotion_styles.slice(0):[];if(i!==void 0&&h.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{var f=u[0];h.push(f[0]);for(var b=u.length,w=1;w<b;w++)h.push(u[w],f[w])}var S=Q_(function(j,v,N){var C=m&&j.as||n,P="",E=[],M=j;if(j.theme==null){M={};for(var T in j)M[T]=j[T];M.theme=g.useContext(tg)}typeof j.className=="string"?P=R7(v.registered,E,j.className):j.className!=null&&(P=j.className+" ");var A=eg(h.concat(E),v.registered,M);P+=v.key+"-"+A.name,o!==void 0&&(P+=" "+o);var L=m&&l===void 0?UP(C):c,F={};for(var z in j)m&&z==="as"||L(z)&&(F[z]=j[z]);return F.className=P,N&&(F.ref=N),g.createElement(g.Fragment,null,g.createElement(UV,{cache:v,serialized:A,isStringTag:typeof C=="string"}),g.createElement(C,F))});return S.displayName=i!==void 0?i:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",S.defaultProps=s.defaultProps,S.__emotion_real=S,S.__emotion_base=n,S.__emotion_styles=h,S.__emotion_forwardProp=l,Object.defineProperty(S,"toString",{value:function(){return"."+o}}),S.withComponent=function(j,v){var N=t(j,je({},a,v,{shouldForwardProp:VP(S,v,!0)}));return N.apply(void 0,h)},S}},HV=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],nw=VV.bind(null);HV.forEach(function(t){nw[t]=nw(t)});var L2={exports:{}},$2,HP;function WV(){if(HP)return $2;HP=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return $2=t,$2}var z2,WP;function YV(){if(WP)return z2;WP=1;var t=WV();function s(){}function a(){}return a.resetWarningCache=s,z2=function(){function r(o,l,c,m,u,h){if(h!==t){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function n(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:n,element:r,elementType:r,instanceOf:n,node:r,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:a,resetWarningCache:s};return i.PropTypes=i,i},z2}var YP;function GV(){return YP||(YP=1,L2.exports=YV()()),L2.exports}var KV=GV();const re=Ji(KV);function QV(t){return t==null||Object.keys(t).length===0}function L7(t){const{styles:s,defaultTheme:a={}}=t,r=typeof s=="function"?n=>s(QV(n)?a:n):s;return e.jsx(LV,{styles:r})}function $7(t,s){return nw(t,s)}function ZV(t,s){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=s(t.__emotion_styles))}const GP=[];function Lc(t){return GP[0]=t,eg(GP)}var q2={exports:{}},Ta={};var KP;function XV(){if(KP)return Ta;KP=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function w(S){if(typeof S=="object"&&S!==null){var j=S.$$typeof;switch(j){case t:switch(S=S.type,S){case a:case n:case r:case c:case m:case f:return S;default:switch(S=S&&S.$$typeof,S){case o:case l:case h:case u:return S;case i:return S;default:return j}}case s:return j}}}return Ta.ContextConsumer=i,Ta.ContextProvider=o,Ta.Element=t,Ta.ForwardRef=l,Ta.Fragment=a,Ta.Lazy=h,Ta.Memo=u,Ta.Portal=s,Ta.Profiler=n,Ta.StrictMode=r,Ta.Suspense=c,Ta.SuspenseList=m,Ta.isContextConsumer=function(S){return w(S)===i},Ta.isContextProvider=function(S){return w(S)===o},Ta.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},Ta.isForwardRef=function(S){return w(S)===l},Ta.isFragment=function(S){return w(S)===a},Ta.isLazy=function(S){return w(S)===h},Ta.isMemo=function(S){return w(S)===u},Ta.isPortal=function(S){return w(S)===s},Ta.isProfiler=function(S){return w(S)===n},Ta.isStrictMode=function(S){return w(S)===r},Ta.isSuspense=function(S){return w(S)===c},Ta.isSuspenseList=function(S){return w(S)===m},Ta.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===a||S===n||S===r||S===c||S===m||typeof S=="object"&&S!==null&&(S.$$typeof===h||S.$$typeof===u||S.$$typeof===o||S.$$typeof===i||S.$$typeof===l||S.$$typeof===b||S.getModuleId!==void 0)},Ta.typeOf=w,Ta}var QP;function JV(){return QP||(QP=1,q2.exports=XV()),q2.exports}var z7=JV();function Lo(t){if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function q7(t){if(g.isValidElement(t)||z7.isValidElementType(t)||!Lo(t))return t;const s={};return Object.keys(t).forEach(a=>{s[a]=q7(t[a])}),s}function dn(t,s,a={clone:!0}){const r=a.clone?{...t}:t;return Lo(t)&&Lo(s)&&Object.keys(s).forEach(n=>{g.isValidElement(s[n])||z7.isValidElementType(s[n])?r[n]=s[n]:Lo(s[n])&&Object.prototype.hasOwnProperty.call(t,n)&&Lo(t[n])?r[n]=dn(t[n],s[n],a):a.clone?r[n]=Lo(s[n])?q7(s[n]):s[n]:r[n]=s[n]}),r}const eH=t=>{const s=Object.keys(t).map(a=>({key:a,val:t[a]}))||[];return s.sort((a,r)=>a.val-r.val),s.reduce((a,r)=>({...a,[r.key]:r.val}),{})};function tH(t){const{values:s={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:r=5,...n}=t,i=eH(s),o=Object.keys(i);function l(f){return`@media (min-width:${typeof s[f]=="number"?s[f]:f}${a})`}function c(f){return`@media (max-width:${(typeof s[f]=="number"?s[f]:f)-r/100}${a})`}function m(f,b){const w=o.indexOf(b);return`@media (min-width:${typeof s[f]=="number"?s[f]:f}${a}) and (max-width:${(w!==-1&&typeof s[o[w]]=="number"?s[o[w]]:b)-r/100}${a})`}function u(f){return o.indexOf(f)+1<o.length?m(f,o[o.indexOf(f)+1]):l(f)}function h(f){const b=o.indexOf(f);return b===0?l(o[1]):b===o.length-1?c(o[b]):m(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:m,only:u,not:h,unit:a,...n}}function ZP(t,s){if(!t.containerQueries)return s;const a=Object.keys(s).filter(r=>r.startsWith("@container")).sort((r,n)=>{const i=/min-width:\s*([0-9.]+)/;return+(r.match(i)?.[1]||0)-+(n.match(i)?.[1]||0)});return a.length?a.reduce((r,n)=>{const i=s[n];return delete r[n],r[n]=i,r},{...s}):s}function sH(t,s){return s==="@"||s.startsWith("@")&&(t.some(a=>s.startsWith(`@${a}`))||!!s.match(/^@\d/))}function aH(t,s){const a=s.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,r,n]=a,i=Number.isNaN(+r)?r||0:+r;return t.containerQueries(n).up(i)}function rH(t){const s=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function a(i,o){i.up=(...l)=>s(t.breakpoints.up(...l),o),i.down=(...l)=>s(t.breakpoints.down(...l),o),i.between=(...l)=>s(t.breakpoints.between(...l),o),i.only=(...l)=>s(t.breakpoints.only(...l),o),i.not=(...l)=>{const c=s(t.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const r={},n=i=>(a(r,i),r);return a(n),{...t,containerQueries:n}}const nH={borderRadius:4};function zf(t,s){return s?dn(t,s,{clone:!1}):t}const ev={xs:0,sm:600,md:900,lg:1200,xl:1536},XP={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${ev[t]}px)`},iH={containerQueries:t=>({up:s=>{let a=typeof s=="number"?s:ev[s]||s;return typeof a=="number"&&(a=`${a}px`),t?`@container ${t} (min-width:${a})`:`@container (min-width:${a})`}})};function Hl(t,s,a){const r=t.theme||{};if(Array.isArray(s)){const i=r.breakpoints||XP;return s.reduce((o,l,c)=>(o[i.up(i.keys[c])]=a(s[c]),o),{})}if(typeof s=="object"){const i=r.breakpoints||XP;return Object.keys(s).reduce((o,l)=>{if(sH(i.keys,l)){const c=aH(r.containerQueries?r:iH,l);c&&(o[c]=a(s[l],l))}else if(Object.keys(i.values||ev).includes(l)){const c=i.up(l);o[c]=a(s[l],l)}else{const c=l;o[c]=s[c]}return o},{})}return a(s)}function oH(t={}){return t.keys?.reduce((a,r)=>{const n=t.up(r);return a[n]={},a},{})||{}}function JP(t,s){return t.reduce((a,r)=>{const n=a[r];return(!n||Object.keys(n).length===0)&&delete a[r],a},s)}function Xe(t){if(typeof t!="string")throw new Error(Vl(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Oo(t,s,a=!0){if(!s||typeof s!="string")return null;if(t&&t.vars&&a){const r=`vars.${s}`.split(".").reduce((n,i)=>n&&n[i]?n[i]:null,t);if(r!=null)return r}return s.split(".").reduce((r,n)=>r&&r[n]!=null?r[n]:null,t)}function cb(t,s,a,r=a){let n;return typeof t=="function"?n=t(a):Array.isArray(t)?n=t[a]||r:n=Oo(t,a)||r,s&&(n=s(n,r,t)),n}function gr(t){const{prop:s,cssProperty:a=t.prop,themeKey:r,transform:n}=t,i=o=>{if(o[s]==null)return null;const l=o[s],c=o.theme,m=Oo(c,r)||{};return Hl(o,l,h=>{let f=cb(m,n,h);return h===f&&typeof h=="string"&&(f=cb(m,n,`${s}${h==="default"?"":Xe(h)}`,h)),a===!1?f:{[a]:f}})};return i.propTypes={},i.filterProps=[s],i}function lH(t){const s={};return a=>(s[a]===void 0&&(s[a]=t(a)),s[a])}const cH={m:"margin",p:"padding"},dH={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ek={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},uH=lH(t=>{if(t.length>2)if(ek[t])t=ek[t];else return[t];const[s,a]=t.split(""),r=cH[s],n=dH[a]||"";return Array.isArray(n)?n.map(i=>r+i):[r+n]}),X_=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],J_=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...X_,...J_];function sg(t,s,a,r){const n=Oo(t,s,!0)??a;return typeof n=="number"||typeof n=="string"?i=>typeof i=="string"?i:typeof n=="string"?n.startsWith("var(")&&i===0?0:n.startsWith("var(")&&i===1?n:`calc(${i} * ${n})`:n*i:Array.isArray(n)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=n[o];return i>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof n=="function"?n:()=>{}}function e4(t){return sg(t,"spacing",8)}function ag(t,s){return typeof s=="string"||s==null?s:t(s)}function mH(t,s){return a=>t.reduce((r,n)=>(r[n]=ag(s,a),r),{})}function pH(t,s,a,r){if(!s.includes(a))return null;const n=uH(a),i=mH(n,r),o=t[a];return Hl(t,o,i)}function B7(t,s){const a=e4(t.theme);return Object.keys(t).map(r=>pH(t,s,r,a)).reduce(zf,{})}function tr(t){return B7(t,X_)}tr.propTypes={};tr.filterProps=X_;function sr(t){return B7(t,J_)}sr.propTypes={};sr.filterProps=J_;function U7(t=8,s=e4({spacing:t})){if(t.mui)return t;const a=(...r)=>(r.length===0?[1]:r).map(i=>{const o=s(i);return typeof o=="number"?`${o}px`:o}).join(" ");return a.mui=!0,a}function tv(...t){const s=t.reduce((r,n)=>(n.filterProps.forEach(i=>{r[i]=n}),r),{}),a=r=>Object.keys(r).reduce((n,i)=>s[i]?zf(n,s[i](r)):n,{});return a.propTypes={},a.filterProps=t.reduce((r,n)=>r.concat(n.filterProps),[]),a}function Fi(t){return typeof t!="number"?t:`${t}px solid`}function to(t,s){return gr({prop:t,themeKey:"borders",transform:s})}const hH=to("border",Fi),fH=to("borderTop",Fi),xH=to("borderRight",Fi),gH=to("borderBottom",Fi),yH=to("borderLeft",Fi),bH=to("borderColor"),vH=to("borderTopColor"),jH=to("borderRightColor"),NH=to("borderBottomColor"),wH=to("borderLeftColor"),_H=to("outline",Fi),SH=to("outlineColor"),sv=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const s=sg(t.theme,"shape.borderRadius",4),a=r=>({borderRadius:ag(s,r)});return Hl(t,t.borderRadius,a)}return null};sv.propTypes={};sv.filterProps=["borderRadius"];tv(hH,fH,xH,gH,yH,bH,vH,jH,NH,wH,sv,_H,SH);const av=t=>{if(t.gap!==void 0&&t.gap!==null){const s=sg(t.theme,"spacing",8),a=r=>({gap:ag(s,r)});return Hl(t,t.gap,a)}return null};av.propTypes={};av.filterProps=["gap"];const rv=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const s=sg(t.theme,"spacing",8),a=r=>({columnGap:ag(s,r)});return Hl(t,t.columnGap,a)}return null};rv.propTypes={};rv.filterProps=["columnGap"];const nv=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const s=sg(t.theme,"spacing",8),a=r=>({rowGap:ag(s,r)});return Hl(t,t.rowGap,a)}return null};nv.propTypes={};nv.filterProps=["rowGap"];const CH=gr({prop:"gridColumn"}),PH=gr({prop:"gridRow"}),kH=gr({prop:"gridAutoFlow"}),EH=gr({prop:"gridAutoColumns"}),TH=gr({prop:"gridAutoRows"}),MH=gr({prop:"gridTemplateColumns"}),DH=gr({prop:"gridTemplateRows"}),RH=gr({prop:"gridTemplateAreas"}),AH=gr({prop:"gridArea"});tv(av,rv,nv,CH,PH,kH,EH,TH,MH,DH,RH,AH);function Um(t,s){return s==="grey"?s:t}const IH=gr({prop:"color",themeKey:"palette",transform:Um}),OH=gr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Um}),FH=gr({prop:"backgroundColor",themeKey:"palette",transform:Um});tv(IH,OH,FH);function ri(t){return t<=1&&t!==0?`${t*100}%`:t}const LH=gr({prop:"width",transform:ri}),t4=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const s=a=>{const r=t.theme?.breakpoints?.values?.[a]||ev[a];return r?t.theme?.breakpoints?.unit!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:ri(a)}};return Hl(t,t.maxWidth,s)}return null};t4.filterProps=["maxWidth"];const $H=gr({prop:"minWidth",transform:ri}),zH=gr({prop:"height",transform:ri}),qH=gr({prop:"maxHeight",transform:ri}),BH=gr({prop:"minHeight",transform:ri});gr({prop:"size",cssProperty:"width",transform:ri});gr({prop:"size",cssProperty:"height",transform:ri});const UH=gr({prop:"boxSizing"});tv(LH,t4,$H,zH,qH,BH,UH);const rg={border:{themeKey:"borders",transform:Fi},borderTop:{themeKey:"borders",transform:Fi},borderRight:{themeKey:"borders",transform:Fi},borderBottom:{themeKey:"borders",transform:Fi},borderLeft:{themeKey:"borders",transform:Fi},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Fi},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:sv},color:{themeKey:"palette",transform:Um},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Um},backgroundColor:{themeKey:"palette",transform:Um},p:{style:sr},pt:{style:sr},pr:{style:sr},pb:{style:sr},pl:{style:sr},px:{style:sr},py:{style:sr},padding:{style:sr},paddingTop:{style:sr},paddingRight:{style:sr},paddingBottom:{style:sr},paddingLeft:{style:sr},paddingX:{style:sr},paddingY:{style:sr},paddingInline:{style:sr},paddingInlineStart:{style:sr},paddingInlineEnd:{style:sr},paddingBlock:{style:sr},paddingBlockStart:{style:sr},paddingBlockEnd:{style:sr},m:{style:tr},mt:{style:tr},mr:{style:tr},mb:{style:tr},ml:{style:tr},mx:{style:tr},my:{style:tr},margin:{style:tr},marginTop:{style:tr},marginRight:{style:tr},marginBottom:{style:tr},marginLeft:{style:tr},marginX:{style:tr},marginY:{style:tr},marginInline:{style:tr},marginInlineStart:{style:tr},marginInlineEnd:{style:tr},marginBlock:{style:tr},marginBlockStart:{style:tr},marginBlockEnd:{style:tr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:av},rowGap:{style:nv},columnGap:{style:rv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ri},maxWidth:{style:t4},minWidth:{transform:ri},height:{transform:ri},maxHeight:{transform:ri},minHeight:{transform:ri},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function VH(...t){const s=t.reduce((r,n)=>r.concat(Object.keys(n)),[]),a=new Set(s);return t.every(r=>a.size===Object.keys(r).length)}function HH(t,s){return typeof t=="function"?t(s):t}function WH(){function t(a,r,n,i){const o={[a]:r,theme:n},l=i[a];if(!l)return{[a]:r};const{cssProperty:c=a,themeKey:m,transform:u,style:h}=l;if(r==null)return null;if(m==="typography"&&r==="inherit")return{[a]:r};const f=Oo(n,m)||{};return h?h(o):Hl(o,r,w=>{let S=cb(f,u,w);return w===S&&typeof w=="string"&&(S=cb(f,u,`${a}${w==="default"?"":Xe(w)}`,w)),c===!1?S:{[c]:S}})}function s(a){const{sx:r,theme:n={},nested:i}=a||{};if(!r)return null;const o=n.unstable_sxConfig??rg;function l(c){let m=c;if(typeof c=="function")m=c(n);else if(typeof c!="object")return c;if(!m)return null;const u=oH(n.breakpoints),h=Object.keys(u);let f=u;return Object.keys(m).forEach(b=>{const w=HH(m[b],n);if(w!=null)if(typeof w=="object")if(o[b])f=zf(f,t(b,w,n,o));else{const S=Hl({theme:n},w,j=>({[b]:j}));VH(S,w)?f[b]=s({sx:w,theme:n,nested:!0}):f=zf(f,S)}else f=zf(f,t(b,w,n,o))}),!i&&n.modularCssLayers?{"@layer sx":ZP(n,JP(h,f))}:ZP(n,JP(h,f))}return Array.isArray(r)?r.map(l):l(r)}return s}const Hc=WH();Hc.filterProps=["sx"];function YH(t,s){const a=this;if(a.vars){if(!a.colorSchemes?.[t]||typeof a.getColorSchemeSelector!="function")return{};let r=a.getColorSchemeSelector(t);return r==="&"?s:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:s})}return a.palette.mode===t?s:{}}function s4(t={},...s){const{breakpoints:a={},palette:r={},spacing:n,shape:i={},...o}=t,l=tH(a),c=U7(n);let m=dn({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:c,shape:{...nH,...i}},o);return m=rH(m),m.applyStyles=YH,m=s.reduce((u,h)=>dn(u,h),m),m.unstable_sxConfig={...rg,...o?.unstable_sxConfig},m.unstable_sx=function(h){return Hc({sx:h,theme:this})},m}function GH(t){return Object.keys(t).length===0}function iv(t=null){const s=g.useContext(tg);return!s||GH(s)?t:s}const KH=s4();function ov(t=KH){return iv(t)}function B2(t){const s=Lc(t);return t!==s&&s.styles?(s.styles.match(/^@layer\s+[^{]*$/)||(s.styles=`@layer global{${s.styles}}`),s):t}function V7({styles:t,themeId:s,defaultTheme:a={}}){const r=ov(a),n=s&&r[s]||r;let i=typeof t=="function"?t(n):t;return n.modularCssLayers&&(Array.isArray(i)?i=i.map(o=>B2(typeof o=="function"?o(n):o)):i=B2(i)),e.jsx(L7,{styles:i})}const QH=t=>{const s={systemProps:{},otherProps:{}},a=t?.theme?.unstable_sxConfig??rg;return Object.keys(t).forEach(r=>{a[r]?s.systemProps[r]=t[r]:s.otherProps[r]=t[r]}),s};function H7(t){const{sx:s,...a}=t,{systemProps:r,otherProps:n}=QH(a);let i;return Array.isArray(s)?i=[r,...s]:typeof s=="function"?i=(...o)=>{const l=s(...o);return Lo(l)?{...r,...l}:r}:i={...r,...s},{...n,sx:i}}const tk=t=>t,ZH=()=>{let t=tk;return{configure(s){t=s},generate(s){return t(s)},reset(){t=tk}}},W7=ZH();function Y7(t){var s,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(a=Y7(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function et(){for(var t,s,a=0,r="",n=arguments.length;a<n;a++)(t=arguments[a])&&(s=Y7(t))&&(r&&(r+=" "),r+=s);return r}function XH(t={}){const{themeId:s,defaultTheme:a,defaultClassName:r="MuiBox-root",generateClassName:n}=t,i=$7("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(Hc);return g.forwardRef(function(c,m){const u=ov(a),{className:h,component:f="div",...b}=H7(c);return e.jsx(i,{as:f,ref:m,className:et(h,n?n(r):r),theme:s&&u[s]||u,...b})})}const JH={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Dt(t,s,a="Mui"){const r=JH[s];return r?`${a}-${r}`:`${W7.generate(t)}-${s}`}function Tt(t,s,a="Mui"){const r={};return s.forEach(n=>{r[n]=Dt(t,n,a)}),r}function G7(t){const{variants:s,...a}=t,r={variants:s,style:Lc(a),isProcessed:!0};return r.style===a||s&&s.forEach(n=>{typeof n.style!="function"&&(n.style=Lc(n.style))}),r}const eW=s4();function In(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function Ud(t,s){return s&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${s}{${String(t.styles)}}`),t}function tW(t){return t?(s,a)=>a[t]:null}function sW(t,s,a){t.theme=nW(t.theme)?a:t.theme[s]||t.theme}function Fy(t,s,a){const r=typeof s=="function"?s(t):s;if(Array.isArray(r))return r.flatMap(n=>Fy(t,n,a));if(Array.isArray(r?.variants)){let n;if(r.isProcessed)n=a?Ud(r.style,a):r.style;else{const{variants:i,...o}=r;n=a?Ud(Lc(o),a):o}return K7(t,r.variants,[n],a)}return r?.isProcessed?a?Ud(Lc(r.style),a):r.style:a?Ud(Lc(r),a):r}function K7(t,s,a=[],r=void 0){let n;e:for(let i=0;i<s.length;i+=1){const o=s[i];if(typeof o.props=="function"){if(n??={...t,...t.ownerState,ownerState:t.ownerState},!o.props(n))continue}else for(const l in o.props)if(t[l]!==o.props[l]&&t.ownerState?.[l]!==o.props[l])continue e;typeof o.style=="function"?(n??={...t,...t.ownerState,ownerState:t.ownerState},a.push(r?Ud(Lc(o.style(n)),r):o.style(n))):a.push(r?Ud(Lc(o.style),r):o.style)}return a}function aW(t={}){const{themeId:s,defaultTheme:a=eW,rootShouldForwardProp:r=In,slotShouldForwardProp:n=In}=t;function i(l){sW(l,s,a)}return(l,c={})=>{ZV(l,M=>M.filter(T=>T!==Hc));const{name:m,slot:u,skipVariantsResolver:h,skipSx:f,overridesResolver:b=tW(oW(u)),...w}=c,S=m&&m.startsWith("Mui")||u?"components":"custom",j=h!==void 0?h:u&&u!=="Root"&&u!=="root"||!1,v=f||!1;let N=In;u==="Root"||u==="root"?N=r:u?N=n:iW(l)&&(N=void 0);const C=$7(l,{shouldForwardProp:N,label:rW(),...w}),P=M=>{if(M.__emotion_real===M)return M;if(typeof M=="function")return function(A){return Fy(A,M,A.theme.modularCssLayers?S:void 0)};if(Lo(M)){const T=G7(M);return function(L){return T.variants?Fy(L,T,L.theme.modularCssLayers?S:void 0):L.theme.modularCssLayers?Ud(T.style,S):T.style}}return M},E=(...M)=>{const T=[],A=M.map(P),L=[];if(T.push(i),m&&b&&L.push(function(Q){const B=Q.theme.components?.[m]?.styleOverrides;if(!B)return null;const q={};for(const V in B)q[V]=Fy(Q,B[V],Q.theme.modularCssLayers?"theme":void 0);return b(Q,q)}),m&&!j&&L.push(function(Q){const B=Q.theme?.components?.[m]?.variants;return B?K7(Q,B,[],Q.theme.modularCssLayers?"theme":void 0):null}),v||L.push(Hc),Array.isArray(A[0])){const I=A.shift(),Q=new Array(T.length).fill(""),Y=new Array(L.length).fill("");let B;B=[...Q,...I,...Y],B.raw=[...Q,...I.raw,...Y],T.unshift(B)}const F=[...T,...A,...L],z=C(...F);return l.muiName&&(z.muiName=l.muiName),z};return C.withConfig&&(E.withConfig=C.withConfig),E}}function rW(t,s){return void 0}function nW(t){for(const s in t)return!1;return!0}function iW(t){return typeof t=="string"&&t.charCodeAt(0)>96}function oW(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function px(t,s,a=!1){const r={...s};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=n;if(i==="components"||i==="slots")r[i]={...t[i],...r[i]};else if(i==="componentsProps"||i==="slotProps"){const o=t[i],l=s[i];if(!l)r[i]=o||{};else if(!o)r[i]=l;else{r[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const m=c;r[i][m]=px(o[m],l[m],a)}}}else i==="className"&&a&&s.className?r.className=et(t?.className,s?.className):i==="style"&&a&&s.style?r.style={...t?.style,...s?.style}:r[i]===void 0&&(r[i]=t[i])}return r}function Q7(t){const{theme:s,name:a,props:r}=t;return!s||!s.components||!s.components[a]||!s.components[a].defaultProps?r:px(s.components[a].defaultProps,r)}function lW({props:t,name:s,defaultTheme:a,themeId:r}){let n=ov(a);return n=n[r]||n,Q7({theme:n,name:s,props:t})}const Ia=typeof window<"u"?g.useLayoutEffect:g.useEffect;function cW(t,s,a,r,n){const[i,o]=g.useState(()=>n&&a?a(t).matches:r?r(t).matches:s);return Ia(()=>{if(!a)return;const l=a(t),c=()=>{o(l.matches)};return c(),l.addEventListener("change",c),()=>{l.removeEventListener("change",c)}},[t,a]),i}const dW={...rx},Z7=dW.useSyncExternalStore;function uW(t,s,a,r,n){const i=g.useCallback(()=>s,[s]),o=g.useMemo(()=>{if(n&&a)return()=>a(t).matches;if(r!==null){const{matches:u}=r(t);return()=>u}return i},[i,t,r,n,a]),[l,c]=g.useMemo(()=>{if(a===null)return[i,()=>()=>{}];const u=a(t);return[()=>u.matches,h=>(u.addEventListener("change",h),()=>{u.removeEventListener("change",h)})]},[i,a,t]);return Z7(c,l,o)}function X7(t={}){const{themeId:s}=t;return function(r,n={}){let i=iv();i&&s&&(i=i[s]||i);const o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:c=o?window.matchMedia:null,ssrMatchMedia:m=null,noSsr:u=!1}=Q7({name:"MuiUseMediaQuery",props:n,theme:i});let h=typeof r=="function"?r(i):r;return h=h.replace(/^@media( ?)/m,""),h.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(Z7!==void 0?uW:cW)(h,l,c,m,u)}}X7();function mW(t,s=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(s,Math.min(t,a))}function a4(t,s=0,a=1){return mW(t,s,a)}function pW(t){t=t.slice(1);const s=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let a=t.match(s);return a&&a[0].length===1&&(a=a.map(r=>r+r)),a?`rgb${a.length===4?"a":""}(${a.map((r,n)=>n<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Wc(t){if(t.type)return t;if(t.charAt(0)==="#")return Wc(pW(t));const s=t.indexOf("("),a=t.substring(0,s);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(Vl(9,t));let r=t.substring(s+1,t.length-1),n;if(a==="color"){if(r=r.split(" "),n=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(n))throw new Error(Vl(10,n))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:a,values:r,colorSpace:n}}const hW=t=>{const s=Wc(t);return s.values.slice(0,3).map((a,r)=>s.type.includes("hsl")&&r!==0?`${a}%`:a).join(" ")},rf=(t,s)=>{try{return hW(t)}catch{return t}};function lv(t){const{type:s,colorSpace:a}=t;let{values:r}=t;return s.includes("rgb")?r=r.map((n,i)=>i<3?parseInt(n,10):n):s.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),s.includes("color")?r=`${a} ${r.join(" ")}`:r=`${r.join(", ")}`,`${s}(${r})`}function J7(t){t=Wc(t);const{values:s}=t,a=s[0],r=s[1]/100,n=s[2]/100,i=r*Math.min(n,1-n),o=(m,u=(m+a/30)%12)=>n-i*Math.max(Math.min(u-3,9-u,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(l+="a",c.push(s[3])),lv({type:l,values:c})}function iw(t){t=Wc(t);let s=t.type==="hsl"||t.type==="hsla"?Wc(J7(t)).values:t.values;return s=s.map(a=>(t.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*s[0]+.7152*s[1]+.0722*s[2]).toFixed(3))}function fW(t,s){const a=iw(t),r=iw(s);return(Math.max(a,r)+.05)/(Math.min(a,r)+.05)}function Nn(t,s){return t=Wc(t),s=a4(s),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${s}`:t.values[3]=s,lv(t)}function wd(t,s,a){try{return Nn(t,s)}catch{return t}}function cv(t,s){if(t=Wc(t),s=a4(s),t.type.includes("hsl"))t.values[2]*=1-s;else if(t.type.includes("rgb")||t.type.includes("color"))for(let a=0;a<3;a+=1)t.values[a]*=1-s;return lv(t)}function Na(t,s,a){try{return cv(t,s)}catch{return t}}function dv(t,s){if(t=Wc(t),s=a4(s),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*s;else if(t.type.includes("rgb"))for(let a=0;a<3;a+=1)t.values[a]+=(255-t.values[a])*s;else if(t.type.includes("color"))for(let a=0;a<3;a+=1)t.values[a]+=(1-t.values[a])*s;return lv(t)}function wa(t,s,a){try{return dv(t,s)}catch{return t}}function xW(t,s=.15){return iw(t)>.5?cv(t,s):dv(t,s)}function V0(t,s,a){try{return xW(t,s)}catch{return t}}const eR=g.createContext(null);function r4(){return g.useContext(eR)}const gW=typeof Symbol=="function"&&Symbol.for,yW=gW?Symbol.for("mui.nested"):"__THEME_NESTED__";function bW(t,s){return typeof s=="function"?s(t):{...t,...s}}function vW(t){const{children:s,theme:a}=t,r=r4(),n=g.useMemo(()=>{const i=r===null?{...a}:bW(r,a);return i!=null&&(i[yW]=r!==null),i},[a,r]);return e.jsx(eR.Provider,{value:n,children:s})}const tR=g.createContext();function jW({value:t,...s}){return e.jsx(tR.Provider,{value:t??!0,...s})}const $r=()=>g.useContext(tR)??!1,sR=g.createContext(void 0);function NW({value:t,children:s}){return e.jsx(sR.Provider,{value:t,children:s})}function wW(t){const{theme:s,name:a,props:r}=t;if(!s||!s.components||!s.components[a])return r;const n=s.components[a];return n.defaultProps?px(n.defaultProps,r,s.components.mergeClassNameAndStyle):!n.styleOverrides&&!n.variants?px(n,r,s.components.mergeClassNameAndStyle):r}function _W({props:t,name:s}){const a=g.useContext(sR);return wW({props:t,name:s,theme:{components:a}})}let sk=0;function SW(t){const[s,a]=g.useState(t),r=t||s;return g.useEffect(()=>{s==null&&(sk+=1,a(`mui-${sk}`))},[s]),r}const CW={...rx},ak=CW.useId;function wn(t){if(ak!==void 0){const s=ak();return t??s}return SW(t)}function PW(t){const s=iv(),a=wn()||"",{modularCssLayers:r}=t;let n="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!r||s!==null?n="":typeof r=="string"?n=r.replace(/mui(?!\.)/g,n):n=`@layer ${n};`,Ia(()=>{const i=document.querySelector("head");if(!i)return;const o=i.firstChild;if(n){if(o&&o.hasAttribute?.("data-mui-layer-order")&&o.getAttribute("data-mui-layer-order")===a)return;const l=document.createElement("style");l.setAttribute("data-mui-layer-order",a),l.textContent=n,i.prepend(l)}else i.querySelector(`style[data-mui-layer-order="${a}"]`)?.remove()},[n,a]),n?e.jsx(V7,{styles:n}):null}const rk={};function nk(t,s,a,r=!1){return g.useMemo(()=>{const n=t&&s[t]||s;if(typeof a=="function"){const i=a(n),o=t?{...s,[t]:i}:i;return r?()=>o:o}return t?{...s,[t]:a}:{...s,...a}},[t,s,a,r])}function aR(t){const{children:s,theme:a,themeId:r}=t,n=iv(rk),i=r4()||rk,o=nk(r,n,a),l=nk(r,i,a,!0),c=(r?o[r]:o).direction==="rtl",m=PW(o);return e.jsx(vW,{theme:l,children:e.jsx(tg.Provider,{value:o,children:e.jsx(jW,{value:c,children:e.jsxs(NW,{value:r?o[r].components:o.components,children:[m,s]})})})})}const ik={theme:void 0};function kW(t){let s,a;return function(n){let i=s;return(i===void 0||n.theme!==a)&&(ik.theme=n.theme,i=G7(t(ik)),s=i,a=n.theme),i}}const n4="mode",i4="color-scheme",EW="data-color-scheme";function TW(t){const{defaultMode:s="system",defaultLightColorScheme:a="light",defaultDarkColorScheme:r="dark",modeStorageKey:n=n4,colorSchemeStorageKey:i=i4,attribute:o=EW,colorSchemeNode:l="document.documentElement",nonce:c}=t||{};let m="",u=o;if(o==="class"&&(u=".%s"),o==="data"&&(u="[data-%s]"),u.startsWith(".")){const f=u.substring(1);m+=`${l}.classList.remove('${f}'.replace('%s', light), '${f}'.replace('%s', dark));
      ${l}.classList.add('${f}'.replace('%s', colorScheme));`}const h=u.match(/\[([^[\]]+)\]/);if(h){const[f,b]=h[1].split("=");b||(m+=`${l}.removeAttribute('${f}'.replace('%s', light));
      ${l}.removeAttribute('${f}'.replace('%s', dark));`),m+=`
      ${l}.setAttribute('${f}'.replace('%s', colorScheme), ${b?`${b}.replace('%s', colorScheme)`:'""'});`}else m+=`${l}.setAttribute('${u}', colorScheme);`;return e.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${n}') || '${s}';
  const dark = localStorage.getItem('${i}-dark') || '${r}';
  const light = localStorage.getItem('${i}-light') || '${a}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${m}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function MW(){}const DW=({key:t,storageWindow:s})=>(!s&&typeof window<"u"&&(s=window),{get(a){if(typeof window>"u")return;if(!s)return a;let r;try{r=s.localStorage.getItem(t)}catch{}return r||a},set:a=>{if(s)try{s.localStorage.setItem(t,a)}catch{}},subscribe:a=>{if(!s)return MW;const r=n=>{const i=n.newValue;n.key===t&&a(i)};return s.addEventListener("storage",r),()=>{s.removeEventListener("storage",r)}}});function U2(){}function ok(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function rR(t,s){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return s("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return s("dark")}function RW(t){return rR(t,s=>{if(s==="light")return t.lightColorScheme;if(s==="dark")return t.darkColorScheme})}function AW(t){const{defaultMode:s="light",defaultLightColorScheme:a,defaultDarkColorScheme:r,supportedColorSchemes:n=[],modeStorageKey:i=n4,colorSchemeStorageKey:o=i4,storageWindow:l=typeof window>"u"?void 0:window,storageManager:c=DW,noSsr:m=!1}=t,u=n.join(","),h=n.length>1,f=g.useMemo(()=>c?.({key:i,storageWindow:l}),[c,i,l]),b=g.useMemo(()=>c?.({key:`${o}-light`,storageWindow:l}),[c,o,l]),w=g.useMemo(()=>c?.({key:`${o}-dark`,storageWindow:l}),[c,o,l]),[S,j]=g.useState(()=>{const A=f?.get(s)||s,L=b?.get(a)||a,F=w?.get(r)||r;return{mode:A,systemMode:ok(A),lightColorScheme:L,darkColorScheme:F}}),[v,N]=g.useState(m||!h);g.useEffect(()=>{N(!0)},[]);const C=RW(S),P=g.useCallback(A=>{j(L=>{if(A===L.mode)return L;const F=A??s;return f?.set(F),{...L,mode:F,systemMode:ok(F)}})},[f,s]),E=g.useCallback(A=>{A?typeof A=="string"?A&&!u.includes(A)?console.error(`\`${A}\` does not exist in \`theme.colorSchemes\`.`):j(L=>{const F={...L};return rR(L,z=>{z==="light"&&(b?.set(A),F.lightColorScheme=A),z==="dark"&&(w?.set(A),F.darkColorScheme=A)}),F}):j(L=>{const F={...L},z=A.light===null?a:A.light,I=A.dark===null?r:A.dark;return z&&(u.includes(z)?(F.lightColorScheme=z,b?.set(z)):console.error(`\`${z}\` does not exist in \`theme.colorSchemes\`.`)),I&&(u.includes(I)?(F.darkColorScheme=I,w?.set(I)):console.error(`\`${I}\` does not exist in \`theme.colorSchemes\`.`)),F}):j(L=>(b?.set(a),w?.set(r),{...L,lightColorScheme:a,darkColorScheme:r}))},[u,b,w,a,r]),M=g.useCallback(A=>{S.mode==="system"&&j(L=>{const F=A?.matches?"dark":"light";return L.systemMode===F?L:{...L,systemMode:F}})},[S.mode]),T=g.useRef(M);return T.current=M,g.useEffect(()=>{if(typeof window.matchMedia!="function"||!h)return;const A=(...F)=>T.current(...F),L=window.matchMedia("(prefers-color-scheme: dark)");return L.addListener(A),A(L),()=>{L.removeListener(A)}},[h]),g.useEffect(()=>{if(h){const A=f?.subscribe(z=>{(!z||["light","dark","system"].includes(z))&&P(z||s)})||U2,L=b?.subscribe(z=>{(!z||u.match(z))&&E({light:z})})||U2,F=w?.subscribe(z=>{(!z||u.match(z))&&E({dark:z})})||U2;return()=>{A(),L(),F()}}},[E,P,u,s,l,h,f,b,w]),{...S,mode:v?S.mode:void 0,systemMode:v?S.systemMode:void 0,colorScheme:v?C:void 0,setMode:P,setColorScheme:E}}const IW="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function OW(t){const{themeId:s,theme:a={},modeStorageKey:r=n4,colorSchemeStorageKey:n=i4,disableTransitionOnChange:i=!1,defaultColorScheme:o,resolveTheme:l}=t,c={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},m=g.createContext(void 0),u=()=>g.useContext(m)||c,h={},f={};function b(v){const{children:N,theme:C,modeStorageKey:P=r,colorSchemeStorageKey:E=n,disableTransitionOnChange:M=i,storageManager:T,storageWindow:A=typeof window>"u"?void 0:window,documentNode:L=typeof document>"u"?void 0:document,colorSchemeNode:F=typeof document>"u"?void 0:document.documentElement,disableNestedContext:z=!1,disableStyleSheetGeneration:I=!1,defaultMode:Q="system",forceThemeRerender:Y=!1,noSsr:B}=v,q=g.useRef(!1),V=r4(),G=g.useContext(m),H=!!G&&!z,D=g.useMemo(()=>C||(typeof a=="function"?a():a),[C]),R=D[s],$=R||D,{colorSchemes:W=h,components:J=f,cssVarPrefix:te}=$,ee=Object.keys(W).filter(ct=>!!W[ct]).join(","),ae=g.useMemo(()=>ee.split(","),[ee]),ce=typeof o=="string"?o:o.light,he=typeof o=="string"?o:o.dark,ne=W[ce]&&W[he]?Q:W[$.defaultColorScheme]?.palette?.mode||$.palette?.mode,{mode:xe,setMode:ge,systemMode:le,lightColorScheme:pe,darkColorScheme:Re,colorScheme:Se,setColorScheme:He}=AW({supportedColorSchemes:ae,defaultLightColorScheme:ce,defaultDarkColorScheme:he,modeStorageKey:P,colorSchemeStorageKey:E,defaultMode:ne,storageManager:T,storageWindow:A,noSsr:B});let ze=xe,st=Se;H&&(ze=G.mode,st=G.colorScheme);let ke=st||$.defaultColorScheme;$.vars&&!Y&&(ke=$.defaultColorScheme);const We=g.useMemo(()=>{const ct=$.generateThemeVars?.()||$.vars,ht={...$,components:J,colorSchemes:W,cssVarPrefix:te,vars:ct};if(typeof ht.generateSpacing=="function"&&(ht.spacing=ht.generateSpacing()),ke){const Et=W[ke];Et&&typeof Et=="object"&&Object.keys(Et).forEach(be=>{Et[be]&&typeof Et[be]=="object"?ht[be]={...ht[be],...Et[be]}:ht[be]=Et[be]})}return l?l(ht):ht},[$,ke,J,W,te]),ye=$.colorSchemeSelector;Ia(()=>{if(st&&F&&ye&&ye!=="media"){const ct=ye;let ht=ye;if(ct==="class"&&(ht=".%s"),ct==="data"&&(ht="[data-%s]"),ct?.startsWith("data-")&&!ct.includes("%s")&&(ht=`[${ct}="%s"]`),ht.startsWith("."))F.classList.remove(...ae.map(Et=>ht.substring(1).replace("%s",Et))),F.classList.add(ht.substring(1).replace("%s",st));else{const Et=ht.replace("%s",st).match(/\[([^\]]+)\]/);if(Et){const[be,Oe]=Et[1].split("=");Oe||ae.forEach(Le=>{F.removeAttribute(be.replace(st,Le))}),F.setAttribute(be,Oe?Oe.replace(/"|'/g,""):"")}else F.setAttribute(ht,st)}}},[st,ye,F,ae]),g.useEffect(()=>{let ct;if(M&&q.current&&L){const ht=L.createElement("style");ht.appendChild(L.createTextNode(IW)),L.head.appendChild(ht),window.getComputedStyle(L.body),ct=setTimeout(()=>{L.head.removeChild(ht)},1)}return()=>{clearTimeout(ct)}},[st,M,L]),g.useEffect(()=>(q.current=!0,()=>{q.current=!1}),[]);const Ye=g.useMemo(()=>({allColorSchemes:ae,colorScheme:st,darkColorScheme:Re,lightColorScheme:pe,mode:ze,setColorScheme:He,setMode:ge,systemMode:le}),[ae,st,Re,pe,ze,He,ge,le,We.colorSchemeSelector]);let at=!0;(I||$.cssVariables===!1||H&&V?.cssVarPrefix===te)&&(at=!1);const bt=e.jsxs(g.Fragment,{children:[e.jsx(aR,{themeId:R?s:void 0,theme:We,children:N}),at&&e.jsx(L7,{styles:We.generateStyleSheets?.()||[]})]});return H?bt:e.jsx(m.Provider,{value:Ye,children:bt})}const w=typeof o=="string"?o:o.light,S=typeof o=="string"?o:o.dark;return{CssVarsProvider:b,useColorScheme:u,getInitColorSchemeScript:v=>TW({colorSchemeStorageKey:n,defaultLightColorScheme:w,defaultDarkColorScheme:S,modeStorageKey:r,...v})}}function FW(t=""){function s(...r){if(!r.length)return"";const n=r[0];return typeof n=="string"&&!n.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${n}${s(...r.slice(1))})`:`, ${n}`}return(r,...n)=>`var(--${t?`${t}-`:""}${r}${s(...n)})`}const lk=(t,s,a,r=[])=>{let n=t;s.forEach((i,o)=>{o===s.length-1?Array.isArray(n)?n[Number(i)]=a:n&&typeof n=="object"&&(n[i]=a):n&&typeof n=="object"&&(n[i]||(n[i]=r.includes(i)?[]:{}),n=n[i])})},LW=(t,s,a)=>{function r(n,i=[],o=[]){Object.entries(n).forEach(([l,c])=>{(!a||a&&!a([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?r(c,[...i,l],Array.isArray(c)?[...o,l]:o):s([...i,l],c,o))})}r(t)},$W=(t,s)=>typeof s=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?s:`${s}px`:s;function V2(t,s){const{prefix:a,shouldSkipGeneratingVar:r}=s||{},n={},i={},o={};return LW(t,(l,c,m)=>{if((typeof c=="string"||typeof c=="number")&&(!r||!r(l,c))){const u=`--${a?`${a}-`:""}${l.join("-")}`,h=$W(l,c);Object.assign(n,{[u]:h}),lk(i,l,`var(${u})`,m),lk(o,l,`var(${u}, ${h})`,m)}},l=>l[0]==="vars"),{css:n,vars:i,varsWithDefaults:o}}function zW(t,s={}){const{getSelector:a=v,disableCssColorScheme:r,colorSchemeSelector:n,enableContrastVars:i}=s,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...m}=t,{vars:u,css:h,varsWithDefaults:f}=V2(m,s);let b=f;const w={},{[c]:S,...j}=o;if(Object.entries(j||{}).forEach(([P,E])=>{const{vars:M,css:T,varsWithDefaults:A}=V2(E,s);b=dn(b,A),w[P]={css:T,vars:M}}),S){const{css:P,vars:E,varsWithDefaults:M}=V2(S,s);b=dn(b,M),w[c]={css:P,vars:E}}function v(P,E){let M=n;if(n==="class"&&(M=".%s"),n==="data"&&(M="[data-%s]"),n?.startsWith("data-")&&!n.includes("%s")&&(M=`[${n}="%s"]`),P){if(M==="media")return t.defaultColorScheme===P?":root":{[`@media (prefers-color-scheme: ${o[P]?.palette?.mode||P})`]:{":root":E}};if(M)return t.defaultColorScheme===P?`:root, ${M.replace("%s",String(P))}`:M.replace("%s",String(P))}return":root"}return{vars:b,generateThemeVars:()=>{let P={...u};return Object.entries(w).forEach(([,{vars:E}])=>{P=dn(P,E)}),P},generateStyleSheets:()=>{const P=[],E=t.defaultColorScheme||"light";function M(L,F){Object.keys(F).length&&P.push(typeof L=="string"?{[L]:{...F}}:L)}M(a(void 0,{...h}),h);const{[E]:T,...A}=w;if(T){const{css:L}=T,F=o[E]?.palette?.mode,z=!r&&F?{colorScheme:F,...L}:{...L};M(a(E,{...z}),z)}return Object.entries(A).forEach(([L,{css:F}])=>{const z=o[L]?.palette?.mode,I=!r&&z?{colorScheme:z,...F}:{...F};M(a(L,{...I}),I)}),i&&P.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),P}}}function qW(t){return function(a){return t==="media"?`@media (prefers-color-scheme: ${a})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${a}"] &`:t==="class"?`.${a} &`:t==="data"?`[data-${a}] &`:`${t.replace("%s",a)} &`:"&"}}function kt(t,s,a=void 0){const r={};for(const n in t){const i=t[n];let o="",l=!0;for(let c=0;c<i.length;c+=1){const m=i[c];m&&(o+=(l===!0?"":" ")+s(m),l=!1,a&&a[m]&&(o+=" "+a[m]))}r[n]=o}return r}function Ly(t,s){return g.isValidElement(t)&&s.indexOf(t.type.muiName??t.type?._payload?.value?.muiName)!==-1}function nR(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:cx.white,default:cx.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const iR=nR();function oR(){return{text:{primary:cx.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:cx.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const ow=oR();function ck(t,s,a,r){const n=r.light||r,i=r.dark||r*1.5;t[s]||(t.hasOwnProperty(a)?t[s]=t[a]:s==="light"?t.light=dv(t.main,n):s==="dark"&&(t.dark=cv(t.main,i)))}function dk(t,s,a,r,n){const i=n.light||n,o=n.dark||n*1.5;s[a]||(s.hasOwnProperty(r)?s[a]=s[r]:a==="light"?s.light=`color-mix(in ${t}, ${s.main}, #fff ${(i*100).toFixed(0)}%)`:a==="dark"&&(s.dark=`color-mix(in ${t}, ${s.main}, #000 ${(o*100).toFixed(0)}%)`))}function BW(t="light"){return t==="dark"?{main:cm[200],light:cm[50],dark:cm[400]}:{main:cm[700],light:cm[400],dark:cm[800]}}function UW(t="light"){return t==="dark"?{main:lm[200],light:lm[50],dark:lm[400]}:{main:lm[500],light:lm[300],dark:lm[700]}}function VW(t="light"){return t==="dark"?{main:om[500],light:om[300],dark:om[700]}:{main:om[700],light:om[400],dark:om[800]}}function HW(t="light"){return t==="dark"?{main:dm[400],light:dm[300],dark:dm[700]}:{main:dm[700],light:dm[500],dark:dm[900]}}function WW(t="light"){return t==="dark"?{main:um[400],light:um[300],dark:um[700]}:{main:um[800],light:um[500],dark:um[900]}}function YW(t="light"){return t==="dark"?{main:Dh[400],light:Dh[300],dark:Dh[700]}:{main:"#ed6c02",light:Dh[500],dark:Dh[900]}}function GW(t){return`oklch(from ${t} var(--__l) 0 h / var(--__a))`}function o4(t){const{mode:s="light",contrastThreshold:a=3,tonalOffset:r=.2,colorSpace:n,...i}=t,o=t.primary||BW(s),l=t.secondary||UW(s),c=t.error||VW(s),m=t.info||HW(s),u=t.success||WW(s),h=t.warning||YW(s);function f(j){return n?GW(j):fW(j,ow.text.primary)>=a?ow.text.primary:iR.text.primary}const b=({color:j,name:v,mainShade:N=500,lightShade:C=300,darkShade:P=700})=>{if(j={...j},!j.main&&j[N]&&(j.main=j[N]),!j.hasOwnProperty("main"))throw new Error(Vl(11,v?` (${v})`:"",N));if(typeof j.main!="string")throw new Error(Vl(12,v?` (${v})`:"",JSON.stringify(j.main)));return n?(dk(n,j,"light",C,r),dk(n,j,"dark",P,r)):(ck(j,"light",C,r),ck(j,"dark",P,r)),j.contrastText||(j.contrastText=f(j.main)),j};let w;return s==="light"?w=nR():s==="dark"&&(w=oR()),dn({common:{...cx},mode:s,primary:b({color:o,name:"primary"}),secondary:b({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:c,name:"error"}),warning:b({color:h,name:"warning"}),info:b({color:m,name:"info"}),success:b({color:u,name:"success"}),grey:GU,contrastThreshold:a,getContrastText:f,augmentColor:b,tonalOffset:r,...w},i)}function KW(t){const s={};return Object.entries(t).forEach(r=>{const[n,i]=r;typeof i=="object"&&(s[n]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),s}function QW(t,s){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...s}}function ZW(t){return Math.round(t*1e5)/1e5}const uk={textTransform:"uppercase"},mk='"Roboto", "Helvetica", "Arial", sans-serif';function lR(t,s){const{fontFamily:a=mk,fontSize:r=14,fontWeightLight:n=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:m,pxToRem:u,...h}=typeof s=="function"?s(t):s,f=r/14,b=u||(j=>`${j/c*f}rem`),w=(j,v,N,C,P)=>({fontFamily:a,fontWeight:j,fontSize:b(v),lineHeight:N,...a===mk?{letterSpacing:`${ZW(C/v)}em`}:{},...P,...m}),S={h1:w(n,96,1.167,-1.5),h2:w(n,60,1.2,-.5),h3:w(i,48,1.167,0),h4:w(i,34,1.235,.25),h5:w(i,24,1.334,0),h6:w(o,20,1.6,.15),subtitle1:w(i,16,1.75,.15),subtitle2:w(o,14,1.57,.1),body1:w(i,16,1.5,.15),body2:w(i,14,1.43,.15),button:w(o,14,1.75,.4,uk),caption:w(i,12,1.66,.4),overline:w(i,12,2.66,1,uk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return dn({htmlFontSize:c,pxToRem:b,fontFamily:a,fontSize:r,fontWeightLight:n,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...S},h,{clone:!1})}const XW=.2,JW=.14,eY=.12;function Ha(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${XW})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${JW})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${eY})`].join(",")}const tY=["none",Ha(0,2,1,-1,0,1,1,0,0,1,3,0),Ha(0,3,1,-2,0,2,2,0,0,1,5,0),Ha(0,3,3,-2,0,3,4,0,0,1,8,0),Ha(0,2,4,-1,0,4,5,0,0,1,10,0),Ha(0,3,5,-1,0,5,8,0,0,1,14,0),Ha(0,3,5,-1,0,6,10,0,0,1,18,0),Ha(0,4,5,-2,0,7,10,1,0,2,16,1),Ha(0,5,5,-3,0,8,10,1,0,3,14,2),Ha(0,5,6,-3,0,9,12,1,0,3,16,2),Ha(0,6,6,-3,0,10,14,1,0,4,18,3),Ha(0,6,7,-4,0,11,15,1,0,4,20,3),Ha(0,7,8,-4,0,12,17,2,0,5,22,4),Ha(0,7,8,-4,0,13,19,2,0,5,24,4),Ha(0,7,9,-4,0,14,21,2,0,5,26,4),Ha(0,8,9,-5,0,15,22,2,0,6,28,5),Ha(0,8,10,-5,0,16,24,2,0,6,30,5),Ha(0,8,11,-5,0,17,26,2,0,6,32,5),Ha(0,9,11,-5,0,18,28,2,0,7,34,6),Ha(0,9,12,-6,0,19,29,2,0,7,36,6),Ha(0,10,13,-6,0,20,31,3,0,8,38,7),Ha(0,10,13,-6,0,21,33,3,0,8,40,7),Ha(0,10,14,-6,0,22,35,3,0,8,42,7),Ha(0,11,14,-7,0,23,36,3,0,9,44,8),Ha(0,11,15,-7,0,24,38,3,0,9,46,8)],sY={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},cR={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function pk(t){return`${Math.round(t)}ms`}function aY(t){if(!t)return 0;const s=t/36;return Math.min(Math.round((4+15*s**.25+s/5)*10),3e3)}function rY(t){const s={...sY,...t.easing},a={...cR,...t.duration};return{getAutoHeightDuration:aY,create:(n=["all"],i={})=>{const{duration:o=a.standard,easing:l=s.easeInOut,delay:c=0,...m}=i;return(Array.isArray(n)?n:[n]).map(u=>`${u} ${typeof o=="string"?o:pk(o)} ${l} ${typeof c=="string"?c:pk(c)}`).join(",")},...t,easing:s,duration:a}}const nY={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function iY(t){return Lo(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function dR(t={}){const s={...t};function a(r){const n=Object.entries(r);for(let i=0;i<n.length;i++){const[o,l]=n[i];!iY(l)||o.startsWith("unstable_")?delete r[o]:Lo(l)&&(r[o]={...l},a(r[o]))}}return a(s),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(s,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function hk(t){return typeof t=="number"?`${(t*100).toFixed(0)}%`:`calc((${t}) * 100%)`}const oY=t=>{if(!Number.isNaN(+t))return+t;const s=t.match(/\d*\.?\d+/g);if(!s)return 0;let a=0;for(let r=0;r<s.length;r+=1)a+=+s[r];return a};function lY(t){Object.assign(t,{alpha(s,a){const r=this||t;return r.colorSpace?`oklch(from ${s} l c h / ${typeof a=="string"?`calc(${a})`:a})`:r.vars?`rgba(${s.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:Nn(s,oY(a))},lighten(s,a){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${s}, #fff ${hk(a)})`:dv(s,a)},darken(s,a){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${s}, #000 ${hk(a)})`:cv(s,a)}})}function lw(t={},...s){const{breakpoints:a,mixins:r={},spacing:n,palette:i={},transitions:o={},typography:l={},shape:c,colorSpace:m,...u}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(Vl(20));const h=o4({...i,colorSpace:m}),f=s4(t);let b=dn(f,{mixins:QW(f.breakpoints,r),palette:h,shadows:tY.slice(),typography:lR(h,l),transitions:rY(o),zIndex:{...nY}});return b=dn(b,u),b=s.reduce((w,S)=>dn(w,S),b),b.unstable_sxConfig={...rg,...u?.unstable_sxConfig},b.unstable_sx=function(S){return Hc({sx:S,theme:this})},b.toRuntimeSource=dR,lY(b),b}function cw(t){let s;return t<1?s=5.11916*t**2:s=4.5*Math.log(t+1)+2,Math.round(s*10)/1e3}const cY=[...Array(25)].map((t,s)=>{if(s===0)return"none";const a=cw(s);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function uR(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function mR(t){return t==="dark"?cY:[]}function dY(t){const{palette:s={mode:"light"},opacity:a,overlays:r,colorSpace:n,...i}=t,o=o4({...s,colorSpace:n});return{palette:o,opacity:{...uR(o.mode),...a},overlays:r||mR(o.mode),...i}}function uY(t){return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!t[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const mY=t=>[...[...Array(25)].map((s,a)=>`--${t?`${t}-`:""}overlays-${a}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],pY=t=>(s,a)=>{const r=t.rootSelector||":root",n=t.colorSchemeSelector;let i=n;if(n==="class"&&(i=".%s"),n==="data"&&(i="[data-%s]"),n?.startsWith("data-")&&!n.includes("%s")&&(i=`[${n}="%s"]`),t.defaultColorScheme===s){if(s==="dark"){const o={};return mY(t.cssVarPrefix).forEach(l=>{o[l]=a[l],delete a[l]}),i==="media"?{[r]:a,"@media (prefers-color-scheme: dark)":{[r]:o}}:i?{[i.replace("%s",s)]:o,[`${r}, ${i.replace("%s",s)}`]:a}:{[r]:{...a,...o}}}if(i&&i!=="media")return`${r}, ${i.replace("%s",String(s))}`}else if(s){if(i==="media")return{[`@media (prefers-color-scheme: ${String(s)})`]:{[r]:a}};if(i)return i.replace("%s",String(s))}return r};function hY(t,s){s.forEach(a=>{t[a]||(t[a]={})})}function dt(t,s,a){!t[s]&&a&&(t[s]=a)}function nf(t){return typeof t!="string"||!t.startsWith("hsl")?t:J7(t)}function jl(t,s){`${s}Channel`in t||(t[`${s}Channel`]=rf(nf(t[s])))}function fY(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const ko=t=>{try{return t()}catch{}},xY=(t="mui")=>FW(t);function H2(t,s,a,r,n){if(!a)return;a=a===!0?{}:a;const i=n==="dark"?"dark":"light";if(!r){s[n]=dY({...a,palette:{mode:i,...a?.palette},colorSpace:t});return}const{palette:o,...l}=lw({...r,palette:{mode:i,...a?.palette},colorSpace:t});return s[n]={...a,palette:o,opacity:{...uR(i),...a?.opacity},overlays:a?.overlays||mR(i)},l}function gY(t={},...s){const{colorSchemes:a={light:!0},defaultColorScheme:r,disableCssColorScheme:n=!1,cssVarPrefix:i="mui",nativeColor:o=!1,shouldSkipGeneratingVar:l=uY,colorSchemeSelector:c=a.light&&a.dark?"media":void 0,rootSelector:m=":root",...u}=t,h=Object.keys(a)[0],f=r||(a.light&&h!=="light"?"light":h),b=xY(i),{[f]:w,light:S,dark:j,...v}=a,N={...v};let C=w;if((f==="dark"&&!("dark"in a)||f==="light"&&!("light"in a))&&(C=!0),!C)throw new Error(Vl(21,f));let P;o&&(P="oklch");const E=H2(P,N,C,u,f);S&&!N.light&&H2(P,N,S,void 0,"light"),j&&!N.dark&&H2(P,N,j,void 0,"dark");let M={defaultColorScheme:f,...E,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:m,getCssVar:b,colorSchemes:N,font:{...KW(E.typography),...E.font},spacing:fY(u.spacing)};Object.keys(M.colorSchemes).forEach(z=>{const I=M.colorSchemes[z].palette,Q=B=>{const q=B.split("-"),V=q[1],G=q[2];return b(B,I[V][G])};I.mode==="light"&&(dt(I.common,"background","#fff"),dt(I.common,"onBackground","#000")),I.mode==="dark"&&(dt(I.common,"background","#000"),dt(I.common,"onBackground","#fff"));function Y(B,q,V){if(P){let G;return B===wd&&(G=`transparent ${((1-V)*100).toFixed(0)}%`),B===Na&&(G=`#000 ${(V*100).toFixed(0)}%`),B===wa&&(G=`#fff ${(V*100).toFixed(0)}%`),`color-mix(in ${P}, ${q}, ${G})`}return B(q,V)}if(hY(I,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),I.mode==="light"){dt(I.Alert,"errorColor",Y(Na,I.error.light,.6)),dt(I.Alert,"infoColor",Y(Na,I.info.light,.6)),dt(I.Alert,"successColor",Y(Na,I.success.light,.6)),dt(I.Alert,"warningColor",Y(Na,I.warning.light,.6)),dt(I.Alert,"errorFilledBg",Q("palette-error-main")),dt(I.Alert,"infoFilledBg",Q("palette-info-main")),dt(I.Alert,"successFilledBg",Q("palette-success-main")),dt(I.Alert,"warningFilledBg",Q("palette-warning-main")),dt(I.Alert,"errorFilledColor",ko(()=>I.getContrastText(I.error.main))),dt(I.Alert,"infoFilledColor",ko(()=>I.getContrastText(I.info.main))),dt(I.Alert,"successFilledColor",ko(()=>I.getContrastText(I.success.main))),dt(I.Alert,"warningFilledColor",ko(()=>I.getContrastText(I.warning.main))),dt(I.Alert,"errorStandardBg",Y(wa,I.error.light,.9)),dt(I.Alert,"infoStandardBg",Y(wa,I.info.light,.9)),dt(I.Alert,"successStandardBg",Y(wa,I.success.light,.9)),dt(I.Alert,"warningStandardBg",Y(wa,I.warning.light,.9)),dt(I.Alert,"errorIconColor",Q("palette-error-main")),dt(I.Alert,"infoIconColor",Q("palette-info-main")),dt(I.Alert,"successIconColor",Q("palette-success-main")),dt(I.Alert,"warningIconColor",Q("palette-warning-main")),dt(I.AppBar,"defaultBg",Q("palette-grey-100")),dt(I.Avatar,"defaultBg",Q("palette-grey-400")),dt(I.Button,"inheritContainedBg",Q("palette-grey-300")),dt(I.Button,"inheritContainedHoverBg",Q("palette-grey-A100")),dt(I.Chip,"defaultBorder",Q("palette-grey-400")),dt(I.Chip,"defaultAvatarColor",Q("palette-grey-700")),dt(I.Chip,"defaultIconColor",Q("palette-grey-700")),dt(I.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),dt(I.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),dt(I.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),dt(I.LinearProgress,"primaryBg",Y(wa,I.primary.main,.62)),dt(I.LinearProgress,"secondaryBg",Y(wa,I.secondary.main,.62)),dt(I.LinearProgress,"errorBg",Y(wa,I.error.main,.62)),dt(I.LinearProgress,"infoBg",Y(wa,I.info.main,.62)),dt(I.LinearProgress,"successBg",Y(wa,I.success.main,.62)),dt(I.LinearProgress,"warningBg",Y(wa,I.warning.main,.62)),dt(I.Skeleton,"bg",P?Y(wd,I.text.primary,.11):`rgba(${Q("palette-text-primaryChannel")} / 0.11)`),dt(I.Slider,"primaryTrack",Y(wa,I.primary.main,.62)),dt(I.Slider,"secondaryTrack",Y(wa,I.secondary.main,.62)),dt(I.Slider,"errorTrack",Y(wa,I.error.main,.62)),dt(I.Slider,"infoTrack",Y(wa,I.info.main,.62)),dt(I.Slider,"successTrack",Y(wa,I.success.main,.62)),dt(I.Slider,"warningTrack",Y(wa,I.warning.main,.62));const B=P?Y(Na,I.background.default,.6825):V0(I.background.default,.8);dt(I.SnackbarContent,"bg",B),dt(I.SnackbarContent,"color",ko(()=>P?ow.text.primary:I.getContrastText(B))),dt(I.SpeedDialAction,"fabHoverBg",V0(I.background.paper,.15)),dt(I.StepConnector,"border",Q("palette-grey-400")),dt(I.StepContent,"border",Q("palette-grey-400")),dt(I.Switch,"defaultColor",Q("palette-common-white")),dt(I.Switch,"defaultDisabledColor",Q("palette-grey-100")),dt(I.Switch,"primaryDisabledColor",Y(wa,I.primary.main,.62)),dt(I.Switch,"secondaryDisabledColor",Y(wa,I.secondary.main,.62)),dt(I.Switch,"errorDisabledColor",Y(wa,I.error.main,.62)),dt(I.Switch,"infoDisabledColor",Y(wa,I.info.main,.62)),dt(I.Switch,"successDisabledColor",Y(wa,I.success.main,.62)),dt(I.Switch,"warningDisabledColor",Y(wa,I.warning.main,.62)),dt(I.TableCell,"border",Y(wa,Y(wd,I.divider,1),.88)),dt(I.Tooltip,"bg",Y(wd,I.grey[700],.92))}if(I.mode==="dark"){dt(I.Alert,"errorColor",Y(wa,I.error.light,.6)),dt(I.Alert,"infoColor",Y(wa,I.info.light,.6)),dt(I.Alert,"successColor",Y(wa,I.success.light,.6)),dt(I.Alert,"warningColor",Y(wa,I.warning.light,.6)),dt(I.Alert,"errorFilledBg",Q("palette-error-dark")),dt(I.Alert,"infoFilledBg",Q("palette-info-dark")),dt(I.Alert,"successFilledBg",Q("palette-success-dark")),dt(I.Alert,"warningFilledBg",Q("palette-warning-dark")),dt(I.Alert,"errorFilledColor",ko(()=>I.getContrastText(I.error.dark))),dt(I.Alert,"infoFilledColor",ko(()=>I.getContrastText(I.info.dark))),dt(I.Alert,"successFilledColor",ko(()=>I.getContrastText(I.success.dark))),dt(I.Alert,"warningFilledColor",ko(()=>I.getContrastText(I.warning.dark))),dt(I.Alert,"errorStandardBg",Y(Na,I.error.light,.9)),dt(I.Alert,"infoStandardBg",Y(Na,I.info.light,.9)),dt(I.Alert,"successStandardBg",Y(Na,I.success.light,.9)),dt(I.Alert,"warningStandardBg",Y(Na,I.warning.light,.9)),dt(I.Alert,"errorIconColor",Q("palette-error-main")),dt(I.Alert,"infoIconColor",Q("palette-info-main")),dt(I.Alert,"successIconColor",Q("palette-success-main")),dt(I.Alert,"warningIconColor",Q("palette-warning-main")),dt(I.AppBar,"defaultBg",Q("palette-grey-900")),dt(I.AppBar,"darkBg",Q("palette-background-paper")),dt(I.AppBar,"darkColor",Q("palette-text-primary")),dt(I.Avatar,"defaultBg",Q("palette-grey-600")),dt(I.Button,"inheritContainedBg",Q("palette-grey-800")),dt(I.Button,"inheritContainedHoverBg",Q("palette-grey-700")),dt(I.Chip,"defaultBorder",Q("palette-grey-700")),dt(I.Chip,"defaultAvatarColor",Q("palette-grey-300")),dt(I.Chip,"defaultIconColor",Q("palette-grey-300")),dt(I.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),dt(I.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),dt(I.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),dt(I.LinearProgress,"primaryBg",Y(Na,I.primary.main,.5)),dt(I.LinearProgress,"secondaryBg",Y(Na,I.secondary.main,.5)),dt(I.LinearProgress,"errorBg",Y(Na,I.error.main,.5)),dt(I.LinearProgress,"infoBg",Y(Na,I.info.main,.5)),dt(I.LinearProgress,"successBg",Y(Na,I.success.main,.5)),dt(I.LinearProgress,"warningBg",Y(Na,I.warning.main,.5)),dt(I.Skeleton,"bg",P?Y(wd,I.text.primary,.13):`rgba(${Q("palette-text-primaryChannel")} / 0.13)`),dt(I.Slider,"primaryTrack",Y(Na,I.primary.main,.5)),dt(I.Slider,"secondaryTrack",Y(Na,I.secondary.main,.5)),dt(I.Slider,"errorTrack",Y(Na,I.error.main,.5)),dt(I.Slider,"infoTrack",Y(Na,I.info.main,.5)),dt(I.Slider,"successTrack",Y(Na,I.success.main,.5)),dt(I.Slider,"warningTrack",Y(Na,I.warning.main,.5));const B=P?Y(wa,I.background.default,.985):V0(I.background.default,.98);dt(I.SnackbarContent,"bg",B),dt(I.SnackbarContent,"color",ko(()=>P?iR.text.primary:I.getContrastText(B))),dt(I.SpeedDialAction,"fabHoverBg",V0(I.background.paper,.15)),dt(I.StepConnector,"border",Q("palette-grey-600")),dt(I.StepContent,"border",Q("palette-grey-600")),dt(I.Switch,"defaultColor",Q("palette-grey-300")),dt(I.Switch,"defaultDisabledColor",Q("palette-grey-600")),dt(I.Switch,"primaryDisabledColor",Y(Na,I.primary.main,.55)),dt(I.Switch,"secondaryDisabledColor",Y(Na,I.secondary.main,.55)),dt(I.Switch,"errorDisabledColor",Y(Na,I.error.main,.55)),dt(I.Switch,"infoDisabledColor",Y(Na,I.info.main,.55)),dt(I.Switch,"successDisabledColor",Y(Na,I.success.main,.55)),dt(I.Switch,"warningDisabledColor",Y(Na,I.warning.main,.55)),dt(I.TableCell,"border",Y(Na,Y(wd,I.divider,1),.68)),dt(I.Tooltip,"bg",Y(wd,I.grey[700],.92))}jl(I.background,"default"),jl(I.background,"paper"),jl(I.common,"background"),jl(I.common,"onBackground"),jl(I,"divider"),Object.keys(I).forEach(B=>{const q=I[B];B!=="tonalOffset"&&q&&typeof q=="object"&&(q.main&&dt(I[B],"mainChannel",rf(nf(q.main))),q.light&&dt(I[B],"lightChannel",rf(nf(q.light))),q.dark&&dt(I[B],"darkChannel",rf(nf(q.dark))),q.contrastText&&dt(I[B],"contrastTextChannel",rf(nf(q.contrastText))),B==="text"&&(jl(I[B],"primary"),jl(I[B],"secondary")),B==="action"&&(q.active&&jl(I[B],"active"),q.selected&&jl(I[B],"selected")))})}),M=s.reduce((z,I)=>dn(z,I),M);const T={prefix:i,disableCssColorScheme:n,shouldSkipGeneratingVar:l,getSelector:pY(M),enableContrastVars:o},{vars:A,generateThemeVars:L,generateStyleSheets:F}=zW(M,T);return M.vars=A,Object.entries(M.colorSchemes[M.defaultColorScheme]).forEach(([z,I])=>{M[z]=I}),M.generateThemeVars=L,M.generateStyleSheets=F,M.generateSpacing=function(){return U7(u.spacing,e4(this))},M.getColorSchemeSelector=qW(c),M.spacing=M.generateSpacing(),M.shouldSkipGeneratingVar=l,M.unstable_sxConfig={...rg,...u?.unstable_sxConfig},M.unstable_sx=function(I){return Hc({sx:I,theme:this})},M.toRuntimeSource=dR,M}function fk(t,s,a){t.colorSchemes&&a&&(t.colorSchemes[s]={...a!==!0&&a,palette:o4({...a===!0?{}:a.palette,mode:s})})}function uv(t={},...s){const{palette:a,cssVariables:r=!1,colorSchemes:n=a?void 0:{light:!0},defaultColorScheme:i=a?.mode,...o}=t,l=i||"light",c=n?.[l],m={...n,...a?{[l]:{...typeof c!="boolean"&&c,palette:a}}:void 0};if(r===!1){if(!("colorSchemes"in t))return lw(t,...s);let u=a;"palette"in t||m[l]&&(m[l]!==!0?u=m[l].palette:l==="dark"&&(u={mode:"dark"}));const h=lw({...t,palette:u},...s);return h.defaultColorScheme=l,h.colorSchemes=m,h.palette.mode==="light"&&(h.colorSchemes.light={...m.light!==!0&&m.light,palette:h.palette},fk(h,"dark",m.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...m.dark!==!0&&m.dark,palette:h.palette},fk(h,"light",m.light)),h}return!a&&!("light"in m)&&l==="light"&&(m.light=!0),gY({...o,colorSchemes:m,defaultColorScheme:l,...typeof r!="boolean"&&r},...s)}function yY(t){return String(t).match(/[\d.\-+]*\s*(.*)/)[1]||""}function bY(t){return parseFloat(t)}const mv=uv();function xi(){const t=ov(mv);return t[Ui]||t}function Ls({props:t,name:s}){return lW({props:t,name:s,defaultTheme:mv,themeId:Ui})}function pR(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const zr=t=>pR(t)&&t!=="classes",Ne=aW({themeId:Ui,defaultTheme:mv,rootShouldForwardProp:zr});function vY({theme:t,...s}){const a=Ui in t?t[Ui]:void 0;return e.jsx(aR,{...s,themeId:a?Ui:void 0,theme:a||t})}const H0={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:jY}=OW({themeId:Ui,theme:()=>uv({cssVariables:!0}),colorSchemeStorageKey:H0.colorSchemeStorageKey,modeStorageKey:H0.modeStorageKey,defaultColorScheme:{light:H0.defaultLightColorScheme,dark:H0.defaultDarkColorScheme},resolveTheme:t=>{const s={...t,typography:lR(t.palette,t.typography)};return s.unstable_sx=function(r){return Hc({sx:r,theme:this})},s}}),NY=jY;function wY({theme:t,...s}){const a=g.useMemo(()=>{if(typeof t=="function")return t;const r=Ui in t?t[Ui]:t;return"colorSchemes"in r?null:"vars"in r?t:{...t,vars:null}},[t]);return a?e.jsx(vY,{theme:a,...s}):e.jsx(NY,{theme:t,...s})}function dw(...t){return t.reduce((s,a)=>a==null?s:function(...n){s.apply(this,n),a.apply(this,n)},()=>{})}function _Y(t){return e.jsx(V7,{...t,defaultTheme:mv,themeId:Ui})}function SY(t){return function(a){return e.jsx(_Y,{styles:typeof t=="function"?r=>t({theme:r,...a}):t})}}function CY(){return H7}const Yt=kW;function es(t){return _W(t)}function PY(t){return Dt("MuiSvgIcon",t)}Tt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const kY=t=>{const{color:s,fontSize:a,classes:r}=t,n={root:["root",s!=="inherit"&&`color${Xe(s)}`,`fontSize${Xe(a)}`]};return kt(n,PY,r)},EY=Ne("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.color!=="inherit"&&s[`color${Xe(a.color)}`],s[`fontSize${Xe(a.fontSize)}`]]}})(Yt(({theme:t})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:s=>!s.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,s])=>s&&s.main).map(([s])=>({props:{color:s},style:{color:(t.vars??t).palette?.[s]?.main}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),uw=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiSvgIcon"}),{children:n,className:i,color:o="inherit",component:l="svg",fontSize:c="medium",htmlColor:m,inheritViewBox:u=!1,titleAccess:h,viewBox:f="0 0 24 24",...b}=r,w=g.isValidElement(n)&&n.type==="svg",S={...r,color:o,component:l,fontSize:c,instanceFontSize:s.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:w},j={};u||(j.viewBox=f);const v=kY(S);return e.jsxs(EY,{as:l,className:et(v.root,i),focusable:"false",color:m,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:a,...j,...b,...w&&n.props,ownerState:S,children:[w?n.props.children:n,h?e.jsx("title",{children:h}):null]})});uw.muiName="SvgIcon";function Ut(t,s){function a(r,n){return e.jsx(uw,{"data-testid":void 0,ref:n,...r,children:t})}return a.muiName=uw.muiName,g.memo(g.forwardRef(a))}function ng(t,s=166){let a;function r(...n){const i=()=>{t.apply(this,n)};clearTimeout(a),a=setTimeout(i,s)}return r.clear=()=>{clearTimeout(a)},r}function ir(t){return t&&t.ownerDocument||document}function mi(t){return ir(t).defaultView||window}function mw(t,s){typeof t=="function"?t(s):t&&(t.current=s)}function On(t){const{controlled:s,default:a,name:r,state:n="value"}=t,{current:i}=g.useRef(s!==void 0),[o,l]=g.useState(a),c=i?s:o,m=g.useCallback(u=>{i||l(u)},[]);return[c,m]}function Ot(t){const s=g.useRef(t);return Ia(()=>{s.current=t}),g.useRef((...a)=>(0,s.current)(...a)).current}function Bs(...t){const s=g.useRef(void 0),a=g.useCallback(r=>{const n=t.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(r);return typeof l=="function"?l:()=>{o(null)}}return i.current=r,()=>{i.current=null}});return()=>{n.forEach(i=>i?.())}},t);return g.useMemo(()=>t.every(r=>r==null)?null:r=>{s.current&&(s.current(),s.current=void 0),r!=null&&(s.current=a(r))},t)}function TY(t,s){const a=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&a>=65&&a<=90&&typeof s=="function"}function l4(t,s){if(!t)return s;function a(o,l){const c={};return Object.keys(l).forEach(m=>{TY(m,l[m])&&typeof o[m]=="function"&&(c[m]=(...u)=>{o[m](...u),l[m](...u)})}),c}if(typeof t=="function"||typeof s=="function")return o=>{const l=typeof s=="function"?s(o):s,c=typeof t=="function"?t({...o,...l}):t,m=et(o?.className,l?.className,c?.className),u=a(c,l);return{...l,...c,...u,...!!m&&{className:m},...l?.style&&c?.style&&{style:{...l.style,...c.style}},...l?.sx&&c?.sx&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const r=s,n=a(t,r),i=et(r?.className,t?.className);return{...s,...t,...n,...!!i&&{className:i},...r?.style&&t?.style&&{style:{...r.style,...t.style}},...r?.sx&&t?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function as(t,s){if(t==null)return{};var a={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(s.indexOf(r)!==-1)continue;a[r]=t[r]}return a}function pw(t,s){return pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},pw(t,s)}function c4(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,pw(t,s)}function MY(t,s){return t.classList?!!s&&t.classList.contains(s):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+s+" ")!==-1}function DY(t,s){t.classList?t.classList.add(s):MY(t,s)||(typeof t.className=="string"?t.className=t.className+" "+s:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+s))}function xk(t,s){return t.replace(new RegExp("(^|\\s)"+s+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function RY(t,s){t.classList?t.classList.remove(s):typeof t.className=="string"?t.className=xk(t.className,s):t.setAttribute("class",xk(t.className&&t.className.baseVal||"",s))}const gk={disabled:!1},db=vt.createContext(null);var hR=function(s){return s.scrollTop},of="unmounted",Rd="exited",Ad="entering",bm="entered",hw="exiting",gi=(function(t){c4(s,t);function s(r,n){var i;i=t.call(this,r,n)||this;var o=n,l=o&&!o.isMounting?r.enter:r.appear,c;return i.appearStatus=null,r.in?l?(c=Rd,i.appearStatus=Ad):c=bm:r.unmountOnExit||r.mountOnEnter?c=of:c=Rd,i.state={status:c},i.nextCallback=null,i}s.getDerivedStateFromProps=function(n,i){var o=n.in;return o&&i.status===of?{status:Rd}:null};var a=s.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(n){var i=null;if(n!==this.props){var o=this.state.status;this.props.in?o!==Ad&&o!==bm&&(i=Ad):(o===Ad||o===bm)&&(i=hw)}this.updateStatus(!1,i)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var n=this.props.timeout,i,o,l;return i=o=l=n,n!=null&&typeof n!="number"&&(i=n.exit,o=n.enter,l=n.appear!==void 0?n.appear:o),{exit:i,enter:o,appear:l}},a.updateStatus=function(n,i){if(n===void 0&&(n=!1),i!==null)if(this.cancelNextCallback(),i===Ad){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:af.findDOMNode(this);o&&hR(o)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Rd&&this.setState({status:of})},a.performEnter=function(n){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:n,c=this.props.nodeRef?[l]:[af.findDOMNode(this),l],m=c[0],u=c[1],h=this.getTimeouts(),f=l?h.appear:h.enter;if(!n&&!o||gk.disabled){this.safeSetState({status:bm},function(){i.props.onEntered(m)});return}this.props.onEnter(m,u),this.safeSetState({status:Ad},function(){i.props.onEntering(m,u),i.onTransitionEnd(f,function(){i.safeSetState({status:bm},function(){i.props.onEntered(m,u)})})})},a.performExit=function(){var n=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:af.findDOMNode(this);if(!i||gk.disabled){this.safeSetState({status:Rd},function(){n.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:hw},function(){n.props.onExiting(l),n.onTransitionEnd(o.exit,function(){n.safeSetState({status:Rd},function(){n.props.onExited(l)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(n,i){i=this.setNextCallback(i),this.setState(n,i)},a.setNextCallback=function(n){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,n(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},a.onTransitionEnd=function(n,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:af.findDOMNode(this),l=n==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],m=c[0],u=c[1];this.props.addEndListener(m,u)}n!=null&&setTimeout(this.nextCallback,n)},a.render=function(){var n=this.state.status;if(n===of)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=as(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return vt.createElement(db.Provider,{value:null},typeof o=="function"?o(n,l):vt.cloneElement(vt.Children.only(o),l))},s})(vt.Component);gi.contextType=db;gi.propTypes={};function mm(){}gi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mm,onEntering:mm,onEntered:mm,onExit:mm,onExiting:mm,onExited:mm};gi.UNMOUNTED=of;gi.EXITED=Rd;gi.ENTERING=Ad;gi.ENTERED=bm;gi.EXITING=hw;var AY=function(s,a){return s&&a&&a.split(" ").forEach(function(r){return DY(s,r)})},W2=function(s,a){return s&&a&&a.split(" ").forEach(function(r){return RY(s,r)})},d4=(function(t){c4(s,t);function s(){for(var r,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(l,c){var m=r.resolveArguments(l,c),u=m[0],h=m[1];r.removeClasses(u,"exit"),r.addClass(u,h?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(l,c)},r.onEntering=function(l,c){var m=r.resolveArguments(l,c),u=m[0],h=m[1],f=h?"appear":"enter";r.addClass(u,f,"active"),r.props.onEntering&&r.props.onEntering(l,c)},r.onEntered=function(l,c){var m=r.resolveArguments(l,c),u=m[0],h=m[1],f=h?"appear":"enter";r.removeClasses(u,f),r.addClass(u,f,"done"),r.props.onEntered&&r.props.onEntered(l,c)},r.onExit=function(l){var c=r.resolveArguments(l),m=c[0];r.removeClasses(m,"appear"),r.removeClasses(m,"enter"),r.addClass(m,"exit","base"),r.props.onExit&&r.props.onExit(l)},r.onExiting=function(l){var c=r.resolveArguments(l),m=c[0];r.addClass(m,"exit","active"),r.props.onExiting&&r.props.onExiting(l)},r.onExited=function(l){var c=r.resolveArguments(l),m=c[0];r.removeClasses(m,"exit"),r.addClass(m,"exit","done"),r.props.onExited&&r.props.onExited(l)},r.resolveArguments=function(l,c){return r.props.nodeRef?[r.props.nodeRef.current,l]:[l,c]},r.getClassNames=function(l){var c=r.props.classNames,m=typeof c=="string",u=m&&c?c+"-":"",h=m?""+u+l:c[l],f=m?h+"-active":c[l+"Active"],b=m?h+"-done":c[l+"Done"];return{baseClassName:h,activeClassName:f,doneClassName:b}},r}var a=s.prototype;return a.addClass=function(n,i,o){var l=this.getClassNames(i)[o+"ClassName"],c=this.getClassNames("enter"),m=c.doneClassName;i==="appear"&&o==="done"&&m&&(l+=" "+m),o==="active"&&n&&hR(n),l&&(this.appliedClasses[i][o]=l,AY(n,l))},a.removeClasses=function(n,i){var o=this.appliedClasses[i],l=o.base,c=o.active,m=o.done;this.appliedClasses[i]={},l&&W2(n,l),c&&W2(n,c),m&&W2(n,m)},a.render=function(){var n=this.props;n.classNames;var i=as(n,["classNames"]);return vt.createElement(gi,je({},i,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},s})(vt.Component);d4.defaultProps={classNames:""};d4.propTypes={};function IY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u4(t,s){var a=function(i){return s&&g.isValidElement(i)?s(i):i},r=Object.create(null);return t&&g.Children.map(t,function(n){return n}).forEach(function(n){r[n.key]=a(n)}),r}function OY(t,s){t=t||{},s=s||{};function a(u){return u in s?s[u]:t[u]}var r=Object.create(null),n=[];for(var i in t)i in s?n.length&&(r[i]=n,n=[]):n.push(i);var o,l={};for(var c in s){if(r[c])for(o=0;o<r[c].length;o++){var m=r[c][o];l[r[c][o]]=a(m)}l[c]=a(c)}for(o=0;o<n.length;o++)l[n[o]]=a(n[o]);return l}function Vd(t,s,a){return a[s]!=null?a[s]:t.props[s]}function FY(t,s){return u4(t.children,function(a){return g.cloneElement(a,{onExited:s.bind(null,a),in:!0,appear:Vd(a,"appear",t),enter:Vd(a,"enter",t),exit:Vd(a,"exit",t)})})}function LY(t,s,a){var r=u4(t.children),n=OY(s,r);return Object.keys(n).forEach(function(i){var o=n[i];if(g.isValidElement(o)){var l=i in s,c=i in r,m=s[i],u=g.isValidElement(m)&&!m.props.in;c&&(!l||u)?n[i]=g.cloneElement(o,{onExited:a.bind(null,o),in:!0,exit:Vd(o,"exit",t),enter:Vd(o,"enter",t)}):!c&&l&&!u?n[i]=g.cloneElement(o,{in:!1}):c&&l&&g.isValidElement(m)&&(n[i]=g.cloneElement(o,{onExited:a.bind(null,o),in:m.props.in,exit:Vd(o,"exit",t),enter:Vd(o,"enter",t)}))}}),n}var $Y=Object.values||function(t){return Object.keys(t).map(function(s){return t[s]})},zY={component:"div",childFactory:function(s){return s}},ig=(function(t){c4(s,t);function s(r,n){var i;i=t.call(this,r,n)||this;var o=i.handleExited.bind(IY(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var a=s.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},s.getDerivedStateFromProps=function(n,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?FY(n,l):LY(n,o,l),firstRender:!1}},a.handleExited=function(n,i){var o=u4(this.props.children);n.key in o||(n.props.onExited&&n.props.onExited(i),this.mounted&&this.setState(function(l){var c=je({},l.children);return delete c[n.key],{children:c}}))},a.render=function(){var n=this.props,i=n.component,o=n.childFactory,l=as(n,["component","childFactory"]),c=this.state.contextValue,m=$Y(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?vt.createElement(db.Provider,{value:c},m):vt.createElement(db.Provider,{value:c},vt.createElement(i,l,m))},s})(vt.Component);ig.propTypes={};ig.defaultProps=zY;const yk={};function fR(t,s){const a=g.useRef(yk);return a.current===yk&&(a.current=t(s)),a}const qY=[];function BY(t){g.useEffect(t,qY)}class pv{static create(){return new pv}currentId=null;start(s,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},s)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function ni(){const t=fR(pv.create).current;return BY(t.disposeEffect),t}const m4=t=>t.scrollTop;function Yc(t,s){const{timeout:a,easing:r,style:n={}}=t;return{duration:n.transitionDuration??(typeof a=="number"?a:a[s.mode]||0),easing:n.transitionTimingFunction??(typeof r=="object"?r[s.mode]:r),delay:n.transitionDelay}}function UY(t){return Dt("MuiCollapse",t)}Tt("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const VY=t=>{const{orientation:s,classes:a}=t,r={root:["root",`${s}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${s}`],wrapperInner:["wrapperInner",`${s}`]};return kt(r,UY,a)},HY=Ne("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.orientation],a.state==="entered"&&s.entered,a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&s.hidden]}})(Yt(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:s})=>s.state==="exited"&&!s.in&&s.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),WY=Ne("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),YY=Ne("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),fw=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiCollapse"}),{addEndListener:n,children:i,className:o,collapsedSize:l="0px",component:c,easing:m,in:u,onEnter:h,onEntered:f,onEntering:b,onExit:w,onExited:S,onExiting:j,orientation:v="vertical",style:N,timeout:C=cR.standard,TransitionComponent:P=gi,...E}=r,M={...r,orientation:v,collapsedSize:l},T=VY(M),A=xi(),L=ni(),F=g.useRef(null),z=g.useRef(),I=typeof l=="number"?`${l}px`:l,Q=v==="horizontal",Y=Q?"width":"height",B=g.useRef(null),q=Bs(a,B),V=ee=>ae=>{if(ee){const ce=B.current;ae===void 0?ee(ce):ee(ce,ae)}},G=()=>F.current?F.current[Q?"clientWidth":"clientHeight"]:0,H=V((ee,ae)=>{F.current&&Q&&(F.current.style.position="absolute"),ee.style[Y]=I,h&&h(ee,ae)}),D=V((ee,ae)=>{const ce=G();F.current&&Q&&(F.current.style.position="");const{duration:he,easing:ne}=Yc({style:N,timeout:C,easing:m},{mode:"enter"});if(C==="auto"){const xe=A.transitions.getAutoHeightDuration(ce);ee.style.transitionDuration=`${xe}ms`,z.current=xe}else ee.style.transitionDuration=typeof he=="string"?he:`${he}ms`;ee.style[Y]=`${ce}px`,ee.style.transitionTimingFunction=ne,b&&b(ee,ae)}),R=V((ee,ae)=>{ee.style[Y]="auto",f&&f(ee,ae)}),$=V(ee=>{ee.style[Y]=`${G()}px`,w&&w(ee)}),W=V(S),J=V(ee=>{const ae=G(),{duration:ce,easing:he}=Yc({style:N,timeout:C,easing:m},{mode:"exit"});if(C==="auto"){const ne=A.transitions.getAutoHeightDuration(ae);ee.style.transitionDuration=`${ne}ms`,z.current=ne}else ee.style.transitionDuration=typeof ce=="string"?ce:`${ce}ms`;ee.style[Y]=I,ee.style.transitionTimingFunction=he,j&&j(ee)}),te=ee=>{C==="auto"&&L.start(z.current||0,ee),n&&n(B.current,ee)};return e.jsx(P,{in:u,onEnter:H,onEntered:R,onEntering:D,onExit:$,onExited:W,onExiting:J,addEndListener:te,nodeRef:B,timeout:C==="auto"?null:C,...E,children:(ee,{ownerState:ae,...ce})=>e.jsx(HY,{as:c,className:et(T.root,o,{entered:T.entered,exited:!u&&I==="0px"&&T.hidden}[ee]),style:{[Q?"minWidth":"minHeight"]:I,...N},ref:q,ownerState:{...M,state:ee},...ce,children:e.jsx(WY,{ownerState:{...M,state:ee},className:T.wrapper,ref:F,children:e.jsx(YY,{ownerState:{...M,state:ee},className:T.wrapperInner,children:i})})})})});fw&&(fw.muiSupportAuto=!0);function GY(t){return Dt("MuiPaper",t)}Tt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const KY=t=>{const{square:s,elevation:a,variant:r,classes:n}=t,i={root:["root",r,!s&&"rounded",r==="elevation"&&`elevation${a}`]};return kt(i,GY,n)},QY=Ne("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.variant],!a.square&&s.rounded,a.variant==="elevation"&&s[`elevation${a.elevation}`]]}})(Yt(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:s})=>!s.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),oa=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiPaper"}),n=xi(),{className:i,component:o="div",elevation:l=1,square:c=!1,variant:m="elevation",...u}=r,h={...r,component:o,elevation:l,square:c,variant:m},f=KY(h);return e.jsx(QY,{as:o,ownerState:h,className:et(f.root,i),ref:a,...u,style:{...m==="elevation"&&{"--Paper-shadow":(n.vars||n).shadows[l],...n.vars&&{"--Paper-overlay":n.vars.overlays?.[l]},...!n.vars&&n.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Nn("#fff",cw(l))}, ${Nn("#fff",cw(l))})`}},...u.style}})});function Qm(t){return typeof t=="string"}function xR(t,s,a){return t===void 0||Qm(t)?s:{...s,ownerState:{...s.ownerState,...a}}}function un(t,s,a){return typeof t=="function"?t(s,a):t}function gR(t,s=[]){if(t===void 0)return{};const a={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!s.includes(r)).forEach(r=>{a[r]=t[r]}),a}function bk(t){if(t===void 0)return{};const s={};return Object.keys(t).filter(a=>!(a.match(/^on[A-Z]/)&&typeof t[a]=="function")).forEach(a=>{s[a]=t[a]}),s}function yR(t){const{getSlotProps:s,additionalProps:a,externalSlotProps:r,externalForwardedProps:n,className:i}=t;if(!s){const b=et(a?.className,i,n?.className,r?.className),w={...a?.style,...n?.style,...r?.style},S={...a,...n,...r};return b.length>0&&(S.className=b),Object.keys(w).length>0&&(S.style=w),{props:S,internalRef:void 0}}const o=gR({...n,...r}),l=bk(r),c=bk(n),m=s(o),u=et(m?.className,a?.className,i,n?.className,r?.className),h={...m?.style,...a?.style,...n?.style,...r?.style},f={...m,...a,...c,...l};return u.length>0&&(f.className=u),Object.keys(h).length>0&&(f.style=h),{props:f,internalRef:m.ref}}function Zt(t,s){const{className:a,elementType:r,ownerState:n,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=s,{component:m,slots:u={[t]:void 0},slotProps:h={[t]:void 0},...f}=i,b=u[t]||r,w=un(h[t],n),{props:{component:S,...j},internalRef:v}=yR({className:a,...c,externalForwardedProps:t==="root"?f:void 0,externalSlotProps:w}),N=Bs(v,w?.ref,s.ref),C=t==="root"?S||m:S,P=xR(b,{...t==="root"&&!m&&!u[t]&&o,...t!=="root"&&!u[t]&&o,...j,...C&&!l&&{as:C},...C&&l&&{component:C},ref:N},n);return[b,P]}const vp=re.oneOfType([re.func,re.object]);function Zm(t){try{return t.matches(":focus-visible")}catch{}return!1}class ub{static create(){return new ub}static use(){const s=fR(ub.create).current,[a,r]=g.useState(!1);return s.shouldMount=a,s.setShouldMount=r,g.useEffect(s.mountEffect,[a]),s}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=XY(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...s){this.mount().then(()=>this.ref.current?.start(...s))}stop(...s){this.mount().then(()=>this.ref.current?.stop(...s))}pulsate(...s){this.mount().then(()=>this.ref.current?.pulsate(...s))}}function ZY(){return ub.use()}function XY(){let t,s;const a=new Promise((r,n)=>{t=r,s=n});return a.resolve=t,a.reject=s,a}function JY(t){const{className:s,classes:a,pulsate:r=!1,rippleX:n,rippleY:i,rippleSize:o,in:l,onExited:c,timeout:m}=t,[u,h]=g.useState(!1),f=et(s,a.ripple,a.rippleVisible,r&&a.ripplePulsate),b={width:o,height:o,top:-(o/2)+i,left:-(o/2)+n},w=et(a.child,u&&a.childLeaving,r&&a.childPulsate);return!l&&!u&&h(!0),g.useEffect(()=>{if(!l&&c!=null){const S=setTimeout(c,m);return()=>{clearTimeout(S)}}},[c,l,m]),e.jsx("span",{className:f,style:b,children:e.jsx("span",{className:w})})}const Ii=Tt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),xw=550,eG=80,tG=al`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,sG=al`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,aG=al`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,rG=Ne("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),nG=Ne(JY,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Ii.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${tG};
    animation-duration: ${xw}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${Ii.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${Ii.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Ii.childLeaving} {
    opacity: 0;
    animation-name: ${sG};
    animation-duration: ${xw}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${Ii.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${aG};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,iG=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTouchRipple"}),{center:n=!1,classes:i={},className:o,...l}=r,[c,m]=g.useState([]),u=g.useRef(0),h=g.useRef(null);g.useEffect(()=>{h.current&&(h.current(),h.current=null)},[c]);const f=g.useRef(!1),b=ni(),w=g.useRef(null),S=g.useRef(null),j=g.useCallback(P=>{const{pulsate:E,rippleX:M,rippleY:T,rippleSize:A,cb:L}=P;m(F=>[...F,e.jsx(nG,{classes:{ripple:et(i.ripple,Ii.ripple),rippleVisible:et(i.rippleVisible,Ii.rippleVisible),ripplePulsate:et(i.ripplePulsate,Ii.ripplePulsate),child:et(i.child,Ii.child),childLeaving:et(i.childLeaving,Ii.childLeaving),childPulsate:et(i.childPulsate,Ii.childPulsate)},timeout:xw,pulsate:E,rippleX:M,rippleY:T,rippleSize:A},u.current)]),u.current+=1,h.current=L},[i]),v=g.useCallback((P={},E={},M=()=>{})=>{const{pulsate:T=!1,center:A=n||E.pulsate,fakeElement:L=!1}=E;if(P?.type==="mousedown"&&f.current){f.current=!1;return}P?.type==="touchstart"&&(f.current=!0);const F=L?null:S.current,z=F?F.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,Q,Y;if(A||P===void 0||P.clientX===0&&P.clientY===0||!P.clientX&&!P.touches)I=Math.round(z.width/2),Q=Math.round(z.height/2);else{const{clientX:B,clientY:q}=P.touches&&P.touches.length>0?P.touches[0]:P;I=Math.round(B-z.left),Q=Math.round(q-z.top)}if(A)Y=Math.sqrt((2*z.width**2+z.height**2)/3),Y%2===0&&(Y+=1);else{const B=Math.max(Math.abs((F?F.clientWidth:0)-I),I)*2+2,q=Math.max(Math.abs((F?F.clientHeight:0)-Q),Q)*2+2;Y=Math.sqrt(B**2+q**2)}P?.touches?w.current===null&&(w.current=()=>{j({pulsate:T,rippleX:I,rippleY:Q,rippleSize:Y,cb:M})},b.start(eG,()=>{w.current&&(w.current(),w.current=null)})):j({pulsate:T,rippleX:I,rippleY:Q,rippleSize:Y,cb:M})},[n,j,b]),N=g.useCallback(()=>{v({},{pulsate:!0})},[v]),C=g.useCallback((P,E)=>{if(b.clear(),P?.type==="touchend"&&w.current){w.current(),w.current=null,b.start(0,()=>{C(P,E)});return}w.current=null,m(M=>M.length>0?M.slice(1):M),h.current=E},[b]);return g.useImperativeHandle(a,()=>({pulsate:N,start:v,stop:C}),[N,v,C]),e.jsx(rG,{className:et(Ii.root,i.root,o),ref:S,...l,children:e.jsx(ig,{component:null,exit:!0,children:c})})});function oG(t){return Dt("MuiButtonBase",t)}const lG=Tt("MuiButtonBase",["root","disabled","focusVisible"]),cG=t=>{const{disabled:s,focusVisible:a,focusVisibleClassName:r,classes:n}=t,o=kt({root:["root",s&&"disabled",a&&"focusVisible"]},oG,n);return a&&r&&(o.root+=` ${r}`),o},dG=Ne("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${lG.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),yo=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiButtonBase"}),{action:n,centerRipple:i=!1,children:o,className:l,component:c="button",disabled:m=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:f=!1,focusVisibleClassName:b,LinkComponent:w="a",onBlur:S,onClick:j,onContextMenu:v,onDragLeave:N,onFocus:C,onFocusVisible:P,onKeyDown:E,onKeyUp:M,onMouseDown:T,onMouseLeave:A,onMouseUp:L,onTouchEnd:F,onTouchMove:z,onTouchStart:I,tabIndex:Q=0,TouchRippleProps:Y,touchRippleRef:B,type:q,...V}=r,G=g.useRef(null),H=ZY(),D=Bs(H.ref,B),[R,$]=g.useState(!1);m&&R&&$(!1),g.useImperativeHandle(n,()=>({focusVisible:()=>{$(!0),G.current.focus()}}),[]);const W=H.shouldMount&&!u&&!m;g.useEffect(()=>{R&&f&&!u&&H.pulsate()},[u,f,R,H]);const J=Nl(H,"start",T,h),te=Nl(H,"stop",v,h),ee=Nl(H,"stop",N,h),ae=Nl(H,"stop",L,h),ce=Nl(H,"stop",ye=>{R&&ye.preventDefault(),A&&A(ye)},h),he=Nl(H,"start",I,h),ne=Nl(H,"stop",F,h),xe=Nl(H,"stop",z,h),ge=Nl(H,"stop",ye=>{Zm(ye.target)||$(!1),S&&S(ye)},!1),le=Ot(ye=>{G.current||(G.current=ye.currentTarget),Zm(ye.target)&&($(!0),P&&P(ye)),C&&C(ye)}),pe=()=>{const ye=G.current;return c&&c!=="button"&&!(ye.tagName==="A"&&ye.href)},Re=Ot(ye=>{f&&!ye.repeat&&R&&ye.key===" "&&H.stop(ye,()=>{H.start(ye)}),ye.target===ye.currentTarget&&pe()&&ye.key===" "&&ye.preventDefault(),E&&E(ye),ye.target===ye.currentTarget&&pe()&&ye.key==="Enter"&&!m&&(ye.preventDefault(),j&&j(ye))}),Se=Ot(ye=>{f&&ye.key===" "&&R&&!ye.defaultPrevented&&H.stop(ye,()=>{H.pulsate(ye)}),M&&M(ye),j&&ye.target===ye.currentTarget&&pe()&&ye.key===" "&&!ye.defaultPrevented&&j(ye)});let He=c;He==="button"&&(V.href||V.to)&&(He=w);const ze={};He==="button"?(ze.type=q===void 0?"button":q,ze.disabled=m):(!V.href&&!V.to&&(ze.role="button"),m&&(ze["aria-disabled"]=m));const st=Bs(a,G),ke={...r,centerRipple:i,component:c,disabled:m,disableRipple:u,disableTouchRipple:h,focusRipple:f,tabIndex:Q,focusVisible:R},We=cG(ke);return e.jsxs(dG,{as:He,className:et(We.root,l),ownerState:ke,onBlur:ge,onClick:j,onContextMenu:te,onFocus:le,onKeyDown:Re,onKeyUp:Se,onMouseDown:J,onMouseLeave:ce,onMouseUp:ae,onDragLeave:ee,onTouchEnd:ne,onTouchMove:xe,onTouchStart:he,ref:st,tabIndex:m?-1:Q,type:q,...ze,...V,children:[o,W?e.jsx(iG,{ref:D,center:i,...Y}):null]})});function Nl(t,s,a,r=!1){return Ot(n=>(a&&a(n),r||t[s](n),!0))}function uG(t){return typeof t.main=="string"}function mG(t,s=[]){if(!uG(t))return!1;for(const a of s)if(!t.hasOwnProperty(a)||typeof t[a]!="string")return!1;return!0}function Ma(t=[]){return([,s])=>s&&mG(s,t)}function pG(t){return Dt("MuiAlert",t)}const vk=Tt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function hG(t){return Dt("MuiCircularProgress",t)}Tt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Nc=44,gw=al`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,yw=al`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,fG=typeof gw!="string"?Jc`
        animation: ${gw} 1.4s linear infinite;
      `:null,xG=typeof yw!="string"?Jc`
        animation: ${yw} 1.4s ease-in-out infinite;
      `:null,gG=t=>{const{classes:s,variant:a,color:r,disableShrink:n}=t,i={root:["root",a,`color${Xe(r)}`],svg:["svg"],circle:["circle",`circle${Xe(a)}`,n&&"circleDisableShrink"]};return kt(i,hG,s)},yG=Ne("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.variant],s[`color${Xe(a.color)}`]]}})(Yt(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:fG||{animation:`${gw} 1.4s linear infinite`}},...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s},style:{color:(t.vars||t).palette[s].main}}))]}))),bG=Ne("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),vG=Ne("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.circle,s[`circle${Xe(a.variant)}`],a.disableShrink&&s.circleDisableShrink]}})(Yt(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:s})=>s.variant==="indeterminate"&&!s.disableShrink,style:xG||{animation:`${yw} 1.4s ease-in-out infinite`}}]}))),Ki=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiCircularProgress"}),{className:n,color:i="primary",disableShrink:o=!1,size:l=40,style:c,thickness:m=3.6,value:u=0,variant:h="indeterminate",...f}=r,b={...r,color:i,disableShrink:o,size:l,thickness:m,value:u,variant:h},w=gG(b),S={},j={},v={};if(h==="determinate"){const N=2*Math.PI*((Nc-m)/2);S.strokeDasharray=N.toFixed(3),v["aria-valuenow"]=Math.round(u),S.strokeDashoffset=`${((100-u)/100*N).toFixed(3)}px`,j.transform="rotate(-90deg)"}return e.jsx(yG,{className:et(w.root,n),style:{width:l,height:l,...j,...c},ownerState:b,ref:a,role:"progressbar",...v,...f,children:e.jsx(bG,{className:w.svg,ownerState:b,viewBox:`${Nc/2} ${Nc/2} ${Nc} ${Nc}`,children:e.jsx(vG,{className:w.circle,style:S,ownerState:b,cx:Nc,cy:Nc,r:(Nc-m)/2,fill:"none",strokeWidth:m})})})});function jG(t){return Dt("MuiIconButton",t)}const jk=Tt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),NG=t=>{const{classes:s,disabled:a,color:r,edge:n,size:i,loading:o}=t,l={root:["root",o&&"loading",a&&"disabled",r!=="default"&&`color${Xe(r)}`,n&&`edge${Xe(n)}`,`size${Xe(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return kt(l,jG,s)},wG=Ne(yo,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.loading&&s.loading,a.color!=="default"&&s[`color${Xe(a.color)}`],a.edge&&s[`edge${Xe(a.edge)}`],s[`size${Xe(a.size)}`]]}})(Yt(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:s=>!s.disableRipple,style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Yt(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s},style:{color:(t.vars||t).palette[s].main}})),...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s},style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette[s].main,(t.vars||t).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${jk.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${jk.loading}`]:{color:"transparent"}}))),_G=Ne("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),ta=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiIconButton"}),{edge:n=!1,children:i,className:o,color:l="default",disabled:c=!1,disableFocusRipple:m=!1,size:u="medium",id:h,loading:f=null,loadingIndicator:b,...w}=r,S=wn(h),j=b??e.jsx(Ki,{"aria-labelledby":S,color:"inherit",size:16}),v={...r,edge:n,color:l,disabled:c,disableFocusRipple:m,loading:f,loadingIndicator:j,size:u},N=NG(v);return e.jsxs(wG,{id:f?S:h,className:et(N.root,o),centerRipple:!0,focusRipple:!m,disabled:c||f,ref:a,...w,ownerState:v,children:[typeof f=="boolean"&&e.jsx("span",{className:N.loadingWrapper,style:{display:"contents"},children:e.jsx(_G,{className:N.loadingIndicator,ownerState:v,children:f&&j})}),i]})}),SG=Ut(e.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),CG=Ut(e.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),PG=Ut(e.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),kG=Ut(e.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),bR=Ut(e.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),EG=t=>{const{variant:s,color:a,severity:r,classes:n}=t,i={root:["root",`color${Xe(a||r)}`,`${s}${Xe(a||r)}`,`${s}`],icon:["icon"],message:["message"],action:["action"]};return kt(i,pG,n)},TG=Ne(oa,{name:"MuiAlert",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.variant],s[`${a.variant}${Xe(a.color||a.severity)}`]]}})(Yt(({theme:t})=>{const s=t.palette.mode==="light"?t.darken:t.lighten,a=t.palette.mode==="light"?t.lighten:t.darken;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(Ma(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:s(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${r}StandardBg`]:a(t.palette[r].light,.9),[`& .${vk.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(Ma(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:s(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${vk.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(Ma(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)}}}))]}})),MG=Ne("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),DG=Ne("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),RG=Ne("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Nk={success:e.jsx(SG,{fontSize:"inherit"}),warning:e.jsx(CG,{fontSize:"inherit"}),error:e.jsx(PG,{fontSize:"inherit"}),info:e.jsx(kG,{fontSize:"inherit"})},lt=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiAlert"}),{action:n,children:i,className:o,closeText:l="Close",color:c,components:m={},componentsProps:u={},icon:h,iconMapping:f=Nk,onClose:b,role:w="alert",severity:S="success",slotProps:j={},slots:v={},variant:N="standard",...C}=r,P={...r,color:c,severity:S,variant:N,colorSeverity:c||S},E=EG(P),M={slots:{closeButton:m.CloseButton,closeIcon:m.CloseIcon,...v},slotProps:{...u,...j}},[T,A]=Zt("root",{ref:a,shouldForwardComponentProp:!0,className:et(E.root,o),elementType:TG,externalForwardedProps:{...M,...C},ownerState:P,additionalProps:{role:w,elevation:0}}),[L,F]=Zt("icon",{className:E.icon,elementType:MG,externalForwardedProps:M,ownerState:P}),[z,I]=Zt("message",{className:E.message,elementType:DG,externalForwardedProps:M,ownerState:P}),[Q,Y]=Zt("action",{className:E.action,elementType:RG,externalForwardedProps:M,ownerState:P}),[B,q]=Zt("closeButton",{elementType:ta,externalForwardedProps:M,ownerState:P}),[V,G]=Zt("closeIcon",{elementType:bR,externalForwardedProps:M,ownerState:P});return e.jsxs(T,{...A,children:[h!==!1?e.jsx(L,{...F,children:h||f[S]||Nk[S]}):null,e.jsx(z,{...I,children:i}),n!=null?e.jsx(Q,{...Y,children:n}):null,n==null&&b?e.jsx(Q,{...Y,children:e.jsx(B,{size:"small","aria-label":l,title:l,color:"inherit",onClick:b,...q,children:e.jsx(V,{fontSize:"small",...G})})}):null]})});function AG(t){return Dt("MuiTypography",t)}const wk=Tt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),IG={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},OG=CY(),FG=t=>{const{align:s,gutterBottom:a,noWrap:r,paragraph:n,variant:i,classes:o}=t,l={root:["root",i,t.align!=="inherit"&&`align${Xe(s)}`,a&&"gutterBottom",r&&"noWrap",n&&"paragraph"]};return kt(l,AG,o)},LG=Ne("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.variant&&s[a.variant],a.align!=="inherit"&&s[`align${Xe(a.align)}`],a.noWrap&&s.noWrap,a.gutterBottom&&s.gutterBottom,a.paragraph&&s.paragraph]}})(Yt(({theme:t})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([s,a])=>s!=="inherit"&&a&&typeof a=="object").map(([s,a])=>({props:{variant:s},style:a})),...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s},style:{color:(t.vars||t).palette[s].main}})),...Object.entries(t.palette?.text||{}).filter(([,s])=>typeof s=="string").map(([s])=>({props:{color:`text${Xe(s)}`},style:{color:(t.vars||t).palette.text[s]}})),{props:({ownerState:s})=>s.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:s})=>s.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:s})=>s.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:s})=>s.paragraph,style:{marginBottom:16}}]}))),_k={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},x=g.forwardRef(function(s,a){const{color:r,...n}=es({props:s,name:"MuiTypography"}),i=!IG[r],o=OG({...n,...i&&{color:r}}),{align:l="inherit",className:c,component:m,gutterBottom:u=!1,noWrap:h=!1,paragraph:f=!1,variant:b="body1",variantMapping:w=_k,...S}=o,j={...o,align:l,color:r,className:c,component:m,gutterBottom:u,noWrap:h,paragraph:f,variant:b,variantMapping:w},v=m||(f?"p":w[b]||_k[b])||"span",N=FG(j);return e.jsx(LG,{as:v,ref:a,className:et(N.root,c),...S,ownerState:j,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...S.style}})});function p4(t){const s=g.useRef({});return g.useEffect(()=>{s.current=t}),s.current}function Sk({array1:t,array2:s,parser:a=r=>r}){return t&&s&&t.length===s.length&&t.every((r,n)=>a(r)===a(s[n]))}function Ck(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function $G(t={}){const{ignoreAccents:s=!0,ignoreCase:a=!0,limit:r,matchFrom:n="any",stringify:i,trim:o=!1}=t;return(l,{inputValue:c,getOptionLabel:m})=>{let u=o?c.trim():c;a&&(u=u.toLowerCase()),s&&(u=Ck(u));const h=u?l.filter(f=>{let b=(i||m)(f);return a&&(b=b.toLowerCase()),s&&(b=Ck(b)),n==="start"?b.startsWith(u):b.includes(u)}):l;return typeof r=="number"?h.slice(0,r):h}}const zG=$G(),Pk=5,qG=t=>t.current!==null&&t.current.parentElement?.contains(document.activeElement),BG=[];function kk(t,s,a,r){if(s||t==null||r)return"";const n=a(t);return typeof n=="string"?n:""}function UG(t){const{unstable_isActiveElementInListbox:s=qG,unstable_classNamePrefix:a="Mui",autoComplete:r=!1,autoHighlight:n=!1,autoSelect:i=!1,blurOnSelect:o=!1,clearOnBlur:l=!t.freeSolo,clearOnEscape:c=!1,componentName:m="useAutocomplete",defaultValue:u=t.multiple?BG:null,disableClearable:h=!1,disableCloseOnSelect:f=!1,disabled:b,disabledItemsFocusable:w=!1,disableListWrap:S=!1,filterOptions:j=zG,filterSelectedOptions:v=!1,freeSolo:N=!1,getOptionDisabled:C,getOptionKey:P,getOptionLabel:E=Pe=>Pe.label??Pe,groupBy:M,handleHomeEndKeys:T=!t.freeSolo,id:A,includeInputInList:L=!1,inputValue:F,isOptionEqualToValue:z=(Pe,Be)=>Pe===Be,multiple:I=!1,onChange:Q,onClose:Y,onHighlightChange:B,onInputChange:q,onOpen:V,open:G,openOnFocus:H=!1,options:D,readOnly:R=!1,renderValue:$,selectOnFocus:W=!t.freeSolo,value:J}=t,te=wn(A);let ee=E;ee=Pe=>{const Be=E(Pe);return typeof Be!="string"?String(Be):Be};const ae=g.useRef(!1),ce=g.useRef(!0),he=g.useRef(null),ne=g.useRef(null),[xe,ge]=g.useState(null),[le,pe]=g.useState(-1),Re=n?0:-1,Se=g.useRef(Re),He=g.useRef(kk(u??J,I,ee)).current,[ze,st]=On({controlled:J,default:u,name:m}),[ke,We]=On({controlled:F,default:He,name:m,state:"inputValue"}),[ye,Ye]=g.useState(!1),at=g.useCallback((Pe,Be,Mt)=>{if(!(I?ze.length<Be.length:Be!==null)&&!l)return;const Ht=kk(Be,I,ee,$);ke!==Ht&&(We(Ht),q&&q(Pe,Ht,Mt))},[ee,ke,I,q,We,l,ze,$]),[bt,ct]=On({controlled:G,default:!1,name:m,state:"open"}),[ht,Et]=g.useState(!0),be=!I&&ze!=null&&ke===ee(ze),Oe=bt&&!R,Le=Oe?j(D.filter(Pe=>!(v&&(I?ze:[ze]).some(Be=>Be!==null&&z(Pe,Be)))),{inputValue:be&&ht?"":ke,getOptionLabel:ee}):[],jt=p4({filteredOptions:Le,value:ze,inputValue:ke});g.useEffect(()=>{const Pe=ze!==jt.value;ye&&!Pe||N&&!Pe||at(null,ze,"reset")},[ze,at,ye,jt.value,N]);const Jt=bt&&Le.length>0&&!R,Kt=Ot(Pe=>{if(Pe===-1)he.current.focus();else{const Be=$?"data-item-index":"data-tag-index";xe.querySelector(`[${Be}="${Pe}"]`).focus()}});g.useEffect(()=>{I&&le>ze.length-1&&(pe(-1),Kt(-1))},[ze,I,le,Kt]);function rt(Pe,Be){if(!ne.current||Pe<0||Pe>=Le.length)return-1;let Mt=Pe;for(;;){const Qt=ne.current.querySelector(`[data-option-index="${Mt}"]`),Ht=w?!1:!Qt||Qt.disabled||Qt.getAttribute("aria-disabled")==="true";if(Qt&&Qt.hasAttribute("tabindex")&&!Ht)return Mt;if(Be==="next"?Mt=(Mt+1)%Le.length:Mt=(Mt-1+Le.length)%Le.length,Mt===Pe)return-1}}const Lt=Ot(({event:Pe,index:Be,reason:Mt})=>{if(Se.current=Be,Be===-1?he.current.removeAttribute("aria-activedescendant"):he.current.setAttribute("aria-activedescendant",`${te}-option-${Be}`),B&&["mouse","keyboard","touch"].includes(Mt)&&B(Pe,Be===-1?null:Le[Be],Mt),!ne.current)return;const Qt=ne.current.querySelector(`[role="option"].${a}-focused`);Qt&&(Qt.classList.remove(`${a}-focused`),Qt.classList.remove(`${a}-focusVisible`));let Ht=ne.current;if(ne.current.getAttribute("role")!=="listbox"&&(Ht=ne.current.parentElement.querySelector('[role="listbox"]')),!Ht)return;if(Be===-1){Ht.scrollTop=0;return}const Us=ne.current.querySelector(`[data-option-index="${Be}"]`);if(Us&&(Us.classList.add(`${a}-focused`),Mt==="keyboard"&&Us.classList.add(`${a}-focusVisible`),Ht.scrollHeight>Ht.clientHeight&&Mt!=="mouse"&&Mt!=="touch")){const Qs=Us,lr=Ht.clientHeight+Ht.scrollTop,Rs=Qs.offsetTop+Qs.offsetHeight;Rs>lr?Ht.scrollTop=Rs-Ht.clientHeight:Qs.offsetTop-Qs.offsetHeight*(M?1.3:0)<Ht.scrollTop&&(Ht.scrollTop=Qs.offsetTop-Qs.offsetHeight*(M?1.3:0))}}),Nt=Ot(({event:Pe,diff:Be,direction:Mt="next",reason:Qt})=>{if(!Oe)return;const Us=rt((()=>{const Qs=Le.length-1;if(Be==="reset")return Re;if(Be==="start")return 0;if(Be==="end")return Qs;const lr=Se.current+Be;return lr<0?lr===-1&&L?-1:S&&Se.current!==-1||Math.abs(Be)>1?0:Qs:lr>Qs?lr===Qs+1&&L?-1:S||Math.abs(Be)>1?Qs:0:lr})(),Mt);if(Lt({index:Us,reason:Qt,event:Pe}),r&&Be!=="reset")if(Us===-1)he.current.value=ke;else{const Qs=ee(Le[Us]);he.current.value=Qs,Qs.toLowerCase().indexOf(ke.toLowerCase())===0&&ke.length>0&&he.current.setSelectionRange(ke.length,Qs.length)}}),ps=!Sk({array1:jt.filteredOptions,array2:Le,parser:ee}),cs=()=>{const Pe=(Be,Mt)=>{const Qt=Be?ee(Be):"",Ht=Mt?ee(Mt):"";return Qt===Ht};if(Se.current!==-1&&!Sk({array1:jt.filteredOptions,array2:Le,parser:ee})&&jt.inputValue===ke&&(I?ze.length===jt.value.length&&jt.value.every((Be,Mt)=>ee(ze[Mt])===ee(Be)):Pe(jt.value,ze))){const Be=jt.filteredOptions[Se.current];if(Be)return Le.findIndex(Mt=>ee(Mt)===ee(Be))}return-1},Ns=g.useCallback(()=>{if(!Oe)return;const Pe=cs();if(Pe!==-1){Se.current=Pe;return}const Be=I?ze[0]:ze;if(Le.length===0||Be==null){Nt({diff:"reset"});return}if(ne.current){if(Be!=null){const Mt=Le[Se.current];if(I&&Mt&&ze.findIndex(Ht=>z(Mt,Ht))!==-1)return;const Qt=Le.findIndex(Ht=>z(Ht,Be));Qt===-1?Nt({diff:"reset"}):Lt({index:Qt});return}if(Se.current>=Le.length-1){Lt({index:Le.length-1});return}Lt({index:Se.current})}},[Le.length,I?!1:ze,v,Nt,Lt,Oe,ke,I]),Ys=Ot(Pe=>{mw(ne,Pe),Pe&&Ns()});g.useEffect(()=>{ps&&Ns()},[Ns,ps]);const Is=Pe=>{bt||(ct(!0),Et(!0),V&&V(Pe))},Ms=(Pe,Be)=>{bt&&(ct(!1),Y&&Y(Pe,Be))},pa=(Pe,Be,Mt,Qt)=>{if(I){if(ze.length===Be.length&&ze.every((Ht,Us)=>Ht===Be[Us]))return}else if(ze===Be)return;Q&&Q(Pe,Be,Mt,Qt),st(Be)},ha=g.useRef(!1),ia=(Pe,Be,Mt="selectOption",Qt="options")=>{let Ht=Mt,Us=Be;if(I){Us=Array.isArray(ze)?ze.slice():[];const Qs=Us.findIndex(lr=>z(Be,lr));Qs===-1?Us.push(Be):Qt!=="freeSolo"&&(Us.splice(Qs,1),Ht="removeOption")}at(Pe,Us,Ht),pa(Pe,Us,Ht,{option:Be}),!f&&(!Pe||!Pe.ctrlKey&&!Pe.metaKey)&&Ms(Pe,Ht),(o===!0||o==="touch"&&ha.current||o==="mouse"&&!ha.current)&&he.current.blur()};function $t(Pe,Be){if(Pe===-1)return-1;let Mt=Pe;for(;;){if(Be==="next"&&Mt===ze.length||Be==="previous"&&Mt===-1)return-1;const Qt=$?"data-item-index":"data-tag-index",Ht=xe.querySelector(`[${Qt}="${Mt}"]`);if(!Ht||!Ht.hasAttribute("tabindex")||Ht.disabled||Ht.getAttribute("aria-disabled")==="true")Mt+=Be==="next"?1:-1;else return Mt}}const $s=(Pe,Be)=>{if(!I)return;ke===""&&Ms(Pe,"toggleInput");let Mt=le;le===-1?ke===""&&Be==="previous"&&(Mt=ze.length-1):(Mt+=Be==="next"?1:-1,Mt<0&&(Mt=0),Mt===ze.length&&(Mt=-1)),Mt=$t(Mt,Be),pe(Mt),Kt(Mt)},zt=Pe=>{ae.current=!0,We(""),q&&q(Pe,"","clear"),pa(Pe,I?[]:null,"clear")},qt=Pe=>Be=>{if(Pe.onKeyDown&&Pe.onKeyDown(Be),!Be.defaultMuiPrevented&&(le!==-1&&!["ArrowLeft","ArrowRight"].includes(Be.key)&&(pe(-1),Kt(-1)),Be.which!==229))switch(Be.key){case"Home":Oe&&T&&(Be.preventDefault(),Nt({diff:"start",direction:"next",reason:"keyboard",event:Be}));break;case"End":Oe&&T&&(Be.preventDefault(),Nt({diff:"end",direction:"previous",reason:"keyboard",event:Be}));break;case"PageUp":Be.preventDefault(),Nt({diff:-Pk,direction:"previous",reason:"keyboard",event:Be}),Is(Be);break;case"PageDown":Be.preventDefault(),Nt({diff:Pk,direction:"next",reason:"keyboard",event:Be}),Is(Be);break;case"ArrowDown":Be.preventDefault(),Nt({diff:1,direction:"next",reason:"keyboard",event:Be}),Is(Be);break;case"ArrowUp":Be.preventDefault(),Nt({diff:-1,direction:"previous",reason:"keyboard",event:Be}),Is(Be);break;case"ArrowLeft":!I&&$?Kt(0):$s(Be,"previous");break;case"ArrowRight":!I&&$?Kt(-1):$s(Be,"next");break;case"Enter":if(Se.current!==-1&&Oe){const Mt=Le[Se.current],Qt=C?C(Mt):!1;if(Be.preventDefault(),Qt)return;ia(Be,Mt,"selectOption"),r&&he.current.setSelectionRange(he.current.value.length,he.current.value.length)}else N&&ke!==""&&be===!1&&(I&&Be.preventDefault(),ia(Be,ke,"createOption","freeSolo"));break;case"Escape":Oe?(Be.preventDefault(),Be.stopPropagation(),Ms(Be,"escape")):c&&(ke!==""||I&&ze.length>0||$)&&(Be.preventDefault(),Be.stopPropagation(),zt(Be));break;case"Backspace":if(I&&!R&&ke===""&&ze.length>0){const Mt=le===-1?ze.length-1:le,Qt=ze.slice();Qt.splice(Mt,1),pa(Be,Qt,"removeOption",{option:ze[Mt]})}!I&&$&&!R&&(st(null),Kt(-1));break;case"Delete":if(I&&!R&&ke===""&&ze.length>0&&le!==-1){const Mt=le,Qt=ze.slice();Qt.splice(Mt,1),pa(Be,Qt,"removeOption",{option:ze[Mt]})}!I&&$&&!R&&(st(null),Kt(-1));break}},ds=Pe=>{Ye(!0),H&&!ae.current&&Is(Pe)},ve=Pe=>{if(s(ne)){he.current.focus();return}Ye(!1),ce.current=!0,ae.current=!1,i&&Se.current!==-1&&Oe?ia(Pe,Le[Se.current],"blur"):i&&N&&ke!==""?ia(Pe,ke,"blur","freeSolo"):l&&at(Pe,ze,"blur"),Ms(Pe,"blur")},Ce=Pe=>{const Be=Pe.target.value;ke!==Be&&(We(Be),Et(!1),q&&q(Pe,Be,"input")),Be===""?!h&&!I&&pa(Pe,null,"clear"):Is(Pe)},qe=Pe=>{const Be=Number(Pe.currentTarget.getAttribute("data-option-index"));Se.current!==Be&&Lt({event:Pe,index:Be,reason:"mouse"})},gt=Pe=>{Lt({event:Pe,index:Number(Pe.currentTarget.getAttribute("data-option-index")),reason:"touch"}),ha.current=!0},de=Pe=>{const Be=Number(Pe.currentTarget.getAttribute("data-option-index"));ia(Pe,Le[Be],"selectOption"),ha.current=!1},Ee=Pe=>Be=>{const Mt=ze.slice();Mt.splice(Pe,1),pa(Be,Mt,"removeOption",{option:ze[Pe]})},Ae=Pe=>{pa(Pe,null,"removeOption",{option:ze})},ft=Pe=>{bt?Ms(Pe,"toggleInput"):Is(Pe)},_t=Pe=>{Pe.currentTarget.contains(Pe.target)&&Pe.target.getAttribute("id")!==te&&Pe.preventDefault()},Gt=Pe=>{Pe.currentTarget.contains(Pe.target)&&(he.current.focus(),W&&ce.current&&he.current.selectionEnd-he.current.selectionStart===0&&he.current.select(),ce.current=!1)},ss=Pe=>{!b&&(ke===""||!bt)&&ft(Pe)};let $e=N&&ke.length>0;$e=$e||(I?ze.length>0:ze!==null);let Rt=Le;return M&&(Rt=Le.reduce((Pe,Be,Mt)=>{const Qt=M(Be);return Pe.length>0&&Pe[Pe.length-1].group===Qt?Pe[Pe.length-1].options.push(Be):Pe.push({key:Mt,index:Mt,group:Qt,options:[Be]}),Pe},[])),b&&ye&&ve(),{getRootProps:(Pe={})=>({...Pe,onKeyDown:qt(Pe),onMouseDown:_t,onClick:Gt}),getInputLabelProps:()=>({id:`${te}-label`,htmlFor:te}),getInputProps:()=>({id:te,value:ke,onBlur:ve,onFocus:ds,onChange:Ce,onMouseDown:ss,"aria-activedescendant":Oe?"":null,"aria-autocomplete":r?"both":"list","aria-controls":Jt?`${te}-listbox`:void 0,"aria-expanded":Jt,autoComplete:"off",ref:he,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:b}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:zt}),getItemProps:({index:Pe=0}={})=>({...I&&{key:Pe},...$?{"data-item-index":Pe}:{"data-tag-index":Pe},tabIndex:-1,...!R&&{onDelete:I?Ee(Pe):Ae}}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:ft}),getTagProps:({index:Pe})=>({key:Pe,"data-tag-index":Pe,tabIndex:-1,...!R&&{onDelete:Ee(Pe)}}),getListboxProps:()=>({role:"listbox",id:`${te}-listbox`,"aria-labelledby":`${te}-label`,ref:Ys,onMouseDown:Pe=>{Pe.preventDefault()}}),getOptionProps:({index:Pe,option:Be})=>{const Mt=(I?ze:[ze]).some(Ht=>Ht!=null&&z(Be,Ht)),Qt=C?C(Be):!1;return{key:P?.(Be)??ee(Be),tabIndex:-1,role:"option",id:`${te}-option-${Pe}`,onMouseMove:qe,onClick:de,onTouchStart:gt,"data-option-index":Pe,"aria-disabled":Qt,"aria-selected":Mt}},id:te,inputValue:ke,value:ze,dirty:$e,expanded:Oe&&xe,popupOpen:Oe,focused:ye||le!==-1,anchorEl:xe,setAnchorEl:ge,focusedItem:le,focusedTag:le,groupedOptions:Rt}}var Fn="top",Qi="bottom",Zi="right",Ln="left",h4="auto",og=[Fn,Qi,Zi,Ln],Xm="start",hx="end",VG="clippingParents",vR="viewport",Ah="popper",HG="reference",Ek=og.reduce(function(t,s){return t.concat([s+"-"+Xm,s+"-"+hx])},[]),jR=[].concat(og,[h4]).reduce(function(t,s){return t.concat([s,s+"-"+Xm,s+"-"+hx])},[]),WG="beforeRead",YG="read",GG="afterRead",KG="beforeMain",QG="main",ZG="afterMain",XG="beforeWrite",JG="write",eK="afterWrite",tK=[WG,YG,GG,KG,QG,ZG,XG,JG,eK];function tl(t){return t?(t.nodeName||"").toLowerCase():null}function pi(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var s=t.ownerDocument;return s&&s.defaultView||window}return t}function su(t){var s=pi(t).Element;return t instanceof s||t instanceof Element}function Vi(t){var s=pi(t).HTMLElement;return t instanceof s||t instanceof HTMLElement}function f4(t){if(typeof ShadowRoot>"u")return!1;var s=pi(t).ShadowRoot;return t instanceof s||t instanceof ShadowRoot}function sK(t){var s=t.state;Object.keys(s.elements).forEach(function(a){var r=s.styles[a]||{},n=s.attributes[a]||{},i=s.elements[a];!Vi(i)||!tl(i)||(Object.assign(i.style,r),Object.keys(n).forEach(function(o){var l=n[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function aK(t){var s=t.state,a={popper:{position:s.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(s.elements.popper.style,a.popper),s.styles=a,s.elements.arrow&&Object.assign(s.elements.arrow.style,a.arrow),function(){Object.keys(s.elements).forEach(function(r){var n=s.elements[r],i=s.attributes[r]||{},o=Object.keys(s.styles.hasOwnProperty(r)?s.styles[r]:a[r]),l=o.reduce(function(c,m){return c[m]="",c},{});!Vi(n)||!tl(n)||(Object.assign(n.style,l),Object.keys(i).forEach(function(c){n.removeAttribute(c)}))})}}const rK={name:"applyStyles",enabled:!0,phase:"write",fn:sK,effect:aK,requires:["computeStyles"]};function Qo(t){return t.split("-")[0]}var Kd=Math.max,mb=Math.min,Jm=Math.round;function bw(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(s){return s.brand+"/"+s.version}).join(" "):navigator.userAgent}function NR(){return!/^((?!chrome|android).)*safari/i.test(bw())}function ep(t,s,a){s===void 0&&(s=!1),a===void 0&&(a=!1);var r=t.getBoundingClientRect(),n=1,i=1;s&&Vi(t)&&(n=t.offsetWidth>0&&Jm(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&Jm(r.height)/t.offsetHeight||1);var o=su(t)?pi(t):window,l=o.visualViewport,c=!NR()&&a,m=(r.left+(c&&l?l.offsetLeft:0))/n,u=(r.top+(c&&l?l.offsetTop:0))/i,h=r.width/n,f=r.height/i;return{width:h,height:f,top:u,right:m+h,bottom:u+f,left:m,x:m,y:u}}function x4(t){var s=ep(t),a=t.offsetWidth,r=t.offsetHeight;return Math.abs(s.width-a)<=1&&(a=s.width),Math.abs(s.height-r)<=1&&(r=s.height),{x:t.offsetLeft,y:t.offsetTop,width:a,height:r}}function wR(t,s){var a=s.getRootNode&&s.getRootNode();if(t.contains(s))return!0;if(a&&f4(a)){var r=s;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Wl(t){return pi(t).getComputedStyle(t)}function nK(t){return["table","td","th"].indexOf(tl(t))>=0}function ed(t){return((su(t)?t.ownerDocument:t.document)||window.document).documentElement}function hv(t){return tl(t)==="html"?t:t.assignedSlot||t.parentNode||(f4(t)?t.host:null)||ed(t)}function Tk(t){return!Vi(t)||Wl(t).position==="fixed"?null:t.offsetParent}function iK(t){var s=/firefox/i.test(bw()),a=/Trident/i.test(bw());if(a&&Vi(t)){var r=Wl(t);if(r.position==="fixed")return null}var n=hv(t);for(f4(n)&&(n=n.host);Vi(n)&&["html","body"].indexOf(tl(n))<0;){var i=Wl(n);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||s&&i.willChange==="filter"||s&&i.filter&&i.filter!=="none")return n;n=n.parentNode}return null}function lg(t){for(var s=pi(t),a=Tk(t);a&&nK(a)&&Wl(a).position==="static";)a=Tk(a);return a&&(tl(a)==="html"||tl(a)==="body"&&Wl(a).position==="static")?s:a||iK(t)||s}function g4(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function qf(t,s,a){return Kd(t,mb(s,a))}function oK(t,s,a){var r=qf(t,s,a);return r>a?a:r}function _R(){return{top:0,right:0,bottom:0,left:0}}function SR(t){return Object.assign({},_R(),t)}function CR(t,s){return s.reduce(function(a,r){return a[r]=t,a},{})}var lK=function(s,a){return s=typeof s=="function"?s(Object.assign({},a.rects,{placement:a.placement})):s,SR(typeof s!="number"?s:CR(s,og))};function cK(t){var s,a=t.state,r=t.name,n=t.options,i=a.elements.arrow,o=a.modifiersData.popperOffsets,l=Qo(a.placement),c=g4(l),m=[Ln,Zi].indexOf(l)>=0,u=m?"height":"width";if(!(!i||!o)){var h=lK(n.padding,a),f=x4(i),b=c==="y"?Fn:Ln,w=c==="y"?Qi:Zi,S=a.rects.reference[u]+a.rects.reference[c]-o[c]-a.rects.popper[u],j=o[c]-a.rects.reference[c],v=lg(i),N=v?c==="y"?v.clientHeight||0:v.clientWidth||0:0,C=S/2-j/2,P=h[b],E=N-f[u]-h[w],M=N/2-f[u]/2+C,T=qf(P,M,E),A=c;a.modifiersData[r]=(s={},s[A]=T,s.centerOffset=T-M,s)}}function dK(t){var s=t.state,a=t.options,r=a.element,n=r===void 0?"[data-popper-arrow]":r;n!=null&&(typeof n=="string"&&(n=s.elements.popper.querySelector(n),!n)||wR(s.elements.popper,n)&&(s.elements.arrow=n))}const uK={name:"arrow",enabled:!0,phase:"main",fn:cK,effect:dK,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function tp(t){return t.split("-")[1]}var mK={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pK(t,s){var a=t.x,r=t.y,n=s.devicePixelRatio||1;return{x:Jm(a*n)/n||0,y:Jm(r*n)/n||0}}function Mk(t){var s,a=t.popper,r=t.popperRect,n=t.placement,i=t.variation,o=t.offsets,l=t.position,c=t.gpuAcceleration,m=t.adaptive,u=t.roundOffsets,h=t.isFixed,f=o.x,b=f===void 0?0:f,w=o.y,S=w===void 0?0:w,j=typeof u=="function"?u({x:b,y:S}):{x:b,y:S};b=j.x,S=j.y;var v=o.hasOwnProperty("x"),N=o.hasOwnProperty("y"),C=Ln,P=Fn,E=window;if(m){var M=lg(a),T="clientHeight",A="clientWidth";if(M===pi(a)&&(M=ed(a),Wl(M).position!=="static"&&l==="absolute"&&(T="scrollHeight",A="scrollWidth")),M=M,n===Fn||(n===Ln||n===Zi)&&i===hx){P=Qi;var L=h&&M===E&&E.visualViewport?E.visualViewport.height:M[T];S-=L-r.height,S*=c?1:-1}if(n===Ln||(n===Fn||n===Qi)&&i===hx){C=Zi;var F=h&&M===E&&E.visualViewport?E.visualViewport.width:M[A];b-=F-r.width,b*=c?1:-1}}var z=Object.assign({position:l},m&&mK),I=u===!0?pK({x:b,y:S},pi(a)):{x:b,y:S};if(b=I.x,S=I.y,c){var Q;return Object.assign({},z,(Q={},Q[P]=N?"0":"",Q[C]=v?"0":"",Q.transform=(E.devicePixelRatio||1)<=1?"translate("+b+"px, "+S+"px)":"translate3d("+b+"px, "+S+"px, 0)",Q))}return Object.assign({},z,(s={},s[P]=N?S+"px":"",s[C]=v?b+"px":"",s.transform="",s))}function hK(t){var s=t.state,a=t.options,r=a.gpuAcceleration,n=r===void 0?!0:r,i=a.adaptive,o=i===void 0?!0:i,l=a.roundOffsets,c=l===void 0?!0:l,m={placement:Qo(s.placement),variation:tp(s.placement),popper:s.elements.popper,popperRect:s.rects.popper,gpuAcceleration:n,isFixed:s.options.strategy==="fixed"};s.modifiersData.popperOffsets!=null&&(s.styles.popper=Object.assign({},s.styles.popper,Mk(Object.assign({},m,{offsets:s.modifiersData.popperOffsets,position:s.options.strategy,adaptive:o,roundOffsets:c})))),s.modifiersData.arrow!=null&&(s.styles.arrow=Object.assign({},s.styles.arrow,Mk(Object.assign({},m,{offsets:s.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-placement":s.placement})}const fK={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:hK,data:{}};var W0={passive:!0};function xK(t){var s=t.state,a=t.instance,r=t.options,n=r.scroll,i=n===void 0?!0:n,o=r.resize,l=o===void 0?!0:o,c=pi(s.elements.popper),m=[].concat(s.scrollParents.reference,s.scrollParents.popper);return i&&m.forEach(function(u){u.addEventListener("scroll",a.update,W0)}),l&&c.addEventListener("resize",a.update,W0),function(){i&&m.forEach(function(u){u.removeEventListener("scroll",a.update,W0)}),l&&c.removeEventListener("resize",a.update,W0)}}const gK={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:xK,data:{}};var yK={left:"right",right:"left",bottom:"top",top:"bottom"};function $y(t){return t.replace(/left|right|bottom|top/g,function(s){return yK[s]})}var bK={start:"end",end:"start"};function Dk(t){return t.replace(/start|end/g,function(s){return bK[s]})}function y4(t){var s=pi(t),a=s.pageXOffset,r=s.pageYOffset;return{scrollLeft:a,scrollTop:r}}function b4(t){return ep(ed(t)).left+y4(t).scrollLeft}function vK(t,s){var a=pi(t),r=ed(t),n=a.visualViewport,i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(n){i=n.width,o=n.height;var m=NR();(m||!m&&s==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:i,height:o,x:l+b4(t),y:c}}function jK(t){var s,a=ed(t),r=y4(t),n=(s=t.ownerDocument)==null?void 0:s.body,i=Kd(a.scrollWidth,a.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=Kd(a.scrollHeight,a.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),l=-r.scrollLeft+b4(t),c=-r.scrollTop;return Wl(n||a).direction==="rtl"&&(l+=Kd(a.clientWidth,n?n.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function v4(t){var s=Wl(t),a=s.overflow,r=s.overflowX,n=s.overflowY;return/auto|scroll|overlay|hidden/.test(a+n+r)}function PR(t){return["html","body","#document"].indexOf(tl(t))>=0?t.ownerDocument.body:Vi(t)&&v4(t)?t:PR(hv(t))}function Bf(t,s){var a;s===void 0&&(s=[]);var r=PR(t),n=r===((a=t.ownerDocument)==null?void 0:a.body),i=pi(r),o=n?[i].concat(i.visualViewport||[],v4(r)?r:[]):r,l=s.concat(o);return n?l:l.concat(Bf(hv(o)))}function vw(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function NK(t,s){var a=ep(t,!1,s==="fixed");return a.top=a.top+t.clientTop,a.left=a.left+t.clientLeft,a.bottom=a.top+t.clientHeight,a.right=a.left+t.clientWidth,a.width=t.clientWidth,a.height=t.clientHeight,a.x=a.left,a.y=a.top,a}function Rk(t,s,a){return s===vR?vw(vK(t,a)):su(s)?NK(s,a):vw(jK(ed(t)))}function wK(t){var s=Bf(hv(t)),a=["absolute","fixed"].indexOf(Wl(t).position)>=0,r=a&&Vi(t)?lg(t):t;return su(r)?s.filter(function(n){return su(n)&&wR(n,r)&&tl(n)!=="body"}):[]}function _K(t,s,a,r){var n=s==="clippingParents"?wK(t):[].concat(s),i=[].concat(n,[a]),o=i[0],l=i.reduce(function(c,m){var u=Rk(t,m,r);return c.top=Kd(u.top,c.top),c.right=mb(u.right,c.right),c.bottom=mb(u.bottom,c.bottom),c.left=Kd(u.left,c.left),c},Rk(t,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function kR(t){var s=t.reference,a=t.element,r=t.placement,n=r?Qo(r):null,i=r?tp(r):null,o=s.x+s.width/2-a.width/2,l=s.y+s.height/2-a.height/2,c;switch(n){case Fn:c={x:o,y:s.y-a.height};break;case Qi:c={x:o,y:s.y+s.height};break;case Zi:c={x:s.x+s.width,y:l};break;case Ln:c={x:s.x-a.width,y:l};break;default:c={x:s.x,y:s.y}}var m=n?g4(n):null;if(m!=null){var u=m==="y"?"height":"width";switch(i){case Xm:c[m]=c[m]-(s[u]/2-a[u]/2);break;case hx:c[m]=c[m]+(s[u]/2-a[u]/2);break}}return c}function fx(t,s){s===void 0&&(s={});var a=s,r=a.placement,n=r===void 0?t.placement:r,i=a.strategy,o=i===void 0?t.strategy:i,l=a.boundary,c=l===void 0?VG:l,m=a.rootBoundary,u=m===void 0?vR:m,h=a.elementContext,f=h===void 0?Ah:h,b=a.altBoundary,w=b===void 0?!1:b,S=a.padding,j=S===void 0?0:S,v=SR(typeof j!="number"?j:CR(j,og)),N=f===Ah?HG:Ah,C=t.rects.popper,P=t.elements[w?N:f],E=_K(su(P)?P:P.contextElement||ed(t.elements.popper),c,u,o),M=ep(t.elements.reference),T=kR({reference:M,element:C,placement:n}),A=vw(Object.assign({},C,T)),L=f===Ah?A:M,F={top:E.top-L.top+v.top,bottom:L.bottom-E.bottom+v.bottom,left:E.left-L.left+v.left,right:L.right-E.right+v.right},z=t.modifiersData.offset;if(f===Ah&&z){var I=z[n];Object.keys(F).forEach(function(Q){var Y=[Zi,Qi].indexOf(Q)>=0?1:-1,B=[Fn,Qi].indexOf(Q)>=0?"y":"x";F[Q]+=I[B]*Y})}return F}function SK(t,s){s===void 0&&(s={});var a=s,r=a.placement,n=a.boundary,i=a.rootBoundary,o=a.padding,l=a.flipVariations,c=a.allowedAutoPlacements,m=c===void 0?jR:c,u=tp(r),h=u?l?Ek:Ek.filter(function(w){return tp(w)===u}):og,f=h.filter(function(w){return m.indexOf(w)>=0});f.length===0&&(f=h);var b=f.reduce(function(w,S){return w[S]=fx(t,{placement:S,boundary:n,rootBoundary:i,padding:o})[Qo(S)],w},{});return Object.keys(b).sort(function(w,S){return b[w]-b[S]})}function CK(t){if(Qo(t)===h4)return[];var s=$y(t);return[Dk(t),s,Dk(s)]}function PK(t){var s=t.state,a=t.options,r=t.name;if(!s.modifiersData[r]._skip){for(var n=a.mainAxis,i=n===void 0?!0:n,o=a.altAxis,l=o===void 0?!0:o,c=a.fallbackPlacements,m=a.padding,u=a.boundary,h=a.rootBoundary,f=a.altBoundary,b=a.flipVariations,w=b===void 0?!0:b,S=a.allowedAutoPlacements,j=s.options.placement,v=Qo(j),N=v===j,C=c||(N||!w?[$y(j)]:CK(j)),P=[j].concat(C).reduce(function(J,te){return J.concat(Qo(te)===h4?SK(s,{placement:te,boundary:u,rootBoundary:h,padding:m,flipVariations:w,allowedAutoPlacements:S}):te)},[]),E=s.rects.reference,M=s.rects.popper,T=new Map,A=!0,L=P[0],F=0;F<P.length;F++){var z=P[F],I=Qo(z),Q=tp(z)===Xm,Y=[Fn,Qi].indexOf(I)>=0,B=Y?"width":"height",q=fx(s,{placement:z,boundary:u,rootBoundary:h,altBoundary:f,padding:m}),V=Y?Q?Zi:Ln:Q?Qi:Fn;E[B]>M[B]&&(V=$y(V));var G=$y(V),H=[];if(i&&H.push(q[I]<=0),l&&H.push(q[V]<=0,q[G]<=0),H.every(function(J){return J})){L=z,A=!1;break}T.set(z,H)}if(A)for(var D=w?3:1,R=function(te){var ee=P.find(function(ae){var ce=T.get(ae);if(ce)return ce.slice(0,te).every(function(he){return he})});if(ee)return L=ee,"break"},$=D;$>0;$--){var W=R($);if(W==="break")break}s.placement!==L&&(s.modifiersData[r]._skip=!0,s.placement=L,s.reset=!0)}}const kK={name:"flip",enabled:!0,phase:"main",fn:PK,requiresIfExists:["offset"],data:{_skip:!1}};function Ak(t,s,a){return a===void 0&&(a={x:0,y:0}),{top:t.top-s.height-a.y,right:t.right-s.width+a.x,bottom:t.bottom-s.height+a.y,left:t.left-s.width-a.x}}function Ik(t){return[Fn,Zi,Qi,Ln].some(function(s){return t[s]>=0})}function EK(t){var s=t.state,a=t.name,r=s.rects.reference,n=s.rects.popper,i=s.modifiersData.preventOverflow,o=fx(s,{elementContext:"reference"}),l=fx(s,{altBoundary:!0}),c=Ak(o,r),m=Ak(l,n,i),u=Ik(c),h=Ik(m);s.modifiersData[a]={referenceClippingOffsets:c,popperEscapeOffsets:m,isReferenceHidden:u,hasPopperEscaped:h},s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const TK={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:EK};function MK(t,s,a){var r=Qo(t),n=[Ln,Fn].indexOf(r)>=0?-1:1,i=typeof a=="function"?a(Object.assign({},s,{placement:t})):a,o=i[0],l=i[1];return o=o||0,l=(l||0)*n,[Ln,Zi].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function DK(t){var s=t.state,a=t.options,r=t.name,n=a.offset,i=n===void 0?[0,0]:n,o=jR.reduce(function(u,h){return u[h]=MK(h,s.rects,i),u},{}),l=o[s.placement],c=l.x,m=l.y;s.modifiersData.popperOffsets!=null&&(s.modifiersData.popperOffsets.x+=c,s.modifiersData.popperOffsets.y+=m),s.modifiersData[r]=o}const RK={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:DK};function AK(t){var s=t.state,a=t.name;s.modifiersData[a]=kR({reference:s.rects.reference,element:s.rects.popper,placement:s.placement})}const IK={name:"popperOffsets",enabled:!0,phase:"read",fn:AK,data:{}};function OK(t){return t==="x"?"y":"x"}function FK(t){var s=t.state,a=t.options,r=t.name,n=a.mainAxis,i=n===void 0?!0:n,o=a.altAxis,l=o===void 0?!1:o,c=a.boundary,m=a.rootBoundary,u=a.altBoundary,h=a.padding,f=a.tether,b=f===void 0?!0:f,w=a.tetherOffset,S=w===void 0?0:w,j=fx(s,{boundary:c,rootBoundary:m,padding:h,altBoundary:u}),v=Qo(s.placement),N=tp(s.placement),C=!N,P=g4(v),E=OK(P),M=s.modifiersData.popperOffsets,T=s.rects.reference,A=s.rects.popper,L=typeof S=="function"?S(Object.assign({},s.rects,{placement:s.placement})):S,F=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),z=s.modifiersData.offset?s.modifiersData.offset[s.placement]:null,I={x:0,y:0};if(M){if(i){var Q,Y=P==="y"?Fn:Ln,B=P==="y"?Qi:Zi,q=P==="y"?"height":"width",V=M[P],G=V+j[Y],H=V-j[B],D=b?-A[q]/2:0,R=N===Xm?T[q]:A[q],$=N===Xm?-A[q]:-T[q],W=s.elements.arrow,J=b&&W?x4(W):{width:0,height:0},te=s.modifiersData["arrow#persistent"]?s.modifiersData["arrow#persistent"].padding:_R(),ee=te[Y],ae=te[B],ce=qf(0,T[q],J[q]),he=C?T[q]/2-D-ce-ee-F.mainAxis:R-ce-ee-F.mainAxis,ne=C?-T[q]/2+D+ce+ae+F.mainAxis:$+ce+ae+F.mainAxis,xe=s.elements.arrow&&lg(s.elements.arrow),ge=xe?P==="y"?xe.clientTop||0:xe.clientLeft||0:0,le=(Q=z?.[P])!=null?Q:0,pe=V+he-le-ge,Re=V+ne-le,Se=qf(b?mb(G,pe):G,V,b?Kd(H,Re):H);M[P]=Se,I[P]=Se-V}if(l){var He,ze=P==="x"?Fn:Ln,st=P==="x"?Qi:Zi,ke=M[E],We=E==="y"?"height":"width",ye=ke+j[ze],Ye=ke-j[st],at=[Fn,Ln].indexOf(v)!==-1,bt=(He=z?.[E])!=null?He:0,ct=at?ye:ke-T[We]-A[We]-bt+F.altAxis,ht=at?ke+T[We]+A[We]-bt-F.altAxis:Ye,Et=b&&at?oK(ct,ke,ht):qf(b?ct:ye,ke,b?ht:Ye);M[E]=Et,I[E]=Et-ke}s.modifiersData[r]=I}}const LK={name:"preventOverflow",enabled:!0,phase:"main",fn:FK,requiresIfExists:["offset"]};function $K(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function zK(t){return t===pi(t)||!Vi(t)?y4(t):$K(t)}function qK(t){var s=t.getBoundingClientRect(),a=Jm(s.width)/t.offsetWidth||1,r=Jm(s.height)/t.offsetHeight||1;return a!==1||r!==1}function BK(t,s,a){a===void 0&&(a=!1);var r=Vi(s),n=Vi(s)&&qK(s),i=ed(s),o=ep(t,n,a),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!a)&&((tl(s)!=="body"||v4(i))&&(l=zK(s)),Vi(s)?(c=ep(s,!0),c.x+=s.clientLeft,c.y+=s.clientTop):i&&(c.x=b4(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function UK(t){var s=new Map,a=new Set,r=[];t.forEach(function(i){s.set(i.name,i)});function n(i){a.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!a.has(l)){var c=s.get(l);c&&n(c)}}),r.push(i)}return t.forEach(function(i){a.has(i.name)||n(i)}),r}function VK(t){var s=UK(t);return tK.reduce(function(a,r){return a.concat(s.filter(function(n){return n.phase===r}))},[])}function HK(t){var s;return function(){return s||(s=new Promise(function(a){Promise.resolve().then(function(){s=void 0,a(t())})})),s}}function WK(t){var s=t.reduce(function(a,r){var n=a[r.name];return a[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,a},{});return Object.keys(s).map(function(a){return s[a]})}var Ok={placement:"bottom",modifiers:[],strategy:"absolute"};function Fk(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return!s.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function YK(t){t===void 0&&(t={});var s=t,a=s.defaultModifiers,r=a===void 0?[]:a,n=s.defaultOptions,i=n===void 0?Ok:n;return function(l,c,m){m===void 0&&(m=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ok,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},h=[],f=!1,b={state:u,setOptions:function(v){var N=typeof v=="function"?v(u.options):v;S(),u.options=Object.assign({},i,u.options,N),u.scrollParents={reference:su(l)?Bf(l):l.contextElement?Bf(l.contextElement):[],popper:Bf(c)};var C=VK(WK([].concat(r,u.options.modifiers)));return u.orderedModifiers=C.filter(function(P){return P.enabled}),w(),b.update()},forceUpdate:function(){if(!f){var v=u.elements,N=v.reference,C=v.popper;if(Fk(N,C)){u.rects={reference:BK(N,lg(C),u.options.strategy==="fixed"),popper:x4(C)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(F){return u.modifiersData[F.name]=Object.assign({},F.data)});for(var P=0;P<u.orderedModifiers.length;P++){if(u.reset===!0){u.reset=!1,P=-1;continue}var E=u.orderedModifiers[P],M=E.fn,T=E.options,A=T===void 0?{}:T,L=E.name;typeof M=="function"&&(u=M({state:u,options:A,name:L,instance:b})||u)}}}},update:HK(function(){return new Promise(function(j){b.forceUpdate(),j(u)})}),destroy:function(){S(),f=!0}};if(!Fk(l,c))return b;b.setOptions(m).then(function(j){!f&&m.onFirstUpdate&&m.onFirstUpdate(j)});function w(){u.orderedModifiers.forEach(function(j){var v=j.name,N=j.options,C=N===void 0?{}:N,P=j.effect;if(typeof P=="function"){var E=P({state:u,name:v,instance:b,options:C}),M=function(){};h.push(E||M)}})}function S(){h.forEach(function(j){return j()}),h=[]}return b}}var GK=[gK,IK,fK,rK,RK,kK,LK,uK,TK],KK=YK({defaultModifiers:GK});function ea(t){const{elementType:s,externalSlotProps:a,ownerState:r,skipResolvingSlotProps:n=!1,...i}=t,o=n?{}:un(a,r),{props:l,internalRef:c}=yR({...i,externalSlotProps:o}),m=Bs(c,o?.ref,t.additionalProps?.ref);return xR(s,{...l,ref:m},r)}function td(t){return parseInt(g.version,10)>=19?t?.props?.ref||null:t?.ref||null}function QK(t){return typeof t=="function"?t():t}const ER=g.forwardRef(function(s,a){const{children:r,container:n,disablePortal:i=!1}=s,[o,l]=g.useState(null),c=Bs(g.isValidElement(r)?td(r):null,a);if(Ia(()=>{i||l(QK(n)||document.body)},[n,i]),Ia(()=>{if(o&&!i)return mw(a,o),()=>{mw(a,null)}},[a,o,i]),i){if(g.isValidElement(r)){const m={ref:c};return g.cloneElement(r,m)}return r}return o&&Xx.createPortal(r,o)});function ZK(t){return Dt("MuiPopper",t)}Tt("MuiPopper",["root"]);function XK(t,s){if(s==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function jw(t){return typeof t=="function"?t():t}function JK(t){return t.nodeType!==void 0}const eQ=t=>{const{classes:s}=t;return kt({root:["root"]},ZK,s)},tQ={},sQ=g.forwardRef(function(s,a){const{anchorEl:r,children:n,direction:i,disablePortal:o,modifiers:l,open:c,placement:m,popperOptions:u,popperRef:h,slotProps:f={},slots:b={},TransitionProps:w,ownerState:S,...j}=s,v=g.useRef(null),N=Bs(v,a),C=g.useRef(null),P=Bs(C,h),E=g.useRef(P);Ia(()=>{E.current=P},[P]),g.useImperativeHandle(h,()=>C.current,[]);const M=XK(m,i),[T,A]=g.useState(M),[L,F]=g.useState(jw(r));g.useEffect(()=>{C.current&&C.current.forceUpdate()}),g.useEffect(()=>{r&&F(jw(r))},[r]),Ia(()=>{if(!L||!c)return;const B=G=>{A(G.placement)};let q=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:G})=>{B(G)}}];l!=null&&(q=q.concat(l)),u&&u.modifiers!=null&&(q=q.concat(u.modifiers));const V=KK(L,v.current,{placement:M,...u,modifiers:q});return E.current(V),()=>{V.destroy(),E.current(null)}},[L,o,l,c,u,M]);const z={placement:T};w!==null&&(z.TransitionProps=w);const I=eQ(s),Q=b.root??"div",Y=ea({elementType:Q,externalSlotProps:f.root,externalForwardedProps:j,additionalProps:{role:"tooltip",ref:N},ownerState:s,className:I.root});return e.jsx(Q,{...Y,children:typeof n=="function"?n(z):n})}),aQ=g.forwardRef(function(s,a){const{anchorEl:r,children:n,container:i,direction:o="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:m,open:u,placement:h="bottom",popperOptions:f=tQ,popperRef:b,style:w,transition:S=!1,slotProps:j={},slots:v={},...N}=s,[C,P]=g.useState(!0),E=()=>{P(!1)},M=()=>{P(!0)};if(!c&&!u&&(!S||C))return null;let T;if(i)T=i;else if(r){const F=jw(r);T=F&&JK(F)?ir(F).body:ir(null).body}const A=!u&&c&&(!S||C)?"none":void 0,L=S?{in:u,onEnter:E,onExited:M}:void 0;return e.jsx(ER,{disablePortal:l,container:T,children:e.jsx(sQ,{anchorEl:r,direction:o,disablePortal:l,modifiers:m,ref:a,open:S?!C:u,placement:h,popperOptions:f,popperRef:b,slotProps:j,slots:v,...N,style:{position:"fixed",top:0,left:0,display:A,...w},TransitionProps:L,children:n})})}),rQ=Ne(aQ,{name:"MuiPopper",slot:"Root"})({}),cg=g.forwardRef(function(s,a){const r=$r(),n=es({props:s,name:"MuiPopper"}),{anchorEl:i,component:o,components:l,componentsProps:c,container:m,disablePortal:u,keepMounted:h,modifiers:f,open:b,placement:w,popperOptions:S,popperRef:j,transition:v,slots:N,slotProps:C,...P}=n,E=N?.root??l?.Root,M={anchorEl:i,container:m,disablePortal:u,keepMounted:h,modifiers:f,open:b,placement:w,popperOptions:S,popperRef:j,transition:v,...P};return e.jsx(rQ,{as:o,direction:r?"rtl":"ltr",slots:{root:E},slotProps:C??c,...M,ref:a})});function nQ(t){return Dt("MuiListSubheader",t)}Tt("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const iQ=t=>{const{classes:s,color:a,disableGutters:r,inset:n,disableSticky:i}=t,o={root:["root",a!=="default"&&`color${Xe(a)}`,!r&&"gutters",n&&"inset",!i&&"sticky"]};return kt(o,nQ,s)},oQ=Ne("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.color!=="default"&&s[`color${Xe(a.color)}`],!a.disableGutters&&s.gutters,a.inset&&s.inset,!a.disableSticky&&s.sticky]}})(Yt(({theme:t})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(t.vars||t).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:s})=>!s.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:s})=>s.inset,style:{paddingLeft:72}},{props:({ownerState:s})=>!s.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper}}]}))),Nw=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiListSubheader"}),{className:n,color:i="default",component:o="li",disableGutters:l=!1,disableSticky:c=!1,inset:m=!1,...u}=r,h={...r,color:i,component:o,disableGutters:l,disableSticky:c,inset:m},f=iQ(h);return e.jsx(oQ,{as:o,className:et(f.root,n),ref:a,ownerState:h,...u})});Nw&&(Nw.muiSkipListHighlight=!0);const lQ=Ut(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function cQ(t){return Dt("MuiChip",t)}const Js=Tt("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),dQ=t=>{const{classes:s,disabled:a,size:r,color:n,iconColor:i,onDelete:o,clickable:l,variant:c}=t,m={root:["root",c,a&&"disabled",`size${Xe(r)}`,`color${Xe(n)}`,l&&"clickable",l&&`clickableColor${Xe(n)}`,o&&"deletable",o&&`deletableColor${Xe(n)}`,`${c}${Xe(n)}`],label:["label",`label${Xe(r)}`],avatar:["avatar",`avatar${Xe(r)}`,`avatarColor${Xe(n)}`],icon:["icon",`icon${Xe(r)}`,`iconColor${Xe(i)}`],deleteIcon:["deleteIcon",`deleteIcon${Xe(r)}`,`deleteIconColor${Xe(n)}`,`deleteIcon${Xe(c)}Color${Xe(n)}`]};return kt(m,cQ,s)},uQ=Ne("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t,{color:r,iconColor:n,clickable:i,onDelete:o,size:l,variant:c}=a;return[{[`& .${Js.avatar}`]:s.avatar},{[`& .${Js.avatar}`]:s[`avatar${Xe(l)}`]},{[`& .${Js.avatar}`]:s[`avatarColor${Xe(r)}`]},{[`& .${Js.icon}`]:s.icon},{[`& .${Js.icon}`]:s[`icon${Xe(l)}`]},{[`& .${Js.icon}`]:s[`iconColor${Xe(n)}`]},{[`& .${Js.deleteIcon}`]:s.deleteIcon},{[`& .${Js.deleteIcon}`]:s[`deleteIcon${Xe(l)}`]},{[`& .${Js.deleteIcon}`]:s[`deleteIconColor${Xe(r)}`]},{[`& .${Js.deleteIcon}`]:s[`deleteIcon${Xe(c)}Color${Xe(r)}`]},s.root,s[`size${Xe(l)}`],s[`color${Xe(r)}`],i&&s.clickable,i&&r!=="default"&&s[`clickableColor${Xe(r)})`],o&&s.deletable,o&&r!=="default"&&s[`deletableColor${Xe(r)}`],s[c],s[`${c}${Xe(r)}`]]}})(Yt(({theme:t})=>{const s=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Js.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Js.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:s,fontSize:t.typography.pxToRem(12)},[`& .${Js.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${Js.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${Js.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${Js.icon}`]:{marginLeft:5,marginRight:-6},[`& .${Js.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.alpha((t.vars||t).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.alpha((t.vars||t).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${Js.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${Js.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(Ma(["contrastText"])).map(([a])=>({props:{color:a},style:{backgroundColor:(t.vars||t).palette[a].main,color:(t.vars||t).palette[a].contrastText,[`& .${Js.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[a].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[a].contrastText}}}})),{props:a=>a.iconColor===a.color,style:{[`& .${Js.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:s}}},{props:a=>a.iconColor===a.color&&a.color!=="default",style:{[`& .${Js.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${Js.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}}},...Object.entries(t.palette).filter(Ma(["dark"])).map(([a])=>({props:{color:a,onDelete:!0},style:{[`&.${Js.focusVisible}`]:{background:(t.vars||t).palette[a].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)},[`&.${Js.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(Ma(["dark"])).map(([a])=>({props:{color:a,clickable:!0},style:{[`&:hover, &.${Js.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${Js.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${Js.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${Js.avatar}`]:{marginLeft:4},[`& .${Js.avatarSmall}`]:{marginLeft:2},[`& .${Js.icon}`]:{marginLeft:4},[`& .${Js.iconSmall}`]:{marginLeft:2},[`& .${Js.deleteIcon}`]:{marginRight:5},[`& .${Js.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(Ma()).map(([a])=>({props:{variant:"outlined",color:a},style:{color:(t.vars||t).palette[a].main,border:`1px solid ${t.alpha((t.vars||t).palette[a].main,.7)}`,[`&.${Js.clickable}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette[a].main,(t.vars||t).palette.action.hoverOpacity)},[`&.${Js.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette[a].main,(t.vars||t).palette.action.focusOpacity)},[`& .${Js.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[a].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[a].main}}}}))]}})),mQ=Ne("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,s)=>{const{ownerState:a}=t,{size:r}=a;return[s.label,s[`label${Xe(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function Lk(t){return t.key==="Backspace"||t.key==="Delete"}const Me=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiChip"}),{avatar:n,className:i,clickable:o,color:l="default",component:c,deleteIcon:m,disabled:u=!1,icon:h,label:f,onClick:b,onDelete:w,onKeyDown:S,onKeyUp:j,size:v="medium",variant:N="filled",tabIndex:C,skipFocusWhenDisabled:P=!1,slots:E={},slotProps:M={},...T}=r,A=g.useRef(null),L=Bs(A,a),F=ee=>{ee.stopPropagation(),w&&w(ee)},z=ee=>{ee.currentTarget===ee.target&&Lk(ee)&&ee.preventDefault(),S&&S(ee)},I=ee=>{ee.currentTarget===ee.target&&w&&Lk(ee)&&w(ee),j&&j(ee)},Q=o!==!1&&b?!0:o,Y=Q||w?yo:c||"div",B={...r,component:Y,disabled:u,size:v,color:l,iconColor:g.isValidElement(h)&&h.props.color||l,onDelete:!!w,clickable:Q,variant:N},q=dQ(B),V=Y===yo?{component:c||"div",focusVisibleClassName:q.focusVisible,...w&&{disableRipple:!0}}:{};let G=null;w&&(G=m&&g.isValidElement(m)?g.cloneElement(m,{className:et(m.props.className,q.deleteIcon),onClick:F}):e.jsx(lQ,{className:q.deleteIcon,onClick:F}));let H=null;n&&g.isValidElement(n)&&(H=g.cloneElement(n,{className:et(q.avatar,n.props.className)}));let D=null;h&&g.isValidElement(h)&&(D=g.cloneElement(h,{className:et(q.icon,h.props.className)}));const R={slots:E,slotProps:M},[$,W]=Zt("root",{elementType:uQ,externalForwardedProps:{...R,...T},ownerState:B,shouldForwardComponentProp:!0,ref:L,className:et(q.root,i),additionalProps:{disabled:Q&&u?!0:void 0,tabIndex:P&&u?-1:C,...V},getSlotProps:ee=>({...ee,onClick:ae=>{ee.onClick?.(ae),b?.(ae)},onKeyDown:ae=>{ee.onKeyDown?.(ae),z(ae)},onKeyUp:ae=>{ee.onKeyUp?.(ae),I(ae)}})}),[J,te]=Zt("label",{elementType:mQ,externalForwardedProps:R,ownerState:B,className:q.label});return e.jsxs($,{as:Y,...W,children:[H||D,e.jsx(J,{...te,children:f}),G]})});function Y0(t){return parseInt(t,10)||0}const pQ={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function hQ(t){for(const s in t)return!1;return!0}function $k(t){return hQ(t)||t.outerHeightStyle===0&&!t.overflowing}const fQ=g.forwardRef(function(s,a){const{onChange:r,maxRows:n,minRows:i=1,style:o,value:l,...c}=s,{current:m}=g.useRef(l!=null),u=g.useRef(null),h=Bs(a,u),f=g.useRef(null),b=g.useRef(null),w=g.useCallback(()=>{const C=u.current,P=b.current;if(!C||!P)return;const M=mi(C).getComputedStyle(C);if(M.width==="0px")return{outerHeightStyle:0,overflowing:!1};P.style.width=M.width,P.value=C.value||s.placeholder||"x",P.value.slice(-1)===`
`&&(P.value+=" ");const T=M.boxSizing,A=Y0(M.paddingBottom)+Y0(M.paddingTop),L=Y0(M.borderBottomWidth)+Y0(M.borderTopWidth),F=P.scrollHeight;P.value="x";const z=P.scrollHeight;let I=F;i&&(I=Math.max(Number(i)*z,I)),n&&(I=Math.min(Number(n)*z,I)),I=Math.max(I,z);const Q=I+(T==="border-box"?A+L:0),Y=Math.abs(I-F)<=1;return{outerHeightStyle:Q,overflowing:Y}},[n,i,s.placeholder]),S=Ot(()=>{const C=u.current,P=w();if(!C||!P||$k(P))return!1;const E=P.outerHeightStyle;return f.current!=null&&f.current!==E}),j=g.useCallback(()=>{const C=u.current,P=w();if(!C||!P||$k(P))return;const E=P.outerHeightStyle;f.current!==E&&(f.current=E,C.style.height=`${E}px`),C.style.overflow=P.overflowing?"hidden":""},[w]),v=g.useRef(-1);Ia(()=>{const C=ng(j),P=u?.current;if(!P)return;const E=mi(P);E.addEventListener("resize",C);let M;return typeof ResizeObserver<"u"&&(M=new ResizeObserver(()=>{S()&&(M.unobserve(P),cancelAnimationFrame(v.current),j(),v.current=requestAnimationFrame(()=>{M.observe(P)}))}),M.observe(P)),()=>{C.clear(),cancelAnimationFrame(v.current),E.removeEventListener("resize",C),M&&M.disconnect()}},[w,j,S]),Ia(()=>{j()});const N=C=>{m||j();const P=C.target,E=P.value.length,M=P.value.endsWith(`
`),T=P.selectionStart===E;M&&T&&P.setSelectionRange(E,E),r&&r(C)};return e.jsxs(g.Fragment,{children:[e.jsx("textarea",{value:l,onChange:N,ref:h,rows:i,style:o,...c}),e.jsx("textarea",{"aria-hidden":!0,className:s.className,readOnly:!0,ref:b,tabIndex:-1,style:{...pQ.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function sd({props:t,states:s,muiFormControl:a}){return s.reduce((r,n)=>(r[n]=t[n],a&&typeof t[n]>"u"&&(r[n]=a[n]),r),{})}const fv=g.createContext(void 0);function yi(){return g.useContext(fv)}function zk(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function pb(t,s=!1){return t&&(zk(t.value)&&t.value!==""||s&&zk(t.defaultValue)&&t.defaultValue!=="")}function xQ(t){return t.startAdornment}function gQ(t){return Dt("MuiInputBase",t)}const ti=Tt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var qk;const xv=(t,s)=>{const{ownerState:a}=t;return[s.root,a.formControl&&s.formControl,a.startAdornment&&s.adornedStart,a.endAdornment&&s.adornedEnd,a.error&&s.error,a.size==="small"&&s.sizeSmall,a.multiline&&s.multiline,a.color&&s[`color${Xe(a.color)}`],a.fullWidth&&s.fullWidth,a.hiddenLabel&&s.hiddenLabel]},gv=(t,s)=>{const{ownerState:a}=t;return[s.input,a.size==="small"&&s.inputSizeSmall,a.multiline&&s.inputMultiline,a.type==="search"&&s.inputTypeSearch,a.startAdornment&&s.inputAdornedStart,a.endAdornment&&s.inputAdornedEnd,a.hiddenLabel&&s.inputHiddenLabel]},yQ=t=>{const{classes:s,color:a,disabled:r,error:n,endAdornment:i,focused:o,formControl:l,fullWidth:c,hiddenLabel:m,multiline:u,readOnly:h,size:f,startAdornment:b,type:w}=t,S={root:["root",`color${Xe(a)}`,r&&"disabled",n&&"error",c&&"fullWidth",o&&"focused",l&&"formControl",f&&f!=="medium"&&`size${Xe(f)}`,u&&"multiline",b&&"adornedStart",i&&"adornedEnd",m&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",w==="search"&&"inputTypeSearch",u&&"inputMultiline",f==="small"&&"inputSizeSmall",m&&"inputHiddenLabel",b&&"inputAdornedStart",i&&"inputAdornedEnd",h&&"readOnly"]};return kt(S,gQ,s)},yv=Ne("div",{name:"MuiInputBase",slot:"Root",overridesResolver:xv})(Yt(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${ti.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:s})=>s.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:s,size:a})=>s.multiline&&a==="small",style:{paddingTop:1}},{props:({ownerState:s})=>s.fullWidth,style:{width:"100%"}}]}))),bv=Ne("input",{name:"MuiInputBase",slot:"Input",overridesResolver:gv})(Yt(({theme:t})=>{const s=t.palette.mode==="light",a={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:s?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},n=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:s?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${ti.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":n,"&:focus::-moz-placeholder":n,"&:focus::-ms-input-placeholder":n},[`&.${ti.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:i})=>!i.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:i})=>i.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),Bk=SY({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),vv=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiInputBase"}),{"aria-describedby":n,autoComplete:i,autoFocus:o,className:l,color:c,components:m={},componentsProps:u={},defaultValue:h,disabled:f,disableInjectingGlobalStyles:b,endAdornment:w,error:S,fullWidth:j=!1,id:v,inputComponent:N="input",inputProps:C={},inputRef:P,margin:E,maxRows:M,minRows:T,multiline:A=!1,name:L,onBlur:F,onChange:z,onClick:I,onFocus:Q,onKeyDown:Y,onKeyUp:B,placeholder:q,readOnly:V,renderSuffix:G,rows:H,size:D,slotProps:R={},slots:$={},startAdornment:W,type:J="text",value:te,...ee}=r,ae=C.value!=null?C.value:te,{current:ce}=g.useRef(ae!=null),he=g.useRef(),ne=g.useCallback(Le=>{},[]),xe=Bs(he,P,C.ref,ne),[ge,le]=g.useState(!1),pe=yi(),Re=sd({props:r,muiFormControl:pe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Re.focused=pe?pe.focused:ge,g.useEffect(()=>{!pe&&f&&ge&&(le(!1),F&&F())},[pe,f,ge,F]);const Se=pe&&pe.onFilled,He=pe&&pe.onEmpty,ze=g.useCallback(Le=>{pb(Le)?Se&&Se():He&&He()},[Se,He]);Ia(()=>{ce&&ze({value:ae})},[ae,ze,ce]);const st=Le=>{Q&&Q(Le),C.onFocus&&C.onFocus(Le),pe&&pe.onFocus?pe.onFocus(Le):le(!0)},ke=Le=>{F&&F(Le),C.onBlur&&C.onBlur(Le),pe&&pe.onBlur?pe.onBlur(Le):le(!1)},We=(Le,...jt)=>{if(!ce){const Jt=Le.target||he.current;if(Jt==null)throw new Error(Vl(1));ze({value:Jt.value})}C.onChange&&C.onChange(Le,...jt),z&&z(Le,...jt)};g.useEffect(()=>{ze(he.current)},[]);const ye=Le=>{he.current&&Le.currentTarget===Le.target&&he.current.focus(),I&&I(Le)};let Ye=N,at=C;A&&Ye==="input"&&(H?at={type:void 0,minRows:H,maxRows:H,...at}:at={type:void 0,maxRows:M,minRows:T,...at},Ye=fQ);const bt=Le=>{ze(Le.animationName==="mui-auto-fill-cancel"?he.current:{value:"x"})};g.useEffect(()=>{pe&&pe.setAdornedStart(!!W)},[pe,W]);const ct={...r,color:Re.color||"primary",disabled:Re.disabled,endAdornment:w,error:Re.error,focused:Re.focused,formControl:pe,fullWidth:j,hiddenLabel:Re.hiddenLabel,multiline:A,size:Re.size,startAdornment:W,type:J},ht=yQ(ct),Et=$.root||m.Root||yv,be=R.root||u.root||{},Oe=$.input||m.Input||bv;return at={...at,...R.input??u.input},e.jsxs(g.Fragment,{children:[!b&&typeof Bk=="function"&&(qk||(qk=e.jsx(Bk,{}))),e.jsxs(Et,{...be,ref:a,onClick:ye,...ee,...!Qm(Et)&&{ownerState:{...ct,...be.ownerState}},className:et(ht.root,be.className,l,V&&"MuiInputBase-readOnly"),children:[W,e.jsx(fv.Provider,{value:null,children:e.jsx(Oe,{"aria-invalid":Re.error,"aria-describedby":n,autoComplete:i,autoFocus:o,defaultValue:h,disabled:Re.disabled,id:v,onAnimationStart:bt,name:L,placeholder:q,readOnly:V,required:Re.required,rows:H,value:ae,onKeyDown:Y,onKeyUp:B,type:J,...at,...!Qm(Oe)&&{as:Ye,ownerState:{...ct,...at.ownerState}},ref:xe,className:et(ht.input,at.className,V&&"MuiInputBase-readOnly"),onBlur:ke,onChange:We,onFocus:st})}),w,G?G({...Re,startAdornment:W}):null]})]})});function bQ(t){return Dt("MuiInput",t)}const kc={...ti,...Tt("MuiInput",["root","underline","input"])};function vQ(t){return Dt("MuiOutlinedInput",t)}const Ri={...ti,...Tt("MuiOutlinedInput",["root","notchedOutline","input"])};function jQ(t){return Dt("MuiFilledInput",t)}const si={...ti,...Tt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},TR=Ut(e.jsx("path",{d:"M7 10l5 5 5-5z"}));function NQ(t){return Dt("MuiAutocomplete",t)}const zs=Tt("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var Uk,Vk;const wQ=t=>{const{classes:s,disablePortal:a,expanded:r,focused:n,fullWidth:i,hasClearIcon:o,hasPopupIcon:l,inputFocused:c,popupOpen:m,size:u}=t,h={root:["root",r&&"expanded",n&&"focused",i&&"fullWidth",o&&"hasClearIcon",l&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",c&&"inputFocused"],tag:["tag",`tagSize${Xe(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",m&&"popupIndicatorOpen"],popper:["popper",a&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return kt(h,NQ,s)},_Q=Ne("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t,{fullWidth:r,hasClearIcon:n,hasPopupIcon:i,inputFocused:o,size:l}=a;return[{[`& .${zs.tag}`]:s.tag},{[`& .${zs.tag}`]:s[`tagSize${Xe(l)}`]},{[`& .${zs.inputRoot}`]:s.inputRoot},{[`& .${zs.input}`]:s.input},{[`& .${zs.input}`]:o&&s.inputFocused},s.root,r&&s.fullWidth,i&&s.hasPopupIcon,n&&s.hasClearIcon]}})({[`&.${zs.focused} .${zs.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${zs.clearIndicator}`]:{visibility:"visible"}},[`& .${zs.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${zs.inputRoot}`]:{[`.${zs.hasPopupIcon}&, .${zs.hasClearIcon}&`]:{paddingRight:30},[`.${zs.hasPopupIcon}.${zs.hasClearIcon}&`]:{paddingRight:56},[`& .${zs.input}`]:{width:0,minWidth:30}},[`& .${kc.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${kc.root}.${ti.sizeSmall}`]:{[`& .${kc.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Ri.root}`]:{padding:9,[`.${zs.hasPopupIcon}&, .${zs.hasClearIcon}&`]:{paddingRight:39},[`.${zs.hasPopupIcon}.${zs.hasClearIcon}&`]:{paddingRight:65},[`& .${zs.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${zs.endAdornment}`]:{right:9}},[`& .${Ri.root}.${ti.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${zs.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${si.root}`]:{paddingTop:19,paddingLeft:8,[`.${zs.hasPopupIcon}&, .${zs.hasClearIcon}&`]:{paddingRight:39},[`.${zs.hasPopupIcon}.${zs.hasClearIcon}&`]:{paddingRight:65},[`& .${si.input}`]:{padding:"7px 4px"},[`& .${zs.endAdornment}`]:{right:9}},[`& .${si.root}.${ti.sizeSmall}`]:{paddingBottom:1,[`& .${si.input}`]:{padding:"2.5px 4px"}},[`& .${ti.hiddenLabel}`]:{paddingTop:8},[`& .${si.root}.${ti.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${zs.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${si.root}.${ti.hiddenLabel}.${ti.sizeSmall}`]:{[`& .${zs.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${zs.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${zs.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${zs.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${zs.inputRoot}`]:{flexWrap:"wrap"}}}]}),SQ=Ne("div",{name:"MuiAutocomplete",slot:"EndAdornment"})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),CQ=Ne(ta,{name:"MuiAutocomplete",slot:"ClearIndicator"})({marginRight:-2,padding:4,visibility:"hidden"}),PQ=Ne(ta,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.popupIndicator,a.popupOpen&&s.popupIndicatorOpen]}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),kQ=Ne(cg,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[{[`& .${zs.option}`]:s.option},s.popper,a.disablePortal&&s.popperDisablePortal]}})(Yt(({theme:t})=>({zIndex:(t.vars||t).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}))),EQ=Ne(oa,{name:"MuiAutocomplete",slot:"Paper"})(Yt(({theme:t})=>({...t.typography.body1,overflow:"auto"}))),TQ=Ne("div",{name:"MuiAutocomplete",slot:"Loading"})(Yt(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}))),MQ=Ne("div",{name:"MuiAutocomplete",slot:"NoOptions"})(Yt(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}))),DQ=Ne("ul",{name:"MuiAutocomplete",slot:"Listbox"})(Yt(({theme:t})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${zs.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${zs.focused}`]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${zs.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${zs.focused}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${zs.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}}}}))),RQ=Ne(Nw,{name:"MuiAutocomplete",slot:"GroupLabel"})(Yt(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,top:-8}))),AQ=Ne("ul",{name:"MuiAutocomplete",slot:"GroupUl"})({padding:0,[`& .${zs.option}`]:{paddingLeft:24}}),Ir=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiAutocomplete"}),{autoComplete:n=!1,autoHighlight:i=!1,autoSelect:o=!1,blurOnSelect:l=!1,ChipProps:c,className:m,clearIcon:u=Uk||(Uk=e.jsx(bR,{fontSize:"small"})),clearOnBlur:h=!r.freeSolo,clearOnEscape:f=!1,clearText:b="Clear",closeText:w="Close",componentsProps:S,defaultValue:j=r.multiple?[]:null,disableClearable:v=!1,disableCloseOnSelect:N=!1,disabled:C=!1,disabledItemsFocusable:P=!1,disableListWrap:E=!1,disablePortal:M=!1,filterOptions:T,filterSelectedOptions:A=!1,forcePopupIcon:L="auto",freeSolo:F=!1,fullWidth:z=!1,getLimitTagsText:I=Cs=>`+${Cs}`,getOptionDisabled:Q,getOptionKey:Y,getOptionLabel:B,isOptionEqualToValue:q,groupBy:V,handleHomeEndKeys:G=!r.freeSolo,id:H,includeInputInList:D=!1,inputValue:R,limitTags:$=-1,ListboxComponent:W,ListboxProps:J,loading:te=!1,loadingText:ee="Loading",multiple:ae=!1,noOptionsText:ce="No options",onChange:he,onClose:ne,onHighlightChange:xe,onInputChange:ge,onOpen:le,open:pe,openOnFocus:Re=!1,openText:Se="Open",options:He,PaperComponent:ze,PopperComponent:st,popupIcon:ke=Vk||(Vk=e.jsx(TR,{})),readOnly:We=!1,renderGroup:ye,renderInput:Ye,renderOption:at,renderTags:bt,renderValue:ct,selectOnFocus:ht=!r.freeSolo,size:Et="medium",slots:be={},slotProps:Oe={},value:Le,...jt}=r,{getRootProps:Jt,getInputProps:Kt,getInputLabelProps:rt,getPopupIndicatorProps:Lt,getClearProps:Nt,getItemProps:ps,getListboxProps:cs,getOptionProps:Ns,value:Ys,dirty:Is,expanded:Ms,id:pa,popupOpen:ha,focused:ia,focusedItem:$t,anchorEl:$s,setAnchorEl:zt,inputValue:qt,groupedOptions:ds}=UG({...r,componentName:"Autocomplete"}),ve=!v&&!C&&Is&&!We,Ce=(!F||L===!0)&&L!==!1,{onMouseDown:qe}=Kt(),{ref:gt,...de}=cs(),Ae=B||(Cs=>Cs.label??Cs),ft={...r,disablePortal:M,expanded:Ms,focused:ia,fullWidth:z,getOptionLabel:Ae,hasClearIcon:ve,hasPopupIcon:Ce,inputFocused:$t===-1,popupOpen:ha,size:Et},_t=wQ(ft),Gt={slots:{paper:ze,popper:st,...be},slotProps:{chip:c,listbox:J,...S,...Oe}},[ss,$e]=Zt("listbox",{elementType:DQ,externalForwardedProps:Gt,ownerState:ft,className:_t.listbox,additionalProps:de,ref:gt}),[Rt,Pe]=Zt("paper",{elementType:oa,externalForwardedProps:Gt,ownerState:ft,className:_t.paper}),[Be,Mt]=Zt("popper",{elementType:cg,externalForwardedProps:Gt,ownerState:ft,className:_t.popper,additionalProps:{disablePortal:M,style:{width:$s?$s.clientWidth:null},role:"presentation",anchorEl:$s,open:ha}});let Qt;const Ht=Cs=>({className:_t.tag,disabled:C,...ps(Cs)});if(ae?Ys.length>0&&(bt?Qt=bt(Ys,Ht,ft):ct?Qt=ct(Ys,Ht,ft):Qt=Ys.map((Cs,Za)=>{const{key:Sr,...Ps}=Ht({index:Za});return e.jsx(Me,{label:Ae(Cs),size:Et,...Ps,...Gt.slotProps.chip},Sr)})):ct&&Ys!=null&&(Qt=ct(Ys,Ht,ft)),$>-1&&Array.isArray(Qt)){const Cs=Qt.length-$;!ia&&Cs>0&&(Qt=Qt.splice(0,$),Qt.push(e.jsx("span",{className:_t.tag,children:I(Cs)},Qt.length)))}const Qs=ye||(Cs=>e.jsxs("li",{children:[e.jsx(RQ,{className:_t.groupLabel,ownerState:ft,component:"div",children:Cs.group}),e.jsx(AQ,{className:_t.groupUl,ownerState:ft,children:Cs.children})]},Cs.key)),Rs=at||((Cs,Za)=>{const{key:Sr,...Ps}=Cs;return e.jsx("li",{...Ps,children:Ae(Za)},Sr)}),Oa=(Cs,Za)=>{const Sr=Ns({option:Cs,index:Za});return Rs({...Sr,className:_t.option},Cs,{selected:Sr["aria-selected"],index:Za,inputValue:qt},ft)},Ua=Gt.slotProps.clearIndicator,Xr=Gt.slotProps.popupIndicator;return e.jsxs(g.Fragment,{children:[e.jsx(_Q,{ref:a,className:et(_t.root,m),ownerState:ft,...Jt(jt),children:Ye({id:pa,disabled:C,fullWidth:!0,size:Et==="small"?"small":void 0,InputLabelProps:rt(),InputProps:{ref:zt,className:_t.inputRoot,startAdornment:Qt,onMouseDown:Cs=>{Cs.target===Cs.currentTarget&&qe(Cs)},...(ve||Ce)&&{endAdornment:e.jsxs(SQ,{className:_t.endAdornment,ownerState:ft,children:[ve?e.jsx(CQ,{...Nt(),"aria-label":b,title:b,ownerState:ft,...Ua,className:et(_t.clearIndicator,Ua?.className),children:u}):null,Ce?e.jsx(PQ,{...Lt(),disabled:C,"aria-label":ha?w:Se,title:ha?w:Se,ownerState:ft,...Xr,className:et(_t.popupIndicator,Xr?.className),children:ke}):null]})}},inputProps:{className:_t.input,disabled:C,readOnly:We,...Kt()}})}),$s?e.jsx(kQ,{as:Be,...Mt,children:e.jsxs(EQ,{as:Rt,...Pe,children:[te&&ds.length===0?e.jsx(TQ,{className:_t.loading,ownerState:ft,children:ee}):null,ds.length===0&&!F&&!te?e.jsx(MQ,{className:_t.noOptions,ownerState:ft,role:"presentation",onMouseDown:Cs=>{Cs.preventDefault()},children:ce}):null,ds.length>0?e.jsx(ss,{as:W,...$e,children:ds.map((Cs,Za)=>V?Qs({key:Cs.key,group:Cs.group,children:Cs.options.map((Sr,Ps)=>Oa(Sr,Cs.index+Ps))}):Oa(Cs,Za))}):null]})}):null]})}),IQ=Ut(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function OQ(t){return Dt("MuiAvatar",t)}const FQ=Tt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]),LQ=t=>{const{classes:s,variant:a,colorDefault:r}=t;return kt({root:["root",a,r&&"colorDefault"],img:["img"],fallback:["fallback"]},OQ,s)},$Q=Ne("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.variant],a.colorDefault&&s.colorDefault]}})(Yt(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(t.vars||t).palette.background.default,...t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.grey[400],...t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})}}}]}))),zQ=Ne("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),qQ=Ne(IQ,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function BQ({crossOrigin:t,referrerPolicy:s,src:a,srcSet:r}){const[n,i]=g.useState(!1);return g.useEffect(()=>{if(!a&&!r)return;i(!1);let o=!0;const l=new Image;return l.onload=()=>{o&&i("loaded")},l.onerror=()=>{o&&i("error")},l.crossOrigin=t,l.referrerPolicy=s,l.src=a,r&&(l.srcset=r),()=>{o=!1}},[t,s,a,r]),n}const ut=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiAvatar"}),{alt:n,children:i,className:o,component:l="div",slots:c={},slotProps:m={},imgProps:u,sizes:h,src:f,srcSet:b,variant:w="circular",...S}=r;let j=null;const v={...r,component:l,variant:w},N=BQ({...u,...typeof m.img=="function"?m.img(v):m.img,src:f,srcSet:b}),C=f||b,P=C&&N!=="error";v.colorDefault=!P,delete v.ownerState;const E=LQ(v),[M,T]=Zt("root",{ref:a,className:et(E.root,o),elementType:$Q,externalForwardedProps:{slots:c,slotProps:m,component:l,...S},ownerState:v}),[A,L]=Zt("img",{className:E.img,elementType:zQ,externalForwardedProps:{slots:c,slotProps:{img:{...u,...m.img}}},additionalProps:{alt:n,src:f,srcSet:b,sizes:h},ownerState:v}),[F,z]=Zt("fallback",{className:E.fallback,elementType:qQ,externalForwardedProps:{slots:c,slotProps:m},shouldForwardComponentProp:!0,ownerState:v});return P?j=e.jsx(A,{...L}):i||i===0?j=i:C&&n?j=n[0]:j=e.jsx(F,{...z}),e.jsx(M,{...T,children:j})});function UQ(t){return Dt("MuiAvatarGroup",t)}const VQ=Tt("MuiAvatarGroup",["root","avatar"]),Y2={small:-16,medium:-8},HQ=t=>{const{classes:s}=t;return kt({root:["root"],avatar:["avatar"]},UQ,s)},WQ=Ne("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(t,s)=>[{[`& .${VQ.avatar}`]:s.avatar},s.root]})(Yt(({theme:t})=>({display:"flex",flexDirection:"row-reverse",[`& .${FQ.root}`]:{border:`2px solid ${(t.vars||t).palette.background.default}`,boxSizing:"content-box",marginLeft:"var(--AvatarGroup-spacing, -8px)","&:last-child":{marginLeft:0}}}))),YQ=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiAvatarGroup"}),{children:n,className:i,component:o="div",componentsProps:l,max:c=5,renderSurplus:m,slotProps:u={},slots:h={},spacing:f="medium",total:b,variant:w="circular",...S}=r;let j=c<2?2:c;const v={...r,max:c,spacing:f,component:o,variant:w},N=HQ(v),C=g.Children.toArray(n).filter(I=>g.isValidElement(I)),P=b||C.length;P===j&&(j+=1),j=Math.min(P+1,j);const E=Math.min(C.length,j-1),M=Math.max(P-j,P-E,0),T=m?m(M):`+${M}`;let A;v.spacing&&Y2[v.spacing]!==void 0?A=Y2[v.spacing]:v.spacing===0?A=0:A=-v.spacing||Y2.medium;const L={slots:h,slotProps:{surplus:u.additionalAvatar??l?.additionalAvatar,...l,...u}},[F,z]=Zt("surplus",{elementType:ut,externalForwardedProps:L,className:N.avatar,ownerState:v,additionalProps:{variant:w}});return e.jsxs(WQ,{as:o,ownerState:v,className:et(N.root,i),ref:a,...S,style:{"--AvatarGroup-spacing":`${A}px`,...S.style},children:[M?e.jsx(F,{...z,children:T}):null,C.slice(0,E).reverse().map(I=>g.cloneElement(I,{className:et(I.props.className,N.avatar),variant:I.props.variant||w}))]})}),GQ={entering:{opacity:1},entered:{opacity:1}},au=g.forwardRef(function(s,a){const r=xi(),n={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:l,easing:c,in:m,onEnter:u,onEntered:h,onEntering:f,onExit:b,onExited:w,onExiting:S,style:j,timeout:v=n,TransitionComponent:N=gi,...C}=s,P=g.useRef(null),E=Bs(P,td(l),a),M=Y=>B=>{if(Y){const q=P.current;B===void 0?Y(q):Y(q,B)}},T=M(f),A=M((Y,B)=>{m4(Y);const q=Yc({style:j,timeout:v,easing:c},{mode:"enter"});Y.style.webkitTransition=r.transitions.create("opacity",q),Y.style.transition=r.transitions.create("opacity",q),u&&u(Y,B)}),L=M(h),F=M(S),z=M(Y=>{const B=Yc({style:j,timeout:v,easing:c},{mode:"exit"});Y.style.webkitTransition=r.transitions.create("opacity",B),Y.style.transition=r.transitions.create("opacity",B),b&&b(Y)}),I=M(w),Q=Y=>{i&&i(P.current,Y)};return e.jsx(N,{appear:o,in:m,nodeRef:P,onEnter:A,onEntered:L,onEntering:T,onExit:z,onExited:I,onExiting:F,addEndListener:Q,timeout:v,...C,children:(Y,{ownerState:B,...q})=>g.cloneElement(l,{style:{opacity:0,visibility:Y==="exited"&&!m?"hidden":void 0,...GQ[Y],...j,...l.props.style},ref:E,...q})})});function KQ(t){return Dt("MuiBackdrop",t)}Tt("MuiBackdrop",["root","invisible"]);const QQ=t=>{const{classes:s,invisible:a}=t;return kt({root:["root",a&&"invisible"]},KQ,s)},ZQ=Ne("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.invisible&&s.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),MR=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiBackdrop"}),{children:n,className:i,component:o="div",invisible:l=!1,open:c,components:m={},componentsProps:u={},slotProps:h={},slots:f={},TransitionComponent:b,transitionDuration:w,...S}=r,j={...r,component:o,invisible:l},v=QQ(j),N={transition:b,root:m.Root,...f},C={...u,...h},P={component:o,slots:N,slotProps:C},[E,M]=Zt("root",{elementType:ZQ,externalForwardedProps:P,className:et(v.root,i),ownerState:j}),[T,A]=Zt("transition",{elementType:au,externalForwardedProps:P,ownerState:j});return e.jsx(T,{in:c,timeout:w,...S,...A,children:e.jsx(E,{"aria-hidden":!0,...M,classes:v,ref:a,children:n})})});function XQ(t){const{badgeContent:s,invisible:a=!1,max:r=99,showZero:n=!1}=t,i=p4({badgeContent:s,max:r});let o=a;a===!1&&s===0&&!n&&(o=!0);const{badgeContent:l,max:c=r}=o?i:t,m=l&&Number(l)>c?`${c}+`:l;return{badgeContent:l,invisible:o,max:c,displayValue:m}}function JQ(t){return Dt("MuiBadge",t)}const wc=Tt("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),G2=10,K2=4,eZ=t=>{const{color:s,anchorOrigin:a,invisible:r,overlap:n,variant:i,classes:o={}}=t,l={root:["root"],badge:["badge",i,r&&"invisible",`anchorOrigin${Xe(a.vertical)}${Xe(a.horizontal)}`,`anchorOrigin${Xe(a.vertical)}${Xe(a.horizontal)}${Xe(n)}`,`overlap${Xe(n)}`,s!=="default"&&`color${Xe(s)}`]};return kt(l,JQ,o)},tZ=Ne("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),sZ=Ne("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.badge,s[a.variant],s[`anchorOrigin${Xe(a.anchorOrigin.vertical)}${Xe(a.anchorOrigin.horizontal)}${Xe(a.overlap)}`],a.color!=="default"&&s[`color${Xe(a.color)}`],a.invisible&&s.invisible]}})(Yt(({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:G2*2,lineHeight:1,padding:"0 6px",height:G2*2,borderRadius:G2,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(Ma(["contrastText"])).map(([s])=>({props:{color:s},style:{backgroundColor:(t.vars||t).palette[s].main,color:(t.vars||t).palette[s].contrastText}})),{props:{variant:"dot"},style:{borderRadius:K2,height:K2*2,minWidth:K2*2,padding:0}},{props:({ownerState:s})=>s.anchorOrigin.vertical==="top"&&s.anchorOrigin.horizontal==="right"&&s.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${wc.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:s})=>s.anchorOrigin.vertical==="bottom"&&s.anchorOrigin.horizontal==="right"&&s.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${wc.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:s})=>s.anchorOrigin.vertical==="top"&&s.anchorOrigin.horizontal==="left"&&s.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${wc.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:s})=>s.anchorOrigin.vertical==="bottom"&&s.anchorOrigin.horizontal==="left"&&s.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${wc.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:s})=>s.anchorOrigin.vertical==="top"&&s.anchorOrigin.horizontal==="right"&&s.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${wc.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:s})=>s.anchorOrigin.vertical==="bottom"&&s.anchorOrigin.horizontal==="right"&&s.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${wc.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:s})=>s.anchorOrigin.vertical==="top"&&s.anchorOrigin.horizontal==="left"&&s.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${wc.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:s})=>s.anchorOrigin.vertical==="bottom"&&s.anchorOrigin.horizontal==="left"&&s.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${wc.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]})));function Hk(t){return{vertical:t?.vertical??"top",horizontal:t?.horizontal??"right"}}const j4=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiBadge"}),{anchorOrigin:n,className:i,classes:o,component:l,components:c={},componentsProps:m={},children:u,overlap:h="rectangular",color:f="default",invisible:b=!1,max:w=99,badgeContent:S,slots:j,slotProps:v,showZero:N=!1,variant:C="standard",...P}=r,{badgeContent:E,invisible:M,max:T,displayValue:A}=XQ({max:w,invisible:b,badgeContent:S,showZero:N}),L=p4({anchorOrigin:Hk(n),color:f,overlap:h,variant:C,badgeContent:S}),F=M||E==null&&C!=="dot",{color:z=f,overlap:I=h,anchorOrigin:Q,variant:Y=C}=F?L:r,B=Hk(Q),q=Y!=="dot"?A:void 0,V={...r,badgeContent:E,invisible:F,max:T,displayValue:q,showZero:N,anchorOrigin:B,color:z,overlap:I,variant:Y},G=eZ(V),H={slots:{root:j?.root??c.Root,badge:j?.badge??c.Badge},slotProps:{root:v?.root??m.root,badge:v?.badge??m.badge}},[D,R]=Zt("root",{elementType:tZ,externalForwardedProps:{...H,...P},ownerState:V,className:et(G.root,i),ref:a,additionalProps:{as:l}}),[$,W]=Zt("badge",{elementType:sZ,externalForwardedProps:H,ownerState:V,className:G.badge});return e.jsxs(D,{...R,children:[u,e.jsx($,{...W,children:q})]})}),aZ=Tt("MuiBox",["root"]),rZ=uv(),y=XH({themeId:Ui,defaultTheme:rZ,defaultClassName:aZ.root,generateClassName:W7.generate});function nZ(t){return Dt("MuiButton",t)}const _d=Tt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),iZ=g.createContext({}),oZ=g.createContext(void 0),lZ=t=>{const{color:s,disableElevation:a,fullWidth:r,size:n,variant:i,loading:o,loadingPosition:l,classes:c}=t,m={root:["root",o&&"loading",i,`${i}${Xe(s)}`,`size${Xe(n)}`,`${i}Size${Xe(n)}`,`color${Xe(s)}`,a&&"disableElevation",r&&"fullWidth",o&&`loadingPosition${Xe(l)}`],startIcon:["icon","startIcon",`iconSize${Xe(n)}`],endIcon:["icon","endIcon",`iconSize${Xe(n)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=kt(m,nZ,c);return{...c,...u}},DR=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],cZ=Ne(yo,{shouldForwardProp:t=>zr(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.variant],s[`${a.variant}${Xe(a.color)}`],s[`size${Xe(a.size)}`],s[`${a.variant}Size${Xe(a.size)}`],a.color==="inherit"&&s.colorInherit,a.disableElevation&&s.disableElevation,a.fullWidth&&s.fullWidth,a.loading&&s.loading]}})(Yt(({theme:t})=>{const s=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],a=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${_d.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${_d.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${_d.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${_d.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Ma()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:s,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${_d.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${_d.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${_d.loading}`]:{color:"transparent"}}}]}})),dZ=Ne("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.startIcon,a.loading&&s.startIconLoadingStart,s[`iconSize${Xe(a.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...DR]})),uZ=Ne("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.endIcon,a.loading&&s.endIconLoadingEnd,s[`iconSize${Xe(a.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...DR]})),mZ=Ne("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Wk=Ne("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),lo=g.forwardRef(function(s,a){const r=g.useContext(iZ),n=g.useContext(oZ),i=px(r,s),o=es({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:m="button",className:u,disabled:h=!1,disableElevation:f=!1,disableFocusRipple:b=!1,endIcon:w,focusVisibleClassName:S,fullWidth:j=!1,id:v,loading:N=null,loadingIndicator:C,loadingPosition:P="center",size:E="medium",startIcon:M,type:T,variant:A="text",...L}=o,F=wn(v),z=C??e.jsx(Ki,{"aria-labelledby":F,color:"inherit",size:16}),I={...o,color:c,component:m,disabled:h,disableElevation:f,disableFocusRipple:b,fullWidth:j,loading:N,loadingIndicator:z,loadingPosition:P,size:E,type:T,variant:A},Q=lZ(I),Y=(M||N&&P==="start")&&e.jsx(dZ,{className:Q.startIcon,ownerState:I,children:M||e.jsx(Wk,{className:Q.loadingIconPlaceholder,ownerState:I})}),B=(w||N&&P==="end")&&e.jsx(uZ,{className:Q.endIcon,ownerState:I,children:w||e.jsx(Wk,{className:Q.loadingIconPlaceholder,ownerState:I})}),q=n||"",V=typeof N=="boolean"?e.jsx("span",{className:Q.loadingWrapper,style:{display:"contents"},children:N&&e.jsx(mZ,{className:Q.loadingIndicator,ownerState:I,children:z})}):null;return e.jsxs(cZ,{ownerState:I,className:et(r.className,Q.root,u,q),component:m,disabled:h||N,focusRipple:!b,focusVisibleClassName:et(Q.focusVisible,S),ref:a,type:T,id:N?F:v,...L,classes:Q,children:[Y,P!=="end"&&V,l,P==="end"&&V,B]})});function pZ(t){return Dt("PrivateSwitchBase",t)}Tt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const hZ=t=>{const{classes:s,checked:a,disabled:r,edge:n}=t,i={root:["root",a&&"checked",r&&"disabled",n&&`edge${Xe(n)}`],input:["input"]};return kt(i,pZ,s)},fZ=Ne(yo,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:s})=>t==="start"&&s.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:s})=>t==="end"&&s.size!=="small",style:{marginRight:-12}}]}),xZ=Ne("input",{name:"MuiSwitchBase",shouldForwardProp:zr})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),N4=g.forwardRef(function(s,a){const{autoFocus:r,checked:n,checkedIcon:i,defaultChecked:o,disabled:l,disableFocusRipple:c=!1,edge:m=!1,icon:u,id:h,inputProps:f,inputRef:b,name:w,onBlur:S,onChange:j,onFocus:v,readOnly:N,required:C=!1,tabIndex:P,type:E,value:M,slots:T={},slotProps:A={},...L}=s,[F,z]=On({controlled:n,default:!!o,name:"SwitchBase",state:"checked"}),I=yi(),Q=te=>{v&&v(te),I&&I.onFocus&&I.onFocus(te)},Y=te=>{S&&S(te),I&&I.onBlur&&I.onBlur(te)},B=te=>{if(te.nativeEvent.defaultPrevented)return;const ee=te.target.checked;z(ee),j&&j(te,ee)};let q=l;I&&typeof q>"u"&&(q=I.disabled);const V=E==="checkbox"||E==="radio",G={...s,checked:F,disabled:q,disableFocusRipple:c,edge:m},H=hZ(G),D={slots:T,slotProps:{input:f,...A}},[R,$]=Zt("root",{ref:a,elementType:fZ,className:H.root,shouldForwardComponentProp:!0,externalForwardedProps:{...D,component:"span",...L},getSlotProps:te=>({...te,onFocus:ee=>{te.onFocus?.(ee),Q(ee)},onBlur:ee=>{te.onBlur?.(ee),Y(ee)}}),ownerState:G,additionalProps:{centerRipple:!0,focusRipple:!c,disabled:q,role:void 0,tabIndex:null}}),[W,J]=Zt("input",{ref:b,elementType:xZ,className:H.input,externalForwardedProps:D,getSlotProps:te=>({...te,onChange:ee=>{te.onChange?.(ee),B(ee)}}),ownerState:G,additionalProps:{autoFocus:r,checked:n,defaultChecked:o,disabled:q,id:V?h:void 0,name:w,readOnly:N,required:C,tabIndex:P,type:E,...E==="checkbox"&&M===void 0?{}:{value:M}}});return e.jsxs(R,{...$,children:[e.jsx(W,{...J}),F?i:u]})}),gZ=Ut(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),yZ=Ut(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),bZ=Ut(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function vZ(t){return Dt("MuiCheckbox",t)}const Q2=Tt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),jZ=t=>{const{classes:s,indeterminate:a,color:r,size:n}=t,i={root:["root",a&&"indeterminate",`color${Xe(r)}`,`size${Xe(n)}`]},o=kt(i,vZ,s);return{...s,...o}},NZ=Ne(N4,{shouldForwardProp:t=>zr(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.indeterminate&&s.indeterminate,s[`size${Xe(a.size)}`],a.color!=="default"&&s[`color${Xe(a.color)}`]]}})(Yt(({theme:t})=>({color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s,disableRipple:!1},style:{"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[s].main,(t.vars||t).palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s},style:{[`&.${Q2.checked}, &.${Q2.indeterminate}`]:{color:(t.vars||t).palette[s].main},[`&.${Q2.disabled}`]:{color:(t.vars||t).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),wZ=e.jsx(yZ,{}),_Z=e.jsx(gZ,{}),SZ=e.jsx(bZ,{}),Fo=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiCheckbox"}),{checkedIcon:n=wZ,color:i="primary",icon:o=_Z,indeterminate:l=!1,indeterminateIcon:c=SZ,inputProps:m,size:u="medium",disableRipple:h=!1,className:f,slots:b={},slotProps:w={},...S}=r,j=l?c:o,v=l?c:n,N={...r,disableRipple:h,color:i,indeterminate:l,size:u},C=jZ(N),P=w.input??m,[E,M]=Zt("root",{ref:a,elementType:NZ,className:et(C.root,f),shouldForwardComponentProp:!0,externalForwardedProps:{slots:b,slotProps:w,...S},ownerState:N,additionalProps:{type:"checkbox",icon:g.cloneElement(j,{fontSize:j.props.fontSize??u}),checkedIcon:g.cloneElement(v,{fontSize:v.props.fontSize??u}),disableRipple:h,slots:b,slotProps:{input:l4(typeof P=="function"?P(N):P,{"data-indeterminate":l})}}});return e.jsx(E,{...M,classes:C})});function Yk(t){return t.substring(2).toLowerCase()}function CZ(t,s){return s.documentElement.clientWidth<t.clientX||s.documentElement.clientHeight<t.clientY}function PZ(t){const{children:s,disableReactTree:a=!1,mouseEvent:r="onClick",onClickAway:n,touchEvent:i="onTouchEnd"}=t,o=g.useRef(!1),l=g.useRef(null),c=g.useRef(!1),m=g.useRef(!1);g.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const u=Bs(td(s),l),h=Ot(w=>{const S=m.current;m.current=!1;const j=ir(l.current);if(!c.current||!l.current||"clientX"in w&&CZ(w,j))return;if(o.current){o.current=!1;return}let v;w.composedPath?v=w.composedPath().includes(l.current):v=!j.documentElement.contains(w.target)||l.current.contains(w.target),!v&&(a||!S)&&n(w)}),f=w=>S=>{m.current=!0;const j=s.props[w];j&&j(S)},b={ref:u};return i!==!1&&(b[i]=f(i)),g.useEffect(()=>{if(i!==!1){const w=Yk(i),S=ir(l.current),j=()=>{o.current=!0};return S.addEventListener(w,h),S.addEventListener("touchmove",j),()=>{S.removeEventListener(w,h),S.removeEventListener("touchmove",j)}}},[h,i]),r!==!1&&(b[r]=f(r)),g.useEffect(()=>{if(r!==!1){const w=Yk(r),S=ir(l.current);return S.addEventListener(w,h),()=>{S.removeEventListener(w,h)}}},[h,r]),g.cloneElement(s,b)}function RR(t=window){const s=t.document.documentElement.clientWidth;return t.innerWidth-s}function kZ(t){const s=ir(t);return s.body===t?mi(t).innerWidth>s.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function Uf(t,s){s?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function Gk(t){return parseInt(mi(t).getComputedStyle(t).paddingRight,10)||0}function EZ(t){const a=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return a||r}function Kk(t,s,a,r,n){const i=[s,a,...r];[].forEach.call(t.children,o=>{const l=!i.includes(o),c=!EZ(o);l&&c&&Uf(o,n)})}function Z2(t,s){let a=-1;return t.some((r,n)=>s(r)?(a=n,!0):!1),a}function TZ(t,s){const a=[],r=t.container;if(!s.disableScrollLock){if(kZ(r)){const o=RR(mi(r));a.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${Gk(r)+o}px`;const l=ir(r).querySelectorAll(".mui-fixed");[].forEach.call(l,c=>{a.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${Gk(c)+o}px`})}let i;if(r.parentNode instanceof DocumentFragment)i=ir(r).body;else{const o=r.parentElement,l=mi(r);i=o?.nodeName==="HTML"&&l.getComputedStyle(o).overflowY==="scroll"?o:r}a.push({value:i.style.overflow,property:"overflow",el:i},{value:i.style.overflowX,property:"overflow-x",el:i},{value:i.style.overflowY,property:"overflow-y",el:i}),i.style.overflow="hidden"}return()=>{a.forEach(({value:i,el:o,property:l})=>{i?o.style.setProperty(l,i):o.style.removeProperty(l)})}}function MZ(t){const s=[];return[].forEach.call(t.children,a=>{a.getAttribute("aria-hidden")==="true"&&s.push(a)}),s}class DZ{constructor(){this.modals=[],this.containers=[]}add(s,a){let r=this.modals.indexOf(s);if(r!==-1)return r;r=this.modals.length,this.modals.push(s),s.modalRef&&Uf(s.modalRef,!1);const n=MZ(a);Kk(a,s.mount,s.modalRef,n,!0);const i=Z2(this.containers,o=>o.container===a);return i!==-1?(this.containers[i].modals.push(s),r):(this.containers.push({modals:[s],container:a,restore:null,hiddenSiblings:n}),r)}mount(s,a){const r=Z2(this.containers,i=>i.modals.includes(s)),n=this.containers[r];n.restore||(n.restore=TZ(n,a))}remove(s,a=!0){const r=this.modals.indexOf(s);if(r===-1)return r;const n=Z2(this.containers,o=>o.modals.includes(s)),i=this.containers[n];if(i.modals.splice(i.modals.indexOf(s),1),this.modals.splice(r,1),i.modals.length===0)i.restore&&i.restore(),s.modalRef&&Uf(s.modalRef,a),Kk(i.container,s.mount,s.modalRef,i.hiddenSiblings,!1),this.containers.splice(n,1);else{const o=i.modals[i.modals.length-1];o.modalRef&&Uf(o.modalRef,!1)}return r}isTopModal(s){return this.modals.length>0&&this.modals[this.modals.length-1]===s}}const RZ=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function AZ(t){const s=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(s)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:s}function IZ(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const s=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let a=s(`[name="${t.name}"]:checked`);return a||(a=s(`[name="${t.name}"]`)),a!==t}function OZ(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||IZ(t))}function FZ(t){const s=[],a=[];return Array.from(t.querySelectorAll(RZ)).forEach((r,n)=>{const i=AZ(r);i===-1||!OZ(r)||(i===0?s.push(r):a.push({documentOrder:n,tabIndex:i,node:r}))}),a.sort((r,n)=>r.tabIndex===n.tabIndex?r.documentOrder-n.documentOrder:r.tabIndex-n.tabIndex).map(r=>r.node).concat(s)}function LZ(){return!0}function AR(t){const{children:s,disableAutoFocus:a=!1,disableEnforceFocus:r=!1,disableRestoreFocus:n=!1,getTabbable:i=FZ,isEnabled:o=LZ,open:l}=t,c=g.useRef(!1),m=g.useRef(null),u=g.useRef(null),h=g.useRef(null),f=g.useRef(null),b=g.useRef(!1),w=g.useRef(null),S=Bs(td(s),w),j=g.useRef(null);g.useEffect(()=>{!l||!w.current||(b.current=!a)},[a,l]),g.useEffect(()=>{if(!l||!w.current)return;const C=ir(w.current);return w.current.contains(C.activeElement)||(w.current.hasAttribute("tabIndex")||w.current.setAttribute("tabIndex","-1"),b.current&&w.current.focus()),()=>{n||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}},[l]),g.useEffect(()=>{if(!l||!w.current)return;const C=ir(w.current),P=T=>{j.current=T,!(r||!o()||T.key!=="Tab")&&C.activeElement===w.current&&T.shiftKey&&(c.current=!0,u.current&&u.current.focus())},E=()=>{const T=w.current;if(T===null)return;if(!C.hasFocus()||!o()||c.current){c.current=!1;return}if(T.contains(C.activeElement)||r&&C.activeElement!==m.current&&C.activeElement!==u.current)return;if(C.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!b.current)return;let A=[];if((C.activeElement===m.current||C.activeElement===u.current)&&(A=i(w.current)),A.length>0){const L=!!(j.current?.shiftKey&&j.current?.key==="Tab"),F=A[0],z=A[A.length-1];typeof F!="string"&&typeof z!="string"&&(L?z.focus():F.focus())}else T.focus()};C.addEventListener("focusin",E),C.addEventListener("keydown",P,!0);const M=setInterval(()=>{C.activeElement&&C.activeElement.tagName==="BODY"&&E()},50);return()=>{clearInterval(M),C.removeEventListener("focusin",E),C.removeEventListener("keydown",P,!0)}},[a,r,n,o,l,i]);const v=C=>{h.current===null&&(h.current=C.relatedTarget),b.current=!0,f.current=C.target;const P=s.props.onFocus;P&&P(C)},N=C=>{h.current===null&&(h.current=C.relatedTarget),b.current=!0};return e.jsxs(g.Fragment,{children:[e.jsx("div",{tabIndex:l?0:-1,onFocus:N,ref:m,"data-testid":"sentinelStart"}),g.cloneElement(s,{ref:S,onFocus:v}),e.jsx("div",{tabIndex:l?0:-1,onFocus:N,ref:u,"data-testid":"sentinelEnd"})]})}function $Z(t){return typeof t=="function"?t():t}function zZ(t){return t?t.props.hasOwnProperty("in"):!1}const Qk=()=>{},G0=new DZ;function qZ(t){const{container:s,disableEscapeKeyDown:a=!1,disableScrollLock:r=!1,closeAfterTransition:n=!1,onTransitionEnter:i,onTransitionExited:o,children:l,onClose:c,open:m,rootRef:u}=t,h=g.useRef({}),f=g.useRef(null),b=g.useRef(null),w=Bs(b,u),[S,j]=g.useState(!m),v=zZ(l);let N=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(N=!1);const C=()=>ir(f.current),P=()=>(h.current.modalRef=b.current,h.current.mount=f.current,h.current),E=()=>{G0.mount(P(),{disableScrollLock:r}),b.current&&(b.current.scrollTop=0)},M=Ot(()=>{const B=$Z(s)||C().body;G0.add(P(),B),b.current&&E()}),T=()=>G0.isTopModal(P()),A=Ot(B=>{f.current=B,B&&(m&&T()?E():b.current&&Uf(b.current,N))}),L=g.useCallback(()=>{G0.remove(P(),N)},[N]);g.useEffect(()=>()=>{L()},[L]),g.useEffect(()=>{m?M():(!v||!n)&&L()},[m,L,v,n,M]);const F=B=>q=>{B.onKeyDown?.(q),!(q.key!=="Escape"||q.which===229||!T())&&(a||(q.stopPropagation(),c&&c(q,"escapeKeyDown")))},z=B=>q=>{B.onClick?.(q),q.target===q.currentTarget&&c&&c(q,"backdropClick")};return{getRootProps:(B={})=>{const q=gR(t);delete q.onTransitionEnter,delete q.onTransitionExited;const V={...q,...B};return{role:"presentation",...V,onKeyDown:F(V),ref:w}},getBackdropProps:(B={})=>{const q=B;return{"aria-hidden":!0,...q,onClick:z(q),open:m}},getTransitionProps:()=>{const B=()=>{j(!1),i&&i()},q=()=>{j(!0),o&&o(),n&&L()};return{onEnter:dw(B,l?.props.onEnter??Qk),onExited:dw(q,l?.props.onExited??Qk)}},rootRef:w,portalRef:A,isTopModal:T,exited:S,hasTransition:v}}function BZ(t){return Dt("MuiModal",t)}Tt("MuiModal",["root","hidden","backdrop"]);const UZ=t=>{const{open:s,exited:a,classes:r}=t;return kt({root:["root",!s&&a&&"hidden"],backdrop:["backdrop"]},BZ,r)},VZ=Ne("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,!a.open&&a.exited&&s.hidden]}})(Yt(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:s})=>!s.open&&s.exited,style:{visibility:"hidden"}}]}))),HZ=Ne(MR,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),jv=g.forwardRef(function(s,a){const r=es({name:"MuiModal",props:s}),{BackdropComponent:n=HZ,BackdropProps:i,classes:o,className:l,closeAfterTransition:c=!1,children:m,container:u,component:h,components:f={},componentsProps:b={},disableAutoFocus:w=!1,disableEnforceFocus:S=!1,disableEscapeKeyDown:j=!1,disablePortal:v=!1,disableRestoreFocus:N=!1,disableScrollLock:C=!1,hideBackdrop:P=!1,keepMounted:E=!1,onClose:M,onTransitionEnter:T,onTransitionExited:A,open:L,slotProps:F={},slots:z={},theme:I,...Q}=r,Y={...r,closeAfterTransition:c,disableAutoFocus:w,disableEnforceFocus:S,disableEscapeKeyDown:j,disablePortal:v,disableRestoreFocus:N,disableScrollLock:C,hideBackdrop:P,keepMounted:E},{getRootProps:B,getBackdropProps:q,getTransitionProps:V,portalRef:G,isTopModal:H,exited:D,hasTransition:R}=qZ({...Y,rootRef:a}),$={...Y,exited:D},W=UZ($),J={};if(m.props.tabIndex===void 0&&(J.tabIndex="-1"),R){const{onEnter:ne,onExited:xe}=V();J.onEnter=ne,J.onExited=xe}const te={slots:{root:f.Root,backdrop:f.Backdrop,...z},slotProps:{...b,...F}},[ee,ae]=Zt("root",{ref:a,elementType:VZ,externalForwardedProps:{...te,...Q,component:h},getSlotProps:B,ownerState:$,className:et(l,W?.root,!$.open&&$.exited&&W?.hidden)}),[ce,he]=Zt("backdrop",{ref:i?.ref,elementType:n,externalForwardedProps:te,shouldForwardComponentProp:!0,additionalProps:i,getSlotProps:ne=>q({...ne,onClick:xe=>{ne?.onClick&&ne.onClick(xe)}}),className:et(i?.className,W?.backdrop),ownerState:$});return!E&&!L&&(!R||D)?null:e.jsx(ER,{ref:G,container:u,disablePortal:v,children:e.jsxs(ee,{...ae,children:[!P&&n?e.jsx(ce,{...he}):null,e.jsx(AR,{disableEnforceFocus:S,disableAutoFocus:w,disableRestoreFocus:N,isEnabled:H,open:L,children:g.cloneElement(m,J)})]})})});function WZ(t){return Dt("MuiDialog",t)}const Vf=Tt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),IR=g.createContext({}),YZ=Ne(MR,{name:"MuiDialog",slot:"Backdrop",overrides:(t,s)=>s.backdrop})({zIndex:-1}),GZ=t=>{const{classes:s,scroll:a,maxWidth:r,fullWidth:n,fullScreen:i}=t,o={root:["root"],container:["container",`scroll${Xe(a)}`],paper:["paper",`paperScroll${Xe(a)}`,`paperWidth${Xe(String(r))}`,n&&"paperFullWidth",i&&"paperFullScreen"]};return kt(o,WZ,s)},KZ=Ne(jv,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),QZ=Ne("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.container,s[`scroll${Xe(a.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),ZZ=Ne(oa,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.paper,s[`scrollPaper${Xe(a.scroll)}`],s[`paperWidth${Xe(String(a.maxWidth))}`],a.fullWidth&&s.paperFullWidth,a.fullScreen&&s.paperFullScreen]}})(Yt(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:s})=>!s.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${Vf.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(s=>s!=="xs").map(s=>({props:{maxWidth:s},style:{maxWidth:`${t.breakpoints.values[s]}${t.breakpoints.unit}`,[`&.${Vf.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[s]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:s})=>s.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:s})=>s.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Vf.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Kl=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiDialog"}),n=xi(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":l,"aria-modal":c=!0,BackdropComponent:m,BackdropProps:u,children:h,className:f,disableEscapeKeyDown:b=!1,fullScreen:w=!1,fullWidth:S=!1,maxWidth:j="sm",onClick:v,onClose:N,open:C,PaperComponent:P=oa,PaperProps:E={},scroll:M="paper",slots:T={},slotProps:A={},TransitionComponent:L=au,transitionDuration:F=i,TransitionProps:z,...I}=r,Q={...r,disableEscapeKeyDown:b,fullScreen:w,fullWidth:S,maxWidth:j,scroll:M},Y=GZ(Q),B=g.useRef(),q=le=>{B.current=le.target===le.currentTarget},V=le=>{v&&v(le),B.current&&(B.current=null,N&&N(le,"backdropClick"))},G=wn(l),H=g.useMemo(()=>({titleId:G}),[G]),D={transition:L,...T},R={transition:z,paper:E,backdrop:u,...A},$={slots:D,slotProps:R},[W,J]=Zt("root",{elementType:KZ,shouldForwardComponentProp:!0,externalForwardedProps:$,ownerState:Q,className:et(Y.root,f),ref:a}),[te,ee]=Zt("backdrop",{elementType:YZ,shouldForwardComponentProp:!0,externalForwardedProps:$,ownerState:Q}),[ae,ce]=Zt("paper",{elementType:ZZ,shouldForwardComponentProp:!0,externalForwardedProps:$,ownerState:Q,className:et(Y.paper,E.className)}),[he,ne]=Zt("container",{elementType:QZ,externalForwardedProps:$,ownerState:Q,className:Y.container}),[xe,ge]=Zt("transition",{elementType:au,externalForwardedProps:$,ownerState:Q,additionalProps:{appear:!0,in:C,timeout:F,role:"presentation"}});return e.jsx(W,{closeAfterTransition:!0,slots:{backdrop:te},slotProps:{backdrop:{transitionDuration:F,as:m,...ee}},disableEscapeKeyDown:b,onClose:N,open:C,onClick:V,...J,...I,children:e.jsx(xe,{...ge,children:e.jsx(he,{onMouseDown:q,...ne,children:e.jsx(ae,{as:P,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":G,"aria-modal":c,...ce,children:e.jsx(IR.Provider,{value:H,children:h})})})})})});function XZ(t){return Dt("MuiDialogActions",t)}Tt("MuiDialogActions",["root","spacing"]);const JZ=t=>{const{classes:s,disableSpacing:a}=t;return kt({root:["root",!a&&"spacing"]},XZ,s)},eX=Ne("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,!a.disableSpacing&&s.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),dg=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiDialogActions"}),{className:n,disableSpacing:i=!1,...o}=r,l={...r,disableSpacing:i},c=JZ(l);return e.jsx(eX,{className:et(c.root,n),ownerState:l,ref:a,...o})});function tX(t){return Dt("MuiDialogContent",t)}Tt("MuiDialogContent",["root","dividers"]);function sX(t){return Dt("MuiDialogTitle",t)}const aX=Tt("MuiDialogTitle",["root"]),rX=t=>{const{classes:s,dividers:a}=t;return kt({root:["root",a&&"dividers"]},tX,s)},nX=Ne("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.dividers&&s.dividers]}})(Yt(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:s})=>s.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:s})=>!s.dividers,style:{[`.${aX.root} + &`]:{paddingTop:0}}}]}))),ug=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiDialogContent"}),{className:n,dividers:i=!1,...o}=r,l={...r,dividers:i},c=rX(l);return e.jsx(nX,{className:et(c.root,n),ownerState:l,ref:a,...o})}),iX=t=>{const{classes:s}=t;return kt({root:["root"]},sX,s)},oX=Ne(x,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Nv=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiDialogTitle"}),{className:n,id:i,...o}=r,l=r,c=iX(l),{titleId:m=i}=g.useContext(IR);return e.jsx(oX,{component:"h2",className:et(c.root,n),ownerState:l,ref:a,variant:"h6",id:i??m,...o})});function lX(t){return Dt("MuiDivider",t)}const Zk=Tt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),cX=t=>{const{absolute:s,children:a,classes:r,flexItem:n,light:i,orientation:o,textAlign:l,variant:c}=t;return kt({root:["root",s&&"absolute",c,i&&"light",o==="vertical"&&"vertical",n&&"flexItem",a&&"withChildren",a&&o==="vertical"&&"withChildrenVertical",l==="right"&&o!=="vertical"&&"textAlignRight",l==="left"&&o!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",o==="vertical"&&"wrapperVertical"]},lX,r)},dX=Ne("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.absolute&&s.absolute,s[a.variant],a.light&&s.light,a.orientation==="vertical"&&s.vertical,a.flexItem&&s.flexItem,a.children&&s.withChildren,a.children&&a.orientation==="vertical"&&s.withChildrenVertical,a.textAlign==="right"&&a.orientation!=="vertical"&&s.textAlignRight,a.textAlign==="left"&&a.orientation!=="vertical"&&s.textAlignLeft]}})(Yt(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.alpha((t.vars||t).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:s})=>!!s.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:s})=>s.children&&s.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:s})=>s.orientation==="vertical"&&s.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:s})=>s.textAlign==="right"&&s.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:s})=>s.textAlign==="left"&&s.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),uX=Ne("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.wrapper,a.orientation==="vertical"&&s.wrapperVertical]}})(Yt(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),pr=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiDivider"}),{absolute:n=!1,children:i,className:o,orientation:l="horizontal",component:c=i||l==="vertical"?"div":"hr",flexItem:m=!1,light:u=!1,role:h=c!=="hr"?"separator":void 0,textAlign:f="center",variant:b="fullWidth",...w}=r,S={...r,absolute:n,component:c,flexItem:m,light:u,orientation:l,role:h,textAlign:f,variant:b},j=cX(S);return e.jsx(dX,{as:c,className:et(j.root,o),role:h,ref:a,ownerState:S,"aria-orientation":h==="separator"&&(c!=="hr"||l==="vertical")?l:void 0,...w,children:i?e.jsx(uX,{className:j.wrapper,ownerState:S,children:i}):null})});pr&&(pr.muiSkipListHighlight=!0);function mX(t,s,a){const r=s.getBoundingClientRect(),n=a&&a.getBoundingClientRect(),i=mi(s);let o;if(s.fakeTransform)o=s.fakeTransform;else{const m=i.getComputedStyle(s);o=m.getPropertyValue("-webkit-transform")||m.getPropertyValue("transform")}let l=0,c=0;if(o&&o!=="none"&&typeof o=="string"){const m=o.split("(")[1].split(")")[0].split(",");l=parseInt(m[4],10),c=parseInt(m[5],10)}return t==="left"?n?`translateX(${n.right+l-r.left}px)`:`translateX(${i.innerWidth+l-r.left}px)`:t==="right"?n?`translateX(-${r.right-n.left-l}px)`:`translateX(-${r.left+r.width-l}px)`:t==="up"?n?`translateY(${n.bottom+c-r.top}px)`:`translateY(${i.innerHeight+c-r.top}px)`:n?`translateY(-${r.top-n.top+r.height-c}px)`:`translateY(-${r.top+r.height-c}px)`}function pX(t){return typeof t=="function"?t():t}function K0(t,s,a){const r=pX(a),n=mX(t,s,r);n&&(s.style.webkitTransform=n,s.style.transform=n)}const hX=g.forwardRef(function(s,a){const r=xi(),n={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:c,container:m,direction:u="down",easing:h=n,in:f,onEnter:b,onEntered:w,onEntering:S,onExit:j,onExited:v,onExiting:N,style:C,timeout:P=i,TransitionComponent:E=gi,...M}=s,T=g.useRef(null),A=Bs(td(c),T,a),L=G=>H=>{G&&(H===void 0?G(T.current):G(T.current,H))},F=L((G,H)=>{K0(u,G,m),m4(G),b&&b(G,H)}),z=L((G,H)=>{const D=Yc({timeout:P,style:C,easing:h},{mode:"enter"});G.style.webkitTransition=r.transitions.create("-webkit-transform",{...D}),G.style.transition=r.transitions.create("transform",{...D}),G.style.webkitTransform="none",G.style.transform="none",S&&S(G,H)}),I=L(w),Q=L(N),Y=L(G=>{const H=Yc({timeout:P,style:C,easing:h},{mode:"exit"});G.style.webkitTransition=r.transitions.create("-webkit-transform",H),G.style.transition=r.transitions.create("transform",H),K0(u,G,m),j&&j(G)}),B=L(G=>{G.style.webkitTransition="",G.style.transition="",v&&v(G)}),q=G=>{o&&o(T.current,G)},V=g.useCallback(()=>{T.current&&K0(u,T.current,m)},[u,m]);return g.useEffect(()=>{if(f||u==="down"||u==="right")return;const G=ng(()=>{T.current&&K0(u,T.current,m)}),H=mi(T.current);return H.addEventListener("resize",G),()=>{G.clear(),H.removeEventListener("resize",G)}},[u,f,m]),g.useEffect(()=>{f||V()},[f,V]),e.jsx(E,{nodeRef:T,onEnter:F,onEntered:I,onEntering:z,onExit:Y,onExited:B,onExiting:Q,addEndListener:q,appear:l,in:f,timeout:P,...M,children:(G,{ownerState:H,...D})=>g.cloneElement(c,{ref:A,style:{visibility:G==="exited"&&!f?"hidden":void 0,...C,...c.props.style},...D})})});function fX(t){return Dt("MuiDrawer",t)}Tt("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const OR=(t,s)=>{const{ownerState:a}=t;return[s.root,(a.variant==="permanent"||a.variant==="persistent")&&s.docked,s.modal]},xX=t=>{const{classes:s,anchor:a,variant:r}=t,n={root:["root",`anchor${Xe(a)}`],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Xe(a)}`,r!=="temporary"&&`paperAnchorDocked${Xe(a)}`]};return kt(n,fX,s)},gX=Ne(jv,{name:"MuiDrawer",slot:"Root",overridesResolver:OR})(Yt(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer}))),yX=Ne("div",{shouldForwardProp:zr,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:OR})({flex:"0 0 auto"}),bX=Ne(oa,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.paper,s[`paperAnchor${Xe(a.anchor)}`],a.variant!=="temporary"&&s[`paperAnchorDocked${Xe(a.anchor)}`]]}})(Yt(({theme:t})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:s})=>s.anchor==="left"&&s.variant!=="temporary",style:{borderRight:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:s})=>s.anchor==="top"&&s.variant!=="temporary",style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:s})=>s.anchor==="right"&&s.variant!=="temporary",style:{borderLeft:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:s})=>s.anchor==="bottom"&&s.variant!=="temporary",style:{borderTop:`1px solid ${(t.vars||t).palette.divider}`}}]}))),FR={left:"right",right:"left",top:"down",bottom:"up"};function vX(t){return["left","right"].includes(t)}function jX({direction:t},s){return t==="rtl"&&vX(s)?FR[s]:s}const NX=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiDrawer"}),n=xi(),i=$r(),o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{anchor:l="left",BackdropProps:c,children:m,className:u,elevation:h=16,hideBackdrop:f=!1,ModalProps:{BackdropProps:b,...w}={},onClose:S,open:j=!1,PaperProps:v={},SlideProps:N,TransitionComponent:C,transitionDuration:P=o,variant:E="temporary",slots:M={},slotProps:T={},...A}=r,L=g.useRef(!1);g.useEffect(()=>{L.current=!0},[]);const F=jX({direction:i?"rtl":"ltr"},l),I={...r,anchor:l,elevation:h,open:j,variant:E,...A},Q=xX(I),Y={slots:{transition:C,...M},slotProps:{paper:v,transition:N,...T,backdrop:l4(T.backdrop||{...c,...b},{transitionDuration:P})}},[B,q]=Zt("root",{ref:a,elementType:gX,className:et(Q.root,Q.modal,u),shouldForwardComponentProp:!0,ownerState:I,externalForwardedProps:{...Y,...A,...w},additionalProps:{open:j,onClose:S,hideBackdrop:f,slots:{backdrop:Y.slots.backdrop},slotProps:{backdrop:Y.slotProps.backdrop}}}),[V,G]=Zt("paper",{elementType:bX,shouldForwardComponentProp:!0,className:et(Q.paper,v.className),ownerState:I,externalForwardedProps:Y,additionalProps:{elevation:E==="temporary"?h:0,square:!0,...E==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[H,D]=Zt("docked",{elementType:yX,ref:a,className:et(Q.root,Q.docked,u),ownerState:I,externalForwardedProps:Y,additionalProps:A}),[R,$]=Zt("transition",{elementType:hX,ownerState:I,externalForwardedProps:Y,additionalProps:{in:j,direction:FR[F],timeout:P,appear:L.current}}),W=e.jsx(V,{...G,children:m});if(E==="permanent")return e.jsx(H,{...D,children:W});const J=e.jsx(R,{...$,children:W});return E==="persistent"?e.jsx(H,{...D,children:J}):e.jsx(B,{...q,children:J})}),wX=t=>{const{classes:s,disableUnderline:a,startAdornment:r,endAdornment:n,size:i,hiddenLabel:o,multiline:l}=t,c={root:["root",!a&&"underline",r&&"adornedStart",n&&"adornedEnd",i==="small"&&`size${Xe(i)}`,o&&"hiddenLabel",l&&"multiline"],input:["input"]},m=kt(c,jQ,s);return{...s,...m}},_X=Ne(yv,{shouldForwardProp:t=>zr(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[...xv(t,s),!a.disableUnderline&&s.underline]}})(Yt(({theme:t})=>{const s=t.palette.mode==="light",a=s?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=s?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",n=s?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=s?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:n,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${si.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${si.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:i},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${si.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${si.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline):a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${si.disabled}, .${si.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${si.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Ma()).map(([o])=>({props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[o]?.main}`}}})),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:l})=>o.multiline&&l==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),SX=Ne(bv,{name:"MuiFilledInput",slot:"Input",overridesResolver:gv})(Yt(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:s})=>s.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:s})=>s.startAdornment,style:{paddingLeft:0}},{props:({ownerState:s})=>s.endAdornment,style:{paddingRight:0}},{props:({ownerState:s})=>s.hiddenLabel&&s.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:s})=>s.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),w4=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiFilledInput"}),{disableUnderline:n=!1,components:i={},componentsProps:o,fullWidth:l=!1,hiddenLabel:c,inputComponent:m="input",multiline:u=!1,slotProps:h,slots:f={},type:b="text",...w}=r,S={...r,disableUnderline:n,fullWidth:l,inputComponent:m,multiline:u,type:b},j=wX(r),v={root:{ownerState:S},input:{ownerState:S}},N=h??o?dn(v,h??o):v,C=f.root??i.Root??_X,P=f.input??i.Input??SX;return e.jsx(vv,{slots:{root:C,input:P},slotProps:N,fullWidth:l,inputComponent:m,multiline:u,ref:a,type:b,...w,classes:j})});w4.muiName="Input";function CX(t){return Dt("MuiFormControl",t)}Tt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const PX=t=>{const{classes:s,margin:a,fullWidth:r}=t,n={root:["root",a!=="none"&&`margin${Xe(a)}`,r&&"fullWidth"]};return kt(n,CX,s)},kX=Ne("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[`margin${Xe(a.margin)}`],a.fullWidth&&s.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),wv=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiFormControl"}),{children:n,className:i,color:o="primary",component:l="div",disabled:c=!1,error:m=!1,focused:u,fullWidth:h=!1,hiddenLabel:f=!1,margin:b="none",required:w=!1,size:S="medium",variant:j="outlined",...v}=r,N={...r,color:o,component:l,disabled:c,error:m,fullWidth:h,hiddenLabel:f,margin:b,required:w,size:S,variant:j},C=PX(N),[P,E]=g.useState(()=>{let B=!1;return n&&g.Children.forEach(n,q=>{if(!Ly(q,["Input","Select"]))return;const V=Ly(q,["Select"])?q.props.input:q;V&&xQ(V.props)&&(B=!0)}),B}),[M,T]=g.useState(()=>{let B=!1;return n&&g.Children.forEach(n,q=>{Ly(q,["Input","Select"])&&(pb(q.props,!0)||pb(q.props.inputProps,!0))&&(B=!0)}),B}),[A,L]=g.useState(!1);c&&A&&L(!1);const F=u!==void 0&&!c?u:A;let z;g.useRef(!1);const I=g.useCallback(()=>{T(!0)},[]),Q=g.useCallback(()=>{T(!1)},[]),Y=g.useMemo(()=>({adornedStart:P,setAdornedStart:E,color:o,disabled:c,error:m,filled:M,focused:F,fullWidth:h,hiddenLabel:f,size:S,onBlur:()=>{L(!1)},onFocus:()=>{L(!0)},onEmpty:Q,onFilled:I,registerEffect:z,required:w,variant:j}),[P,o,c,m,M,F,h,f,z,Q,I,w,S,j]);return e.jsx(fv.Provider,{value:Y,children:e.jsx(kX,{as:l,ownerState:N,className:et(C.root,i),ref:a,...v,children:n})})});function EX(t){return Dt("MuiFormControlLabel",t)}const lf=Tt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),TX=t=>{const{classes:s,disabled:a,labelPlacement:r,error:n,required:i}=t,o={root:["root",a&&"disabled",`labelPlacement${Xe(r)}`,n&&"error",i&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",n&&"error"]};return kt(o,EX,s)},MX=Ne("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[{[`& .${lf.label}`]:s.label},s.root,s[`labelPlacement${Xe(a.labelPlacement)}`]]}})(Yt(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${lf.disabled}`]:{cursor:"default"},[`& .${lf.label}`]:{[`&.${lf.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:s})=>s==="start"||s==="top"||s==="bottom",style:{marginLeft:16}}]}))),DX=Ne("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(Yt(({theme:t})=>({[`&.${lf.error}`]:{color:(t.vars||t).palette.error.main}}))),Xn=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiFormControlLabel"}),{checked:n,className:i,componentsProps:o={},control:l,disabled:c,disableTypography:m,inputRef:u,label:h,labelPlacement:f="end",name:b,onChange:w,required:S,slots:j={},slotProps:v={},value:N,...C}=r,P=yi(),E=c??l.props.disabled??P?.disabled,M=S??l.props.required,T={disabled:E,required:M};["checked","name","onChange","value","inputRef"].forEach(B=>{typeof l.props[B]>"u"&&typeof r[B]<"u"&&(T[B]=r[B])});const A=sd({props:r,muiFormControl:P,states:["error"]}),L={...r,disabled:E,labelPlacement:f,required:M,error:A.error},F=TX(L),z={slots:j,slotProps:{...o,...v}},[I,Q]=Zt("typography",{elementType:x,externalForwardedProps:z,ownerState:L});let Y=h;return Y!=null&&Y.type!==x&&!m&&(Y=e.jsx(I,{component:"span",...Q,className:et(F.label,Q?.className),children:Y})),e.jsxs(MX,{className:et(F.root,i),ownerState:L,ref:a,...C,children:[g.cloneElement(l,T),M?e.jsxs("div",{children:[Y,e.jsxs(DX,{ownerState:L,"aria-hidden":!0,className:F.asterisk,children:["","*"]})]}):Y]})});function RX(t){return Dt("MuiFormGroup",t)}Tt("MuiFormGroup",["root","row","error"]);const AX=t=>{const{classes:s,row:a,error:r}=t;return kt({root:["root",a&&"row",r&&"error"]},RX,s)},IX=Ne("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.row&&s.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),OX=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiFormGroup"}),{className:n,row:i=!1,...o}=r,l=yi(),c=sd({props:r,muiFormControl:l,states:["error"]}),m={...r,row:i,error:c.error},u=AX(m);return e.jsx(IX,{className:et(u.root,n),ownerState:m,ref:a,...o})});function FX(t){return Dt("MuiFormHelperText",t)}const Xk=Tt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Jk;const LX=t=>{const{classes:s,contained:a,size:r,disabled:n,error:i,filled:o,focused:l,required:c}=t,m={root:["root",n&&"disabled",i&&"error",r&&`size${Xe(r)}`,a&&"contained",l&&"focused",o&&"filled",c&&"required"]};return kt(m,FX,s)},$X=Ne("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.size&&s[`size${Xe(a.size)}`],a.contained&&s.contained,a.filled&&s.filled]}})(Yt(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Xk.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Xk.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:s})=>s.contained,style:{marginLeft:14,marginRight:14}}]}))),_4=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiFormHelperText"}),{children:n,className:i,component:o="p",disabled:l,error:c,filled:m,focused:u,margin:h,required:f,variant:b,...w}=r,S=yi(),j=sd({props:r,muiFormControl:S,states:["variant","size","disabled","error","filled","focused","required"]}),v={...r,component:o,contained:j.variant==="filled"||j.variant==="outlined",variant:j.variant,size:j.size,disabled:j.disabled,error:j.error,filled:j.filled,focused:j.focused,required:j.required};delete v.ownerState;const N=LX(v);return e.jsx($X,{as:o,className:et(N.root,i),ref:a,...w,ownerState:v,children:n===" "?Jk||(Jk=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):n})});function zX(t){return Dt("MuiFormLabel",t)}const Hf=Tt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),qX=t=>{const{classes:s,color:a,focused:r,disabled:n,error:i,filled:o,required:l}=t,c={root:["root",`color${Xe(a)}`,n&&"disabled",i&&"error",o&&"filled",r&&"focused",l&&"required"],asterisk:["asterisk",i&&"error"]};return kt(c,zX,s)},BX=Ne("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.color==="secondary"&&s.colorSecondary,a.filled&&s.filled]}})(Yt(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s},style:{[`&.${Hf.focused}`]:{color:(t.vars||t).palette[s].main}}})),{props:{},style:{[`&.${Hf.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Hf.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),UX=Ne("span",{name:"MuiFormLabel",slot:"Asterisk"})(Yt(({theme:t})=>({[`&.${Hf.error}`]:{color:(t.vars||t).palette.error.main}}))),LR=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiFormLabel"}),{children:n,className:i,color:o,component:l="label",disabled:c,error:m,filled:u,focused:h,required:f,...b}=r,w=yi(),S=sd({props:r,muiFormControl:w,states:["color","required","focused","disabled","error","filled"]}),j={...r,color:S.color||"primary",component:l,disabled:S.disabled,error:S.error,filled:S.filled,focused:S.focused,required:S.required},v=qX(j);return e.jsxs(BX,{as:l,ownerState:j,className:et(v.root,i),ref:a,...b,children:[n,S.required&&e.jsxs(UX,{ownerState:j,"aria-hidden":!0,className:v.asterisk,children:["","*"]})]})});function ww(t){return`scale(${t}, ${t**2})`}const VX={entering:{opacity:1,transform:ww(1)},entered:{opacity:1,transform:"none"}},X2=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),xx=g.forwardRef(function(s,a){const{addEndListener:r,appear:n=!0,children:i,easing:o,in:l,onEnter:c,onEntered:m,onEntering:u,onExit:h,onExited:f,onExiting:b,style:w,timeout:S="auto",TransitionComponent:j=gi,...v}=s,N=ni(),C=g.useRef(),P=xi(),E=g.useRef(null),M=Bs(E,td(i),a),T=B=>q=>{if(B){const V=E.current;q===void 0?B(V):B(V,q)}},A=T(u),L=T((B,q)=>{m4(B);const{duration:V,delay:G,easing:H}=Yc({style:w,timeout:S,easing:o},{mode:"enter"});let D;S==="auto"?(D=P.transitions.getAutoHeightDuration(B.clientHeight),C.current=D):D=V,B.style.transition=[P.transitions.create("opacity",{duration:D,delay:G}),P.transitions.create("transform",{duration:X2?D:D*.666,delay:G,easing:H})].join(","),c&&c(B,q)}),F=T(m),z=T(b),I=T(B=>{const{duration:q,delay:V,easing:G}=Yc({style:w,timeout:S,easing:o},{mode:"exit"});let H;S==="auto"?(H=P.transitions.getAutoHeightDuration(B.clientHeight),C.current=H):H=q,B.style.transition=[P.transitions.create("opacity",{duration:H,delay:V}),P.transitions.create("transform",{duration:X2?H:H*.666,delay:X2?V:V||H*.333,easing:G})].join(","),B.style.opacity=0,B.style.transform=ww(.75),h&&h(B)}),Q=T(f),Y=B=>{S==="auto"&&N.start(C.current||0,B),r&&r(E.current,B)};return e.jsx(j,{appear:n,in:l,nodeRef:E,onEnter:L,onEntered:F,onEntering:A,onExit:I,onExited:Q,onExiting:z,addEndListener:Y,timeout:S==="auto"?null:S,...v,children:(B,{ownerState:q,...V})=>g.cloneElement(i,{style:{opacity:0,transform:ww(.75),visibility:B==="exited"&&!l?"hidden":void 0,...VX[B],...w,...i.props.style},ref:M,...V})})});xx&&(xx.muiSupportAuto=!0);const HX=t=>{const{classes:s,disableUnderline:a}=t,n=kt({root:["root",!a&&"underline"],input:["input"]},bQ,s);return{...s,...n}},WX=Ne(yv,{shouldForwardProp:t=>zr(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[...xv(t,s),!a.disableUnderline&&s.underline]}})(Yt(({theme:t})=>{let a=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(a=t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kc.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kc.disabled}, .${kc.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},[`&.${kc.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Ma()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}}))]}})),YX=Ne(bv,{name:"MuiInput",slot:"Input",overridesResolver:gv})({}),S4=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiInput"}),{disableUnderline:n=!1,components:i={},componentsProps:o,fullWidth:l=!1,inputComponent:c="input",multiline:m=!1,slotProps:u,slots:h={},type:f="text",...b}=r,w=HX(r),j={root:{ownerState:{disableUnderline:n}}},v=u??o?dn(u??o,j):j,N=h.root??i.Root??WX,C=h.input??i.Input??YX;return e.jsx(vv,{slots:{root:N,input:C},slotProps:v,fullWidth:l,inputComponent:c,multiline:m,ref:a,type:f,...b,classes:w})});S4.muiName="Input";function GX(t){return Dt("MuiInputAdornment",t)}const eE=Tt("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var tE;const KX=(t,s)=>{const{ownerState:a}=t;return[s.root,s[`position${Xe(a.position)}`],a.disablePointerEvents===!0&&s.disablePointerEvents,s[a.variant]]},QX=t=>{const{classes:s,disablePointerEvents:a,hiddenLabel:r,position:n,size:i,variant:o}=t,l={root:["root",a&&"disablePointerEvents",n&&`position${Xe(n)}`,o,r&&"hiddenLabel",i&&`size${Xe(i)}`]};return kt(l,GX,s)},ZX=Ne("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:KX})(Yt(({theme:t})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${eE.positionStart}&:not(.${eE.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),_w=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiInputAdornment"}),{children:n,className:i,component:o="div",disablePointerEvents:l=!1,disableTypography:c=!1,position:m,variant:u,...h}=r,f=yi()||{};let b=u;u&&f.variant,f&&!b&&(b=f.variant);const w={...r,hiddenLabel:f.hiddenLabel,size:f.size,disablePointerEvents:l,position:m,variant:b},S=QX(w);return e.jsx(fv.Provider,{value:null,children:e.jsx(ZX,{as:o,ownerState:w,className:et(S.root,i),ref:a,...h,children:typeof n=="string"&&!c?e.jsx(x,{color:"textSecondary",children:n}):e.jsxs(g.Fragment,{children:[m==="start"?tE||(tE=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,n]})})})});function XX(t){return Dt("MuiInputLabel",t)}Tt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const JX=t=>{const{classes:s,formControl:a,size:r,shrink:n,disableAnimation:i,variant:o,required:l}=t,c={root:["root",a&&"formControl",!i&&"animated",n&&"shrink",r&&r!=="medium"&&`size${Xe(r)}`,o],asterisk:[l&&"asterisk"]},m=kt(c,XX,s);return{...s,...m}},eJ=Ne(LR,{shouldForwardProp:t=>zr(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[{[`& .${Hf.asterisk}`]:s.asterisk},s.root,a.formControl&&s.formControl,a.size==="small"&&s.sizeSmall,a.shrink&&s.shrink,!a.disableAnimation&&s.animated,a.focused&&s.focused,s[a.variant]]}})(Yt(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:s})=>s.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:s})=>s.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:s})=>!s.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:s,ownerState:a})=>s==="filled"&&a.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:s,ownerState:a,size:r})=>s==="filled"&&a.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:s,ownerState:a})=>s==="outlined"&&a.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),$R=g.forwardRef(function(s,a){const r=es({name:"MuiInputLabel",props:s}),{disableAnimation:n=!1,margin:i,shrink:o,variant:l,className:c,...m}=r,u=yi();let h=o;typeof h>"u"&&u&&(h=u.filled||u.focused||u.adornedStart);const f=sd({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),b={...r,disableAnimation:n,formControl:u,shrink:h,size:f.size,variant:f.variant,required:f.required,focused:f.focused},w=JX(b);return e.jsx(eJ,{"data-shrink":h,ref:a,className:et(w.root,c),...m,ownerState:b,classes:w})});function tJ(t){return Dt("MuiLinearProgress",t)}Tt("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Sw=4,Cw=al`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,sJ=typeof Cw!="string"?Jc`
        animation: ${Cw} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,Pw=al`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,aJ=typeof Pw!="string"?Jc`
        animation: ${Pw} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,kw=al`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,rJ=typeof kw!="string"?Jc`
        animation: ${kw} 3s infinite linear;
      `:null,nJ=t=>{const{classes:s,variant:a,color:r}=t,n={root:["root",`color${Xe(r)}`,a],dashed:["dashed",`dashedColor${Xe(r)}`],bar1:["bar","bar1",`barColor${Xe(r)}`,(a==="indeterminate"||a==="query")&&"bar1Indeterminate",a==="determinate"&&"bar1Determinate",a==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",a!=="buffer"&&`barColor${Xe(r)}`,a==="buffer"&&`color${Xe(r)}`,(a==="indeterminate"||a==="query")&&"bar2Indeterminate",a==="buffer"&&"bar2Buffer"]};return kt(n,tJ,s)},C4=(t,s)=>t.vars?t.vars.palette.LinearProgress[`${s}Bg`]:t.palette.mode==="light"?t.lighten(t.palette[s].main,.62):t.darken(t.palette[s].main,.5),iJ=Ne("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[`color${Xe(a.color)}`],s[a.variant]]}})(Yt(({theme:t})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s},style:{backgroundColor:C4(t,s)}})),{props:({ownerState:s})=>s.color==="inherit"&&s.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),oJ=Ne("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.dashed,s[`dashedColor${Xe(a.color)}`]]}})(Yt(({theme:t})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(t.palette).filter(Ma()).map(([s])=>{const a=C4(t,s);return{props:{color:s},style:{backgroundImage:`radial-gradient(${a} 0%, ${a} 16%, transparent 42%)`}}})]})),rJ||{animation:`${kw} 3s infinite linear`}),lJ=Ne("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.bar,s.bar1,s[`barColor${Xe(a.color)}`],(a.variant==="indeterminate"||a.variant==="query")&&s.bar1Indeterminate,a.variant==="determinate"&&s.bar1Determinate,a.variant==="buffer"&&s.bar1Buffer]}})(Yt(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s},style:{backgroundColor:(t.vars||t).palette[s].main}})),{props:{variant:"determinate"},style:{transition:`transform .${Sw}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${Sw}s linear`}},{props:({ownerState:s})=>s.variant==="indeterminate"||s.variant==="query",style:{width:"auto"}},{props:({ownerState:s})=>s.variant==="indeterminate"||s.variant==="query",style:sJ||{animation:`${Cw} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),cJ=Ne("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.bar,s.bar2,s[`barColor${Xe(a.color)}`],(a.variant==="indeterminate"||a.variant==="query")&&s.bar2Indeterminate,a.variant==="buffer"&&s.bar2Buffer]}})(Yt(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s},style:{"--LinearProgressBar2-barColor":(t.vars||t).palette[s].main}})),{props:({ownerState:s})=>s.variant!=="buffer"&&s.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:s})=>s.variant!=="buffer"&&s.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s,variant:"buffer"},style:{backgroundColor:C4(t,s),transition:`transform .${Sw}s linear`}})),{props:({ownerState:s})=>s.variant==="indeterminate"||s.variant==="query",style:{width:"auto"}},{props:({ownerState:s})=>s.variant==="indeterminate"||s.variant==="query",style:aJ||{animation:`${Pw} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),gs=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiLinearProgress"}),{className:n,color:i="primary",value:o,valueBuffer:l,variant:c="indeterminate",...m}=r,u={...r,color:i,variant:c},h=nJ(u),f=$r(),b={},w={bar1:{},bar2:{}};if((c==="determinate"||c==="buffer")&&o!==void 0){b["aria-valuenow"]=Math.round(o),b["aria-valuemin"]=0,b["aria-valuemax"]=100;let S=o-100;f&&(S=-S),w.bar1.transform=`translateX(${S}%)`}if(c==="buffer"&&l!==void 0){let S=(l||0)-100;f&&(S=-S),w.bar2.transform=`translateX(${S}%)`}return e.jsxs(iJ,{className:et(h.root,n),ownerState:u,role:"progressbar",...b,ref:a,...m,children:[c==="buffer"?e.jsx(oJ,{className:h.dashed,ownerState:u}):null,e.jsx(lJ,{className:h.bar1,ownerState:u,style:w.bar1}),c==="determinate"?null:e.jsx(cJ,{className:h.bar2,ownerState:u,style:w.bar2})]})});function dJ(t){return Dt("MuiLink",t)}const uJ=Tt("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),mJ=({theme:t,ownerState:s})=>{const a=s.color;if("colorSpace"in t&&t.colorSpace){const i=Oo(t,`palette.${a}.main`)||Oo(t,`palette.${a}`)||s.color;return t.alpha(i,.4)}const r=Oo(t,`palette.${a}.main`,!1)||Oo(t,`palette.${a}`,!1)||s.color,n=Oo(t,`palette.${a}.mainChannel`)||Oo(t,`palette.${a}Channel`);return"vars"in t&&n?`rgba(${n} / 0.4)`:Nn(r,.4)},sE={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},pJ=t=>{const{classes:s,component:a,focusVisible:r,underline:n}=t,i={root:["root",`underline${Xe(n)}`,a==="button"&&"button",r&&"focusVisible"]};return kt(i,dJ,s)},hJ=Ne(x,{name:"MuiLink",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[`underline${Xe(a.underline)}`],a.component==="button"&&s.button]}})(Yt(({theme:t})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:s,ownerState:a})=>s==="always"&&a.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:s,ownerState:a})=>s==="always"&&a.color==="inherit",style:t.colorSpace?{textDecorationColor:t.alpha("currentColor",.4)}:null},...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{underline:"always",color:s},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette[s].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${uJ.focusVisible}`]:{outline:"auto"}}}]}))),fJ=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiLink"}),n=xi(),{className:i,color:o="primary",component:l="a",onBlur:c,onFocus:m,TypographyClasses:u,underline:h="always",variant:f="inherit",sx:b,...w}=r,[S,j]=g.useState(!1),v=E=>{Zm(E.target)||j(!1),c&&c(E)},N=E=>{Zm(E.target)&&j(!0),m&&m(E)},C={...r,color:o,component:l,focusVisible:S,underline:h,variant:f},P=pJ(C);return e.jsx(hJ,{color:o,className:et(P.root,i),classes:u,component:l,onBlur:v,onFocus:N,ref:a,ownerState:C,variant:f,...w,sx:[...sE[o]===void 0?[{color:o}]:[],...Array.isArray(b)?b:[b]],style:{...w.style,...h==="always"&&o!=="inherit"&&!sE[o]&&{"--Link-underlineColor":mJ({theme:n,ownerState:C})}}})}),xo=g.createContext({});function xJ(t){return Dt("MuiList",t)}Tt("MuiList",["root","padding","dense","subheader"]);const gJ=t=>{const{classes:s,disablePadding:a,dense:r,subheader:n}=t;return kt({root:["root",!a&&"padding",r&&"dense",n&&"subheader"]},xJ,s)},yJ=Ne("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,!a.disablePadding&&s.padding,a.dense&&s.dense,a.subheader&&s.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),zR=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiList"}),{children:n,className:i,component:o="ul",dense:l=!1,disablePadding:c=!1,subheader:m,...u}=r,h=g.useMemo(()=>({dense:l}),[l]),f={...r,component:o,dense:l,disablePadding:c},b=gJ(f);return e.jsx(xo.Provider,{value:h,children:e.jsxs(yJ,{as:o,className:et(b.root,i),ref:a,ownerState:f,...u,children:[m,n]})})});function bJ(t){return Dt("MuiListItem",t)}Tt("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function vJ(t){return Dt("MuiListItemButton",t)}const vm=Tt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),jJ=(t,s)=>{const{ownerState:a}=t;return[s.root,a.dense&&s.dense,a.alignItems==="flex-start"&&s.alignItemsFlexStart,a.divider&&s.divider,!a.disableGutters&&s.gutters]},NJ=t=>{const{alignItems:s,classes:a,dense:r,disabled:n,disableGutters:i,divider:o,selected:l}=t,m=kt({root:["root",r&&"dense",!i&&"gutters",o&&"divider",n&&"disabled",s==="flex-start"&&"alignItemsFlexStart",l&&"selected"]},vJ,a);return{...a,...m}},wJ=Ne(yo,{shouldForwardProp:t=>zr(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:jJ})(Yt(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${vm.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${vm.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${vm.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${vm.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${vm.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:s})=>s.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:s})=>!s.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:s})=>s.dense,style:{paddingTop:4,paddingBottom:4}}]}))),aE=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:i=!1,component:o="div",children:l,dense:c=!1,disableGutters:m=!1,divider:u=!1,focusVisibleClassName:h,selected:f=!1,className:b,...w}=r,S=g.useContext(xo),j=g.useMemo(()=>({dense:c||S.dense||!1,alignItems:n,disableGutters:m}),[n,S.dense,c,m]),v=g.useRef(null);Ia(()=>{i&&v.current&&v.current.focus()},[i]);const N={...r,alignItems:n,dense:j.dense,disableGutters:m,divider:u,selected:f},C=NJ(N),P=Bs(v,a);return e.jsx(xo.Provider,{value:j,children:e.jsx(wJ,{ref:P,href:w.href||w.to,component:(w.href||w.to)&&o==="div"?"button":o,focusVisibleClassName:et(C.focusVisible,h),ownerState:N,className:et(C.root,b),...w,classes:C,children:l})})});function _J(t){return Dt("MuiListItemSecondaryAction",t)}Tt("MuiListItemSecondaryAction",["root","disableGutters"]);const SJ=t=>{const{disableGutters:s,classes:a}=t;return kt({root:["root",s&&"disableGutters"]},_J,a)},CJ=Ne("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.disableGutters&&s.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),qR=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiListItemSecondaryAction"}),{className:n,...i}=r,o=g.useContext(xo),l={...r,disableGutters:o.disableGutters},c=SJ(l);return e.jsx(CJ,{className:et(c.root,n),ownerState:l,ref:a,...i})});qR.muiName="ListItemSecondaryAction";const PJ=(t,s)=>{const{ownerState:a}=t;return[s.root,a.dense&&s.dense,a.alignItems==="flex-start"&&s.alignItemsFlexStart,a.divider&&s.divider,!a.disableGutters&&s.gutters,!a.disablePadding&&s.padding,a.hasSecondaryAction&&s.secondaryAction]},kJ=t=>{const{alignItems:s,classes:a,dense:r,disableGutters:n,disablePadding:i,divider:o,hasSecondaryAction:l}=t;return kt({root:["root",r&&"dense",!n&&"gutters",!i&&"padding",o&&"divider",s==="flex-start"&&"alignItemsFlexStart",l&&"secondaryAction"],container:["container"]},bJ,a)},EJ=Ne("div",{name:"MuiListItem",slot:"Root",overridesResolver:PJ})(Yt(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:s})=>!s.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:s})=>!s.disablePadding&&s.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:s})=>!s.disablePadding&&!s.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:s})=>!s.disablePadding&&!!s.secondaryAction,style:{paddingRight:48}},{props:({ownerState:s})=>!!s.secondaryAction,style:{[`& > .${vm.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:s})=>s.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:s})=>s.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:s})=>s.hasSecondaryAction,style:{paddingRight:48}}]}))),TJ=Ne("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),MJ=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiListItem"}),{alignItems:n="center",children:i,className:o,component:l,components:c={},componentsProps:m={},ContainerComponent:u="li",ContainerProps:{className:h,...f}={},dense:b=!1,disableGutters:w=!1,disablePadding:S=!1,divider:j=!1,secondaryAction:v,slotProps:N={},slots:C={},...P}=r,E=g.useContext(xo),M=g.useMemo(()=>({dense:b||E.dense||!1,alignItems:n,disableGutters:w}),[n,E.dense,b,w]),T=g.useRef(null),A=g.Children.toArray(i),L=A.length&&Ly(A[A.length-1],["ListItemSecondaryAction"]),F={...r,alignItems:n,dense:M.dense,disableGutters:w,disablePadding:S,divider:j,hasSecondaryAction:L},z=kJ(F),I=Bs(T,a),Q=C.root||c.Root||EJ,Y=N.root||m.root||{},B={className:et(z.root,Y.className,o),...P};let q=l||"li";return L?(q=!B.component&&!l?"div":q,u==="li"&&(q==="li"?q="div":B.component==="li"&&(B.component="div")),e.jsx(xo.Provider,{value:M,children:e.jsxs(TJ,{as:u,className:et(z.container,h),ref:I,ownerState:F,...f,children:[e.jsx(Q,{...Y,...!Qm(Q)&&{as:q,ownerState:{...F,...Y.ownerState}},...B,children:A}),A.pop()]})})):e.jsx(xo.Provider,{value:M,children:e.jsxs(Q,{...Y,as:q,ref:I,...!Qm(Q)&&{ownerState:{...F,...Y.ownerState}},...B,children:[A,v&&e.jsx(qR,{children:v})]})})});function DJ(t){return Dt("MuiListItemIcon",t)}const rE=Tt("MuiListItemIcon",["root","alignItemsFlexStart"]),RJ=t=>{const{alignItems:s,classes:a}=t;return kt({root:["root",s==="flex-start"&&"alignItemsFlexStart"]},DJ,a)},AJ=Ne("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.alignItems==="flex-start"&&s.alignItemsFlexStart]}})(Yt(({theme:t})=>({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),zy=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiListItemIcon"}),{className:n,...i}=r,o=g.useContext(xo),l={...r,alignItems:o.alignItems},c=RJ(l);return e.jsx(AJ,{className:et(c.root,n),ownerState:l,ref:a,...i})});function IJ(t){return Dt("MuiListItemText",t)}const _m=Tt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),OJ=t=>{const{classes:s,inset:a,primary:r,secondary:n,dense:i}=t;return kt({root:["root",a&&"inset",i&&"dense",r&&n&&"multiline"],primary:["primary"],secondary:["secondary"]},IJ,s)},FJ=Ne("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[{[`& .${_m.primary}`]:s.primary},{[`& .${_m.secondary}`]:s.secondary},s.root,a.inset&&s.inset,a.primary&&a.secondary&&s.multiline,a.dense&&s.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${wk.root}:where(& .${_m.primary})`]:{display:"block"},[`.${wk.root}:where(& .${_m.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),qy=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiListItemText"}),{children:n,className:i,disableTypography:o=!1,inset:l=!1,primary:c,primaryTypographyProps:m,secondary:u,secondaryTypographyProps:h,slots:f={},slotProps:b={},...w}=r,{dense:S}=g.useContext(xo);let j=c??n,v=u;const N={...r,disableTypography:o,inset:l,primary:!!j,secondary:!!v,dense:S},C=OJ(N),P={slots:f,slotProps:{primary:m,secondary:h,...b}},[E,M]=Zt("root",{className:et(C.root,i),elementType:FJ,externalForwardedProps:{...P,...w},ownerState:N,ref:a}),[T,A]=Zt("primary",{className:C.primary,elementType:x,externalForwardedProps:P,ownerState:N}),[L,F]=Zt("secondary",{className:C.secondary,elementType:x,externalForwardedProps:P,ownerState:N});return j!=null&&j.type!==x&&!o&&(j=e.jsx(T,{variant:S?"body2":"body1",component:A?.variant?void 0:"span",...A,children:j})),v!=null&&v.type!==x&&!o&&(v=e.jsx(L,{variant:"body2",color:"textSecondary",...F,children:v})),e.jsxs(E,{...M,children:[j,v]})});function J2(t,s,a){return t===s?t.firstChild:s&&s.nextElementSibling?s.nextElementSibling:a?null:t.firstChild}function nE(t,s,a){return t===s?a?t.firstChild:t.lastChild:s&&s.previousElementSibling?s.previousElementSibling:a?null:t.lastChild}function BR(t,s){if(s===void 0)return!0;let a=t.innerText;return a===void 0&&(a=t.textContent),a=a.trim().toLowerCase(),a.length===0?!1:s.repeating?a[0]===s.keys[0]:a.startsWith(s.keys.join(""))}function Ih(t,s,a,r,n,i){let o=!1,l=n(t,s,s?a:!1);for(;l;){if(l===t.firstChild){if(o)return!1;o=!0}const c=r?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!BR(l,i)||c)l=n(t,l,a);else return l.focus(),!0}return!1}const P4=g.forwardRef(function(s,a){const{actions:r,autoFocus:n=!1,autoFocusItem:i=!1,children:o,className:l,disabledItemsFocusable:c=!1,disableListWrap:m=!1,onKeyDown:u,variant:h="selectedMenu",...f}=s,b=g.useRef(null),w=g.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ia(()=>{n&&b.current.focus()},[n]),g.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(C,{direction:P})=>{const E=!b.current.style.width;if(C.clientHeight<b.current.clientHeight&&E){const M=`${RR(mi(C))}px`;b.current.style[P==="rtl"?"paddingLeft":"paddingRight"]=M,b.current.style.width=`calc(100% + ${M})`}return b.current}}),[]);const S=C=>{const P=b.current,E=C.key;if(C.ctrlKey||C.metaKey||C.altKey){u&&u(C);return}const T=ir(P).activeElement;if(E==="ArrowDown")C.preventDefault(),Ih(P,T,m,c,J2);else if(E==="ArrowUp")C.preventDefault(),Ih(P,T,m,c,nE);else if(E==="Home")C.preventDefault(),Ih(P,null,m,c,J2);else if(E==="End")C.preventDefault(),Ih(P,null,m,c,nE);else if(E.length===1){const A=w.current,L=E.toLowerCase(),F=performance.now();A.keys.length>0&&(F-A.lastTime>500?(A.keys=[],A.repeating=!0,A.previousKeyMatched=!0):A.repeating&&L!==A.keys[0]&&(A.repeating=!1)),A.lastTime=F,A.keys.push(L);const z=T&&!A.repeating&&BR(T,A);A.previousKeyMatched&&(z||Ih(P,T,!1,c,J2,A))?C.preventDefault():A.previousKeyMatched=!1}u&&u(C)},j=Bs(b,a);let v=-1;g.Children.forEach(o,(C,P)=>{if(!g.isValidElement(C)){v===P&&(v+=1,v>=o.length&&(v=-1));return}C.props.disabled||(h==="selectedMenu"&&C.props.selected||v===-1)&&(v=P),v===P&&(C.props.disabled||C.props.muiSkipListHighlight||C.type.muiSkipListHighlight)&&(v+=1,v>=o.length&&(v=-1))});const N=g.Children.map(o,(C,P)=>{if(P===v){const E={};return i&&(E.autoFocus=!0),C.props.tabIndex===void 0&&h==="selectedMenu"&&(E.tabIndex=0),g.cloneElement(C,E)}return C});return e.jsx(zR,{role:"menu",ref:j,className:l,onKeyDown:S,tabIndex:n?0:-1,...f,children:N})});function LJ(t){return Dt("MuiPopover",t)}Tt("MuiPopover",["root","paper"]);function iE(t,s){let a=0;return typeof s=="number"?a=s:s==="center"?a=t.height/2:s==="bottom"&&(a=t.height),a}function oE(t,s){let a=0;return typeof s=="number"?a=s:s==="center"?a=t.width/2:s==="right"&&(a=t.width),a}function lE(t){return[t.horizontal,t.vertical].map(s=>typeof s=="number"?`${s}px`:s).join(" ")}function Q0(t){return typeof t=="function"?t():t}const $J=t=>{const{classes:s}=t;return kt({root:["root"],paper:["paper"]},LJ,s)},zJ=Ne(jv,{name:"MuiPopover",slot:"Root"})({}),UR=Ne(oa,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),qJ=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiPopover"}),{action:n,anchorEl:i,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:c="anchorEl",children:m,className:u,container:h,elevation:f=8,marginThreshold:b=16,open:w,PaperProps:S={},slots:j={},slotProps:v={},transformOrigin:N={vertical:"top",horizontal:"left"},TransitionComponent:C,transitionDuration:P="auto",TransitionProps:E={},disableScrollLock:M=!1,...T}=r,A=g.useRef(),L={...r,anchorOrigin:o,anchorReference:c,elevation:f,marginThreshold:b,transformOrigin:N,TransitionComponent:C,transitionDuration:P,TransitionProps:E},F=$J(L),z=g.useCallback(()=>{if(c==="anchorPosition")return l;const ne=Q0(i),ge=(ne&&ne.nodeType===1?ne:ir(A.current).body).getBoundingClientRect();return{top:ge.top+iE(ge,o.vertical),left:ge.left+oE(ge,o.horizontal)}},[i,o.horizontal,o.vertical,l,c]),I=g.useCallback(ne=>({vertical:iE(ne,N.vertical),horizontal:oE(ne,N.horizontal)}),[N.horizontal,N.vertical]),Q=g.useCallback(ne=>{const xe={width:ne.offsetWidth,height:ne.offsetHeight},ge=I(xe);if(c==="none")return{top:null,left:null,transformOrigin:lE(ge)};const le=z();let pe=le.top-ge.vertical,Re=le.left-ge.horizontal;const Se=pe+xe.height,He=Re+xe.width,ze=mi(Q0(i)),st=ze.innerHeight-b,ke=ze.innerWidth-b;if(b!==null&&pe<b){const We=pe-b;pe-=We,ge.vertical+=We}else if(b!==null&&Se>st){const We=Se-st;pe-=We,ge.vertical+=We}if(b!==null&&Re<b){const We=Re-b;Re-=We,ge.horizontal+=We}else if(He>ke){const We=He-ke;Re-=We,ge.horizontal+=We}return{top:`${Math.round(pe)}px`,left:`${Math.round(Re)}px`,transformOrigin:lE(ge)}},[i,c,z,I,b]),[Y,B]=g.useState(w),q=g.useCallback(()=>{const ne=A.current;if(!ne)return;const xe=Q(ne);xe.top!==null&&ne.style.setProperty("top",xe.top),xe.left!==null&&(ne.style.left=xe.left),ne.style.transformOrigin=xe.transformOrigin,B(!0)},[Q]);g.useEffect(()=>(M&&window.addEventListener("scroll",q),()=>window.removeEventListener("scroll",q)),[i,M,q]);const V=()=>{q()},G=()=>{B(!1)};g.useEffect(()=>{w&&q()}),g.useImperativeHandle(n,()=>w?{updatePosition:()=>{q()}}:null,[w,q]),g.useEffect(()=>{if(!w)return;const ne=ng(()=>{q()}),xe=mi(Q0(i));return xe.addEventListener("resize",ne),()=>{ne.clear(),xe.removeEventListener("resize",ne)}},[i,w,q]);let H=P;const D={slots:{transition:C,...j},slotProps:{transition:E,paper:S,...v}},[R,$]=Zt("transition",{elementType:xx,externalForwardedProps:D,ownerState:L,getSlotProps:ne=>({...ne,onEntering:(xe,ge)=>{ne.onEntering?.(xe,ge),V()},onExited:xe=>{ne.onExited?.(xe),G()}}),additionalProps:{appear:!0,in:w}});P==="auto"&&!R.muiSupportAuto&&(H=void 0);const W=h||(i?ir(Q0(i)).body:void 0),[J,{slots:te,slotProps:ee,...ae}]=Zt("root",{ref:a,elementType:zJ,externalForwardedProps:{...D,...T},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:j.backdrop},slotProps:{backdrop:l4(typeof v.backdrop=="function"?v.backdrop(L):v.backdrop,{invisible:!0})},container:W,open:w},ownerState:L,className:et(F.root,u)}),[ce,he]=Zt("paper",{ref:A,className:F.paper,elementType:UR,externalForwardedProps:D,shouldForwardComponentProp:!0,additionalProps:{elevation:f,style:Y?void 0:{opacity:0}},ownerState:L});return e.jsx(J,{...ae,...!Qm(J)&&{slots:te,slotProps:ee,disableScrollLock:M},children:e.jsx(R,{...$,timeout:H,children:e.jsx(ce,{...he,children:m})})})});function BJ(t){return Dt("MuiMenu",t)}Tt("MuiMenu",["root","paper","list"]);const UJ={vertical:"top",horizontal:"right"},VJ={vertical:"top",horizontal:"left"},HJ=t=>{const{classes:s}=t;return kt({root:["root"],paper:["paper"],list:["list"]},BJ,s)},WJ=Ne(qJ,{shouldForwardProp:t=>zr(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),YJ=Ne(UR,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),GJ=Ne(P4,{name:"MuiMenu",slot:"List"})({outline:0}),k4=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiMenu"}),{autoFocus:n=!0,children:i,className:o,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:m,open:u,PaperProps:h={},PopoverClasses:f,transitionDuration:b="auto",TransitionProps:{onEntering:w,...S}={},variant:j="selectedMenu",slots:v={},slotProps:N={},...C}=r,P=$r(),E={...r,autoFocus:n,disableAutoFocusItem:l,MenuListProps:c,onEntering:w,PaperProps:h,transitionDuration:b,TransitionProps:S,variant:j},M=HJ(E),T=n&&!l&&u,A=g.useRef(null),L=(H,D)=>{A.current&&A.current.adjustStyleForScrollbar(H,{direction:P?"rtl":"ltr"}),w&&w(H,D)},F=H=>{H.key==="Tab"&&(H.preventDefault(),m&&m(H,"tabKeyDown"))};let z=-1;g.Children.map(i,(H,D)=>{g.isValidElement(H)&&(H.props.disabled||(j==="selectedMenu"&&H.props.selected||z===-1)&&(z=D))});const I={slots:v,slotProps:{list:c,transition:S,paper:h,...N}},Q=ea({elementType:v.root,externalSlotProps:N.root,ownerState:E,className:[M.root,o]}),[Y,B]=Zt("paper",{className:M.paper,elementType:YJ,externalForwardedProps:I,shouldForwardComponentProp:!0,ownerState:E}),[q,V]=Zt("list",{className:et(M.list,c.className),elementType:GJ,shouldForwardComponentProp:!0,externalForwardedProps:I,getSlotProps:H=>({...H,onKeyDown:D=>{F(D),H.onKeyDown?.(D)}}),ownerState:E}),G=typeof I.slotProps.transition=="function"?I.slotProps.transition(E):I.slotProps.transition;return e.jsx(WJ,{onClose:m,anchorOrigin:{vertical:"bottom",horizontal:P?"right":"left"},transformOrigin:P?UJ:VJ,slots:{root:v.root,paper:Y,backdrop:v.backdrop,...v.transition&&{transition:v.transition}},slotProps:{root:Q,paper:B,backdrop:typeof N.backdrop=="function"?N.backdrop(E):N.backdrop,transition:{...G,onEntering:(...H)=>{L(...H),G?.onEntering?.(...H)}}},open:u,ref:a,transitionDuration:b,ownerState:E,...C,classes:f,children:e.jsx(q,{actions:A,autoFocus:n&&(z===-1||l),autoFocusItem:T,variant:j,...V,children:i})})});function KJ(t){return Dt("MuiMenuItem",t)}const Oh=Tt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),QJ=(t,s)=>{const{ownerState:a}=t;return[s.root,a.dense&&s.dense,a.divider&&s.divider,!a.disableGutters&&s.gutters]},ZJ=t=>{const{disabled:s,dense:a,divider:r,disableGutters:n,selected:i,classes:o}=t,c=kt({root:["root",a&&"dense",s&&"disabled",!n&&"gutters",r&&"divider",i&&"selected"]},KJ,o);return{...o,...c}},XJ=Ne(yo,{shouldForwardProp:t=>zr(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:QJ})(Yt(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Oh.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${Oh.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${Oh.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${Oh.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Oh.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${Zk.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${Zk.inset}`]:{marginLeft:52},[`& .${_m.root}`]:{marginTop:0,marginBottom:0},[`& .${_m.inset}`]:{paddingLeft:36},[`& .${rE.root}`]:{minWidth:36},variants:[{props:({ownerState:s})=>!s.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:s})=>s.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:s})=>!s.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:s})=>s.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${rE.root} svg`]:{fontSize:"1.25rem"}}}]}))),Z=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiMenuItem"}),{autoFocus:n=!1,component:i="li",dense:o=!1,divider:l=!1,disableGutters:c=!1,focusVisibleClassName:m,role:u="menuitem",tabIndex:h,className:f,...b}=r,w=g.useContext(xo),S=g.useMemo(()=>({dense:o||w.dense||!1,disableGutters:c}),[w.dense,o,c]),j=g.useRef(null);Ia(()=>{n&&j.current&&j.current.focus()},[n]);const v={...r,dense:S.dense,divider:l,disableGutters:c},N=ZJ(r),C=Bs(j,a);let P;return r.disabled||(P=h!==void 0?h:-1),e.jsx(xo.Provider,{value:S,children:e.jsx(XJ,{ref:C,role:u,tabIndex:P,component:i,focusVisibleClassName:et(N.focusVisible,m),className:et(N.root,f),...b,ownerState:v,classes:N})})});function JJ(t){return Dt("MuiNativeSelect",t)}const E4=Tt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),eee=t=>{const{classes:s,variant:a,disabled:r,multiple:n,open:i,error:o}=t,l={select:["select",a,r&&"disabled",n&&"multiple",o&&"error"],icon:["icon",`icon${Xe(a)}`,i&&"iconOpen",r&&"disabled"]};return kt(l,JJ,s)},VR=Ne("select",{name:"MuiNativeSelect"})(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${E4.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:s})=>s.variant!=="filled"&&s.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),tee=Ne(VR,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:zr,overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.select,s[a.variant],a.error&&s.error,{[`&.${E4.multiple}`]:s.multiple}]}})({}),HR=Ne("svg",{name:"MuiNativeSelect"})(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${E4.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:s})=>s.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),see=Ne(HR,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.icon,a.variant&&s[`icon${Xe(a.variant)}`],a.open&&s.iconOpen]}})({}),aee=g.forwardRef(function(s,a){const{className:r,disabled:n,error:i,IconComponent:o,inputRef:l,variant:c="standard",...m}=s,u={...s,disabled:n,variant:c,error:i},h=eee(u);return e.jsxs(g.Fragment,{children:[e.jsx(tee,{ownerState:u,className:et(h.select,r),disabled:n,ref:l||a,...m}),s.multiple?null:e.jsx(see,{as:o,ownerState:u,className:h.icon})]})});var cE;const ree=Ne("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:zr})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),nee=Ne("legend",{name:"MuiNotchedOutlined",shouldForwardProp:zr})(Yt(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:s})=>!s.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:s})=>s.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:s})=>s.withLabel&&s.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function iee(t){const{children:s,classes:a,className:r,label:n,notched:i,...o}=t,l=n!=null&&n!=="",c={...t,notched:i,withLabel:l};return e.jsx(ree,{"aria-hidden":!0,className:r,ownerState:c,...o,children:e.jsx(nee,{ownerState:c,children:l?e.jsx("span",{children:n}):cE||(cE=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const oee=t=>{const{classes:s}=t,r=kt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},vQ,s);return{...s,...r}},lee=Ne(yv,{shouldForwardProp:t=>zr(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:xv})(Yt(({theme:t})=>{const s=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Ri.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ri.notchedOutline}`]:{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):s}},[`&.${Ri.focused} .${Ri.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(Ma()).map(([a])=>({props:{color:a},style:{[`&.${Ri.focused} .${Ri.notchedOutline}`]:{borderColor:(t.vars||t).palette[a].main}}})),{props:{},style:{[`&.${Ri.error} .${Ri.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Ri.disabled} .${Ri.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:14}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:14}},{props:({ownerState:a})=>a.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:a,size:r})=>a.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),cee=Ne(iee,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Yt(({theme:t})=>{const s=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):s}})),dee=Ne(bv,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:gv})(Yt(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:s})=>s.multiline,style:{padding:0}},{props:({ownerState:s})=>s.startAdornment,style:{paddingLeft:0}},{props:({ownerState:s})=>s.endAdornment,style:{paddingRight:0}}]}))),T4=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiOutlinedInput"}),{components:n={},fullWidth:i=!1,inputComponent:o="input",label:l,multiline:c=!1,notched:m,slots:u={},slotProps:h={},type:f="text",...b}=r,w=oee(r),S=yi(),j=sd({props:r,muiFormControl:S,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),v={...r,color:j.color||"primary",disabled:j.disabled,error:j.error,focused:j.focused,formControl:S,fullWidth:i,hiddenLabel:j.hiddenLabel,multiline:c,size:j.size,type:f},N=u.root??n.Root??lee,C=u.input??n.Input??dee,[P,E]=Zt("notchedOutline",{elementType:cee,className:w.notchedOutline,shouldForwardComponentProp:!0,ownerState:v,externalForwardedProps:{slots:u,slotProps:h},additionalProps:{label:l!=null&&l!==""&&j.required?e.jsxs(g.Fragment,{children:[l,"","*"]}):l}});return e.jsx(vv,{slots:{root:N,input:C},slotProps:h,renderSuffix:M=>e.jsx(P,{...E,notched:typeof m<"u"?m:!!(M.startAdornment||M.filled||M.focused)}),fullWidth:i,inputComponent:o,multiline:c,ref:a,type:f,...b,classes:{...w,notchedOutline:null}})});T4.muiName="Input";const uee=Ut(e.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),mee=Ut(e.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),pee=Ut(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),hee=Ut(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),fee=Ne("span",{name:"MuiRadioButtonIcon",shouldForwardProp:zr})({position:"relative",display:"flex"}),xee=Ne(pee,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),gee=Ne(hee,{name:"MuiRadioButtonIcon"})(Yt(({theme:t})=>({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}}]})));function WR(t){const{checked:s=!1,classes:a={},fontSize:r}=t,n={...t,checked:s};return e.jsxs(fee,{className:a.root,ownerState:n,children:[e.jsx(xee,{fontSize:r,className:a.background,ownerState:n}),e.jsx(gee,{fontSize:r,className:a.dot,ownerState:n})]})}const YR=g.createContext(void 0);function yee(){return g.useContext(YR)}function bee(t){return Dt("MuiRadio",t)}const dE=Tt("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),vee=t=>{const{classes:s,color:a,size:r}=t,n={root:["root",`color${Xe(a)}`,r!=="medium"&&`size${Xe(r)}`]};return{...s,...kt(n,bee,s)}},jee=Ne(N4,{shouldForwardProp:t=>zr(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.size!=="medium"&&s[`size${Xe(a.size)}`],s[`color${Xe(a.color)}`]]}})(Yt(({theme:t})=>({color:(t.vars||t).palette.text.secondary,[`&.${dE.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[s].main,(t.vars||t).palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(Ma()).map(([s])=>({props:{color:s,disabled:!1},style:{[`&.${dE.checked}`]:{color:(t.vars||t).palette[s].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Nee(t,s){return typeof s=="object"&&s!==null?t===s:String(t)===String(s)}const wee=e.jsx(WR,{checked:!0}),_ee=e.jsx(WR,{}),gx=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiRadio"}),{checked:n,checkedIcon:i=wee,color:o="primary",icon:l=_ee,name:c,onChange:m,size:u="medium",className:h,disabled:f,disableRipple:b=!1,slots:w={},slotProps:S={},inputProps:j,...v}=r,N=yi();let C=f;N&&typeof C>"u"&&(C=N.disabled),C??=!1;const P={...r,disabled:C,disableRipple:b,color:o,size:u},E=vee(P),M=yee();let T=n;const A=dw(m,M&&M.onChange);let L=c;M&&(typeof T>"u"&&(T=Nee(M.value,r.value)),typeof L>"u"&&(L=M.name));const F=S.input??j,[z,I]=Zt("root",{ref:a,elementType:jee,className:et(E.root,h),shouldForwardComponentProp:!0,externalForwardedProps:{slots:w,slotProps:S,...v},getSlotProps:Q=>({...Q,onChange:(Y,...B)=>{Q.onChange?.(Y,...B),A(Y,...B)}}),ownerState:P,additionalProps:{type:"radio",icon:g.cloneElement(l,{fontSize:l.props.fontSize??u}),checkedIcon:g.cloneElement(i,{fontSize:i.props.fontSize??u}),disabled:C,name:L,checked:T,slots:w,slotProps:{input:typeof F=="function"?F(P):F}}});return e.jsx(z,{...I,classes:E})});function See(t){return Dt("MuiRadioGroup",t)}Tt("MuiRadioGroup",["root","row","error"]);const Cee=t=>{const{classes:s,row:a,error:r}=t;return kt({root:["root",a&&"row",r&&"error"]},See,s)},yx=g.forwardRef(function(s,a){const{actions:r,children:n,className:i,defaultValue:o,name:l,onChange:c,value:m,...u}=s,h=g.useRef(null),f=Cee(s),[b,w]=On({controlled:m,default:o,name:"RadioGroup"});g.useImperativeHandle(r,()=>({focus:()=>{let N=h.current.querySelector("input:not(:disabled):checked");N||(N=h.current.querySelector("input:not(:disabled)")),N&&N.focus()}}),[]);const S=Bs(a,h),j=wn(l),v=g.useMemo(()=>({name:j,onChange(N){w(N.target.value),c&&c(N,N.target.value)},value:b}),[j,c,w,b]);return e.jsx(YR.Provider,{value:v,children:e.jsx(OX,{role:"radiogroup",ref:S,className:et(f.root,i),...u,children:n})})}),GR={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function KR(t){return Dt("MuiSelect",t)}const Fh=Tt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var uE;const Pee=Ne(VR,{name:"MuiSelect",slot:"Select",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[{[`&.${Fh.select}`]:s.select},{[`&.${Fh.select}`]:s[a.variant]},{[`&.${Fh.error}`]:s.error},{[`&.${Fh.multiple}`]:s.multiple}]}})({[`&.${Fh.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),kee=Ne(HR,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.icon,a.variant&&s[`icon${Xe(a.variant)}`],a.open&&s.iconOpen]}})({}),Eee=Ne("input",{shouldForwardProp:t=>pR(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function mE(t,s){return typeof s=="object"&&s!==null?t===s:String(t)===String(s)}function Tee(t){return t==null||typeof t=="string"&&!t.trim()}const Mee=t=>{const{classes:s,variant:a,disabled:r,multiple:n,open:i,error:o}=t,l={select:["select",a,r&&"disabled",n&&"multiple",o&&"error"],icon:["icon",`icon${Xe(a)}`,i&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return kt(l,KR,s)},Dee=g.forwardRef(function(s,a){const{"aria-describedby":r,"aria-label":n,autoFocus:i,autoWidth:o,children:l,className:c,defaultOpen:m,defaultValue:u,disabled:h,displayEmpty:f,error:b=!1,IconComponent:w,inputRef:S,labelId:j,MenuProps:v={},multiple:N,name:C,onBlur:P,onChange:E,onClose:M,onFocus:T,onOpen:A,open:L,readOnly:F,renderValue:z,required:I,SelectDisplayProps:Q={},tabIndex:Y,type:B,value:q,variant:V="standard",...G}=s,[H,D]=On({controlled:q,default:u,name:"Select"}),[R,$]=On({controlled:L,default:m,name:"Select"}),W=g.useRef(null),J=g.useRef(null),[te,ee]=g.useState(null),{current:ae}=g.useRef(L!=null),[ce,he]=g.useState(),ne=Bs(a,S),xe=g.useCallback(rt=>{J.current=rt,rt&&ee(rt)},[]),ge=te?.parentNode;g.useImperativeHandle(ne,()=>({focus:()=>{J.current.focus()},node:W.current,value:H}),[H]),g.useEffect(()=>{m&&R&&te&&!ae&&(he(o?null:ge.clientWidth),J.current.focus())},[te,o]),g.useEffect(()=>{i&&J.current.focus()},[i]),g.useEffect(()=>{if(!j)return;const rt=ir(J.current).getElementById(j);if(rt){const Lt=()=>{getSelection().isCollapsed&&J.current.focus()};return rt.addEventListener("click",Lt),()=>{rt.removeEventListener("click",Lt)}}},[j]);const le=(rt,Lt)=>{rt?A&&A(Lt):M&&M(Lt),ae||(he(o?null:ge.clientWidth),$(rt))},pe=rt=>{rt.button===0&&(rt.preventDefault(),J.current.focus(),le(!0,rt))},Re=rt=>{le(!1,rt)},Se=g.Children.toArray(l),He=rt=>{const Lt=Se.find(Nt=>Nt.props.value===rt.target.value);Lt!==void 0&&(D(Lt.props.value),E&&E(rt,Lt))},ze=rt=>Lt=>{let Nt;if(Lt.currentTarget.hasAttribute("tabindex")){if(N){Nt=Array.isArray(H)?H.slice():[];const ps=H.indexOf(rt.props.value);ps===-1?Nt.push(rt.props.value):Nt.splice(ps,1)}else Nt=rt.props.value;if(rt.props.onClick&&rt.props.onClick(Lt),H!==Nt&&(D(Nt),E)){const ps=Lt.nativeEvent||Lt,cs=new ps.constructor(ps.type,ps);Object.defineProperty(cs,"target",{writable:!0,value:{value:Nt,name:C}}),E(cs,rt)}N||le(!1,Lt)}},st=rt=>{F||[" ","ArrowUp","ArrowDown","Enter"].includes(rt.key)&&(rt.preventDefault(),le(!0,rt))},ke=te!==null&&R,We=rt=>{!ke&&P&&(Object.defineProperty(rt,"target",{writable:!0,value:{value:H,name:C}}),P(rt))};delete G["aria-invalid"];let ye,Ye;const at=[];let bt=!1;(pb({value:H})||f)&&(z?ye=z(H):bt=!0);const ct=Se.map(rt=>{if(!g.isValidElement(rt))return null;let Lt;if(N){if(!Array.isArray(H))throw new Error(Vl(2));Lt=H.some(Nt=>mE(Nt,rt.props.value)),Lt&&bt&&at.push(rt.props.children)}else Lt=mE(H,rt.props.value),Lt&&bt&&(Ye=rt.props.children);return g.cloneElement(rt,{"aria-selected":Lt?"true":"false",onClick:ze(rt),onKeyUp:Nt=>{Nt.key===" "&&Nt.preventDefault(),rt.props.onKeyUp&&rt.props.onKeyUp(Nt)},role:"option",selected:Lt,value:void 0,"data-value":rt.props.value})});bt&&(N?at.length===0?ye=null:ye=at.reduce((rt,Lt,Nt)=>(rt.push(Lt),Nt<at.length-1&&rt.push(", "),rt),[]):ye=Ye);let ht=ce;!o&&ae&&te&&(ht=ge.clientWidth);let Et;typeof Y<"u"?Et=Y:Et=h?null:0;const be=Q.id||(C?`mui-component-select-${C}`:void 0),Oe={...s,variant:V,value:H,open:ke,error:b},Le=Mee(Oe),jt={...v.PaperProps,...typeof v.slotProps?.paper=="function"?v.slotProps.paper(Oe):v.slotProps?.paper},Jt={...v.MenuListProps,...typeof v.slotProps?.list=="function"?v.slotProps.list(Oe):v.slotProps?.list},Kt=wn();return e.jsxs(g.Fragment,{children:[e.jsx(Pee,{as:"div",ref:xe,tabIndex:Et,role:"combobox","aria-controls":ke?Kt:void 0,"aria-disabled":h?"true":void 0,"aria-expanded":ke?"true":"false","aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[j,be].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":I?"true":void 0,"aria-invalid":b?"true":void 0,onKeyDown:st,onMouseDown:h||F?null:pe,onBlur:We,onFocus:T,...Q,ownerState:Oe,className:et(Q.className,Le.select,c),id:be,children:Tee(ye)?uE||(uE=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):ye}),e.jsx(Eee,{"aria-invalid":b,value:Array.isArray(H)?H.join(","):H,name:C,ref:W,"aria-hidden":!0,onChange:He,tabIndex:-1,disabled:h,className:Le.nativeInput,autoFocus:i,required:I,...G,ownerState:Oe}),e.jsx(kee,{as:w,className:Le.icon,ownerState:Oe}),e.jsx(k4,{id:`menu-${C||""}`,anchorEl:ge,open:ke,onClose:Re,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...v,slotProps:{...v.slotProps,list:{"aria-labelledby":j,role:"listbox","aria-multiselectable":N?"true":void 0,disableListWrap:!0,id:Kt,...Jt},paper:{...jt,style:{minWidth:ht,...jt!=null?jt.style:null}}},children:ct})]})}),Ree=t=>{const{classes:s}=t,r=kt({root:["root"]},KR,s);return{...s,...r}},M4={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>zr(t)&&t!=="variant"},Aee=Ne(S4,M4)(""),Iee=Ne(T4,M4)(""),Oee=Ne(w4,M4)(""),D4=g.forwardRef(function(s,a){const r=es({name:"MuiSelect",props:s}),{autoWidth:n=!1,children:i,classes:o={},className:l,defaultOpen:c=!1,displayEmpty:m=!1,IconComponent:u=TR,id:h,input:f,inputProps:b,label:w,labelId:S,MenuProps:j,multiple:v=!1,native:N=!1,onClose:C,onOpen:P,open:E,renderValue:M,SelectDisplayProps:T,variant:A="outlined",...L}=r,F=N?aee:Dee,z=yi(),I=sd({props:r,muiFormControl:z,states:["variant","error"]}),Q=I.variant||A,Y={...r,variant:Q,classes:o},B=Ree(Y),{root:q,...V}=B,G=f||{standard:e.jsx(Aee,{ownerState:Y}),outlined:e.jsx(Iee,{label:w,ownerState:Y}),filled:e.jsx(Oee,{ownerState:Y})}[Q],H=Bs(a,td(G));return e.jsx(g.Fragment,{children:g.cloneElement(G,{inputComponent:F,inputProps:{children:i,error:I.error,IconComponent:u,variant:Q,type:void 0,multiple:v,...N?{id:h}:{autoWidth:n,defaultOpen:c,displayEmpty:m,labelId:S,MenuProps:j,onClose:C,onOpen:P,open:E,renderValue:M,SelectDisplayProps:{id:h,...T}},...b,classes:b?dn(V,b.classes):V,...f?f.props.inputProps:{}},...(v&&N||m)&&Q==="outlined"?{notched:!0}:{},ref:H,className:et(G.props.className,l,B.root),...!f&&{variant:Q},...L})})});D4.muiName="Select";function Fee(t){return Dt("MuiSkeleton",t)}Tt("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const Lee=t=>{const{classes:s,variant:a,animation:r,hasChildren:n,width:i,height:o}=t;return kt({root:["root",a,r,n&&"withChildren",n&&!i&&"fitContent",n&&!o&&"heightAuto"]},Fee,s)},Ew=al`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,Tw=al`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,$ee=typeof Ew!="string"?Jc`
        animation: ${Ew} 2s ease-in-out 0.5s infinite;
      `:null,zee=typeof Tw!="string"?Jc`
        &::after {
          animation: ${Tw} 2s linear 0.5s infinite;
        }
      `:null,qee=Ne("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.variant],a.animation!==!1&&s[a.animation],a.hasChildren&&s.withChildren,a.hasChildren&&!a.width&&s.fitContent,a.hasChildren&&!a.height&&s.heightAuto]}})(Yt(({theme:t})=>{const s=yY(t.shape.borderRadius)||"px",a=bY(t.shape.borderRadius);return{display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:t.alpha(t.palette.text.primary,t.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${a}${s}/${Math.round(a/.6*10)/10}${s}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:({ownerState:r})=>r.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:r})=>r.hasChildren&&!r.width,style:{maxWidth:"fit-content"}},{props:({ownerState:r})=>r.hasChildren&&!r.height,style:{height:"auto"}},{props:{animation:"pulse"},style:$ee||{animation:`${Ew} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(t.vars||t).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:zee||{"&::after":{animation:`${Tw} 2s linear 0.5s infinite`}}}]}})),X=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiSkeleton"}),{animation:n="pulse",className:i,component:o="span",height:l,style:c,variant:m="text",width:u,...h}=r,f={...r,animation:n,component:o,variant:m,hasChildren:!!h.children},b=Lee(f);return e.jsx(qee,{as:o,ref:a,className:et(b.root,i),ownerState:f,...h,style:{width:u,height:l,...c}})});function Bee(t){return Dt("MuiTooltip",t)}const ar=Tt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Uee(t){return Math.round(t*1e5)/1e5}const Vee=t=>{const{classes:s,disableInteractive:a,arrow:r,touch:n,placement:i}=t,o={popper:["popper",!a&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",n&&"touch",`tooltipPlacement${Xe(i.split("-")[0])}`],arrow:["arrow"]};return kt(o,Bee,s)},Hee=Ne(cg,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.popper,!a.disableInteractive&&s.popperInteractive,a.arrow&&s.popperArrow,!a.open&&s.popperClose]}})(Yt(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:s})=>!s.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:s})=>!s,style:{pointerEvents:"none"}},{props:({ownerState:s})=>s.arrow,style:{[`&[data-popper-placement*="bottom"] .${ar.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${ar.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${ar.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${ar.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:s})=>s.arrow&&!s.isRtl,style:{[`&[data-popper-placement*="right"] .${ar.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:s})=>s.arrow&&!!s.isRtl,style:{[`&[data-popper-placement*="right"] .${ar.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:s})=>s.arrow&&!s.isRtl,style:{[`&[data-popper-placement*="left"] .${ar.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:s})=>s.arrow&&!!s.isRtl,style:{[`&[data-popper-placement*="left"] .${ar.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Wee=Ne("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.tooltip,a.touch&&s.touch,a.arrow&&s.tooltipArrow,s[`tooltipPlacement${Xe(a.placement.split("-")[0])}`]]}})(Yt(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${ar.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${ar.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${ar.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${ar.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:s})=>s.arrow,style:{position:"relative",margin:0}},{props:({ownerState:s})=>s.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${Uee(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:s})=>!s.isRtl,style:{[`.${ar.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${ar.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:s})=>!s.isRtl&&s.touch,style:{[`.${ar.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${ar.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:s})=>!!s.isRtl,style:{[`.${ar.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${ar.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:s})=>!!s.isRtl&&s.touch,style:{[`.${ar.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${ar.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:s})=>s.touch,style:{[`.${ar.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:s})=>s.touch,style:{[`.${ar.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Yee=Ne("span",{name:"MuiTooltip",slot:"Arrow"})(Yt(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let Z0=!1;const pE=new pv;let Lh={x:0,y:0};function X0(t,s){return(a,...r)=>{s&&s(a,...r),t(a,...r)}}const qa=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTooltip"}),{arrow:n=!1,children:i,classes:o,components:l={},componentsProps:c={},describeChild:m=!1,disableFocusListener:u=!1,disableHoverListener:h=!1,disableInteractive:f=!1,disableTouchListener:b=!1,enterDelay:w=100,enterNextDelay:S=0,enterTouchDelay:j=700,followCursor:v=!1,id:N,leaveDelay:C=0,leaveTouchDelay:P=1500,onClose:E,onOpen:M,open:T,placement:A="bottom",PopperComponent:L,PopperProps:F={},slotProps:z={},slots:I={},title:Q,TransitionComponent:Y,TransitionProps:B,...q}=r,V=g.isValidElement(i)?i:e.jsx("span",{children:i}),G=xi(),H=$r(),[D,R]=g.useState(),[$,W]=g.useState(null),J=g.useRef(!1),te=f||v,ee=ni(),ae=ni(),ce=ni(),he=ni(),[ne,xe]=On({controlled:T,default:!1,name:"Tooltip",state:"open"});let ge=ne;const le=wn(N),pe=g.useRef(),Re=Ot(()=>{pe.current!==void 0&&(document.body.style.WebkitUserSelect=pe.current,pe.current=void 0),he.clear()});g.useEffect(()=>Re,[Re]);const Se=$t=>{pE.clear(),Z0=!0,xe(!0),M&&!ge&&M($t)},He=Ot($t=>{pE.start(800+C,()=>{Z0=!1}),xe(!1),E&&ge&&E($t),ee.start(G.transitions.duration.shortest,()=>{J.current=!1})}),ze=$t=>{J.current&&$t.type!=="touchstart"||(D&&D.removeAttribute("title"),ae.clear(),ce.clear(),w||Z0&&S?ae.start(Z0?S:w,()=>{Se($t)}):Se($t))},st=$t=>{ae.clear(),ce.start(C,()=>{He($t)})},[,ke]=g.useState(!1),We=$t=>{Zm($t.target)||(ke(!1),st($t))},ye=$t=>{D||R($t.currentTarget),Zm($t.target)&&(ke(!0),ze($t))},Ye=$t=>{J.current=!0;const $s=V.props;$s.onTouchStart&&$s.onTouchStart($t)},at=$t=>{Ye($t),ce.clear(),ee.clear(),Re(),pe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",he.start(j,()=>{document.body.style.WebkitUserSelect=pe.current,ze($t)})},bt=$t=>{V.props.onTouchEnd&&V.props.onTouchEnd($t),Re(),ce.start(P,()=>{He($t)})};g.useEffect(()=>{if(!ge)return;function $t($s){$s.key==="Escape"&&He($s)}return document.addEventListener("keydown",$t),()=>{document.removeEventListener("keydown",$t)}},[He,ge]);const ct=Bs(td(V),R,a);!Q&&Q!==0&&(ge=!1);const ht=g.useRef(),Et=$t=>{const $s=V.props;$s.onMouseMove&&$s.onMouseMove($t),Lh={x:$t.clientX,y:$t.clientY},ht.current&&ht.current.update()},be={},Oe=typeof Q=="string";m?(be.title=!ge&&Oe&&!h?Q:null,be["aria-describedby"]=ge?le:null):(be["aria-label"]=Oe?Q:null,be["aria-labelledby"]=ge&&!Oe?le:null);const Le={...be,...q,...V.props,className:et(q.className,V.props.className),onTouchStart:Ye,ref:ct,...v?{onMouseMove:Et}:{}},jt={};b||(Le.onTouchStart=at,Le.onTouchEnd=bt),h||(Le.onMouseOver=X0(ze,Le.onMouseOver),Le.onMouseLeave=X0(st,Le.onMouseLeave),te||(jt.onMouseOver=ze,jt.onMouseLeave=st)),u||(Le.onFocus=X0(ye,Le.onFocus),Le.onBlur=X0(We,Le.onBlur),te||(jt.onFocus=ye,jt.onBlur=We));const Jt={...r,isRtl:H,arrow:n,disableInteractive:te,placement:A,PopperComponentProp:L,touch:J.current},Kt=typeof z.popper=="function"?z.popper(Jt):z.popper,rt=g.useMemo(()=>{let $t=[{name:"arrow",enabled:!!$,options:{element:$,padding:4}}];return F.popperOptions?.modifiers&&($t=$t.concat(F.popperOptions.modifiers)),Kt?.popperOptions?.modifiers&&($t=$t.concat(Kt.popperOptions.modifiers)),{...F.popperOptions,...Kt?.popperOptions,modifiers:$t}},[$,F.popperOptions,Kt?.popperOptions]),Lt=Vee(Jt),Nt=typeof z.transition=="function"?z.transition(Jt):z.transition,ps={slots:{popper:l.Popper,transition:l.Transition??Y,tooltip:l.Tooltip,arrow:l.Arrow,...I},slotProps:{arrow:z.arrow??c.arrow,popper:{...F,...Kt??c.popper},tooltip:z.tooltip??c.tooltip,transition:{...B,...Nt??c.transition}}},[cs,Ns]=Zt("popper",{elementType:Hee,externalForwardedProps:ps,ownerState:Jt,className:et(Lt.popper,F?.className)}),[Ys,Is]=Zt("transition",{elementType:xx,externalForwardedProps:ps,ownerState:Jt}),[Ms,pa]=Zt("tooltip",{elementType:Wee,className:Lt.tooltip,externalForwardedProps:ps,ownerState:Jt}),[ha,ia]=Zt("arrow",{elementType:Yee,className:Lt.arrow,externalForwardedProps:ps,ownerState:Jt,ref:W});return e.jsxs(g.Fragment,{children:[g.cloneElement(V,Le),e.jsx(cs,{as:L??cg,placement:A,anchorEl:v?{getBoundingClientRect:()=>({top:Lh.y,left:Lh.x,right:Lh.x,bottom:Lh.y,width:0,height:0})}:D,popperRef:ht,open:D?ge:!1,id:le,transition:!0,...jt,...Ns,popperOptions:rt,children:({TransitionProps:$t})=>e.jsx(Ys,{timeout:G.transitions.duration.shorter,...$t,...Is,children:e.jsxs(Ms,{...pa,children:[Q,n?e.jsx(ha,{...ia}):null]})})})]})});function Gee(t){return Dt("MuiSwitch",t)}const gn=Tt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Kee=t=>{const{classes:s,edge:a,size:r,color:n,checked:i,disabled:o}=t,l={root:["root",a&&`edge${Xe(a)}`,`size${Xe(r)}`],switchBase:["switchBase",`color${Xe(n)}`,i&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=kt(l,Gee,s);return{...s,...c}},Qee=Ne("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.edge&&s[`edge${Xe(a.edge)}`],s[`size${Xe(a.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${gn.thumb}`]:{width:16,height:16},[`& .${gn.switchBase}`]:{padding:4,[`&.${gn.checked}`]:{transform:"translateX(16px)"}}}}]}),Zee=Ne(N4,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.switchBase,{[`& .${gn.input}`]:s.input},a.color!=="default"&&s[`color${Xe(a.color)}`]]}})(Yt(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${gn.checked}`]:{transform:"translateX(20px)"},[`&.${gn.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${gn.checked} + .${gn.track}`]:{opacity:.5},[`&.${gn.disabled} + .${gn.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${gn.input}`]:{left:"-100%",width:"300%"}})),Yt(({theme:t})=>({"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(Ma(["light"])).map(([s])=>({props:{color:s},style:{[`&.${gn.checked}`]:{color:(t.vars||t).palette[s].main,"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[s].main,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${gn.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${s}DisabledColor`]:`${t.palette.mode==="light"?t.lighten(t.palette[s].main,.62):t.darken(t.palette[s].main,.55)}`}},[`&.${gn.checked} + .${gn.track}`]:{backgroundColor:(t.vars||t).palette[s].main}}}))]}))),Xee=Ne("span",{name:"MuiSwitch",slot:"Track"})(Yt(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`}))),Jee=Ne("span",{name:"MuiSwitch",slot:"Thumb"})(Yt(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),ete=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiSwitch"}),{className:n,color:i="primary",edge:o=!1,size:l="medium",sx:c,slots:m={},slotProps:u={},...h}=r,f={...r,color:i,edge:o,size:l},b=Kee(f),w={slots:m,slotProps:u},[S,j]=Zt("root",{className:et(b.root,n),elementType:Qee,externalForwardedProps:w,ownerState:f,additionalProps:{sx:c}}),[v,N]=Zt("thumb",{className:b.thumb,elementType:Jee,externalForwardedProps:w,ownerState:f}),C=e.jsx(v,{...N}),[P,E]=Zt("track",{className:b.track,elementType:Xee,externalForwardedProps:w,ownerState:f});return e.jsxs(S,{...j,children:[e.jsx(Zee,{type:"checkbox",icon:C,checkedIcon:C,ref:a,ownerState:f,...h,classes:{...b,root:b.switchBase},slots:{...m.switchBase&&{root:m.switchBase},...m.input&&{input:m.input}},slotProps:{...u.switchBase&&{root:typeof u.switchBase=="function"?u.switchBase(f):u.switchBase},input:{role:"switch"},...u.input&&{input:typeof u.input=="function"?u.input(f):u.input}}}),e.jsx(P,{...E})]})});function tte(t){return Dt("MuiTab",t)}const Pi=Tt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),ste=t=>{const{classes:s,textColor:a,fullWidth:r,wrapped:n,icon:i,label:o,selected:l,disabled:c}=t,m={root:["root",i&&o&&"labelIcon",`textColor${Xe(a)}`,r&&"fullWidth",n&&"wrapped",l&&"selected",c&&"disabled"],icon:["iconWrapper","icon"]};return kt(m,tte,s)},ate=Ne(yo,{name:"MuiTab",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.label&&a.icon&&s.labelIcon,s[`textColor${Xe(a.textColor)}`],a.fullWidth&&s.fullWidth,a.wrapped&&s.wrapped,{[`& .${Pi.iconWrapper}`]:s.iconWrapper},{[`& .${Pi.icon}`]:s.icon}]}})(Yt(({theme:t})=>({...t.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:s})=>s.label&&(s.iconPosition==="top"||s.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:s})=>s.label&&s.iconPosition!=="top"&&s.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:s})=>s.icon&&s.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:s,iconPosition:a})=>s.icon&&s.label&&a==="top",style:{[`& > .${Pi.icon}`]:{marginBottom:6}}},{props:({ownerState:s,iconPosition:a})=>s.icon&&s.label&&a==="bottom",style:{[`& > .${Pi.icon}`]:{marginTop:6}}},{props:({ownerState:s,iconPosition:a})=>s.icon&&s.label&&a==="start",style:{[`& > .${Pi.icon}`]:{marginRight:t.spacing(1)}}},{props:({ownerState:s,iconPosition:a})=>s.icon&&s.label&&a==="end",style:{[`& > .${Pi.icon}`]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${Pi.selected}`]:{opacity:1},[`&.${Pi.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${Pi.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${Pi.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${Pi.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${Pi.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:({ownerState:s})=>s.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:s})=>s.wrapped,style:{fontSize:t.typography.pxToRem(12)}}]}))),As=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTab"}),{className:n,disabled:i=!1,disableFocusRipple:o=!1,fullWidth:l,icon:c,iconPosition:m="top",indicator:u,label:h,onChange:f,onClick:b,onFocus:w,selected:S,selectionFollowsFocus:j,textColor:v="inherit",value:N,wrapped:C=!1,...P}=r,E={...r,disabled:i,disableFocusRipple:o,selected:S,icon:!!c,iconPosition:m,label:!!h,fullWidth:l,textColor:v,wrapped:C},M=ste(E),T=c&&h&&g.isValidElement(c)?g.cloneElement(c,{className:et(M.icon,c.props.className)}):c,A=F=>{!S&&f&&f(F,N),b&&b(F)},L=F=>{j&&!S&&f&&f(F,N),w&&w(F)};return e.jsxs(ate,{focusRipple:!o,className:et(M.root,n),ref:a,role:"tab","aria-selected":S,disabled:i,onClick:A,onFocus:L,ownerState:E,tabIndex:S?0:-1,...P,children:[m==="top"||m==="start"?e.jsxs(g.Fragment,{children:[T,h]}):e.jsxs(g.Fragment,{children:[h,T]}),u]})}),QR=g.createContext();function rte(t){return Dt("MuiTable",t)}Tt("MuiTable",["root","stickyHeader"]);const nte=t=>{const{classes:s,stickyHeader:a}=t;return kt({root:["root",a&&"stickyHeader"]},rte,s)},ite=Ne("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.stickyHeader&&s.stickyHeader]}})(Yt(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:s})=>s.stickyHeader,style:{borderCollapse:"separate"}}]}))),hE="table",Mw=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTable"}),{className:n,component:i=hE,padding:o="normal",size:l="medium",stickyHeader:c=!1,...m}=r,u={...r,component:i,padding:o,size:l,stickyHeader:c},h=nte(u),f=g.useMemo(()=>({padding:o,size:l,stickyHeader:c}),[o,l,c]);return e.jsx(QR.Provider,{value:f,children:e.jsx(ite,{as:i,role:i===hE?null:"table",ref:a,className:et(h.root,n),ownerState:u,...m})})}),_v=g.createContext();function ote(t){return Dt("MuiTableBody",t)}Tt("MuiTableBody",["root"]);const lte=t=>{const{classes:s}=t;return kt({root:["root"]},ote,s)},cte=Ne("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),dte={variant:"body"},fE="tbody",Dw=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTableBody"}),{className:n,component:i=fE,...o}=r,l={...r,component:i},c=lte(l);return e.jsx(_v.Provider,{value:dte,children:e.jsx(cte,{className:et(c.root,n),as:i,ref:a,role:i===fE?null:"rowgroup",ownerState:l,...o})})});function ute(t){return Dt("MuiTableCell",t)}const mte=Tt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),pte=t=>{const{classes:s,variant:a,align:r,padding:n,size:i,stickyHeader:o}=t,l={root:["root",a,o&&"stickyHeader",r!=="inherit"&&`align${Xe(r)}`,n!=="normal"&&`padding${Xe(n)}`,`size${Xe(i)}`]};return kt(l,ute,s)},hte=Ne("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.variant],s[`size${Xe(a.size)}`],a.padding!=="normal"&&s[`padding${Xe(a.padding)}`],a.align!=="inherit"&&s[`align${Xe(a.align)}`],a.stickyHeader&&s.stickyHeader]}})(Yt(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?t.lighten(t.alpha(t.palette.divider,1),.88):t.darken(t.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${mte.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:s})=>s.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),$i=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTableCell"}),{align:n="inherit",className:i,component:o,padding:l,scope:c,size:m,sortDirection:u,variant:h,...f}=r,b=g.useContext(QR),w=g.useContext(_v),S=w&&w.variant==="head";let j;o?j=o:j=S?"th":"td";let v=c;j==="td"?v=void 0:!v&&S&&(v="col");const N=h||w&&w.variant,C={...r,align:n,component:j,padding:l||(b&&b.padding?b.padding:"normal"),size:m||(b&&b.size?b.size:"medium"),sortDirection:u,stickyHeader:N==="head"&&b&&b.stickyHeader,variant:N},P=pte(C);let E=null;return u&&(E=u==="asc"?"ascending":"descending"),e.jsx(hte,{as:j,ref:a,className:et(P.root,i),"aria-sort":E,scope:v,ownerState:C,...f})});function fte(t){return Dt("MuiTableContainer",t)}Tt("MuiTableContainer",["root"]);const xte=t=>{const{classes:s}=t;return kt({root:["root"]},fte,s)},gte=Ne("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),ZR=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTableContainer"}),{className:n,component:i="div",...o}=r,l={...r,component:i},c=xte(l);return e.jsx(gte,{ref:a,as:i,className:et(c.root,n),ownerState:l,...o})});function yte(t){return Dt("MuiTableHead",t)}Tt("MuiTableHead",["root"]);const bte=t=>{const{classes:s}=t;return kt({root:["root"]},yte,s)},vte=Ne("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),jte={variant:"head"},xE="thead",XR=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTableHead"}),{className:n,component:i=xE,...o}=r,l={...r,component:i},c=bte(l);return e.jsx(_v.Provider,{value:jte,children:e.jsx(vte,{as:i,className:et(c.root,n),ref:a,role:i===xE?null:"rowgroup",ownerState:l,...o})})});function Nte(t){return Dt("MuiToolbar",t)}Tt("MuiToolbar",["root","gutters","regular","dense"]);const wte=t=>{const{classes:s,disableGutters:a,variant:r}=t;return kt({root:["root",!a&&"gutters",r]},Nte,s)},_te=Ne("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,!a.disableGutters&&s.gutters,s[a.variant]]}})(Yt(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:s})=>!s.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),Ste=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiToolbar"}),{className:n,component:i="div",disableGutters:o=!1,variant:l="regular",...c}=r,m={...r,component:i,disableGutters:o,variant:l},u=wte(m);return e.jsx(_te,{as:i,className:et(u.root,n),ref:a,ownerState:m,...c})}),JR=Ut(e.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),e9=Ut(e.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function Cte(t){return Dt("MuiTablePaginationActions",t)}Tt("MuiTablePaginationActions",["root"]);const Pte=t=>{const{classes:s}=t;return kt({root:["root"]},Cte,s)},kte=Ne("div",{name:"MuiTablePaginationActions",slot:"Root"})({}),Ete=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTablePaginationActions"}),{backIconButtonProps:n,className:i,count:o,disabled:l=!1,getItemAriaLabel:c,nextIconButtonProps:m,onPageChange:u,page:h,rowsPerPage:f,showFirstButton:b,showLastButton:w,slots:S={},slotProps:j={},...v}=r,N=$r(),P=Pte(r),E=te=>{u(te,0)},M=te=>{u(te,h-1)},T=te=>{u(te,h+1)},A=te=>{u(te,Math.max(0,Math.ceil(o/f)-1))},L=S.firstButton??ta,F=S.lastButton??ta,z=S.nextButton??ta,I=S.previousButton??ta,Q=S.firstButtonIcon??uee,Y=S.lastButtonIcon??mee,B=S.nextButtonIcon??e9,q=S.previousButtonIcon??JR,V=N?F:L,G=N?z:I,H=N?I:z,D=N?L:F,R=N?j.lastButton:j.firstButton,$=N?j.nextButton:j.previousButton,W=N?j.previousButton:j.nextButton,J=N?j.firstButton:j.lastButton;return e.jsxs(kte,{ref:a,className:et(P.root,i),...v,children:[b&&e.jsx(V,{onClick:E,disabled:l||h===0,"aria-label":c("first",h),title:c("first",h),...R,children:N?e.jsx(Y,{...j.lastButtonIcon}):e.jsx(Q,{...j.firstButtonIcon})}),e.jsx(G,{onClick:M,disabled:l||h===0,color:"inherit","aria-label":c("previous",h),title:c("previous",h),...$??n,children:N?e.jsx(B,{...j.nextButtonIcon}):e.jsx(q,{...j.previousButtonIcon})}),e.jsx(H,{onClick:T,disabled:l||(o!==-1?h>=Math.ceil(o/f)-1:!1),color:"inherit","aria-label":c("next",h),title:c("next",h),...W??m,children:N?e.jsx(q,{...j.previousButtonIcon}):e.jsx(B,{...j.nextButtonIcon})}),w&&e.jsx(D,{onClick:A,disabled:l||h>=Math.ceil(o/f)-1,"aria-label":c("last",h),title:c("last",h),...J,children:N?e.jsx(Q,{...j.firstButtonIcon}):e.jsx(Y,{...j.lastButtonIcon})})]})});function Tte(t){return Dt("MuiTablePagination",t)}const Wf=Tt("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var gE;const Mte=Ne($i,{name:"MuiTablePagination",slot:"Root"})(Yt(({theme:t})=>({overflow:"auto",color:(t.vars||t).palette.text.primary,fontSize:t.typography.pxToRem(14),"&:last-child":{padding:0}}))),Dte=Ne(Ste,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(t,s)=>({[`& .${Wf.actions}`]:s.actions,...s.toolbar})})(Yt(({theme:t})=>({minHeight:52,paddingRight:2,[`${t.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[t.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${Wf.actions}`]:{flexShrink:0,marginLeft:20}}))),Rte=Ne("div",{name:"MuiTablePagination",slot:"Spacer"})({flex:"1 1 100%"}),Ate=Ne("p",{name:"MuiTablePagination",slot:"SelectLabel"})(Yt(({theme:t})=>({...t.typography.body2,flexShrink:0}))),Ite=Ne(D4,{name:"MuiTablePagination",slot:"Select",overridesResolver:(t,s)=>({[`& .${Wf.selectIcon}`]:s.selectIcon,[`& .${Wf.select}`]:s.select,...s.input,...s.selectRoot})})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${Wf.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),Ote=Ne(Z,{name:"MuiTablePagination",slot:"MenuItem"})({}),Fte=Ne("p",{name:"MuiTablePagination",slot:"DisplayedRows"})(Yt(({theme:t})=>({...t.typography.body2,flexShrink:0})));function Lte({from:t,to:s,count:a}){return`${t}${s} of ${a!==-1?a:`more than ${s}`}`}function $te(t){return`Go to ${t} page`}const zte=t=>{const{classes:s}=t;return kt({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},Tte,s)},qte=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTablePagination"}),{ActionsComponent:n=Ete,backIconButtonProps:i,colSpan:o,component:l=$i,count:c,disabled:m=!1,getItemAriaLabel:u=$te,labelDisplayedRows:h=Lte,labelRowsPerPage:f="Rows per page:",nextIconButtonProps:b,onPageChange:w,onRowsPerPageChange:S,page:j,rowsPerPage:v,rowsPerPageOptions:N=[10,25,50,100],SelectProps:C={},showFirstButton:P=!1,showLastButton:E=!1,slotProps:M={},slots:T={},...A}=r,L=r,F=zte(L),z=M?.select??C,I=z.native?"option":Ote;let Q;(l===$i||l==="td")&&(Q=o||1e3);const Y=wn(z.id),B=wn(z.labelId),q=()=>c===-1?(j+1)*v:v===-1?c:Math.min(c,(j+1)*v),V={slots:T,slotProps:M},[G,H]=Zt("root",{ref:a,className:F.root,elementType:Mte,externalForwardedProps:{...V,component:l,...A},ownerState:L,additionalProps:{colSpan:Q}}),[D,R]=Zt("toolbar",{className:F.toolbar,elementType:Dte,externalForwardedProps:V,ownerState:L}),[$,W]=Zt("spacer",{className:F.spacer,elementType:Rte,externalForwardedProps:V,ownerState:L}),[J,te]=Zt("selectLabel",{className:F.selectLabel,elementType:Ate,externalForwardedProps:V,ownerState:L,additionalProps:{id:B}}),[ee,ae]=Zt("select",{className:F.select,elementType:Ite,externalForwardedProps:V,ownerState:L}),[ce,he]=Zt("menuItem",{className:F.menuItem,elementType:I,externalForwardedProps:V,ownerState:L}),[ne,xe]=Zt("displayedRows",{className:F.displayedRows,elementType:Fte,externalForwardedProps:V,ownerState:L});return e.jsx(G,{...H,children:e.jsxs(D,{...R,children:[e.jsx($,{...W}),N.length>1&&e.jsx(J,{...te,children:f}),N.length>1&&e.jsx(ee,{variant:"standard",...!z.variant&&{input:gE||(gE=e.jsx(vv,{}))},value:v,onChange:S,id:Y,labelId:B,...z,classes:{...z.classes,root:et(F.input,F.selectRoot,(z.classes||{}).root),select:et(F.select,(z.classes||{}).select),icon:et(F.selectIcon,(z.classes||{}).icon)},disabled:m,...ae,children:N.map(ge=>g.createElement(ce,{...he,key:ge.label?ge.label:ge,value:ge.value?ge.value:ge},ge.label?ge.label:ge))}),e.jsx(ne,{...xe,children:h({from:c===0?0:j*v+1,to:q(),count:c===-1?-1:c,page:j})}),e.jsx(n,{className:F.actions,backIconButtonProps:i,count:c,nextIconButtonProps:b,onPageChange:w,page:j,rowsPerPage:v,showFirstButton:P,showLastButton:E,slotProps:M.actions,slots:T.actions,getItemAriaLabel:u,disabled:m})]})})});function Bte(t){return Dt("MuiTableRow",t)}const yE=Tt("MuiTableRow",["root","selected","hover","head","footer"]),Ute=t=>{const{classes:s,selected:a,hover:r,head:n,footer:i}=t;return kt({root:["root",a&&"selected",r&&"hover",n&&"head",i&&"footer"]},Bte,s)},Vte=Ne("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.head&&s.head,a.footer&&s.footer]}})(Yt(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${yE.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${yE.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)}}}))),bE="tr",Qd=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTableRow"}),{className:n,component:i=bE,hover:o=!1,selected:l=!1,...c}=r,m=g.useContext(_v),u={...r,component:i,hover:o,selected:l,head:m&&m.variant==="head",footer:m&&m.variant==="footer"},h=Ute(u);return e.jsx(Vte,{as:i,ref:a,className:et(h.root,n),role:i===bE?null:"row",ownerState:u,...c})}),Hte=Ut(e.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}));function Wte(t){return Dt("MuiTableSortLabel",t)}const eN=Tt("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]),Yte=t=>{const{classes:s,direction:a,active:r}=t,n={root:["root",r&&"active",`direction${Xe(a)}`],icon:["icon",`iconDirection${Xe(a)}`]};return kt(n,Wte,s)},Gte=Ne(yo,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.active&&s.active]}})(Yt(({theme:t})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${eN.icon}`]:{opacity:.5}},[`&.${eN.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${eN.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}}))),Kte=Ne("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.icon,s[`iconDirection${Xe(a.direction)}`]]}})(Yt(({theme:t})=>({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}))),Qte=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTableSortLabel"}),{active:n=!1,children:i,className:o,direction:l="asc",hideSortIcon:c=!1,IconComponent:m=Hte,slots:u={},slotProps:h={},...f}=r,b={...r,active:n,direction:l,hideSortIcon:c,IconComponent:m},w=Yte(b),S={slots:u,slotProps:h},[j,v]=Zt("root",{elementType:Gte,externalForwardedProps:S,ownerState:b,className:et(w.root,o),ref:a}),[N,C]=Zt("icon",{elementType:Kte,externalForwardedProps:S,ownerState:b,className:w.icon});return e.jsxs(j,{disableRipple:!0,component:"span",...v,...f,children:[i,c&&!n?null:e.jsx(N,{as:m,...C})]})});function Zte(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function Xte(t,s,a,r={},n=()=>{}){const{ease:i=Zte,duration:o=300}=r;let l=null;const c=s[t];let m=!1;const u=()=>{m=!0},h=f=>{if(m){n(new Error("Animation cancelled"));return}l===null&&(l=f);const b=Math.min(1,(f-l)/o);if(s[t]=i(b)*(a-c)+c,b>=1){requestAnimationFrame(()=>{n(null)});return}requestAnimationFrame(h)};return c===a?(n(new Error("Element already at target position")),u):(requestAnimationFrame(h),u)}const Jte={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function ese(t){const{onChange:s,...a}=t,r=g.useRef(),n=g.useRef(null),i=()=>{r.current=n.current.offsetHeight-n.current.clientHeight};return Ia(()=>{const o=ng(()=>{const c=r.current;i(),c!==r.current&&s(r.current)}),l=mi(n.current);return l.addEventListener("resize",o),()=>{o.clear(),l.removeEventListener("resize",o)}},[s]),g.useEffect(()=>{i(),s(r.current)},[s]),e.jsx("div",{style:Jte,...a,ref:n})}function tse(t){return Dt("MuiTabScrollButton",t)}const sse=Tt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),ase=t=>{const{classes:s,orientation:a,disabled:r}=t;return kt({root:["root",a,r&&"disabled"]},tse,s)},rse=Ne(yo,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.orientation&&s[a.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${sse.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),nse=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTabScrollButton"}),{className:n,slots:i={},slotProps:o={},direction:l,orientation:c,disabled:m,...u}=r,h=$r(),f={isRtl:h,...r},b=ase(f),w=i.StartScrollButtonIcon??JR,S=i.EndScrollButtonIcon??e9,j=ea({elementType:w,externalSlotProps:o.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f}),v=ea({elementType:S,externalSlotProps:o.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f});return e.jsx(rse,{component:"div",className:et(b.root,n),ref:a,role:null,ownerState:f,tabIndex:null,...u,style:{...u.style,...c==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${h?-90:90}deg)`}},children:l==="left"?e.jsx(w,{...j}):e.jsx(S,{...v})})});function ise(t){return Dt("MuiTabs",t)}const By=Tt("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),vE=(t,s)=>t===s?t.firstChild:s&&s.nextElementSibling?s.nextElementSibling:t.firstChild,jE=(t,s)=>t===s?t.lastChild:s&&s.previousElementSibling?s.previousElementSibling:t.lastChild,J0=(t,s,a)=>{let r=!1,n=a(t,s);for(;n;){if(n===t.firstChild){if(r)return;r=!0}const i=n.disabled||n.getAttribute("aria-disabled")==="true";if(!n.hasAttribute("tabindex")||i)n=a(t,n);else{n.focus();return}}},ose=t=>{const{vertical:s,fixed:a,hideScrollbar:r,scrollableX:n,scrollableY:i,centered:o,scrollButtonsHideMobile:l,classes:c}=t;return kt({root:["root",s&&"vertical"],scroller:["scroller",a&&"fixed",r&&"hideScrollbar",n&&"scrollableX",i&&"scrollableY"],list:["list","flexContainer",s&&"flexContainerVertical",s&&"vertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",l&&"scrollButtonsHideMobile"],scrollableX:[n&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},ise,c)},lse=Ne("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[{[`& .${By.scrollButtons}`]:s.scrollButtons},{[`& .${By.scrollButtons}`]:a.scrollButtonsHideMobile&&s.scrollButtonsHideMobile},s.root,a.vertical&&s.vertical]}})(Yt(({theme:t})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:s})=>s.vertical,style:{flexDirection:"column"}},{props:({ownerState:s})=>s.scrollButtonsHideMobile,style:{[`& .${By.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}}}]}))),cse=Ne("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.scroller,a.fixed&&s.fixed,a.hideScrollbar&&s.hideScrollbar,a.scrollableX&&s.scrollableX,a.scrollableY&&s.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:t})=>t.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:t})=>t.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:t})=>t.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:t})=>t.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),dse=Ne("div",{name:"MuiTabs",slot:"List",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.list,s.flexContainer,a.vertical&&s.flexContainerVertical,a.centered&&s.centered]}})({display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.centered,style:{justifyContent:"center"}}]}),use=Ne("span",{name:"MuiTabs",slot:"Indicator"})(Yt(({theme:t})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(t.vars||t).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(t.vars||t).palette.secondary.main}},{props:({ownerState:s})=>s.vertical,style:{height:"100%",width:2,right:0}}]}))),mse=Ne(ese)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),NE={},Zo=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTabs"}),n=xi(),i=$r(),{"aria-label":o,"aria-labelledby":l,action:c,centered:m=!1,children:u,className:h,component:f="div",allowScrollButtonsMobile:b=!1,indicatorColor:w="primary",onChange:S,orientation:j="horizontal",ScrollButtonComponent:v,scrollButtons:N="auto",selectionFollowsFocus:C,slots:P={},slotProps:E={},TabIndicatorProps:M={},TabScrollButtonProps:T={},textColor:A="primary",value:L,variant:F="standard",visibleScrollbar:z=!1,...I}=r,Q=F==="scrollable",Y=j==="vertical",B=Y?"scrollTop":"scrollLeft",q=Y?"top":"left",V=Y?"bottom":"right",G=Y?"clientHeight":"clientWidth",H=Y?"height":"width",D={...r,component:f,allowScrollButtonsMobile:b,indicatorColor:w,orientation:j,vertical:Y,scrollButtons:N,textColor:A,variant:F,visibleScrollbar:z,fixed:!Q,hideScrollbar:Q&&!z,scrollableX:Q&&!Y,scrollableY:Q&&Y,centered:m&&!Q,scrollButtonsHideMobile:!b},R=ose(D),$=ea({elementType:P.StartScrollButtonIcon,externalSlotProps:E.startScrollButtonIcon,ownerState:D}),W=ea({elementType:P.EndScrollButtonIcon,externalSlotProps:E.endScrollButtonIcon,ownerState:D}),[J,te]=g.useState(!1),[ee,ae]=g.useState(NE),[ce,he]=g.useState(!1),[ne,xe]=g.useState(!1),[ge,le]=g.useState(!1),[pe,Re]=g.useState({overflow:"hidden",scrollbarWidth:0}),Se=new Map,He=g.useRef(null),ze=g.useRef(null),st={slots:P,slotProps:{indicator:M,scrollButton:T,...E}},ke=()=>{const zt=He.current;let qt;if(zt){const ve=zt.getBoundingClientRect();qt={clientWidth:zt.clientWidth,scrollLeft:zt.scrollLeft,scrollTop:zt.scrollTop,scrollWidth:zt.scrollWidth,top:ve.top,bottom:ve.bottom,left:ve.left,right:ve.right}}let ds;if(zt&&L!==!1){const ve=ze.current.children;if(ve.length>0){const Ce=ve[Se.get(L)];ds=Ce?Ce.getBoundingClientRect():null}}return{tabsMeta:qt,tabMeta:ds}},We=Ot(()=>{const{tabsMeta:zt,tabMeta:qt}=ke();let ds=0,ve;Y?(ve="top",qt&&zt&&(ds=qt.top-zt.top+zt.scrollTop)):(ve=i?"right":"left",qt&&zt&&(ds=(i?-1:1)*(qt[ve]-zt[ve]+zt.scrollLeft)));const Ce={[ve]:ds,[H]:qt?qt[H]:0};if(typeof ee[ve]!="number"||typeof ee[H]!="number")ae(Ce);else{const qe=Math.abs(ee[ve]-Ce[ve]),gt=Math.abs(ee[H]-Ce[H]);(qe>=1||gt>=1)&&ae(Ce)}}),ye=(zt,{animation:qt=!0}={})=>{qt?Xte(B,He.current,zt,{duration:n.transitions.duration.standard}):He.current[B]=zt},Ye=zt=>{let qt=He.current[B];Y?qt+=zt:qt+=zt*(i?-1:1),ye(qt)},at=()=>{const zt=He.current[G];let qt=0;const ds=Array.from(ze.current.children);for(let ve=0;ve<ds.length;ve+=1){const Ce=ds[ve];if(qt+Ce[G]>zt){ve===0&&(qt=zt);break}qt+=Ce[G]}return qt},bt=()=>{Ye(-1*at())},ct=()=>{Ye(at())},[ht,{onChange:Et,...be}]=Zt("scrollbar",{className:et(R.scrollableX,R.hideScrollbar),elementType:mse,shouldForwardComponentProp:!0,externalForwardedProps:st,ownerState:D}),Oe=g.useCallback(zt=>{Et?.(zt),Re({overflow:null,scrollbarWidth:zt})},[Et]),[Le,jt]=Zt("scrollButtons",{className:et(R.scrollButtons,T.className),elementType:nse,externalForwardedProps:st,ownerState:D,additionalProps:{orientation:j,slots:{StartScrollButtonIcon:P.startScrollButtonIcon||P.StartScrollButtonIcon,EndScrollButtonIcon:P.endScrollButtonIcon||P.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:$,endScrollButtonIcon:W}}}),Jt=()=>{const zt={};zt.scrollbarSizeListener=Q?e.jsx(ht,{...be,onChange:Oe}):null;const ds=Q&&(N==="auto"&&(ce||ne)||N===!0);return zt.scrollButtonStart=ds?e.jsx(Le,{direction:i?"right":"left",onClick:bt,disabled:!ce,...jt}):null,zt.scrollButtonEnd=ds?e.jsx(Le,{direction:i?"left":"right",onClick:ct,disabled:!ne,...jt}):null,zt},Kt=Ot(zt=>{const{tabsMeta:qt,tabMeta:ds}=ke();if(!(!ds||!qt)){if(ds[q]<qt[q]){const ve=qt[B]+(ds[q]-qt[q]);ye(ve,{animation:zt})}else if(ds[V]>qt[V]){const ve=qt[B]+(ds[V]-qt[V]);ye(ve,{animation:zt})}}}),rt=Ot(()=>{Q&&N!==!1&&le(!ge)});g.useEffect(()=>{const zt=ng(()=>{He.current&&We()});let qt;const ds=qe=>{qe.forEach(gt=>{gt.removedNodes.forEach(de=>{qt?.unobserve(de)}),gt.addedNodes.forEach(de=>{qt?.observe(de)})}),zt(),rt()},ve=mi(He.current);ve.addEventListener("resize",zt);let Ce;return typeof ResizeObserver<"u"&&(qt=new ResizeObserver(zt),Array.from(ze.current.children).forEach(qe=>{qt.observe(qe)})),typeof MutationObserver<"u"&&(Ce=new MutationObserver(ds),Ce.observe(ze.current,{childList:!0})),()=>{zt.clear(),ve.removeEventListener("resize",zt),Ce?.disconnect(),qt?.disconnect()}},[We,rt]),g.useEffect(()=>{const zt=Array.from(ze.current.children),qt=zt.length;if(typeof IntersectionObserver<"u"&&qt>0&&Q&&N!==!1){const ds=zt[0],ve=zt[qt-1],Ce={root:He.current,threshold:.99},qe=Ae=>{he(!Ae[0].isIntersecting)},gt=new IntersectionObserver(qe,Ce);gt.observe(ds);const de=Ae=>{xe(!Ae[0].isIntersecting)},Ee=new IntersectionObserver(de,Ce);return Ee.observe(ve),()=>{gt.disconnect(),Ee.disconnect()}}},[Q,N,ge,u?.length]),g.useEffect(()=>{te(!0)},[]),g.useEffect(()=>{We()}),g.useEffect(()=>{Kt(NE!==ee)},[Kt,ee]),g.useImperativeHandle(c,()=>({updateIndicator:We,updateScrollButtons:rt}),[We,rt]);const[Lt,Nt]=Zt("indicator",{className:et(R.indicator,M.className),elementType:use,externalForwardedProps:st,ownerState:D,additionalProps:{style:ee}}),ps=e.jsx(Lt,{...Nt});let cs=0;const Ns=g.Children.map(u,zt=>{if(!g.isValidElement(zt))return null;const qt=zt.props.value===void 0?cs:zt.props.value;Se.set(qt,cs);const ds=qt===L;return cs+=1,g.cloneElement(zt,{fullWidth:F==="fullWidth",indicator:ds&&!J&&ps,selected:ds,selectionFollowsFocus:C,onChange:S,textColor:A,value:qt,...cs===1&&L===!1&&!zt.props.tabIndex?{tabIndex:0}:{}})}),Ys=zt=>{if(zt.altKey||zt.shiftKey||zt.ctrlKey||zt.metaKey)return;const qt=ze.current,ds=ir(qt).activeElement;if(ds.getAttribute("role")!=="tab")return;let Ce=j==="horizontal"?"ArrowLeft":"ArrowUp",qe=j==="horizontal"?"ArrowRight":"ArrowDown";switch(j==="horizontal"&&i&&(Ce="ArrowRight",qe="ArrowLeft"),zt.key){case Ce:zt.preventDefault(),J0(qt,ds,jE);break;case qe:zt.preventDefault(),J0(qt,ds,vE);break;case"Home":zt.preventDefault(),J0(qt,null,vE);break;case"End":zt.preventDefault(),J0(qt,null,jE);break}},Is=Jt(),[Ms,pa]=Zt("root",{ref:a,className:et(R.root,h),elementType:lse,externalForwardedProps:{...st,...I,component:f},ownerState:D}),[ha,ia]=Zt("scroller",{ref:He,className:R.scroller,elementType:cse,externalForwardedProps:st,ownerState:D,additionalProps:{style:{overflow:pe.overflow,[Y?`margin${i?"Left":"Right"}`:"marginBottom"]:z?void 0:-pe.scrollbarWidth}}}),[$t,$s]=Zt("list",{ref:ze,className:et(R.list,R.flexContainer),elementType:dse,externalForwardedProps:st,ownerState:D,getSlotProps:zt=>({...zt,onKeyDown:qt=>{Ys(qt),zt.onKeyDown?.(qt)}})});return e.jsxs(Ms,{...pa,children:[Is.scrollButtonStart,Is.scrollbarSizeListener,e.jsxs(ha,{...ia,children:[e.jsx($t,{"aria-label":o,"aria-labelledby":l,"aria-orientation":j==="vertical"?"vertical":null,role:"tablist",...$s,children:Ns}),J&&ps]}),Is.scrollButtonEnd]})});function pse(t){return Dt("MuiTextField",t)}Tt("MuiTextField",["root"]);const hse={standard:S4,filled:w4,outlined:T4},fse=t=>{const{classes:s}=t;return kt({root:["root"]},pse,s)},xse=Ne(wv,{name:"MuiTextField",slot:"Root"})({}),mr=g.forwardRef(function(s,a){const r=es({props:s,name:"MuiTextField"}),{autoComplete:n,autoFocus:i=!1,children:o,className:l,color:c="primary",defaultValue:m,disabled:u=!1,error:h=!1,FormHelperTextProps:f,fullWidth:b=!1,helperText:w,id:S,InputLabelProps:j,inputProps:v,InputProps:N,inputRef:C,label:P,maxRows:E,minRows:M,multiline:T=!1,name:A,onBlur:L,onChange:F,onFocus:z,placeholder:I,required:Q=!1,rows:Y,select:B=!1,SelectProps:q,slots:V={},slotProps:G={},type:H,value:D,variant:R="outlined",...$}=r,W={...r,autoFocus:i,color:c,disabled:u,error:h,fullWidth:b,multiline:T,required:Q,select:B,variant:R},J=fse(W),te=wn(S),ee=w&&te?`${te}-helper-text`:void 0,ae=P&&te?`${te}-label`:void 0,ce=hse[R],he={slots:V,slotProps:{input:N,inputLabel:j,htmlInput:v,formHelperText:f,select:q,...G}},ne={},xe=he.slotProps.inputLabel;R==="outlined"&&(xe&&typeof xe.shrink<"u"&&(ne.notched=xe.shrink),ne.label=P),B&&((!q||!q.native)&&(ne.id=void 0),ne["aria-describedby"]=void 0);const[ge,le]=Zt("root",{elementType:xse,shouldForwardComponentProp:!0,externalForwardedProps:{...he,...$},ownerState:W,className:et(J.root,l),ref:a,additionalProps:{disabled:u,error:h,fullWidth:b,required:Q,color:c,variant:R}}),[pe,Re]=Zt("input",{elementType:ce,externalForwardedProps:he,additionalProps:ne,ownerState:W}),[Se,He]=Zt("inputLabel",{elementType:$R,externalForwardedProps:he,ownerState:W}),[ze,st]=Zt("htmlInput",{elementType:"input",externalForwardedProps:he,ownerState:W}),[ke,We]=Zt("formHelperText",{elementType:_4,externalForwardedProps:he,ownerState:W}),[ye,Ye]=Zt("select",{elementType:D4,externalForwardedProps:he,ownerState:W}),at=e.jsx(pe,{"aria-describedby":ee,autoComplete:n,autoFocus:i,defaultValue:m,fullWidth:b,multiline:T,name:A,rows:Y,maxRows:E,minRows:M,type:H,value:D,id:te,inputRef:C,onBlur:L,onChange:F,onFocus:z,placeholder:I,inputProps:st,slots:{input:V.htmlInput?ze:void 0},...Re});return e.jsxs(ge,{...le,children:[P!=null&&P!==""&&e.jsx(Se,{htmlFor:te,id:ae,...He,children:P}),B?e.jsx(ye,{"aria-describedby":ee,id:te,labelId:ae,value:D,input:at,...Ye,children:o}):at,w&&e.jsx(ke,{id:ee,...We,children:w})]})}),mg=X7({themeId:Ui}),Ec=7,K=({children:t,variant:s="contained",color:a="primary",size:r="medium",loading:n=!1,loadingText:i,fullWidth:o=!1,disabled:l=!1,startIcon:c,endIcon:m,onClick:u,type:h="button",sx:f,className:b,...w})=>e.jsx(lo,{disableElevation:!0,variant:s,color:a,size:r,fullWidth:o,disabled:l||n,startIcon:n?e.jsx(Ki,{size:16,color:"inherit"}):c,endIcon:n?void 0:m,onClick:u,type:h,sx:f,className:b,...w,children:n&&i?i:t}),Uy="/assets/wrong-B_7z0xx9.png";let Vm=null,Vy=!1,$h=null;const t9=()=>Vm?Promise.resolve(Vm):$h||(Vy=!0,$h=new Promise((t,s)=>{const a=new Image;a.onload=()=>{Vm=Uy,Vy=!1,t(Uy)},a.onerror=()=>{Vy=!1,$h=null,s(new Error("Failed to load error illustration"))},a.src=Uy}),$h);t9().catch(console.error);let Rw=class extends g.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null,imageLoaded:!!Vm}}componentDidMount(){!Vm&&!Vy&&t9().then(()=>{this.setState({imageLoaded:!0})}).catch(console.error)}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){console.error("ErrorBoundary caught an error:",s,a),this.logErrorToService(s,a),this.props.onError&&this.props.onError(s,a),this.setState({error:s,errorInfo:a})}logErrorToService=(s,a)=>{const r={message:s.message,stack:s.stack,componentStack:a.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href};console.error("Error logged:",r)};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError||this.props.showFallback?this.props.fallback?this.props.fallback:e.jsxs("div",{className:"min-h-screen flex-col w-full bg-white px-4 py-10 flex items-center justify-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center",children:this.state.imageLoaded||Vm?e.jsx("img",{src:Uy,alt:"Unexpected error",className:"w-full max-w-sm",loading:"eager",decoding:"sync"}):e.jsx("div",{className:"w-full max-w-sm h-64 bg-gray-100 animate-pulse rounded-lg"})}),e.jsxs("div",{className:"rounded-lg border flex flex-col justify-center items-center border-red-100 bg-red-50 px-6 py-4 text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-red-700",children:"Something went wrong"}),e.jsx("p",{className:"mt-1 text-sm text-center text-red-600",children:"An unexpected error occurred while rendering this page."})]}),e.jsx("p",{className:"mt-4 text-sm text-center text-gray-500",children:"We apologize for the inconvenience. Please try refreshing the page or contact support if the problem persists."}),this.state.error&&e.jsxs("div",{className:"mt-6 rounded-lg border border-gray-200 bg-gray-50 p-4 text-left",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Error Details (Development Only):"}),e.jsxs("pre",{className:"mt-2 max-h-60 overflow-auto text-xs text-red-600 whitespace-pre-wrap break-words",children:[this.state.error.toString(),this.state.errorInfo?.componentStack&&e.jsxs(e.Fragment,{children:[`

Component Stack:
`,this.state.errorInfo.componentStack]})]})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-3",children:[e.jsx(K,{variant:"contained",className:"!min-w-[120px]",onClick:this.handleReset,children:"Try Again"}),e.jsx(K,{variant:"outlined",className:"!min-w-[120px]",onClick:this.handleReload,children:"Reload"})]}),e.jsxs("p",{className:"mt-4 text-xs text-gray-400",children:["Error ID: ",Date.now()]})]}):this.props.children}};var s9={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wE=vt.createContext&&vt.createContext(s9),gse=["attr","size","title"];function yse(t,s){if(t==null)return{};var a=bse(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function bse(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function hb(){return hb=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},hb.apply(this,arguments)}function _E(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function fb(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?_E(Object(a),!0).forEach(function(r){vse(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_E(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function vse(t,s,a){return s=jse(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function jse(t){var s=Nse(t,"string");return typeof s=="symbol"?s:s+""}function Nse(t,s){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function a9(t){return t&&t.map((s,a)=>vt.createElement(s.tag,fb({key:a},s.attr),a9(s.child)))}function ba(t){return s=>vt.createElement(wse,hb({attr:fb({},t.attr)},s),a9(t.child))}function wse(t){var s=a=>{var{attr:r,size:n,title:i}=t,o=yse(t,gse),l=n||a.size||"1em",c;return a.className&&(c=a.className),t.className&&(c=(c?c+" ":"")+t.className),vt.createElement("svg",hb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,o,{className:c,style:fb(fb({color:t.color||a.color},a.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&vt.createElement("title",null,i),t.children)};return wE!==void 0?vt.createElement(wE.Consumer,null,a=>s(a)):s(s9)}function ey(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"},child:[]}]})(t)}function _se(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z",clipRule:"evenodd"},child:[]},{tag:"path",attr:{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"},child:[]}]})(t)}function Sse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"},child:[]}]})(t)}function Cse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"},child:[]}]})(t)}function Pse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"},child:[]}]})(t)}function tN(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function kse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0 0 20 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function Ese(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"},child:[]}]})(t)}function Tse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"},child:[]}]})(t)}function SE(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"},child:[]}]})(t)}function Mse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"},child:[]}]})(t)}function CE(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(t)}function Dse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"},child:[]}]})(t)}function Rse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M4 9h4v11H4zM16 13h4v7h-4zM10 4h4v16h-4z"},child:[]}]})(t)}function Ase(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"},child:[]}]})(t)}function Ise(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 2-5.5 9h11z"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"4.5"},child:[]},{tag:"path",attr:{d:"M3 13.5h8v8H3z"},child:[]}]})(t)}function Ose(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9 1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(t)}function PE(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(t)}function Fse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 15.18V7c0-2.21-1.79-4-4-4s-4 1.79-4 4v10c0 1.1-.9 2-2 2s-2-.9-2-2V8.82C8.16 8.4 9 7.3 9 6c0-1.66-1.34-3-3-3S3 4.34 3 6c0 1.3.84 2.4 2 2.82V17c0 2.21 1.79 4 4 4s4-1.79 4-4V7c0-1.1.9-2 2-2s2 .9 2 2v8.18A2.996 2.996 0 0 0 18 21c1.66 0 3-1.34 3-3 0-1.3-.84-2.4-2-2.82z"},child:[]}]})(t)}function Lse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 21V7L12 3 2 7v14h5v-9h10v9h5zm-11-2H9v2h2v-2zm2-3h-2v2h2v-2zm2 3h-2v2h2v-2z"},child:[]}]})(t)}function $se(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},child:[]}]})(t)}function zse(t){return ba({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}const r9=[{id:"dashboards",label:"Dashboards",children:[{id:"executive-dashboard",label:"Executive Dashboard",icon:Sse,href:"/dashboard/executive"}]},{id:"masters",label:"Masters",children:[{id:"organization-setup",label:"Organization Setup",icon:Mse,children:[{id:"user-master",label:"User Master",href:"/masters/users"},{id:"role-permission",label:"Role & Permission Setup",href:"/masters/roles"},{id:"depots",label:"Depots",href:"/masters/depots"},{id:"zones",label:"Zones",href:"/masters/zones"},{id:"currency",label:"Currency",href:"/masters/currency"}]},{id:"operations-logistics",label:"Operations & Logistics",icon:Ose,children:[{id:"vehicle-master",label:"Vehicle Master",href:"/masters/vehicles"},{id:"asset-types",label:"Asset Types",href:"/masters/asset-types"},{id:"asset-master",label:"Asset Master",href:"/masters/asset-master"},{id:"route-types",label:"Route Types",href:"/masters/route-types"},{id:"routes",label:"Routes",href:"/masters/routes"}]},{id:"customer-outlet-management",label:"Outlet Management",icon:Ese,children:[{id:"outlet-groups",label:"Outlet Groups",href:"/masters/outlet-groups"},{id:"outlet-master",label:"Outlet Master",href:"/masters/outlets"},{id:"outlet-type",label:"Outlet Type",href:"/masters/outlet-type"},{id:"outlet-channel",label:"Outlet Channel",href:"/masters/outlet-channel"},{id:"outlet-category",label:"Outlet Category",href:"/masters/outlet-category"}]},{id:"product-pricing-setup",label:"Product & Pricing Setup",icon:Ise,children:[{id:"brands",label:"Brands",href:"/masters/brands"},{id:"product-categories",label:"Categories",href:"/masters/product-categories"},{id:"product-sub-categories",label:"Sub Categories",href:"/masters/product-sub-categories"},{id:"unit-of-measurement",label:"Unit of Measurement",href:"/masters/unit-of-measurement"},{id:"sub-unit-of-measurement",label:"Sub Unit of Measurement",href:"/masters/sub-unit-of-measurement"},{id:"product-flavours",label:"Flavours",href:"/masters/product-flavours"},{id:"product-volumes",label:"Volumes",href:"/masters/product-volumes"},{id:"product-shelf-life",label:"Shelf Life",href:"/masters/product-shelf-life"},{id:"product-types",label:"Product Types",href:"/masters/product-types"},{id:"product-target-groups",label:"Product Target Groups",href:"/masters/product-target-groups"},{id:"product-web-orders",label:"Web Orders",href:"/masters/product-web-orders"},{id:"tax-master",label:"Tax Master",href:"/masters/tax-master"},{id:"product-catalog",label:"Product Catalog",href:"/masters/products"}]},{id:"sales-planning-targets",label:"Sales Planning & Targets",icon:SE,children:[{id:"sales-target-groups",label:"Sales Target Groups",href:"/masters/sales-target-groups"},{id:"sales-targets",label:"Sales Targets",href:"/masters/sales-targets"},{id:"kpi-targets",label:"KPI Targets",href:"/masters/kpi-targets"},{id:"sales-bonus-rules",label:"Sales Bonus Rules",href:"/masters/sales-bonus-rules"}]},{id:"feedback-engagement",label:"Feedback & Engagement",icon:ey,children:[{id:"survey-templates",label:"Survey Templates",href:"/masters/surveys"},{id:"customer-complaints",label:"Customer Complaints",href:"/masters/customer-complaints"},{id:"promotions",label:"Promotions",href:"/masters/promotions"}]}]},{id:"transactions",label:"Transactions",children:[{id:"sales-operations",label:"Sales Operations",icon:kse,children:[{id:"order-entry",label:"Order Entry",href:"/transactions/orders"},{id:"invoice-management",label:"Invoice Management",href:"/transactions/invoices"},{id:"inventory-items",label:"Inventory Items",href:"/masters/inventory-items"},{id:"payment-collection",label:"Payment Collection",href:"/transactions/payments"}]},{id:"asset-cooler-management",label:"Asset & Cooler Management",icon:_se,children:[{id:"asset-movement",label:"Asset Movement",href:"/transactions/asset-movement"},{id:"asset-maintenance",label:"Asset Maintenance",href:"/transactions/maintenance"},{id:"cooler-types",label:"Cooler Types",href:"/masters/cooler-types"},{id:"cooler-sub-types",label:"Cooler Sub Types",href:"/masters/cooler-sub-types"},{id:"cooler-installations",label:"Cooler Installations",href:"/transactions/installations"},{id:"cooler-inspections",label:"Cooler Inspections",href:"/transactions/inspections"}]},{id:"van-warehouse-stock",label:"Van & Stock Operations",icon:Lse,children:[{id:"van-stock",label:"Van Stock Load/Unload",href:"/transactions/van-stock"},{id:"stock-movements",label:"Stock Movements",href:"/transactions/stock-movements"}]},{id:"field-visit-market",label:"Field Visit & Market Activities",icon:CE,children:[{id:"visit-logging",label:"Visit Logging",href:"/transactions/visits"},{id:"competitor-activity",label:"Competitor Activity",href:"/transactions/competitor"}]}]},{id:"tracking",label:"Tracking",children:[{id:"rep-location",label:"Rep Location Tracking",icon:PE,href:"/tracking/location"},{id:"route-effectiveness",label:"Route Effectiveness",icon:Fse,href:"/tracking/routes"}]},{id:"reports",label:"Reports",children:[{id:"orders-invoices-returns",label:"Orders, Invoices, Returns",icon:Pse,href:"/reports/orders"},{id:"sales-vs-target",label:"Sales vs Target",icon:SE,href:"/reports/sales-target"},{id:"asset-movement-status",label:"Asset Movement/Status",icon:Tse,href:"/reports/asset-status"},{id:"visit-frequency",label:"Visit Frequency/Completion",icon:CE,href:"/reports/visits"},{id:"promo-effectiveness",label:"Promo Effectiveness",icon:Dse,href:"/reports/promos"},{id:"region-territory",label:"Region/Territory Sales",icon:PE,href:"/reports/territory"},{id:"rep-productivity",label:"Rep Productivity",icon:zse,href:"/reports/productivity"},{id:"competitor-analysis",label:"Competitor Analysis",icon:Rse,href:"/reports/competitor"},{id:"outstanding-collection",label:"Outstanding & Collection",icon:Cse,href:"/reports/collection"},{id:"attendance-history",label:"Attendance History",icon:ey,href:"/reports/attendance-history"},{id:"activity-logs",label:"Audit Logs",icon:Ase,href:"/reports/audit-logs"},{id:"survey-responses",label:"Survey Responses",icon:ey,href:"/reports/survey-responses"}]},{id:"workflows",label:"Workflows",children:[{id:"approval-setup",label:"Approval Setup",icon:tN,href:"/workflows/approval-setup"},{id:"approval-requests",label:"Approval Requests",icon:$se,href:"/workflows/approvals"}]},{id:"settings",label:"Settings",children:[{id:"login-history",label:"Login History",icon:ey,href:"/settings/login-history"},{id:"api-tokens",label:"API Tokens",icon:tN,href:"/settings/tokens"},{id:"system-settings",label:"System Settings",icon:tN,href:"/settings/system"}]}],sN=["dashboard","company","user","role","depot","zone","currency","route","route-type","outlet","outlet-group","asset-type","asset-master","warehouse","vehicle","brand","product-category","product-sub-category","unit-of-measurement","subunit-of-measurement","product","pricelist","sales-target-group","sales-target","sales-bonus-rule","kpi-target","survey","promotions","order","delivery","return","payment","invoice","credit-note","visit","asset-movement","maintenance","installation","inspection","van-stock","stock-movement","stock-transfer","batch-lots","inventory-items","inventory-management","competitor","customer-complaint","customer-category","customer-type","customer-channel","product-flavour","product-volume","product-shelf-life","product-type","product-target-group","product-web-order","cooler-type","cooler-sub-type","tax-master","location","route-effectiveness","erp-sync","report","approval","exception","alert","profile","login-history","token","setting"],kE={"executive-dashboard":"dashboard","company-master":"company","user-master":"user","role-permission":"role","outlet-master":"outlet","outlet-groups":"outlet-group","asset-types":"asset-type","asset-master":"asset-master","warehouse-master":"warehouse","vehicle-master":"vehicle","product-categories":"product-category","product-sub-categories":"product-sub-category","unit-of-measurement":"unit-of-measurement","product-flavours":"product-flavour","product-volumes":"product-volume","product-shelf-life":"product-shelf-life","product-types":"product-type","product-target-groups":"product-target-group","product-web-orders":"product-web-order","cooler-types":"cooler-type","cooler-sub-types":"cooler-sub-type","tax-master":"tax-master","product-catalog":"product",pricelists:"pricelist","price-lists":"pricelist","sales-target-groups":"sales-target-group","sales-targets":"sales-target","sales-bonus-rules":"sales-bonus-rule","kpi-targets":"kpi-target","survey-templates":"survey","customer-complaints":"customer-complaint","customer-category":"customer-category","customer-type":"customer-type","outlet-channel":"customer-channel","order-entry":"order","delivery-scheduling":"delivery","delivery-schedule":"delivery","return-requests":"return","return-request":"return","payment-collection":"payment","invoice-management":"invoice","credit-notes":"credit-note","visit-logging":"visit","asset-movement":"asset-movement","asset-maintenance":"maintenance","cooler-installations":"installation","cooler-inspections":"inspection","van-stock":"van-stock","stock-movements":"stock-movement","stock-transfer-requests":"stock-transfer","batch-lots":"batch-lots","batch-lot-management":"batch-lots","inventory-stock":"inventory-management","inventory-management":"inventory-management","competitor-activity":"competitor","rep-location":"report","rep-location-tracking":"location","route-effectiveness":"route-effectiveness","orders-invoices-returns":"report","sales-vs-target":"report","asset-movement-status":"report","visit-frequency":"report","promo-effectiveness":"report","region-territory":"report","rep-productivity":"report","competitor-analysis":"report","outstanding-collection":"report","attendance-history":"report","sales-reports":"report","inventory-reports":"report","financial-reports":"report","performance-reports":"report","erp-sync-logs":"erp-sync","activity-logs":"report","survey-responses":"survey","approval-setup":"approval","approval-requests":"approval","route-exceptions":"exception","alerts-reminders":"alert",profile:"profile","login-history":"login-history","api-tokens":"token","system-settings":"setting"};function qse(t){const s=[];function a(r){r.forEach(n=>{n.href&&s.push(n.id),n.children&&a(n.children)})}return a(t),s}function Bse(t){if(kE[t])return kE[t];const s=t.toLowerCase().replace(/-/g,"-");if(sN.includes(s))return s;const a=s.endsWith("s")?s.slice(0,-1):s;if(sN.includes(a))return a;const r=sN.find(n=>n.includes(s)||s.includes(n));return r||(console.warn(`  No permission mapping found for menu item: ${t}`),null)}function Use(){const t=qse(r9),s={};return t.forEach(a=>{const r=Bse(a);r&&(s[a]=r)}),s}const Vse=Use();var jp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Hse={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},Wse=class{#e=Hse;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,s){return this.#e.setTimeout(t,s)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,s){return this.#e.setInterval(t,s)}clearInterval(t){this.#e.clearInterval(t)}},Hd=new Wse;function Yse(t){setTimeout(t,0)}var ru=typeof window>"u"||"Deno"in globalThis;function yn(){}function Gse(t,s){return typeof t=="function"?t(s):t}function Aw(t){return typeof t=="number"&&t>=0&&t!==1/0}function n9(t,s){return Math.max(t+(s||0)-Date.now(),0)}function $c(t,s){return typeof t=="function"?t(s):t}function Oi(t,s){return typeof t=="function"?t(s):t}function EE(t,s){const{type:a="all",exact:r,fetchStatus:n,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(s.queryHash!==R4(o,s.options))return!1}else if(!bx(s.queryKey,o))return!1}if(a!=="all"){const c=s.isActive();if(a==="active"&&!c||a==="inactive"&&c)return!1}return!(typeof l=="boolean"&&s.isStale()!==l||n&&n!==s.state.fetchStatus||i&&!i(s))}function TE(t,s){const{exact:a,status:r,predicate:n,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(a){if(nu(s.options.mutationKey)!==nu(i))return!1}else if(!bx(s.options.mutationKey,i))return!1}return!(r&&s.state.status!==r||n&&!n(s))}function R4(t,s){return(s?.queryKeyHashFn||nu)(t)}function nu(t){return JSON.stringify(t,(s,a)=>Iw(a)?Object.keys(a).sort().reduce((r,n)=>(r[n]=a[n],r),{}):a)}function bx(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(a=>bx(t[a],s[a])):!1}var Kse=Object.prototype.hasOwnProperty;function i9(t,s){if(t===s)return t;const a=ME(t)&&ME(s);if(!a&&!(Iw(t)&&Iw(s)))return s;const n=(a?t:Object.keys(t)).length,i=a?s:Object.keys(s),o=i.length,l=a?new Array(o):{};let c=0;for(let m=0;m<o;m++){const u=a?m:i[m],h=t[u],f=s[u];if(h===f){l[u]=h,(a?m<n:Kse.call(t,u))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){l[u]=f;continue}const b=i9(h,f);l[u]=b,b===h&&c++}return n===o&&c===n?t:l}function xb(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const a in t)if(t[a]!==s[a])return!1;return!0}function ME(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Iw(t){if(!DE(t))return!1;const s=t.constructor;if(s===void 0)return!0;const a=s.prototype;return!(!DE(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function DE(t){return Object.prototype.toString.call(t)==="[object Object]"}function Qse(t){return new Promise(s=>{Hd.setTimeout(s,t)})}function Ow(t,s,a){return typeof a.structuralSharing=="function"?a.structuralSharing(t,s):a.structuralSharing!==!1?i9(t,s):s}function Zse(t,s,a=0){const r=[...t,s];return a&&r.length>a?r.slice(1):r}function Xse(t,s,a=0){const r=[s,...t];return a&&r.length>a?r.slice(0,-1):r}var A4=Symbol();function o9(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===A4?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function l9(t,s){return typeof t=="function"?t(...s):!!t}var Jse=class extends jp{#e;#t;#s;constructor(){super(),this.#s=t=>{if(!ru&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},I4=new Jse;function Fw(){let t,s;const a=new Promise((n,i)=>{t=n,s=i});a.status="pending",a.catch(()=>{});function r(n){Object.assign(a,n),delete a.resolve,delete a.reject}return a.resolve=n=>{r({status:"fulfilled",value:n}),t(n)},a.reject=n=>{r({status:"rejected",reason:n}),s(n)},a}var eae=Yse;function tae(){let t=[],s=0,a=l=>{l()},r=l=>{l()},n=eae;const i=l=>{s?t.push(l):n(()=>{a(l)})},o=()=>{const l=t;t=[],l.length&&n(()=>{r(()=>{l.forEach(c=>{a(c)})})})};return{batch:l=>{let c;s++;try{c=l()}finally{s--,s||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{a=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{n=l}}}var kr=tae(),sae=class extends jp{#e=!0;#t;#s;constructor(){super(),this.#s=t=>{if(!ru&&window.addEventListener){const s=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(a=>{a(t)}))}isOnline(){return this.#e}},gb=new sae;function aae(t){return Math.min(1e3*2**t,3e4)}function c9(t){return(t??"online")==="online"?gb.isOnline():!0}var Lw=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function d9(t){let s=!1,a=0,r;const n=Fw(),i=()=>n.status!=="pending",o=S=>{if(!i()){const j=new Lw(S);f(j),t.onCancel?.(j)}},l=()=>{s=!0},c=()=>{s=!1},m=()=>I4.isFocused()&&(t.networkMode==="always"||gb.isOnline())&&t.canRun(),u=()=>c9(t.networkMode)&&t.canRun(),h=S=>{i()||(r?.(),n.resolve(S))},f=S=>{i()||(r?.(),n.reject(S))},b=()=>new Promise(S=>{r=j=>{(i()||m())&&S(j)},t.onPause?.()}).then(()=>{r=void 0,i()||t.onContinue?.()}),w=()=>{if(i())return;let S;const j=a===0?t.initialPromise:void 0;try{S=j??t.fn()}catch(v){S=Promise.reject(v)}Promise.resolve(S).then(h).catch(v=>{if(i())return;const N=t.retry??(ru?0:3),C=t.retryDelay??aae,P=typeof C=="function"?C(a,v):C,E=N===!0||typeof N=="number"&&a<N||typeof N=="function"&&N(a,v);if(s||!E){f(v);return}a++,t.onFail?.(a,v),Qse(P).then(()=>m()?void 0:b()).then(()=>{s?f(v):w()})})};return{promise:n,status:()=>n.status,cancel:o,continue:()=>(r?.(),n),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?w():b().then(w),n)}}var u9=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Aw(this.gcTime)&&(this.#e=Hd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ru?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Hd.clearTimeout(this.#e),this.#e=void 0)}},rae=class extends u9{#e;#t;#s;#r;#a;#i;#o;constructor(t){super(),this.#o=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#s=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=RE(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(t){if(this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=RE(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const a=Ow(this.state.data,t,this.options);return this.#n({data:a,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),a}setState(t,s){this.#n({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#a?.promise;return this.#a?.cancel(t),s?s.then(yn).catch(yn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Oi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===A4||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>$c(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!n9(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#a&&(this.#o?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(t,s){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const a=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,a.signal)})},n=()=>{const l=o9(this.options,s),m=(()=>{const u={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(u),u})();return this.#o=!1,this.options.persister?this.options.persister(l,m,this):l(m)},o=(()=>{const l={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:n};return r(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#n({type:"fetch",meta:o.fetchOptions?.meta}),this.#a=d9({initialPromise:s?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof Lw&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),a.abort()},onFail:(l,c)=>{this.#n({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#a.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#s.config.onSuccess?.(l,this),this.#s.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof Lw){if(l.silent)return this.#a.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#n({type:"error",error:l}),this.#s.config.onError?.(l,this),this.#s.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#n(t){const s=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...m9(a.data,this.options),fetchMeta:t.meta??null};case"success":const r={...a,data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const n=t.error;return{...a,error:n,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=s(this.state),kr.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function m9(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:c9(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function RE(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,a=s!==void 0,r=a?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:a?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var nae=class extends jp{constructor(t,s){super(),this.options=s,this.#e=t,this.#n=null,this.#o=Fw(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#s=void 0;#r=void 0;#a;#i;#o;#n;#f;#m;#p;#c;#d;#l;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),AE(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $w(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $w(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#j(),this.#t.removeObserver(this)}setOptions(t){const s=this.options,a=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Oi(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),s._defaulted&&!xb(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&IE(this.#t,a,this.options,s)&&this.#u(),this.updateResult(),r&&(this.#t!==a||Oi(this.options.enabled,this.#t)!==Oi(s.enabled,this.#t)||$c(this.options.staleTime,this.#t)!==$c(s.staleTime,this.#t))&&this.#x();const n=this.#g();r&&(this.#t!==a||Oi(this.options.enabled,this.#t)!==Oi(s.enabled,this.#t)||n!==this.#l)&&this.#y(n)}getOptimisticResult(t){const s=this.#e.getQueryCache().build(this.#e,t),a=this.createResult(s,t);return oae(this,a)&&(this.#r=a,this.#i=this.options,this.#a=this.#t.state),a}getCurrentResult(){return this.#r}trackResult(t,s){return new Proxy(t,{get:(a,r)=>(this.trackProp(r),s?.(r),r==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(a,r))})}trackProp(t){this.#h.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#e.defaultQueryOptions(t),a=this.#e.getQueryCache().build(this.#e,s);return a.fetch().then(()=>this.createResult(a,s))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#u(t){this.#N();let s=this.#t.fetch(this.options,t);return t?.throwOnError||(s=s.catch(yn)),s}#x(){this.#v();const t=$c(this.options.staleTime,this.#t);if(ru||this.#r.isStale||!Aw(t))return;const a=n9(this.#r.dataUpdatedAt,t)+1;this.#c=Hd.setTimeout(()=>{this.#r.isStale||this.updateResult()},a)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#j(),this.#l=t,!(ru||Oi(this.options.enabled,this.#t)===!1||!Aw(this.#l)||this.#l===0)&&(this.#d=Hd.setInterval(()=>{(this.options.refetchIntervalInBackground||I4.isFocused())&&this.#u()},this.#l))}#b(){this.#x(),this.#y(this.#g())}#v(){this.#c&&(Hd.clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(Hd.clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const a=this.#t,r=this.options,n=this.#r,i=this.#a,o=this.#i,c=t!==a?t.state:this.#s,{state:m}=t;let u={...m},h=!1,f;if(s._optimisticResults){const A=this.hasListeners(),L=!A&&AE(t,s),F=A&&IE(t,a,s,r);(L||F)&&(u={...u,...m9(m.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:w,status:S}=u;f=u.data;let j=!1;if(s.placeholderData!==void 0&&f===void 0&&S==="pending"){let A;n?.isPlaceholderData&&s.placeholderData===o?.placeholderData?(A=n.data,j=!0):A=typeof s.placeholderData=="function"?s.placeholderData(this.#p?.state.data,this.#p):s.placeholderData,A!==void 0&&(S="success",f=Ow(n?.data,A,s),h=!0)}if(s.select&&f!==void 0&&!j)if(n&&f===i?.data&&s.select===this.#f)f=this.#m;else try{this.#f=s.select,f=s.select(f),f=Ow(n?.data,f,s),this.#m=f,this.#n=null}catch(A){this.#n=A}this.#n&&(b=this.#n,f=this.#m,w=Date.now(),S="error");const v=u.fetchStatus==="fetching",N=S==="pending",C=S==="error",P=N&&v,E=f!==void 0,T={status:S,fetchStatus:u.fetchStatus,isPending:N,isSuccess:S==="success",isError:C,isInitialLoading:P,isLoading:P,data:f,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:w,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!N,isLoadingError:C&&!E,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:C&&E,isStale:O4(t,s),refetch:this.refetch,promise:this.#o,isEnabled:Oi(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=z=>{T.status==="error"?z.reject(T.error):T.data!==void 0&&z.resolve(T.data)},L=()=>{const z=this.#o=T.promise=Fw();A(z)},F=this.#o;switch(F.status){case"pending":t.queryHash===a.queryHash&&A(F);break;case"fulfilled":(T.status==="error"||T.data!==F.value)&&L();break;case"rejected":(T.status!=="error"||T.error!==F.reason)&&L();break}}return T}updateResult(){const t=this.#r,s=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#i=this.options,this.#a.data!==void 0&&(this.#p=this.#t),xb(s,t))return;this.#r=s;const a=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,n=typeof r=="function"?r():r;if(n==="all"||!n&&!this.#h.size)return!0;const i=new Set(n??this.#h);return this.options.throwOnError&&i.add("error"),Object.keys(this.#r).some(o=>{const l=o;return this.#r[l]!==t[l]&&i.has(l)})};this.#w({listeners:a()})}#N(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const s=this.#t;this.#t=t,this.#s=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#w(t){kr.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function iae(t,s){return Oi(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function AE(t,s){return iae(t,s)||t.state.data!==void 0&&$w(t,s,s.refetchOnMount)}function $w(t,s,a){if(Oi(s.enabled,t)!==!1&&$c(s.staleTime,t)!=="static"){const r=typeof a=="function"?a(t):a;return r==="always"||r!==!1&&O4(t,s)}return!1}function IE(t,s,a,r){return(t!==s||Oi(r.enabled,t)===!1)&&(!a.suspense||t.state.status!=="error")&&O4(t,a)}function O4(t,s){return Oi(s.enabled,t)!==!1&&t.isStaleByTime($c(s.staleTime,t))}function oae(t,s){return!xb(t.getCurrentResult(),s)}function OE(t){return{onFetch:(s,a)=>{const r=s.options,n=s.fetchOptions?.meta?.fetchMore?.direction,i=s.state.data?.pages||[],o=s.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const m=async()=>{let u=!1;const h=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(s.signal.aborted?u=!0:s.signal.addEventListener("abort",()=>{u=!0}),s.signal)})},f=o9(s.options,s.fetchOptions),b=async(w,S,j)=>{if(u)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const M={client:s.client,queryKey:s.queryKey,pageParam:S,direction:j?"backward":"forward",meta:s.options.meta};return h(M),M})(),C=await f(N),{maxPages:P}=s.options,E=j?Xse:Zse;return{pages:E(w.pages,C,P),pageParams:E(w.pageParams,S,P)}};if(n&&i.length){const w=n==="backward",S=w?lae:FE,j={pages:i,pageParams:o},v=S(r,j);l=await b(j,v,w)}else{const w=t??i.length;do{const S=c===0?o[0]??r.initialPageParam:FE(r,l);if(c>0&&S==null)break;l=await b(l,S),c++}while(c<w)}return l};s.options.persister?s.fetchFn=()=>s.options.persister?.(m,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},a):s.fetchFn=m}}}function FE(t,{pages:s,pageParams:a}){const r=s.length-1;return s.length>0?t.getNextPageParam(s[r],s,a[r],a):void 0}function lae(t,{pages:s,pageParams:a}){return s.length>0?t.getPreviousPageParam?.(s[0],s,a[0],a):void 0}var cae=class extends u9{#e;#t;#s;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#t=[],this.state=t.state||p9(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(s=>s!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#a({type:"continue"})},a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=d9({fn:()=>this.options.mutationFn?this.options.mutationFn(t,a):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#a({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#a({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const r=this.state.status==="pending",n=!this.#r.canStart();try{if(r)s();else{this.#a({type:"pending",variables:t,isPaused:n}),await this.#s.config.onMutate?.(t,this,a);const o=await this.options.onMutate?.(t,a);o!==this.state.context&&this.#a({type:"pending",context:o,variables:t,isPaused:n})}const i=await this.#r.start();return await this.#s.config.onSuccess?.(i,t,this.state.context,this,a),await this.options.onSuccess?.(i,t,this.state.context,a),await this.#s.config.onSettled?.(i,null,this.state.variables,this.state.context,this,a),await this.options.onSettled?.(i,null,t,this.state.context,a),this.#a({type:"success",data:i}),i}catch(i){try{throw await this.#s.config.onError?.(i,t,this.state.context,this,a),await this.options.onError?.(i,t,this.state.context,a),await this.#s.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,a),await this.options.onSettled?.(void 0,i,t,this.state.context,a),i}finally{this.#a({type:"error",error:i})}}finally{this.#s.runNext(this)}}#a(t){const s=a=>{switch(t.type){case"failed":return{...a,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...a,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),kr.batch(()=>{this.#t.forEach(a=>{a.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function p9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var dae=class extends jp{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(t,s,a){const r=new cae({client:t,mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:a});return this.add(r),r}add(t){this.#e.add(t);const s=ty(t);if(typeof s=="string"){const a=this.#t.get(s);a?a.push(t):this.#t.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const s=ty(t);if(typeof s=="string"){const a=this.#t.get(s);if(a)if(a.length>1){const r=a.indexOf(t);r!==-1&&a.splice(r,1)}else a[0]===t&&this.#t.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=ty(t);if(typeof s=="string"){const r=this.#t.get(s)?.find(n=>n.state.status==="pending");return!r||r===t}else return!0}runNext(t){const s=ty(t);return typeof s=="string"?this.#t.get(s)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){kr.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const s={exact:!0,...t};return this.getAll().find(a=>TE(s,a))}findAll(t={}){return this.getAll().filter(s=>TE(t,s))}notify(t){kr.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return kr.batch(()=>Promise.all(t.map(s=>s.continue().catch(yn))))}};function ty(t){return t.options.scope?.id}var uae=class extends jp{#e;#t=void 0;#s;#r;constructor(s,a){super(),this.#e=s,this.setOptions(a),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const a=this.options;this.options=this.#e.defaultMutationOptions(s),xb(this.options,a)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),a?.mutationKey&&this.options.mutationKey&&nu(a.mutationKey)!==nu(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(s){this.#a(),this.#i(s)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(s,a){return this.#r=a,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(s)}#a(){const s=this.#s?.state??p9();this.#t={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#i(s){kr.batch(()=>{if(this.#r&&this.hasListeners()){const a=this.#t.variables,r=this.#t.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};s?.type==="success"?(this.#r.onSuccess?.(s.data,a,r,n),this.#r.onSettled?.(s.data,null,a,r,n)):s?.type==="error"&&(this.#r.onError?.(s.error,a,r,n),this.#r.onSettled?.(void 0,s.error,a,r,n))}this.listeners.forEach(a=>{a(this.#t)})})}},mae=class extends jp{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,a){const r=s.queryKey,n=s.queryHash??R4(r,s);let i=this.get(n);return i||(i=new rae({client:t,queryKey:r,queryHash:n,options:t.defaultQueryOptions(s),state:a,defaultOptions:t.getQueryDefaults(r)}),this.add(i)),i}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){kr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(a=>EE(s,a))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(a=>EE(t,a)):s}notify(t){kr.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){kr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){kr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},pae=class{#e;#t;#s;#r;#a;#i;#o;#n;constructor(t={}){this.#e=t.queryCache||new mae,this.#t=t.mutationCache||new dae,this.#s=t.defaultOptions||{},this.#r=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=I4.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=gb.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#n?.(),this.#n=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),a=this.#e.build(this,s),r=a.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&a.isStaleByTime($c(s.staleTime,a))&&this.prefetchQuery(s),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:a})=>{const r=a.data;return[s,r]})}setQueryData(t,s,a){const r=this.defaultQueryOptions({queryKey:t}),i=this.#e.get(r.queryHash)?.state.data,o=Gse(s,i);if(o!==void 0)return this.#e.build(this,r).setData(o,{...a,manual:!0})}setQueriesData(t,s,a){return kr.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,s,a)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;kr.batch(()=>{s.findAll(t).forEach(a=>{s.remove(a)})})}resetQueries(t,s){const a=this.#e;return kr.batch(()=>(a.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const a={revert:!0,...s},r=kr.batch(()=>this.#e.findAll(t).map(n=>n.cancel(a)));return Promise.all(r).then(yn).catch(yn)}invalidateQueries(t,s={}){return kr.batch(()=>(this.#e.findAll(t).forEach(a=>{a.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const a={...s,cancelRefetch:s.cancelRefetch??!0},r=kr.batch(()=>this.#e.findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,a);return a.throwOnError||(i=i.catch(yn)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(yn)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const a=this.#e.build(this,s);return a.isStaleByTime($c(s.staleTime,a))?a.fetch(s):Promise.resolve(a.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(yn).catch(yn)}fetchInfiniteQuery(t){return t.behavior=OE(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(yn).catch(yn)}ensureInfiniteQueryData(t){return t.behavior=OE(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return gb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#r.set(nu(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#r.values()],a={};return s.forEach(r=>{bx(t,r.queryKey)&&Object.assign(a,r.defaultOptions)}),a}setMutationDefaults(t,s){this.#a.set(nu(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#a.values()],a={};return s.forEach(r=>{bx(t,r.mutationKey)&&Object.assign(a,r.defaultOptions)}),a}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=R4(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===A4&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},h9=g.createContext(void 0),is=t=>{const s=g.useContext(h9);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},hae=({client:t,children:s})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(h9.Provider,{value:t,children:s})),f9=g.createContext(!1),fae=()=>g.useContext(f9);f9.Provider;function xae(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var gae=g.createContext(xae()),yae=()=>g.useContext(gae),bae=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},vae=t=>{g.useEffect(()=>{t.clearReset()},[t])},jae=({result:t,errorResetBoundary:s,throwOnError:a,query:r,suspense:n})=>t.isError&&!s.isReset()&&!t.isFetching&&r&&(n&&t.data===void 0||l9(a,[t.error,r])),Nae=t=>{if(t.suspense){const a=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>a(r(...n)):a(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},wae=(t,s)=>t.isLoading&&t.isFetching&&!s,_ae=(t,s)=>t?.suspense&&s.isPending,LE=(t,s,a)=>s.fetchOptimistic(t).catch(()=>{a.clearReset()});function Sae(t,s,a){const r=fae(),n=yae(),i=is(),o=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",Nae(o),bae(o,n),vae(n);const l=!i.getQueryCache().get(o.queryHash),[c]=g.useState(()=>new s(i,o)),m=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(h=>{const f=u?c.subscribe(kr.batchCalls(h)):yn;return c.updateResult(),f},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),g.useEffect(()=>{c.setOptions(o)},[o,c]),_ae(o,m))throw LE(o,c,n);if(jae({result:m,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw m.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,m),o.experimental_prefetchInRender&&!ru&&wae(m,r)&&(l?LE(o,c,n):i.getQueryCache().get(o.queryHash)?.promise)?.catch(yn).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?m:c.trackResult(m)}function tt(t,s){return Sae(t,nae)}function yu(t,s){const a=is(),[r]=g.useState(()=>new uae(a,t));g.useEffect(()=>{r.setOptions(t)},[r,t]);const n=g.useSyncExternalStore(g.useCallback(o=>r.subscribe(kr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=g.useCallback((o,l)=>{r.mutate(o,l).catch(yn)},[r]);if(n.error&&l9(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}function Cae(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}Cae(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var pg=t=>typeof t=="number"&&!isNaN(t),iu=t=>typeof t=="string",Yl=t=>typeof t=="function",Pae=t=>iu(t)||pg(t),zw=t=>iu(t)||Yl(t)?t:null,kae=(t,s)=>t===!1||pg(t)&&t>0?t:s,qw=t=>g.isValidElement(t)||iu(t)||Yl(t)||pg(t);function Eae(t,s,a=300){let{scrollHeight:r,style:n}=t;requestAnimationFrame(()=>{n.minHeight="initial",n.height=r+"px",n.transition=`all ${a}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(s,a)})})}function Tae({enter:t,exit:s,appendPosition:a=!1,collapse:r=!0,collapseDuration:n=300}){return function({children:i,position:o,preventExitTransition:l,done:c,nodeRef:m,isIn:u,playToast:h}){let f=a?`${t}--${o}`:t,b=a?`${s}--${o}`:s,w=g.useRef(0);return g.useLayoutEffect(()=>{let S=m.current,j=f.split(" "),v=N=>{N.target===m.current&&(h(),S.removeEventListener("animationend",v),S.removeEventListener("animationcancel",v),w.current===0&&N.type!=="animationcancel"&&S.classList.remove(...j))};S.classList.add(...j),S.addEventListener("animationend",v),S.addEventListener("animationcancel",v)},[]),g.useEffect(()=>{let S=m.current,j=()=>{S.removeEventListener("animationend",j),r?Eae(S,c,n):c()};u||(l?j():(w.current=1,S.className+=` ${b}`,S.addEventListener("animationend",j)))},[u]),vt.createElement(vt.Fragment,null,i)}}function $E(t,s){return{content:x9(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:s}}function x9(t,s,a=!1){return g.isValidElement(t)&&!iu(t.type)?g.cloneElement(t,{closeToast:s.closeToast,toastProps:s,data:s.data,isPaused:a}):Yl(t)?t({closeToast:s.closeToast,toastProps:s,data:s.data,isPaused:a}):t}function Mae({closeToast:t,theme:s,ariaLabel:a="close"}){return vt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${s}`,type:"button",onClick:r=>{r.stopPropagation(),t(!0)},"aria-label":a},vt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},vt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Dae({delay:t,isRunning:s,closeToast:a,type:r="default",hide:n,className:i,controlledProgress:o,progress:l,rtl:c,isIn:m,theme:u}){let h=n||o&&l===0,f={animationDuration:`${t}ms`,animationPlayState:s?"running":"paused"};o&&(f.transform=`scaleX(${l})`);let b=et("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":c}),w=Yl(i)?i({rtl:c,type:r,defaultClassName:b}):et(b,i),S={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{m&&a()}};return vt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},vt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${r}`}),vt.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:w,style:f,...S}))}var Rae=1,g9=()=>`${Rae++}`;function Aae(t,s,a){let r=1,n=0,i=[],o=[],l=s,c=new Map,m=new Set,u=N=>(m.add(N),()=>m.delete(N)),h=()=>{o=Array.from(c.values()),m.forEach(N=>N())},f=({containerId:N,toastId:C,updateId:P})=>{let E=N?N!==t:t!==1,M=c.has(C)&&P==null;return E||M},b=(N,C)=>{c.forEach(P=>{var E;(C==null||C===P.props.toastId)&&((E=P.toggle)==null||E.call(P,N))})},w=N=>{var C,P;(P=(C=N.props)==null?void 0:C.onClose)==null||P.call(C,N.removalReason),N.isActive=!1},S=N=>{if(N==null)c.forEach(w);else{let C=c.get(N);C&&w(C)}h()},j=()=>{n-=i.length,i=[]},v=N=>{var C,P;let{toastId:E,updateId:M}=N.props,T=M==null;N.staleId&&c.delete(N.staleId),N.isActive=!0,c.set(E,N),h(),a($E(N,T?"added":"updated")),T&&((P=(C=N.props).onOpen)==null||P.call(C))};return{id:t,props:l,observe:u,toggle:b,removeToast:S,toasts:c,clearQueue:j,buildToast:(N,C)=>{if(f(C))return;let{toastId:P,updateId:E,data:M,staleId:T,delay:A}=C,L=E==null;L&&n++;let F={...l,style:l.toastStyle,key:r++,...Object.fromEntries(Object.entries(C).filter(([I,Q])=>Q!=null)),toastId:P,updateId:E,data:M,isIn:!1,className:zw(C.className||l.toastClassName),progressClassName:zw(C.progressClassName||l.progressClassName),autoClose:C.isLoading?!1:kae(C.autoClose,l.autoClose),closeToast(I){c.get(P).removalReason=I,S(P)},deleteToast(){let I=c.get(P);if(I!=null){if(a($E(I,"removed")),c.delete(P),n--,n<0&&(n=0),i.length>0){v(i.shift());return}h()}}};F.closeButton=l.closeButton,C.closeButton===!1||qw(C.closeButton)?F.closeButton=C.closeButton:C.closeButton===!0&&(F.closeButton=qw(l.closeButton)?l.closeButton:!0);let z={content:N,props:F,staleId:T};l.limit&&l.limit>0&&n>l.limit&&L?i.push(z):pg(A)?setTimeout(()=>{v(z)},A):v(z)},setProps(N){l=N},setToggle:(N,C)=>{let P=c.get(N);P&&(P.toggle=C)},isToastActive:N=>{var C;return(C=c.get(N))==null?void 0:C.isActive},getSnapshot:()=>o}}var vn=new Map,vx=[],Bw=new Set,Iae=t=>Bw.forEach(s=>s(t)),y9=()=>vn.size>0;function Oae(){vx.forEach(t=>v9(t.content,t.options)),vx=[]}var Fae=(t,{containerId:s})=>{var a;return(a=vn.get(s||1))==null?void 0:a.toasts.get(t)};function b9(t,s){var a;if(s)return!!((a=vn.get(s))!=null&&a.isToastActive(t));let r=!1;return vn.forEach(n=>{n.isToastActive(t)&&(r=!0)}),r}function Lae(t){if(!y9()){vx=vx.filter(s=>t!=null&&s.options.toastId!==t);return}if(t==null||Pae(t))vn.forEach(s=>{s.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let s=vn.get(t.containerId);s?s.removeToast(t.id):vn.forEach(a=>{a.removeToast(t.id)})}}var $ae=(t={})=>{vn.forEach(s=>{s.props.limit&&(!t.containerId||s.id===t.containerId)&&s.clearQueue()})};function v9(t,s){qw(t)&&(y9()||vx.push({content:t,options:s}),vn.forEach(a=>{a.buildToast(t,s)}))}function zae(t){var s;(s=vn.get(t.containerId||1))==null||s.setToggle(t.id,t.fn)}function j9(t,s){vn.forEach(a=>{(s==null||!(s!=null&&s.containerId)||s?.containerId===a.id)&&a.toggle(t,s?.id)})}function qae(t){let s=t.containerId||1;return{subscribe(a){let r=Aae(s,t,Iae);vn.set(s,r);let n=r.observe(a);return Oae(),()=>{n(),vn.delete(s)}},setProps(a){var r;(r=vn.get(s))==null||r.setProps(a)},getSnapshot(){var a;return(a=vn.get(s))==null?void 0:a.getSnapshot()}}}function Bae(t){return Bw.add(t),()=>{Bw.delete(t)}}function Uae(t){return t&&(iu(t.toastId)||pg(t.toastId))?t.toastId:g9()}function hg(t,s){return v9(t,s),s.toastId}function Sv(t,s){return{...s,type:s&&s.type||t,toastId:Uae(s)}}function Cv(t){return(s,a)=>hg(s,Sv(t,a))}function It(t,s){return hg(t,Sv("default",s))}It.loading=(t,s)=>hg(t,Sv("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...s}));function Vae(t,{pending:s,error:a,success:r},n){let i;s&&(i=iu(s)?It.loading(s,n):It.loading(s.render,{...n,...s}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(m,u,h)=>{if(u==null){It.dismiss(i);return}let f={type:m,...o,...n,data:h},b=iu(u)?{render:u}:u;return i?It.update(i,{...f,...b}):It(b.render,{...f,...b}),h},c=Yl(t)?t():t;return c.then(m=>l("success",r,m)).catch(m=>l("error",a,m)),c}It.promise=Vae;It.success=Cv("success");It.info=Cv("info");It.error=Cv("error");It.warning=Cv("warning");It.warn=It.warning;It.dark=(t,s)=>hg(t,Sv("default",{theme:"dark",...s}));function Hae(t){Lae(t)}It.dismiss=Hae;It.clearWaitingQueue=$ae;It.isActive=b9;It.update=(t,s={})=>{let a=Fae(t,s);if(a){let{props:r,content:n}=a,i={delay:100,...r,...s,toastId:s.toastId||t,updateId:g9()};i.toastId!==t&&(i.staleId=t);let o=i.render||n;delete i.render,hg(o,i)}};It.done=t=>{It.update(t,{progress:1})};It.onChange=Bae;It.play=t=>j9(!0,t);It.pause=t=>j9(!1,t);function Wae(t){var s;let{subscribe:a,getSnapshot:r,setProps:n}=g.useRef(qae(t)).current;n(t);let i=(s=g.useSyncExternalStore(a,r,r))==null?void 0:s.slice();function o(l){if(!i)return[];let c=new Map;return t.newestOnTop&&i.reverse(),i.forEach(m=>{let{position:u}=m.props;c.has(u)||c.set(u,[]),c.get(u).push(m)}),Array.from(c,m=>l(m[0],m[1]))}return{getToastToRender:o,isToastActive:b9,count:i?.length}}function Yae(t){let[s,a]=g.useState(!1),[r,n]=g.useState(!1),i=g.useRef(null),o=g.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:m,onClick:u,closeOnClick:h}=t;zae({id:t.toastId,containerId:t.containerId,fn:a}),g.useEffect(()=>{if(t.pauseOnFocusLoss)return f(),()=>{b()}},[t.pauseOnFocusLoss]);function f(){document.hasFocus()||v(),window.addEventListener("focus",j),window.addEventListener("blur",v)}function b(){window.removeEventListener("focus",j),window.removeEventListener("blur",v)}function w(T){if(t.draggable===!0||t.draggable===T.pointerType){N();let A=i.current;o.canCloseOnClick=!0,o.canDrag=!0,A.style.transition="none",t.draggableDirection==="x"?(o.start=T.clientX,o.removalDistance=A.offsetWidth*(t.draggablePercent/100)):(o.start=T.clientY,o.removalDistance=A.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function S(T){let{top:A,bottom:L,left:F,right:z}=i.current.getBoundingClientRect();T.nativeEvent.type!=="touchend"&&t.pauseOnHover&&T.clientX>=F&&T.clientX<=z&&T.clientY>=A&&T.clientY<=L?v():j()}function j(){a(!0)}function v(){a(!1)}function N(){o.didMove=!1,document.addEventListener("pointermove",P),document.addEventListener("pointerup",E)}function C(){document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",E)}function P(T){let A=i.current;if(o.canDrag&&A){o.didMove=!0,s&&v(),t.draggableDirection==="x"?o.delta=T.clientX-o.start:o.delta=T.clientY-o.start,o.start!==T.clientX&&(o.canCloseOnClick=!1);let L=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;A.style.transform=`translate3d(${L},0)`,A.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function E(){C();let T=i.current;if(o.canDrag&&o.didMove&&T){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){n(!0),t.closeToast(!0),t.collapseAll();return}T.style.transition="transform 0.2s, opacity 0.2s",T.style.removeProperty("transform"),T.style.removeProperty("opacity")}}let M={onPointerDown:w,onPointerUp:S};return l&&c&&(M.onMouseEnter=v,t.stacked||(M.onMouseLeave=j)),h&&(M.onClick=T=>{u&&u(T),o.canCloseOnClick&&m(!0)}),{playToast:j,pauseToast:v,isRunning:s,preventExitTransition:r,toastRef:i,eventHandlers:M}}var Gae=typeof window<"u"?g.useLayoutEffect:g.useEffect,Pv=({theme:t,type:s,isLoading:a,...r})=>vt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${s})`,...r});function Kae(t){return vt.createElement(Pv,{...t},vt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Qae(t){return vt.createElement(Pv,{...t},vt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Zae(t){return vt.createElement(Pv,{...t},vt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Xae(t){return vt.createElement(Pv,{...t},vt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Jae(){return vt.createElement("div",{className:"Toastify__spinner"})}var Uw={info:Qae,warning:Kae,success:Zae,error:Xae,spinner:Jae},ere=t=>t in Uw;function tre({theme:t,type:s,isLoading:a,icon:r}){let n=null,i={theme:t,type:s};return r===!1||(Yl(r)?n=r({...i,isLoading:a}):g.isValidElement(r)?n=g.cloneElement(r,i):a?n=Uw.spinner():ere(s)&&(n=Uw[s](i))),n}var sre=t=>{let{isRunning:s,preventExitTransition:a,toastRef:r,eventHandlers:n,playToast:i}=Yae(t),{closeButton:o,children:l,autoClose:c,onClick:m,type:u,hideProgressBar:h,closeToast:f,transition:b,position:w,className:S,style:j,progressClassName:v,updateId:N,role:C,progress:P,rtl:E,toastId:M,deleteToast:T,isIn:A,isLoading:L,closeOnClick:F,theme:z,ariaLabel:I}=t,Q=et("Toastify__toast",`Toastify__toast-theme--${z}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":E},{"Toastify__toast--close-on-click":F}),Y=Yl(S)?S({rtl:E,position:w,type:u,defaultClassName:Q}):et(Q,S),B=tre(t),q=!!P||!c,V={closeToast:f,type:u,theme:z},G=null;return o===!1||(Yl(o)?G=o(V):g.isValidElement(o)?G=g.cloneElement(o,V):G=Mae(V)),vt.createElement(b,{isIn:A,done:T,position:w,preventExitTransition:a,nodeRef:r,playToast:i},vt.createElement("div",{id:M,tabIndex:0,onClick:m,"data-in":A,className:Y,...n,style:j,ref:r,...A&&{role:C,"aria-label":I}},B!=null&&vt.createElement("div",{className:et("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!L})},B),x9(l,t,!s),G,!t.customProgressBar&&vt.createElement(Dae,{...N&&!q?{key:`p-${N}`}:{},rtl:E,theme:z,delay:c,isRunning:s,isIn:A,closeToast:f,hide:h,type:u,className:v,controlledProgress:q,progress:P||0})))},are=(t,s=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:s}),rre=Tae(are("bounce",!0)),nre={position:"top-right",transition:rre,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function ire(t){let s={...nre,...t},a=t.stacked,[r,n]=g.useState(!0),i=g.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=Wae(s),{className:m,style:u,rtl:h,containerId:f,hotKeys:b}=s;function w(j){let v=et("Toastify__toast-container",`Toastify__toast-container--${j}`,{"Toastify__toast-container--rtl":h});return Yl(m)?m({position:j,rtl:h,defaultClassName:v}):et(v,zw(m))}function S(){a&&(n(!0),It.play())}return Gae(()=>{var j;if(a){let v=i.current.querySelectorAll('[data-in="true"]'),N=12,C=(j=s.position)==null?void 0:j.includes("top"),P=0,E=0;Array.from(v).reverse().forEach((M,T)=>{let A=M;A.classList.add("Toastify__toast--stacked"),T>0&&(A.dataset.collapsed=`${r}`),A.dataset.pos||(A.dataset.pos=C?"top":"bot");let L=P*(r?.2:1)+(r?0:N*T);A.style.setProperty("--y",`${C?L:L*-1}px`),A.style.setProperty("--g",`${N}`),A.style.setProperty("--s",`${1-(r?E:0)}`),P+=A.offsetHeight,E+=.025})}},[r,c,a]),g.useEffect(()=>{function j(v){var N;let C=i.current;b(v)&&((N=C.querySelector('[tabIndex="0"]'))==null||N.focus(),n(!1),It.pause()),v.key==="Escape"&&(document.activeElement===C||C!=null&&C.contains(document.activeElement))&&(n(!0),It.play())}return document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}},[b]),vt.createElement("section",{ref:i,className:"Toastify",id:f,onMouseEnter:()=>{a&&(n(!1),It.pause())},onMouseLeave:S,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":s["aria-label"]},o((j,v)=>{let N=v.length?{...u}:{...u,pointerEvents:"none"};return vt.createElement("div",{tabIndex:-1,className:w(j),"data-stacked":a,style:N,key:`c-${j}`},v.map(({content:C,props:P})=>vt.createElement(sre,{...P,stacked:a,collapseAll:S,isIn:l(P.toastId,P.containerId),key:`t-${P.key}`},C)))}))}const Sd={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0},$o=new Map,N9=5e3;function F4(t,s){return`${s}:${t.toLowerCase().trim()}`}function sy(t,s){const a=F4(t,s),r=$o.get(a);return r?Date.now()-r.timestamp<N9:!1}function ay(t,s,a){const r=F4(t,s);$o.set(r,{id:a,timestamp:Date.now()})}function ry(t,s){const a=F4(t,s);$o.delete(a)}function ny(){const t=Date.now(),s=[];$o.forEach((a,r)=>{t-a.timestamp>N9&&s.push(r)}),s.forEach(a=>$o.delete(a))}class ore{success(s,a){if(sy(s,"success"))return null;ny();const r=It.success(s,{...Sd,...a,onClose:()=>{ry(s,"success"),a?.onClose?.()}});return ay(s,"success",r),r}error(s,a){if(sy(s,"error"))return null;ny();const r=It.error(s,{...Sd,...a,onClose:()=>{ry(s,"error"),a?.onClose?.()}});return ay(s,"error",r),r}warning(s,a){if(sy(s,"warning"))return null;ny();const r=It.warning(s,{...Sd,...a,onClose:()=>{ry(s,"warning"),a?.onClose?.()}});return ay(s,"warning",r),r}info(s,a){if(sy(s,"info"))return null;ny();const r=It.info(s,{...Sd,...a,onClose:()=>{ry(s,"info"),a?.onClose?.()}});return ay(s,"info",r),r}loading(s="Loading...",a){return It.loading(s,{...Sd,...a})}update(s,a,r,n){It.update(s,{render:a,type:r,isLoading:!1,...Sd,...n})}dismiss(s){if(It.dismiss(s),s){for(const[a,r]of $o.entries())if(r.id===s){$o.delete(a);break}}}dismissAll(){It.dismiss(),$o.clear()}clearNetworkErrorToasts(){const s=[],a=[];$o.forEach((r,n)=>{const i=n.toLowerCase();(i.includes("network")||i.includes("connection")||i.includes("server")||i.includes("unable to reach"))&&(s.push(r.id),a.push(n))}),s.forEach(r=>It.dismiss(r)),a.forEach(r=>$o.delete(r))}async promise(s,a,r){return It.promise(s,a,{...Sd,...r})}async apiOperation(s,a,r){const n=this.loading(a.loading,r);try{const i=await s(),o=typeof a.success=="function"?a.success(i):a.success;return this.update(n,o,"success",r),i}catch(i){const o=a.error?typeof a.error=="function"?a.error(i):a.error:i.message||"Operation failed";throw this.update(n,o,"error",r),i}}}const nn=new ore,De=t=>{const s=is();return yu({mutationFn:t.mutationFn,onMutate:()=>({toastId:nn.loading(t.loadingMessage)}),onSuccess:(r,n,i)=>{if(i?.toastId){let o="Operation completed successfully!";r&&typeof r=="object"&&("message"in r&&typeof r.message=="string"?o=r.message:"data"in r&&r.data&&typeof r.data=="object"&&"message"in r.data&&(o=r.data.message)),nn.update(i.toastId,o,"success")}t.invalidateQueries&&t.invalidateQueries.forEach(o=>{s.invalidateQueries({queryKey:Array.isArray(o)?o:[o]})}),t.onSuccess?.(r,n)},onError:(r,n,i)=>{if(i?.toastId&&!t.suppressErrorToast){if(r?.response?.status===401){nn.dismiss(i.toastId),t.onError?.(r,n);return}let l="Operation failed";const c=r?.response||r?.originalError?.response;if(c?.data){const m=c.data;l=m.error||m.message||l}else r?.message&&(l=r.message);nn.update(i.toastId,l,"error")}else i?.toastId&&t.suppressErrorToast&&nn.dismiss(i.toastId);t.onError?.(r,n)}})};function w9(t,s){return function(){return t.apply(s,arguments)}}const{toString:lre}=Object.prototype,{getPrototypeOf:L4}=Object,{iterator:kv,toStringTag:_9}=Symbol,Ev=(t=>s=>{const a=lre.call(s);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),vo=t=>(t=t.toLowerCase(),s=>Ev(s)===t),Tv=t=>s=>typeof s===t,{isArray:Np}=Array,sp=Tv("undefined");function fg(t){return t!==null&&!sp(t)&&t.constructor!==null&&!sp(t.constructor)&&$n(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const S9=vo("ArrayBuffer");function cre(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&S9(t.buffer),s}const dre=Tv("string"),$n=Tv("function"),C9=Tv("number"),xg=t=>t!==null&&typeof t=="object",ure=t=>t===!0||t===!1,Hy=t=>{if(Ev(t)!=="object")return!1;const s=L4(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(_9 in t)&&!(kv in t)},mre=t=>{if(!xg(t)||fg(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},pre=vo("Date"),hre=vo("File"),fre=vo("Blob"),xre=vo("FileList"),gre=t=>xg(t)&&$n(t.pipe),yre=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||$n(t.append)&&((s=Ev(t))==="formdata"||s==="object"&&$n(t.toString)&&t.toString()==="[object FormData]"))},bre=vo("URLSearchParams"),[vre,jre,Nre,wre]=["ReadableStream","Request","Response","Headers"].map(vo),_re=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gg(t,s,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,n;if(typeof t!="object"&&(t=[t]),Np(t))for(r=0,n=t.length;r<n;r++)s.call(null,t[r],r,t);else{if(fg(t))return;const i=a?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(r=0;r<o;r++)l=i[r],s.call(null,t[l],l,t)}}function P9(t,s){if(fg(t))return null;s=s.toLowerCase();const a=Object.keys(t);let r=a.length,n;for(;r-- >0;)if(n=a[r],s===n.toLowerCase())return n;return null}const Wd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,k9=t=>!sp(t)&&t!==Wd;function Vw(){const{caseless:t,skipUndefined:s}=k9(this)&&this||{},a={},r=(n,i)=>{const o=t&&P9(a,i)||i;Hy(a[o])&&Hy(n)?a[o]=Vw(a[o],n):Hy(n)?a[o]=Vw({},n):Np(n)?a[o]=n.slice():(!s||!sp(n))&&(a[o]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&gg(arguments[n],r);return a}const Sre=(t,s,a,{allOwnKeys:r}={})=>(gg(s,(n,i)=>{a&&$n(n)?t[i]=w9(n,a):t[i]=n},{allOwnKeys:r}),t),Cre=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Pre=(t,s,a,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),a&&Object.assign(t.prototype,a)},kre=(t,s,a,r)=>{let n,i,o;const l={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],(!r||r(o,t,s))&&!l[o]&&(s[o]=t[o],l[o]=!0);t=a!==!1&&L4(t)}while(t&&(!a||a(t,s))&&t!==Object.prototype);return s},Ere=(t,s,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=s.length;const r=t.indexOf(s,a);return r!==-1&&r===a},Tre=t=>{if(!t)return null;if(Np(t))return t;let s=t.length;if(!C9(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=t[s];return a},Mre=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&L4(Uint8Array)),Dre=(t,s)=>{const r=(t&&t[kv]).call(t);let n;for(;(n=r.next())&&!n.done;){const i=n.value;s.call(t,i[0],i[1])}},Rre=(t,s)=>{let a;const r=[];for(;(a=t.exec(s))!==null;)r.push(a);return r},Are=vo("HTMLFormElement"),Ire=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,n){return r.toUpperCase()+n}),zE=(({hasOwnProperty:t})=>(s,a)=>t.call(s,a))(Object.prototype),Ore=vo("RegExp"),E9=(t,s)=>{const a=Object.getOwnPropertyDescriptors(t),r={};gg(a,(n,i)=>{let o;(o=s(n,i,t))!==!1&&(r[i]=o||n)}),Object.defineProperties(t,r)},Fre=t=>{E9(t,(s,a)=>{if($n(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if($n(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},Lre=(t,s)=>{const a={},r=n=>{n.forEach(i=>{a[i]=!0})};return Np(t)?r(t):r(String(t).split(s)),a},$re=()=>{},zre=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function qre(t){return!!(t&&$n(t.append)&&t[_9]==="FormData"&&t[kv])}const Bre=t=>{const s=new Array(10),a=(r,n)=>{if(xg(r)){if(s.indexOf(r)>=0)return;if(fg(r))return r;if(!("toJSON"in r)){s[n]=r;const i=Np(r)?[]:{};return gg(r,(o,l)=>{const c=a(o,n+1);!sp(c)&&(i[l]=c)}),s[n]=void 0,i}}return r};return a(t,0)},Ure=vo("AsyncFunction"),Vre=t=>t&&(xg(t)||$n(t))&&$n(t.then)&&$n(t.catch),T9=((t,s)=>t?setImmediate:s?((a,r)=>(Wd.addEventListener("message",({source:n,data:i})=>{n===Wd&&i===a&&r.length&&r.shift()()},!1),n=>{r.push(n),Wd.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",$n(Wd.postMessage)),Hre=typeof queueMicrotask<"u"?queueMicrotask.bind(Wd):typeof process<"u"&&process.nextTick||T9,Wre=t=>t!=null&&$n(t[kv]),Je={isArray:Np,isArrayBuffer:S9,isBuffer:fg,isFormData:yre,isArrayBufferView:cre,isString:dre,isNumber:C9,isBoolean:ure,isObject:xg,isPlainObject:Hy,isEmptyObject:mre,isReadableStream:vre,isRequest:jre,isResponse:Nre,isHeaders:wre,isUndefined:sp,isDate:pre,isFile:hre,isBlob:fre,isRegExp:Ore,isFunction:$n,isStream:gre,isURLSearchParams:bre,isTypedArray:Mre,isFileList:xre,forEach:gg,merge:Vw,extend:Sre,trim:_re,stripBOM:Cre,inherits:Pre,toFlatObject:kre,kindOf:Ev,kindOfTest:vo,endsWith:Ere,toArray:Tre,forEachEntry:Dre,matchAll:Rre,isHTMLForm:Are,hasOwnProperty:zE,hasOwnProp:zE,reduceDescriptors:E9,freezeMethods:Fre,toObjectSet:Lre,toCamelCase:Ire,noop:$re,toFiniteNumber:zre,findKey:P9,global:Wd,isContextDefined:k9,isSpecCompliantForm:qre,toJSONObject:Bre,isAsyncFn:Ure,isThenable:Vre,setImmediate:T9,asap:Hre,isIterable:Wre};function Os(t,s,a,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}Je.inherits(Os,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Je.toJSONObject(this.config),code:this.code,status:this.status}}});const M9=Os.prototype,D9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{D9[t]={value:t}});Object.defineProperties(Os,D9);Object.defineProperty(M9,"isAxiosError",{value:!0});Os.from=(t,s,a,r,n,i)=>{const o=Object.create(M9);Je.toFlatObject(t,o,function(u){return u!==Error.prototype},m=>m!=="isAxiosError");const l=t&&t.message?t.message:"Error",c=s==null&&t?t.code:s;return Os.call(o,l,c,a,r,n),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const Yre=null;function Hw(t){return Je.isPlainObject(t)||Je.isArray(t)}function R9(t){return Je.endsWith(t,"[]")?t.slice(0,-2):t}function qE(t,s,a){return t?t.concat(s).map(function(n,i){return n=R9(n),!a&&i?"["+n+"]":n}).join(a?".":""):s}function Gre(t){return Je.isArray(t)&&!t.some(Hw)}const Kre=Je.toFlatObject(Je,{},null,function(s){return/^is[A-Z]/.test(s)});function Mv(t,s,a){if(!Je.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,a=Je.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,j){return!Je.isUndefined(j[S])});const r=a.metaTokens,n=a.visitor||u,i=a.dots,o=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&Je.isSpecCompliantForm(s);if(!Je.isFunction(n))throw new TypeError("visitor must be a function");function m(w){if(w===null)return"";if(Je.isDate(w))return w.toISOString();if(Je.isBoolean(w))return w.toString();if(!c&&Je.isBlob(w))throw new Os("Blob is not supported. Use a Buffer instead.");return Je.isArrayBuffer(w)||Je.isTypedArray(w)?c&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function u(w,S,j){let v=w;if(w&&!j&&typeof w=="object"){if(Je.endsWith(S,"{}"))S=r?S:S.slice(0,-2),w=JSON.stringify(w);else if(Je.isArray(w)&&Gre(w)||(Je.isFileList(w)||Je.endsWith(S,"[]"))&&(v=Je.toArray(w)))return S=R9(S),v.forEach(function(C,P){!(Je.isUndefined(C)||C===null)&&s.append(o===!0?qE([S],P,i):o===null?S:S+"[]",m(C))}),!1}return Hw(w)?!0:(s.append(qE(j,S,i),m(w)),!1)}const h=[],f=Object.assign(Kre,{defaultVisitor:u,convertValue:m,isVisitable:Hw});function b(w,S){if(!Je.isUndefined(w)){if(h.indexOf(w)!==-1)throw Error("Circular reference detected in "+S.join("."));h.push(w),Je.forEach(w,function(v,N){(!(Je.isUndefined(v)||v===null)&&n.call(s,v,Je.isString(N)?N.trim():N,S,f))===!0&&b(v,S?S.concat(N):[N])}),h.pop()}}if(!Je.isObject(t))throw new TypeError("data must be an object");return b(t),s}function BE(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function $4(t,s){this._pairs=[],t&&Mv(t,this,s)}const A9=$4.prototype;A9.append=function(s,a){this._pairs.push([s,a])};A9.toString=function(s){const a=s?function(r){return s.call(this,r,BE)}:BE;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function Qre(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function I9(t,s,a){if(!s)return t;const r=a&&a.encode||Qre;Je.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let i;if(n?i=n(s,a):i=Je.isURLSearchParams(s)?s.toString():new $4(s,a).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class UE{constructor(){this.handlers=[]}use(s,a,r){return this.handlers.push({fulfilled:s,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Je.forEach(this.handlers,function(r){r!==null&&s(r)})}}const O9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zre=typeof URLSearchParams<"u"?URLSearchParams:$4,Xre=typeof FormData<"u"?FormData:null,Jre=typeof Blob<"u"?Blob:null,ene={isBrowser:!0,classes:{URLSearchParams:Zre,FormData:Xre,Blob:Jre},protocols:["http","https","file","blob","url","data"]},z4=typeof window<"u"&&typeof document<"u",Ww=typeof navigator=="object"&&navigator||void 0,tne=z4&&(!Ww||["ReactNative","NativeScript","NS"].indexOf(Ww.product)<0),sne=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ane=z4&&window.location.href||"http://localhost",rne=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:z4,hasStandardBrowserEnv:tne,hasStandardBrowserWebWorkerEnv:sne,navigator:Ww,origin:ane},Symbol.toStringTag,{value:"Module"})),on={...rne,...ene};function nne(t,s){return Mv(t,new on.classes.URLSearchParams,{visitor:function(a,r,n,i){return on.isNode&&Je.isBuffer(a)?(this.append(r,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function ine(t){return Je.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function one(t){const s={},a=Object.keys(t);let r;const n=a.length;let i;for(r=0;r<n;r++)i=a[r],s[i]=t[i];return s}function F9(t){function s(a,r,n,i){let o=a[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=a.length;return o=!o&&Je.isArray(n)?n.length:o,c?(Je.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!l):((!n[o]||!Je.isObject(n[o]))&&(n[o]=[]),s(a,r,n[o],i)&&Je.isArray(n[o])&&(n[o]=one(n[o])),!l)}if(Je.isFormData(t)&&Je.isFunction(t.entries)){const a={};return Je.forEachEntry(t,(r,n)=>{s(ine(r),n,a,0)}),a}return null}function lne(t,s,a){if(Je.isString(t))try{return(s||JSON.parse)(t),Je.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const yg={transitional:O9,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const r=a.getContentType()||"",n=r.indexOf("application/json")>-1,i=Je.isObject(s);if(i&&Je.isHTMLForm(s)&&(s=new FormData(s)),Je.isFormData(s))return n?JSON.stringify(F9(s)):s;if(Je.isArrayBuffer(s)||Je.isBuffer(s)||Je.isStream(s)||Je.isFile(s)||Je.isBlob(s)||Je.isReadableStream(s))return s;if(Je.isArrayBufferView(s))return s.buffer;if(Je.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return nne(s,this.formSerializer).toString();if((l=Je.isFileList(s))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Mv(l?{"files[]":s}:s,c&&new c,this.formSerializer)}}return i||n?(a.setContentType("application/json",!1),lne(s)):s}],transformResponse:[function(s){const a=this.transitional||yg.transitional,r=a&&a.forcedJSONParsing,n=this.responseType==="json";if(Je.isResponse(s)||Je.isReadableStream(s))return s;if(s&&Je.isString(s)&&(r&&!this.responseType||n)){const o=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?Os.from(l,Os.ERR_BAD_RESPONSE,this,null,this.response):l}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:on.classes.FormData,Blob:on.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Je.forEach(["delete","get","head","post","put","patch"],t=>{yg.headers[t]={}});const cne=Je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dne=t=>{const s={};let a,r,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),a=o.substring(0,n).trim().toLowerCase(),r=o.substring(n+1).trim(),!(!a||s[a]&&cne[a])&&(a==="set-cookie"?s[a]?s[a].push(r):s[a]=[r]:s[a]=s[a]?s[a]+", "+r:r)}),s},VE=Symbol("internals");function zh(t){return t&&String(t).trim().toLowerCase()}function Wy(t){return t===!1||t==null?t:Je.isArray(t)?t.map(Wy):String(t)}function une(t){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)s[r[1]]=r[2];return s}const mne=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function aN(t,s,a,r,n){if(Je.isFunction(r))return r.call(this,s,a);if(n&&(s=a),!!Je.isString(s)){if(Je.isString(r))return s.indexOf(r)!==-1;if(Je.isRegExp(r))return r.test(s)}}function pne(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,r)=>a.toUpperCase()+r)}function hne(t,s){const a=Je.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(n,i,o){return this[r].call(this,s,n,i,o)},configurable:!0})})}let zn=class{constructor(s){s&&this.set(s)}set(s,a,r){const n=this;function i(l,c,m){const u=zh(c);if(!u)throw new Error("header name must be a non-empty string");const h=Je.findKey(n,u);(!h||n[h]===void 0||m===!0||m===void 0&&n[h]!==!1)&&(n[h||c]=Wy(l))}const o=(l,c)=>Je.forEach(l,(m,u)=>i(m,u,c));if(Je.isPlainObject(s)||s instanceof this.constructor)o(s,a);else if(Je.isString(s)&&(s=s.trim())&&!mne(s))o(dne(s),a);else if(Je.isObject(s)&&Je.isIterable(s)){let l={},c,m;for(const u of s){if(!Je.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[m=u[0]]=(c=l[m])?Je.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,a)}else s!=null&&i(a,s,r);return this}get(s,a){if(s=zh(s),s){const r=Je.findKey(this,s);if(r){const n=this[r];if(!a)return n;if(a===!0)return une(n);if(Je.isFunction(a))return a.call(this,n,r);if(Je.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=zh(s),s){const r=Je.findKey(this,s);return!!(r&&this[r]!==void 0&&(!a||aN(this,this[r],r,a)))}return!1}delete(s,a){const r=this;let n=!1;function i(o){if(o=zh(o),o){const l=Je.findKey(r,o);l&&(!a||aN(r,r[l],l,a))&&(delete r[l],n=!0)}}return Je.isArray(s)?s.forEach(i):i(s),n}clear(s){const a=Object.keys(this);let r=a.length,n=!1;for(;r--;){const i=a[r];(!s||aN(this,this[i],i,s,!0))&&(delete this[i],n=!0)}return n}normalize(s){const a=this,r={};return Je.forEach(this,(n,i)=>{const o=Je.findKey(r,i);if(o){a[o]=Wy(n),delete a[i];return}const l=s?pne(i):String(i).trim();l!==i&&delete a[i],a[l]=Wy(n),r[l]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return Je.forEach(this,(r,n)=>{r!=null&&r!==!1&&(a[n]=s&&Je.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const r=new this(s);return a.forEach(n=>r.set(n)),r}static accessor(s){const r=(this[VE]=this[VE]={accessors:{}}).accessors,n=this.prototype;function i(o){const l=zh(o);r[l]||(hne(n,o),r[l]=!0)}return Je.isArray(s)?s.forEach(i):i(s),this}};zn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Je.reduceDescriptors(zn.prototype,({value:t},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[a]=r}}});Je.freezeMethods(zn);function rN(t,s){const a=this||yg,r=s||a,n=zn.from(r.headers);let i=r.data;return Je.forEach(t,function(l){i=l.call(a,i,n.normalize(),s?s.status:void 0)}),n.normalize(),i}function L9(t){return!!(t&&t.__CANCEL__)}function wp(t,s,a){Os.call(this,t??"canceled",Os.ERR_CANCELED,s,a),this.name="CanceledError"}Je.inherits(wp,Os,{__CANCEL__:!0});function $9(t,s,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):s(new Os("Request failed with status code "+a.status,[Os.ERR_BAD_REQUEST,Os.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function fne(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function xne(t,s){t=t||10;const a=new Array(t),r=new Array(t);let n=0,i=0,o;return s=s!==void 0?s:1e3,function(c){const m=Date.now(),u=r[i];o||(o=m),a[n]=c,r[n]=m;let h=i,f=0;for(;h!==n;)f+=a[h++],h=h%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),m-o<s)return;const b=u&&m-u;return b?Math.round(f*1e3/b):void 0}}function gne(t,s){let a=0,r=1e3/s,n,i;const o=(m,u=Date.now())=>{a=u,n=null,i&&(clearTimeout(i),i=null),t(...m)};return[(...m)=>{const u=Date.now(),h=u-a;h>=r?o(m,u):(n=m,i||(i=setTimeout(()=>{i=null,o(n)},r-h)))},()=>n&&o(n)]}const yb=(t,s,a=3)=>{let r=0;const n=xne(50,250);return gne(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-r,m=n(c),u=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:m||void 0,estimated:m&&l&&u?(l-o)/m:void 0,event:i,lengthComputable:l!=null,[s?"download":"upload"]:!0};t(h)},a)},HE=(t,s)=>{const a=t!=null;return[r=>s[0]({lengthComputable:a,total:t,loaded:r}),s[1]]},WE=t=>(...s)=>Je.asap(()=>t(...s)),yne=on.hasStandardBrowserEnv?((t,s)=>a=>(a=new URL(a,on.origin),t.protocol===a.protocol&&t.host===a.host&&(s||t.port===a.port)))(new URL(on.origin),on.navigator&&/(msie|trident)/i.test(on.navigator.userAgent)):()=>!0,bne=on.hasStandardBrowserEnv?{write(t,s,a,r,n,i){const o=[t+"="+encodeURIComponent(s)];Je.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),Je.isString(r)&&o.push("path="+r),Je.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vne(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function jne(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function z9(t,s,a){let r=!vne(s);return t&&(r||a==!1)?jne(t,s):s}const YE=t=>t instanceof zn?{...t}:t;function ou(t,s){s=s||{};const a={};function r(m,u,h,f){return Je.isPlainObject(m)&&Je.isPlainObject(u)?Je.merge.call({caseless:f},m,u):Je.isPlainObject(u)?Je.merge({},u):Je.isArray(u)?u.slice():u}function n(m,u,h,f){if(Je.isUndefined(u)){if(!Je.isUndefined(m))return r(void 0,m,h,f)}else return r(m,u,h,f)}function i(m,u){if(!Je.isUndefined(u))return r(void 0,u)}function o(m,u){if(Je.isUndefined(u)){if(!Je.isUndefined(m))return r(void 0,m)}else return r(void 0,u)}function l(m,u,h){if(h in s)return r(m,u);if(h in t)return r(void 0,m)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(m,u,h)=>n(YE(m),YE(u),h,!0)};return Je.forEach(Object.keys({...t,...s}),function(u){const h=c[u]||n,f=h(t[u],s[u],u);Je.isUndefined(f)&&h!==l||(a[u]=f)}),a}const q9=t=>{const s=ou({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:l}=s;if(s.headers=o=zn.from(o),s.url=I9(z9(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Je.isFormData(a)){if(on.hasStandardBrowserEnv||on.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Je.isFunction(a.getHeaders)){const c=a.getHeaders(),m=["content-type","content-length"];Object.entries(c).forEach(([u,h])=>{m.includes(u.toLowerCase())&&o.set(u,h)})}}if(on.hasStandardBrowserEnv&&(r&&Je.isFunction(r)&&(r=r(s)),r||r!==!1&&yne(s.url))){const c=n&&i&&bne.read(i);c&&o.set(n,c)}return s},Nne=typeof XMLHttpRequest<"u",wne=Nne&&function(t){return new Promise(function(a,r){const n=q9(t);let i=n.data;const o=zn.from(n.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:m}=n,u,h,f,b,w;function S(){b&&b(),w&&w(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(n.method.toUpperCase(),n.url,!0),j.timeout=n.timeout;function v(){if(!j)return;const C=zn.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:C,config:t,request:j};$9(function(T){a(T),S()},function(T){r(T),S()},E),j=null}"onloadend"in j?j.onloadend=v:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(v)},j.onabort=function(){j&&(r(new Os("Request aborted",Os.ECONNABORTED,t,j)),j=null)},j.onerror=function(P){const E=P&&P.message?P.message:"Network Error",M=new Os(E,Os.ERR_NETWORK,t,j);M.event=P||null,r(M),j=null},j.ontimeout=function(){let P=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const E=n.transitional||O9;n.timeoutErrorMessage&&(P=n.timeoutErrorMessage),r(new Os(P,E.clarifyTimeoutError?Os.ETIMEDOUT:Os.ECONNABORTED,t,j)),j=null},i===void 0&&o.setContentType(null),"setRequestHeader"in j&&Je.forEach(o.toJSON(),function(P,E){j.setRequestHeader(E,P)}),Je.isUndefined(n.withCredentials)||(j.withCredentials=!!n.withCredentials),l&&l!=="json"&&(j.responseType=n.responseType),m&&([f,w]=yb(m,!0),j.addEventListener("progress",f)),c&&j.upload&&([h,b]=yb(c),j.upload.addEventListener("progress",h),j.upload.addEventListener("loadend",b)),(n.cancelToken||n.signal)&&(u=C=>{j&&(r(!C||C.type?new wp(null,t,j):C),j.abort(),j=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const N=fne(n.url);if(N&&on.protocols.indexOf(N)===-1){r(new Os("Unsupported protocol "+N+":",Os.ERR_BAD_REQUEST,t));return}j.send(i||null)})},_ne=(t,s)=>{const{length:a}=t=t?t.filter(Boolean):[];if(s||a){let r=new AbortController,n;const i=function(m){if(!n){n=!0,l();const u=m instanceof Error?m:this.reason;r.abort(u instanceof Os?u:new wp(u instanceof Error?u.message:u))}};let o=s&&setTimeout(()=>{o=null,i(new Os(`timeout ${s} of ms exceeded`,Os.ETIMEDOUT))},s);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),t=null)};t.forEach(m=>m.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>Je.asap(l),c}},Sne=function*(t,s){let a=t.byteLength;if(a<s){yield t;return}let r=0,n;for(;r<a;)n=r+s,yield t.slice(r,n),r=n},Cne=async function*(t,s){for await(const a of Pne(t))yield*Sne(a,s)},Pne=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:a,value:r}=await s.read();if(a)break;yield r}}finally{await s.cancel()}},GE=(t,s,a,r)=>{const n=Cne(t,s);let i=0,o,l=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:m,value:u}=await n.next();if(m){l(),c.close();return}let h=u.byteLength;if(a){let f=i+=h;a(f)}c.enqueue(new Uint8Array(u))}catch(m){throw l(m),m}},cancel(c){return l(c),n.return()}},{highWaterMark:2})},KE=64*1024,{isFunction:iy}=Je,kne=(({Request:t,Response:s})=>({Request:t,Response:s}))(Je.global),{ReadableStream:QE,TextEncoder:ZE}=Je.global,XE=(t,...s)=>{try{return!!t(...s)}catch{return!1}},Ene=t=>{t=Je.merge.call({skipUndefined:!0},kne,t);const{fetch:s,Request:a,Response:r}=t,n=s?iy(s):typeof fetch=="function",i=iy(a),o=iy(r);if(!n)return!1;const l=n&&iy(QE),c=n&&(typeof ZE=="function"?(w=>S=>w.encode(S))(new ZE):async w=>new Uint8Array(await new a(w).arrayBuffer())),m=i&&l&&XE(()=>{let w=!1;const S=new a(on.origin,{body:new QE,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!S}),u=o&&l&&XE(()=>Je.isReadableStream(new r("").body)),h={stream:u&&(w=>w.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!h[w]&&(h[w]=(S,j)=>{let v=S&&S[w];if(v)return v.call(S);throw new Os(`Response type '${w}' is not supported`,Os.ERR_NOT_SUPPORT,j)})});const f=async w=>{if(w==null)return 0;if(Je.isBlob(w))return w.size;if(Je.isSpecCompliantForm(w))return(await new a(on.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(Je.isArrayBufferView(w)||Je.isArrayBuffer(w))return w.byteLength;if(Je.isURLSearchParams(w)&&(w=w+""),Je.isString(w))return(await c(w)).byteLength},b=async(w,S)=>{const j=Je.toFiniteNumber(w.getContentLength());return j??f(S)};return async w=>{let{url:S,method:j,data:v,signal:N,cancelToken:C,timeout:P,onDownloadProgress:E,onUploadProgress:M,responseType:T,headers:A,withCredentials:L="same-origin",fetchOptions:F}=q9(w),z=s||fetch;T=T?(T+"").toLowerCase():"text";let I=_ne([N,C&&C.toAbortSignal()],P),Q=null;const Y=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let B;try{if(M&&m&&j!=="get"&&j!=="head"&&(B=await b(A,v))!==0){let R=new a(S,{method:"POST",body:v,duplex:"half"}),$;if(Je.isFormData(v)&&($=R.headers.get("content-type"))&&A.setContentType($),R.body){const[W,J]=HE(B,yb(WE(M)));v=GE(R.body,KE,W,J)}}Je.isString(L)||(L=L?"include":"omit");const q=i&&"credentials"in a.prototype,V={...F,signal:I,method:j.toUpperCase(),headers:A.normalize().toJSON(),body:v,duplex:"half",credentials:q?L:void 0};Q=i&&new a(S,V);let G=await(i?z(Q,F):z(S,V));const H=u&&(T==="stream"||T==="response");if(u&&(E||H&&Y)){const R={};["status","statusText","headers"].forEach(te=>{R[te]=G[te]});const $=Je.toFiniteNumber(G.headers.get("content-length")),[W,J]=E&&HE($,yb(WE(E),!0))||[];G=new r(GE(G.body,KE,W,()=>{J&&J(),Y&&Y()}),R)}T=T||"text";let D=await h[Je.findKey(h,T)||"text"](G,w);return!H&&Y&&Y(),await new Promise((R,$)=>{$9(R,$,{data:D,headers:zn.from(G.headers),status:G.status,statusText:G.statusText,config:w,request:Q})})}catch(q){throw Y&&Y(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new Os("Network Error",Os.ERR_NETWORK,w,Q),{cause:q.cause||q}):Os.from(q,q&&q.code,w,Q)}}},Tne=new Map,B9=t=>{let s=t?t.env:{};const{fetch:a,Request:r,Response:n}=s,i=[r,n,a];let o=i.length,l=o,c,m,u=Tne;for(;l--;)c=i[l],m=u.get(c),m===void 0&&u.set(c,m=l?new Map:Ene(s)),u=m;return m};B9();const Yw={http:Yre,xhr:wne,fetch:{get:B9}};Je.forEach(Yw,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const JE=t=>`- ${t}`,Mne=t=>Je.isFunction(t)||t===null||t===!1,U9={getAdapter:(t,s)=>{t=Je.isArray(t)?t:[t];const{length:a}=t;let r,n;const i={};for(let o=0;o<a;o++){r=t[o];let l;if(n=r,!Mne(r)&&(n=Yw[(l=String(r)).toLowerCase()],n===void 0))throw new Os(`Unknown adapter '${l}'`);if(n&&(Je.isFunction(n)||(n=n.get(s))))break;i[l||"#"+o]=n}if(!n){const o=Object.entries(i).map(([c,m])=>`adapter ${c} `+(m===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(JE).join(`
`):" "+JE(o[0]):"as no adapter specified";throw new Os("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:Yw};function nN(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new wp(null,t)}function e8(t){return nN(t),t.headers=zn.from(t.headers),t.data=rN.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),U9.getAdapter(t.adapter||yg.adapter,t)(t).then(function(r){return nN(t),r.data=rN.call(t,t.transformResponse,r),r.headers=zn.from(r.headers),r},function(r){return L9(r)||(nN(t),r&&r.response&&(r.response.data=rN.call(t,t.transformResponse,r.response),r.response.headers=zn.from(r.response.headers))),Promise.reject(r)})}const V9="1.12.2",Dv={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Dv[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const t8={};Dv.transitional=function(s,a,r){function n(i,o){return"[Axios v"+V9+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,l)=>{if(s===!1)throw new Os(n(o," has been removed"+(a?" in "+a:"")),Os.ERR_DEPRECATED);return a&&!t8[o]&&(t8[o]=!0,console.warn(n(o," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(i,o,l):!0}};Dv.spelling=function(s){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function Dne(t,s,a){if(typeof t!="object")throw new Os("options must be an object",Os.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let n=r.length;for(;n-- >0;){const i=r[n],o=s[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new Os("option "+i+" must be "+c,Os.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Os("Unknown option "+i,Os.ERR_BAD_OPTION)}}const Yy={assertOptions:Dne,validators:Dv},Eo=Yy.validators;let Zd=class{constructor(s){this.defaults=s||{},this.interceptors={request:new UE,response:new UE}}async request(s,a){try{return await this._request(s,a)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=ou(this.defaults,a);const{transitional:r,paramsSerializer:n,headers:i}=a;r!==void 0&&Yy.assertOptions(r,{silentJSONParsing:Eo.transitional(Eo.boolean),forcedJSONParsing:Eo.transitional(Eo.boolean),clarifyTimeoutError:Eo.transitional(Eo.boolean)},!1),n!=null&&(Je.isFunction(n)?a.paramsSerializer={serialize:n}:Yy.assertOptions(n,{encode:Eo.function,serialize:Eo.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Yy.assertOptions(a,{baseUrl:Eo.spelling("baseURL"),withXsrfToken:Eo.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&Je.merge(i.common,i[a.method]);i&&Je.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),a.headers=zn.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(a)===!1||(c=c&&S.synchronous,l.unshift(S.fulfilled,S.rejected))});const m=[];this.interceptors.response.forEach(function(S){m.push(S.fulfilled,S.rejected)});let u,h=0,f;if(!c){const w=[e8.bind(this),void 0];for(w.unshift(...l),w.push(...m),f=w.length,u=Promise.resolve(a);h<f;)u=u.then(w[h++],w[h++]);return u}f=l.length;let b=a;for(;h<f;){const w=l[h++],S=l[h++];try{b=w(b)}catch(j){S.call(this,j);break}}try{u=e8.call(this,b)}catch(w){return Promise.reject(w)}for(h=0,f=m.length;h<f;)u=u.then(m[h++],m[h++]);return u}getUri(s){s=ou(this.defaults,s);const a=z9(s.baseURL,s.url,s.allowAbsoluteUrls);return I9(a,s.params,s.paramsSerializer)}};Je.forEach(["delete","get","head","options"],function(s){Zd.prototype[s]=function(a,r){return this.request(ou(r||{},{method:s,url:a,data:(r||{}).data}))}});Je.forEach(["post","put","patch"],function(s){function a(r){return function(i,o,l){return this.request(ou(l||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Zd.prototype[s]=a(),Zd.prototype[s+"Form"]=a(!0)});let Rne=class H9{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(l=>{r.subscribe(l),i=l}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},s(function(i,o,l){r.reason||(r.reason=new wp(i,o,l),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=r=>{s.abort(r)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new H9(function(n){s=n}),cancel:s}}};function Ane(t){return function(a){return t.apply(null,a)}}function Ine(t){return Je.isObject(t)&&t.isAxiosError===!0}const Gw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gw).forEach(([t,s])=>{Gw[s]=t});function W9(t){const s=new Zd(t),a=w9(Zd.prototype.request,s);return Je.extend(a,Zd.prototype,s,{allOwnKeys:!0}),Je.extend(a,s,null,{allOwnKeys:!0}),a.create=function(n){return W9(ou(t,n))},a}const xr=W9(yg);xr.Axios=Zd;xr.CanceledError=wp;xr.CancelToken=Rne;xr.isCancel=L9;xr.VERSION=V9;xr.toFormData=Mv;xr.AxiosError=Os;xr.Cancel=xr.CanceledError;xr.all=function(s){return Promise.all(s)};xr.spread=Ane;xr.isAxiosError=Ine;xr.mergeConfig=ou;xr.AxiosHeaders=zn;xr.formToJSON=t=>F9(Je.isHTMLForm(t)?new FormData(t):t);xr.getAdapter=U9.getAdapter;xr.HttpStatusCode=Gw;xr.default=xr;const{Axios:p$e,AxiosError:h$e,CanceledError:f$e,isCancel:x$e,CancelToken:g$e,VERSION:y$e,all:b$e,Cancel:v$e,isAxiosError:j$e,spread:N$e,toFormData:w$e,AxiosHeaders:_$e,HttpStatusCode:S$e,formToJSON:C$e,getAdapter:P$e,mergeConfig:k$e}=xr,ap={OK:200,CREATED:201,NO_CONTENT:204,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,CONFLICT:409,UNPROCESSABLE_ENTITY:422,INTERNAL_SERVER_ERROR:500,SERVICE_UNAVAILABLE:503},Sm={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"},Hi={TIMEOUT:"TIMEOUT",NETWORK_ERROR:"NETWORK_ERROR",SERVER_ERROR:"SERVER_ERROR",CLIENT_ERROR:"CLIENT_ERROR",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",AUTHORIZATION_ERROR:"AUTHORIZATION_ERROR",VALIDATION_ERROR:"VALIDATION_ERROR"};class Gl extends Error{statusCode;errorType;originalError;response;constructor(s,a,r,n){super(s),this.name="ApiError",this.statusCode=a,this.errorType=r,this.originalError=n,this.response=n?.response}}const One="https://sfa_dev_api.dcctz.com/api/v1",Fne=3e5;let Kw=!1;const ie=xr.create({baseURL:One,timeout:Fne,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!1});ie.interceptors.request.use(t=>{try{if(t.metadata={...t.metadata,startTime:Date.now()},t.skipAuth)return t;const s=Bi.getToken();if(s){t.headers.set("Authorization",`Bearer ${s}`);const a=Bi.getUser();a&&(t.headers.set("X-User-ID",a.id.toString()),t.headers.set("X-User-Role",a.role),a.depot_id&&t.headers.set("X-Depot-ID",a.depot_id.toString()),a.zone_id&&t.headers.set("X-Zone-ID",a.zone_id.toString()))}return t.headers.set("X-Request-ID",Une()),t}catch(s){return console.error("Request interceptor error:",s),t}},t=>(console.error("Request setup failed:",t),Promise.reject(new Gl("Request configuration failed",0,Hi.CLIENT_ERROR,t))));ie.interceptors.response.use(t=>{try{nn.clearNetworkErrorToasts();const s=t.config.metadata?.startTime,a=s?Date.now()-s:0;return t.data&&typeof t.data=="object"&&(t.data.meta={...t.data.meta,requestDuration:a,timestamp:new Date().toISOString()}),t}catch(s){return console.error("Response processing error:",s),t}},async t=>{const s=t.config;if(s?.skipErrorHandling)return Promise.reject(t);try{if(!t.response&&(t.request||t.code==="ERR_NETWORK"||t.code==="ECONNREFUSED"||t.code==="ETIMEDOUT"||t.code==="ENOTFOUND"||t.message?.includes("Network Error")||t.message?.includes("network")))return s8(t);if(t.response){const{status:r,data:n}=t.response;if(r===ap.UNAUTHORIZED)return Lne(s,t);if(r===ap.FORBIDDEN)return $ne(t);if(r>=400&&r<500)return zne(t)}else return t.request?s8(t):qne(t);return Promise.reject(Bne(t))}catch(a){return console.error("Error handling failed:",a),Promise.reject(t)}});async function Lne(t,s){if(Kw){const o=new Gl("Authentication required",ap.UNAUTHORIZED,Hi.AUTHENTICATION_ERROR,s);return o.response=s.response,Promise.reject(o)}Kw=!0,Bi.clearAuth();let a=3;const r=nn.warning(`Session expired. Redirecting to login in ${a}...`,{autoClose:!1,closeOnClick:!1}),n=setInterval(()=>{a--,a>0?r&&nn.update(r,`Session expired. Redirecting to login in ${a}...`,"warning"):(clearInterval(n),r&&nn.update(r,"Redirecting to login...","warning"))},1e3);typeof window<"u"&&setTimeout(()=>{clearInterval(n),r&&nn.dismiss(r),window.location.href="/login"},3e3);const i=new Gl("Authentication required",ap.UNAUTHORIZED,Hi.AUTHENTICATION_ERROR,s);return i.response=s.response,Promise.reject(i)}function $ne(t){const a=t.response?.data?.message||"Access denied. Insufficient permissions.";Y9(a,Sm.ERROR);const r=new Gl(a,ap.FORBIDDEN,Hi.AUTHORIZATION_ERROR,t);return r.response=t.response,Promise.reject(r)}function zne(t){const s=t.response?.status||400,a=t.response?.data,r=a?.error||a?.message||t.message||"Request failed",n=s===ap.UNPROCESSABLE_ENTITY?new Gl(r,s,Hi.VALIDATION_ERROR,t):new Gl(r,s,Hi.CLIENT_ERROR,t);return n.response=t.response,Promise.reject(n)}function s8(t){let s=Hi.NETWORK_ERROR,a="Network error occurred. Please check your internet connection.";return t.code==="ECONNABORTED"||t.code==="ETIMEDOUT"?(s=Hi.TIMEOUT,a="Request timeout. Please try again."):t.code==="ECONNREFUSED"?a="Connection refused. The server may be unavailable.":t.code==="ENOTFOUND"?a="Server not found. Please check your connection.":t.code==="ERR_NETWORK"?a="Network error. Unable to reach the server.":t.message?.includes("Network Error")&&(a="Network error. Please check your internet connection."),Y9(a,Sm.ERROR),Promise.reject(new Gl(a,0,s,t))}function qne(t){return Promise.reject(new Gl("Request setup failed",0,Hi.CLIENT_ERROR,t))}function Bne(t){const s=t.response?.status||0,a=t.response?.data,r=a?.error||a?.message||t.message||"Unknown error";let n=Hi.SERVER_ERROR;s>=400&&s<500?n=Hi.CLIENT_ERROR:t.response||(n=Hi.NETWORK_ERROR);const i=new Gl(r,s,n,t);return i.response=t.response,i}function Une(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function Y9(t,s){let a=null;switch(s){case Sm.SUCCESS:a=nn.success(t);break;case Sm.ERROR:a=nn.error(t);break;case Sm.WARNING:a=nn.warning(t);break;case Sm.INFO:a=nn.info(t);break;default:a=nn.info(t)}return a}const Vne=()=>{Kw=!1},Hne=async t=>{try{return(await ie.get("/users",{params:t})).data}catch(s){throw s}},Wne=async t=>{try{return(await ie.get(`/users/${t}`)).data}catch(s){throw s}},Yne=async t=>(await ie.post("/users",t,{headers:t instanceof FormData?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"}})).data,Gne=async(t,s)=>(await ie.put(`/users/${t}`,s,{headers:s instanceof FormData?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"}})).data,Kne=async t=>(await ie.delete(`/users/${t}`)).data,Qne=async()=>{try{return(await ie.get("/users/me")).data}catch(t){throw t}},Zne=async t=>(await ie.put("/users/me",t,{headers:t instanceof FormData?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"}})).data,Xne=async t=>{try{return(await ie.get("/users-dropdown",{params:t})).data}catch(s){throw s}},Dl={all:["users"],lists:()=>[...Dl.all,"list"],list:t=>[...Dl.lists(),t],details:()=>[...Dl.all,"detail"],detail:t=>[...Dl.details(),t],profile:()=>[...Dl.all,"profile"]},Qr=(t,s)=>tt({queryKey:Dl.list(t),queryFn:()=>Hne(t),staleTime:300*1e3,...s}),Jne=(t,s)=>tt({queryKey:Dl.detail(t),queryFn:()=>Wne(t),enabled:!!t,staleTime:300*1e3,...s}),G9=(t,s)=>tt({queryKey:["users","dropdown",t],queryFn:()=>Xne(t),staleTime:300*1e3,...s}),q4=()=>{const[t,s]=g.useState(()=>Bi.isAuthenticated());return g.useEffect(()=>{const a=()=>{const i=Bi.isAuthenticated();s(i)};a();const r=()=>{a()};window.addEventListener("auth-change",r);const n=setInterval(a,5e3);return()=>{window.removeEventListener("auth-change",r),clearInterval(n)}},[]),tt({queryKey:[...Dl.profile(),t],queryFn:()=>Qne(),staleTime:300*1e3,gcTime:600*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0,retry:1,enabled:t,select:a=>a?.data})},eie=t=>De({mutationFn:s=>Yne(s),loadingMessage:"Creating user...",invalidateQueries:["users"],onSuccess:t?.onSuccess,onError:t?.onError}),tie=t=>De({mutationFn:({id:s,userData:a})=>Gne(s,a),loadingMessage:"Updating user...",invalidateQueries:["users"],onSuccess:t?.onSuccess,onError:t?.onError}),sie=t=>De({mutationFn:s=>Kne(s),loadingMessage:"Deleting user...",invalidateQueries:["users"],onSuccess:t?.onSuccess,onError:t?.onError}),aie=t=>De({mutationFn:s=>Zne(s),loadingMessage:"Updating profile...",invalidateQueries:["users"],onSuccess:t?.onSuccess,onError:t?.onError}),rie=(t,s)=>{const a=t.toLowerCase().replace(/-/g,"_"),r=s.toLowerCase();return`${a}_${r}`},nie=t=>{const s=t.toLowerCase();return s.includes("admin")||s.includes("super admin")},iie=(t,s)=>t.includes("*")?!0:t.includes(s),oy=(t,s,a)=>{const r=rie(s,a);return iie(t,r)},Qe=t=>{const{data:s,isLoading:a,error:r}=q4(),n=g.useMemo(()=>s?s.role?.name&&nie(s.role.name)?["*"]:s.permissions||[]:[],[s]),i=g.useMemo(()=>{if(!r)return!1;const u=r;return u?.errorType==="NETWORK_ERROR"||u?.errorType==="TIMEOUT"||u?.statusCode===0&&!u?.response||!u?.response&&(u?.code==="ERR_NETWORK"||u?.code==="ECONNREFUSED"||u?.code==="ETIMEDOUT"||u?.code==="ENOTFOUND")||u?.message&&(u.message.includes("Network")||u.message.includes("network"))},[r]),o=g.useMemo(()=>a||!s||i?!1:oy(n,t,"create"),[n,t,a,s,i]),l=g.useMemo(()=>a||!s||i?!1:oy(n,t,"read"),[n,t,a,s,i]),c=g.useMemo(()=>a||!s||i?!1:oy(n,t,"update"),[n,t,a,s,i]),m=g.useMemo(()=>a||!s||i?!1:oy(n,t,"delete"),[n,t,a,s,i]);return{isCreate:o,isUpdate:c,isDelete:m,isRead:l,isLoading:a,error:r,isNetworkError:i}},oie=()=>{const[t,s]=g.useState(navigator.onLine),[a,r]=g.useState("");return g.useEffect(()=>{const n=()=>{const u=navigator;return u.connection||u.mozConnection||u.webkitConnection},i=()=>{const u=n();return u?.effectiveType||u?.type||""},o=()=>{s(!0),r(i())},l=()=>{s(!1),r("")},c=()=>{r(i())};r(i()),window.addEventListener("online",o),window.addEventListener("offline",l);const m=n();return m&&m.addEventListener("change",c),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",l),m&&m.removeEventListener("change",c)}},[]),{isOnline:t,connectionType:a}};const lie=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cie=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,r)=>r?r.toUpperCase():a.toLowerCase()),a8=t=>{const s=cie(t);return s.charAt(0).toUpperCase()+s.slice(1)},K9=(...t)=>t.filter((s,a,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===a).join(" ").trim(),die=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};var uie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mie=g.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...uie,width:s,height:s,stroke:t,strokeWidth:r?Number(a)*24/Number(s):a,className:K9("lucide",n),...!i&&!die(l)&&{"aria-hidden":"true"},...l},[...o.map(([m,u])=>g.createElement(m,u)),...Array.isArray(i)?i:[i]]));const Bt=(t,s)=>{const a=g.forwardRef(({className:r,...n},i)=>g.createElement(mie,{ref:i,iconNode:s,className:K9(`lucide-${lie(a8(t))}`,`lucide-${t}`,r),...n}));return a.displayName=a8(t),a};const pie=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],rp=Bt("activity",pie);const hie=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Gy=Bt("archive",hie);const fie=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],r8=Bt("arrow-down",fie);const xie=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Qa=Bt("arrow-left",xie);const gie=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],iN=Bt("arrow-right-left",gie);const yie=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Qw=Bt("arrow-right",yie);const bie=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],vie=Bt("arrow-up-down",bie);const jie=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],n8=Bt("arrow-up",jie);const Nie=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],i8=Bt("award",Nie);const wie=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],Q9=Bt("battery",wie);const _ie=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],oN=Bt("bell",_ie);const Sie=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],_n=Bt("building-2",Sie);const Cie=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Pie=Bt("building",Cie);const kie=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_s=Bt("calendar",kie);const Eie=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],o8=Bt("car",Eie);const Tie=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Gc=Bt("chart-column",Tie);const Mie=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],zl=Bt("check",Mie);const Die=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],zc=Bt("circle-alert",Die);const Rie=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Da=Bt("circle-check-big",Rie);const Aie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ya=Bt("circle-x",Aie);const Iie=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ds=Bt("clock",Iie);const Oie=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],l8=Bt("coffee",Oie);const Fie=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],_p=Bt("credit-card",Fie);const Lie=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],$ie=Bt("database",Lie);const zie=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],wr=Bt("dollar-sign",zie);const qie=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],jo=Bt("download",qie);const Bie=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],lN=Bt("droplet",Bie);const Uie=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],jx=Bt("droplets",Uie);const Vie=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Hie=Bt("eye",Vie);const Wie=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ks=Bt("file-text",Wie);const Yie=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],Z9=Bt("fingerprint",Yie);const Gie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],c8=Bt("globe",Gie);const Kie=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Qie=Bt("grip-vertical",Kie);const Zie=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],B4=Bt("history",Zie);const Xie=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],X9=Bt("house",Xie);const Jie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],eoe=Bt("image",Jie);const toe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Bn=Bt("info",toe);const soe=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],aoe=Bt("key",soe);const roe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],bb=Bt("layers",roe);const noe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ioe=Bt("lock",noe);const ooe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Nx=Bt("mail",ooe);const loe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ks=Bt("map-pin",loe);const coe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],cN=Bt("message-square",coe);const doe=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],d8=Bt("move",doe);const uoe=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Xd=Bt("navigation",uoe);const moe=[["path",{d:"M12 3v6",key:"1holv5"}],["path",{d:"M16.76 3a2 2 0 0 1 1.8 1.1l2.23 4.479a2 2 0 0 1 .21.891V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9.472a2 2 0 0 1 .211-.894L5.45 4.1A2 2 0 0 1 7.24 3z",key:"187q7i"}],["path",{d:"M3.054 9.013h17.893",key:"grwhos"}]],J9=Bt("package-2",moe);const poe=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Wt=Bt("package",poe);const hoe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],np=Bt("percent",hoe);const foe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Rv=Bt("phone",foe);const xoe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wr=Bt("plus",xoe);const goe=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],yoe=Bt("qr-code",goe);const boe=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Gr=Bt("receipt",boe);const voe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ql=Bt("refresh-cw",voe);const joe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],qc=Bt("route",joe);const Noe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],u8=Bt("ruler",Noe);const woe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bg=Bt("settings",woe);const _oe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Soe=Bt("shield-check",_oe);const Coe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],Poe=Bt("shield-x",Coe);const koe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],eA=Bt("shield",koe);const Eoe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],lu=Bt("shopping-cart",Eoe);const Toe=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],m8=Bt("shuffle",Toe);const Moe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],tA=Bt("square-pen",Moe);const Doe=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],vb=Bt("store",Doe);const Roe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],_r=Bt("tag",Roe);const Aoe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],sl=Bt("target",Aoe);const Ioe=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],Av=Bt("thermometer",Ioe);const Ooe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jb=Bt("trash-2",Ooe);const Foe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],vs=Bt("trending-up",Foe);const Loe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],na=Bt("triangle-alert",Loe);const $oe=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Un=Bt("truck",$oe);const zoe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],qoe=Bt("upload",zoe);const Boe=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],go=Bt("user-check",Boe);const Uoe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sA=Bt("user-plus",Uoe);const Voe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Hoe=Bt("user-x",Voe);const Woe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Tr=Bt("user",Woe);const Yoe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],la=Bt("users",Yoe);const Goe=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],p8=Bt("warehouse",Goe);const Koe=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Qoe=Bt("weight",Koe);const Zoe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Xo=Bt("wrench",Zoe);const Xoe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],An=Bt("x",Xoe);const Joe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ele=Bt("zap",Joe),tle=t=>e.jsxs("svg",{viewBox:"0 0 500 500",height:450,width:450,...t,children:[e.jsxs("g",{children:[e.jsx("path",{d:"M373.23,244a21.78,21.78,0,0,1,2.12-5.37l-2.92-4.47,6.15-6.36,4.57,2.78a21.6,21.6,0,0,1,5.3-2.3l1.09-5.23,8.85-.15,1.27,5.2a21.78,21.78,0,0,1,5.37,2.12l4.47-2.93,6.36,6.16L413.08,238a21.53,21.53,0,0,1,2.3,5.29l5.23,1.1.15,8.85-5.2,1.27a21.87,21.87,0,0,1-2.12,5.36l2.93,4.48-6.16,6.36L405.64,268a21.91,21.91,0,0,1-5.29,2.3l-1.1,5.23-8.85.14-1.27-5.19a21.87,21.87,0,0,1-5.36-2.12l-4.48,2.92-6.36-6.15,2.78-4.57a22,22,0,0,1-2.3-5.3l-5.23-1.09-.14-8.85,5.19-1.27Zm11.67,5a9.49,9.49,0,1,0,9.34-9.65A9.48,9.48,0,0,0,384.9,249Z",style:{fill:"none"}}),e.jsx("path",{d:"M384.9,249a7.24,7.24,0,0,1,.16-2.35,9.57,9.57,0,0,1,7.38-7.32,9.8,9.8,0,0,1,5.12.31,9.78,9.78,0,0,1,4.59,3.31,9.7,9.7,0,0,1,.19,11.52,9.05,9.05,0,0,1-2,2.1,9.19,9.19,0,0,1-2.44,1.36,9.75,9.75,0,0,1-5.11.48,9.6,9.6,0,0,1-7.62-7.08,7.32,7.32,0,0,1-.23-2.33,21.12,21.12,0,0,0,.43,2.28,9.5,9.5,0,0,0,3.55,5.05,9.28,9.28,0,0,0,8.8,1.15,8.88,8.88,0,0,0,2.32-1.3,8.7,8.7,0,0,0,1.92-2,9.22,9.22,0,0,0-.18-10.92,8.88,8.88,0,0,0-2-1.94,8.69,8.69,0,0,0-2.36-1.22,9.29,9.29,0,0,0-4.87-.34,9.12,9.12,0,0,0-3.89,1.77,9.45,9.45,0,0,0-3.38,5.17A19.37,19.37,0,0,0,384.9,249Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M373.23,244a1.31,1.31,0,0,1-.32.1l-1,.26-3.87,1,.06-.08c.05,2.26.11,5.24.19,8.84l-.1-.12,5.24,1.07.09,0,0,.09a21.81,21.81,0,0,0,2.3,5.25l.05.09-.05.08-2.77,4.58,0-.23,6.37,6.15-.25,0,4.47-2.93.11-.08.11.07a22.18,22.18,0,0,0,5.32,2.09l.13,0,0,.14c.4,1.61.83,3.38,1.28,5.19l-.23-.18,8.85-.15-.24.19c.34-1.63.72-3.42,1.09-5.24l0-.14.15,0a21.48,21.48,0,0,0,5.23-2.28l.13-.08.13.08,4.57,2.78-.31,0,6.15-6.36,0,.32-2.93-4.48-.08-.13.07-.14a21.33,21.33,0,0,0,2.1-5.29h0l0-.15.15,0,5.2-1.26-.2.25c-.05-3-.1-5.94-.14-8.85l.2.25-5.23-1.1-.15,0-.05-.15a21.38,21.38,0,0,0-2.26-5.23l-.08-.13.08-.13,2.78-4.57,0,.31-6.35-6.16.29,0-4.48,2.93-.12.07-.12-.07a21.53,21.53,0,0,0-5.3-2.1l-.14,0,0-.13-1.26-5.2.22.17-8.85.13.19-.16c-.39,1.84-.76,3.56-1.11,5.23l0,.11-.11,0a21.68,21.68,0,0,0-5.26,2.26l-.09.06-.09-.06L378.5,228l.19,0-6.18,6.34,0-.15,2.89,4.5,0,0,0,0a22.2,22.2,0,0,0-1.77,4c-.14.44-.24.78-.32,1s-.11.34-.11.34,0-.12.07-.35.14-.58.28-1a20.87,20.87,0,0,1,1.7-4v.09c-.8-1.22-1.77-2.68-2.95-4.46l-.05-.08.06-.06,6.13-6.39.09-.09.1.07,4.58,2.76h-.17a21.58,21.58,0,0,1,5.33-2.33l-.14.14c.35-1.66.71-3.39,1.09-5.23l0-.16h.16l8.85-.16h.17l0,.17c.42,1.69.84,3.41,1.28,5.19l-.17-.16a21.76,21.76,0,0,1,5.43,2.14h-.24l4.47-2.94.16-.1.14.13,6.37,6.15.14.14-.11.17-2.77,4.57v-.26a21.86,21.86,0,0,1,2.33,5.35l-.2-.18,5.24,1.1.2,0v.21q.08,4.37.15,8.84v.21l-.2.05-5.2,1.27.2-.19h0a22.28,22.28,0,0,1-2.14,5.43v-.27l2.92,4.48.12.17-.15.15-6.16,6.36-.14.14-.17-.1-4.57-2.79h.26a21.55,21.55,0,0,1-5.36,2.32l.18-.18c-.38,1.81-.76,3.6-1.1,5.23l0,.19h-.2l-8.85.14h-.18l0-.18-1.26-5.2.16.17a22.31,22.31,0,0,1-5.42-2.16h.23l-4.49,2.91-.13.09-.12-.11-6.35-6.17-.1-.1.07-.13,2.79-4.56v.17a21.94,21.94,0,0,1-2.29-5.34l.11.11-5.23-1.11-.1,0v-.1c0-3.61-.07-6.59-.1-8.85v-.07H368l3.86-.9,1-.22Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M114.41,219.61a24.61,24.61,0,0,1,2.37-6l-3.27-5,6.88-7.11,5.12,3.11a24.46,24.46,0,0,1,5.92-2.57l1.22-5.85,9.9-.16,1.42,5.81a24.21,24.21,0,0,1,6,2.37l5-3.27,7.11,6.88L159,212.93a24.29,24.29,0,0,1,2.57,5.92l5.85,1.22.16,9.9-5.81,1.42a24.21,24.21,0,0,1-2.37,6l3.27,5-6.88,7.11-5.12-3.11a24.29,24.29,0,0,1-5.92,2.57l-1.22,5.85-9.9.16-1.42-5.81a24.21,24.21,0,0,1-6-2.37l-5,3.27-7.11-6.88,3.11-5.12a24.46,24.46,0,0,1-2.57-5.92l-5.85-1.22-.16-9.9,5.81-1.42Zm13,5.61a10.62,10.62,0,1,0,10.44-10.79A10.62,10.62,0,0,0,127.46,225.22Z",style:{fill:"#ebebeb",fillRule:"evenodd"}}),e.jsx("path",{d:"M342.47,194a7,7,0,0,1,.68-1.73l-.94-1.45,2-2.05,1.47.9a7.28,7.28,0,0,1,1.71-.75l.35-1.69,2.86,0,.41,1.67a7.27,7.27,0,0,1,1.73.69l1.45-.94,2.05,2-.89,1.48a7.25,7.25,0,0,1,.74,1.71l1.69.35,0,2.86-1.67.41a7.44,7.44,0,0,1-.69,1.73l.95,1.45-2,2-1.48-.9a6.86,6.86,0,0,1-1.71.74l-.35,1.69-2.86.05-.41-1.68a7,7,0,0,1-1.73-.68l-1.45.94-2.05-2,.9-1.48a6.86,6.86,0,0,1-.74-1.71l-1.69-.35,0-2.86,1.68-.41Zm3.76,1.62a3.07,3.07,0,1,0,3-3.12A3.07,3.07,0,0,0,346.23,195.66Z",style:{fill:"#ebebeb",fillRule:"evenodd"}}),e.jsx("path",{d:"M48.58,223.62a9.94,9.94,0,0,1,1-2.39l-1.31-2L51,216.38l2,1.24a9.36,9.36,0,0,1,2.36-1l.49-2.34,4-.07.57,2.32a10.37,10.37,0,0,1,2.39,1l2-1.3,2.84,2.75-1.24,2a9.81,9.81,0,0,1,1,2.37l2.34.49.07,3.95-2.33.57a10,10,0,0,1-.94,2.4l1.3,2-2.75,2.84-2-1.24a9.43,9.43,0,0,1-2.37,1l-.49,2.34-4,.07-.57-2.32a10,10,0,0,1-2.4-.95l-2,1.31L48.45,233l1.24-2a9.28,9.28,0,0,1-1-2.37l-2.34-.49-.07-3.95,2.32-.57Zm5.22,2.24A4.24,4.24,0,1,0,58,221.55,4.24,4.24,0,0,0,53.8,225.86Z",style:{fill:"#ebebeb",fillRule:"evenodd"}}),e.jsx("path",{d:"M408.34,159.92a22.21,22.21,0,0,1,2.17-5.49l-3-4.58,6.3-6.51,4.67,2.84a22.38,22.38,0,0,1,5.42-2.34l1.12-5.36,9.05-.15,1.3,5.32a22.37,22.37,0,0,1,5.49,2.17l4.58-3,6.5,6.29-2.84,4.68a22,22,0,0,1,2.35,5.41l5.36,1.13.14,9-5.31,1.29a22.06,22.06,0,0,1-2.17,5.49l3,4.58-6.3,6.51-4.67-2.84a22.4,22.4,0,0,1-5.42,2.35L435,192.12l-9,.15-1.3-5.32a22,22,0,0,1-5.49-2.17l-4.58,3-6.5-6.3,2.84-4.68a22,22,0,0,1-2.35-5.41l-5.35-1.12-.15-9.06,5.31-1.29Zm11.94,5.13a9.71,9.71,0,1,0,9.55-9.87A9.7,9.7,0,0,0,420.28,165.05Z",style:{fill:"#ebebeb",fillRule:"evenodd"}}),e.jsx("path",{d:"M62.94,310.83a19.9,19.9,0,0,1,2-5l-2.71-4.15,5.7-5.89,4.23,2.58a19.83,19.83,0,0,1,4.9-2.13l1-4.85,8.19-.13,1.18,4.81a20.21,20.21,0,0,1,5,2l4.14-2.71,5.89,5.7-2.57,4.23a20.18,20.18,0,0,1,2.12,4.9l4.85,1,.14,8.19-4.82,1.18a20.19,20.19,0,0,1-2,5l2.71,4.14-5.7,5.89L93,333a20.26,20.26,0,0,1-4.9,2.13L87,340l-8.2.14-1.17-4.81a20.29,20.29,0,0,1-5-2l-4.15,2.71-5.89-5.7,2.58-4.24a19.51,19.51,0,0,1-2.13-4.9l-4.85-1-.13-8.2,4.81-1.17Zm10.8,4.64a8.8,8.8,0,1,0,8.65-8.93A8.79,8.79,0,0,0,73.74,315.47Z",style:{fill:"#f5f5f5",fillRule:"evenodd"}}),e.jsx("path",{d:"M234.89,141.28a9.07,9.07,0,0,1,.85-2.17l-1.18-1.8,2.49-2.57,1.84,1.12a8.8,8.8,0,0,1,2.13-.92l.45-2.11,3.56-.06.51,2.09a8.55,8.55,0,0,1,2.17.86l1.8-1.18,2.57,2.48L251,138.87a8.42,8.42,0,0,1,.92,2.13l2.11.44.06,3.57-2.09.51a8.7,8.7,0,0,1-.86,2.17l1.18,1.8-2.48,2.57L248,150.94a8.87,8.87,0,0,1-2.14.92l-.44,2.11-3.57.06-.51-2.09a8.48,8.48,0,0,1-2.16-.86l-1.81,1.18-2.56-2.48,1.12-1.85a8.82,8.82,0,0,1-.93-2.13l-2.11-.44-.06-3.57,2.1-.51Zm4.7,2a3.83,3.83,0,1,0,3.77-3.89A3.84,3.84,0,0,0,239.59,143.3Z",style:{fill:"#f5f5f5",fillRule:"evenodd"}}),e.jsx("path",{d:"M420,390.92c4.5-2.32,9.79-2.62,14.78-1.8,2.69.45,5.48,1.25,7.31,3.26s2.17,5.56.07,7.29a6.91,6.91,0,0,1-4.6,1.17c-3.91,0-8.25-.73-11.37,1.62-1.78,1.34-3,3.57-5.1,4.23a5,5,0,0,1-5.54-2.46,8.6,8.6,0,0,1-.62-6.35A9.7,9.7,0,0,1,420,390.92Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M409.66,371c2.75,3.93,8.09,2.63,10.57.23s3.52-5.87,4.48-9.18c2.18-7.57,4.37-15.52,2.75-23.23a12.86,12.86,0,0,0-3-6.31,6.72,6.72,0,0,0-6.39-2.12c-2.69.71-4.37,3.35-5.58,5.86A55.35,55.35,0,0,0,407.06,360c0,3.83.44,7.84,2.6,11",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M402.11,376.67c3-3.55,3.55-8.72,2.22-13.16s-4.33-8.21-7.79-11.29a41.81,41.81,0,0,0-14-8.23,14.87,14.87,0,0,0-6.27-1.07,6.55,6.55,0,0,0-5.26,3.19c-1.47,2.8-.07,6.19,1.46,9A106.42,106.42,0,0,0,381.68,369c2.74,3.54,5.89,7,10.07,8.63s8.54,1.42,10.75-1.49",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M409.47,430.28a8.48,8.48,0,0,0,.25-1.79c.13-1.3.28-2.93.47-4.87a70.83,70.83,0,0,1,1.1-7.14,54.77,54.77,0,0,1,2.6-8.44,31.09,31.09,0,0,1,4.3-7.62,16,16,0,0,1,5.44-4.53,15.56,15.56,0,0,1,4.59-1.43,8.61,8.61,0,0,0,1.78-.25,7.68,7.68,0,0,0-1.81,0,14,14,0,0,0-4.78,1.24,16,16,0,0,0-5.74,4.57,30,30,0,0,0-4.47,7.78,52.18,52.18,0,0,0-2.58,8.57,62.27,62.27,0,0,0-.95,7.23c-.15,2.07-.21,3.75-.24,4.9A8.89,8.89,0,0,0,409.47,430.28Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M409.81,426.53a3.84,3.84,0,0,0,0-.83v-2.37c0-2.05,0-5,.1-8.7.19-7.34.82-15.25,2-26.39,1.16-10.48,2.71-22.68,4.35-30.61.35-1.8.7-3.42,1-4.84s.59-2.66.86-3.65.4-1.7.55-2.3a2.94,2.94,0,0,0,.14-.82,4,4,0,0,0-.28.78l-.69,2.27c-.31,1-.62,2.2-1,3.62s-.76,3-1.14,4.83a268.55,268.55,0,0,0-4.57,28.4c-1.23,11.17-1.78,21.34-1.83,28.7,0,3.68,0,6.66.13,8.72.06,1,.11,1.74.15,2.37A3.14,3.14,0,0,0,409.81,426.53Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M409.86,406.92a16.24,16.24,0,0,0,0-2.48c-.09-1.59-.31-3.88-.76-6.7A87.45,87.45,0,0,0,406.9,388a79.53,79.53,0,0,0-4.08-11.56,61.73,61.73,0,0,0-12-18.67,30.88,30.88,0,0,0-2.82-2.62c-.44-.37-.82-.73-1.21-1l-1.09-.76a15.66,15.66,0,0,0-2.09-1.33c-.11.16,2.95,2,6.83,6.09a64.87,64.87,0,0,1,11.69,18.6,91.53,91.53,0,0,1,4.11,11.45c1.07,3.59,1.78,6.89,2.32,9.67s.8,5.06,1,6.64A14.61,14.61,0,0,0,409.86,406.92Z",style:{fill:"#ebebeb"}}),e.jsx("polygon",{points:"390.9 441.51 392.87 468.43 427.45 468.43 429.42 441.51 390.9 441.51",style:{fill:"#ebebeb"}}),e.jsx("rect",{x:"387.56",y:"430.9",width:"45.98",height:"10.61",style:{fill:"#ebebeb"}}),e.jsx("polygon",{points:"387.56 467.4 387.56 470.35 389.72 470.35 432.78 470.35 432.78 467.4 387.56 467.4",style:{fill:"#ebebeb"}}),e.jsx("polygon",{points:"391.84 475.52 389.72 470.35 431.14 470.35 428.67 475.52 391.84 475.52",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M428.77,450.31s0,.09-.16.25l-.51.68-2,2.58-.09.12-.08-.12L421,447h.28l-4.87,6.9-.16.22-.17-.21L410.26,447h.34l-.32.4-5.17,6.48-.17.22-.16-.23L399.9,447l.29,0c-2.41,2.73-4.44,5.06-6,6.84l-.1.12-.09-.14-1.88-3.16-.48-.84a1.64,1.64,0,0,1-.15-.3,1.92,1.92,0,0,1,.21.27l.53.81,2,3.1H394c1.53-1.81,3.54-4.16,5.9-6.93l.15-.17.14.18,4.92,6.87h-.33l5.15-6.49.32-.4.16-.2.17.2,5.77,6.89H416l4.93-6.86.14-.2.14.2,4.85,6.92h-.18c.88-1.06,1.58-1.9,2.1-2.51l.56-.65Z",style:{fill:"#f5f5f5"}}),e.jsx("path",{d:"M429.9,441.33c0,.12-8.67.22-19.36.22s-19.35-.1-19.35-.22,8.66-.21,19.35-.21S429.9,441.21,429.9,441.33Z",style:{fill:"#f5f5f5"}}),e.jsx("path",{d:"M431.65,470.63c0,.12-9.42.22-21,.22s-21-.1-21-.22,9.42-.21,21-.21S431.65,470.52,431.65,470.63Z",style:{fill:"#f5f5f5"}}),e.jsx("path",{d:"M67.42,169.17a10.87,10.87,0,0,1,1.79,0c.58,0,1.29,0,2.1.06s1.76.09,2.78.22a64.67,64.67,0,0,1,7.17,1.13A71.67,71.67,0,0,1,89.8,173a72,72,0,0,1,8.12,3.61,62.75,62.75,0,0,1,6.21,3.76c.87.56,1.6,1.14,2.27,1.62s1.21.93,1.65,1.31a12.38,12.38,0,0,1,1.34,1.19,10.53,10.53,0,0,1-1.47-1c-.46-.35-1-.77-1.7-1.23s-1.42-1-2.29-1.56c-1.71-1.13-3.83-2.37-6.23-3.63a76.93,76.93,0,0,0-8.08-3.55,77.6,77.6,0,0,0-8.46-2.5,72.05,72.05,0,0,0-7.11-1.24c-1-.15-1.94-.2-2.76-.29s-1.51-.12-2.09-.15A11.41,11.41,0,0,1,67.42,169.17Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M48.89,280.58a3.13,3.13,0,0,1,.54-.46l1.6-1.21c.69-.53,1.56-1.17,2.6-1.85s2.19-1.5,3.54-2.29,2.79-1.71,4.42-2.57,3.37-1.76,5.23-2.67a109,109,0,0,1,12.52-4.92,110.78,110.78,0,0,1,13.07-3.19c2-.32,4-.66,5.82-.83s3.53-.36,5.09-.45,3-.13,4.22-.16,2.31,0,3.18,0l2,.07a3.2,3.2,0,0,1,.7.06,3.45,3.45,0,0,1-.7,0l-2,0c-.87,0-1.94,0-3.18.08s-2.64.08-4.19.24-3.26.25-5.07.51-3.75.54-5.78.87a114.31,114.31,0,0,0-13,3.22A115.86,115.86,0,0,0,67,270c-1.85.9-3.62,1.73-5.22,2.62s-3.1,1.71-4.44,2.5-2.52,1.57-3.57,2.23-1.93,1.26-2.64,1.76l-1.66,1.14A4.71,4.71,0,0,1,48.89,280.58Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M120.76,334.33a2.15,2.15,0,0,1,.07-.54l.3-1.54c.13-.66.31-1.47.55-2.4s.48-2,.83-3.17c.65-2.34,1.54-5.08,2.67-8.09s2.53-6.24,4.18-9.56,3.44-6.36,5.15-9.08,3.4-5.06,4.89-7c.72-1,1.43-1.81,2-2.56s1.14-1.37,1.6-1.88l1-1.16c.25-.26.38-.39.4-.38a2.17,2.17,0,0,1-.32.45c-.25.33-.58.73-1,1.22s-.95,1.17-1.53,1.94-1.27,1.61-2,2.6c-1.44,1.93-3.06,4.31-4.77,7s-3.43,5.76-5.09,9.06-3,6.52-4.21,9.49-2.07,5.71-2.76,8c-.37,1.16-.64,2.22-.9,3.14s-.47,1.72-.63,2.38-.29,1.11-.4,1.51A2.61,2.61,0,0,1,120.76,334.33Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M256.62,59.85a4,4,0,0,1-.39.6L255,62.14c-.53.72-1.17,1.61-1.87,2.67s-1.55,2.24-2.39,3.6S249,71.24,248,72.87s-1.93,3.39-2.95,5.24c-2,3.75-4,8-5.83,12.47s-3.32,8.94-4.53,13c-.56,2-1.13,4-1.55,5.81s-.82,3.54-1.15,5.11-.57,3-.8,4.24-.4,2.34-.52,3.23-.24,1.52-.32,2a3.25,3.25,0,0,1-.15.7,3.9,3.9,0,0,1,0-.72c.06-.52.13-1.2.23-2s.22-2,.44-3.24.39-2.7.72-4.27.64-3.31,1.09-5.14,1-3.79,1.51-5.84c1.19-4.08,2.67-8.52,4.5-13.07s3.9-8.75,5.9-12.49c1-1.86,2-3.63,3-5.24s1.92-3.1,2.8-4.44,1.73-2.52,2.46-3.56,1.39-1.93,2-2.63.95-1.22,1.28-1.63A2.87,2.87,0,0,1,256.62,59.85Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M346.65,163.74a2.88,2.88,0,0,1-.6.11l-1.73.23-1.25.15c-.46.07-.95.18-1.47.27-1.06.22-2.27.39-3.57.77l-2,.53c-.72.19-1.44.46-2.19.7-1.53.46-3.09,1.14-4.74,1.81a57.83,57.83,0,0,0-18.89,13.27c-1.19,1.33-2.36,2.57-3.3,3.85-.48.63-1,1.21-1.41,1.81L304.26,189c-.8,1.09-1.37,2.18-1.93,3.09-.27.47-.54.89-.76,1.3l-.56,1.12-.8,1.55a2.44,2.44,0,0,1-.32.53,3.28,3.28,0,0,1,.22-.57c.19-.42.42-1,.72-1.6l.52-1.15c.21-.41.47-.84.73-1.32a36.3,36.3,0,0,1,1.87-3.16l1.18-1.78c.41-.62.91-1.21,1.39-1.85.94-1.3,2.1-2.56,3.29-3.91a56.24,56.24,0,0,1,19.05-13.38c1.67-.66,3.25-1.33,4.79-1.78.77-.23,1.5-.5,2.22-.68l2.07-.5a34.58,34.58,0,0,1,3.61-.69c.53-.09,1-.18,1.49-.23l1.26-.11,1.74-.13A2.18,2.18,0,0,1,346.65,163.74Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M420.18,223.25l-.26-.08-.75-.25-2.87-1-2.07-.76c-.76-.26-1.6-.51-2.5-.8-1.79-.56-3.81-1.27-6.11-1.85l-3.58-1c-1.25-.34-2.57-.6-3.92-.92-2.7-.67-5.64-1.16-8.71-1.72a150.92,150.92,0,0,0-40.57-1.24c-3.1.37-6.06.68-8.8,1.18-1.37.24-2.7.42-4,.68l-3.63.75c-2.33.44-4.39,1-6.22,1.48-.91.23-1.76.43-2.53.64l-2.12.63-2.92.86-.77.21a1,1,0,0,1-.27,0l.25-.1.75-.26,2.9-1,2.11-.67c.77-.23,1.62-.45,2.53-.7,1.82-.47,3.88-1.08,6.21-1.55l3.64-.79c1.26-.27,2.6-.46,4-.7,2.75-.53,5.71-.85,8.82-1.24a147.09,147.09,0,0,1,40.7,1.25c3.08.58,6,1.08,8.72,1.77,1.36.33,2.68.6,3.93,1l3.58,1c2.3.61,4.31,1.35,6.1,1.93.9.3,1.73.57,2.49.85l2.06.8,2.84,1.12.73.31C420.1,223.2,420.19,223.24,420.18,223.25Z",style:{fill:"#ebebeb"}})]}),e.jsxs("g",{children:[e.jsx("path",{d:"M264.75,59.34V87.86c-6.47,6.35-29.85,29.93-29.85,29.93h29.85v22.45a14.49,14.49,0,0,0,14.35,14.48l165.48,1.56a14.47,14.47,0,0,0,14.61-14.48V59.34a14.48,14.48,0,0,0-14.48-14.48H279.23A14.48,14.48,0,0,0,264.75,59.34Z",style:{fill:"#fafafa"}}),e.jsx("path",{d:"M264.75,59.34s0-.55.06-1.62a14.69,14.69,0,0,1,1.28-4.58,14.45,14.45,0,0,1,1.84-3,15.57,15.57,0,0,1,3.12-2.88,14.65,14.65,0,0,1,4.5-2.05,20.3,20.3,0,0,1,5.6-.5l67.24-.1,46.43,0,25.87,0H444.6c.59,0,1.19,0,1.78.1a13.38,13.38,0,0,1,1.77.31,14.76,14.76,0,0,1,10.43,9.27,15.07,15.07,0,0,1,.85,3.58c.08,1.24.08,2.45.07,3.67q0,3.65,0,7.33V98.88q0,15.32,0,31.15V142a15.29,15.29,0,0,1-.6,4,14.71,14.71,0,0,1-4.36,6.85,13.65,13.65,0,0,1-3.42,2.29,14.62,14.62,0,0,1-3.94,1.26,20.55,20.55,0,0,1-3.91.2l-3.85,0-7.68-.08-15.2-.14-29.75-.29-56.41-.55-51.3-.51a14.77,14.77,0,0,1-10.74-4.82,15,15,0,0,1-3.86-10.71q0-11.27,0-21.67l.24.24-29.85,0h-.49l.35-.35,29.9-29.89,0,.1c0-9.26.05-16.39.06-21.21,0-2.4,0-4.22,0-5.46s0-1.85,0-1.85,0,.62,0,1.85,0,3.06,0,5.46c0,4.82,0,11.95.07,21.21v0l0,0-29.8,30-.15-.35,29.85,0H265v.24q0,10.39,0,21.67a14.47,14.47,0,0,0,3.74,10.35,14.23,14.23,0,0,0,10.35,4.63l51.3.46,56.4.51,29.76.28,15.2.14,7.67.07,3.86,0a19.18,19.18,0,0,0,3.8-.2,14.22,14.22,0,0,0,11.19-9.93,14.43,14.43,0,0,0,.58-3.86c0-1.33,0-2.66,0-4V98.88q0-15.31,0-30.06,0-3.69,0-7.33c0-1.22,0-2.43-.08-3.6a15,15,0,0,0-.8-3.44,14.17,14.17,0,0,0-10-8.89c-2.23-.59-4.57-.36-6.89-.41h-46.3l-46.43,0L281.15,45a19.83,19.83,0,0,0-5.55.47,14.43,14.43,0,0,0-4.44,2,15.23,15.23,0,0,0-3.1,2.82,14.05,14.05,0,0,0-1.85,2.94A15.4,15.4,0,0,0,264.75,59.34Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M317.31,124.67H314v4.41h-1.73v-4.41h-9.46v-1.25l8.89-11.11h1.92L305,123.14h7.28v-3.88H314v3.88h3.35Z"}),e.jsx("path",{d:"M318.89,120.69c0-5.34,2.8-8.52,6.68-8.52s6.71,3.18,6.71,8.52-2.83,8.53-6.71,8.53S318.89,126,318.89,120.69Zm11.62,0c0-4.48-2-6.94-4.94-6.94s-4.93,2.46-4.93,6.94,2,7,4.93,7S330.51,125.17,330.51,120.69Z"}),e.jsx("path",{d:"M349,124.67h-3.35v4.41h-1.72v-4.41h-9.47v-1.25l8.89-11.11h1.92l-8.58,10.83H344v-3.88h1.68v3.88H349Z"}),e.jsx("path",{d:"M370.32,127.54v1.54H358.46V112.31H370v1.53h-9.73v6h8.67v1.51h-8.67v6.22Z"}),e.jsx("path",{d:"M380.47,116.38V118l-.41,0c-2.63,0-4.24,1.68-4.24,4.65v6.42h-1.7v-12.6h1.63v2.46C376.54,117.27,378.14,116.38,380.47,116.38Z"}),e.jsx("path",{d:"M389.88,116.38V118l-.41,0c-2.63,0-4.24,1.68-4.24,4.65v6.42h-1.7v-12.6h1.63v2.46C386,117.27,387.56,116.38,389.88,116.38Z"}),e.jsx("path",{d:"M391.55,122.78A6.41,6.41,0,1,1,398,129.2,6.2,6.2,0,0,1,391.55,122.78Zm11.09,0a4.69,4.69,0,1,0-4.67,4.91A4.59,4.59,0,0,0,402.64,122.78Z"}),e.jsx("path",{d:"M414.19,116.38V118l-.41,0c-2.64,0-4.24,1.68-4.24,4.65v6.42h-1.7v-12.6h1.63v2.46C410.26,117.27,411.86,116.38,414.19,116.38Z"}),e.jsx("path",{d:"M303.91,84.5c0-7.87,6.13-13.7,14.49-13.7s14.5,5.79,14.5,13.7-6.17,13.7-14.5,13.7S303.91,92.37,303.91,84.5Zm22.78,0A8.29,8.29,0,1,0,318.4,93,8.09,8.09,0,0,0,326.69,84.5Z"}),e.jsx("path",{d:"M335.58,87.56c0-6.13,4.73-10.48,11.2-10.48s11.16,4.35,11.16,10.48S353.25,98,346.78,98,335.58,93.69,335.58,87.56Zm16.38,0c0-3.51-2.23-5.63-5.18-5.63s-5.23,2.12-5.23,5.63,2.27,5.64,5.23,5.64S352,91.08,352,87.56Z"}),e.jsx("path",{d:"M384,87.56C384,94,379.61,98,373.9,98a7.92,7.92,0,0,1-6.13-2.45v9.49h-5.9V77.39h5.64v2.34a7.89,7.89,0,0,1,6.39-2.65C379.61,77.08,384,81.17,384,87.56Zm-6,0c0-3.51-2.23-5.63-5.18-5.63s-5.18,2.12-5.18,5.63,2.23,5.64,5.18,5.64S378.06,91.08,378.06,87.56Z"}),e.jsx("path",{d:"M386,95.85l2-4.24a13.88,13.88,0,0,0,7.08,2c2.72,0,3.74-.72,3.74-1.85,0-3.33-12.29.07-12.29-8.06,0-3.86,3.48-6.59,9.42-6.59a16.79,16.79,0,0,1,7.83,1.78l-2,4.2a11.72,11.72,0,0,0-5.86-1.51c-2.65,0-3.79.83-3.79,1.89,0,3.48,12.3.11,12.3,8.13,0,3.79-3.52,6.47-9.61,6.47A17.51,17.51,0,0,1,386,95.85Z"}),e.jsx("path",{d:"M407.19,94.6a3.64,3.64,0,0,1,7.26,0,3.64,3.64,0,0,1-7.26,0Zm.11-23.34h7l-1.17,17.29h-4.69Z"})]}),e.jsxs("g",{children:[e.jsx("path",{d:"M175.84,45.12h1.32a13.95,13.95,0,0,1,13.95,13.95v3.77a13.95,13.95,0,0,1-13.95,13.95h-1.32a0,0,0,0,1,0,0V45.12A0,0,0,0,1,175.84,45.12Z",transform:"translate(10.33 146.97) rotate(-44.79)",style:{fill:"#455a64"}}),e.jsx("path",{d:"M189.22,77.6h0l-22.33-22.5h0l.93-.93a13.9,13.9,0,0,1,9.85-4.06h.05a13.91,13.91,0,0,1,9.87,4.12l2.66,2.68a14,14,0,0,1-.07,19.77ZM166.94,55.09l22.28,22.44.92-.91a13.93,13.93,0,0,0,.07-19.69l-2.66-2.68a13.81,13.81,0,0,0-9.83-4.11h-.05a13.83,13.83,0,0,0-9.81,4Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M97.86,121.34h1.32a13.95,13.95,0,0,1,13.95,13.95v3.77a14,14,0,0,1-14,14H97.86a0,0,0,0,1,0,0V121.34A0,0,0,0,1,97.86,121.34Z",transform:"translate(276.05 166.43) rotate(137.3)",style:{fill:"#455a64"}}),e.jsx("path",{d:"M111.43,148.25h-.58a13.91,13.91,0,0,1-9.71-4.48L98.59,141a14,14,0,0,1,.79-19.75l1-.91,0,0,21.49,23.29,0,0-1,.9A13.86,13.86,0,0,1,111.43,148.25Zm-12-27A13.93,13.93,0,0,0,98.62,141l2.56,2.77a13.85,13.85,0,0,0,9.68,4.47h.57a13.83,13.83,0,0,0,9.43-3.69l1-.88-21.44-23.24Z",style:{fill:"#263238"}}),e.jsx("rect",{x:"93.19",y:"89.53",width:"2.5",height:"20.69",transform:"translate(-42.59 110.68) rotate(-51.11)",style:{fill:"#455a64"}}),e.jsx("path",{d:"M88.22,88.3a5.1,5.1,0,1,1-7.17.77A5.12,5.12,0,0,1,88.22,88.3Z",style:{fill:"#263238"}}),e.jsx("rect",{x:"102.48",y:"70.93",width:"99.18",height:"74.84",rx:"16.5",transform:"translate(-32.18 138.62) rotate(-44.8)",style:{fill:"#4453FF"}}),e.jsx("polygon",{points:"150.5 57.18 148.29 48.75 142.54 49.7 140.88 43.61 142.76 43.18 144.07 47.61 149.81 46.83 152.21 55.48 150.5 57.18",style:{fill:"#455a64"}}),e.jsx("rect",{x:"101.79",y:"85.29",width:"85.13",height:"30.57",rx:"13.96",transform:"translate(-28.95 130.92) rotate(-44.8)",style:{fill:"#263238"}}),e.jsx("path",{d:"M177.66,95s.12-.16.37-.45a14.86,14.86,0,0,0,1.1-1.33,16.84,16.84,0,0,0,2.93-5.87,18.94,18.94,0,0,0,.67-4.7,18.57,18.57,0,0,0-.9-5.56,17.22,17.22,0,0,0-3.12-5.65l-1.18-1.3-1.28-1.28a26.54,26.54,0,0,0-2.76-2.52A17.67,17.67,0,0,0,166.27,63a17.88,17.88,0,0,0-8.56.5,17.5,17.5,0,0,0-4.12,1.92,21.42,21.42,0,0,0-3.62,3l-7.05,7-31.43,31.23a17.41,17.41,0,0,0-5,10.11,18.06,18.06,0,0,0,.18,5.59,17.88,17.88,0,0,0,3.44,7.41c.59.69,1.17,1.36,1.83,2a30.29,30.29,0,0,0,3.94,3.62,17.35,17.35,0,0,0,19,.87,18.61,18.61,0,0,0,2-1.33c.6-.51,1.19-1,1.74-1.57l3.29-3.25,12-11.85,17.37-17.13L176,96.55l1.24-1.2c.28-.26.44-.39.44-.39s-.13.15-.4.43l-1.21,1.24-4.67,4.7-17.26,17.25-11.93,11.9-3.27,3.26c-.56.55-1.17,1.08-1.77,1.6a19.85,19.85,0,0,1-2,1.38,17.84,17.84,0,0,1-19.52-.86,32.38,32.38,0,0,1-4-3.67c-.65-.63-1.26-1.34-1.87-2a20.56,20.56,0,0,1-1.56-2.33,17.65,17.65,0,0,1-2-5.3,18.52,18.52,0,0,1-.19-5.76,17.85,17.85,0,0,1,5.11-10.4l31.46-31.21,7.07-7a22,22,0,0,1,3.7-3.07,17.72,17.72,0,0,1,20.36.93,26.56,26.56,0,0,1,2.79,2.57l1.27,1.29L179,71.18A17.6,17.6,0,0,1,182.11,77a18.15,18.15,0,0,1,.86,5.65,19.29,19.29,0,0,1-.71,4.76,16.84,16.84,0,0,1-3,5.88,12.48,12.48,0,0,1-1.15,1.29Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M125.76,126.43a78.3,78.3,0,0,1-.39-9,75.7,75.7,0,0,1,.14-9,80.3,80.3,0,0,1,.38,9A79.51,79.51,0,0,1,125.76,126.43Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M134.47,116.72a74.85,74.85,0,0,1-9,.67,81.18,81.18,0,0,1-9,.15,75.16,75.16,0,0,1,9-.67A81,81,0,0,1,134.47,116.72Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M161.4,90.11a78.76,78.76,0,0,1-.39-9,75.37,75.37,0,0,1,.14-9,80.3,80.3,0,0,1,.38,9A79.51,79.51,0,0,1,161.4,90.11Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M170.11,80.4a80.16,80.16,0,0,1-9,.67,76.89,76.89,0,0,1-9,.14,79.21,79.21,0,0,1,9-.66A78.18,78.18,0,0,1,170.11,80.4Z",style:{fill:"#fff"}}),e.jsx("circle",{cx:"140.64",cy:"39.98",r:"5.1",transform:"translate(-0.6 2.18) rotate(-0.89)",style:{fill:"#263238"}}),e.jsx("path",{d:"M156.51,156.68a5.09,5.09,0,0,1-.88-.73c-.55-.49-1.32-1.22-2.27-2.12-1.89-1.8-4.49-4.33-7.32-7.14s-5.38-5.38-7.2-7.27a22.26,22.26,0,0,1-2.81-3.18,11.05,11.05,0,0,1,.84.77l2.23,2.15c2,1.91,4.5,4.41,7.3,7.16s5.39,5.38,7.22,7.25l2.15,2.24A4.71,4.71,0,0,1,156.51,156.68Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M199.82,113.05a4.79,4.79,0,0,1-.88-.73c-.54-.49-1.31-1.21-2.26-2.11-1.9-1.81-4.49-4.33-7.33-7.14s-5.38-5.39-7.19-7.28a22.6,22.6,0,0,1-2.81-3.17,7.79,7.79,0,0,1,.84.76l2.23,2.15,7.3,7.17c2.84,2.81,5.39,5.37,7.22,7.24l2.15,2.24A4.24,4.24,0,0,1,199.82,113.05Z",style:{fill:"#263238"}}),e.jsx("rect",{x:"136.8",y:"116.58",width:"52.15",height:"5.72",transform:"translate(-36.5 151.76) rotate(-45.46)",style:{fill:"#263238"}}),e.jsx("path",{d:"M137.6,142.82a1.1,1.1,0,1,1-1-1.13A1.09,1.09,0,0,1,137.6,142.82Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M145.94,151.63a1.1,1.1,0,0,1-2.19-.09,1.1,1.1,0,0,1,2.19.09Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M186.62,92.91a1.1,1.1,0,0,1-1.14,1,1.1,1.1,0,1,1,.09-2.19A1.08,1.08,0,0,1,186.62,92.91Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M195,101.72a1.09,1.09,0,1,1-2.18-.09,1.09,1.09,0,1,1,2.18.09Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M105.45,144a27.16,27.16,0,0,0-2.31-2.05c-.75-.59-1.7-1.23-2.67-2.09a10.37,10.37,0,0,1-2.54-3.34,11.3,11.3,0,0,1-.79-7.48,8.89,8.89,0,0,1,.82-2.15c.28-.47.44-.72.47-.7a22.92,22.92,0,0,0-.93,2.93,11.54,11.54,0,0,0,.9,7.17c1.2,2.66,3.53,4.12,5,5.37A7,7,0,0,1,105.45,144Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M148.92,63.53c.1.1-10.41,10.48-23.47,23.17s-23.75,22.91-23.85,22.81S112,99,125.08,86.33,148.82,63.43,148.92,63.53Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M83.92,95.87c0,.06-.52,0-1.19-.45a4.1,4.1,0,0,1-1.2-5.6c.44-.69.88-.95.92-.9s-.28.41-.59,1.07a4.45,4.45,0,0,0-.36,2.76A4.4,4.4,0,0,0,83,95.13C83.51,95.61,84,95.79,83.92,95.87Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M139.46,43.69c0,.06-.57,0-1.28-.51a4.16,4.16,0,0,1-.78-6c.56-.67,1.08-.88,1.11-.83s-.37.38-.81,1a4.18,4.18,0,0,0,.71,5.55C139,43.42,139.49,43.61,139.46,43.69Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M177.32,51.71a22.58,22.58,0,0,0-4.11.94,23.1,23.1,0,0,0-3.63,2.13A6.58,6.58,0,0,1,173,52.16,6.69,6.69,0,0,1,177.32,51.71Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M135.81,158.46a103.24,103.24,0,0,1-7.47-7.35c-4-4.16-7.19-7.61-7.08-7.71s3.44,3.19,7.46,7.35S135.91,158.36,135.81,158.46Z",style:{fill:"#fff"}}),e.jsx("rect",{x:"208.44",y:"398.62",width:"42.79",height:"60.65",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M208.77,458.23h42.14a5.7,5.7,0,0,1,5.7,5.7v.54a0,0,0,0,1,0,0H203.06a0,0,0,0,1,0,0v-.54A5.7,5.7,0,0,1,208.77,458.23Z",style:{fill:"#263238"}}),e.jsx("rect",{x:"198.18",y:"464.47",width:"64.99",height:"9.88",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M251,452.61c0,.14-9.48.26-21.18.26s-21.19-.12-21.19-.26,9.48-.26,21.19-.26S251,452.46,251,452.61Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M251,445.39c0,.15-9.48.26-21.18.26s-21.19-.11-21.19-.26,9.48-.26,21.19-.26S251,445.25,251,445.39Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M251,438.31c0,.14-9.48.26-21.18.26s-21.19-.12-21.19-.26,9.48-.26,21.19-.26S251,438.17,251,438.31Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M251,431.1c0,.14-9.48.26-21.18.26s-21.19-.12-21.19-.26,9.48-.26,21.19-.26S251,431,251,431.1Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M251,424c0,.15-9.48.26-21.18.26s-21.19-.11-21.19-.26,9.48-.26,21.19-.26S251,423.87,251,424Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M251,416.8c0,.15-9.48.26-21.18.26s-21.19-.11-21.19-.26,9.48-.26,21.19-.26S251,416.66,251,416.8Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M251,409.72c0,.14-9.48.26-21.18.26s-21.19-.12-21.19-.26,9.48-.26,21.19-.26S251,409.57,251,409.72Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M251,402.51c0,.14-9.48.26-21.18.26s-21.19-.12-21.19-.26,9.48-.26,21.19-.26S251,402.36,251,402.51Z",style:{fill:"#263238"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("polygon",{points:"208.44 407.07 251.02 405.89 251.02 399.71 208.06 399.71 208.44 407.07"})}),e.jsx("rect",{x:"275.46",y:"398.62",width:"42.79",height:"60.65",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M275.79,458.23h42.14a5.7,5.7,0,0,1,5.7,5.7v.54a0,0,0,0,1,0,0H270.08a0,0,0,0,1,0,0v-.54A5.7,5.7,0,0,1,275.79,458.23Z",style:{fill:"#263238"}}),e.jsx("rect",{x:"265.2",y:"464.47",width:"64.99",height:"9.88",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M318,452.61c0,.14-9.48.26-21.18.26s-21.19-.12-21.19-.26,9.48-.26,21.19-.26S318,452.46,318,452.61Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M318,445.39c0,.15-9.48.26-21.18.26s-21.19-.11-21.19-.26,9.48-.26,21.19-.26S318,445.25,318,445.39Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M318,438.31c0,.14-9.48.26-21.18.26s-21.19-.12-21.19-.26,9.48-.26,21.19-.26S318,438.17,318,438.31Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M318,431.1c0,.14-9.48.26-21.18.26s-21.19-.12-21.19-.26,9.48-.26,21.19-.26S318,431,318,431.1Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M318,424c0,.15-9.48.26-21.18.26s-21.19-.11-21.19-.26,9.48-.26,21.19-.26S318,423.87,318,424Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M318,416.8c0,.15-9.48.26-21.18.26s-21.19-.11-21.19-.26,9.48-.26,21.19-.26S318,416.66,318,416.8Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M318,409.72c0,.14-9.48.26-21.18.26s-21.19-.12-21.19-.26,9.48-.26,21.19-.26S318,409.57,318,409.72Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M318,402.51c0,.14-9.48.26-21.18.26s-21.19-.12-21.19-.26,9.48-.26,21.19-.26S318,402.36,318,402.51Z",style:{fill:"#263238"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("polygon",{points:"275.46 407.07 318.04 405.89 318.04 399.71 275.08 399.71 275.46 407.07"})}),e.jsx("path",{d:"M328.17,223.65h4.32a1.83,1.83,0,0,1,1.83,1.83v17.68a0,0,0,0,1,0,0h-8a0,0,0,0,1,0,0V225.49a1.83,1.83,0,0,1,1.83-1.83Z",transform:"translate(23.16 496.55) rotate(-75.83)",style:{fill:"#4453FF"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M328.17,223.65h4.32a1.83,1.83,0,0,1,1.83,1.83v17.68a0,0,0,0,1,0,0h-8a0,0,0,0,1,0,0V225.49a1.83,1.83,0,0,1,1.83-1.83Z",transform:"translate(23.16 496.55) rotate(-75.83)"})}),e.jsx("path",{d:"M323.82,237.7h5.94a3,3,0,0,1,3,3v16.47a0,0,0,0,1,0,0h-12a0,0,0,0,1,0,0V240.74A3,3,0,0,1,323.82,237.7Z",transform:"translate(6.87 503.72) rotate(-75.83)",style:{fill:"#4453FF"}}),e.jsx("rect",{x:"324.34",y:"237.02",width:"20.39",height:"7.7",transform:"translate(19.11 506.26) rotate(-75.83)",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M345.68,310.42s31.95-1.3,29.31-31.92c-2-23.45-36.91-23.66-36.91-23.66L347,235.35s40.76,3.55,48.81,33.23c9.09,33.54-11.93,60.89-50.13,60.25Z",style:{fill:"#4453FF"}}),e.jsx("rect",{x:"334.32",y:"230.94",width:"12.44",height:"27.68",transform:"translate(60.85 -67.72) rotate(12.46)",style:{fill:"#263238"}}),e.jsx("path",{d:"M344.16,256.78c0,.23-2.76-.24-6.05-1a35.59,35.59,0,0,1-5.91-1.64,37.84,37.84,0,0,1,6,1.13c1.65.38,3.14.74,4.21,1l1.27.34A2.12,2.12,0,0,1,344.16,256.78Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M345.23,251.91c0,.23-2.75-.24-6.05-1a34.18,34.18,0,0,1-5.9-1.64,38.26,38.26,0,0,1,6,1.13c1.65.38,3.13.74,4.21,1l1.26.34A1.7,1.7,0,0,1,345.23,251.91Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M346.52,247c0,.24-2.76-.23-6-1a35.59,35.59,0,0,1-5.91-1.64,38.05,38.05,0,0,1,6,1.13c1.64.37,3.13.73,4.2,1l1.27.33Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M347.38,242.18c0,.23-2.75-.24-6-1a34.47,34.47,0,0,1-5.91-1.64,38,38,0,0,1,6,1.13c1.65.38,3.13.74,4.21,1l1.26.34A1.7,1.7,0,0,1,347.38,242.18Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M348.63,237.62c0,.24-2.75-.23-6-1a35.59,35.59,0,0,1-5.91-1.64,38,38,0,0,1,6,1.13c1.65.37,3.14.73,4.21,1l1.27.33A3.68,3.68,0,0,1,348.63,237.62Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M352.66,328.63a14.23,14.23,0,0,1-.65-2.7c-.32-1.68-.7-4-1-6.61s-.45-5-.51-6.67a13.76,13.76,0,0,1,0-2.78,14.56,14.56,0,0,1,.34,2.75c.15,1.7.36,4.05.66,6.64s.61,4.92.84,6.61A15.65,15.65,0,0,1,352.66,328.63Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M362.59,327.08a93.17,93.17,0,0,1-2.91-9.54,95,95,0,0,1-2.41-9.69,96,96,0,0,1,2.91,9.55A97.71,97.71,0,0,1,362.59,327.08Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M375.94,322.3a18.68,18.68,0,0,1-1.71-2.65c-1.08-1.8-2.41-4-3.89-6.52l-3.92-6.5a20.32,20.32,0,0,1-1.54-2.75,17.48,17.48,0,0,1,1.85,2.55c1.08,1.62,2.53,3.89,4,6.43s2.85,4.89,3.77,6.61A18.81,18.81,0,0,1,375.94,322.3Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M387.17,313.3c-.1.11-4.07-3-8.88-7s-8.64-7.32-8.55-7.43,4.07,3,8.88,7S387.26,313.18,387.17,313.3Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M394.4,301c-.06.14-4.76-1.7-10.51-4.09s-10.36-4.44-10.3-4.57,4.76,1.7,10.5,4.09S394.45,300.82,394.4,301Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M397.94,287.63a24.32,24.32,0,0,1-3.37-.32l-8.08-1-8.09-1a20.82,20.82,0,0,1-3.34-.51,20.89,20.89,0,0,1,3.38.14c2.08.16,4.95.44,8.11.83s6,.8,8.08,1.15A20,20,0,0,1,397.94,287.63Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M396.29,273.81a17.51,17.51,0,0,1-3,1c-1.89.55-4.53,1.23-7.47,1.85s-5.63,1.06-7.58,1.32a17.3,17.3,0,0,1-3.17.27,22.63,22.63,0,0,1,3.12-.64c1.93-.35,4.59-.84,7.52-1.46s5.57-1.24,7.48-1.7A22.07,22.07,0,0,1,396.29,273.81Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M392.27,260.55c.06.13-4.22,2.42-9.57,5.12s-9.74,4.78-9.81,4.65,4.22-2.42,9.57-5.12S392.2,260.43,392.27,260.55Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M384,249.8c.09.11-3.47,3.33-8,7.2s-8.2,6.91-8.29,6.8,3.46-3.33,8-7.2S383.94,249.69,384,249.8Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M370.13,241.82c.12.07-2.13,4-5,8.83a97,97,0,0,1-5.48,8.57c-.12-.07,2.13-4,5-8.84A100,100,0,0,1,370.13,241.82Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M357.68,236.82a102.11,102.11,0,0,1-3,9.86c-1.78,5.4-3.34,9.74-3.47,9.7a98.49,98.49,0,0,1,3-9.87A99.79,99.79,0,0,1,357.68,236.82Z",style:{fill:"#263238"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M372.68,294.18a24.63,24.63,0,0,1-11.58,11.88,36.5,36.5,0,0,1-7.84,3.06c6.11,3.26,14.09,1.31,19.43-3.1s8.16-11.41,8.35-18.34a21.73,21.73,0,0,0-1.73-9.6c-1.36-3-3.61-6.12-6.58-7.5a18.45,18.45,0,0,1,1.86,5.25A30.68,30.68,0,0,1,372.68,294.18Z"})}),e.jsx("path",{d:"M137.83,348.12a8.6,8.6,0,0,1,1,1.11c.62.73,1.46,1.82,2.46,3.21A70.45,70.45,0,0,1,147.9,364a68.72,68.72,0,0,1,4.29,12.63c.39,1.66.65,3,.79,4a9.26,9.26,0,0,1,.17,1.48,7.49,7.49,0,0,1-.37-1.44c-.2-.93-.52-2.27-.94-3.91a82,82,0,0,0-4.41-12.51A81.16,81.16,0,0,0,141,352.65c-.95-1.41-1.74-2.53-2.31-3.3A7.57,7.57,0,0,1,137.83,348.12Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M133.58,344.58c.1-.11.57.15,1.06.59s.8.87.71,1-.57-.15-1.06-.59S133.49,344.68,133.58,344.58Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M134.56,341.64c.12-.07.61.52,1.1,1.34s.78,1.53.66,1.6-.62-.52-1.11-1.34S134.43,341.71,134.56,341.64Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M153.06,382.72a5.24,5.24,0,0,1,.15-.8q.21-.85.54-2.28c.47-2,1.14-4.84,1.91-8.39,1.54-7.1,3.41-17,4.78-28,.74-5.48,1-10.8,2.28-15.49a23.67,23.67,0,0,1,2.68-6.31,18.86,18.86,0,0,1,11.72-8.23,15,15,0,0,1,2.32-.35,4.61,4.61,0,0,1,.82,0,6.05,6.05,0,0,1-.81.12,21.6,21.6,0,0,0-2.29.44,19.47,19.47,0,0,0-7.54,3.86,18.55,18.55,0,0,0-3.85,4.4,23.25,23.25,0,0,0-2.59,6.22c-1.24,4.62-1.49,9.93-2.22,15.43-1.38,11-3.31,20.89-4.94,28-.82,3.55-1.55,6.4-2.07,8.36q-.4,1.41-.63,2.25A4.88,4.88,0,0,1,153.06,382.72Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M154.25,303.42a16,16,0,0,0,2.55,3.72,16.81,16.81,0,0,0,9.61,4.68,36.36,36.36,0,0,0,10.92-.46l3.29-.58a6.67,6.67,0,0,1,1.22-.16,5.25,5.25,0,0,1-1.18.36c-.77.19-1.88.46-3.27.74a32.92,32.92,0,0,1-11,.61,16.48,16.48,0,0,1-9.81-4.94,10.79,10.79,0,0,1-1.88-2.81A4,4,0,0,1,154.25,303.42Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M150.45,300.26c.1-.1.58.21,1.06.7s.8,1,.7,1.06-.58-.21-1.06-.69S150.35,300.36,150.45,300.26Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M151.58,298.52c.13-.08.58.43,1,1.13s.69,1.34.56,1.41-.57-.43-1-1.13S151.46,298.59,151.58,298.52Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M154.71,298.29c.15,0,.17.61.06,1.32s-.32,1.25-.46,1.23-.17-.61-.06-1.32S154.57,298.27,154.71,298.29Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M164.13,337.34a10.35,10.35,0,0,1-.08,1.78c-.09,1.15-.26,2.8-.5,4.83-.47,4.08-1.3,9.68-2.55,15.81s-2.69,11.62-3.84,15.56c-.58,2-1.08,3.55-1.44,4.63a12.65,12.65,0,0,1-.62,1.67,13.26,13.26,0,0,1,.42-1.73c.33-1.18.76-2.76,1.28-4.67,1.06-4,2.44-9.44,3.69-15.56s2.13-11.7,2.7-15.75c.27-2,.49-3.59.65-4.81A14.78,14.78,0,0,1,164.13,337.34Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M181.86,314.19c0,.1-1.43.11-3.64.69a18.05,18.05,0,0,0-12.54,11.58c-.76,2.15-.88,3.59-1,3.57a2.79,2.79,0,0,1,0-1,15,15,0,0,1,.58-2.68,17.37,17.37,0,0,1,12.8-11.82,15.36,15.36,0,0,1,2.72-.37A3.48,3.48,0,0,1,181.86,314.19Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M157.8,382.51a5.24,5.24,0,0,1,0-.75c0-.49.12-1.22.25-2.15a20,20,0,0,1,2.37-7.57c.84-1.47,2-2.91,2.94-4.61a9.67,9.67,0,0,0,1-2.78,11.45,11.45,0,0,0,.08-3.16c-.16-2.17-.79-4.51-.3-7a8.54,8.54,0,0,1,1.6-3.39c.73-1,1.58-2,2.25-3a6.36,6.36,0,0,0,1.12-3.41,14.83,14.83,0,0,0-.48-3.57,21.11,21.11,0,0,1-.58-7,19.9,19.9,0,0,1,10.54-15.89,17.52,17.52,0,0,1,2-.88,4.26,4.26,0,0,1,.72-.23,3.85,3.85,0,0,1-.68.32c-.45.21-1.11.51-1.92,1a20.47,20.47,0,0,0-5.95,5.08,19.71,19.71,0,0,0-4.21,10.67,20.85,20.85,0,0,0,.6,6.82,15.28,15.28,0,0,1,.5,3.69,6.87,6.87,0,0,1-1.21,3.68c-.7,1.11-1.55,2.05-2.26,3.05a7.83,7.83,0,0,0-1.52,3.19c-.47,2.31.12,4.62.28,6.84a12,12,0,0,1-.11,3.29,10.21,10.21,0,0,1-1.11,2.9c-1,1.74-2.16,3.16-3,4.59a20.78,20.78,0,0,0-2.48,7.42c-.15.88-.26,1.59-.35,2.12A3.76,3.76,0,0,1,157.8,382.51Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M183,324.55a9.45,9.45,0,0,0-2.46.35,9.77,9.77,0,0,0-5.17,4.13c-1.6,2.39-2.31,5.82-2.69,9.6A121.14,121.14,0,0,1,170.89,351a200.58,200.58,0,0,1-6,21.82c-.9,2.75-1.65,5-2.19,6.49-.25.72-.46,1.3-.62,1.75a2.49,2.49,0,0,1-.26.6A4.25,4.25,0,0,1,162,381c.13-.46.31-1.05.53-1.78l2-6.54c1.69-5.53,4-13.18,5.8-21.82.88-4.31,1.46-8.46,1.86-12.27s1.17-7.3,2.87-9.74a9.74,9.74,0,0,1,5.42-4.12,6.25,6.25,0,0,1,1.86-.23A4.13,4.13,0,0,1,183,324.55Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M146.29,378.93h19.37s-11.75,93.29-76.61,93l.83-18.19S134,451,146.29,378.93Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M70.7,442.54H75a1.83,1.83,0,0,1,1.83,1.83V462a0,0,0,0,1,0,0h-8a0,0,0,0,1,0,0V444.37A1.83,1.83,0,0,1,70.7,442.54Z",transform:"translate(-380.65 517.19) rotate(-88.99)",style:{fill:"#4453FF"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M70.7,442.54H75a1.83,1.83,0,0,1,1.83,1.83V462a0,0,0,0,1,0,0h-8a0,0,0,0,1,0,0V444.37A1.83,1.83,0,0,1,70.7,442.54Z",transform:"translate(-380.65 517.19) rotate(-88.99)"})}),e.jsx("path",{d:"M69.64,457h5.94a3,3,0,0,1,3,3v16.47a0,0,0,0,1,0,0h-12a0,0,0,0,1,0,0V460.06A3,3,0,0,1,69.64,457Z",transform:"matrix(0.02, -1, 1, 0.02, -395.38, 531.17)",style:{fill:"#4453FF"}}),e.jsx("rect",{x:"68.46",y:"454.75",width:"20.39",height:"7.7",transform:"translate(-381.26 529.18) rotate(-88.99)",style:{fill:"#4453FF"}}),e.jsx("rect",{x:"79.17",y:"447.2",width:"12.44",height:"27.68",transform:"translate(-5.62 1.08) rotate(-0.7)",style:{fill:"#263238"}}),e.jsx("path",{d:"M91.64,471.9c0,.23-2.74.4-6.11.42a34.37,34.37,0,0,1-6.13-.26,38.67,38.67,0,0,1,6.12-.27c1.69,0,3.22,0,4.33,0l1.31,0A2.44,2.44,0,0,1,91.64,471.9Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M91.58,466.92c0,.23-2.74.39-6.11.41a35,35,0,0,1-6.13-.25,38.67,38.67,0,0,1,6.12-.27c1.69,0,3.22,0,4.33,0l1.31,0A1.75,1.75,0,0,1,91.58,466.92Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M91.72,461.89c0,.23-2.73.39-6.11.41a34.92,34.92,0,0,1-6.12-.25,38.67,38.67,0,0,1,6.12-.27c1.69,0,3.22,0,4.32,0l1.31,0A2,2,0,0,1,91.72,461.89Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M91.46,457c0,.23-2.74.4-6.12.42a34.29,34.29,0,0,1-6.12-.26,38.67,38.67,0,0,1,6.12-.27c1.69,0,3.22,0,4.33,0l1.31,0A2.57,2.57,0,0,1,91.46,457Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M91.64,452.23c0,.23-2.74.4-6.11.42a36.2,36.2,0,0,1-6.13-.25,36,36,0,0,1,6.12-.27c1.69,0,3.22,0,4.33,0l1.31,0A2.44,2.44,0,0,1,91.64,452.23Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M98.44,471s0,.16.06.5l0,.58-.17-.56a83.2,83.2,0,0,1-1.91-9.16c-.43-2.69-.72-5.13-.89-6.91a14.66,14.66,0,0,1-.13-2.89,18.89,18.89,0,0,1,.5,2.85c.25,1.76.6,4.19,1,6.87.69,4.34,1.4,8,1.55,9.2l-.16,0C98.38,471.14,98.41,471,98.44,471Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M107.64,469.21a92.86,92.86,0,0,1-3.22-9.42,92.86,92.86,0,0,1-2.73-9.57,92.86,92.86,0,0,1,3.22,9.42A92.86,92.86,0,0,1,107.64,469.21Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M118.51,464.62a98.81,98.81,0,0,1-4.78-9.06c-2.5-5.08-4.43-9.24-4.3-9.3a99.8,99.8,0,0,1,4.77,9.07C116.71,460.4,118.63,464.56,118.51,464.62Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M128.14,457.42a91.87,91.87,0,0,1-6.18-7.91,98.59,98.59,0,0,1-5.77-8.23,96.34,96.34,0,0,1,6.19,7.92C125.67,453.66,128.25,457.34,128.14,457.42Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M136.55,449.44a93.69,93.69,0,0,1-7.2-6.85,96.19,96.19,0,0,1-6.82-7.22,94.54,94.54,0,0,1,7.19,6.85A97.73,97.73,0,0,1,136.55,449.44Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M143.48,439.86a14.64,14.64,0,0,1-2.51-1.34l-5.92-3.46-5.91-3.45a15.52,15.52,0,0,1-2.41-1.53,15.05,15.05,0,0,1,2.58,1.21c1.56.81,3.69,2,6,3.32s4.37,2.64,5.84,3.6A15.72,15.72,0,0,1,143.48,439.86Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M148.17,430.16a13.82,13.82,0,0,1-2.43-1.09c-1.47-.72-3.51-1.71-5.77-2.76s-4.34-1.95-5.84-2.61a15.48,15.48,0,0,1-2.41-1.14,11.93,11.93,0,0,1,2.54.8c1.54.57,3.65,1.43,5.93,2.48s4.29,2.1,5.72,2.9A13.26,13.26,0,0,1,148.17,430.16Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M153.77,420.78a13.93,13.93,0,0,1-2.77-.46c-1.7-.37-4-.94-6.57-1.68s-4.82-1.51-6.45-2.11a14.17,14.17,0,0,1-2.59-1.09,16.24,16.24,0,0,1,2.71.74c1.65.51,3.94,1.22,6.47,2s4.84,1.36,6.51,1.82A16.1,16.1,0,0,1,153.77,420.78Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M156.76,411.32a84.29,84.29,0,0,1-9.25-.92,84.45,84.45,0,0,1-9.18-1.43,84.06,84.06,0,0,1,9.25.92A79,79,0,0,1,156.76,411.32Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M159.94,402.07a12.64,12.64,0,0,1-2.69-.08c-1.66-.12-3.95-.32-6.47-.57s-4.81-.51-6.45-.73a13.79,13.79,0,0,1-2.66-.45,14.26,14.26,0,0,1,2.7.09c1.66.12,3.94.32,6.46.57s4.8.51,6.45.72A14.83,14.83,0,0,1,159.94,402.07Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M162.39,393.11a92.12,92.12,0,0,1-9.64.56,86.39,86.39,0,0,1-9.65,0,92.12,92.12,0,0,1,9.64-.56A89.44,89.44,0,0,1,162.39,393.11Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M163.4,385.79a13.17,13.17,0,0,1-2.64.41c-1.64.17-3.91.31-6.42.32s-4.79-.11-6.43-.26a12.81,12.81,0,0,1-2.64-.38,15,15,0,0,1,2.66,0c1.64.06,3.9.13,6.4.11s4.77-.1,6.4-.17A15,15,0,0,1,163.4,385.79Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M147.13,381.7a.72.72,0,0,1,0,.25v.74c0,.65,0,1.61-.07,2.84a74,74,0,0,1-1.23,10.39,78.32,78.32,0,0,1-4.35,14.89,77.44,77.44,0,0,1-22,30.58,78.86,78.86,0,0,1-12.76,8.83,73.1,73.1,0,0,1-9.47,4.45c-1.14.46-2.06.74-2.67,1l-.7.23a.8.8,0,0,1-.25.06.7.7,0,0,1,.23-.11l.68-.28c.6-.25,1.51-.56,2.64-1a82.14,82.14,0,0,0,9.36-4.58,79.89,79.89,0,0,0,39-54,81.57,81.57,0,0,0,1.39-10.33c.11-1.22.11-2.18.16-2.83,0-.3,0-.54,0-.74A.87.87,0,0,1,147.13,381.7Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M236.92,273s-10.72-14.51-35.53-12.36c0,0,25.25-19.4,10.39-39.33,0,0,31.89,9.42,32.25-30.44,0,0,5.8,37,35.88,26.46,0,0,2.14,29.36,22.95,23.93C292.79,251.16,283,259.89,285,272.55",style:{fill:"#4453FF"}}),e.jsx("g",{style:{opacity:.8},children:e.jsx("path",{d:"M236.92,273s-10.72-14.51-35.53-12.36c0,0,25.25-19.4,10.39-39.33,0,0,31.89,9.42,32.25-30.44,0,0,5.8,37,35.88,26.46,0,0,2.14,29.36,22.95,23.93C292.79,251.16,283,259.89,285,272.55",style:{fill:"#fff"}})}),e.jsx("path",{d:"M236.92,273s-.25-16.92-20.18-15.19c0,0,18.53-10.69,6.6-26.7,0,0,25.62,7.57,25.91-24.45,0,0,4.65,29.69,28.82,21.25,0,0-2.89,21.54,13.84,17.17-8.09,8-11.37,17-9.77,27.2",style:{fill:"#4453FF"}}),e.jsx("g",{style:{opacity:.6000000000000001},children:e.jsx("path",{d:"M236.92,273s-.25-16.92-20.18-15.19c0,0,18.53-10.69,6.6-26.7,0,0,25.62,7.57,25.91-24.45,0,0,4.65,29.69,28.82,21.25,0,0-2.89,21.54,13.84,17.17-8.09,8-11.37,17-9.77,27.2",style:{fill:"#fff"}})}),e.jsx("path",{d:"M269.65,160.76a5.13,5.13,0,0,1-.24.63l-.79,1.76c-.35.76-.77,1.69-1.22,2.8s-1,2.33-1.51,3.74-1.13,2.93-1.68,4.6-1.12,3.46-1.7,5.35c-1.09,3.8-2.13,8-2.95,12.52s-1.3,8.82-1.6,12.76c-.12,2-.25,3.85-.27,5.61s-.05,3.4,0,4.89.08,2.85.12,4,.1,2.21.17,3,.09,1.43.12,1.92a3,3,0,0,1,0,.68,5.34,5.34,0,0,1-.11-.67q-.07-.74-.21-1.92c-.1-.83-.2-1.85-.26-3s-.18-2.55-.19-4-.08-3.14,0-4.91.12-3.65.22-5.63a113.18,113.18,0,0,1,4.57-25.39c.59-1.89,1.14-3.7,1.75-5.35s1.18-3.2,1.74-4.59,1.12-2.64,1.6-3.73.92-2,1.3-2.77l.87-1.72A3,3,0,0,1,269.65,160.76Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M198.07,153.89a33,33,0,0,0-6-4.49,33.26,33.26,0,0,0-7.06-2.52,6.79,6.79,0,0,1,2.23.22,18.55,18.55,0,0,1,5.08,1.84,18.9,18.9,0,0,1,4.34,3.21A6.55,6.55,0,0,1,198.07,153.89Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M205.75,197.42a2.34,2.34,0,0,1,.42.4l1.11,1.19c1,1,2.31,2.59,3.91,4.56s3.43,4.37,5.36,7.11,3.92,5.86,5.86,9.2,3.62,6.64,5.06,9.67,2.6,5.82,3.5,8.19,1.59,4.31,2,5.66q.28.94.48,1.56a2.26,2.26,0,0,1,.13.56,2.26,2.26,0,0,1-.23-.53l-.58-1.52c-.47-1.33-1.2-3.25-2.15-5.59s-2.16-5.1-3.59-8.12-3.15-6.27-5.08-9.62-3.92-6.42-5.8-9.18-3.69-5.18-5.26-7.16-2.85-3.58-3.77-4.66l-1-1.25A2.44,2.44,0,0,1,205.75,197.42Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M274.51,202.53a1.72,1.72,0,0,1-.21.46l-.67,1.25c-.31.54-.67,1.2-1.06,2s-.87,1.66-1.32,2.67c-1,2-2,4.42-3,7.16a78.08,78.08,0,0,0-4.16,18.47c-.27,2.9-.39,5.53-.38,7.74,0,1.1,0,2.1.05,3s.06,1.63.1,2.25.05,1,.07,1.42a1.37,1.37,0,0,1,0,.5,2.25,2.25,0,0,1-.09-.49c-.05-.38-.1-.85-.17-1.42s-.15-1.37-.19-2.25-.13-1.88-.13-3a71,71,0,0,1,.28-7.79,72.75,72.75,0,0,1,4.18-18.58,70.42,70.42,0,0,1,3.09-7.16c.47-1,1-1.87,1.4-2.65s.8-1.43,1.13-2,.56-.88.76-1.21A2,2,0,0,1,274.51,202.53Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M294.15,206.41c.05.06-.83.71-2.16,1.87a36.84,36.84,0,0,0-8.52,10.7,26.43,26.43,0,0,1-1.35,2.53,11.4,11.4,0,0,1,1-2.7,30.94,30.94,0,0,1,3.68-5.9,30.11,30.11,0,0,1,4.93-4.91A11.07,11.07,0,0,1,294.15,206.41Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M210.65,231.91a11.93,11.93,0,0,1,2.44,1.53,34.6,34.6,0,0,1,5.16,4.68,33.84,33.84,0,0,1,4.12,5.61,11.66,11.66,0,0,1,1.27,2.59,27.69,27.69,0,0,1-1.58-2.4,45,45,0,0,0-4.2-5.46,45.57,45.57,0,0,0-5-4.73A22.61,22.61,0,0,1,210.65,231.91Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M205.58,222.61c-.08.14-2.12-1-4.88-1.7s-5.09-.71-5.09-.87a14.5,14.5,0,0,1,10,2.57Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M185,191.31a6.85,6.85,0,0,1,.66-1.66l-.91-1.38,1.9-2,1.41.85a7.26,7.26,0,0,1,1.64-.71l.34-1.61,2.73-.05.39,1.61a7,7,0,0,1,1.66.65l1.38-.9,2,1.9-.86,1.41a6.31,6.31,0,0,1,.71,1.64l1.62.33,0,2.74-1.6.39a6.78,6.78,0,0,1-.66,1.65l.91,1.39-1.9,2L195,198.7a6.25,6.25,0,0,1-1.63.71L193,201l-2.73,0-.39-1.6a6.85,6.85,0,0,1-1.66-.66l-1.38.9-2-1.9.86-1.41a6.25,6.25,0,0,1-.71-1.63l-1.62-.34,0-2.73,1.6-.39Zm3.6,1.55a2.93,2.93,0,1,0,2.88-3A2.93,2.93,0,0,0,188.61,192.86Z",style:{fill:"#4453FF",fillRule:"evenodd"}}),e.jsx("path",{d:"M299.57,265.2a5.17,5.17,0,0,1,.48-1.22l-.67-1,1.41-1.45,1,.63a5.13,5.13,0,0,1,1.2-.52l.25-1.19,2,0,.29,1.19a4.77,4.77,0,0,1,1.22.48l1-.67,1.45,1.41-.63,1a5,5,0,0,1,.52,1.2l1.19.25,0,2-1.19.29a5.17,5.17,0,0,1-.48,1.22l.66,1-1.4,1.45-1-.63a5,5,0,0,1-1.21.52l-.24,1.19-2,0-.29-1.18a5.17,5.17,0,0,1-1.22-.48l-1,.66L299.5,270l.63-1a5,5,0,0,1-.52-1.21l-1.19-.25,0-2,1.19-.29Zm2.66,1.14a2.16,2.16,0,1,0,4.32-.07,2.16,2.16,0,1,0-4.32.07Z",style:{fill:"#455a64",fillRule:"evenodd"}}),e.jsx("rect",{x:"274.18",y:"182.1",width:"10.43",height:"4.72",transform:"translate(-7.11 357.67) rotate(-64.59)",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M275,188.16a10.74,10.74,0,0,1,1.23.49c.76.32,1.83.78,3.11,1.36l-.25.09c1.12-2.45,2.67-5.79,4.41-9.45-.11-.31.15.43.12.35h-.06l-.07,0-.14-.06-.28-.14-.56-.26-1.08-.52-2.06-1,.33-.11c-1.29,2.68-2.45,5-3.28,6.64-.4.76-.73,1.41-1,1.95a4.56,4.56,0,0,1-.41.72,3.13,3.13,0,0,1,.26-.68c.23-.54.52-1.19.85-1.95.75-1.69,1.83-4.1,3.14-6.89l.11-.23.22.11,2.07,1,1.09.51.55.26.28.14.14.06.07,0h.07c0-.08.23.66.12.35-1.74,3.66-3.34,7-4.54,9.39l-.08.17-.17-.09c-1.34-.66-2.41-1.21-3.12-1.59A7.68,7.68,0,0,1,275,188.16Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M283.35,175.75a4.34,4.34,0,0,0-5.79,2.06l7.86,3.74A4.35,4.35,0,0,0,283.35,175.75Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M283.35,175.75a1.2,1.2,0,0,1,.49.18,4.22,4.22,0,0,1,1.12.9,4.28,4.28,0,0,1,1,2,4.45,4.45,0,0,1-.32,2.83l-.09.22-.23-.1-3.93-1.85L277.45,178l-.22-.1.11-.22a4.54,4.54,0,0,1,2-2,4.4,4.4,0,0,1,2.17-.48,3.86,3.86,0,0,1,1.4.3c.31.14.46.24.44.26a8.45,8.45,0,0,0-1.84-.27,4.22,4.22,0,0,0-2,.55,4.16,4.16,0,0,0-1.76,1.89l-.11-.32,3.94,1.85,3.92,1.88-.32.12a4.19,4.19,0,0,0,.36-2.56,4.35,4.35,0,0,0-.83-1.88A8,8,0,0,0,283.35,175.75Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M283.45,178.24a2.74,2.74,0,0,0-.86-2.8",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M282.59,175.44c.07-.13.8.27,1.08,1.2s-.09,1.66-.22,1.6,0-.71-.27-1.45S282.5,175.56,282.59,175.44Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M278.65,180.07a9,9,0,0,1,2.28.94,9.17,9.17,0,0,1,2.23,1.09,4.68,4.68,0,0,1-2.44-.62C279.44,180.91,278.57,180.18,278.65,180.07Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M278.12,181.17a9.71,9.71,0,0,1,2.29,1,9.17,9.17,0,0,1,2.22,1.08,4.52,4.52,0,0,1-2.44-.61C278.92,182,278,181.29,278.12,181.17Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M277.6,182.28a9,9,0,0,1,2.28.94,9.41,9.41,0,0,1,2.23,1.09,4.72,4.72,0,0,1-2.44-.61C278.39,183.12,277.52,182.39,277.6,182.28Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M277.07,183.38a9.71,9.71,0,0,1,2.29,1,9.17,9.17,0,0,1,2.22,1.08,4.52,4.52,0,0,1-2.44-.61C277.87,184.23,277,183.5,277.07,183.38Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M276.54,184.49a9.26,9.26,0,0,1,2.29.94,9.87,9.87,0,0,1,2.23,1.09,7.15,7.15,0,0,1-4.52-2Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M276,185.6a9,9,0,0,1,2.29.94,9.21,9.21,0,0,1,2.22,1.09,7.23,7.23,0,0,1-4.51-2Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M275.49,186.7a9.54,9.54,0,0,1,2.29,1,9.17,9.17,0,0,1,2.22,1.08,4.48,4.48,0,0,1-2.43-.61C276.29,187.55,275.41,186.82,275.49,186.7Z",style:{fill:"#263238"}}),e.jsx("rect",{x:"171.84",y:"261.9",width:"10.43",height:"4.72",transform:"translate(-93.35 96.74) rotate(-24.4)",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M182.77,264.25a11.2,11.2,0,0,1-.62-1.17c-.37-.73-.89-1.77-1.5-3l.25.09c-2.44,1.15-5.78,2.7-9.46,4.37-.12.31.15-.42.13-.34h0v0l0,0,0,.07.06.14.13.28.25.56c.17.37.33.73.5,1.09l.93,2.09-.33-.12c2.73-1.22,5.09-2.23,6.8-3l2-.84a5,5,0,0,1,.78-.29,3,3,0,0,1-.63.36l-1.91.94c-1.66.8-4,1.95-6.85,3.24l-.23.1-.1-.23c-.31-.66-.62-1.36-1-2.07-.17-.36-.33-.73-.5-1.1l-.25-.55-.13-.29-.07-.14,0-.07v-.05h0l.13-.34c3.69-1.68,7.05-3.17,9.53-4.24l.17-.08.08.17c.59,1.38,1.05,2.49,1.35,3.24A5.89,5.89,0,0,1,182.77,264.25Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M168.41,268.36a4.35,4.35,0,0,0,5.76,2.17l-3.6-7.93A4.34,4.34,0,0,0,168.41,268.36Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M168.41,268.36s-.12-.14-.26-.44a4.09,4.09,0,0,1-.27-1.42,4.34,4.34,0,0,1,.52-2.16,4.59,4.59,0,0,1,2.07-2l.22-.1.1.22c.57,1.23,1.18,2.56,1.82,4s1.22,2.73,1.78,4l.1.22-.22.1a4.52,4.52,0,0,1-2.84.26,4.28,4.28,0,0,1-2-1,3.9,3.9,0,0,1-.88-1.13c-.15-.31-.2-.48-.17-.49a7.9,7.9,0,0,0,1.23,1.4,4.26,4.26,0,0,0,4.43.55l-.12.32-1.82-4c-.62-1.4-1.22-2.73-1.78-4l.32.12a4.24,4.24,0,0,0-2.5,3.69A8.47,8.47,0,0,0,168.41,268.36Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M169.94,266.4a2.74,2.74,0,0,0-1.15,2.69",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M168.79,269.09c-.13.06-.44-.73-.06-1.61s1.16-1.21,1.21-1.08-.43.56-.73,1.28S168.94,269.06,168.79,269.09Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M174.79,268.1a9,9,0,0,1-1.14-2.19,9.38,9.38,0,0,1-1-2.27,7.13,7.13,0,0,1,2.14,4.46Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M175.9,267.6a9.58,9.58,0,0,1-1.14-2.2,9.79,9.79,0,0,1-1-2.26c.11-.09.86.77,1.46,2A4.5,4.5,0,0,1,175.9,267.6Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M177,267.09a9.19,9.19,0,0,1-1.14-2.19,9.38,9.38,0,0,1-1-2.27,7.13,7.13,0,0,1,2.14,4.46Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M178.13,266.59a9.85,9.85,0,0,1-1.14-2.2,9.57,9.57,0,0,1-1-2.27,4.67,4.67,0,0,1,1.46,2A4.53,4.53,0,0,1,178.13,266.59Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M179.25,266.08a9.14,9.14,0,0,1-1.14-2.2,9.4,9.4,0,0,1-1-2.26,7.13,7.13,0,0,1,2.14,4.46Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M180.36,265.57a9.37,9.37,0,0,1-1.14-2.19,9.57,9.57,0,0,1-1-2.27,4.67,4.67,0,0,1,1.46,2A4.52,4.52,0,0,1,180.36,265.57Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M181.48,265.07a40.24,40.24,0,0,1-2.14-4.46c.11-.09.87.77,1.47,2A4.61,4.61,0,0,1,181.48,265.07Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M201.52,142.38s12.11,12,15.13,19.43c2.87,7.11,4.77,13.73,4.77,13.73s3.12-5.46,6.63,0,20.1,71.77,22.83,96.73h10.57s-4.92-41.73-7.26-46.41-4.3-6.24-4.3-6.24-2.73-17.56-4.68-20.29a13.16,13.16,0,0,0-4.29-3.9s-3.51-19.11-8.58-23-9-1.95-9-1.95S220.14,150,201.52,142.38Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M300.67,231a55.81,55.81,0,0,0-7,2.38,58.26,58.26,0,0,0-6.41,3.72,6.81,6.81,0,0,1,1.62-1.48,24.09,24.09,0,0,1,9.62-4.37A7.24,7.24,0,0,1,300.67,231Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M300.26,228.86A72.81,72.81,0,0,0,293.2,232c-3.73,2.06-6.28,4.45-6.39,4.32a8.14,8.14,0,0,1,1.6-1.63,28,28,0,0,1,4.54-3.14,26.89,26.89,0,0,1,5.07-2.18A7.88,7.88,0,0,1,300.26,228.86Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M298.21,234c0,.16-2.2.19-4.79.94s-4.49,1.85-4.57,1.72a13.27,13.27,0,0,1,9.36-2.66Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M274.88,272.17c-1.77-14,2.83-30.42,14-38.28l2.66,2.17s-13.91,8.28-12.89,36.21",style:{fill:"#263238"}}),e.jsx("path",{d:"M217.41,252a33.58,33.58,0,0,0-5.37,2.39,34.87,34.87,0,0,0-4.56,3.71,13.8,13.8,0,0,1,9.93-6.1Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M217.13,250.76a51.19,51.19,0,0,1-5.44,2.1,50.87,50.87,0,0,1-5.5,2,24.23,24.23,0,0,1,5.32-2.46A23.76,23.76,0,0,1,217.13,250.76Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M247.94,275.62l-4.84-1.26a10.74,10.74,0,0,0-3.65-11.13,9.21,9.21,0,0,1-5.31,7.13,7.86,7.86,0,0,1-6.65-.42,6.93,6.93,0,0,1-3.63-4.72,7.86,7.86,0,0,1,3.87-8,9.8,9.8,0,0,1,3.66-1.24,3.51,3.51,0,0,0-.36-.29,13.38,13.38,0,0,0-15.08-.41l-2.82-4.13a18.33,18.33,0,0,1,20.94.56,14.92,14.92,0,0,1,4.35,5.22,15.83,15.83,0,0,1,9.52,18.72ZM233,260.83a5.35,5.35,0,0,0-2.76.67,2.93,2.93,0,0,0-1.52,2.75,2.08,2.08,0,0,0,1.09,1.29,2.93,2.93,0,0,0,2.37.2,4.5,4.5,0,0,0,2.32-4.58l0-.2A8.44,8.44,0,0,0,233,260.83Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M207.34,182.76a7.84,7.84,0,0,1,1.34.71c.85.48,2,1.24,3.48,2.23a61.07,61.07,0,0,1,4.85,3.78,62,62,0,0,1,10.07,11.14,58.32,58.32,0,0,1,3.27,5.19c.85,1.53,1.49,2.79,1.88,3.69a7.7,7.7,0,0,1,.57,1.4,8,8,0,0,1-.75-1.31c-.45-.87-1.13-2.1-2-3.59s-2-3.24-3.34-5.11a67.21,67.21,0,0,0-10-11C215,188.33,213.35,187,212,186s-2.56-1.83-3.38-2.36A8.61,8.61,0,0,1,207.34,182.76Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M190.42,294.18h.85a0,0,0,0,1,0,0v50.51a0,0,0,0,1,0,0h-.85a9,9,0,0,1-9-9V303.14A9,9,0,0,1,190.42,294.18Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M335.87,294.18h.94a8.88,8.88,0,0,1,8.88,8.88v32.76a8.88,8.88,0,0,1-8.88,8.88h-.94a0,0,0,0,1,0,0V294.18A0,0,0,0,1,335.87,294.18Z",style:{fill:"#263238"}}),e.jsx("rect",{x:"188.69",y:"284.32",width:"149.39",height:"109.99",rx:"14.12",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M282.39,296a34.23,34.23,0,0,0-34.23,34.23h68.47A34.23,34.23,0,0,0,282.39,296Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M310,328.58c1.44,0,2.74,0,3.68,0a6.73,6.73,0,0,1,1.53.1,7.86,7.86,0,0,1-1.52.11c-1,0-2.25,0-3.69,0l-3.68,0-1.12,0a1.75,1.75,0,0,1-.41,0,1.26,1.26,0,0,1,.41,0l1.12-.05Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M307.58,318.23c2.6-1.24,4.76-2.11,4.83-2s-2,1.24-4.62,2.41a34.84,34.84,0,0,1-4.83,2A35,35,0,0,1,307.58,318.23Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M301.16,309.77c1.9-2.16,3.54-3.82,3.67-3.71s-1.35,1.93-3.29,4.05a33.89,33.89,0,0,1-3.67,3.7A34.86,34.86,0,0,1,301.16,309.77Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M292,304.36a23,23,0,0,1,2.05-4.79c.16.06-.54,2.28-1.57,5a35.67,35.67,0,0,1-2.06,4.79A34.19,34.19,0,0,1,292,304.36Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M281.51,302.58c0-2.88.08-5.21.25-5.21s.28,2.33.26,5.21a33.85,33.85,0,0,1-.26,5.21A33.18,33.18,0,0,1,281.51,302.58Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M271.05,304.54c-1-2.69-1.74-4.91-1.58-5s1.08,2.08,2,4.79a32.38,32.38,0,0,1,1.58,5A34.94,34.94,0,0,1,271.05,304.54Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M262,310.11c-1.94-2.12-3.42-3.93-3.29-4.05s1.77,1.55,3.67,3.71a34.86,34.86,0,0,1,3.29,4A33.89,33.89,0,0,1,262,310.11Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M255.73,318.7c-2.63-1.18-4.7-2.26-4.63-2.42s2.24.72,4.84,2a35.13,35.13,0,0,1,4.62,2.41A34.91,34.91,0,0,1,255.73,318.7Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M253.55,328.83c-1.44,0-2.74,0-3.69,0a7.86,7.86,0,0,1-1.52-.11,6.73,6.73,0,0,1,1.53-.1c.94,0,2.24,0,3.68,0l3.68.06,1.12.05a1.17,1.17,0,0,1,.4,0,1.6,1.6,0,0,1-.4,0l-1.12,0Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M225.31,302a4.55,4.55,0,1,1-4.55-4.54A4.55,4.55,0,0,1,225.31,302Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M225.31,315.7a4.55,4.55,0,1,1-4.55-4.54A4.55,4.55,0,0,1,225.31,315.7Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M311.43,384.82s0-.29,0-.85,0-1.39,0-2.45c0-2.17,0-5.33-.05-9.38,0-8.13-.06-19.85-.1-34.3l.19.19-93.17.07h0l.26-.26c0,16.57,0,32.46,0,47l-.25-.24,66.92.11,19.3.07,5.16,0,1.34,0h.46l-.43,0h-1.31l-5.11,0-19.25.07-67.08.12H218v-.25c0-14.52,0-30.41,0-47v-.26h.27l93.17.07h.2v.19c-.05,14.5-.08,26.26-.11,34.41,0,4,0,7.19,0,9.34,0,1.05,0,1.86,0,2.42S311.43,384.82,311.43,384.82Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M204.1,394.09H322.67a0,0,0,0,1,0,0v.59a6.23,6.23,0,0,1-6.23,6.23H210.34a6.23,6.23,0,0,1-6.23-6.23v-.59a0,0,0,0,1,0,0Z",style:{fill:"#263238"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M301.47,344.43a2.81,2.81,0,0,0,1.93,3,3.11,3.11,0,0,0,3.39-1.24,3.49,3.49,0,0,0,0-3.67,3.48,3.48,0,0,1-.78,2.35,2.56,2.56,0,0,1-2.26.88,2,2,0,0,1-1.69-1.64"})}),e.jsx("path",{d:"M306.81,343.32a2.77,2.77,0,1,1-2.76-2.76A2.76,2.76,0,0,1,306.81,343.32Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M306.81,343.32a5.24,5.24,0,0,1-.18-.65,2.78,2.78,0,0,0-1-1.4,2.61,2.61,0,0,0-2.42-.32,2.53,2.53,0,0,0,0,4.74,2.61,2.61,0,0,0,2.42-.32,2.78,2.78,0,0,0,1-1.4,6,6,0,0,1,.18-.65s.09.25,0,.7a2.7,2.7,0,0,1-1,1.64,2.92,2.92,0,0,1-2.81.48,3,3,0,0,1,0-5.64,2.92,2.92,0,0,1,2.81.48,2.7,2.7,0,0,1,1,1.64C306.9,343.07,306.84,343.32,306.81,343.32Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M305.32,342.14c.05.14-.6.48-1.21,1.12s-.93,1.29-1.07,1.24,0-.87.7-1.61S305.29,342,305.32,342.14Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M305.32,344.18c-.12.08-.58-.42-1.26-.87s-1.32-.7-1.29-.85.81-.11,1.58.42S305.44,344.12,305.32,344.18Z",style:{fill:"#263238"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M302.76,378.63a2.83,2.83,0,0,0,1.94,3,3.11,3.11,0,0,0,3.39-1.24,3.49,3.49,0,0,0,.05-3.66,3.43,3.43,0,0,1-.79,2.34,2.55,2.55,0,0,1-2.25.88,2,2,0,0,1-1.7-1.63"})}),e.jsx("circle",{cx:"305.35",cy:"377.51",r:"2.76",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M308.11,377.51c-.05,0-.06-.24-.19-.65a2.74,2.74,0,0,0-1-1.4,2.62,2.62,0,0,0-2.42-.32,2.54,2.54,0,1,0,2.42,4.42,2.7,2.7,0,0,0,1-1.4c.13-.4.14-.65.19-.65s.09.25,0,.7a2.74,2.74,0,0,1-1,1.65,2.93,2.93,0,0,1-2.81.47,3,3,0,0,1,0-5.64,3,3,0,0,1,2.81.48,2.7,2.7,0,0,1,1,1.64C308.2,377.27,308.14,377.52,308.11,377.51Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M306.62,376.33c.05.14-.61.48-1.21,1.12s-.93,1.29-1.08,1.25,0-.88.7-1.61S306.59,376.2,306.62,376.33Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M306.62,378.37c-.13.09-.59-.42-1.27-.87s-1.31-.7-1.28-.85.8-.11,1.58.42S306.74,378.31,306.62,378.37Z",style:{fill:"#263238"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M222.38,344.39a2.83,2.83,0,0,0,1.94,3,3.12,3.12,0,0,0,3.39-1.25,3.49,3.49,0,0,0,0-3.66,3.45,3.45,0,0,1-.79,2.35,2.55,2.55,0,0,1-2.25.88,2,2,0,0,1-1.7-1.64"})}),e.jsx("circle",{cx:"224.96",cy:"343.28",r:"2.76",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M227.73,343.28s-.06-.25-.19-.65a2.67,2.67,0,0,0-1-1.4,2.59,2.59,0,0,0-2.41-.32,2.53,2.53,0,0,0,0,4.74,2.62,2.62,0,0,0,2.42-.32,2.7,2.7,0,0,0,1-1.4c.13-.4.14-.65.19-.65a1.21,1.21,0,0,1,0,.7,2.75,2.75,0,0,1-1,1.64,2.93,2.93,0,0,1-2.81.48,3,3,0,0,1,0-5.64,2.93,2.93,0,0,1,2.81.48,2.75,2.75,0,0,1,1,1.64A1.21,1.21,0,0,1,227.73,343.28Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M226.24,342.1c0,.14-.61.48-1.21,1.12s-.93,1.29-1.08,1.24,0-.88.7-1.61S226.21,342,226.24,342.1Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M226.24,344.14c-.13.08-.59-.42-1.27-.87s-1.31-.7-1.28-.85.8-.11,1.58.41S226.36,344.07,226.24,344.14Z",style:{fill:"#263238"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M221.8,378.29a2.8,2.8,0,0,0,1.93,3,3.11,3.11,0,0,0,3.39-1.24,3.47,3.47,0,0,0,0-3.66,3.47,3.47,0,0,1-.78,2.34,2.57,2.57,0,0,1-2.26.89,2,2,0,0,1-1.69-1.64"})}),e.jsx("circle",{cx:"224.38",cy:"377.17",r:"2.76",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M227.14,377.17s0-.24-.18-.65a2.87,2.87,0,0,0-1-1.4,2.61,2.61,0,0,0-2.42-.32,2.54,2.54,0,1,0,2.42,4.42,2.78,2.78,0,0,0,1-1.4,6,6,0,0,1,.18-.65s.09.25,0,.7a2.72,2.72,0,0,1-1,1.65,3,3,0,0,1-2.81.48,3,3,0,0,1,0-5.65,3,3,0,0,1,2.81.48,2.72,2.72,0,0,1,1,1.65C227.23,376.93,227.17,377.18,227.14,377.17Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M225.65,376c0,.14-.6.48-1.21,1.12s-.93,1.29-1.07,1.25,0-.88.7-1.61S225.62,375.86,225.65,376Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M225.65,378c-.12.08-.58-.43-1.26-.88s-1.32-.7-1.29-.85.81-.11,1.58.42S225.77,378,225.65,378Z",style:{fill:"#263238"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M218.25,385.08c10.82,2.35,23.46,2.44,35.15,1.87,5.62-.28,11.79-.63,16.29,2.76,1,.74,2.14,1.71,3.3,1.28,1.68-.63,1.74-3.71,3.54-3.77.9,0,1.59.83,1.88,1.68a13,13,0,0,0,.82,2.56c.46.78,1.55,1.3,2.27.75,1.14-.87-.18-2.74.25-4.11s2.47-1.53,3.85-1,2.72,1.54,4.19,1.32a8.19,8.19,0,0,0,2.83-1.45c2.63-1.61,5.88-1.7,9-1.76,3.25-.05,6.6-.36,9.85-.42Z"})}),e.jsx("path",{d:"M292.77,349.79a2.22,2.22,0,0,1-.51.18,11.73,11.73,0,0,0-1.45.49,22,22,0,0,0-4.88,2.76c-1.95,1.36-4.1,3.24-6.83,4.9a15.6,15.6,0,0,1-4.63,1.93,26.2,26.2,0,0,1-5.34.4c-3.65,0-6.84,1.48-9.6,3s-5.29,2.84-7.26,4.17a26.22,26.22,0,0,0-4.34,3.56c-.93,1-1.36,1.55-1.4,1.52s.08-.16.28-.45a14,14,0,0,1,1-1.21,23.79,23.79,0,0,1,4.28-3.72,78,78,0,0,1,7.24-4.3,33.09,33.09,0,0,1,4.52-2.1,15.5,15.5,0,0,1,5.29-.95,26.23,26.23,0,0,0,5.25-.38,15.77,15.77,0,0,0,4.5-1.84c2.68-1.61,4.87-3.46,6.86-4.79a20.61,20.61,0,0,1,5-2.65,8.71,8.71,0,0,1,1.49-.4A2,2,0,0,1,292.77,349.79Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M269.06,357.71a13,13,0,0,1-2.9-.45,43.59,43.59,0,0,1-6.77-2.1,42.76,42.76,0,0,1-6.34-3.16,12.39,12.39,0,0,1-2.41-1.69,25.49,25.49,0,0,1,2.59,1.37,59.77,59.77,0,0,0,13,5.23A21,21,0,0,1,269.06,357.71Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M284.1,325.07c.77-.41,23.24-7.64,23.24-7.64l-21.48,12Z",style:{fill:"#4453FF"}}),e.jsx("path",{d:"M281.76,322.64a7.6,7.6,0,0,0-7.6,7.6h15.2A7.6,7.6,0,0,0,281.76,322.64Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M205.35,394.09c-.15,0-.26-24.42-.26-54.54s.11-54.55.26-54.55.26,24.42.26,54.55S205.49,394.09,205.35,394.09Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M324.2,394.09c-.15,0-.26-24.42-.26-54.54s.11-54.55.26-54.55.26,24.42.26,54.55S324.34,394.09,324.2,394.09Z",style:{fill:"#263238"}}),e.jsx("circle",{cx:"200.36",cy:"298.63",r:"1.17",style:{fill:"#263238"}}),e.jsx("circle",{cx:"200.36",cy:"320.51",r:"1.17",style:{fill:"#263238"}}),e.jsx("circle",{cx:"200.36",cy:"342.4",r:"1.17",style:{fill:"#263238"}}),e.jsx("circle",{cx:"200.36",cy:"364.29",r:"1.17",style:{fill:"#263238"}}),e.jsx("circle",{cx:"200.36",cy:"386.17",r:"1.17",style:{fill:"#263238"}}),e.jsx("circle",{cx:"330.31",cy:"298.63",r:"1.17",style:{fill:"#263238"}}),e.jsx("circle",{cx:"330.31",cy:"320.51",r:"1.17",style:{fill:"#263238"}}),e.jsx("circle",{cx:"330.31",cy:"342.4",r:"1.17",style:{fill:"#263238"}}),e.jsx("circle",{cx:"330.31",cy:"364.29",r:"1.17",style:{fill:"#263238"}}),e.jsx("circle",{cx:"330.31",cy:"386.17",r:"1.17",style:{fill:"#263238"}}),e.jsx("rect",{x:"234.3",y:"272.27",width:"51.1",height:"12.04",style:{fill:"#455a64"}}),e.jsx("path",{d:"M238,284.32a32.12,32.12,0,0,1-.26-5.82,32,32,0,0,1,.26-5.81,33.09,33.09,0,0,1,.26,5.81A33.25,33.25,0,0,1,238,284.32Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M243.23,284.32a33.25,33.25,0,0,1-.26-5.82,33.09,33.09,0,0,1,.26-5.81,32,32,0,0,1,.26,5.81A32.12,32.12,0,0,1,243.23,284.32Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M248.48,284.32a33.25,33.25,0,0,1-.26-5.82,33.09,33.09,0,0,1,.26-5.81,33.09,33.09,0,0,1,.26,5.81A33.25,33.25,0,0,1,248.48,284.32Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M253.73,284.32a32.12,32.12,0,0,1-.26-5.82,32,32,0,0,1,.26-5.81,33.09,33.09,0,0,1,.26,5.81A33.25,33.25,0,0,1,253.73,284.32Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M259,284.32a33.25,33.25,0,0,1-.26-5.82,33.09,33.09,0,0,1,.26-5.81,32,32,0,0,1,.26,5.81A32.12,32.12,0,0,1,259,284.32Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M264.22,284.32a33.25,33.25,0,0,1-.26-5.82,33.09,33.09,0,0,1,.26-5.81,33.09,33.09,0,0,1,.26,5.81A33.25,33.25,0,0,1,264.22,284.32Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M269.47,284.32a32.12,32.12,0,0,1-.26-5.82,32,32,0,0,1,.26-5.81,33.09,33.09,0,0,1,.26,5.81A33.25,33.25,0,0,1,269.47,284.32Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M274.71,284.32a33.25,33.25,0,0,1-.26-5.82,33.09,33.09,0,0,1,.26-5.81,32,32,0,0,1,.26,5.81A32.12,32.12,0,0,1,274.71,284.32Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M280,284.32a33.25,33.25,0,0,1-.26-5.82,33.09,33.09,0,0,1,.26-5.81,33.09,33.09,0,0,1,.26,5.81A33.25,33.25,0,0,1,280,284.32Z",style:{fill:"#263238"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M345.68,310.42c1.24,6.26,2.39,12.16,3.62,18.42a26.7,26.7,0,0,1-3.62,0c0-6,0-12.41,0-18.41"})}),e.jsx("path",{d:"M192.15,296.05c.14,0,0,18.68-.35,41.71s-.71,41.7-.86,41.7,0-18.67.34-41.71S192,296.05,192.15,296.05Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M213.89,382c-.15,0-.26-9.3-.26-20.77s.11-20.77.26-20.77.26,9.3.26,20.77S214,382,213.89,382Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M312.1,287.68c0,.15-22.93.26-51.2.26s-51.2-.11-51.2-.26,22.92-.26,51.2-.26S312.1,287.54,312.1,287.68Z",style:{fill:"#fff"}})]}),e.jsx("g",{children:e.jsx("path",{d:"M462.62,475.16c0,.14-95.2.26-212.61.26s-212.63-.12-212.63-.26,95.18-.26,212.63-.26S462.62,475,462.62,475.16Z",style:{fill:"#263238"}})})]}),sle=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500",height:400,width:400,children:[e.jsxs("g",{id:"freepik--background-complete--inject-276",children:[e.jsx("path",{d:"M195.29,51.38c.52-3.73-4.76-6.8-8.72-7.12-1.89-.16-3.85.13-5.64-.49-3.87-1.35-5.42-6.36-9.21-8-2.83-1.19-6.08-.13-8.82,1.25s-5.46,3.12-8.52,3.32c-2.66.17-5.56-.82-7.89.48-1.74,1-2.65,3-4.25,4.15a10.12,10.12,0,0,1-5.55,1.51,15.53,15.53,0,0,0-5.73.93c-1.77.81-3.23,2.69-2.86,4.6Z",style:{fill:"#f5f5f5"}}),e.jsx("path",{d:"M460.8,272.09c.86-6.21-7.91-11.32-14.5-11.85-3.14-.26-6.4.22-9.38-.82-6.44-2.24-9-10.57-15.31-13.23-4.7-2-10.12-.21-14.68,2.08s-9.06,5.18-14.16,5.51c-4.43.28-9.24-1.36-13.12.81-2.89,1.61-4.4,4.94-7.06,6.9s-6,2.33-9.24,2.51-6.58.2-9.52,1.55-5.38,4.46-4.77,7.64Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M127.4,120.53c.65-4.75-6.06-8.66-11.1-9.07-2.4-.19-4.89.18-7.17-.62-4.93-1.72-6.9-8.09-11.72-10.12-3.59-1.52-7.74-.16-11.23,1.59s-6.93,4-10.83,4.22c-3.39.21-7.07-1-10,.61-2.21,1.24-3.36,3.78-5.4,5.28s-4.59,1.79-7.07,1.92-5,.16-7.28,1.19-4.11,3.41-3.65,5.84Z",style:{fill:"#f5f5f5"}}),e.jsx("polygon",{points:"392.87 379.38 370.62 475.98 380.03 475.95 402.32 380.29 392.87 379.38",style:{fill:"#e0e0e0"}}),e.jsx("polygon",{points:"433.45 379.38 455.78 475.98 464.72 475.98 443.12 379.38 433.45 379.38",style:{fill:"#e0e0e0"}}),e.jsx("polygon",{points:"377.85 306.83 390.52 373.34 404.91 373.34 391.38 306.83 377.85 306.83",style:{fill:"#e0e0e0"}}),e.jsx("polygon",{points:"157.22 379.38 139.07 475.98 148.31 475.98 167.27 379.38 157.22 379.38",style:{fill:"#e0e0e0"}}),e.jsx("polygon",{points:"195.38 379.38 216.12 475.45 225.25 475.45 205.22 379.38 195.38 379.38",style:{fill:"#e0e0e0"}}),e.jsx("polygon",{points:"142.2 306.83 154.87 373.34 169.26 373.34 155.73 306.83 142.2 306.83",style:{fill:"#e0e0e0"}}),e.jsx("polygon",{points:"113.7 300.79 116.29 312.88 405.34 312.88 401.97 300.79 113.7 300.79",style:{fill:"#ebebeb"}}),e.jsx("polygon",{points:"119.22 324.27 122.28 336.36 409.37 336.36 406.76 324.27 119.22 324.27",style:{fill:"#ebebeb"}}),e.jsx("polygon",{points:"124.93 348.58 127.77 360.67 413.98 360.67 411.27 348.58 124.93 348.58",style:{fill:"#ebebeb"}}),e.jsx("rect",{x:"146.81",y:"373.34",width:"308.63",height:"12.09",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M330.38,223.6a13.6,13.6,0,0,1-11.8-20.37l39-68a13.45,13.45,0,0,1,11.76-6.83h0a13.47,13.47,0,0,1,11.76,6.76l39.4,67.77a13.61,13.61,0,0,1-11.72,20.44l-78.39.24Zm39-91.15h0a9.44,9.44,0,0,0-8.25,4.8l-39,68a9.54,9.54,0,0,0,8.27,14.29h0l78.39-.24A9.54,9.54,0,0,0,417,205l-39.4-67.76A9.44,9.44,0,0,0,369.37,132.45Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M361.72,161.87l1.83,25.37a4.1,4.1,0,0,0,3.89,3.81h0a4.12,4.12,0,0,0,4.31-3.69l2.6-25.53a3.24,3.24,0,0,0-3.29-3.56l-6.19.14A3.23,3.23,0,0,0,361.72,161.87Z",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M374.29,205.27a6.19,6.19,0,1,1-4-7.8A6.19,6.19,0,0,1,374.29,205.27Z",style:{fill:"#ebebeb"}})]}),e.jsx("g",{id:"freepik--Floor--inject-276",children:e.jsx("path",{d:"M469.81,475.86c0,.14-98.42.26-219.8.26S30.19,476,30.19,475.86s98.4-.26,219.82-.26S469.81,475.71,469.81,475.86Z",style:{fill:"#263238"}})}),e.jsxs("g",{id:"freepik--Device--inject-276",children:[e.jsx("path",{d:"M317.52,368.58l-101-.07c-12.14,0-22-10.35-22-23.11l0-266c0-12.76,9.86-23.11,22-23.1l100.95.06c12.15,0,22,10.35,22,23.11l-.05,266C339.52,358.24,329.67,368.58,317.52,368.58Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M317.49,65.78l-19.58,0A5,5,0,0,0,293.16,71v3.73a5,5,0,0,1-4.76,5.22l-38.15,0a5,5,0,0,1-4.75-5.23V71a5,5,0,0,0-4.75-5.22h-24c-8.51,0-15.41,7.25-15.41,16.19l0,259.62c0,8.93,6.89,16.18,15.39,16.19l100.76.06c8.51,0,15.41-7.24,15.41-16.18L332.88,82C332.88,73,326,65.78,317.49,65.78Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M228.8,333.27v6.35a.7.7,0,0,1-1.07.59l-5-3.18a.7.7,0,0,1,0-1.18l5-3.18A.7.7,0,0,1,228.8,333.27Z",style:{fill:"#e0e0e0"}}),e.jsx("path",{d:"M269.86,336.38a4.38,4.38,0,1,1-4.38-4.39A4.39,4.39,0,0,1,269.86,336.38Z",style:{fill:"#e0e0e0"}}),e.jsx("rect",{x:"301.32",y:"332.56",width:"8.08",height:"8.1",rx:"1.87",style:{fill:"#e0e0e0"}}),e.jsx("circle",{cx:"267.44",cy:"180.47",r:"49.74",transform:"translate(29.23 398.07) rotate(-76.42)",style:{fill:"#f5f5f5"}}),e.jsx("path",{d:"M269.67,202.38a4.11,4.11,0,1,1-4.09-4.12A4.12,4.12,0,0,1,269.67,202.38Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M257.35,197.1a11.39,11.39,0,0,1,16.48-.22c2.1,2.12,5.38-1.13,3.28-3.25a16.07,16.07,0,0,0-23,.19c-2.05,2.15,1.2,5.44,3.26,3.28Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M243.39,178c6.25-5.4,13.71-8.8,22.06-8.82A32.7,32.7,0,0,1,288,177.76c2.16,2,5.45-1.21,3.28-3.25a37.55,37.55,0,0,0-25.78-10c-9.61,0-18.15,4-25.34,10.17-2.25,1.95,1,5.22,3.26,3.28Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M248.9,188.57a22.6,22.6,0,0,1,33.23-.47c2.08,2.13,5.36-1.12,3.28-3.26a27.23,27.23,0,0,0-39.77.45c-2,2.18,1.23,5.47,3.26,3.28Z",style:{fill:"#455a64"}}),e.jsx("circle",{cx:"291.96",cy:"167.08",r:"12.61",transform:"translate(76.6 425.49) rotate(-79.97)",style:{fill:"#407BFF"}}),e.jsx("rect",{x:"291.01",y:"161.01",width:"2.53",height:"11.33",transform:"translate(203.46 -157.85) rotate(45)",style:{fill:"#fff"}}),e.jsx("rect",{x:"291.01",y:"161.01",width:"2.53",height:"11.33",transform:"translate(-32.25 255.48) rotate(-45)",style:{fill:"#fff"}}),e.jsx("path",{d:"M264.11,93.55a8.36,8.36,0,0,1,2-.87l.41-2,3.33-.06.48,2a8.17,8.17,0,0,1,2,.8L274,92.3l2.4,2.32-1.05,1.72a8.36,8.36,0,0,1,.87,2l2,.41.06,3.34-2,.47a8.14,8.14,0,0,1-.79,2l1.1,1.68-2.31,2.4-1.72-1a8.39,8.39,0,0,1-2,.86l-.41,2-3.33.06-.48-2a8.34,8.34,0,0,1-2-.8l-1.69,1.1-2.4-2.31,1.05-1.72a8.25,8.25,0,0,1-.87-2l-2-.41-.06-3.33,2-.48a8.31,8.31,0,0,1,.79-2l-1.1-1.69,2.32-2.39,1.72,1ZM265.88,98a3.58,3.58,0,1,0,5.06-.09A3.58,3.58,0,0,0,265.88,98Z",style:{fill:"#e0e0e0"}}),e.jsx("path",{d:"M221.82,101c-1,0-2.39,0-3.72,0-1.59,0-3.18,0-4.29,0h0a.5.5,0,0,1-.5-.5.49.49,0,0,1,.49-.5c1.11,0,2.72,0,4.32,0s3.18.06,4.29,0h0a.49.49,0,0,1,.5.49.5.5,0,0,1-.49.51Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M216.85,104.36a.51.51,0,0,1-.37-.17l-3-3.43a.52.52,0,0,1,0-.68l3-3.12a.5.5,0,1,1,.72.69l-2.65,2.79,2.74,3.09a.5.5,0,0,1-.38.83Z",style:{fill:"#263238"}}),e.jsx("circle",{cx:"319.93",cy:"96.54",r:"1.55",style:{fill:"#263238"}}),e.jsx("path",{d:"M321.48,101.44a1.56,1.56,0,1,1-1.55-1.55A1.55,1.55,0,0,1,321.48,101.44Z",style:{fill:"#263238"}}),e.jsx("circle",{cx:"319.93",cy:"106.34",r:"1.55",style:{fill:"#263238"}}),e.jsx("path",{d:"M233.76,248.89a49.33,49.33,0,0,1-7.1.26,49.24,49.24,0,0,1-7.09-.26,49.24,49.24,0,0,1,7.09-.26A49.33,49.33,0,0,1,233.76,248.89Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M259.23,265.49c0,.14-8.72.26-19.47.26s-19.47-.12-19.47-.26,8.71-.26,19.47-.26S259.23,265.35,259.23,265.49Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M259.23,282c0,.14-8.72.26-19.47.26s-19.47-.12-19.47-.26,8.71-.26,19.47-.26S259.23,281.84,259.23,282Z",style:{fill:"#263238"}}),e.jsx("rect",{x:"290.23",y:"259.26",width:"26.7",height:"12.45",rx:"6.23",style:{fill:"#ebebeb"}}),e.jsx("path",{d:"M301.6,265.49a5.22,5.22,0,1,1-5.22-5.22A5.22,5.22,0,0,1,301.6,265.49Z",style:{fill:"#e0e0e0"}}),e.jsx("path",{d:"M310.71,288.21H296.46a6.23,6.23,0,0,1-6.23-6.23h0a6.23,6.23,0,0,1,6.23-6.23h14.25a6.23,6.23,0,0,1,6.23,6.23h0A6.23,6.23,0,0,1,310.71,288.21Z",style:{fill:"#ebebeb"}}),e.jsx("circle",{cx:"296.38",cy:"281.98",r:"5.22",style:{fill:"#e0e0e0"}}),e.jsx("path",{d:"M259.23,298.58c0,.15-8.72.26-19.47.26s-19.47-.11-19.47-.26,8.71-.26,19.47-.26S259.23,298.44,259.23,298.58Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M310.71,306.65H296.46a6.22,6.22,0,0,1-6.23-6.22h0a6.23,6.23,0,0,1,6.23-6.23h14.25a6.23,6.23,0,0,1,6.23,6.23h0A6.22,6.22,0,0,1,310.71,306.65Z",style:{fill:"#ebebeb"}}),e.jsx("circle",{cx:"296.38",cy:"300.43",r:"5.22",style:{fill:"#e0e0e0"}})]}),e.jsxs("g",{id:"freepik--Sun--inject-276",children:[e.jsx("circle",{cx:"413.58",cy:"80.66",r:"16.3",transform:"translate(268.04 476.1) rotate(-80.83)",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M411.26,117.11c-.09,0-.17-3-.17-6.73s.08-6.72.17-6.72a64.49,64.49,0,0,1,.17,6.72A64.61,64.61,0,0,1,411.26,117.11Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M401.87,99.87c.08,0-1.45,2.86-3.42,6.27s-3.64,6.15-3.72,6.1,1.45-2.85,3.42-6.27S401.79,99.82,401.87,99.87Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M392.23,93.87a35.87,35.87,0,0,1-3.8,3.24,39.42,39.42,0,0,1-4,3,35.87,35.87,0,0,1,3.8-3.24A37,37,0,0,1,392.23,93.87Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M427.52,110.48a9,9,0,0,1-.43-1.65c-.23-1-.57-2.44-1-4s-.84-2.94-1.15-3.94a8.53,8.53,0,0,1-.46-1.65,8.11,8.11,0,0,1,.69,1.57c.37,1,.83,2.37,1.25,3.93s.71,3,.89,4A8.25,8.25,0,0,1,427.52,110.48Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M444.05,98.75a57.74,57.74,0,0,1-4.82-4,57.16,57.16,0,0,1-4.59-4.24,57.74,57.74,0,0,1,4.82,4A57.16,57.16,0,0,1,444.05,98.75Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M450.38,82.63a13,13,0,0,1-2-.28c-1.21-.2-2.88-.46-4.73-.67s-3.54-.34-4.76-.42a12.15,12.15,0,0,1-2-.17,10,10,0,0,1,2-.07c1.23,0,2.93.11,4.79.32s3.54.51,4.74.77A11,11,0,0,1,450.38,82.63Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M450.4,66.78c0,.1-3.5,1-7.88,2.1s-7.94,1.85-8,1.76,3.51-1,7.88-2.09S450.38,66.69,450.4,66.78Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M432,48.32c.07,0-1.61,2.74-3.77,6s-4,5.88-4.06,5.82,1.61-2.74,3.77-6A69.81,69.81,0,0,1,432,48.32Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M413.71,44.46a16,16,0,0,1,0,2.24c0,1.38,0,3.28,0,5.38s0,4,.06,5.4a15.82,15.82,0,0,1,0,2.23,12.59,12.59,0,0,1-.23-2.22c-.08-1.38-.15-3.29-.15-5.4s.06-4,.14-5.4A12.35,12.35,0,0,1,413.71,44.46Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M399.87,61.69c-.08.05-1.8-2.61-3.83-5.94s-3.63-6.08-3.55-6.13,1.8,2.62,3.84,6S400,61.65,399.87,61.69Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M391.6,68.72a7.69,7.69,0,0,1-1.73-.27c-1.06-.23-2.51-.58-4.1-1s-3-1-4-1.35a8.59,8.59,0,0,1-1.61-.7,9.09,9.09,0,0,1,1.69.48c1,.32,2.45.78,4,1.24s3,.86,4.06,1.14A9.26,9.26,0,0,1,391.6,68.72Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M388,81.24a37.91,37.91,0,0,1-5.2.67,41.62,41.62,0,0,1-5.23.34,38.48,38.48,0,0,1,5.2-.68A42.56,42.56,0,0,1,388,81.24Z",style:{fill:"#407BFF"}})]}),e.jsxs("g",{id:"freepik--plant-2--inject-276",children:[e.jsx("path",{d:"M376.88,371.74l14.58,103.87,3.8.12C392.84,440.45,390.26,404.47,376.88,371.74Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M417.39,366.87C407.2,378,403.1,393.39,400.52,408.28c-3.66,21.11-4,46.05-2.89,67.45l5.32.12A292.89,292.89,0,0,1,417.39,366.87Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M379.56,433.19c-1.17-5.15-2.51-10.38-5.45-14.77-4-5.92-10.43-9.66-16.94-12.58s-13.34-5.24-19.22-9.28c6.56,10.75,21.44,13.61,29,23.67,3.77,5,5.34,11.28,6.81,17.37,3.23,13.28,5.21,24.77,8.43,38h4.32A340.37,340.37,0,0,0,379.56,433.19Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M406.84,475.73s3.65-41.25,6.36-48.83,28.31-28.5,28.07-27.51S422.06,423.27,419.35,428,412,475.73,412,475.73Z",style:{fill:"#455a64"}})]}),e.jsxs("g",{id:"freepik--plant-1--inject-276",children:[e.jsx("path",{d:"M285.82,432.59a8.08,8.08,0,0,1,4.49,4.47,14.33,14.33,0,0,1,1,6.39c-.21,4.2-2.3,8.57-4.64,12.07-3.71-2.84-4.86-8.13-5.28-10.86-.66-4.3.76-12.48,4.45-12.07",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M291.18,462.13a6.91,6.91,0,0,1,1.81-6.7,9.13,9.13,0,0,1,6.61-2.54,3.88,3.88,0,0,1,3,1.13,2.94,2.94,0,0,1,.24,3,5.92,5.92,0,0,1-2.07,2.32c-2.92,2.11-6.13,3.61-9.64,2.8",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M287.51,475.21a5.43,5.43,0,0,1,.07-.86c.07-.61.16-1.4.27-2.34a24.48,24.48,0,0,1,1.91-7.56,14.87,14.87,0,0,1,4.95-6,10.13,10.13,0,0,1,2.1-1.09,4.6,4.6,0,0,1,.61-.2l.22-.05a16.29,16.29,0,0,0-2.81,1.52,15.39,15.39,0,0,0-4.79,5.94,26,26,0,0,0-2,7.46c-.15,1-.27,1.78-.37,2.33A4.14,4.14,0,0,1,287.51,475.21Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M285.28,438.91a1.47,1.47,0,0,1,.07.37l.13,1.07c.12.94.26,2.28.42,3.95.33,3.34.71,7.95,1,13.05s.49,9.73.57,13.08c0,1.68.06,3,.06,4v1.08c0,.25,0,.38,0,.38a2.28,2.28,0,0,1,0-.38l-.05-1.08c0-1-.09-2.31-.16-4-.14-3.35-.34-8-.65-13.07s-.66-9.71-.93-13.05c-.14-1.64-.24-3-.32-3.95,0-.44-.06-.8-.08-1.08A2.72,2.72,0,0,1,285.28,438.91Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M285.27,465.07a16.14,16.14,0,0,0-9.57-11.24c-1.21-.49-2.77-.76-3.68.18s-.59,2.49,0,3.67a13.82,13.82,0,0,0,13.23,7.74",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M276.52,457.74a4,4,0,0,1,.77.28c.24.1.54.22.87.39s.72.35,1.12.61a12.66,12.66,0,0,1,1.28.84,16.18,16.18,0,0,1,1.38,1.1,17.81,17.81,0,0,1,2.69,3,17.23,17.23,0,0,1,1.88,3.59,16,16,0,0,1,.52,1.68,15.07,15.07,0,0,1,.31,1.51,10.76,10.76,0,0,1,.14,1.26,6.57,6.57,0,0,1,0,1,4.31,4.31,0,0,1,0,.81c-.07,0,0-1.16-.35-3a14,14,0,0,0-.34-1.48,15.94,15.94,0,0,0-.55-1.65,17.92,17.92,0,0,0-1.86-3.52,19,19,0,0,0-2.62-3,16.12,16.12,0,0,0-1.35-1.11c-.42-.34-.86-.6-1.25-.86C277.58,458.22,276.5,457.8,276.52,457.74Z",style:{fill:"#263238"}})]}),e.jsxs("g",{id:"freepik--Character--inject-276",children:[e.jsx("path",{d:"M110.07,420.8,81.94,443.87,110.47,479c3.19-2.93-4.83-26.58-4.83-26.58l18.63-14Z",style:{fill:"#455a64"}}),e.jsx("g",{style:{opacity:.6},children:e.jsx("path",{d:"M98.34,440.33a1.85,1.85,0,0,0-2.44.33,1.78,1.78,0,0,0,.31,2.43,2,2,0,0,0,2.59-.37,1.85,1.85,0,0,0-.61-2.49",style:{fill:"#fff"}})}),e.jsx("g",{style:{opacity:.6},children:e.jsx("path",{d:"M82.05,443.77l2.83-2.34L111,476.27s.58,2.12-.67,2.83Z",style:{fill:"#fff"}})}),e.jsx("path",{d:"M106.28,452.85c-.17.14-1-.66-2.19-1.05s-2.32-.26-2.38-.48,1.14-.76,2.63-.25S106.47,452.76,106.28,452.85Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M107.75,457.78c-.13.17-1-.33-2.23-.33s-2.1.46-2.23.29.75-1.08,2.24-1.06S107.91,457.64,107.75,457.78Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M105,463.45c-.17-.12.5-1.06,1.8-1.38s2.32.18,2.23.36-1,.1-2,.38S105.19,463.61,105,463.45Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M110.17,449.18c-.21.06-.61-.92-1.47-1.84s-1.77-1.42-1.7-1.63,1.28,0,2.27,1.11S110.38,449.16,110.17,449.18Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M113.66,445c-.07.06-.72-.53-1.42-1.77a10.45,10.45,0,0,1-.93-2.3,10.2,10.2,0,0,1-.28-1.44,2.74,2.74,0,0,1,0-.87,1,1,0,0,1,.85-.82,1.19,1.19,0,0,1,1,.43,3.19,3.19,0,0,1,.45.74,8.19,8.19,0,0,1,.51,1.4,7.78,7.78,0,0,1,.25,2.48,3.7,3.7,0,0,1-.59,2.2c-.11,0,.1-.86,0-2.2a9.07,9.07,0,0,0-.39-2.29,8.76,8.76,0,0,0-.51-1.26c-.2-.45-.46-.77-.7-.73s-.12,0-.17.2a2.3,2.3,0,0,0,0,.63,13.33,13.33,0,0,0,.22,1.36,12.68,12.68,0,0,0,.73,2.23A14.58,14.58,0,0,1,113.66,445Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M113.24,444.94c-.08,0,.26-.88,1.32-1.85a7.48,7.48,0,0,1,2.12-1.32,7.69,7.69,0,0,1,1.43-.42,1.89,1.89,0,0,1,1.8.4,1.07,1.07,0,0,1,.11,1.14,3.22,3.22,0,0,1-.5.7,5,5,0,0,1-1.18,1,5.21,5.21,0,0,1-2.43.73c-1.47.05-2.26-.5-2.21-.56a20.42,20.42,0,0,0,2.16,0A5.35,5.35,0,0,0,118,444a4.22,4.22,0,0,0,1-.86c.33-.36.52-.74.37-.85a1.32,1.32,0,0,0-1.08-.15,8.65,8.65,0,0,0-1.31.34,8.21,8.21,0,0,0-2,1.09C113.83,444.31,113.34,445,113.24,444.94Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M97.33,439.64,97.67,476l45.26-.19c-.28-4.32-23.74-12.91-23.74-12.91l.74-23.31Z",style:{fill:"#455a64"}}),e.jsx("g",{style:{opacity:.6},children:e.jsx("path",{d:"M105.19,461a1.85,1.85,0,0,0-1.27,2.12,1.78,1.78,0,0,0,2.09,1.27,2,2,0,0,0,1.33-2.24,1.85,1.85,0,0,0-2.32-1.09",style:{fill:"#fff"}})}),e.jsx("g",{style:{opacity:.6},children:e.jsx("path",{d:"M97.66,475.88l0-3.68,43.53,1.48s2,.88,1.78,2.3Z",style:{fill:"#fff"}})}),e.jsx("path",{d:"M119.93,462.69c0,.22-1.11.33-2.2,1s-1.66,1.65-1.86,1.56.12-1.36,1.45-2.21S120,462.49,119.93,462.69Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M124.68,464.63c0,.22-.9.6-1.65,1.54s-1,1.92-1.18,1.92-.36-1.26.59-2.41S124.68,464.42,124.68,464.63Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M127.4,470.31c-.2,0-.51-1.06,0-2.27s1.6-1.7,1.69-1.52-.54.84-1,1.84S127.62,470.28,127.4,470.31Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M119.51,457.36c-.1.2-1.11-.1-2.36,0s-2.22.49-2.34.3.82-1,2.29-1.07S119.61,457.18,119.51,457.36Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M118.4,452a4.26,4.26,0,0,1-2.26,0,10.52,10.52,0,0,1-3.68-1.4,3,3,0,0,1-.69-.53,1,1,0,0,1-.1-1.18,1.2,1.2,0,0,1,1-.51,3,3,0,0,1,.85.12,7.82,7.82,0,0,1,3.51,1.84c1.05,1,1.42,1.79,1.34,1.83s-.61-.61-1.69-1.41a8.65,8.65,0,0,0-2-1.13,8.36,8.36,0,0,0-1.31-.4c-.48-.12-.88-.12-1,.09s0,.11.06.25a2,2,0,0,0,.5.39,13.42,13.42,0,0,0,1.2.68,12.51,12.51,0,0,0,2.2.83A16.28,16.28,0,0,1,118.4,452Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M118.12,452.31c-.08,0-.52-.75-.61-2.19a7.35,7.35,0,0,1,.3-2.48,7.61,7.61,0,0,1,.57-1.38,1.87,1.87,0,0,1,1.44-1.15,1.06,1.06,0,0,1,1,.63,3.43,3.43,0,0,1,.24.83,5.17,5.17,0,0,1-1,3.87c-.88,1.18-1.8,1.45-1.82,1.37s.69-.54,1.36-1.67a5.06,5.06,0,0,0,.71-2.13,4.45,4.45,0,0,0,0-1.31c-.08-.48-.26-.87-.44-.82s-.61.36-.79.75a7.92,7.92,0,0,0-.56,1.23,8.18,8.18,0,0,0-.43,2.26C118,451.45,118.24,452.28,118.12,452.31Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M101.21,228.91s-6.35,6.79-9.46,13.3-5.11,22-5.11,22-8.76,19.51-7.43,29.49S89.46,372,89.46,372s-.44,66.36,5.88,78.19l1.41,6.39L122.27,452h0l-.16-3.83,6-130.12,15.36-88.59Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M157.52,248.26s15.25,84,16.6,98.57-50.59,91.45-50.59,91.45L99.79,413.55l34.08-63.35-11.08-63.85,15.41-56.41,16.18.57Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M91.38,429.52a17,17,0,0,0,.18,1.86c.16,1.22.46,3,.88,5.32.85,4.62,2.23,11.32,4.08,19.69l0,.18.18,0,25.53-4.48.19,0v-.2c.71-17.51,1.56-38.44,2.47-60.89.94-24.15,1.81-46.55,2.53-64.92v0c1.91-14.76,3.49-27,4.6-35.51.53-4.24.95-7.57,1.24-9.87.13-1.12.24-2,.31-2.59s.08-.89.08-.89-.06.29-.15.88-.22,1.47-.38,2.58c-.32,2.29-.78,5.62-1.37,9.85C130.63,299,129,311.23,127,326h0c-.74,18.37-1.65,40.77-2.63,64.92-.88,22.45-1.7,43.38-2.38,60.89l.2-.23-25.5,4.59.21.14c-1.9-8.36-3.33-15.05-4.24-19.65-.45-2.31-.78-4.09-1-5.3-.11-.6-.17-1.06-.21-1.37A4.57,4.57,0,0,0,91.38,429.52Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M61.75,194.15s15.8-34.06,19.53-35.87,14.45-2.42,15.9-.38L68.86,198.68Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M62.57,189.55a3.15,3.15,0,0,0-2.29-.3h0c-4.91,1.22-22.85,6-24.85,11.13-2.32,5.91,11.87,82.71,13.7,84.79s30.05-1.41,30.92-4.69-9.18-86.06-9.18-86.06Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M40.3,241.86s-1.6.1-3.19,3.63,1.21,32.19,3.32,35.12,8.27,3.55,8.27,3.55Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M71.75,282.05a.71.71,0,0,1-.14-.19l-.38-.59c-.33-.52-.77-1.31-1.29-2.36a43.07,43.07,0,0,1-3.23-9.33,120.74,120.74,0,0,1-2.24-14.47c-.58-5.48-1.22-11.5-1.9-17.82-1.36-12.64-2.49-24.1-2.68-32.45-.1-4.17,0-7.54.11-9.87.06-1.16.13-2.07.19-2.68,0-.28.05-.5.07-.69a.92.92,0,0,1,0-.24.87.87,0,0,1,0,.24c0,.19,0,.42,0,.7,0,.65,0,1.55-.09,2.68-.06,2.32-.09,5.69.06,9.85.28,8.32,1.47,19.77,2.83,32.41.66,6.31,1.29,12.33,1.86,17.81a125.94,125.94,0,0,0,2.12,14.45,45.68,45.68,0,0,0,3.05,9.33c.49,1.05.9,1.85,1.2,2.39l.33.61C71.72,282,71.76,282,71.75,282.05Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M62.75,236.5a31.35,31.35,0,0,1-3.35.63c-2.06.35-4.91.9-8,1.67s-5.88,1.61-7.87,2.26a28.59,28.59,0,0,1-3.25,1,3,3,0,0,1,.81-.42c.54-.24,1.33-.56,2.32-.93a73.67,73.67,0,0,1,16-4c1-.13,1.89-.22,2.48-.25A3,3,0,0,1,62.75,236.5Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M39.93,238.69a1.6,1.6,0,0,1,.12.47c.07.37.15.82.25,1.36l.83,5c.71,4.23,1.74,10.07,3,16.49s2.6,12.21,3.58,16.39c.48,2,.87,3.7,1.17,4.95l.3,1.35a1.74,1.74,0,0,1,.07.48,1.48,1.48,0,0,1-.17-.45l-.4-1.33c-.33-1.15-.79-2.83-1.33-4.91-1.07-4.16-2.44-9.94-3.73-16.37s-2.26-12.29-2.88-16.55c-.31-2.12-.54-3.85-.67-5-.06-.55-.11-1-.15-1.38A2.18,2.18,0,0,1,39.93,238.69Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M60,204.11a7.92,7.92,0,0,1,.16-2.13,46.42,46.42,0,0,1,2.63-9.93,8.1,8.1,0,0,1,.91-1.93c.14.06-1,3.1-2,7S60.18,204.13,60,204.11Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M159.14,131.19c-.16-2.89-.52-17-.69-19.1a11.81,11.81,0,0,0-3.54-7.73,7.39,7.39,0,0,0-8-1.55h0a4.94,4.94,0,0,0-3.55,3.47c-5.92,21-5,43.47-7.6,65.23,7.73,1.26,18.13.75,25.94.34C161.68,154.47,160.21,150,159.14,131.19Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M155.89,160.86a2.05,2.05,0,0,1-.06-.56c0-.42-.05-1-.08-1.61,0-1.47-.11-3.49-.18-5.94-.11-5.08-.25-12-.41-19.59-.06-3.83-.12-7.47-.17-10.79,0-1.66,0-3.23-.05-4.71a24.15,24.15,0,0,0-.28-4,6.6,6.6,0,0,0-3-4.76,5.23,5.23,0,0,0-2-.62s0,0,.14,0a1.92,1.92,0,0,1,.42,0,4.15,4.15,0,0,1,1.57.47,5.63,5.63,0,0,1,1.94,1.7,7.79,7.79,0,0,1,1.33,3.16,23.86,23.86,0,0,1,.35,4.11c0,1.48.06,3.06.1,4.71.06,3.32.13,7,.21,10.79.1,7.62.19,14.52.26,19.59,0,2.46,0,4.47,0,5.94,0,.66,0,1.19,0,1.62A3,3,0,0,1,155.89,160.86Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M148.86,152.88a7.11,7.11,0,0,1-.09-1.26c0-.82-.05-2-.05-3.46,0-2.92.06-7,.17-11.41s.23-8.38.32-11.4c0-1.38.08-2.54.11-3.45a5.91,5.91,0,0,1,.11-1.27,7.18,7.18,0,0,1,.09,1.27c0,.81,0,2,0,3.46,0,2.92-.06,7-.17,11.4s-.24,8.38-.32,11.4c-.05,1.38-.08,2.54-.11,3.46A5.86,5.86,0,0,1,148.86,152.88Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M97.94,158.28c-1,0-19.86,1.34-24.24,21.54s-5.64,48.5-5.64,48.5l20.45-2Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M107.2,153.81l3.32-6.13,29-.79,2,5.22,17.09,6.17L157.18,234l12.66,69.91S169.71,314,136,317.2l-2.67-36.54-16.85-.4.46,35.69s-29.74-.48-39.17-7.21c0,0-2.86-34,5.26-58.49,7.11-21.44,9.88-27,9.88-27L93.49,159Z",style:{fill:"#407BFF"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M98.24,159.15Q89.5,196.56,80.74,234l5.93,6.29A17.72,17.72,0,0,0,96.9,224.35c0-3.46-1.1-6.83-1.24-10.29-.32-7.8,4-14.95,6-22.5C104.41,180.87,102.4,169.39,98.24,159.15Z"})}),e.jsx("path",{d:"M154.91,157.31c7,1.29,12.39,8.69,14,16.63.93,4.65,3.64,27.07,3.64,27.07l1.49,8.22s1.25,28.25-4.74,31.41c-7,3.68-11-.36-13.32-3.32s-4.79-22.22-4.79-22.22L153.8,169Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M158.22,168.65a4.47,4.47,0,0,1-.08.81q-.12.85-.33,2.31c-.32,2-.76,4.93-1.31,8.47s-1.26,7.85-2,12.57c-.39,2.36-.79,4.84-1.21,7.41s-.94,5.22-1.16,8a27.59,27.59,0,0,0,0,4.72v0c2.17,9.71,4.2,18.28,5.73,24.42.77,3,1.39,5.48,1.84,7.23.21.81.38,1.45.51,1.94a2.93,2.93,0,0,1,.15.69,3.35,3.35,0,0,1-.24-.66l-.6-1.92c-.5-1.68-1.2-4.13-2-7.19-1.62-6.12-3.71-14.69-5.89-24.39v0a28.53,28.53,0,0,1,0-4.8c.22-2.78.74-5.44,1.17-8s.85-5,1.24-7.41c.8-4.71,1.52-9,2.12-12.55s1.12-6.4,1.48-8.45c.18-.95.32-1.72.43-2.29A4.17,4.17,0,0,1,158.22,168.65Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M84,163,89.3,234s9.92-45.23,10.32-56.8a67.74,67.74,0,0,0-2-19.72S88,155.93,84,163Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M80.94,158.5a4.78,4.78,0,0,1,1.77,1A4,4,0,0,1,84,161.34a11.23,11.23,0,0,1,.53,2.64c.17,1.88.16,3.58.16,4.81a9.62,9.62,0,0,1-.08,2,6.62,6.62,0,0,1-.29-2c-.1-1.22-.14-2.92-.31-4.77s-.59-3.51-1.49-4.28S80.89,158.58,80.94,158.5Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M117.72,161.07s-.23-.19-.6-.62-.89-1-1.54-1.85l.3,0c-.72,2.09-1.82,5.12-3.07,8.52l-.18.48-.27-.41c-.15-.23-.33-.46-.47-.7a27.07,27.07,0,0,1-2.07-4.72c-.53-1.49-1-2.83-1.34-4s-.68-2-.91-2.65a5.58,5.58,0,0,1-.32-1,3.32,3.32,0,0,1,.51.91c.29.6.65,1.5,1.07,2.61s.91,2.47,1.44,3.91a30.27,30.27,0,0,0,2.06,4.62c.14.23.3.44.44.65l-.45.07c1.27-3.39,2.42-6.4,3.24-8.46l.11-.29.19.25A23.71,23.71,0,0,1,117.72,161.07Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M140.72,156.19a4.08,4.08,0,0,1-.35.95c-.26.6-.66,1.45-1.16,2.5s-1.12,2.29-1.85,3.66a34.38,34.38,0,0,1-2.62,4.32l-.33.45-.13-.55-.05-.23c-.82-3.49-1.53-6.66-2-9l.32.08a13.12,13.12,0,0,1-2.29,1.75c-.54.39-.79.67-.82.64s.17-.34.69-.8a16.85,16.85,0,0,0,2.14-1.84l.23-.27.1.35c.58,2.29,1.35,5.45,2.17,8.94l0,.23-.46-.1a39.21,39.21,0,0,0,2.61-4.23l1.94-3.59,1.31-2.43A4,4,0,0,1,140.72,156.19Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M118.22,160.79s-2.81,36.5-3.54,41.2,1.77,78.27,1.77,78.27l16.44,1.06s.17-60.75,0-61.17.08-42.89.08-42.89l-3.73-16.92-6.36,7.53Z",style:{fill:"#fff"}}),e.jsx("path",{d:"M136.57,195.49c0,.08-.58.21-.87,1a1.58,1.58,0,0,0,.07,1.32,1.33,1.33,0,0,0,1.41.54,1.3,1.3,0,0,0,1.12-1,1.57,1.57,0,0,0-.4-1.26,2.23,2.23,0,0,0-1.17-.62s.13-.1.4-.1a1.69,1.69,0,0,1,1,.47,1.9,1.9,0,0,1,.61,1.59,1.89,1.89,0,0,1-3.42.63,1.89,1.89,0,0,1,0-1.71,1.65,1.65,0,0,1,.8-.8C136.41,195.44,136.56,195.46,136.57,195.49Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M136.57,227.35c0,.08-.58.22-.87,1a1.58,1.58,0,0,0,.07,1.32,1.44,1.44,0,0,0,2.53-.47,1.56,1.56,0,0,0-.4-1.26c-.56-.63-1.18-.54-1.17-.63s.13-.1.4-.09a1.66,1.66,0,0,1,1,.46,1.93,1.93,0,0,1,.61,1.59,1.89,1.89,0,0,1-3.42.63,1.87,1.87,0,0,1,0-1.7,1.65,1.65,0,0,1,.8-.8C136.41,227.3,136.56,227.33,136.57,227.35Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M138,265.89c0,.08-.58.22-.87,1a1.58,1.58,0,0,0,.07,1.32,1.44,1.44,0,0,0,2.53-.47,1.56,1.56,0,0,0-.4-1.26c-.56-.63-1.18-.54-1.17-.63s.13-.1.4-.09a1.62,1.62,0,0,1,1,.46,1.9,1.9,0,0,1,.62,1.59,1.89,1.89,0,0,1-3.43.63,1.9,1.9,0,0,1,0-1.7,1.65,1.65,0,0,1,.8-.8C137.87,265.84,138,265.87,138,265.89Z",style:{fill:"#263238"}}),e.jsx("g",{style:{opacity:.3},children:e.jsx("path",{d:"M159.34,195.2c-.36-2.91-1.13-5.76-1.32-8.69-.24-3.5.37-7-.32-10.49-2.38,4-2.92,8.77-2.93,13.4s.42,9.28-.24,13.86c-.45,3.14-1.47,6.91-1.85,10.06s.52,4.88,1.44,9.61C157.29,214,160.5,204.63,159.34,195.2Z"})}),e.jsx("path",{d:"M153.79,187.76a37,37,0,0,1-4.11,32.7",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M149.68,220.46c-.09-.06,1-1.64,2.32-4.42a38.89,38.89,0,0,0,1.94-5,42,42,0,0,0,1.38-6.45,42.87,42.87,0,0,0,.26-6.59,38.82,38.82,0,0,0-.63-5.35c-.59-3-1.26-4.82-1.16-4.86a6.34,6.34,0,0,1,.52,1.25c.15.41.32.91.48,1.5s.38,1.27.52,2a35.3,35.3,0,0,1,.75,5.41,36.27,36.27,0,0,1-1.66,13.2,35.91,35.91,0,0,1-2.07,5c-.33.71-.7,1.31-1,1.84a15.39,15.39,0,0,1-.85,1.34A6.53,6.53,0,0,1,149.68,220.46Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M104.12,236a9.91,9.91,0,0,1-1.92-1.55,46.79,46.79,0,0,1-7.63-9.14,9.64,9.64,0,0,1-1.19-2.18,14.37,14.37,0,0,1,1.49,2c.89,1.23,2.14,2.91,3.62,4.69s2.91,3.3,4,4.4A14.41,14.41,0,0,1,104.12,236Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M97.54,237.05a7.35,7.35,0,0,1-1-1.88,41.3,41.3,0,0,1-3-9.86,7.49,7.49,0,0,1-.21-2.13c.15,0,.73,3.17,1.9,7S97.68,237,97.54,237.05Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M129.7,218c0,.07-.61-.32-1.6-.71a9.35,9.35,0,0,0-8,.57c-.92.53-1.41,1-1.48.92a3.7,3.7,0,0,1,1.29-1.23,8.38,8.38,0,0,1,4.08-1.39,8.26,8.26,0,0,1,4.23.8A3.74,3.74,0,0,1,129.7,218Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M74.18,215.63s-7.35,8-6.79,13.58,3.16,17.86,10,17.49,13.11-11.44,14-20.22,0-29.44,0-29.44l-9.81,2.21Z",style:{fill:"#ffbe9d"}}),e.jsx("path",{d:"M59.58,164.43c5.08,6.49,17.67,22.14,17.67,22.14l11.85-3a2.16,2.16,0,0,0,1.62-1.83h0a2.15,2.15,0,0,0-.45-1.6l-16.61-21a4.72,4.72,0,0,0-5.37-1.5l-7.59,2.85A2.55,2.55,0,0,0,59.58,164.43Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M89.46,180.91a9.89,9.89,0,0,1-1.14-1.09c-.71-.74-1.72-1.81-2.93-3.16-2.42-2.71-5.66-6.56-9-11-.83-1.11-1.63-2.2-2.39-3.27a8.54,8.54,0,0,0-2.48-2.64,3.7,3.7,0,0,0-3.12,0l-2.8,1-4.09,1.35a8.47,8.47,0,0,1-1.52.43,10.51,10.51,0,0,1,1.45-.62l4-1.51,2.79-1a7.08,7.08,0,0,1,1.66-.4,3.3,3.3,0,0,1,1.83.38,8.8,8.8,0,0,1,2.67,2.76l2.39,3.26c3.32,4.43,6.5,8.3,8.85,11.06,1.13,1.33,2.08,2.43,2.8,3.27A9.79,9.79,0,0,1,89.46,180.91Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M66.31,162.25a1,1,0,1,1-.46,1.33,1,1,0,0,1,.46-1.33",style:{fill:"#fff"}}),e.jsx("path",{d:"M76.47,176.44l-5.48.91-2,1.8a2.25,2.25,0,0,0-.76,2,5.32,5.32,0,0,0,1.24,2.66,15.73,15.73,0,0,0,2.38,2.38s-1.92,3.12,1.06,4.7c0,0-.2,3.23,2.93,3.56,0,0,.91,3.07,3.27,3.24l2.43,2.41-.74,1.47,10.87.34a63.49,63.49,0,0,0-.43-8.68,20.84,20.84,0,0,0-.85-3.45c.55-3.06-1.74-4.34-2.09-4.12,0,0,5.19-1.36,4.53-4.93l-5,1.28-9.13,1.9L84.56,180a4.65,4.65,0,0,0,.76-.9c.5-.79,1.24-2.22.61-3.06-.27-.35-7.47,2.66-7.47,2.66L74,182.81l-1.4-2S77.19,179.87,76.47,176.44Z",style:{fill:"#ffbe9d"}}),e.jsx("path",{d:"M89,185.7c0,.16-1.93.43-4.24,1.11s-4.11,1.47-4.18,1.33a11.25,11.25,0,0,1,4-1.83A11.21,11.21,0,0,1,89,185.7Z",style:{fill:"#eb996e"}}),e.jsx("path",{d:"M86.49,195.11a16.67,16.67,0,0,0,1.81-1.93l.19-.25.13.29a1.67,1.67,0,0,0,.89.84,1.31,1.31,0,0,0,1.31-.08.52.52,0,0,0,.18-.56l-.15-.9a12.12,12.12,0,0,0-.37-1.85,1.25,1.25,0,0,0-1.22-.87,6,6,0,0,0-1.66.31l-2.93.72a15,15,0,0,1-2.73.53,15.89,15.89,0,0,1,2.64-.89l2.88-.82a5.88,5.88,0,0,1,1.82-.36,1.9,1.9,0,0,1,1,.31,1.93,1.93,0,0,1,.66.89,12.69,12.69,0,0,1,.39,1.95c0,.31.09.62.14.92a1,1,0,0,1-.39,1,1.76,1.76,0,0,1-1.78.1,2.08,2.08,0,0,1-1-1.1l.31,0a7,7,0,0,1-1.46,1.37C86.74,195,86.51,195.14,86.49,195.11Z",style:{fill:"#eb996e"}}),e.jsx("path",{d:"M76.88,180a24.2,24.2,0,0,1-2.44,3.19,23.33,23.33,0,0,1-2.55,3.1A12,12,0,0,1,74,182.89,11.6,11.6,0,0,1,76.88,180Z",style:{fill:"#eb996e"}}),e.jsx("path",{d:"M79.14,183.77c0,.15-1.14.51-2,1.68a8.78,8.78,0,0,0-1,2.39c-.07,0-.17-.3-.15-.82a3.78,3.78,0,0,1,2.27-3.13C78.8,183.71,79.12,183.71,79.14,183.77Z",style:{fill:"#eb996e"}}),e.jsx("path",{d:"M137.8,103.21c-.84-2.2-.51-4.65-.84-7-.72-5.13-4.85-9.25-9.63-11.26-4.45-1.86-9.88-1.46-15.24.26a20.49,20.49,0,0,0-9.59,6.23,16.1,16.1,0,0,0-3,14.47l26.26-3.79c2.45,2,5,4.11,7.95,5.25a5.4,5.4,0,0,0,2.74.44,2.45,2.45,0,0,0,2-1.68C138.75,105.14,138.17,104.17,137.8,103.21Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M121.48,83.64c5.75-1,10.8,1.25,15.64,4.5a28.78,28.78,0,0,1,10.59,13.58c2.21,5.73,2.77,14,1,19.91a17.86,17.86,0,0,1-11.26,12.1c-7.9,2.8-17,2.45-23.72-2.61s-10.5-13.43-10.81-21.81a27.75,27.75,0,0,1,4.41-16.47,21.11,21.11,0,0,1,14.1-9.2",style:{fill:"#263238"}}),e.jsx("path",{d:"M112.35,146.17l.21,4.68,10.32,18.25,15-19.2.51-48a4.28,4.28,0,0,0-4-4.19l-22.91-4.89c-7.3-.49-11.8,8.64-12,16-.2,8.13-.14,18.06,1,24.07,2.39,12.09,11.77,13.29,11.77,13.29",style:{fill:"#ffbe9d"}}),e.jsx("path",{d:"M102.82,118.89a1.55,1.55,0,0,0,1.56,1.52,1.5,1.5,0,0,0,1.56-1.47,1.57,1.57,0,0,0-1.56-1.51A1.49,1.49,0,0,0,102.82,118.89Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M101.88,113.5c.2.2,1.35-.72,3-.78s2.94.73,3.11.52-.12-.45-.68-.82a4.2,4.2,0,0,0-2.5-.67,4.11,4.11,0,0,0-2.4.87C101.94,113,101.78,113.41,101.88,113.5Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M118.05,118.6a1.56,1.56,0,0,0,1.57,1.52,1.49,1.49,0,0,0,1.55-1.46,1.55,1.55,0,0,0-1.56-1.52A1.49,1.49,0,0,0,118.05,118.6Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M117.82,113.11c.2.2,1.35-.72,3-.78s3,.74,3.12.52-.12-.45-.68-.82a4.2,4.2,0,0,0-2.5-.67,4.11,4.11,0,0,0-2.4.87C117.88,112.65,117.72,113,117.82,113.11Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M112.76,125.87a11.13,11.13,0,0,0-2.74-.39c-.43,0-.84-.1-.92-.39a2.13,2.13,0,0,1,.24-1.28l1.14-3.31c1.59-4.71,2.72-8.58,2.53-8.64s-1.63,3.7-3.22,8.42l-1.09,3.33a2.52,2.52,0,0,0-.16,1.69,1.11,1.11,0,0,0,.73.6,2.84,2.84,0,0,0,.73.07A10.47,10.47,0,0,0,112.76,125.87Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M112.35,146.17a33.91,33.91,0,0,0,16.13-5.35s-3.78,8.57-16,7.89Z",style:{fill:"#eb996e"}}),e.jsx("path",{d:"M114.05,129.48a2.69,2.69,0,0,1,2.45-.84,2,2,0,0,1,1.55,1,2.28,2.28,0,0,1,.15,2.32,2,2,0,0,1-2.18.64,5.18,5.18,0,0,1-2-.94,1.35,1.35,0,0,1-.38-.68,1.8,1.8,0,0,1,.46-1.49",style:{fill:"#eb996e"}}),e.jsx("path",{d:"M117.92,109.18c.18.45,1.85.17,3.82.34s3.6.64,3.84.22c.11-.2-.18-.62-.84-1a6.36,6.36,0,0,0-2.87-.89,6.43,6.43,0,0,0-3,.47C118.19,108.59,117.84,109,117.92,109.18Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M102.09,106.14c.31.37,1.45-.07,2.84-.14s2.58.16,2.83-.25c.11-.19-.09-.57-.61-.91a4.13,4.13,0,0,0-4.58.31C102.1,105.56,102,106,102.09,106.14Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M142,99.68c-2.37-7-12.73-16.51-20.08-15.86l-11.61,7.26a11.33,11.33,0,0,0,7.85,8.53c2.09.59,4.59.72,5.86,2.48s.61,4.47,1.82,6.33c1.67,2.58,6.11,2.37,7.39,5.17.55,1.22.3,2.69.88,3.91.77,1.61,4.93,3.6,6.63,3s1.64-3.48,2.17-5a8.07,8.07,0,0,0,.15-5.4C142.26,106.69,143.14,103,142,99.68Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M135.74,122.06c0-.91.94-3.08,1.83-3.26,2.37-.46,6.68-.43,7,5.64.37,8.29-8,6.94-8.06,6.71S135.85,125.19,135.74,122.06Z",style:{fill:"#ffbe9d"}}),e.jsx("path",{d:"M138.86,127.89s.15.1.39.2a1.42,1.42,0,0,0,1.09,0c.86-.36,1.53-1.78,1.51-3.27a4.63,4.63,0,0,0-.5-2.05,1.64,1.64,0,0,0-1.13-1.06.73.73,0,0,0-.84.43c-.1.24,0,.4-.08.41s-.19-.13-.13-.47a.88.88,0,0,1,.3-.54,1.09,1.09,0,0,1,.79-.24,2,2,0,0,1,1.56,1.22,5,5,0,0,1,.61,2.29c0,1.67-.77,3.27-2,3.67a1.55,1.55,0,0,1-1.33-.16C138.88,128.09,138.83,127.91,138.86,127.89Z",style:{fill:"#eb996e"}}),e.jsx("path",{d:"M149.52,110.72a7.24,7.24,0,0,0,.32-2.49A18.34,18.34,0,0,0,146,96.9a7.4,7.4,0,0,0-1.75-1.79c-.16.1,2.62,2.86,4.08,7.31A27.3,27.3,0,0,1,149.52,110.72Z",style:{fill:"#407BFF"}}),e.jsx("path",{d:"M112.73,88.58c-.77,3.37-5.9,7.69-8.16,10.32-4.3,5-5.11,5.74-5.08,20.85a35.77,35.77,0,0,1-3.45-15,18.1,18.1,0,0,1,4.81-11.88,14.1,14.1,0,0,1,11.88-4.28",style:{fill:"#263238"}}),e.jsx("path",{d:"M146.23,99.57a6.88,6.88,0,0,1-1.4.35c-.46.1-1,.21-1.68.29s-1.41.22-2.25.26a40.21,40.21,0,0,1-5.87,0,45.21,45.21,0,0,1-7.12-1.09,43.89,43.89,0,0,1-6.82-2.32,39.43,39.43,0,0,1-5.19-2.76c-.73-.42-1.33-.88-1.87-1.26a16.23,16.23,0,0,1-1.36-1,9.47,9.47,0,0,1-1.09-1,8,8,0,0,1,1.21.8c.37.28.83.61,1.39,1s1.17.79,1.9,1.19a42.11,42.11,0,0,0,5.19,2.64A46.4,46.4,0,0,0,128,99a48.26,48.26,0,0,0,7,1.12,44,44,0,0,0,5.82.05c.83,0,1.58-.13,2.23-.18s1.22-.14,1.68-.21A9.37,9.37,0,0,1,146.23,99.57Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M147.09,105.52a4,4,0,0,1-1,.23,22.77,22.77,0,0,1-2.67.34,33.25,33.25,0,0,1-17.28-3.41,23.65,23.65,0,0,1-2.35-1.32,3.71,3.71,0,0,1-.8-.59c0-.07,1.25.66,3.3,1.6a37.23,37.23,0,0,0,17.11,3.37C145.69,105.65,147.08,105.43,147.09,105.52Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M149.19,105.72a5.35,5.35,0,0,1,.28,1.25c.13.82.26,2,.34,3.47a49.55,49.55,0,0,1,0,5.17,32.6,32.6,0,0,1-.85,6.28,16.68,16.68,0,0,1-6.43,9.39,16.3,16.3,0,0,1-3.08,1.65,5.17,5.17,0,0,1-1.21.41,7.64,7.64,0,0,1,1.13-.59,19.79,19.79,0,0,0,2.95-1.76,15.48,15.48,0,0,0,3.52-3.63,16.7,16.7,0,0,0,2.63-5.59,35.86,35.86,0,0,0,.88-6.19c.12-1.93.14-3.67.11-5.13s-.1-2.64-.18-3.45A7.17,7.17,0,0,1,149.19,105.72Z",style:{fill:"#455a64"}}),e.jsx("path",{d:"M116.12,132.58a2.73,2.73,0,0,0,1.29-.31,1.6,1.6,0,0,0,.74-1.1,1.92,1.92,0,0,0-.44-1.56,2.25,2.25,0,0,0-1.49-.71,2.61,2.61,0,0,0-1.38.3c-.74.39-1,.87-1.12.82s.15-.6.93-1.14a2.72,2.72,0,0,1,1.59-.46,2.59,2.59,0,0,1,1.86.85,2.31,2.31,0,0,1,.52,2,1.9,1.9,0,0,1-1,1.33C116.68,133,116.07,132.62,116.12,132.58Z",style:{fill:"#263238"}}),e.jsx("path",{d:"M167.27,200.86l4.46-9.51c.74-3,3.76-4,7.46-4.24l3.91-1.6s2.85-4.11,5.49-4a1,1,0,0,1,.92.7h0a.93.93,0,0,1-.11.81l-3.21,4.94-2.56,1.26s2.4.58,3.35-.31,4.16-3.43,4.16-3.43,2.45-4.41,5.63-4.08a.58.58,0,0,1,.46.85l-2.44,4.71s4.45-6.69,8.69-4.19l-4.7,5.11s6.82-3.87,9.54-.63l-17.26,7.13-9.95,1.95-3.48,9.44L174.57,204Z",style:{fill:"#ffbe9d"}}),e.jsx("path",{d:"M177.61,213.21s.53,16.9-2.59,21.56-8.92,11-16.1,5.92l-4.49-17s7.31-8,8.64-11.3c3.31-8.19,8.66-21,8.66-21l9.52,4.24Z",style:{fill:"#ffbe9d"}}),e.jsx("path",{d:"M164.15,210.84a13.19,13.19,0,0,1-1.08,2.14c-.7,1.29-1.64,3.09-2.57,5.13s-1.68,3.93-2.21,5.31a12.36,12.36,0,0,1-.91,2.21,9.78,9.78,0,0,1,.57-2.33,44.07,44.07,0,0,1,2.07-5.4,47,47,0,0,1,2.73-5.11A9.93,9.93,0,0,1,164.15,210.84Z",style:{fill:"#eb996e"}}),e.jsx("path",{d:"M186.19,187.91a7.23,7.23,0,0,1-2.33,1.37,7.07,7.07,0,0,1-2.54.9,7.25,7.25,0,0,1,2.32-1.37A7.15,7.15,0,0,1,186.19,187.91Z",style:{fill:"#eb996e"}}),e.jsx("path",{d:"M187.62,192.38c0-.07.45-.37,1.26-.72l1.44-.59.83-.35a1.7,1.7,0,0,0,.71-.51c.87-1,1.58-2,2.15-2.67s1-1.09,1.05-1a3.41,3.41,0,0,1-.19.34l-.56.88a26.06,26.06,0,0,1-2.07,2.8,2.92,2.92,0,0,1-.4.38,2.47,2.47,0,0,1-.48.25l-.87.33c-.55.2-1.06.35-1.48.49A5.93,5.93,0,0,1,187.62,192.38Z",style:{fill:"#eb996e"}})]})]}),aA=()=>{const{isOnline:t}=oie();g.useEffect(()=>{if(t){const r=setTimeout(()=>{window.location.reload()},5e3);return()=>clearTimeout(r)}},[t]);const s=()=>{window.location.reload()},a=()=>{window.history.length>1?window.history.back():window.location.href="/"};return e.jsx("div",{className:"flex items-center justify-center bg-white fixed inset-0 w-screen h-screen",children:e.jsxs("div",{className:"text-center max-w-lg w-full p-6",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(sle,{})}),e.jsx("h1",{className:"text-xl font-bold text-gray-800 mb-2",children:t?"Connection Restored!":"No Internet Connection"}),e.jsx("p",{className:"text-gray-600 mb-4",children:t?"Your connection has been restored. Redirecting...":"Unable to connect to the server. Please check your internet connection and try again."}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(K,{variant:"outlined",onClick:a,className:"!capitalize text-sm py-2",disabled:t,children:"Go Back"}),e.jsx(K,{variant:"contained",onClick:s,startIcon:e.jsx(ql,{className:"w-3 h-3"}),className:"!capitalize text-sm py-2",disabled:t,children:t?"Connecting...":"Retry"}),e.jsx(K,{variant:"contained",onClick:()=>window.location.href="/",startIcon:e.jsx(X9,{className:"w-3 h-3"}),className:"!capitalize text-sm py-2",disabled:t,children:"Go Home"})]}),t&&e.jsx("div",{className:"mt-4 p-2 bg-green-50 text-green-700 rounded text-xs",children:"Connection restored! Page is reloading..."})]})})},At=({module:t,action:s="read",children:a})=>{const r=Qe(t),n=(()=>{switch(s){case"create":return r.isCreate;case"update":return r.isUpdate;case"delete":return r.isDelete;default:return r.isRead||r.isCreate||r.isUpdate||r.isDelete}})();return r.isLoading?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{children:"Loading permissions..."})}):r.isNetworkError||!n?e.jsx(aA,{}):e.jsx(e.Fragment,{children:a})},h8=Ut([e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),ale=Ut(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"})),os=Ut(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),rle=Ut(e.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"})),Ct=Ut(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"})),f8=Ut(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),nle=Ut(e.jsx("path",{d:"M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1M9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m11 15H4v-2h16zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20z"})),mt=Ut(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),ile=Ut(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),ole=Ut(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2"})),lle=Ut(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Vr=Ut(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),cle=Ut(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),xs=Ut(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),dle=Ut(e.jsx("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"})),Nb=Ut(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Zw=Ut(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"})),St=Ut(e.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),rA=Ut(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),Xw=Ut(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),x8=Ut(e.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 12h-2v-2h2zm0-4h-2V6h2z"})),ule=Ut(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),Yf=Ut(e.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"})),g8=Ut(e.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),mle=Ut(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),ple=Ut(e.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),Jw=Ut(e.jsx("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"})),hle=Ut(e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"})),fle=Ut(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),xle=Ut(e.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"})),gle=Ut(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"})),y8=Ut(e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"})),e_=Ut(e.jsx("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"})),dN=Ut(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"})),yle=Ut(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),nA=Ut(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),ble=Ut(e.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),vle=Ut([e.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),e.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),wb=Ut(e.jsx("path",{d:"M8 5v14l11-7z"})),b8=Ut(e.jsx("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"})),jle=Ut([e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),iA=Ut(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),Nle=Ut(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"})),cu=Ut(e.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),wle=Ut(e.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),Pt=Ut(e.jsx("path",{d:"M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2M3 19c0 1.1.9 2 2 2h3V10H3z"})),U4=Ut(e.jsx("path",{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4zm-6 4h-4v-4h4z"})),oA=Ut(e.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})),fs=Ut(e.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),_le=Ut(e.jsx("path",{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48z"})),Sn=Ut(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),Sle=Ut(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"})),vg=Ut(e.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"})),Cle=Ut(e.jsx("path",{d:"M12 5.99 19.53 19H4.47zM2.74 18c-.77 1.33.19 3 1.73 3h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0zM11 11v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1m0 5h2v2h-2z"}));function Ple(t){return ba({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function kle(t){return ba({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(t)}function Ele(t){return ba({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function Tle(t){return ba({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(t)}function Mle(t){return ba({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function Dle(t){return ba({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function Rle(t){return ba({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(t)}function Ale(t){return ba({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}class Ile{async login(s){const r=(await ie.post("/auth/login",s,{skipAuth:!0,skipErrorHandling:!0})).data;if(r.success&&r.data){const{user:n,accessToken:i,expiresIn:o}=r.data,l={id:n.id,username:n.name,email:n.email,role:n.role,parent_id:0,depot_id:null,zone_id:null},c=this.parseExpiresIn(o);Bi.setToken(i,l,c)}return r}async logout(){try{await ie.post("/auth/logout")}catch(s){console.error("Server logout error:",s)}finally{Bi.clearAuth()}}parseExpiresIn(s){const a=s.match(/^(\d+)([hdms]?)$/);if(!a)return 1440*60;const[,r,n]=a,i=parseInt(r,10);switch(n){case"h":return i*60*60;case"d":return i*24*60*60;case"m":return i*60;default:return i}}}const lA=new Ile,Ole=t=>De({mutationFn:s=>lA.login(s),loadingMessage:"Signing in...",onSuccess:t?.onSuccess,onError:t?.onError}),Fle=t=>De({mutationFn:()=>lA.logout(),loadingMessage:"Signing out...",onSuccess:t?.onSuccess,onError:t?.onError}),cA=g.createContext(void 0),dA=({children:t})=>{const[s,a]=g.useState(()=>Bi.isAuthenticated()),{data:r,isLoading:n,error:i,refetch:o,isSuccess:l,isError:c}=q4(),m=Fle({onSuccess:()=>{a(!1),window.location.href="/login"},onError:f=>{console.error("Logout error:",f),a(!1),window.location.href="/login"}});g.useEffect(()=>{const f=()=>{const w=Bi.isAuthenticated();a(w)};f();const b=()=>{f()};return window.addEventListener("auth-change",b),()=>{window.removeEventListener("auth-change",b)}},[]),g.useEffect(()=>{l&&r?(a(!0),Vne()):c&&!Bi.isAuthenticated()&&a(!1)},[l,c,r]);const h={user:r||null,isLoading:n,isAuthenticated:s,error:i,refetchUser:o,logout:()=>{m.mutate()},isLoggingOut:m.isPending};return e.jsx(cA.Provider,{value:h,children:t})},uA=()=>{const t=g.useContext(cA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Lle=async t=>{try{return(await ie.get("/requests-by-users",{params:t})).data}catch(s){throw console.error("Error fetching requests by users:",s),s}},$le=async t=>{try{return(await ie.get("/requests-by-users-without-permission",{params:t})).data}catch(s){throw console.error("Error fetching requests by users without permission:",s),s}},zle=async t=>{try{return(await ie.post("/requests/action",t)).data}catch(s){throw console.error("Error taking action on request:",s),new Error(s.response?.data?.message||"Failed to take action on request")}},qle=async()=>{try{return(await ie.get("/approval-setup/request-types")).data}catch(t){throw console.error("Error fetching request types:",t),new Error(t.response?.data?.message||"Failed to fetch request types")}},El={all:["requests"],lists:()=>[...El.all,"list"],list:t=>[...El.lists(),t],byUsers:t=>[...El.all,"by-users",t],byUsersWithoutPermission:t=>[...El.all,"by-users-without-permission",t],details:()=>[...El.all,"detail"],detail:t=>[...El.details(),t]},Ble=(t,s)=>tt({queryKey:El.byUsers(t),queryFn:()=>Lle(t),staleTime:300*1e3,...s}),mA=(t,s)=>tt({queryKey:El.byUsersWithoutPermission(t),queryFn:()=>$le(t),staleTime:300*1e3,...s}),pA=()=>De({mutationFn:zle,invalidateQueries:["requests"],loadingMessage:"Processing request..."}),V4=t=>tt({queryKey:[...El.all,"types"],queryFn:()=>qle(),staleTime:600*1e3,...t});var Ule=function(s){return Vle(s)&&!Hle(s)};function Vle(t){return!!t&&typeof t=="object"}function Hle(t){var s=Object.prototype.toString.call(t);return s==="[object RegExp]"||s==="[object Date]"||Gle(t)}var Wle=typeof Symbol=="function"&&Symbol.for,Yle=Wle?Symbol.for("react.element"):60103;function Gle(t){return t.$$typeof===Yle}function Kle(t){return Array.isArray(t)?[]:{}}function _b(t,s){return s.clone!==!1&&s.isMergeableObject(t)?wx(Kle(t),t,s):t}function Qle(t,s,a){return t.concat(s).map(function(r){return _b(r,a)})}function Zle(t,s,a){var r={};return a.isMergeableObject(t)&&Object.keys(t).forEach(function(n){r[n]=_b(t[n],a)}),Object.keys(s).forEach(function(n){!a.isMergeableObject(s[n])||!t[n]?r[n]=_b(s[n],a):r[n]=wx(t[n],s[n],a)}),r}function wx(t,s,a){a=a||{},a.arrayMerge=a.arrayMerge||Qle,a.isMergeableObject=a.isMergeableObject||Ule;var r=Array.isArray(s),n=Array.isArray(t),i=r===n;return i?r?a.arrayMerge(t,s,a):Zle(t,s,a):_b(s,a)}wx.all=function(s,a){if(!Array.isArray(s))throw new Error("first argument should be an array");return s.reduce(function(r,n){return wx(r,n,a)},{})};var t_=wx,hA=typeof global=="object"&&global&&global.Object===Object&&global,Xle=typeof self=="object"&&self&&self.Object===Object&&self,rl=hA||Xle||Function("return this")(),Kc=rl.Symbol,fA=Object.prototype,Jle=fA.hasOwnProperty,ece=fA.toString,qh=Kc?Kc.toStringTag:void 0;function tce(t){var s=Jle.call(t,qh),a=t[qh];try{t[qh]=void 0;var r=!0}catch{}var n=ece.call(t);return r&&(s?t[qh]=a:delete t[qh]),n}var sce=Object.prototype,ace=sce.toString;function rce(t){return ace.call(t)}var nce="[object Null]",ice="[object Undefined]",v8=Kc?Kc.toStringTag:void 0;function bu(t){return t==null?t===void 0?ice:nce:v8&&v8 in Object(t)?tce(t):rce(t)}function xA(t,s){return function(a){return t(s(a))}}var H4=xA(Object.getPrototypeOf,Object);function vu(t){return t!=null&&typeof t=="object"}var oce="[object Object]",lce=Function.prototype,cce=Object.prototype,gA=lce.toString,dce=cce.hasOwnProperty,uce=gA.call(Object);function j8(t){if(!vu(t)||bu(t)!=oce)return!1;var s=H4(t);if(s===null)return!0;var a=dce.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&gA.call(a)==uce}function mce(){this.__data__=[],this.size=0}function yA(t,s){return t===s||t!==t&&s!==s}function Iv(t,s){for(var a=t.length;a--;)if(yA(t[a][0],s))return a;return-1}var pce=Array.prototype,hce=pce.splice;function fce(t){var s=this.__data__,a=Iv(s,t);if(a<0)return!1;var r=s.length-1;return a==r?s.pop():hce.call(s,a,1),--this.size,!0}function xce(t){var s=this.__data__,a=Iv(s,t);return a<0?void 0:s[a][1]}function gce(t){return Iv(this.__data__,t)>-1}function yce(t,s){var a=this.__data__,r=Iv(a,t);return r<0?(++this.size,a.push([t,s])):a[r][1]=s,this}function Ql(t){var s=-1,a=t==null?0:t.length;for(this.clear();++s<a;){var r=t[s];this.set(r[0],r[1])}}Ql.prototype.clear=mce;Ql.prototype.delete=fce;Ql.prototype.get=xce;Ql.prototype.has=gce;Ql.prototype.set=yce;function bce(){this.__data__=new Ql,this.size=0}function vce(t){var s=this.__data__,a=s.delete(t);return this.size=s.size,a}function jce(t){return this.__data__.get(t)}function Nce(t){return this.__data__.has(t)}function jg(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var wce="[object AsyncFunction]",_ce="[object Function]",Sce="[object GeneratorFunction]",Cce="[object Proxy]";function bA(t){if(!jg(t))return!1;var s=bu(t);return s==_ce||s==Sce||s==wce||s==Cce}var uN=rl["__core-js_shared__"],N8=(function(){var t=/[^.]+$/.exec(uN&&uN.keys&&uN.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function Pce(t){return!!N8&&N8 in t}var kce=Function.prototype,Ece=kce.toString;function ju(t){if(t!=null){try{return Ece.call(t)}catch{}try{return t+""}catch{}}return""}var Tce=/[\\^$.*+?()[\]{}|]/g,Mce=/^\[object .+?Constructor\]$/,Dce=Function.prototype,Rce=Object.prototype,Ace=Dce.toString,Ice=Rce.hasOwnProperty,Oce=RegExp("^"+Ace.call(Ice).replace(Tce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fce(t){if(!jg(t)||Pce(t))return!1;var s=bA(t)?Oce:Mce;return s.test(ju(t))}function Lce(t,s){return t?.[s]}function Nu(t,s){var a=Lce(t,s);return Fce(a)?a:void 0}var _x=Nu(rl,"Map"),Sx=Nu(Object,"create");function $ce(){this.__data__=Sx?Sx(null):{},this.size=0}function zce(t){var s=this.has(t)&&delete this.__data__[t];return this.size-=s?1:0,s}var qce="__lodash_hash_undefined__",Bce=Object.prototype,Uce=Bce.hasOwnProperty;function Vce(t){var s=this.__data__;if(Sx){var a=s[t];return a===qce?void 0:a}return Uce.call(s,t)?s[t]:void 0}var Hce=Object.prototype,Wce=Hce.hasOwnProperty;function Yce(t){var s=this.__data__;return Sx?s[t]!==void 0:Wce.call(s,t)}var Gce="__lodash_hash_undefined__";function Kce(t,s){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Sx&&s===void 0?Gce:s,this}function du(t){var s=-1,a=t==null?0:t.length;for(this.clear();++s<a;){var r=t[s];this.set(r[0],r[1])}}du.prototype.clear=$ce;du.prototype.delete=zce;du.prototype.get=Vce;du.prototype.has=Yce;du.prototype.set=Kce;function Qce(){this.size=0,this.__data__={hash:new du,map:new(_x||Ql),string:new du}}function Zce(t){var s=typeof t;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?t!=="__proto__":t===null}function Ov(t,s){var a=t.__data__;return Zce(s)?a[typeof s=="string"?"string":"hash"]:a.map}function Xce(t){var s=Ov(this,t).delete(t);return this.size-=s?1:0,s}function Jce(t){return Ov(this,t).get(t)}function ede(t){return Ov(this,t).has(t)}function tde(t,s){var a=Ov(this,t),r=a.size;return a.set(t,s),this.size+=a.size==r?0:1,this}function ad(t){var s=-1,a=t==null?0:t.length;for(this.clear();++s<a;){var r=t[s];this.set(r[0],r[1])}}ad.prototype.clear=Qce;ad.prototype.delete=Xce;ad.prototype.get=Jce;ad.prototype.has=ede;ad.prototype.set=tde;var sde=200;function ade(t,s){var a=this.__data__;if(a instanceof Ql){var r=a.__data__;if(!_x||r.length<sde-1)return r.push([t,s]),this.size=++a.size,this;a=this.__data__=new ad(r)}return a.set(t,s),this.size=a.size,this}function Sp(t){var s=this.__data__=new Ql(t);this.size=s.size}Sp.prototype.clear=bce;Sp.prototype.delete=vce;Sp.prototype.get=jce;Sp.prototype.has=Nce;Sp.prototype.set=ade;function rde(t,s){for(var a=-1,r=t==null?0:t.length;++a<r&&s(t[a],a,t)!==!1;);return t}var w8=(function(){try{var t=Nu(Object,"defineProperty");return t({},"",{}),t}catch{}})();function vA(t,s,a){s=="__proto__"&&w8?w8(t,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[s]=a}var nde=Object.prototype,ide=nde.hasOwnProperty;function jA(t,s,a){var r=t[s];(!(ide.call(t,s)&&yA(r,a))||a===void 0&&!(s in t))&&vA(t,s,a)}function Fv(t,s,a,r){var n=!a;a||(a={});for(var i=-1,o=s.length;++i<o;){var l=s[i],c=void 0;c===void 0&&(c=t[l]),n?vA(a,l,c):jA(a,l,c)}return a}function ode(t,s){for(var a=-1,r=Array(t);++a<t;)r[a]=s(a);return r}var lde="[object Arguments]";function _8(t){return vu(t)&&bu(t)==lde}var NA=Object.prototype,cde=NA.hasOwnProperty,dde=NA.propertyIsEnumerable,ude=_8((function(){return arguments})())?_8:function(t){return vu(t)&&cde.call(t,"callee")&&!dde.call(t,"callee")},Ng=Array.isArray;function mde(){return!1}var wA=typeof oi=="object"&&oi&&!oi.nodeType&&oi,S8=wA&&typeof li=="object"&&li&&!li.nodeType&&li,pde=S8&&S8.exports===wA,C8=pde?rl.Buffer:void 0,hde=C8?C8.isBuffer:void 0,_A=hde||mde,fde=9007199254740991,xde=/^(?:0|[1-9]\d*)$/;function gde(t,s){var a=typeof t;return s=s??fde,!!s&&(a=="number"||a!="symbol"&&xde.test(t))&&t>-1&&t%1==0&&t<s}var yde=9007199254740991;function SA(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=yde}var bde="[object Arguments]",vde="[object Array]",jde="[object Boolean]",Nde="[object Date]",wde="[object Error]",_de="[object Function]",Sde="[object Map]",Cde="[object Number]",Pde="[object Object]",kde="[object RegExp]",Ede="[object Set]",Tde="[object String]",Mde="[object WeakMap]",Dde="[object ArrayBuffer]",Rde="[object DataView]",Ade="[object Float32Array]",Ide="[object Float64Array]",Ode="[object Int8Array]",Fde="[object Int16Array]",Lde="[object Int32Array]",$de="[object Uint8Array]",zde="[object Uint8ClampedArray]",qde="[object Uint16Array]",Bde="[object Uint32Array]",$a={};$a[Ade]=$a[Ide]=$a[Ode]=$a[Fde]=$a[Lde]=$a[$de]=$a[zde]=$a[qde]=$a[Bde]=!0;$a[bde]=$a[vde]=$a[Dde]=$a[jde]=$a[Rde]=$a[Nde]=$a[wde]=$a[_de]=$a[Sde]=$a[Cde]=$a[Pde]=$a[kde]=$a[Ede]=$a[Tde]=$a[Mde]=!1;function Ude(t){return vu(t)&&SA(t.length)&&!!$a[bu(t)]}function W4(t){return function(s){return t(s)}}var CA=typeof oi=="object"&&oi&&!oi.nodeType&&oi,Gf=CA&&typeof li=="object"&&li&&!li.nodeType&&li,Vde=Gf&&Gf.exports===CA,mN=Vde&&hA.process,ip=(function(){try{var t=Gf&&Gf.require&&Gf.require("util").types;return t||mN&&mN.binding&&mN.binding("util")}catch{}})(),P8=ip&&ip.isTypedArray,Hde=P8?W4(P8):Ude,Wde=Object.prototype,Yde=Wde.hasOwnProperty;function PA(t,s){var a=Ng(t),r=!a&&ude(t),n=!a&&!r&&_A(t),i=!a&&!r&&!n&&Hde(t),o=a||r||n||i,l=o?ode(t.length,String):[],c=l.length;for(var m in t)(s||Yde.call(t,m))&&!(o&&(m=="length"||n&&(m=="offset"||m=="parent")||i&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||gde(m,c)))&&l.push(m);return l}var Gde=Object.prototype;function Y4(t){var s=t&&t.constructor,a=typeof s=="function"&&s.prototype||Gde;return t===a}var Kde=xA(Object.keys,Object),Qde=Object.prototype,Zde=Qde.hasOwnProperty;function Xde(t){if(!Y4(t))return Kde(t);var s=[];for(var a in Object(t))Zde.call(t,a)&&a!="constructor"&&s.push(a);return s}function kA(t){return t!=null&&SA(t.length)&&!bA(t)}function G4(t){return kA(t)?PA(t):Xde(t)}function Jde(t,s){return t&&Fv(s,G4(s),t)}function eue(t){var s=[];if(t!=null)for(var a in Object(t))s.push(a);return s}var tue=Object.prototype,sue=tue.hasOwnProperty;function aue(t){if(!jg(t))return eue(t);var s=Y4(t),a=[];for(var r in t)r=="constructor"&&(s||!sue.call(t,r))||a.push(r);return a}function K4(t){return kA(t)?PA(t,!0):aue(t)}function rue(t,s){return t&&Fv(s,K4(s),t)}var EA=typeof oi=="object"&&oi&&!oi.nodeType&&oi,k8=EA&&typeof li=="object"&&li&&!li.nodeType&&li,nue=k8&&k8.exports===EA,E8=nue?rl.Buffer:void 0,T8=E8?E8.allocUnsafe:void 0;function iue(t,s){if(s)return t.slice();var a=t.length,r=T8?T8(a):new t.constructor(a);return t.copy(r),r}function TA(t,s){var a=-1,r=t.length;for(s||(s=Array(r));++a<r;)s[a]=t[a];return s}function oue(t,s){for(var a=-1,r=t==null?0:t.length,n=0,i=[];++a<r;){var o=t[a];s(o,a,t)&&(i[n++]=o)}return i}function MA(){return[]}var lue=Object.prototype,cue=lue.propertyIsEnumerable,M8=Object.getOwnPropertySymbols,Q4=M8?function(t){return t==null?[]:(t=Object(t),oue(M8(t),function(s){return cue.call(t,s)}))}:MA;function due(t,s){return Fv(t,Q4(t),s)}function DA(t,s){for(var a=-1,r=s.length,n=t.length;++a<r;)t[n+a]=s[a];return t}var uue=Object.getOwnPropertySymbols,RA=uue?function(t){for(var s=[];t;)DA(s,Q4(t)),t=H4(t);return s}:MA;function mue(t,s){return Fv(t,RA(t),s)}function AA(t,s,a){var r=s(t);return Ng(t)?r:DA(r,a(t))}function pue(t){return AA(t,G4,Q4)}function hue(t){return AA(t,K4,RA)}var s_=Nu(rl,"DataView"),a_=Nu(rl,"Promise"),r_=Nu(rl,"Set"),n_=Nu(rl,"WeakMap"),D8="[object Map]",fue="[object Object]",R8="[object Promise]",A8="[object Set]",I8="[object WeakMap]",O8="[object DataView]",xue=ju(s_),gue=ju(_x),yue=ju(a_),bue=ju(r_),vue=ju(n_),Tl=bu;(s_&&Tl(new s_(new ArrayBuffer(1)))!=O8||_x&&Tl(new _x)!=D8||a_&&Tl(a_.resolve())!=R8||r_&&Tl(new r_)!=A8||n_&&Tl(new n_)!=I8)&&(Tl=function(t){var s=bu(t),a=s==fue?t.constructor:void 0,r=a?ju(a):"";if(r)switch(r){case xue:return O8;case gue:return D8;case yue:return R8;case bue:return A8;case vue:return I8}return s});var jue=Object.prototype,Nue=jue.hasOwnProperty;function wue(t){var s=t.length,a=new t.constructor(s);return s&&typeof t[0]=="string"&&Nue.call(t,"index")&&(a.index=t.index,a.input=t.input),a}var F8=rl.Uint8Array;function Z4(t){var s=new t.constructor(t.byteLength);return new F8(s).set(new F8(t)),s}function _ue(t,s){var a=s?Z4(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}var Sue=/\w*$/;function Cue(t){var s=new t.constructor(t.source,Sue.exec(t));return s.lastIndex=t.lastIndex,s}var L8=Kc?Kc.prototype:void 0,$8=L8?L8.valueOf:void 0;function Pue(t){return $8?Object($8.call(t)):{}}function kue(t,s){var a=s?Z4(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}var Eue="[object Boolean]",Tue="[object Date]",Mue="[object Map]",Due="[object Number]",Rue="[object RegExp]",Aue="[object Set]",Iue="[object String]",Oue="[object Symbol]",Fue="[object ArrayBuffer]",Lue="[object DataView]",$ue="[object Float32Array]",zue="[object Float64Array]",que="[object Int8Array]",Bue="[object Int16Array]",Uue="[object Int32Array]",Vue="[object Uint8Array]",Hue="[object Uint8ClampedArray]",Wue="[object Uint16Array]",Yue="[object Uint32Array]";function Gue(t,s,a){var r=t.constructor;switch(s){case Fue:return Z4(t);case Eue:case Tue:return new r(+t);case Lue:return _ue(t,a);case $ue:case zue:case que:case Bue:case Uue:case Vue:case Hue:case Wue:case Yue:return kue(t,a);case Mue:return new r;case Due:case Iue:return new r(t);case Rue:return Cue(t);case Aue:return new r;case Oue:return Pue(t)}}var z8=Object.create,Kue=(function(){function t(){}return function(s){if(!jg(s))return{};if(z8)return z8(s);t.prototype=s;var a=new t;return t.prototype=void 0,a}})();function Que(t){return typeof t.constructor=="function"&&!Y4(t)?Kue(H4(t)):{}}var Zue="[object Map]";function Xue(t){return vu(t)&&Tl(t)==Zue}var q8=ip&&ip.isMap,Jue=q8?W4(q8):Xue,eme="[object Set]";function tme(t){return vu(t)&&Tl(t)==eme}var B8=ip&&ip.isSet,sme=B8?W4(B8):tme,ame=1,rme=2,nme=4,IA="[object Arguments]",ime="[object Array]",ome="[object Boolean]",lme="[object Date]",cme="[object Error]",OA="[object Function]",dme="[object GeneratorFunction]",ume="[object Map]",mme="[object Number]",FA="[object Object]",pme="[object RegExp]",hme="[object Set]",fme="[object String]",xme="[object Symbol]",gme="[object WeakMap]",yme="[object ArrayBuffer]",bme="[object DataView]",vme="[object Float32Array]",jme="[object Float64Array]",Nme="[object Int8Array]",wme="[object Int16Array]",_me="[object Int32Array]",Sme="[object Uint8Array]",Cme="[object Uint8ClampedArray]",Pme="[object Uint16Array]",kme="[object Uint32Array]",La={};La[IA]=La[ime]=La[yme]=La[bme]=La[ome]=La[lme]=La[vme]=La[jme]=La[Nme]=La[wme]=La[_me]=La[ume]=La[mme]=La[FA]=La[pme]=La[hme]=La[fme]=La[xme]=La[Sme]=La[Cme]=La[Pme]=La[kme]=!0;La[cme]=La[OA]=La[gme]=!1;function Kf(t,s,a,r,n,i){var o,l=s&ame,c=s&rme,m=s&nme;if(o!==void 0)return o;if(!jg(t))return t;var u=Ng(t);if(u){if(o=wue(t),!l)return TA(t,o)}else{var h=Tl(t),f=h==OA||h==dme;if(_A(t))return iue(t,l);if(h==FA||h==IA||f&&!n){if(o=c||f?{}:Que(t),!l)return c?mue(t,rue(o,t)):due(t,Jde(o,t))}else{if(!La[h])return n?t:{};o=Gue(t,h,l)}}i||(i=new Sp);var b=i.get(t);if(b)return b;i.set(t,o),sme(t)?t.forEach(function(j){o.add(Kf(j,s,a,j,t,i))}):Jue(t)&&t.forEach(function(j,v){o.set(v,Kf(j,s,a,v,t,i))});var w=m?c?hue:pue:c?K4:G4,S=u?void 0:w(t);return rde(S||t,function(j,v){S&&(v=j,j=t[v]),jA(o,v,Kf(j,s,a,v,t,i))}),o}var Eme=1,Tme=4;function ly(t){return Kf(t,Eme|Tme)}var pN,U8;function Mme(){if(U8)return pN;U8=1;var t=Array.isArray,s=Object.keys,a=Object.prototype.hasOwnProperty,r=typeof Element<"u";function n(i,o){if(i===o)return!0;if(i&&o&&typeof i=="object"&&typeof o=="object"){var l=t(i),c=t(o),m,u,h;if(l&&c){if(u=i.length,u!=o.length)return!1;for(m=u;m--!==0;)if(!n(i[m],o[m]))return!1;return!0}if(l!=c)return!1;var f=i instanceof Date,b=o instanceof Date;if(f!=b)return!1;if(f&&b)return i.getTime()==o.getTime();var w=i instanceof RegExp,S=o instanceof RegExp;if(w!=S)return!1;if(w&&S)return i.toString()==o.toString();var j=s(i);if(u=j.length,u!==s(o).length)return!1;for(m=u;m--!==0;)if(!a.call(o,j[m]))return!1;if(r&&i instanceof Element&&o instanceof Element)return i===o;for(m=u;m--!==0;)if(h=j[m],!(h==="_owner"&&i.$$typeof)&&!n(i[h],o[h]))return!1;return!0}return i!==i&&o!==o}return pN=function(o,l){try{return n(o,l)}catch(c){if(c.message&&c.message.match(/stack|recursion/i)||c.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",c.name,c.message),!1;throw c}},pN}var Dme=Mme();const Id=Ji(Dme);var Rme=4;function V8(t){return Kf(t,Rme)}function LA(t,s){for(var a=-1,r=t==null?0:t.length,n=Array(r);++a<r;)n[a]=s(t[a],a,t);return n}var Ame="[object Symbol]";function X4(t){return typeof t=="symbol"||vu(t)&&bu(t)==Ame}var Ime="Expected a function";function J4(t,s){if(typeof t!="function"||s!=null&&typeof s!="function")throw new TypeError(Ime);var a=function(){var r=arguments,n=s?s.apply(this,r):r[0],i=a.cache;if(i.has(n))return i.get(n);var o=t.apply(this,r);return a.cache=i.set(n,o)||i,o};return a.cache=new(J4.Cache||ad),a}J4.Cache=ad;var Ome=500;function Fme(t){var s=J4(t,function(r){return a.size===Ome&&a.clear(),r}),a=s.cache;return s}var Lme=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$me=/\\(\\)?/g,zme=Fme(function(t){var s=[];return t.charCodeAt(0)===46&&s.push(""),t.replace(Lme,function(a,r,n,i){s.push(n?i.replace($me,"$1"):r||a)}),s});function qme(t){if(typeof t=="string"||X4(t))return t;var s=t+"";return s=="0"&&1/t==-1/0?"-0":s}var H8=Kc?Kc.prototype:void 0,W8=H8?H8.toString:void 0;function $A(t){if(typeof t=="string")return t;if(Ng(t))return LA(t,$A)+"";if(X4(t))return W8?W8.call(t):"";var s=t+"";return s=="0"&&1/t==-1/0?"-0":s}function Bme(t){return t==null?"":$A(t)}function zA(t){return Ng(t)?LA(t,qme):X4(t)?[t]:TA(zme(Bme(t)))}function Ar(){return Ar=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ar.apply(this,arguments)}function qA(t,s){if(t==null)return{};var a={},r=Object.keys(t),n,i;for(i=0;i<r.length;i++)n=r[i],!(s.indexOf(n)>=0)&&(a[n]=t[n]);return a}var Lv=g.createContext(void 0);Lv.displayName="FormikContext";Lv.Provider;Lv.Consumer;function Ume(){var t=g.useContext(Lv);return t}var Di=function(s){return typeof s=="function"},$v=function(s){return s!==null&&typeof s=="object"},Vme=function(s){return String(Math.floor(Number(s)))===s},hN=function(s){return Object.prototype.toString.call(s)==="[object String]"},fN=function(s){return $v(s)&&Di(s.then)};function Dn(t,s,a,r){r===void 0&&(r=0);for(var n=zA(s);t&&r<n.length;)t=t[n[r++]];return r!==n.length&&!t||t===void 0?a:t}function Jd(t,s,a){for(var r=V8(t),n=r,i=0,o=zA(s);i<o.length-1;i++){var l=o[i],c=Dn(t,o.slice(0,i+1));if(c&&($v(c)||Array.isArray(c)))n=n[l]=V8(c);else{var m=o[i+1];n=n[l]=Vme(m)&&Number(m)>=0?[]:{}}}return(i===0?t:n)[o[i]]===a?t:(a===void 0?delete n[o[i]]:n[o[i]]=a,i===0&&a===void 0&&delete r[o[i]],r)}function BA(t,s,a,r){a===void 0&&(a=new WeakMap),r===void 0&&(r={});for(var n=0,i=Object.keys(t);n<i.length;n++){var o=i[n],l=t[o];$v(l)?a.get(l)||(a.set(l,!0),r[o]=Array.isArray(l)?[]:{},BA(l,s,a,r[o])):r[o]=s}return r}function Hme(t,s){switch(s.type){case"SET_VALUES":return Ar({},t,{values:s.payload});case"SET_TOUCHED":return Ar({},t,{touched:s.payload});case"SET_ERRORS":return Id(t.errors,s.payload)?t:Ar({},t,{errors:s.payload});case"SET_STATUS":return Ar({},t,{status:s.payload});case"SET_ISSUBMITTING":return Ar({},t,{isSubmitting:s.payload});case"SET_ISVALIDATING":return Ar({},t,{isValidating:s.payload});case"SET_FIELD_VALUE":return Ar({},t,{values:Jd(t.values,s.payload.field,s.payload.value)});case"SET_FIELD_TOUCHED":return Ar({},t,{touched:Jd(t.touched,s.payload.field,s.payload.value)});case"SET_FIELD_ERROR":return Ar({},t,{errors:Jd(t.errors,s.payload.field,s.payload.value)});case"RESET_FORM":return Ar({},t,s.payload);case"SET_FORMIK_STATE":return s.payload(t);case"SUBMIT_ATTEMPT":return Ar({},t,{touched:BA(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":return Ar({},t,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Ar({},t,{isSubmitting:!1});default:return t}}var Cd={},cy={};function xt(t){var s=t.validateOnChange,a=s===void 0?!0:s,r=t.validateOnBlur,n=r===void 0?!0:r,i=t.validateOnMount,o=i===void 0?!1:i,l=t.isInitialValid,c=t.enableReinitialize,m=c===void 0?!1:c,u=t.onSubmit,h=qA(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),f=Ar({validateOnChange:a,validateOnBlur:n,validateOnMount:o,onSubmit:u},h),b=g.useRef(f.initialValues),w=g.useRef(f.initialErrors||Cd),S=g.useRef(f.initialTouched||cy),j=g.useRef(f.initialStatus),v=g.useRef(!1),N=g.useRef({});g.useEffect(function(){return v.current=!0,function(){v.current=!1}},[]);var C=g.useState(0),P=C[1],E=g.useRef({values:ly(f.initialValues),errors:ly(f.initialErrors)||Cd,touched:ly(f.initialTouched)||cy,status:ly(f.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),M=E.current,T=g.useCallback(function(ye){var Ye=E.current;E.current=Hme(Ye,ye),Ye!==E.current&&P(function(at){return at+1})},[]),A=g.useCallback(function(ye,Ye){return new Promise(function(at,bt){var ct=f.validate(ye,Ye);ct==null?at(Cd):fN(ct)?ct.then(function(ht){at(ht||Cd)},function(ht){bt(ht)}):at(ct)})},[f.validate]),L=g.useCallback(function(ye,Ye){var at=f.validationSchema,bt=Di(at)?at(Ye):at,ct=Ye&&bt.validateAt?bt.validateAt(Ye,ye):Yme(ye,bt);return new Promise(function(ht,Et){ct.then(function(){ht(Cd)},function(be){be.name==="ValidationError"?ht(Wme(be)):Et(be)})})},[f.validationSchema]),F=g.useCallback(function(ye,Ye){return new Promise(function(at){return at(N.current[ye].validate(Ye))})},[]),z=g.useCallback(function(ye){var Ye=Object.keys(N.current).filter(function(bt){return Di(N.current[bt].validate)}),at=Ye.length>0?Ye.map(function(bt){return F(bt,Dn(ye,bt))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(at).then(function(bt){return bt.reduce(function(ct,ht,Et){return ht==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||ht&&(ct=Jd(ct,Ye[Et],ht)),ct},{})})},[F]),I=g.useCallback(function(ye){return Promise.all([z(ye),f.validationSchema?L(ye):{},f.validate?A(ye):{}]).then(function(Ye){var at=Ye[0],bt=Ye[1],ct=Ye[2],ht=t_.all([at,bt,ct],{arrayMerge:Gme});return ht})},[f.validate,f.validationSchema,z,A,L]),Q=ki(function(ye){return ye===void 0&&(ye=M.values),T({type:"SET_ISVALIDATING",payload:!0}),I(ye).then(function(Ye){return v.current&&(T({type:"SET_ISVALIDATING",payload:!1}),T({type:"SET_ERRORS",payload:Ye})),Ye})});g.useEffect(function(){o&&v.current===!0&&Id(b.current,f.initialValues)&&Q(b.current)},[o,Q]);var Y=g.useCallback(function(ye){var Ye=ye&&ye.values?ye.values:b.current,at=ye&&ye.errors?ye.errors:w.current?w.current:f.initialErrors||{},bt=ye&&ye.touched?ye.touched:S.current?S.current:f.initialTouched||{},ct=ye&&ye.status?ye.status:j.current?j.current:f.initialStatus;b.current=Ye,w.current=at,S.current=bt,j.current=ct;var ht=function(){T({type:"RESET_FORM",payload:{isSubmitting:!!ye&&!!ye.isSubmitting,errors:at,touched:bt,status:ct,values:Ye,isValidating:!!ye&&!!ye.isValidating,submitCount:ye&&ye.submitCount&&typeof ye.submitCount=="number"?ye.submitCount:0}})};if(f.onReset){var Et=f.onReset(M.values,le);fN(Et)?Et.then(ht):ht()}else ht()},[f.initialErrors,f.initialStatus,f.initialTouched,f.onReset]);g.useEffect(function(){v.current===!0&&!Id(b.current,f.initialValues)&&m&&(b.current=f.initialValues,Y(),o&&Q(b.current))},[m,f.initialValues,Y,o,Q]),g.useEffect(function(){m&&v.current===!0&&!Id(w.current,f.initialErrors)&&(w.current=f.initialErrors||Cd,T({type:"SET_ERRORS",payload:f.initialErrors||Cd}))},[m,f.initialErrors]),g.useEffect(function(){m&&v.current===!0&&!Id(S.current,f.initialTouched)&&(S.current=f.initialTouched||cy,T({type:"SET_TOUCHED",payload:f.initialTouched||cy}))},[m,f.initialTouched]),g.useEffect(function(){m&&v.current===!0&&!Id(j.current,f.initialStatus)&&(j.current=f.initialStatus,T({type:"SET_STATUS",payload:f.initialStatus}))},[m,f.initialStatus,f.initialTouched]);var B=ki(function(ye){if(N.current[ye]&&Di(N.current[ye].validate)){var Ye=Dn(M.values,ye),at=N.current[ye].validate(Ye);return fN(at)?(T({type:"SET_ISVALIDATING",payload:!0}),at.then(function(bt){return bt}).then(function(bt){T({type:"SET_FIELD_ERROR",payload:{field:ye,value:bt}}),T({type:"SET_ISVALIDATING",payload:!1})})):(T({type:"SET_FIELD_ERROR",payload:{field:ye,value:at}}),Promise.resolve(at))}else if(f.validationSchema)return T({type:"SET_ISVALIDATING",payload:!0}),L(M.values,ye).then(function(bt){return bt}).then(function(bt){T({type:"SET_FIELD_ERROR",payload:{field:ye,value:Dn(bt,ye)}}),T({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),q=g.useCallback(function(ye,Ye){var at=Ye.validate;N.current[ye]={validate:at}},[]),V=g.useCallback(function(ye){delete N.current[ye]},[]),G=ki(function(ye,Ye){T({type:"SET_TOUCHED",payload:ye});var at=Ye===void 0?n:Ye;return at?Q(M.values):Promise.resolve()}),H=g.useCallback(function(ye){T({type:"SET_ERRORS",payload:ye})},[]),D=ki(function(ye,Ye){var at=Di(ye)?ye(M.values):ye;T({type:"SET_VALUES",payload:at});var bt=Ye===void 0?a:Ye;return bt?Q(at):Promise.resolve()}),R=g.useCallback(function(ye,Ye){T({type:"SET_FIELD_ERROR",payload:{field:ye,value:Ye}})},[]),$=ki(function(ye,Ye,at){var bt=Di(Ye)?Ye(Dn(M.values,ye)):Ye;T({type:"SET_FIELD_VALUE",payload:{field:ye,value:bt}});var ct=at===void 0?a:at;return ct?Q(Jd(M.values,ye,bt)):Promise.resolve()}),W=g.useCallback(function(ye,Ye){var at=Ye,bt=ye,ct;if(!hN(ye)){ye.persist&&ye.persist();var ht=ye.target?ye.target:ye.currentTarget,Et=ht.type,be=ht.name,Oe=ht.id,Le=ht.value,jt=ht.checked;ht.outerHTML;var Jt=ht.options,Kt=ht.multiple;at=Ye||be||Oe,bt=/number|range/.test(Et)?(ct=parseFloat(Le),isNaN(ct)?"":ct):/checkbox/.test(Et)?Qme(Dn(M.values,at),jt,Le):Jt&&Kt?Kme(Jt):Le}at&&$(at,bt)},[$,M.values]),J=ki(function(ye){if(hN(ye))return function(Ye){return W(Ye,ye)};W(ye)}),te=ki(function(ye,Ye,at){Ye===void 0&&(Ye=!0),T({type:"SET_FIELD_TOUCHED",payload:{field:ye,value:Ye}});var bt=at===void 0?n:at;return bt?Q(M.values):Promise.resolve()}),ee=g.useCallback(function(ye,Ye){ye.persist&&ye.persist();var at=ye.target,bt=at.name,ct=at.id;at.outerHTML;var ht=Ye||bt||ct;te(ht,!0)},[te]),ae=ki(function(ye){if(hN(ye))return function(Ye){return ee(Ye,ye)};ee(ye)}),ce=g.useCallback(function(ye){Di(ye)?T({type:"SET_FORMIK_STATE",payload:ye}):T({type:"SET_FORMIK_STATE",payload:function(){return ye}})},[]),he=g.useCallback(function(ye){T({type:"SET_STATUS",payload:ye})},[]),ne=g.useCallback(function(ye){T({type:"SET_ISSUBMITTING",payload:ye})},[]),xe=ki(function(){return T({type:"SUBMIT_ATTEMPT"}),Q().then(function(ye){var Ye=ye instanceof Error,at=!Ye&&Object.keys(ye).length===0;if(at){var bt;try{if(bt=pe(),bt===void 0)return}catch(ct){throw ct}return Promise.resolve(bt).then(function(ct){return v.current&&T({type:"SUBMIT_SUCCESS"}),ct}).catch(function(ct){if(v.current)throw T({type:"SUBMIT_FAILURE"}),ct})}else if(v.current&&(T({type:"SUBMIT_FAILURE"}),Ye))throw ye})}),ge=ki(function(ye){ye&&ye.preventDefault&&Di(ye.preventDefault)&&ye.preventDefault(),ye&&ye.stopPropagation&&Di(ye.stopPropagation)&&ye.stopPropagation(),xe().catch(function(Ye){console.warn("Warning: An unhandled error was caught from submitForm()",Ye)})}),le={resetForm:Y,validateForm:Q,validateField:B,setErrors:H,setFieldError:R,setFieldTouched:te,setFieldValue:$,setStatus:he,setSubmitting:ne,setTouched:G,setValues:D,setFormikState:ce,submitForm:xe},pe=ki(function(){return u(M.values,le)}),Re=ki(function(ye){ye&&ye.preventDefault&&Di(ye.preventDefault)&&ye.preventDefault(),ye&&ye.stopPropagation&&Di(ye.stopPropagation)&&ye.stopPropagation(),Y()}),Se=g.useCallback(function(ye){return{value:Dn(M.values,ye),error:Dn(M.errors,ye),touched:!!Dn(M.touched,ye),initialValue:Dn(b.current,ye),initialTouched:!!Dn(S.current,ye),initialError:Dn(w.current,ye)}},[M.errors,M.touched,M.values]),He=g.useCallback(function(ye){return{setValue:function(at,bt){return $(ye,at,bt)},setTouched:function(at,bt){return te(ye,at,bt)},setError:function(at){return R(ye,at)}}},[$,te,R]),ze=g.useCallback(function(ye){var Ye=$v(ye),at=Ye?ye.name:ye,bt=Dn(M.values,at),ct={name:at,value:bt,onChange:J,onBlur:ae};if(Ye){var ht=ye.type,Et=ye.value,be=ye.as,Oe=ye.multiple;ht==="checkbox"?Et===void 0?ct.checked=!!bt:(ct.checked=!!(Array.isArray(bt)&&~bt.indexOf(Et)),ct.value=Et):ht==="radio"?(ct.checked=bt===Et,ct.value=Et):be==="select"&&Oe&&(ct.value=ct.value||[],ct.multiple=!0)}return ct},[ae,J,M.values]),st=g.useMemo(function(){return!Id(b.current,M.values)},[b.current,M.values]),ke=g.useMemo(function(){return typeof l<"u"?st?M.errors&&Object.keys(M.errors).length===0:l!==!1&&Di(l)?l(f):l:M.errors&&Object.keys(M.errors).length===0},[l,st,M.errors,f]),We=Ar({},M,{initialValues:b.current,initialErrors:w.current,initialTouched:S.current,initialStatus:j.current,handleBlur:ae,handleChange:J,handleReset:Re,handleSubmit:ge,resetForm:Y,setErrors:H,setFormikState:ce,setFieldTouched:te,setFieldValue:$,setFieldError:R,setStatus:he,setSubmitting:ne,setTouched:G,setValues:D,submitForm:xe,validateForm:Q,validateField:B,isValid:ke,dirty:st,unregisterField:V,registerField:q,getFieldProps:ze,getFieldMeta:Se,getFieldHelpers:He,validateOnBlur:n,validateOnChange:a,validateOnMount:o});return We}function Wme(t){var s={};if(t.inner){if(t.inner.length===0)return Jd(s,t.path,t.message);for(var n=t.inner,a=Array.isArray(n),r=0,n=a?n:n[Symbol.iterator]();;){var i;if(a){if(r>=n.length)break;i=n[r++]}else{if(r=n.next(),r.done)break;i=r.value}var o=i;Dn(s,o.path)||(s=Jd(s,o.path,o.message))}}return s}function Yme(t,s,a,r){a===void 0&&(a=!1);var n=i_(t);return s[a?"validateSync":"validate"](n,{abortEarly:!1,context:n})}function i_(t){var s=Array.isArray(t)?[]:{};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var r=String(a);Array.isArray(t[r])===!0?s[r]=t[r].map(function(n){return Array.isArray(n)===!0||j8(n)?i_(n):n!==""?n:void 0}):j8(t[r])?s[r]=i_(t[r]):s[r]=t[r]!==""?t[r]:void 0}return s}function Gme(t,s,a){var r=t.slice();return s.forEach(function(i,o){if(typeof r[o]>"u"){var l=a.clone!==!1,c=l&&a.isMergeableObject(i);r[o]=c?t_(Array.isArray(i)?[]:{},i,a):i}else a.isMergeableObject(i)?r[o]=t_(t[o],i,a):t.indexOf(i)===-1&&r.push(i)}),r}function Kme(t){return Array.from(t).filter(function(s){return s.selected}).map(function(s){return s.value})}function Qme(t,s,a){if(typeof t=="boolean")return!!s;var r=[],n=!1,i=-1;if(Array.isArray(t))r=t,i=t.indexOf(a),n=i>=0;else if(!a||a=="true"||a=="false")return!!s;return s&&a&&!n?r.concat(a):n?r.slice(0,i).concat(r.slice(i+1)):r}var Zme=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?g.useLayoutEffect:g.useEffect;function ki(t){var s=g.useRef(t);return Zme(function(){s.current=t}),g.useCallback(function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return s.current.apply(void 0,r)},[])}var Xme=g.forwardRef(function(t,s){var a=t.action,r=qA(t,["action"]),n=a??"#",i=Ume(),o=i.handleReset,l=i.handleSubmit;return g.createElement("form",Ar({onSubmit:l,ref:s,onReset:o,action:n},r))});Xme.displayName="Form";const Jme=(t,s)=>{if(s)return s;switch(t){case"small":return 30;case"medium":return 45;case"large":return 60;case"larger":return 75;case"extra-large":return 85;default:return 40}},it=({open:t,setOpen:s,title:a,children:r,width:n,size:i="medium",anchor:o="right",fullWidth:l=!1})=>{const c=xi(),m=mg(c.breakpoints.down("md")),u=Jme(i,n),h=()=>{s(!1)},f=()=>l||m?"100%":`${u}%`;return e.jsx(NX,{anchor:o,open:t,onClose:h,slotProps:{paper:{style:{width:f()}}},children:e.jsxs(y,{className:"!h-full !flex !flex-col",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !py-2 !px-4 !border-b !border-gray-200 !min-h-16",children:[e.jsx("p",{className:"!font-semibold text-lg !text-gray-900",children:a}),e.jsx(ta,{onClick:h,className:"!text-gray-500 hover:!bg-gray-100 hover:!text-gray-700",children:e.jsx(Vr,{})})]}),e.jsx(y,{className:"!flex-1 !overflow-auto",children:r})]})})},epe=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:je({},t)}}}}),UA={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(t,s)=>`Select ${t}. ${s?`Selected time is ${s}`:"No time selected"}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:t=>t?`Choose date, selected date is ${t}`:"Choose date",openTimePickerDialogue:t=>t?`Choose time, selected time is ${t}`:"Choose time",openRangePickerDialogue:t=>t?`Choose range, selected range is ${t}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},tpe=UA;epe(UA);const spe=["localeText"],o_=g.createContext(null),VA=function(s){const{localeText:a}=s,r=as(s,spe),{adapter:n,localeText:i}=g.useContext(o_)??{adapter:void 0,localeText:void 0},o=Ls({props:r,name:"MuiLocalizationProvider"}),{children:l,dateAdapter:c,dateFormats:m,dateLibInstance:u,adapterLocale:h,localeText:f}=o,b=g.useMemo(()=>je({},f,i,a),[f,i,a]),w=g.useMemo(()=>{if(!c)return n||null;const v=new c({locale:h,formats:m,instance:u});if(!v.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return v},[c,h,m,u,n]),S=g.useMemo(()=>w?{minDate:w.date("1900-01-01T00:00:00.000"),maxDate:w.date("2099-12-31T00:00:00.000")}:null,[w]),j=g.useMemo(()=>({utils:w,adapter:w,defaultDates:S,localeText:b}),[S,w,b]);return e.jsx(o_.Provider,{value:j,children:l})},eS=()=>{const t=g.useContext(o_);if(t===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const s=g.useMemo(()=>je({},tpe,t.localeText),[t.localeText]);return g.useMemo(()=>je({},t,{localeText:s}),[t,s])},Es=()=>eS().adapter,Zr=()=>eS().localeText,l_=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],c_=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],HA=["minDateTime","maxDateTime"],ape=[...l_,...c_,...HA],Cp=t=>ape.reduce((s,a)=>(t.hasOwnProperty(a)&&(s[a]=t[a]),s),{}),rpe=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],WA=(t,s)=>g.useMemo(()=>{const a=je({},t),r={},n=i=>{a.hasOwnProperty(i)&&(r[i]=a[i],delete a[i])};return rpe.forEach(n),s==="date"?l_.forEach(n):s==="time"?c_.forEach(n):s==="date-time"&&(l_.forEach(n),c_.forEach(n),HA.forEach(n)),{forwardedProps:a,internalProps:r}},[t,s]),zo=(t,s)=>t.length!==s.length?!1:s.every(a=>t.includes(a)),tS=({openTo:t,defaultOpenTo:s,views:a,defaultViews:r})=>{const n=a??r;let i;if(t!=null)i=t;else if(n.includes(s))i=s;else if(n.length>0)i=n[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:n,openTo:i}},Sb=(t,s,a)=>{let r=s;return r=t.setHours(r,t.getHours(a)),r=t.setMinutes(r,t.getMinutes(a)),r=t.setSeconds(r,t.getSeconds(a)),r=t.setMilliseconds(r,t.getMilliseconds(a)),r},Cx=({date:t,disableFuture:s,disablePast:a,maxDate:r,minDate:n,isDateDisabled:i,adapter:o,timezone:l})=>{const c=Sb(o,o.date(void 0,l),t);a&&o.isBefore(n,c)&&(n=c),s&&o.isAfter(r,c)&&(r=c);let m=t,u=t;for(o.isBefore(t,n)&&(m=n,u=null),o.isAfter(t,r)&&(u&&(u=r),m=null);m||u;){if(m&&o.isAfter(m,r)&&(m=null),u&&o.isBefore(u,n)&&(u=null),m){if(!i(m))return m;m=o.addDays(m,1)}if(u){if(!i(u))return u;u=o.addDays(u,-1)}}return null},npe=(t,s)=>t.isValid(s)?s:null,Cb=(t,s,a)=>s==null||!t.isValid(s)?a:s,ipe=(t,s,a)=>!t.isValid(s)&&s!=null&&!t.isValid(a)&&a!=null?!0:t.isEqual(s,a),sS=(t,s)=>{const r=[t.startOfYear(s)];for(;r.length<12;){const n=r[r.length-1];r.push(t.addMonths(n,1))}return r},aS=(t,s,a)=>a==="date"?t.startOfDay(t.date(void 0,s)):t.date(void 0,s),mo=(t,s)=>{const a=t.setHours(t.date(),s==="am"?2:14);return t.format(a,"meridiem")},YA=["year","month","day"],op=t=>YA.includes(t),Px=(t,{format:s,views:a},r)=>{if(s!=null)return s;const n=t.formats;return zo(a,["year"])?n.year:zo(a,["month"])?n.month:zo(a,["day"])?n.dayOfMonth:zo(a,["month","year"])?`${n.month} ${n.year}`:zo(a,["day","month"])?`${n.month} ${n.dayOfMonth}`:r?/en/.test(t.getCurrentLocaleCode())?n.normalDateWithWeekday:n.normalDate:n.keyboardDate},ope=(t,s)=>{const a=t.startOfWeek(s);return[0,1,2,3,4,5,6].map(r=>t.addDays(a,r))},GA=(t,s)=>{const a=t.formatTokenMap[s];if(a==null)throw new Error([`MUI X: The token "${s}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof a=="string"?{type:a,contentType:a==="meridiem"?"letter":"digit",maxLength:void 0}:{type:a.sectionType,contentType:a.contentType,maxLength:a.maxLength}},zv=(t,s)=>{const a=[],r=t.date(void 0,"default"),n=t.startOfWeek(r),i=t.endOfWeek(r);let o=n;for(;t.isBefore(o,i);)a.push(o),o=t.addDays(o,1);return a.map(l=>t.formatByString(l,s))},KA=(t,s,a,r)=>{switch(a){case"month":return sS(t,t.date(void 0,s)).map(n=>t.formatByString(n,r));case"weekDay":return zv(t,r);case"meridiem":{const n=t.date(void 0,s);return[t.startOfDay(n),t.endOfDay(n)].map(i=>t.formatByString(i,r))}default:return[]}},Y8="s",lpe=["0","1","2","3","4","5","6","7","8","9"],cpe=t=>{const s=t.date(void 0);return t.formatByString(t.setSeconds(s,0),Y8)==="0"?lpe:Array.from({length:10}).map((r,n)=>t.formatByString(t.setSeconds(s,n),Y8))},uu=(t,s)=>{if(s[0]==="0")return t;const a=[];let r="";for(let n=0;n<t.length;n+=1){r+=t[n];const i=s.indexOf(r);i>-1&&(a.push(i.toString()),r="")}return a.join("")},rS=(t,s)=>s[0]==="0"?t:t.split("").map(a=>s[Number(a)]).join(""),G8=(t,s)=>{const a=uu(t,s);return a!==" "&&!Number.isNaN(Number(a))},nS=(t,s)=>Number(t).toString().padStart(s,"0"),QA=(t,s,a,r,n)=>{if(n.type==="day"&&n.contentType==="digit-with-letter"){const o=t.setDate(a.longestMonth,s);return t.formatByString(o,n.format)}let i=s.toString();return n.hasLeadingZerosInInput&&(i=nS(i,n.maxLength)),rS(i,r)},iS=(t,s,a)=>{let r=t.value||t.placeholder;const n=s==="non-input"?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;return s==="non-input"&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(r=Number(uu(r,a)).toString()),["input-rtl","input-ltr"].includes(s)&&t.contentType==="digit"&&!n&&r.length===1&&(r=`${r}`),s==="input-rtl"&&(r=`${r}`),r},K8=(t,s,a,r)=>t.formatByString(t.parse(s,a),r),dpe=(t,s)=>t.formatByString(t.date(void 0,"system"),s).length===4,ZA=(t,s,a,r)=>{if(s!=="digit")return!1;const n=t.date(void 0,"default");switch(a){case"year":return t.lib==="dayjs"&&r==="YY"?!0:t.formatByString(t.setYear(n,1),r).startsWith("0");case"month":return t.formatByString(t.startOfYear(n),r).length>1;case"day":return t.formatByString(t.startOfMonth(n),r).length>1;case"weekDay":return t.formatByString(t.startOfWeek(n),r).length>1;case"hours":return t.formatByString(t.setHours(n,1),r).length>1;case"minutes":return t.formatByString(t.setMinutes(n,1),r).length>1;case"seconds":return t.formatByString(t.setSeconds(n,1),r).length>1;default:throw new Error("Invalid section type")}},upe=(t,s,a)=>{const r=s.some(c=>c.type==="day"),n=[],i=[];for(let c=0;c<s.length;c+=1){const m=s[c];r&&m.type==="weekDay"||(n.push(m.format),i.push(iS(m,"non-input",a)))}const o=n.join(" "),l=i.join(" ");return t.parse(l,o)},mpe=t=>t.map(s=>`${s.startSeparator}${s.value||s.placeholder}${s.endSeparator}`).join(""),ppe=(t,s,a)=>{const n=t.map(i=>{const o=iS(i,a?"input-rtl":"input-ltr",s);return`${i.startSeparator}${o}${i.endSeparator}`}).join("");return a?`${n}`:n},hpe=(t,s,a)=>{const r=t.date(void 0,a),n=t.endOfYear(r),i=t.endOfDay(r),{maxDaysInMonth:o,longestMonth:l}=sS(t,r).reduce((c,m)=>{const u=t.getDaysInMonth(m);return u>c.maxDaysInMonth?{maxDaysInMonth:u,longestMonth:m}:c},{maxDaysInMonth:0,longestMonth:null});return{year:({format:c})=>({minimum:0,maximum:dpe(t,c)?9999:99}),month:()=>({minimum:1,maximum:t.getMonth(n)+1}),day:({currentDate:c})=>({minimum:1,maximum:t.isValid(c)?t.getDaysInMonth(c):o,longestMonth:l}),weekDay:({format:c,contentType:m})=>{if(m==="digit"){const u=zv(t,c).map(Number);return{minimum:Math.min(...u),maximum:Math.max(...u)}}return{minimum:1,maximum:7}},hours:({format:c})=>{const m=t.getHours(i);return uu(t.formatByString(t.endOfDay(r),c),s)!==m.toString()?{minimum:1,maximum:Number(uu(t.formatByString(t.startOfDay(r),c),s))}:{minimum:0,maximum:m}},minutes:()=>({minimum:0,maximum:t.getMinutes(i)}),seconds:()=>({minimum:0,maximum:t.getSeconds(i)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},fpe=(t,s,a,r)=>{switch(s.type){case"year":return t.setYear(r,t.getYear(a));case"month":return t.setMonth(r,t.getMonth(a));case"weekDay":{let n=t.formatByString(a,s.format);s.hasLeadingZerosInInput&&(n=nS(n,s.maxLength));const i=zv(t,s.format),o=i.indexOf(n),c=i.indexOf(s.value)-o;return t.addDays(a,c)}case"day":return t.setDate(r,t.getDate(a));case"meridiem":{const n=t.getHours(a)<12,i=t.getHours(r);return n&&i>=12?t.addHours(r,-12):!n&&i<12?t.addHours(r,12):r}case"hours":return t.setHours(r,t.getHours(a));case"minutes":return t.setMinutes(r,t.getMinutes(a));case"seconds":return t.setSeconds(r,t.getSeconds(a));default:return r}},Q8={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},Z8=(t,s,a,r,n)=>[...a].sort((i,o)=>Q8[i.type]-Q8[o.type]).reduce((i,o)=>!n||o.modified?fpe(t,o,s,i):i,r),xpe=()=>navigator.userAgent.toLowerCase().includes("android"),gpe=(t,s)=>{const a={};if(!s)return t.forEach((c,m)=>{const u=m===0?null:m-1,h=m===t.length-1?null:m+1;a[m]={leftIndex:u,rightIndex:h}}),{neighbors:a,startIndex:0,endIndex:t.length-1};const r={},n={};let i=0,o=0,l=t.length-1;for(;l>=0;){o=t.findIndex((c,m)=>m>=i&&c.endSeparator?.includes(" ")&&c.endSeparator!==" / "),o===-1&&(o=t.length-1);for(let c=o;c>=i;c-=1)n[c]=l,r[l]=c,l-=1;i=o+1}return t.forEach((c,m)=>{const u=n[m],h=u===0?null:r[u-1],f=u===t.length-1?null:r[u+1];a[m]={leftIndex:h,rightIndex:f}}),{neighbors:a,startIndex:r[0],endIndex:r[t.length-1]}},d_=(t,s)=>{if(t==null)return null;if(t==="all")return"all";if(typeof t=="string"){const a=s.findIndex(r=>r.type===t);return a===-1?null:a}return t},ype=({adapter:t,format:s})=>{let a=10,r=s,n=t.expandFormat(s);for(;n!==r;)if(r=n,n=t.expandFormat(r),a-=1,a<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return n},bpe=({adapter:t,expandedFormat:s})=>{const a=[],{start:r,end:n}=t.escapedCharacters,i=new RegExp(`(\\${r}[^\\${n}]*\\${n})+`,"g");let o=null;for(;o=i.exec(s);)a.push({start:o.index,end:i.lastIndex-1});return a},vpe=(t,s,a,r)=>{switch(a.type){case"year":return s.fieldYearPlaceholder({digitAmount:t.formatByString(t.date(void 0,"default"),r).length,format:r});case"month":return s.fieldMonthPlaceholder({contentType:a.contentType,format:r});case"day":return s.fieldDayPlaceholder({format:r});case"weekDay":return s.fieldWeekDayPlaceholder({contentType:a.contentType,format:r});case"hours":return s.fieldHoursPlaceholder({format:r});case"minutes":return s.fieldMinutesPlaceholder({format:r});case"seconds":return s.fieldSecondsPlaceholder({format:r});case"meridiem":return s.fieldMeridiemPlaceholder({format:r});default:return r}},jpe=({adapter:t,date:s,shouldRespectLeadingZeros:a,localeText:r,localizedDigits:n,now:i,token:o,startSeparator:l})=>{if(o==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=GA(t,o),m=ZA(t,c.contentType,c.type,o),u=a?m:c.contentType==="digit",h=t.isValid(s);let f=h?t.formatByString(s,o):"",b=null;if(u)if(m)b=f===""?t.formatByString(i,o).length:f.length;else{if(c.maxLength==null)throw new Error(`MUI X: The token ${o} should have a 'maxLength' property on it's adapter`);b=c.maxLength,h&&(f=rS(nS(uu(f,n),b),n))}return je({},c,{format:o,maxLength:b,value:f,placeholder:vpe(t,r,c,o),hasLeadingZerosInFormat:m,hasLeadingZerosInInput:u,startSeparator:l,endSeparator:"",modified:!1})},Npe=t=>{const{adapter:s,expandedFormat:a,escapedParts:r}=t,n=s.date(void 0),i=[];let o="";const l=Object.keys(s.formatTokenMap).sort((b,w)=>w.length-b.length),c=/^([a-zA-Z]+)/,m=new RegExp(`^(${l.join("|")})*$`),u=new RegExp(`^(${l.join("|")})`),h=b=>r.find(w=>w.start<=b&&w.end>=b);let f=0;for(;f<a.length;){const b=h(f),w=b!=null,S=c.exec(a.slice(f))?.[1];if(!w&&S!=null&&m.test(S)){let j=S;for(;j.length>0;){const v=u.exec(j)[1];j=j.slice(v.length),i.push(jpe(je({},t,{now:n,token:v,startSeparator:o}))),o=""}f+=S.length}else{const j=a[f];w&&b?.start===f||b?.end===f||(i.length===0?o+=j:(i[i.length-1].endSeparator+=j,i[i.length-1].isEndFormatSeparator=!0)),f+=1}}return i.length===0&&o.length>0&&i.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:o,endSeparator:"",modified:!1}),i},wpe=({isRtl:t,formatDensity:s,sections:a})=>a.map(r=>{const n=i=>{let o=i;return t&&o!==null&&o.includes(" ")&&(o=`${o}`),s==="spacious"&&["/",".","-"].includes(o)&&(o=` ${o} `),o};return r.startSeparator=n(r.startSeparator),r.endSeparator=n(r.endSeparator),r}),X8=t=>{let s=ype(t);t.isRtl&&t.enableAccessibleFieldDOMStructure&&(s=s.split(" ").reverse().join(" "));const a=bpe(je({},t,{expandedFormat:s})),r=Npe(je({},t,{expandedFormat:s,escapedParts:a}));return wpe(je({},t,{sections:r}))},oS=g.createContext(null),nl=()=>{const t=g.useContext(oS);if(t==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return t},lS=()=>g.useContext(oS),XA=g.createContext(()=>!0);function _pe(){return g.useContext(XA)}const JA=g.createContext(null);function eI(){return g.useContext(JA)}const tI=g.createContext(null),sI=g.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function aI(t){const{contextValue:s,actionsContextValue:a,privateContextValue:r,fieldPrivateContextValue:n,isValidContextValue:i,localeText:o,children:l}=t;return e.jsx(oS.Provider,{value:s,children:e.jsx(tI.Provider,{value:a,children:e.jsx(sI.Provider,{value:r,children:e.jsx(JA.Provider,{value:n,children:e.jsx(XA.Provider,{value:i,children:e.jsx(VA,{localeText:o,children:l})})})})})})}const Spe=()=>{const t=g.useContext(tI);if(t==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return t},rI=()=>eS().defaultDates,wu=t=>{const s=Es(),a=g.useRef(void 0);return a.current===void 0&&(a.current=s.date(void 0,t)),a.current},Cpe=Ut(e.jsx("path",{d:"M7 10l5 5 5-5z"})),Ppe=Ut(e.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),kpe=Ut(e.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),nI=Ut(e.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})),Epe=Ut(e.jsxs(g.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]})),Tpe=Ut(e.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})),Mpe=Ut(e.jsxs(g.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]})),Dpe=Ut(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function Rpe(t){return Dt("MuiPickersArrowSwitcher",t)}Tt("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const Ba=()=>g.useContext(sI),Ape=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],Ipe=["ownerState"],Ope=["ownerState"],Fpe=Ne("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),Lpe=Ne("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:t})=>({width:t.spacing(3)})),J8=Ne(ta,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),$pe=t=>kt({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},Rpe,t),iI=g.forwardRef(function(s,a){const r=$r(),n=Ls({props:s,name:"MuiPickersArrowSwitcher"}),{children:i,className:o,slots:l,slotProps:c,isNextDisabled:m,isNextHidden:u,onGoToNext:h,nextLabel:f,isPreviousDisabled:b,isPreviousHidden:w,onGoToPrevious:S,previousLabel:j,labelId:v,classes:N}=n,C=as(n,Ape),{ownerState:P}=Ba(),E=$pe(N),M={isDisabled:m,isHidden:u,goTo:h,label:f},T={isDisabled:b,isHidden:w,goTo:S,label:j},A=l?.previousIconButton??J8,L=ea({elementType:A,externalSlotProps:c?.previousIconButton,additionalProps:{size:"medium",title:T.label,"aria-label":T.label,disabled:T.isDisabled,edge:"end",onClick:T.goTo},ownerState:je({},P,{isButtonHidden:T.isHidden??!1}),className:et(E.button,E.previousIconButton)}),F=l?.nextIconButton??J8,z=ea({elementType:F,externalSlotProps:c?.nextIconButton,additionalProps:{size:"medium",title:M.label,"aria-label":M.label,disabled:M.isDisabled,edge:"start",onClick:M.goTo},ownerState:je({},P,{isButtonHidden:M.isHidden??!1}),className:et(E.button,E.nextIconButton)}),I=l?.leftArrowIcon??Ppe,Q=ea({elementType:I,externalSlotProps:c?.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:P,className:E.leftArrowIcon}),Y=as(Q,Ipe),B=l?.rightArrowIcon??kpe,q=ea({elementType:B,externalSlotProps:c?.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:P,className:E.rightArrowIcon}),V=as(q,Ope);return e.jsxs(Fpe,je({ref:a,className:et(E.root,o),ownerState:P},C,{children:[e.jsx(A,je({},L,{children:r?e.jsx(B,je({},V)):e.jsx(I,je({},Y))})),i?e.jsx(x,{variant:"subtitle1",component:"span",id:v,children:i}):e.jsx(Lpe,{className:E.spacer,ownerState:P}),e.jsx(F,je({},z,{children:r?e.jsx(I,je({},Y)):e.jsx(B,je({},V))}))]}))}),oI=["hours","minutes","seconds"],zpe=["hours","minutes","seconds","meridiem"],mu=t=>oI.includes(t),Cm=t=>zpe.includes(t),qpe=(t,s)=>t?s.getHours(t)>=12?"pm":"am":null,kx=(t,s,a)=>a&&(t>=12?"pm":"am")!==s?s==="am"?t-12:t+12:t,Bpe=(t,s,a,r)=>{const n=kx(r.getHours(t),s,a);return r.setHours(t,n)},eT=(t,s)=>s.getHours(t)*3600+s.getMinutes(t)*60+s.getSeconds(t),wg=(t,s)=>(a,r)=>t?s.isAfter(a,r):eT(a,s)>eT(r,s),Pb=(t,{format:s,views:a,ampm:r})=>{if(s!=null)return s;const n=t.formats;return zo(a,["hours"])?r?`${n.hours12h} ${n.meridiem}`:n.hours24h:zo(a,["minutes"])?n.minutes:zo(a,["seconds"])?n.seconds:zo(a,["minutes","seconds"])?`${n.minutes}:${n.seconds}`:zo(a,["hours","minutes","seconds"])?r?`${n.hours12h}:${n.minutes}:${n.seconds} ${n.meridiem}`:`${n.hours24h}:${n.minutes}:${n.seconds}`:r?`${n.hours12h}:${n.minutes} ${n.meridiem}`:`${n.hours24h}:${n.minutes}`},lI={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function Upe(t){const{steps:s,isViewMatchingStep:a,onStepChange:r}=t;return n=>{if(s==null)return lI;const i=s.findIndex(l=>a(n.view,l)),o=i===-1||i===s.length-1?null:s[i+1];return{hasNextStep:o!=null,hasSeveralSteps:s.length>1,goToNextStep:()=>{o!=null&&r(je({},n,{step:o}))},areViewsInSameStep:(l,c)=>{const m=s.find(h=>a(l,h)),u=s.find(h=>a(c,h));return m===u}}}}function _g({onChange:t,onViewChange:s,openTo:a,view:r,views:n,autoFocus:i,focusedView:o,onFocusedViewChange:l,getStepNavigation:c}){const m=g.useRef(a),u=g.useRef(n),h=g.useRef(n.includes(a)?a:n[0]),[f,b]=On({name:"useViews",state:"view",controlled:r,default:h.current}),w=g.useRef(i?f:null),[S,j]=On({name:"useViews",state:"focusedView",controlled:o,default:w.current}),v=c?c({setView:b,view:f,defaultView:h.current,views:n}):lI;g.useEffect(()=>{(m.current&&m.current!==a||u.current&&u.current.some(L=>!n.includes(L)))&&(b(n.includes(a)?a:n[0]),u.current=n,m.current=a)},[a,b,f,n]);const N=n.indexOf(f),C=n[N-1]??null,P=n[N+1]??null,E=Ot((L,F)=>{j(F?L:z=>L===z?null:z),l?.(L,F)}),M=Ot(L=>{E(L,!0),L!==f&&(b(L),s&&s(L))}),T=Ot(()=>{P&&M(P)}),A=Ot((L,F,z)=>{const I=F==="finish",Q=z?n.indexOf(z)<n.length-1:!!P;t(L,I&&Q?"partial":F,z);let B=null;if(z!=null&&z!==f?B=z:I&&(B=f),B==null)return;const q=n[n.indexOf(B)+1];q==null||!v.areViewsInSameStep(B,q)||M(q)});return je({},v,{view:f,setView:M,focusedView:S,setFocusedView:E,nextView:P,previousView:C,defaultView:n.includes(a)?a:n[0],goToNextView:T,setValueAndGoToNextView:A})}function Vpe(t,{disableFuture:s,maxDate:a,timezone:r}){const n=Es();return g.useMemo(()=>{const i=n.date(void 0,r),o=n.startOfMonth(s&&n.isBefore(i,a)?i:a);return!n.isAfter(o,t)},[s,a,t,n,r])}function Hpe(t,{disablePast:s,minDate:a,timezone:r}){const n=Es();return g.useMemo(()=>{const i=n.date(void 0,r),o=n.startOfMonth(s&&n.isAfter(i,a)?i:a);return!n.isBefore(o,t)},[s,a,t,n,r])}function qv(t,s,a,r){const n=Es(),i=g.useMemo(()=>n.isValid(t)?t:null,[n,t]),o=qpe(i,n),l=g.useCallback(c=>{const m=i==null?null:Bpe(i,c,!!s,n);a(m,r??"partial")},[s,i,a,r,n]);return{meridiemMode:o,handleMeridiemChange:l}}const Ex=36,Bv=2,lp=320,Wpe=280,cp=336,cI=232,cf=48,Uv=Ne("div")({overflow:"hidden",width:lp,maxHeight:cp,display:"flex",flexDirection:"column",margin:"0 auto"});function Ype(t){return Dt("MuiTimeClock",t)}Tt("MuiTimeClock",["root","arrowSwitcher"]);const dp=220,Bl=36,Tx={x:dp/2,y:dp/2},dI={x:Tx.x,y:0},Gpe=dI.x-Tx.x,Kpe=dI.y-Tx.y,Qpe=t=>t*(180/Math.PI),uI=(t,s,a)=>{const r=s-Tx.x,n=a-Tx.y,i=Math.atan2(Gpe,Kpe)-Math.atan2(r,n);let o=Qpe(i);o=Math.round(o/t)*t,o%=360;const l=Math.floor(o/t)||0,c=r**2+n**2,m=Math.sqrt(c);return{value:l,distance:m}},Zpe=(t,s,a=1)=>{const r=a*6;let{value:n}=uI(r,t,s);return n=n*a%60,n},Xpe=(t,s,a)=>{const{value:r,distance:n}=uI(30,t,s);let i=r||12;return a?i%=12:n<dp/2-Bl&&(i+=12,i%=24),i};function Jpe(t){return Dt("MuiClockPointer",t)}Tt("MuiClockPointer",["root","thumb"]);const ehe=["className","classes","isBetweenTwoClockValues","isInner","type","viewValue"],the=t=>kt({root:["root"],thumb:["thumb"]},Jpe,t),she=Ne("div",{name:"MuiClockPointer",slot:"Root"})(({theme:t})=>({width:2,backgroundColor:(t.vars||t).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{isClockPointerAnimated:!0},style:{transition:t.transitions.create(["transform","height"])}}]})),ahe=Ne("div",{name:"MuiClockPointer",slot:"Thumb"})(({theme:t})=>({width:4,height:4,backgroundColor:(t.vars||t).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:`calc(50% - ${Bl/2}px)`,border:`${(Bl-4)/2}px solid ${(t.vars||t).palette.primary.main}`,boxSizing:"content-box",variants:[{props:{isClockPointerBetweenTwoValues:!1},style:{backgroundColor:(t.vars||t).palette.primary.main}}]}));function rhe(t){const s=Ls({props:t,name:"MuiClockPointer"}),{className:a,classes:r,isBetweenTwoClockValues:n,isInner:i,type:o,viewValue:l}=s,c=as(s,ehe),m=g.useRef(o);g.useEffect(()=>{m.current=o},[o]);const{ownerState:u}=Ba(),h=je({},u,{isClockPointerAnimated:m.current!==o,isClockPointerBetweenTwoValues:n}),f=the(r),b=()=>{let S=360/(o==="hours"?12:60)*l;return o==="hours"&&l>12&&(S-=360),{height:Math.round((i?.26:.4)*dp),transform:`rotateZ(${S}deg)`}};return e.jsx(she,je({style:b(),className:et(f.root,a),ownerState:h},c,{children:e.jsx(ahe,{ownerState:h,className:f.thumb})}))}function nhe(t){return Dt("MuiClock",t)}Tt("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText","selected"]);const ihe=(t,s)=>{const a={root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton",s.clockMeridiemMode==="am"&&"selected"],pmButton:["pmButton",s.clockMeridiemMode==="pm"&&"selected"],meridiemText:["meridiemText"]};return kt(a,nhe,t)},ohe=Ne("div",{name:"MuiClock",slot:"Root"})(({theme:t})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:t.spacing(2)})),lhe=Ne("div",{name:"MuiClock",slot:"Clock"})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),che=Ne("div",{name:"MuiClock",slot:"Wrapper"})({"&:focus":{outline:"none"}}),dhe=Ne("div",{name:"MuiClock",slot:"SquareMask"})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{isClockDisabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),uhe=Ne("div",{name:"MuiClock",slot:"Pin"})(({theme:t})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(t.vars||t).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),mI=(t,s)=>({zIndex:1,bottom:8,paddingLeft:4,paddingRight:4,width:Bl,variants:[{props:{clockMeridiemMode:s},style:{backgroundColor:(t.vars||t).palette.primary.main,color:(t.vars||t).palette.primary.contrastText,"&:hover":{backgroundColor:(t.vars||t).palette.primary.light}}}]}),mhe=Ne(ta,{name:"MuiClock",slot:"AmButton"})(({theme:t})=>je({},mI(t,"am"),{position:"absolute",left:8})),phe=Ne(ta,{name:"MuiClock",slot:"PmButton"})(({theme:t})=>je({},mI(t,"pm"),{position:"absolute",right:8})),tT=Ne(x,{name:"MuiClock",slot:"MeridiemText"})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function hhe(t){const s=Ls({props:t,name:"MuiClock"}),{ampm:a,ampmInClock:r,autoFocus:n,children:i,value:o,handleMeridiemChange:l,isTimeDisabled:c,meridiemMode:m,minutesStep:u=1,onChange:h,selectedId:f,type:b,viewValue:w,viewRange:[S,j],disabled:v=!1,readOnly:N,className:C,classes:P}=s,E=Es(),M=Zr(),{ownerState:T}=Ba(),A=je({},T,{isClockDisabled:v,clockMeridiemMode:m}),L=g.useRef(!1),F=ihe(P,A),z=c(w,b),I=!a&&b==="hours"&&(w<1||w>12),Q=(te,ee)=>{v||N||c(te,b)||h(te,ee)},Y=(te,ee)=>{let{offsetX:ae,offsetY:ce}=te;if(ae===void 0){const ne=te.target.getBoundingClientRect();ae=te.changedTouches[0].clientX-ne.left,ce=te.changedTouches[0].clientY-ne.top}const he=b==="seconds"||b==="minutes"?Zpe(ae,ce,u):Xpe(ae,ce,!!a);Q(he,ee)},B=te=>{L.current=!0,Y(te,"shallow")},q=te=>{L.current&&(Y(te,"finish"),L.current=!1),te.preventDefault()},V=te=>{te.buttons>0&&Y(te.nativeEvent,"shallow")},G=te=>{L.current&&(L.current=!1),Y(te.nativeEvent,"finish")},H=b==="hours"?!1:w%5!==0,D=b==="minutes"?u:1,R=g.useRef(null);Ia(()=>{n&&R.current.focus()},[n]);const $=te=>Math.max(S,Math.min(j,te)),W=te=>(te+(j+1))%(j+1),J=te=>{if(!L.current)switch(te.key){case"Home":Q(S,"partial"),te.preventDefault();break;case"End":Q(j,"partial"),te.preventDefault();break;case"ArrowUp":Q(W(w+D),"partial"),te.preventDefault();break;case"ArrowDown":Q(W(w-D),"partial"),te.preventDefault();break;case"PageUp":Q($(w+5),"partial"),te.preventDefault();break;case"PageDown":Q($(w-5),"partial"),te.preventDefault();break;case"Enter":case" ":Q(w,"finish"),te.preventDefault();break}};return e.jsxs(ohe,{className:et(F.root,C),children:[e.jsxs(lhe,{className:F.clock,children:[e.jsx(dhe,{onTouchMove:B,onTouchStart:B,onTouchEnd:q,onMouseUp:G,onMouseMove:V,ownerState:A,className:F.squareMask}),!z&&e.jsxs(g.Fragment,{children:[e.jsx(uhe,{className:F.pin}),o!=null&&e.jsx(rhe,{type:b,viewValue:w,isInner:I,isBetweenTwoClockValues:H})]}),e.jsx(che,{"aria-activedescendant":f,"aria-label":M.clockLabelText(b,o==null?null:E.format(o,a?"fullTime12h":"fullTime24h")),ref:R,role:"listbox",onKeyDown:J,tabIndex:0,className:F.wrapper,children:i})]}),a&&r&&e.jsxs(g.Fragment,{children:[e.jsx(mhe,{onClick:N?void 0:()=>l("am"),disabled:v||m===null,ownerState:A,className:F.amButton,title:mo(E,"am"),children:e.jsx(tT,{variant:"caption",className:F.meridiemText,children:mo(E,"am")})}),e.jsx(phe,{disabled:v||m===null,onClick:N?void 0:()=>l("pm"),ownerState:A,className:F.pmButton,title:mo(E,"pm"),children:e.jsx(tT,{variant:"caption",className:F.meridiemText,children:mo(E,"pm")})})]})]})}function fhe(t){return Dt("MuiClockNumber",t)}const dy=Tt("MuiClockNumber",["root","selected","disabled"]),xhe=["className","classes","disabled","index","inner","label","selected"],ghe=(t,s)=>{const a={root:["root",s.isClockNumberSelected&&"selected",s.isClockNumberDisabled&&"disabled"]};return kt(a,fhe,t)},yhe=Ne("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(t,s)=>[s.root,{[`&.${dy.disabled}`]:s.disabled},{[`&.${dy.selected}`]:s.selected}]})(({theme:t})=>({height:Bl,width:Bl,position:"absolute",left:`calc((100% - ${Bl}px) / 2)`,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(t.vars||t).palette.text.primary,fontFamily:t.typography.fontFamily,"&:focused":{backgroundColor:(t.vars||t).palette.background.paper},[`&.${dy.selected}`]:{color:(t.vars||t).palette.primary.contrastText},[`&.${dy.disabled}`]:{pointerEvents:"none",color:(t.vars||t).palette.text.disabled},variants:[{props:{isClockNumberInInnerRing:!0},style:je({},t.typography.body2,{color:(t.vars||t).palette.text.secondary})}]}));function pI(t){const s=Ls({props:t,name:"MuiClockNumber"}),{className:a,classes:r,disabled:n,index:i,inner:o,label:l,selected:c}=s,m=as(s,xhe),{ownerState:u}=Ba(),h=je({},u,{isClockNumberInInnerRing:o,isClockNumberSelected:c,isClockNumberDisabled:n}),f=ghe(r,h),b=i%12/12*Math.PI*2-Math.PI/2,w=(dp-Bl-2)/2*(o?.65:1),S=Math.round(Math.cos(b)*w),j=Math.round(Math.sin(b)*w);return e.jsx(yhe,je({className:et(f.root,a),"aria-disabled":n?!0:void 0,"aria-selected":c?!0:void 0,role:"option",style:{transform:`translate(${S}px, ${j+(dp-Bl)/2}px`},ownerState:h},m,{children:l}))}const bhe=({ampm:t,value:s,getClockNumberText:a,isDisabled:r,selectedId:n,adapter:i})=>{const o=s?i.getHours(s):null,l=[],c=t?1:0,m=t?12:23,u=h=>o===null?!1:t?h===12?o===12||o===0:o===h||o-12===h:o===h;for(let h=c;h<=m;h+=1){let f=h.toString();h===0&&(f="00");const b=!t&&(h===0||h>12);f=i.formatNumber(f);const w=u(h);l.push(e.jsx(pI,{id:w?n:void 0,index:h,inner:b,selected:w,disabled:r(h),label:f,"aria-label":a(f)},h))}return l},sT=({adapter:t,value:s,isDisabled:a,getClockNumberText:r,selectedId:n})=>{const i=t.formatNumber;return[[5,i("05")],[10,i("10")],[15,i("15")],[20,i("20")],[25,i("25")],[30,i("30")],[35,i("35")],[40,i("40")],[45,i("45")],[50,i("50")],[55,i("55")],[0,i("00")]].map(([o,l],c)=>{const m=o===s;return e.jsx(pI,{label:l,id:m?n:void 0,index:c+1,inner:!1,disabled:a(o),selected:m,"aria-label":r(l)},o)})},rd=({name:t,timezone:s,value:a,defaultValue:r,referenceDate:n,onChange:i,valueManager:o})=>{const l=Es(),[c,m]=On({name:t,state:"value",controlled:a,default:r??o.emptyValue}),u=g.useMemo(()=>o.getTimezone(l,c),[l,o,c]),h=Ot(S=>u==null?S:o.setTimezone(l,u,S)),f=g.useMemo(()=>s||u||(n?l.getTimezone(Array.isArray(n)?n[0]:n):"default"),[s,u,n,l]),b=g.useMemo(()=>o.setTimezone(l,f,c),[o,l,f,c]),w=Ot((S,...j)=>{const v=h(S);m(v),i?.(v,...j)});return{value:b,handleValueChange:w,timezone:f}},uo={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},vhe=t=>Math.max(...t.map(s=>uo[s.type]??1)),Bh=(t,s,a)=>{if(s===uo.year)return t.startOfYear(a);if(s===uo.month)return t.startOfMonth(a);if(s===uo.day)return t.startOfDay(a);let r=a;return s<uo.minutes&&(r=t.setMinutes(r,0)),s<uo.seconds&&(r=t.setSeconds(r,0)),s<uo.milliseconds&&(r=t.setMilliseconds(r,0)),r},jhe=({props:t,adapter:s,granularity:a,timezone:r,getTodayDate:n})=>{let i=n?n():Bh(s,a,aS(s,r));t.minDate!=null&&s.isAfterDay(t.minDate,i)&&(i=Bh(s,a,t.minDate)),t.maxDate!=null&&s.isBeforeDay(t.maxDate,i)&&(i=Bh(s,a,t.maxDate));const o=wg(t.disableIgnoringDatePartForTimeValidation??!1,s);return t.minTime!=null&&o(t.minTime,i)&&(i=Bh(s,a,t.disableIgnoringDatePartForTimeValidation?t.minTime:Sb(s,i,t.minTime))),t.maxTime!=null&&o(i,t.maxTime)&&(i=Bh(s,a,t.disableIgnoringDatePartForTimeValidation?t.maxTime:Sb(s,i,t.maxTime))),i},Nhe=["value","referenceDate"],or={emptyValue:null,getTodayValue:aS,getInitialReferenceValue:t=>{let{value:s,referenceDate:a}=t,r=as(t,Nhe);return r.adapter.isValid(s)?s:a??jhe(r)},cleanValue:npe,areValuesEqual:ipe,isSameError:(t,s)=>t===s,hasError:t=>t!=null,defaultErrorState:null,getTimezone:(t,s)=>t.isValid(s)?t.getTimezone(s):null,setTimezone:(t,s,a)=>a==null?null:t.setTimezone(a,s)},cS={updateReferenceValue:(t,s,a)=>t.isValid(s)?s:a,getSectionsFromValue:(t,s)=>s(t),getV7HiddenInputValueFromSections:mpe,getV6InputValueFromSections:ppe,parseValueStr:(t,s,a)=>a(t.trim(),s),getDateFromSection:t=>t,getDateSectionsFromValue:t=>t,updateDateInValue:(t,s,a)=>a,clearDateSections:t=>t.map(s=>je({},s,{value:""}))},dS=({value:t,referenceDate:s,adapter:a,props:r,timezone:n})=>{const i=g.useMemo(()=>or.getInitialReferenceValue({value:t,adapter:a,props:r,referenceDate:s,granularity:uo.day,timezone:n,getTodayDate:()=>aS(a,n,"date")}),[s,n]);return t??i},whe=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","timezone"],_he=t=>kt({root:["root"],arrowSwitcher:["arrowSwitcher"]},Ype,t),She=Ne(Uv,{name:"MuiTimeClock",slot:"Root"})({display:"flex",flexDirection:"column",position:"relative"}),Che=Ne(iI,{name:"MuiTimeClock",slot:"ArrowSwitcher"})({position:"absolute",right:12,top:15}),Phe=["hours","minutes"],khe=g.forwardRef(function(s,a){const r=Es(),n=Ls({props:s,name:"MuiTimeClock"}),{ampm:i=r.is12HourCycleInCurrentLocale(),ampmInClock:o=!1,autoFocus:l,slots:c,slotProps:m,value:u,defaultValue:h,referenceDate:f,disableIgnoringDatePartForTimeValidation:b=!1,maxTime:w,minTime:S,disableFuture:j,disablePast:v,minutesStep:N=1,shouldDisableTime:C,showViewSwitcher:P,onChange:E,view:M,views:T=Phe,openTo:A,onViewChange:L,focusedView:F,onFocusedViewChange:z,className:I,classes:Q,disabled:Y,readOnly:B,timezone:q}=n,V=as(n,whe),{value:G,handleValueChange:H,timezone:D}=rd({name:"TimeClock",timezone:q,value:u,defaultValue:h,referenceDate:f,onChange:E,valueManager:or}),R=dS({value:G,referenceDate:f,adapter:r,props:n,timezone:D}),$=Zr(),W=wu(D),J=wn(),{ownerState:te}=Ba(),{view:ee,setView:ae,previousView:ce,nextView:he,setValueAndGoToNextView:ne}=_g({view:M,views:T,openTo:A,onViewChange:L,onChange:H,focusedView:F,onFocusedViewChange:z}),{meridiemMode:xe,handleMeridiemChange:ge}=qv(R,i,ne),le=g.useCallback((Se,He)=>{const ze=wg(b,r),st=He==="hours"||He==="minutes"&&T.includes("seconds"),ke=({start:ye,end:Ye})=>!(S&&ze(S,Ye)||w&&ze(ye,w)||j&&ze(ye,W)||v&&ze(W,st?Ye:ye)),We=(ye,Ye=1)=>{if(ye%Ye!==0)return!1;if(C)switch(He){case"hours":return!C(r.setHours(R,ye),"hours");case"minutes":return!C(r.setMinutes(R,ye),"minutes");case"seconds":return!C(r.setSeconds(R,ye),"seconds");default:return!1}return!0};switch(He){case"hours":{const ye=kx(Se,xe,i),Ye=r.setHours(R,ye);if(r.getHours(Ye)!==ye)return!0;const at=r.setSeconds(r.setMinutes(Ye,0),0),bt=r.setSeconds(r.setMinutes(Ye,59),59);return!ke({start:at,end:bt})||!We(ye)}case"minutes":{const ye=r.setMinutes(R,Se),Ye=r.setSeconds(ye,0),at=r.setSeconds(ye,59);return!ke({start:Ye,end:at})||!We(Se,N)}case"seconds":{const ye=r.setSeconds(R,Se);return!ke({start:ye,end:ye})||!We(Se)}default:throw new Error("not supported")}},[i,R,b,w,xe,S,N,C,r,j,v,W,T]),pe=g.useMemo(()=>{switch(ee){case"hours":{const Se=(st,ke)=>{const We=kx(st,xe,i);ne(r.setHours(R,We),ke,"hours")},He=r.getHours(R);let ze;return i?He>12?ze=[12,23]:ze=[0,11]:ze=[0,23],{onChange:Se,viewValue:He,children:bhe({value:G,adapter:r,ampm:i,getClockNumberText:$.hoursClockNumberText,isDisabled:st=>Y||le(st,"hours"),selectedId:J}),viewRange:ze}}case"minutes":{const Se=r.getMinutes(R);return{viewValue:Se,onChange:(ze,st)=>{ne(r.setMinutes(R,ze),st,"minutes")},children:sT({adapter:r,value:Se,getClockNumberText:$.minutesClockNumberText,isDisabled:ze=>Y||le(ze,"minutes"),selectedId:J}),viewRange:[0,59]}}case"seconds":{const Se=r.getSeconds(R);return{viewValue:Se,onChange:(ze,st)=>{ne(r.setSeconds(R,ze),st,"seconds")},children:sT({adapter:r,value:Se,getClockNumberText:$.secondsClockNumberText,isDisabled:ze=>Y||le(ze,"seconds"),selectedId:J}),viewRange:[0,59]}}default:throw new Error("You must provide the type for ClockView")}},[ee,r,G,i,$.hoursClockNumberText,$.minutesClockNumberText,$.secondsClockNumberText,xe,ne,R,le,J,Y]),Re=_he(Q);return e.jsxs(She,je({ref:a,className:et(Re.root,I),ownerState:te},V,{children:[e.jsx(hhe,je({autoFocus:l??!!F,ampmInClock:o&&T.includes("hours"),value:G,type:ee,ampm:i,minutesStep:N,isTimeDisabled:le,meridiemMode:xe,handleMeridiemChange:ge,selectedId:J,disabled:Y,readOnly:B},pe)),P&&e.jsx(Che,{className:Re.arrowSwitcher,slots:c,slotProps:m,onGoToPrevious:()=>ae(ce),isPreviousDisabled:!ce,previousLabel:$.openPreviousView,onGoToNext:()=>ae(he),isNextDisabled:!he,nextLabel:$.openNextView,ownerState:te})]}))});function Ehe(t){return Dt("MuiDigitalClock",t)}const u_=Tt("MuiDigitalClock",["root","list","item"]);function jm(t,s){return Array.isArray(s)?s.every(a=>t.indexOf(a)!==-1):t.indexOf(s)!==-1}const The=t=>{setTimeout(t,0)},hI=(t=document)=>{const s=t.activeElement;return s?s.shadowRoot?hI(s.shadowRoot):s:null},rn=t=>hI(ir(t)),kb=t=>Array.from(t.children).indexOf(rn(t)),uS="@media (pointer: fine)";function Mhe(...t){return t.reduce((s,a)=>(Array.isArray(a)?s.push(...a):a!=null&&s.push(a),s),[])}const Dhe=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],Rhe=t=>kt({root:["root"],list:["list"],item:["item"]},Ehe,t),Ahe=Ne(Uv,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:cI,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),Ihe=Ne(P4,{name:"MuiDigitalClock",slot:"List"})({padding:0}),Ohe=Ne(Z,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:t=>t!=="itemValue"&&t!=="formattedValue"})(({theme:t})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Nn(t.palette.primary.main,t.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(t.vars||t).palette.primary.main,color:(t.vars||t).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:Nn(t.palette.primary.main,t.palette.action.focusOpacity)}})),Fhe=g.forwardRef(function(s,a){const r=Es(),n=g.useRef(null),i=Bs(a,n),o=g.useRef(null),l=Ls({props:s,name:"MuiDigitalClock"}),{ampm:c=r.is12HourCycleInCurrentLocale(),timeStep:m=30,autoFocus:u,slots:h,slotProps:f,value:b,defaultValue:w,referenceDate:S,disableIgnoringDatePartForTimeValidation:j=!1,maxTime:v,minTime:N,disableFuture:C,disablePast:P,minutesStep:E=1,shouldDisableTime:M,onChange:T,view:A,openTo:L,onViewChange:F,focusedView:z,onFocusedViewChange:I,className:Q,classes:Y,disabled:B,readOnly:q,views:V=["hours"],skipDisabled:G=!1,timezone:H}=l,D=as(l,Dhe),{value:R,handleValueChange:$,timezone:W}=rd({name:"DigitalClock",timezone:H,value:b,defaultValue:w,referenceDate:S,onChange:T,valueManager:or}),J=Zr(),te=wu(W),{ownerState:ee}=Ba(),ae=je({},ee,{hasDigitalClockAlreadyBeenRendered:!!n.current}),ce=Rhe(Y),he=h?.digitalClockItem??Ohe,ne=ea({elementType:he,externalSlotProps:f?.digitalClockItem,ownerState:ae,className:ce.item}),xe=dS({value:R,referenceDate:S,adapter:r,props:l,timezone:W}),ge=Ot(st=>$(st,"finish","hours")),{setValueAndGoToNextView:le}=_g({view:A,views:V,openTo:L,onViewChange:F,onChange:ge,focusedView:z,onFocusedViewChange:I}),pe=Ot(st=>{le(st,"finish")});Ia(()=>{if(n.current===null)return;const st=n.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!st)return;const ke=st.offsetTop;(u||z)&&st.focus(),n.current.scrollTop=ke-4});const Re=g.useCallback(st=>{const ke=wg(j,r),We=()=>!(N&&ke(N,st)||v&&ke(st,v)||C&&ke(st,te)||P&&ke(te,st)),ye=()=>r.getMinutes(st)%E!==0?!1:M?!M(st,"hours"):!0;return!We()||!ye()},[j,r,N,v,C,te,P,E,M]),Se=g.useMemo(()=>{const st=[];let We=r.startOfDay(xe);for(;r.isSameDay(xe,We);)st.push(We),We=r.addMinutes(We,m);return st},[xe,m,r]),He=Se.findIndex(st=>r.isEqual(st,xe)),ze=st=>{switch(st.key){case"PageUp":{const ke=kb(o.current)-5,We=o.current.children,ye=Math.max(0,ke),Ye=We[ye];Ye&&Ye.focus(),st.preventDefault();break}case"PageDown":{const ke=kb(o.current)+5,We=o.current.children,ye=Math.min(We.length-1,ke),Ye=We[ye];Ye&&Ye.focus(),st.preventDefault();break}}};return e.jsx(Ahe,je({ref:i,className:et(ce.root,Q),ownerState:ae},D,{children:e.jsx(Ihe,{ref:o,role:"listbox","aria-label":J.timePickerToolbarTitle,className:ce.list,onKeyDown:ze,children:Se.map((st,ke)=>{const We=Re(st);if(G&&We)return null;const ye=r.isEqual(st,R),Ye=r.format(st,c?"fullTime12h":"fullTime24h"),bt=He===ke||He===-1&&ke===0?0:-1;return e.jsx(he,je({onClick:()=>!q&&pe(st),selected:ye,disabled:B||We,disableRipple:q,role:"option","aria-disabled":q,"aria-selected":ye,tabIndex:bt,itemValue:st,formattedValue:Ye},ne,{children:Ye}),`${st.valueOf()}-${Ye}`)})})}))});function Lhe(t){return Dt("MuiMultiSectionDigitalClock",t)}const m_=Tt("MuiMultiSectionDigitalClock",["root"]);function $he(t){return Dt("MuiMultiSectionDigitalClockSection",t)}const p_=Tt("MuiMultiSectionDigitalClockSection",["root","item"]),zhe=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],qhe=t=>kt({root:["root"],item:["item"]},$he,t),Bhe=Ne(P4,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:t})=>({maxHeight:cI,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),Uhe=Ne(Z,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:t})=>({padding:8,margin:"2px 4px",width:cf,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Nn(t.palette.primary.main,t.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(t.vars||t).palette.primary.main,color:(t.vars||t).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:Nn(t.palette.primary.main,t.palette.action.focusOpacity)}})),Vhe=g.forwardRef(function(s,a){const r=g.useRef(null),n=Bs(a,r),i=g.useRef(null),o=Ls({props:s,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:l,onChange:c,className:m,classes:u,disabled:h,readOnly:f,items:b,active:w,slots:S,slotProps:j,skipDisabled:v}=o,N=as(o,zhe),{ownerState:C}=Ba(),P=je({},C,{hasDigitalClockAlreadyBeenRendered:!!r.current}),E=qhe(u),M=S?.digitalClockSectionItem??Uhe;Ia(()=>{if(r.current===null)return;const L=r.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(w&&l&&L&&L.focus(),!L||i.current===L)return;i.current=L;const F=L.offsetTop,z=L.offsetHeight,I=r.current.clientHeight,Q=r.current.scrollHeight,Y=F-I/2+z/2,B=Q-I,q=Math.min(Y,B);r.current.scrollTop=Math.max(0,q)});const T=b.findIndex(L=>L.isFocused(L.value)),A=L=>{switch(L.key){case"PageUp":{const F=kb(r.current)-5,z=r.current.children,I=Math.max(0,F),Q=z[I];Q&&Q.focus(),L.preventDefault();break}case"PageDown":{const F=kb(r.current)+5,z=r.current.children,I=Math.min(z.length-1,F),Q=z[I];Q&&Q.focus(),L.preventDefault();break}}};return e.jsx(Bhe,je({ref:n,className:et(E.root,m),ownerState:P,autoFocusItem:l&&w,role:"listbox",onKeyDown:A},N,{children:b.map((L,F)=>{const z=L.isDisabled?.(L.value),I=h||z;if(v&&I)return null;const Q=L.isSelected(L.value),Y=T===F||T===-1&&F===0?0:-1;return e.jsx(M,je({onClick:()=>!f&&c(L.value),selected:Q,disabled:I,disableRipple:f,role:"option","aria-disabled":f||I||void 0,"aria-label":L.ariaLabel,"aria-selected":Q,tabIndex:Y,className:E.item},j?.digitalClockSectionItem,{children:L.label}),L.label)})}))}),Hhe=({now:t,value:s,adapter:a,ampm:r,isDisabled:n,resolveAriaLabel:i,timeStep:o,valueOrReferenceDate:l})=>{const c=s?a.getHours(s):null,m=[],u=(b,w)=>{const S=w??c;return S===null?!1:r?b===12?S===12||S===0:S===b||S-12===b:S===b},h=b=>u(b,a.getHours(l)),f=r?11:23;for(let b=0;b<=f;b+=o){let w=a.format(a.setHours(t,b),r?"hours12h":"hours24h");const S=i(parseInt(w,10).toString());w=a.formatNumber(w),m.push({value:b,label:w,isSelected:u,isDisabled:n,isFocused:h,ariaLabel:S})}return m},aT=({value:t,adapter:s,isDisabled:a,timeStep:r,resolveLabel:n,resolveAriaLabel:i,hasValue:o=!0})=>{const l=m=>t===null?!1:o&&t===m,c=m=>t===m;return[...Array.from({length:Math.ceil(60/r)},(m,u)=>{const h=r*u;return{value:h,label:s.formatNumber(n(h)),isDisabled:a,isSelected:l,isFocused:c,ariaLabel:i(h.toString())}})]},Whe=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],Yhe=t=>kt({root:["root"]},Lhe,t),Ghe=Ne(Uv,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:t})=>({flexDirection:"row",width:"100%",borderBottom:`1px solid ${(t.vars||t).palette.divider}`})),Khe=g.forwardRef(function(s,a){const r=Es(),n=$r(),i=Ls({props:s,name:"MuiMultiSectionDigitalClock"}),{ampm:o=r.is12HourCycleInCurrentLocale(),timeSteps:l,autoFocus:c,slots:m,slotProps:u,value:h,defaultValue:f,referenceDate:b,disableIgnoringDatePartForTimeValidation:w=!1,maxTime:S,minTime:j,disableFuture:v,disablePast:N,minutesStep:C=1,shouldDisableTime:P,onChange:E,view:M,views:T=["hours","minutes"],openTo:A,onViewChange:L,focusedView:F,onFocusedViewChange:z,className:I,classes:Q,disabled:Y,readOnly:B,skipDisabled:q=!1,timezone:V}=i,G=as(i,Whe),{value:H,handleValueChange:D,timezone:R}=rd({name:"MultiSectionDigitalClock",timezone:V,value:h,defaultValue:f,referenceDate:b,onChange:E,valueManager:or}),$=Zr(),W=wu(R),J=g.useMemo(()=>je({hours:1,minutes:5,seconds:5},l),[l]),te=dS({value:H,referenceDate:b,adapter:r,props:i,timezone:R}),ee=Ot((ke,We,ye)=>D(ke,We,ye)),ae=g.useMemo(()=>!o||!T.includes("hours")||T.includes("meridiem")?T:[...T,"meridiem"],[o,T]),{view:ce,setValueAndGoToNextView:he,focusedView:ne}=_g({view:M,views:ae,openTo:A,onViewChange:L,onChange:ee,focusedView:F,onFocusedViewChange:z}),xe=Ot(ke=>{he(ke,"finish","meridiem")}),{meridiemMode:ge,handleMeridiemChange:le}=qv(te,o,xe,"finish"),pe=g.useCallback((ke,We)=>{const ye=wg(w,r),Ye=We==="hours"||We==="minutes"&&ae.includes("seconds"),at=({start:ct,end:ht})=>!(j&&ye(j,ht)||S&&ye(ct,S)||v&&ye(ct,W)||N&&ye(W,Ye?ht:ct)),bt=(ct,ht=1)=>{if(ct%ht!==0)return!1;if(P)switch(We){case"hours":return!P(r.setHours(te,ct),"hours");case"minutes":return!P(r.setMinutes(te,ct),"minutes");case"seconds":return!P(r.setSeconds(te,ct),"seconds");default:return!1}return!0};switch(We){case"hours":{const ct=kx(ke,ge,o),ht=r.setHours(te,ct);if(r.getHours(ht)!==ct)return!0;const Et=r.setSeconds(r.setMinutes(ht,0),0),be=r.setSeconds(r.setMinutes(ht,59),59);return!at({start:Et,end:be})||!bt(ct)}case"minutes":{const ct=r.setMinutes(te,ke),ht=r.setSeconds(ct,0),Et=r.setSeconds(ct,59);return!at({start:ht,end:Et})||!bt(ke,C)}case"seconds":{const ct=r.setSeconds(te,ke);return!at({start:ct,end:ct})||!bt(ke)}default:throw new Error("not supported")}},[o,te,w,S,ge,j,C,P,r,v,N,W,ae]),Re=g.useCallback(ke=>{switch(ke){case"hours":return{onChange:We=>{const ye=kx(We,ge,o);he(r.setHours(te,ye),"finish","hours")},items:Hhe({now:W,value:H,ampm:o,adapter:r,isDisabled:We=>pe(We,"hours"),timeStep:J.hours,resolveAriaLabel:$.hoursClockNumberText,valueOrReferenceDate:te})};case"minutes":return{onChange:We=>{he(r.setMinutes(te,We),"finish","minutes")},items:aT({value:r.getMinutes(te),adapter:r,isDisabled:We=>pe(We,"minutes"),resolveLabel:We=>r.format(r.setMinutes(W,We),"minutes"),timeStep:J.minutes,hasValue:!!H,resolveAriaLabel:$.minutesClockNumberText})};case"seconds":return{onChange:We=>{he(r.setSeconds(te,We),"finish","seconds")},items:aT({value:r.getSeconds(te),adapter:r,isDisabled:We=>pe(We,"seconds"),resolveLabel:We=>r.format(r.setSeconds(W,We),"seconds"),timeStep:J.seconds,hasValue:!!H,resolveAriaLabel:$.secondsClockNumberText})};case"meridiem":{const We=mo(r,"am"),ye=mo(r,"pm");return{onChange:le,items:[{value:"am",label:We,isSelected:()=>!!H&&ge==="am",isFocused:()=>!!te&&ge==="am",ariaLabel:We},{value:"pm",label:ye,isSelected:()=>!!H&&ge==="pm",isFocused:()=>!!te&&ge==="pm",ariaLabel:ye}]}}default:throw new Error(`Unknown view: ${ke} found.`)}},[W,H,o,r,J.hours,J.minutes,J.seconds,$.hoursClockNumberText,$.minutesClockNumberText,$.secondsClockNumberText,ge,he,te,pe,le]),Se=g.useMemo(()=>{if(!n)return ae;const ke=ae.filter(We=>We!=="meridiem");return ke.reverse(),ae.includes("meridiem")&&ke.push("meridiem"),ke},[n,ae]),He=g.useMemo(()=>ae.reduce((ke,We)=>je({},ke,{[We]:Re(We)}),{}),[ae,Re]),{ownerState:ze}=Ba(),st=Yhe(Q);return e.jsx(Ghe,je({ref:a,className:et(st.root,I),ownerState:ze,role:"group"},G,{children:Se.map(ke=>e.jsx(Vhe,{items:He[ke].items,onChange:He[ke].onChange,active:ce===ke,autoFocus:c||ne===ke,disabled:Y,readOnly:B,slots:m,slotProps:u,skipDisabled:q,"aria-label":$.selectViewText(ke)},ke))}))});function Qhe(t){return Dt("MuiPickersDay",t)}const Pd=Tt("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function fI(t){const{disabled:s,selected:a,today:r,outsideCurrentMonth:n,day:i,disableMargin:o,disableHighlightToday:l,showDaysOutsideCurrentMonth:c}=t,m=Es(),{ownerState:u}=Ba();return g.useMemo(()=>je({},u,{day:i,isDaySelected:a??!1,isDayDisabled:s??!1,isDayCurrent:r??!1,isDayOutsideMonth:n??!1,isDayStartOfWeek:m.isSameDay(i,m.startOfWeek(i)),isDayEndOfWeek:m.isSameDay(i,m.endOfWeek(i)),disableMargin:o??!1,disableHighlightToday:l??!1,showDaysOutsideCurrentMonth:c??!1}),[m,u,i,a,s,r,n,o,l,c])}const Zhe=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],Xhe=(t,s)=>{const{isDaySelected:a,isDayDisabled:r,isDayCurrent:n,isDayOutsideMonth:i,disableMargin:o,disableHighlightToday:l,showDaysOutsideCurrentMonth:c}=s,m=i&&!c;return kt({root:["root",a&&!m&&"selected",r&&"disabled",!o&&"dayWithMargin",!l&&n&&"today",i&&c&&"dayOutsideMonth",m&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},Qhe,t)},xI=({theme:t})=>je({},t.typography.caption,{width:Ex,height:Ex,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Nn(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:Nn(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${Pd.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Pd.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Pd.disabled}:not(.${Pd.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${Pd.disabled}&.${Pd.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${Bv}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(t.vars||t).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${Pd.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}}]}),gI=(t,s)=>{const{ownerState:a}=t;return[s.root,!a.disableMargin&&s.dayWithMargin,!a.disableHighlightToday&&a.isDayCurrent&&s.today,!a.isDayOutsideMonth&&a.showDaysOutsideCurrentMonth&&s.dayOutsideMonth,a.isDayOutsideMonth&&!a.showDaysOutsideCurrentMonth&&s.hiddenDaySpacingFiller]},Jhe=Ne(yo,{name:"MuiPickersDay",slot:"Root",overridesResolver:gI})(xI),efe=Ne("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:gI})(({theme:t})=>je({},xI({theme:t}),{opacity:0,pointerEvents:"none"})),Uh=()=>{},tfe=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersDay"}),{autoFocus:n=!1,className:i,classes:o,isAnimating:l,onClick:c,onDaySelect:m,onFocus:u=Uh,onBlur:h=Uh,onKeyDown:f=Uh,onMouseDown:b=Uh,onMouseEnter:w=Uh,children:S,day:j,selected:v,disabled:N,today:C,outsideCurrentMonth:P,disableMargin:E,disableHighlightToday:M,showDaysOutsideCurrentMonth:T}=r,A=as(r,Zhe),L=fI({day:j,selected:v,disabled:N,today:C,outsideCurrentMonth:P,disableMargin:E,disableHighlightToday:M,showDaysOutsideCurrentMonth:T}),F=Xhe(o,L),z=Es(),I=g.useRef(null),Q=Bs(I,a);Ia(()=>{n&&!N&&!l&&!P&&I.current.focus()},[n,N,l,P]);const Y=q=>{b(q),P&&q.preventDefault()},B=q=>{q.defaultMuiPrevented=!0,N||m(j),P&&q.currentTarget.focus(),c&&c(q)};return P&&!T?e.jsx(efe,{className:et(F.root,F.hiddenDaySpacingFiller,i),ownerState:L,role:A.role}):e.jsx(Jhe,je({className:et(F.root,i),ref:Q,centerRipple:!0,disabled:N,tabIndex:v?0:-1,onKeyDown:q=>f(q,j),onFocus:q=>u(q,j),onBlur:q=>h(q,j),onMouseEnter:q=>w(q,j),onClick:B,onMouseDown:Y},A,{ownerState:L,children:S??z.format(j,"dayOfMonth")}))}),sfe=g.memo(tfe),pm=t=>t.saveQuery!=null,yI=({stateResponse:{localizedDigits:t,sectionsValueBoundaries:s,state:a,timezone:r,setCharacterQuery:n,setTempAndroidValueStr:i,updateSectionValue:o}})=>{const l=Es(),c=({keyPressed:h,sectionIndex:f},b,w)=>{const S=h.toLowerCase(),j=a.sections[f];if(a.characterQuery!=null&&(!w||w(a.characterQuery.value))&&a.characterQuery.sectionIndex===f){const N=`${a.characterQuery.value}${S}`,C=b(N,j);if(!pm(C))return n({sectionIndex:f,value:N,sectionType:j.type}),C}const v=b(S,j);return pm(v)&&!v.saveQuery?(n(null),null):(n({sectionIndex:f,value:S,sectionType:j.type}),pm(v)?null:v)},m=h=>{const f=(S,j,v)=>{const N=j.filter(C=>C.toLowerCase().startsWith(v));return N.length===0?{saveQuery:!1}:{sectionValue:N[0],shouldGoToNextSection:N.length===1}},b=(S,j,v,N)=>{const C=P=>KA(l,r,j.type,P);if(j.contentType==="letter")return f(j.format,C(j.format),S);if(v&&N!=null&&GA(l,v).contentType==="letter"){const P=C(v),E=f(v,P,S);return pm(E)?{saveQuery:!1}:je({},E,{sectionValue:N(E.sectionValue,P)})}return{saveQuery:!1}};return c(h,(S,j)=>{switch(j.type){case"month":{const v=N=>K8(l,N,l.formats.month,j.format);return b(S,j,l.formats.month,v)}case"weekDay":{const v=(N,C)=>C.indexOf(N).toString();return b(S,j,l.formats.weekday,v)}case"meridiem":return b(S,j);default:return{saveQuery:!1}}})},u=h=>{const f=({queryValue:w,skipIfBelowMinimum:S,section:j})=>{const v=uu(w,t),N=Number(v),C=s[j.type]({currentDate:null,format:j.format,contentType:j.contentType});if(N>C.maximum)return{saveQuery:!1};if(S&&N<C.minimum)return{saveQuery:!0};const P=N*10>C.maximum||v.length===C.maximum.toString().length;return{sectionValue:QA(l,N,C,t,j),shouldGoToNextSection:P}};return c(h,(w,S)=>{if(S.contentType==="digit"||S.contentType==="digit-with-letter")return f({queryValue:w,skipIfBelowMinimum:!1,section:S});if(S.type==="month"){ZA(l,"digit","month","MM");const j=f({queryValue:w,skipIfBelowMinimum:!0,section:{type:S.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(pm(j))return j;const v=K8(l,j.sectionValue,"MM",S.format);return je({},j,{sectionValue:v})}if(S.type==="weekDay"){const j=f({queryValue:w,skipIfBelowMinimum:!0,section:S});if(pm(j))return j;const v=zv(l,S.format)[Number(j.sectionValue)-1];return je({},j,{sectionValue:v})}return{saveQuery:!1}},w=>G8(w,t))};return Ot(h=>{const f=a.sections[h.sectionIndex],w=G8(h.keyPressed,t)?u(je({},h,{keyPressed:rS(h.keyPressed,t)})):m(h);if(w==null){i(null);return}o({section:f,newSectionValue:w.sectionValue,shouldGoToNextSection:w.shouldGoToNextSection})})},Pp=({props:t,value:s,timezone:a,adapter:r})=>{if(s===null)return null;const{shouldDisableDate:n,shouldDisableMonth:i,shouldDisableYear:o,disablePast:l,disableFuture:c,minDate:m,maxDate:u}=t,h=r.date(void 0,a);switch(!0){case!r.isValid(s):return"invalidDate";case!!(n&&n(s)):return"shouldDisableDate";case!!(i&&i(s)):return"shouldDisableMonth";case!!(o&&o(s)):return"shouldDisableYear";case!!(c&&r.isAfterDay(s,h)):return"disableFuture";case!!(l&&r.isBeforeDay(s,h)):return"disablePast";case!!(m&&r.isBeforeDay(s,m)):return"minDate";case!!(u&&r.isAfterDay(s,u)):return"maxDate";default:return null}};Pp.valueManager=or;const Sg=({adapter:t,value:s,timezone:a,props:r})=>{if(s===null)return null;const{minTime:n,maxTime:i,minutesStep:o,shouldDisableTime:l,disableIgnoringDatePartForTimeValidation:c=!1,disablePast:m,disableFuture:u}=r,h=t.date(void 0,a),f=wg(c,t);switch(!0){case!t.isValid(s):return"invalidDate";case!!(n&&f(n,s)):return"minTime";case!!(i&&f(s,i)):return"maxTime";case!!(u&&t.isAfter(s,h)):return"disableFuture";case!!(m&&t.isBefore(s,h)):return"disablePast";case!!(l&&l(s,"hours")):return"shouldDisableTime-hours";case!!(l&&l(s,"minutes")):return"shouldDisableTime-minutes";case!!(l&&l(s,"seconds")):return"shouldDisableTime-seconds";case!!(o&&t.getMinutes(s)%o!==0):return"minutesStep";default:return null}};Sg.valueManager=or;const Vv=({adapter:t,value:s,timezone:a,props:r})=>{const n=Pp({adapter:t,value:s,timezone:a,props:r});return n!==null?n:Sg({adapter:t,value:s,timezone:a,props:r})};Vv.valueManager=or;function bI(t){const{props:s,validator:a,value:r,timezone:n,onError:i}=t,o=Es(),l=g.useRef(a.valueManager.defaultErrorState),c=a({adapter:o,value:r,timezone:n,props:s}),m=a.valueManager.hasError(c);g.useEffect(()=>{i&&!a.valueManager.isSameError(c,l.current)&&i(c,r),l.current=c},[a,i,c,r]);const u=Ot(h=>a({adapter:o,value:h,timezone:n,props:s}));return{validationError:c,hasValidationError:m,getValidationErrorForNewValue:u}}const afe=5e3,vI=t=>{const s=Es(),a=Zr(),r=$r(),{manager:{validator:n,valueType:i,internal_valueManager:o,internal_fieldValueManager:l},internalPropsWithDefaults:c,internalPropsWithDefaults:{value:m,defaultValue:u,referenceDate:h,onChange:f,format:b,formatDensity:w="dense",selectedSections:S,onSelectedSectionsChange:j,shouldRespectLeadingZeros:v=!1,timezone:N,enableAccessibleFieldDOMStructure:C=!0},forwardedProps:{error:P}}=t,{value:E,handleValueChange:M,timezone:T}=rd({name:"a field component",timezone:N,value:m,defaultValue:u,referenceDate:h,onChange:f,valueManager:o}),A=g.useRef(E);g.useEffect(()=>{A.current=E},[E]);const{hasValidationError:L}=bI({props:c,validator:n,timezone:T,value:E,onError:c.onError}),F=g.useMemo(()=>P!==void 0?P:L,[L,P]),z=g.useMemo(()=>cpe(s),[s]),I=g.useMemo(()=>hpe(s,z,T),[s,z,T]),Q=g.useCallback(Se=>l.getSectionsFromValue(Se,He=>X8({adapter:s,localeText:a,localizedDigits:z,format:b,date:He,formatDensity:w,shouldRespectLeadingZeros:v,enableAccessibleFieldDOMStructure:C,isRtl:r})),[l,b,a,z,r,v,s,w,C]),[Y,B]=g.useState(()=>{const Se=Q(E),He={sections:Se,lastExternalValue:E,lastSectionsDependencies:{format:b,isRtl:r,locale:s.locale},tempValueStrAndroid:null,characterQuery:null},ze=vhe(Se),st=o.getInitialReferenceValue({referenceDate:h,value:E,adapter:s,props:c,granularity:ze,timezone:T});return je({},He,{referenceValue:st})}),[q,V]=On({controlled:S,default:null,name:"useField",state:"selectedSections"}),G=Se=>{V(Se),j?.(Se)},H=g.useMemo(()=>d_(q,Y.sections),[q,Y.sections]),D=H==="all"?0:H,R=g.useMemo(()=>gpe(Y.sections,r&&!C),[Y.sections,r,C]),$=g.useMemo(()=>Y.sections.every(Se=>Se.value===""),[Y.sections]),W=Se=>{const He={validationError:n({adapter:s,value:Se,timezone:T,props:c})};M(Se,He)},J=(Se,He)=>{const ze=[...Y.sections];return ze[Se]=je({},ze[Se],{value:He,modified:!0}),ze},te=g.useRef(null),ee=ni(),ae=Se=>{D!=null&&(te.current={sectionIndex:D,value:Se},ee.start(0,()=>{te.current=null}))},ce=()=>{o.areValuesEqual(s,E,o.emptyValue)?B(Se=>je({},Se,{sections:Se.sections.map(He=>je({},He,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(B(Se=>je({},Se,{characterQuery:null})),W(o.emptyValue))},he=()=>{if(D==null)return;const Se=Y.sections[D];Se.value!==""&&(ae(""),l.getDateFromSection(E,Se)===null?B(He=>je({},He,{sections:J(D,""),tempValueStrAndroid:null,characterQuery:null})):(B(He=>je({},He,{characterQuery:null})),W(l.updateDateInValue(E,Se,null))))},ne=Se=>{const He=(st,ke)=>{const We=s.parse(st,b);if(!s.isValid(We))return null;const ye=X8({adapter:s,localeText:a,localizedDigits:z,format:b,date:We,formatDensity:w,shouldRespectLeadingZeros:v,enableAccessibleFieldDOMStructure:C,isRtl:r});return Z8(s,We,ye,ke,!1)},ze=l.parseValueStr(Se,Y.referenceValue,He);W(ze)},xe=ni(),ge=({section:Se,newSectionValue:He,shouldGoToNextSection:ze})=>{ee.clear(),xe.clear();const st=l.getDateFromSection(E,Se);ze&&D<Y.sections.length-1&&G(D+1);const ke=J(D,He),We=l.getDateSectionsFromValue(ke,Se),ye=upe(s,We,z);if(s.isValid(ye)){const Ye=Z8(s,ye,We,l.getDateFromSection(Y.referenceValue,Se),!0);return st==null&&xe.start(0,()=>{A.current===E&&B(at=>je({},at,{sections:l.clearDateSections(Y.sections,Se),tempValueStrAndroid:null}))}),W(l.updateDateInValue(E,Se,Ye))}return We.every(Ye=>Ye.value!=="")&&(st==null||s.isValid(st))?(ae(He),W(l.updateDateInValue(E,Se,ye))):st!=null?(ae(He),W(l.updateDateInValue(E,Se,null))):B(Ye=>je({},Ye,{sections:ke,tempValueStrAndroid:null}))},le=Se=>B(He=>je({},He,{tempValueStrAndroid:Se})),pe=Ot(Se=>{B(He=>je({},He,{characterQuery:Se}))});if(E!==Y.lastExternalValue){const Se=te.current!=null&&!s.isValid(l.getDateFromSection(E,Y.sections[te.current.sectionIndex]));let He;Se?He=J(te.current.sectionIndex,te.current.value):He=Q(E),B(ze=>je({},ze,{lastExternalValue:E,sections:He,sectionsDependencies:{format:b,isRtl:r,locale:s.locale},referenceValue:Se?ze.referenceValue:l.updateReferenceValue(s,E,ze.referenceValue),tempValueStrAndroid:null}))}if(r!==Y.lastSectionsDependencies.isRtl||b!==Y.lastSectionsDependencies.format||s.locale!==Y.lastSectionsDependencies.locale){const Se=Q(E);B(He=>je({},He,{lastSectionsDependencies:{format:b,isRtl:r,locale:s.locale},sections:Se,tempValueStrAndroid:null,characterQuery:null}))}Y.characterQuery!=null&&!F&&D==null&&pe(null),Y.characterQuery!=null&&Y.sections[Y.characterQuery.sectionIndex]?.type!==Y.characterQuery.sectionType&&pe(null),g.useEffect(()=>{te.current!=null&&(te.current=null)});const Re=ni();return g.useEffect(()=>(Y.characterQuery!=null&&Re.start(afe,()=>pe(null)),()=>{}),[Y.characterQuery,pe,Re]),g.useEffect(()=>{Y.tempValueStrAndroid!=null&&D!=null&&he()},[Y.sections]),{activeSectionIndex:D,areAllSectionsEmpty:$,error:F,localizedDigits:z,parsedSelectedSections:H,sectionOrder:R,sectionsValueBoundaries:I,state:Y,timezone:T,value:E,clearValue:ce,clearActiveSection:he,setCharacterQuery:pe,setSelectedSections:G,setTempAndroidValueStr:le,updateSectionValue:ge,updateValueFromValueStr:ne,getSectionsFromValue:Q}};function jI(t){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:s},internalProps:a,skipContextFieldRefAssignment:r}=t,n=lS(),i=eI(),o=Bs(a.unstableFieldRef,r?null:i?.fieldRef),l=n?.setValue,c=g.useCallback((u,h)=>l?.(u,{validationError:h.validationError,shouldClose:!1}),[l]),m=g.useMemo(()=>i!=null&&n!=null?je({value:n.value,onChange:c,timezone:n.timezone,disabled:n.disabled,readOnly:n.readOnly,autoFocus:n.autoFocus&&!n.open,focused:n.open?!0:void 0,format:n.fieldFormat,formatDensity:i.formatDensity,enableAccessibleFieldDOMStructure:i.enableAccessibleFieldDOMStructure,selectedSections:i.selectedSections,onSelectedSectionsChange:i.onSelectedSectionsChange,unstableFieldRef:o},a):a,[n,i,a,c,o]);return s(m)}function mS(t){const{focused:s,domGetters:a,stateResponse:{parsedSelectedSections:r,state:n}}=t;if(!a.isReady())return;const i=ir(a.getRoot()).getSelection();if(!i)return;if(r==null){i.rangeCount>0&&i.getRangeAt(0).startContainer instanceof Node&&a.getRoot().contains(i.getRangeAt(0).startContainer)&&i.removeAllRanges(),s&&a.getRoot().blur();return}if(!a.getRoot().contains(rn(a.getRoot())))return;const o=new window.Range;let l;r==="all"?l=a.getRoot():n.sections[r].type==="empty"?l=a.getSectionContainer(r):l=a.getSectionContent(r),o.selectNodeContents(l),l.focus(),i.removeAllRanges(),i.addRange(o)}function NI(t){const s=Es(),{manager:{internal_fieldValueManager:a},internalPropsWithDefaults:{minutesStep:r,disabled:n,readOnly:i},stateResponse:{state:o,value:l,activeSectionIndex:c,parsedSelectedSections:m,sectionsValueBoundaries:u,localizedDigits:h,timezone:f,sectionOrder:b,clearValue:w,clearActiveSection:S,setSelectedSections:j,updateSectionValue:v}}=t;return Ot(N=>{if(!n)switch(!0){case((N.ctrlKey||N.metaKey)&&String.fromCharCode(N.keyCode)==="A"&&!N.shiftKey&&!N.altKey):{N.preventDefault(),j("all");break}case N.key==="ArrowRight":{if(N.preventDefault(),m==null)j(b.startIndex);else if(m==="all")j(b.endIndex);else{const C=b.neighbors[m].rightIndex;C!==null&&j(C)}break}case N.key==="ArrowLeft":{if(N.preventDefault(),m==null)j(b.endIndex);else if(m==="all")j(b.startIndex);else{const C=b.neighbors[m].leftIndex;C!==null&&j(C)}break}case N.key==="Delete":{if(N.preventDefault(),i)break;m==null||m==="all"?w():S();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(N.key):{if(N.preventDefault(),i||c==null)break;m==="all"&&j(c);const C=o.sections[c],P=nfe(s,f,C,N.key,u,h,a.getDateFromSection(l,C),{minutesStep:r});v({section:C,newSectionValue:P,shouldGoToNextSection:!1});break}}})}function rfe(t){switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function nfe(t,s,a,r,n,i,o,l){const c=rfe(r),m=r==="Home",u=r==="End",h=a.value===""||m||u,f=()=>{const w=n[a.type]({currentDate:o,format:a.format,contentType:a.contentType}),S=N=>QA(t,N,w,i,a),j=a.type==="minutes"&&l?.minutesStep?l.minutesStep:1;let v;if(h){if(a.type==="year"&&!u&&!m)return t.formatByString(t.date(void 0,s),a.format);c>0||m?v=w.minimum:v=w.maximum}else v=parseInt(uu(a.value,i),10)+c*j;return v%j!==0&&((c<0||m)&&(v+=j-(j+v)%j),(c>0||u)&&(v-=v%j)),v>w.maximum?S(w.minimum+(v-w.maximum-1)%(w.maximum-w.minimum+1)):v<w.minimum?S(w.maximum-(w.minimum-v-1)%(w.maximum-w.minimum+1)):S(v)},b=()=>{const w=KA(t,s,a.type,a.format);if(w.length===0)return a.value;if(h)return c>0||m?w[0]:w[w.length-1];const v=((w.indexOf(a.value)+c)%w.length+w.length)%w.length;return w[v]};return a.contentType==="digit"||a.contentType==="digit-with-letter"?f():b()}function ife(t){const{manager:s,focused:a,setFocused:r,domGetters:n,stateResponse:i,applyCharacterEditing:o,internalPropsWithDefaults:l,stateResponse:{parsedSelectedSections:c,sectionOrder:m,state:u,clearValue:h,setCharacterQuery:f,setSelectedSections:b,updateValueFromValueStr:w},internalPropsWithDefaults:{disabled:S=!1,readOnly:j=!1}}=t,v=NI({manager:s,internalPropsWithDefaults:l,stateResponse:i}),N=ni(),C=Ot(A=>{S||!n.isReady()||(r(!0),c==="all"?N.start(0,()=>{const L=document.getSelection().getRangeAt(0).startOffset;if(L===0){b(m.startIndex);return}let F=0,z=0;for(;z<L&&F<u.sections.length;){const I=u.sections[F];F+=1,z+=`${I.startSeparator}${I.value||I.placeholder}${I.endSeparator}`.length}b(F-1)}):a?n.getRoot().contains(A.target)||b(m.startIndex):(r(!0),b(m.startIndex)))}),P=Ot(A=>{if(!n.isReady()||c!=="all")return;const F=A.target.textContent??"";n.getRoot().innerHTML=u.sections.map(z=>`${z.startSeparator}${z.value||z.placeholder}${z.endSeparator}`).join(""),mS({focused:a,domGetters:n,stateResponse:i}),F.length===0||F.charCodeAt(0)===10?(h(),b("all")):F.length>1?w(F):(c==="all"&&b(0),o({keyPressed:F,sectionIndex:0}))}),E=Ot(A=>{if(j||c!=="all"){A.preventDefault();return}const L=A.clipboardData.getData("text");A.preventDefault(),f(null),w(L)}),M=Ot(()=>{if(a||S||!n.isReady())return;const A=rn(n.getRoot());r(!0),n.getSectionIndexFromDOMElement(A)!=null||b(m.startIndex)}),T=Ot(()=>{setTimeout(()=>{if(!n.isReady())return;const A=rn(n.getRoot());!n.getRoot().contains(A)&&(r(!1),b(null))})});return{onKeyDown:v,onBlur:T,onFocus:M,onClick:C,onPaste:E,onInput:P,contentEditable:c==="all",tabIndex:l.disabled||c===0?-1:0}}function ofe(t){const{manager:{internal_fieldValueManager:s},stateResponse:{areAllSectionsEmpty:a,state:r,updateValueFromValueStr:n}}=t,i=Ot(l=>{n(l.target.value)});return{value:g.useMemo(()=>a?"":s.getV7HiddenInputValueFromSections(r.sections),[a,r.sections,s]),onChange:i}}function lfe(t){const{stateResponse:{setSelectedSections:s},internalPropsWithDefaults:{disabled:a=!1}}=t,r=g.useCallback(n=>i=>{a||i.isDefaultPrevented()||s(n)},[a,s]);return g.useCallback(n=>({"data-sectionindex":n,onClick:r(n)}),[r])}function cfe(t){const s=Es(),a=Zr(),{focused:r,domGetters:n,stateResponse:i,applyCharacterEditing:o,manager:{internal_fieldValueManager:l},stateResponse:{parsedSelectedSections:c,sectionsValueBoundaries:m,state:u,value:h,clearActiveSection:f,setCharacterQuery:b,setSelectedSections:w,updateSectionValue:S,updateValueFromValueStr:j},internalPropsWithDefaults:{disabled:v=!1,readOnly:N=!1}}=t,C=c==="all",P=!C&&!v&&!N,E=Ot(z=>{if(!n.isReady())return;const I=u.sections[z];n.getSectionContent(z).innerHTML=I.value||I.placeholder,mS({focused:r,domGetters:n,stateResponse:i})}),M=Ot(z=>{if(!n.isReady())return;const I=z.target,Q=I.textContent??"",Y=n.getSectionIndexFromDOMElement(I),B=u.sections[Y];if(N){E(Y);return}if(Q.length===0){if(B.value===""){E(Y);return}const q=z.nativeEvent.inputType;if(q==="insertParagraph"||q==="insertLineBreak"){E(Y);return}E(Y),f();return}o({keyPressed:Q,sectionIndex:Y}),E(Y)}),T=Ot(z=>{z.preventDefault()}),A=Ot(z=>{if(z.preventDefault(),N||v||typeof c!="number")return;const I=u.sections[c],Q=z.clipboardData.getData("text"),Y=/^[a-zA-Z]+$/.test(Q),B=/^[0-9]+$/.test(Q),q=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(Q);I.contentType==="letter"&&Y||I.contentType==="digit"&&B||I.contentType==="digit-with-letter"&&q?(b(null),S({section:I,newSectionValue:Q,shouldGoToNextSection:!0})):!Y&&!B&&(b(null),j(Q))}),L=Ot(z=>{z.preventDefault(),z.dataTransfer.dropEffect="none"}),F=g.useCallback(z=>()=>{v||w(z)},[v,w]);return g.useCallback((z,I)=>{const Q=m[z.type]({currentDate:l.getDateFromSection(h,z),contentType:z.contentType,format:z.format});return{onInput:M,onPaste:A,onMouseUp:T,onDragOver:L,onFocus:F(I),"aria-readonly":N,"aria-valuenow":ufe(z,s),"aria-valuemin":Q.minimum,"aria-valuemax":Q.maximum,"aria-valuetext":z.value?dfe(z,s):a.empty,"aria-label":a[z.type],"aria-disabled":v,tabIndex:!P||C||I>0?-1:0,contentEditable:!C&&!v&&!N,role:"spinbutton","data-range-position":z.dateName||void 0,spellCheck:P?!1:void 0,autoCapitalize:P?"none":void 0,autoCorrect:P?"off":void 0,children:z.value||z.placeholder,inputMode:z.contentType==="letter"?"text":"numeric"}},[m,C,v,N,P,a,s,M,A,T,L,F,l,h])}function dfe(t,s){if(t.value)switch(t.type){case"month":{if(t.contentType==="digit"){const r=s.setMonth(s.date(),Number(t.value)-1);return s.isValid(r)?s.format(r,"month"):""}const a=s.parse(t.value,t.format);return a&&s.isValid(a)?s.format(a,"month"):void 0}case"day":if(t.contentType==="digit"){const a=s.setDate(s.startOfYear(s.date()),Number(t.value));return s.isValid(a)?s.format(a,"dayOfMonthFull"):""}return t.value;case"weekDay":return;default:return}}function ufe(t,s){if(t.value)switch(t.type){case"weekDay":return t.contentType==="letter"?void 0:Number(t.value);case"meridiem":{const a=s.parse(`01:00 ${t.value}`,`${s.formats.hours12h}:${s.formats.minutes} ${t.format}`);return a?s.getHours(a)>=12?1:0:void 0}case"day":return t.contentType==="digit-with-letter"?parseInt(t.value,10):Number(t.value);case"month":{if(t.contentType==="digit")return Number(t.value);const a=s.parse(t.value,t.format);return a?s.getMonth(a)+1:void 0}default:return t.contentType!=="letter"?Number(t.value):void 0}}const mfe=t=>{const{props:s,manager:a,skipContextFieldRefAssignment:r,manager:{valueType:n,internal_useOpenPickerButtonAriaLabel:i}}=t,{internalProps:o,forwardedProps:l}=WA(s,n),c=jI({manager:a,internalProps:o,skipContextFieldRefAssignment:r}),{sectionListRef:m,onBlur:u,onClick:h,onFocus:f,onInput:b,onPaste:w,onKeyDown:S,onClear:j,clearable:v}=l,{disabled:N=!1,readOnly:C=!1,autoFocus:P=!1,focused:E,unstableFieldRef:M}=c,T=g.useRef(null),A=Bs(m,T),L=g.useMemo(()=>({isReady:()=>T.current!=null,getRoot:()=>T.current.getRoot(),getSectionContainer:Se=>T.current.getSectionContainer(Se),getSectionContent:Se=>T.current.getSectionContent(Se),getSectionIndexFromDOMElement:Se=>T.current.getSectionIndexFromDOMElement(Se)}),[T]),F=vI({manager:a,internalPropsWithDefaults:c,forwardedProps:l}),{areAllSectionsEmpty:z,error:I,parsedSelectedSections:Q,sectionOrder:Y,state:B,value:q,clearValue:V,setSelectedSections:G}=F,H=yI({stateResponse:F}),D=i(q),[R,$]=g.useState(!1);function W(Se=0){if(N||!T.current||rT(T)!=null)return;const He=d_(Se,B.sections);$(!0),T.current.getSectionContent(He).focus()}const J=ife({manager:a,internalPropsWithDefaults:c,stateResponse:F,applyCharacterEditing:H,focused:R,setFocused:$,domGetters:L}),te=ofe({manager:a,stateResponse:F}),ee=lfe({stateResponse:F,internalPropsWithDefaults:c}),ae=cfe({manager:a,stateResponse:F,applyCharacterEditing:H,internalPropsWithDefaults:c,domGetters:L,focused:R}),ce=Ot(Se=>{S?.(Se),J.onKeyDown(Se)}),he=Ot(Se=>{u?.(Se),J.onBlur(Se)}),ne=Ot(Se=>{f?.(Se),J.onFocus(Se)}),xe=Ot(Se=>{Se.isDefaultPrevented()||(h?.(Se),J.onClick(Se))}),ge=Ot(Se=>{w?.(Se),J.onPaste(Se)}),le=Ot(Se=>{b?.(Se),J.onInput(Se)}),pe=Ot((Se,...He)=>{Se.preventDefault(),j?.(Se,...He),V(),nT(T)?G(Y.startIndex):W(0)}),Re=g.useMemo(()=>B.sections.map((Se,He)=>{const ze=ae(Se,He);return{container:ee(He),content:ae(Se,He),before:{children:Se.startSeparator},after:{children:Se.endSeparator,"data-range-position":Se.isEndFormatSeparator?ze["data-range-position"]:void 0}}}),[B.sections,ee,ae]);return g.useEffect(()=>{if(T.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));P&&!N&&T.current&&T.current.getSectionContent(Y.startIndex).focus()},[]),Ia(()=>{if(!(!R||!T.current)){if(Q==="all")T.current.getRoot().focus();else if(typeof Q=="number"){const Se=T.current.getSectionContent(Q);Se&&Se.focus()}}},[Q,R]),Ia(()=>{mS({focused:R,domGetters:L,stateResponse:F})}),g.useImperativeHandle(M,()=>({getSections:()=>B.sections,getActiveSectionIndex:()=>rT(T),setSelectedSections:Se=>{if(N||!T.current)return;const He=d_(Se,B.sections);$((He==="all"?0:He)!==null),G(Se)},focusField:W,isFieldFocused:()=>nT(T)})),je({},l,J,{onBlur:he,onClick:xe,onFocus:ne,onInput:le,onPaste:ge,onKeyDown:ce,onClear:pe},te,{error:I,clearable:!!(v&&!z&&!C&&!N),focused:E??R,sectionListRef:A,enableAccessibleFieldDOMStructure:!0,elements:Re,areAllSectionsEmpty:z,disabled:N,readOnly:C,autoFocus:P,openPickerAriaLabel:D})};function rT(t){const s=rn(t.current?.getRoot());return!s||!t.current||!t.current.getRoot().contains(s)?null:t.current.getSectionIndexFromDOMElement(s)}function nT(t){const s=rn(t.current?.getRoot());return!!t.current&&t.current.getRoot().contains(s)}const Pm=t=>t.replace(/[\u2066\u2067\u2068\u2069]/g,""),pfe=(t,s,a)=>{let r=0,n=a?1:0;const i=[];for(let o=0;o<t.length;o+=1){const l=t[o],c=iS(l,a?"input-rtl":"input-ltr",s),m=`${l.startSeparator}${c}${l.endSeparator}`,u=Pm(m).length,h=m.length,f=Pm(c),b=n+(f===""?0:c.indexOf(f[0]))+l.startSeparator.length,w=b+f.length;i.push(je({},l,{start:r,end:r+u,startInInput:b,endInInput:w})),r+=u,n+=h}return i},hfe=t=>{const s=$r(),a=ni(),r=ni(),{props:n,manager:i,skipContextFieldRefAssignment:o,manager:{valueType:l,internal_valueManager:c,internal_fieldValueManager:m,internal_useOpenPickerButtonAriaLabel:u}}=t,{internalProps:h,forwardedProps:f}=WA(n,l),b=jI({manager:i,internalProps:h,skipContextFieldRefAssignment:o}),{onFocus:w,onClick:S,onPaste:j,onBlur:v,onKeyDown:N,onClear:C,clearable:P,inputRef:E,placeholder:M}=f,{readOnly:T=!1,disabled:A=!1,autoFocus:L=!1,focused:F,unstableFieldRef:z}=b,I=g.useRef(null),Q=Bs(E,I),Y=vI({manager:i,internalPropsWithDefaults:b,forwardedProps:f}),{activeSectionIndex:B,areAllSectionsEmpty:q,error:V,localizedDigits:G,parsedSelectedSections:H,sectionOrder:D,state:R,value:$,clearValue:W,clearActiveSection:J,setCharacterQuery:te,setSelectedSections:ee,setTempAndroidValueStr:ae,updateSectionValue:ce,updateValueFromValueStr:he,getSectionsFromValue:ne}=Y,xe=yI({stateResponse:Y}),ge=u($),le=g.useMemo(()=>pfe(R.sections,G,s),[R.sections,G,s]);function pe(){const be=I.current.selectionStart??0;let Oe;be<=le[0].startInInput||be>=le[le.length-1].endInInput?Oe=1:Oe=le.findIndex(jt=>jt.startInInput-jt.startSeparator.length>be);const Le=Oe===-1?le.length-1:Oe-1;ee(Le)}function Re(be=0){rn(I.current)!==I.current&&(I.current?.focus(),ee(be))}const Se=Ot(be=>{w?.(be);const Oe=I.current;a.start(0,()=>{!Oe||Oe!==I.current||B==null&&(Oe.value.length&&Number(Oe.selectionEnd)-Number(Oe.selectionStart)===Oe.value.length?ee("all"):pe())})}),He=Ot((be,...Oe)=>{be.isDefaultPrevented()||(S?.(be,...Oe),pe())}),ze=Ot(be=>{if(j?.(be),be.preventDefault(),T||A)return;const Oe=be.clipboardData.getData("text");if(typeof H=="number"){const Le=R.sections[H],jt=/^[a-zA-Z]+$/.test(Oe),Jt=/^[0-9]+$/.test(Oe),Kt=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(Oe);if(Le.contentType==="letter"&&jt||Le.contentType==="digit"&&Jt||Le.contentType==="digit-with-letter"&&Kt){te(null),ce({section:Le,newSectionValue:Oe,shouldGoToNextSection:!0});return}if(jt||Jt)return}te(null),he(Oe)}),st=Ot(be=>{v?.(be),ee(null)}),ke=Ot(be=>{if(T)return;const Oe=be.target.value;if(Oe===""){W();return}const Le=be.nativeEvent.data,jt=Le&&Le.length>1,Jt=jt?Le:Oe,Kt=Pm(Jt);if(H==="all"&&ee(B),B==null||jt){he(jt?Le:Kt);return}let rt;if(H==="all"&&Kt.length===1)rt=Kt;else{const Lt=Pm(m.getV6InputValueFromSections(le,G,s));let Nt=-1,ps=-1;for(let Is=0;Is<Lt.length;Is+=1)Nt===-1&&Lt[Is]!==Kt[Is]&&(Nt=Is),ps===-1&&Lt[Lt.length-Is-1]!==Kt[Kt.length-Is-1]&&(ps=Is);const cs=le[B];if(Nt<cs.start||Lt.length-ps-1>cs.end)return;const Ys=Kt.length-Lt.length+cs.end-Pm(cs.endSeparator||"").length;rt=Kt.slice(cs.start+Pm(cs.startSeparator||"").length,Ys)}if(rt.length===0){xpe()&&ae(Jt),J();return}xe({keyPressed:rt,sectionIndex:B})}),We=Ot((be,...Oe)=>{be.preventDefault(),C?.(be,...Oe),W(),iT(I)?ee(D.startIndex):Re(0)}),ye=NI({manager:i,internalPropsWithDefaults:b,stateResponse:Y}),Ye=Ot(be=>{N?.(be),ye(be)}),at=g.useMemo(()=>M!==void 0?M:m.getV6InputValueFromSections(ne(c.emptyValue),G,s),[M,m,ne,c.emptyValue,G,s]),bt=g.useMemo(()=>R.tempValueStrAndroid??m.getV6InputValueFromSections(R.sections,G,s),[R.sections,m,R.tempValueStrAndroid,G,s]);g.useEffect(()=>{I.current&&I.current===rn(I.current)&&ee("all")},[]),Ia(()=>{function be(){if(!I.current)return;if(H==null){I.current.scrollLeft&&(I.current.scrollLeft=0);return}if(I.current!==rn(I.current))return;const Oe=I.current.scrollTop;if(H==="all")I.current.select();else{const Le=le[H],jt=Le.type==="empty"?Le.startInInput-Le.startSeparator.length:Le.startInInput,Jt=Le.type==="empty"?Le.endInInput+Le.endSeparator.length:Le.endInInput;(jt!==I.current.selectionStart||Jt!==I.current.selectionEnd)&&I.current===rn(I.current)&&I.current.setSelectionRange(jt,Jt),r.start(0,()=>{I.current&&I.current===rn(I.current)&&I.current.selectionStart===I.current.selectionEnd&&(I.current.selectionStart!==jt||I.current.selectionEnd!==Jt)&&be()})}I.current.scrollTop=Oe}be()});const ct=g.useMemo(()=>B==null||R.sections[B].contentType==="letter"?"text":"numeric",[B,R.sections]),Et=!(I.current&&I.current===rn(I.current))&&q;return g.useImperativeHandle(z,()=>({getSections:()=>R.sections,getActiveSectionIndex:()=>{const be=I.current.selectionStart??0,Oe=I.current.selectionEnd??0;if(be===0&&Oe===0)return null;const Le=be<=le[0].startInInput?1:le.findIndex(jt=>jt.startInInput-jt.startSeparator.length>be);return Le===-1?le.length-1:Le-1},setSelectedSections:be=>ee(be),focusField:Re,isFieldFocused:()=>iT(I)})),je({},f,{error:V,clearable:!!(P&&!q&&!T&&!A),onBlur:st,onClick:He,onFocus:Se,onPaste:ze,onKeyDown:Ye,onClear:We,inputRef:Q,enableAccessibleFieldDOMStructure:!1,placeholder:at,inputMode:ct,autoComplete:"off",value:Et?"":bt,onChange:ke,focused:F,disabled:A,readOnly:T,autoFocus:L,openPickerAriaLabel:ge})};function iT(t){return t.current===rn(t.current)}const pS=t=>{const s=eI();return(t.props.enableAccessibleFieldDOMStructure??s?.enableAccessibleFieldDOMStructure??!0?mfe:hfe)(t)};function ffe(t={}){const{enableAccessibleFieldDOMStructure:s=!0}=t;return g.useMemo(()=>({valueType:"date",validator:Pp,internal_valueManager:or,internal_fieldValueManager:cS,internal_enableAccessibleFieldDOMStructure:s,internal_useApplyDefaultValuesToFieldInternalProps:gfe,internal_useOpenPickerButtonAriaLabel:xfe}),[s])}function xfe(t){const s=Es(),a=Zr();return g.useMemo(()=>{const r=s.isValid(t)?s.format(t,"fullDate"):null;return a.openDatePickerDialogue(r)},[t,a,s])}function gfe(t){const s=Es(),a=Cg(t);return g.useMemo(()=>je({},t,a,{format:t.format??s.formats.keyboardDate}),[t,a,s])}function Cg(t){const s=Es(),a=rI();return g.useMemo(()=>({disablePast:t.disablePast??!1,disableFuture:t.disableFuture??!1,minDate:Cb(s,t.minDate,a.minDate),maxDate:Cb(s,t.maxDate,a.maxDate)}),[t.minDate,t.maxDate,t.disableFuture,t.disablePast,s,a])}function yfe(t={}){const{enableAccessibleFieldDOMStructure:s=!0,ampm:a}=t;return g.useMemo(()=>({valueType:"time",validator:Sg,internal_valueManager:or,internal_fieldValueManager:cS,internal_enableAccessibleFieldDOMStructure:s,internal_useApplyDefaultValuesToFieldInternalProps:vfe,internal_useOpenPickerButtonAriaLabel:bfe(a)}),[a,s])}function bfe(t){return function(a){const r=Es(),n=Zr();return g.useMemo(()=>{const i=t??r.is12HourCycleInCurrentLocale()?"fullTime12h":"fullTime24h",o=r.isValid(a)?r.format(a,i):null;return n.openTimePickerDialogue(o)},[a,n,r])}}function vfe(t){const s=Es(),a=wI(t),r=g.useMemo(()=>t.ampm??s.is12HourCycleInCurrentLocale(),[t.ampm,s]);return g.useMemo(()=>je({},t,a,{format:t.format??(r?s.formats.fullTime12h:s.formats.fullTime24h)}),[t,a,r,s])}function wI(t){return g.useMemo(()=>({disablePast:t.disablePast??!1,disableFuture:t.disableFuture??!1}),[t.disablePast,t.disableFuture])}function jfe(t={}){const{enableAccessibleFieldDOMStructure:s=!0}=t;return g.useMemo(()=>({valueType:"date-time",validator:Vv,internal_valueManager:or,internal_fieldValueManager:cS,internal_enableAccessibleFieldDOMStructure:s,internal_useApplyDefaultValuesToFieldInternalProps:wfe,internal_useOpenPickerButtonAriaLabel:Nfe}),[s])}function Nfe(t){const s=Es(),a=Zr();return g.useMemo(()=>{const r=s.isValid(t)?s.format(t,"fullDate"):null;return a.openDatePickerDialogue(r)},[t,a,s])}function wfe(t){const s=Es(),a=_I(t),r=g.useMemo(()=>t.ampm??s.is12HourCycleInCurrentLocale(),[t.ampm,s]);return g.useMemo(()=>je({},t,a,{format:t.format??(r?s.formats.keyboardDateTime12h:s.formats.keyboardDateTime24h)}),[t,a,r,s])}function _I(t){const s=Es(),a=rI();return g.useMemo(()=>({disablePast:t.disablePast??!1,disableFuture:t.disableFuture??!1,disableIgnoringDatePartForTimeValidation:!!t.minDateTime||!!t.maxDateTime||!!t.disableFuture||!!t.disablePast,minDate:Cb(s,t.minDateTime??t.minDate,a.minDate),maxDate:Cb(s,t.maxDateTime??t.maxDate,a.maxDate),minTime:t.minDateTime??t.minTime,maxTime:t.maxDateTime??t.maxTime}),[t.minDateTime,t.maxDateTime,t.minTime,t.maxTime,t.minDate,t.maxDate,t.disableFuture,t.disablePast,s,a])}const _fe=t=>{const s=ffe(t);return pS({manager:s,props:t})};function hS(t){const{ownerState:s}=Ba(),a=$r();return g.useMemo(()=>je({},s,{isFieldDisabled:t.disabled??!1,isFieldReadOnly:t.readOnly??!1,isFieldRequired:t.required??!1,fieldDirection:a?"rtl":"ltr"}),[s,t.disabled,t.readOnly,t.required,a])}function Sfe(t){return Dt("MuiPickersTextField",t)}Tt("MuiPickersTextField",["root","focused","disabled","error","required"]);function Cfe(t){return Dt("MuiPickersInputBase",t)}const Hm=Tt("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","inputSizeSmall","activeBar"]);function Pfe(t){return Dt("MuiPickersSectionList",t)}const Vh=Tt("MuiPickersSectionList",["root","section","sectionContent"]),kfe=["slots","slotProps","elements","sectionListRef","classes"],SI=Ne("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),CI=Ne("span",{name:"MuiPickersSectionList",slot:"Section"})({}),PI=Ne("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),kI=Ne("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),Efe=t=>kt({root:["root"],section:["section"],sectionContent:["sectionContent"]},Pfe,t);function Tfe(t){const{slots:s,slotProps:a,element:r,classes:n}=t,{ownerState:i}=Ba(),o=s?.section??CI,l=ea({elementType:o,externalSlotProps:a?.section,externalForwardedProps:r.container,className:n.section,ownerState:i}),c=s?.sectionContent??kI,m=ea({elementType:c,externalSlotProps:a?.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:n.sectionContent,ownerState:i}),u=s?.sectionSeparator??PI,h=ea({elementType:u,externalSlotProps:a?.sectionSeparator,externalForwardedProps:r.before,ownerState:je({},i,{separatorPosition:"before"})}),f=ea({elementType:u,externalSlotProps:a?.sectionSeparator,externalForwardedProps:r.after,ownerState:je({},i,{separatorPosition:"after"})});return e.jsxs(o,je({},l,{children:[e.jsx(u,je({},h)),e.jsx(c,je({},m)),e.jsx(u,je({},f))]}))}const Mfe=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersSectionList"}),{slots:n,slotProps:i,elements:o,sectionListRef:l,classes:c}=r,m=as(r,kfe),u=Efe(c),{ownerState:h}=Ba(),f=g.useRef(null),b=Bs(a,f),w=v=>{if(!f.current)throw new Error(`MUI X: Cannot call sectionListRef.${v} before the mount of the component.`);return f.current};g.useImperativeHandle(l,()=>({getRoot(){return w("getRoot")},getSectionContainer(v){return w("getSectionContainer").querySelector(`.${Vh.section}[data-sectionindex="${v}"]`)},getSectionContent(v){return w("getSectionContent").querySelector(`.${Vh.section}[data-sectionindex="${v}"] .${Vh.sectionContent}`)},getSectionIndexFromDOMElement(v){const N=w("getSectionIndexFromDOMElement");if(v==null||!N.contains(v))return null;let C=null;return v.classList.contains(Vh.section)?C=v:v.classList.contains(Vh.sectionContent)&&(C=v.parentElement),C==null?null:Number(C.dataset.sectionindex)}}));const S=n?.root??SI,j=ea({elementType:S,externalSlotProps:i?.root,externalForwardedProps:m,additionalProps:{ref:b,suppressContentEditableWarning:!0},className:u.root,ownerState:h});return e.jsx(S,je({},j,{children:j.contentEditable?o.map(({content:v,before:N,after:C})=>`${N.children}${v.children}${C.children}`).join(""):e.jsx(g.Fragment,{children:o.map((v,N)=>e.jsx(Tfe,{slots:n,slotProps:i,element:v,classes:u},N))})}))}),EI=g.createContext(null),Hv=()=>{const t=g.useContext(EI);if(t==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return t},Dfe=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],Rfe=t=>Math.round(t*1e5)/1e5,Wv=Ne("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:t})=>je({},t.typography.body1,{color:(t.vars||t).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${Rfe(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),fS=Ne(SI,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:t})=>({padding:"4px 0 5px",fontFamily:t.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{justifyContent:"end"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:t.palette.mode==="light"?.42:.5}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!0,isLabelShrunk:!0},style:t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:t.palette.mode==="light"?.42:.5}}]})),Afe=Ne(CI,{name:"MuiPickersInputBase",slot:"Section"})(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),Ife=Ne(kI,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(t,s)=>s.content})(({theme:t})=>({fontFamily:t.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),Ofe=Ne(PI,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),Ffe=Ne("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(t,s)=>s.hiddenInput})(je({},GR)),Lfe=Ne("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:t,ownerState:s})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:t.transitions.create(["width","left"],{duration:t.transitions.duration.shortest}),backgroundColor:(t.vars||t).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:s.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:s.sectionOffsets[1]}})),$fe=(t,s)=>{const{isFieldFocused:a,isFieldDisabled:r,isFieldReadOnly:n,hasFieldError:i,inputSize:o,isInputInFullWidth:l,inputColor:c,hasStartAdornment:m,hasEndAdornment:u}=s,h={root:["root",a&&!r&&"focused",r&&"disabled",n&&"readOnly",i&&"error",l&&"fullWidth",`color${Xe(c)}`,o==="small"&&"inputSizeSmall",m&&"adornedStart",u&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return kt(h,Cfe,t)};function oT(t,s,a,r){if(t.content.id){const n=s.current?.querySelectorAll(`[data-sectionindex="${a}"] [data-range-position="${r}"]`);if(n)return Array.from(n).reduce((i,o)=>i+o.offsetWidth,0)}return 0}function zfe(t,s){let a=0;if(s.current?.getAttribute("data-active-range-position")==="end")for(let n=t.length-1;n>=t.length/2;n-=1)a+=oT(t[n],s,n,"end");else for(let n=0;n<t.length/2;n+=1)a+=oT(t[n],s,n,"start");return{activeBarWidth:a,sectionOffsets:[s.current?.querySelector('[data-sectionindex="0"]')?.offsetLeft||0,s.current?.querySelector(`[data-sectionindex="${t.length/2}"]`)?.offsetLeft||0]}}const xS=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersInputBase"}),{elements:n,areAllSectionsEmpty:i,value:o,onChange:l,id:c,endAdornment:m,startAdornment:u,renderSuffix:h,slots:f,slotProps:b,contentEditable:w,tabIndex:S,onInput:j,onPaste:v,onKeyDown:N,name:C,readOnly:P,inputProps:E,inputRef:M,sectionListRef:T,onFocus:A,onBlur:L,classes:F,ownerState:z}=r,I=as(r,Dfe),Q=Hv(),Y=g.useRef(null),B=g.useRef(null),q=g.useRef([]),V=Bs(a,Y),G=Bs(E?.ref,M),H=yi();if(!H)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const D=z??Q,R=ne=>{H.onFocus?.(ne),A?.(ne)},$=ne=>{R(ne)},W=ne=>{if(N?.(ne),ne.key==="Enter"&&!ne.defaultMuiPrevented){if(Y.current?.dataset.multiInput)return;const xe=Y.current?.closest("form"),ge=xe?.querySelector('[type="submit"]');if(!xe||!ge)return;ne.preventDefault(),xe.requestSubmit(ge)}},J=ne=>{H.onBlur?.(ne),L?.(ne)};g.useEffect(()=>{H&&H.setAdornedStart(!!u)},[H,u]),g.useEffect(()=>{H&&(i?H.onEmpty():H.onFilled())},[H,i]);const te=$fe(F,D),ee=f?.root||Wv,ae=ea({elementType:ee,externalSlotProps:b?.root,externalForwardedProps:I,additionalProps:{"aria-invalid":H.error,ref:V},className:te.root,ownerState:D}),ce=f?.input||fS,he=n.some(ne=>ne.content["data-range-position"]!==void 0);return g.useEffect(()=>{if(!he||!D.isPickerOpen)return;const{activeBarWidth:ne,sectionOffsets:xe}=zfe(n,Y);q.current=[xe[0],xe[1]],B.current&&(B.current.style.width=`${ne}px`)},[n,he,D.isPickerOpen]),e.jsxs(ee,je({},ae,{children:[u,e.jsx(Mfe,{sectionListRef:T,elements:n,contentEditable:w,tabIndex:S,className:te.sectionsContainer,onFocus:R,onBlur:J,onInput:j,onPaste:v,onKeyDown:W,slots:{root:ce,section:Afe,sectionContent:Ife,sectionSeparator:Ofe},slotProps:{root:je({},b?.input,{ownerState:D}),sectionContent:{className:Hm.sectionContent},sectionSeparator:({separatorPosition:ne})=>({className:ne==="before"?Hm.sectionBefore:Hm.sectionAfter})}}),m,h?h(je({},H)):null,e.jsx(Ffe,je({name:C,className:te.input,value:o,onChange:l,id:c,"aria-hidden":"true",tabIndex:-1,readOnly:P,required:H.required,disabled:H.disabled,onFocus:$},E,{ref:G})),he&&e.jsx(Lfe,{className:te.activeBar,ref:B,ownerState:{sectionOffsets:q.current}})]}))});function qfe(t){return Dt("MuiPickersOutlinedInput",t)}const oo=je({},Hm,Tt("MuiPickersOutlinedInput",["root","notchedOutline","input"])),Bfe=["children","className","label","notched","shrink"],Ufe=Ne("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:t})=>{const s=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:s}}),lT=Ne("span")(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:"inherit"})),Vfe=Ne("legend",{shouldForwardProp:t=>In(t)&&t!=="notched"})(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}));function Hfe(t){const{className:s,label:a,notched:r}=t,n=as(t,Bfe),i=Hv();return e.jsx(Ufe,je({"aria-hidden":!0,className:s},n,{ownerState:i,children:e.jsx(Vfe,{ownerState:i,notched:r,children:a?e.jsx(lT,{children:a}):e.jsx(lT,{className:"notranslate",children:""})})}))}const Wfe=["label","autoFocus","ownerState","classes","notched"],Yfe=Ne(Wv,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:t})=>{const s=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${oo.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${oo.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:s}},[`&.${oo.focused} .${oo.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${oo.disabled}`]:{[`& .${oo.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled},"*":{color:(t.vars||t).palette.action.disabled}},[`&.${oo.error} .${oo.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},variants:Object.keys((t.vars??t).palette).filter(a=>(t.vars??t).palette[a]?.main??!1).map(a=>({props:{inputColor:a},style:{[`&.${oo.focused}:not(.${oo.error}) .${oo.notchedOutline}`]:{borderColor:(t.vars||t).palette[a].main}}}))}}),Gfe=Ne(fS,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),Kfe=t=>{const a=kt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},qfe,t);return je({},t,a)},TI=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersOutlinedInput"}),{label:n,classes:i,notched:o}=r,l=as(r,Wfe),c=yi(),m=Kfe(i);return e.jsx(xS,je({slots:{root:Yfe,input:Gfe},renderSuffix:u=>e.jsx(Hfe,{shrink:!!(o||u.adornedStart||u.focused||u.filled),notched:!!(o||u.adornedStart||u.focused||u.filled),className:m.notchedOutline,label:n!=null&&n!==""&&c?.required?e.jsxs(g.Fragment,{children:[n,"","*"]}):n})},l,{label:n,classes:m,ref:a}))});TI.muiName="Input";function Qfe(t){return Dt("MuiPickersFilledInput",t)}const kd=je({},Hm,Tt("MuiPickersFilledInput",["root","underline","input"])),Zfe=["label","autoFocus","disableUnderline","hiddenLabel","classes"],Xfe=Ne(Wv,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:t=>In(t)&&t!=="disableUnderline"})(({theme:t})=>{const s=t.palette.mode==="light",a=s?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=s?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",n=s?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=s?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:n,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${kd.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${kd.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:i},variants:[...Object.keys((t.vars??t).palette).filter(o=>(t.vars??t).palette[o].main).map(o=>({props:{inputColor:o,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[o]?.main}`}}})),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kd.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kd.disabled}, .${kd.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${kd.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),Jfe=Ne(fS,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:t=>In(t)&&t!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),exe=(t,s)=>{const{inputHasUnderline:a}=s,n=kt({root:["root",a&&"underline"],input:["input"]},Qfe,t);return je({},t,n)},MI=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersFilledInput"}),{label:n,disableUnderline:i=!1,hiddenLabel:o=!1,classes:l}=r,c=as(r,Zfe),m=Hv(),u=je({},m,{inputHasUnderline:!i}),h=exe(l,u);return e.jsx(xS,je({slots:{root:Xfe,input:Jfe},slotProps:{root:{disableUnderline:i},input:{hiddenLabel:o}}},c,{label:n,classes:h,ref:a,ownerState:u}))});MI.muiName="Input";function txe(t){return Dt("MuiPickersFilledInput",t)}const Hh=je({},Hm,Tt("MuiPickersInput",["root","underline","input"])),sxe=["label","autoFocus","disableUnderline","ownerState","classes"],axe=Ne(Wv,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:t=>In(t)&&t!=="disableUnderline"})(({theme:t})=>{let a=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(a=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((t.vars??t).palette).filter(r=>(t.vars??t).palette[r].main).map(r=>({props:{inputColor:r,inputHasUnderline:!0},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}})),{props:{inputHasUnderline:!0},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Hh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Hh.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Hh.disabled}, .${Hh.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},[`&.${Hh.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),rxe=(t,s)=>{const{inputHasUnderline:a}=s,n=kt({root:["root",!a&&"underline"],input:["input"]},txe,t);return je({},t,n)},DI=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersInput"}),{label:n,disableUnderline:i=!1,classes:o}=r,l=as(r,sxe),c=Hv(),m=je({},c,{inputHasUnderline:!i}),u=rxe(o,m);return e.jsx(xS,je({slots:{root:axe},slotProps:{root:{disableUnderline:i}}},l,{ownerState:m,label:n,classes:u,ref:a}))});DI.muiName="Input";const nxe=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","hiddenLabel","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],ixe={standard:DI,filled:MI,outlined:TI},oxe=Ne(wv,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),lxe=(t,s)=>{const{isFieldFocused:a,isFieldDisabled:r,isFieldRequired:n}=s;return kt({root:["root",a&&!r&&"focused",r&&"disabled",n&&"required"]},Sfe,t)},RI=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersTextField"}),{onFocus:n,onBlur:i,className:o,classes:l,color:c="primary",disabled:m=!1,error:u=!1,variant:h="outlined",required:f=!1,hiddenLabel:b=!1,InputProps:w,inputProps:S,inputRef:j,sectionListRef:v,elements:N,areAllSectionsEmpty:C,onClick:P,onKeyDown:E,onKeyUp:M,onPaste:T,onInput:A,endAdornment:L,startAdornment:F,tabIndex:z,contentEditable:I,focused:Q,value:Y,onChange:B,fullWidth:q,id:V,name:G,helperText:H,FormHelperTextProps:D,label:R,InputLabelProps:$,"data-active-range-position":W}=r,J=as(r,nxe),te=g.useRef(null),ee=Bs(a,te),ae=wn(V),ce=H&&ae?`${ae}-helper-text`:void 0,he=R&&ae?`${ae}-label`:void 0,ne=hS({disabled:r.disabled,required:r.required,readOnly:w?.readOnly}),xe=g.useMemo(()=>je({},ne,{isFieldValueEmpty:C,isFieldFocused:Q??!1,hasFieldError:u??!1,inputSize:r.size??"medium",inputColor:c??"primary",isInputInFullWidth:q??!1,hasStartAdornment:!!(F??w?.startAdornment),hasEndAdornment:!!(L??w?.endAdornment),inputHasLabel:!!R,isLabelShrunk:!!$?.shrink}),[ne,C,Q,u,r.size,c,q,F,L,w?.startAdornment,w?.endAdornment,R,$?.shrink]),ge=lxe(l,xe),le=ixe[h],pe={};return h==="outlined"?($&&typeof $.shrink<"u"&&(pe.notched=$.shrink),pe.label=R):h==="filled"&&(pe.hiddenLabel=b),e.jsx(EI.Provider,{value:xe,children:e.jsxs(oxe,je({className:et(ge.root,o),ref:ee,focused:Q,disabled:m,variant:h,error:u,color:c,fullWidth:q,required:f,ownerState:xe},J,{children:[R!=null&&R!==""&&e.jsx($R,je({htmlFor:ae,id:he},$,{children:R})),e.jsx(le,je({elements:N,areAllSectionsEmpty:C,onClick:P,onKeyDown:E,onKeyUp:M,onInput:A,onPaste:T,onFocus:n,onBlur:i,endAdornment:L,startAdornment:F,tabIndex:z,contentEditable:I,value:Y,onChange:B,id:ae,fullWidth:q,inputProps:S,inputRef:j,sectionListRef:v,label:R,name:G,role:"group","aria-labelledby":he,"aria-describedby":ce,"aria-live":ce?"polite":void 0,"data-active-range-position":W},pe,w)),H&&e.jsx(_4,je({id:ce},D,{children:H}))]}))})}),cxe=["enableAccessibleFieldDOMStructure"],dxe=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],uxe=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],mxe=["ownerState"],pxe=["ownerState"],hxe=["ownerState"],fxe=["ownerState"],xxe=["InputProps","inputProps"],xN=()=>{},gxe=t=>{let{enableAccessibleFieldDOMStructure:s}=t,a=as(t,cxe);if(s){const{InputProps:N,readOnly:C,onClear:P,clearable:E,clearButtonPosition:M,openPickerButtonPosition:T,openPickerAriaLabel:A}=a,L=as(a,dxe),F=Ec>=6&&L?.slotProps?.input?Qf(L?.slotProps?.input,N):xN;return{clearable:E,onClear:P,clearButtonPosition:M,openPickerButtonPosition:T,openPickerAriaLabel:A,textFieldProps:je({},L,Ec>=6&&L?.slotProps?.input?{slotProps:je({},L?.slotProps,{input:z=>je({},un(F,z),{readOnly:C})})}:{InputProps:je({},N??{},{readOnly:C})})}}const{onPaste:r,onKeyDown:n,inputMode:i,readOnly:o,InputProps:l,inputProps:c,inputRef:m,onClear:u,clearable:h,clearButtonPosition:f,openPickerButtonPosition:b,openPickerAriaLabel:w}=a,S=as(a,uxe),j=Ec>=6&&S?.slotProps?.input?Qf(S?.slotProps?.input,l):xN,v=Ec>=6&&S?.slotProps?.htmlInput?Qf(S?.slotProps?.htmlInput,c):xN;return{clearable:h,onClear:u,clearButtonPosition:f,openPickerButtonPosition:b,openPickerAriaLabel:w,textFieldProps:je({},S,Ec>=6&&(S?.slotProps?.input||S?.slotProps?.htmlInput)?{slotProps:je({},S?.slotProps,{input:N=>je({},un(j,N),{readOnly:o}),htmlInput:N=>je({},un(v,N),{inputMode:i,onPaste:r,onKeyDown:n,ref:m})})}:{InputProps:je({},l??{},{readOnly:o}),inputProps:je({},c??{},{inputMode:i,onPaste:r,onKeyDown:n,ref:m})})}},gS=g.createContext({slots:{},slotProps:{},inputRef:void 0});function yS(t){const{fieldResponse:s,defaultOpenPickerIcon:a}=t,r=Zr(),n=lS(),i=g.useContext(gS),{textFieldProps:o,onClear:l,clearable:c,openPickerAriaLabel:m,clearButtonPosition:u="end",openPickerButtonPosition:h="end"}=gxe(s),f=hS(o),b=Ot(D=>{D.preventDefault(),n?.setOpen(R=>!R)}),w=n?n.triggerStatus:"hidden",S=c?u:null,j=w!=="hidden"?h:null,v=i.slots.textField??(s.enableAccessibleFieldDOMStructure===!1?mr:RI),N=i.slots.inputAdornment??_w,C=ea({elementType:N,externalSlotProps:i.slotProps.inputAdornment,additionalProps:{position:"start"},ownerState:je({},f,{position:"start"})}),P=as(C,mxe),E=ea({elementType:N,externalSlotProps:i.slotProps.inputAdornment,additionalProps:{position:"end"},ownerState:je({},f,{position:"end"})}),M=as(E,pxe),T=i.slots.openPickerButton??ta,A=ea({elementType:T,externalSlotProps:i.slotProps.openPickerButton,additionalProps:{disabled:w==="disabled",onClick:b,"aria-label":m,edge:o.variant!=="standard"?j:!1},ownerState:f}),L=as(A,hxe),F=i.slots.openPickerIcon??a,z=ea({elementType:F,externalSlotProps:i.slotProps.openPickerIcon,ownerState:f}),I=i.slots.clearButton??ta,Q=ea({elementType:I,externalSlotProps:i.slotProps.clearButton,className:"clearButton",additionalProps:{title:r.fieldClearLabel,tabIndex:-1,onClick:l,disabled:s.disabled||s.readOnly,edge:o.variant!=="standard"&&S!==j?S:!1},ownerState:f}),Y=as(Q,fxe),B=i.slots.clearIcon??Dpe,q=ea({elementType:B,externalSlotProps:i.slotProps.clearIcon,additionalProps:{fontSize:"small"},ownerState:f});o.ref=Bs(o.ref,n?.rootRef);const V={},G=un((Ec>=6&&o?.slotProps?.input)??o.InputProps,f);n&&(V.ref=n.triggerRef),!G?.startAdornment&&(S==="start"||j==="start")&&(V.startAdornment=e.jsxs(N,je({},P,{children:[j==="start"&&e.jsx(T,je({},L,{children:e.jsx(F,je({},z))})),S==="start"&&e.jsx(I,je({},Y,{children:e.jsx(B,je({},q))}))]}))),!G?.endAdornment&&(S==="end"||j==="end")&&(V.endAdornment=e.jsxs(N,je({},M,{children:[S==="end"&&e.jsx(I,je({},Y,{children:e.jsx(B,je({},q))})),j==="end"&&e.jsx(T,je({},L,{children:e.jsx(F,je({},z))}))]}))),!V?.endAdornment&&!V?.startAdornment&&i.slots.inputAdornment&&(V.endAdornment=e.jsx(N,je({},M))),S!=null&&(o.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(o.sx)?o.sx:[o.sx]]);const H=Ec>=6&&o?.slotProps?.input?un(Qf(G,V),f):je({},G,V);return o.inputProps=Ec>=6&&o?.slotProps?.htmlInput?un(o.slotProps.htmlInput,f):o.inputProps,delete o?.slotProps?.input,s.enableAccessibleFieldDOMStructure&&delete o?.slotProps,e.jsx(v,je({},o,{InputProps:H}))}function Qf(t,s){return t?s?a=>je({},un(s,a),un(t,a)):t:s}function bS(t){const{ref:s,externalForwardedProps:a,slotProps:r}=t,n=g.useContext(gS),i=lS(),o=hS(a),{InputProps:l,inputProps:c}=a,m=as(a,xxe),u=ea({elementType:RI,externalSlotProps:Qf(n.slotProps.textField,r?.textField),externalForwardedProps:m,additionalProps:{ref:s,sx:i?.rootSx,label:i?.label,name:i?.name,className:i?.rootClassName,inputRef:n.inputRef},ownerState:o});return u.inputProps=je({},c,u.inputProps),u.InputProps=je({},l,u.InputProps),u}function vS(t){const{slots:s={},slotProps:a={},inputRef:r,children:n}=t,i=g.useMemo(()=>({inputRef:r,slots:{openPickerButton:s.openPickerButton,openPickerIcon:s.openPickerIcon,textField:s.textField,inputAdornment:s.inputAdornment,clearIcon:s.clearIcon,clearButton:s.clearButton},slotProps:{openPickerButton:a.openPickerButton,openPickerIcon:a.openPickerIcon,textField:a.textField,inputAdornment:a.inputAdornment,clearIcon:a.clearIcon,clearButton:a.clearButton}}),[r,s.openPickerButton,s.openPickerIcon,s.textField,s.inputAdornment,s.clearIcon,s.clearButton,a.openPickerButton,a.openPickerIcon,a.textField,a.inputAdornment,a.clearIcon,a.clearButton]);return e.jsx(gS.Provider,{value:i,children:n})}const yxe=["slots","slotProps"],AI=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiDateField"}),{slots:n,slotProps:i}=r,o=as(r,yxe),l=bS({slotProps:i,ref:a,externalForwardedProps:o}),c=_fe(l);return e.jsx(vS,{slots:n,slotProps:i,inputRef:o.inputRef,children:e.jsx(yS,{fieldResponse:c,defaultOpenPickerIcon:nI})})}),bxe=t=>{const s=yfe(t);return pS({manager:s,props:t})},vxe=["slots","slotProps","InputProps","inputProps"],II=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiTimeField"}),{slots:n,slotProps:i}=r,o=as(r,vxe),l=bS({slotProps:i,ref:a,externalForwardedProps:o}),c=bxe(l);return e.jsx(vS,{slots:n,slotProps:i,inputRef:o.inputRef,children:e.jsx(yS,{fieldResponse:c,defaultOpenPickerIcon:Epe})})}),jxe=t=>{const s=jfe(t);return pS({manager:s,props:t})},Nxe=["slots","slotProps"],OI=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiDateTimeField"}),{slots:n,slotProps:i}=r,o=as(r,Nxe),l=bS({slotProps:i,ref:a,externalForwardedProps:o}),c=jxe(l);return e.jsx(vS,{slots:n,slotProps:i,inputRef:o.inputRef,children:e.jsx(yS,{fieldResponse:c,defaultOpenPickerIcon:nI})})}),FI=({shouldDisableDate:t,shouldDisableMonth:s,shouldDisableYear:a,minDate:r,maxDate:n,disableFuture:i,disablePast:o,timezone:l})=>{const c=Es();return g.useCallback(m=>Pp({adapter:c,value:m,timezone:l,props:{shouldDisableDate:t,shouldDisableMonth:s,shouldDisableYear:a,minDate:r,maxDate:n,disableFuture:i,disablePast:o}})!==null,[c,t,s,a,r,n,i,o,l])},wxe=(t,s)=>(a,r)=>{switch(r.type){case"setVisibleDate":return je({},a,{slideDirection:r.direction,currentMonth:r.month,isMonthSwitchingAnimating:!s.isSameMonth(r.month,a.currentMonth)&&!t&&!r.skipAnimation,focusedDay:r.focusedDay});case"changeMonthTimezone":{const n=r.newTimezone;if(s.getTimezone(a.currentMonth)===n)return a;let i=s.setTimezone(a.currentMonth,n);return s.getMonth(i)!==s.getMonth(a.currentMonth)&&(i=s.setMonth(i,s.getMonth(a.currentMonth))),je({},a,{currentMonth:i})}case"finishMonthSwitchingAnimation":return je({},a,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},_xe=t=>{const{value:s,referenceDate:a,disableFuture:r,disablePast:n,maxDate:i,minDate:o,onMonthChange:l,onYearChange:c,reduceAnimations:m,shouldDisableDate:u,timezone:h,getCurrentMonthFromVisibleDate:f}=t,b=Es(),w=g.useRef(wxe(!!m,b)).current,S=g.useMemo(()=>or.getInitialReferenceValue({value:s,adapter:b,timezone:h,props:t,referenceDate:a,granularity:uo.day}),[a,h]),[j,v]=g.useReducer(w,{isMonthSwitchingAnimating:!1,focusedDay:S,currentMonth:b.startOfMonth(S),slideDirection:"left"}),N=FI({shouldDisableDate:u,minDate:o,maxDate:i,disableFuture:r,disablePast:n,timezone:h});g.useEffect(()=>{v({type:"changeMonthTimezone",newTimezone:b.getTimezone(S)})},[S,b]);const C=Ot(({target:E,reason:M})=>{if(M==="cell-interaction"&&j.focusedDay!=null&&b.isSameDay(E,j.focusedDay))return;const T=M==="cell-interaction";let A,L;if(M==="cell-interaction")A=f(E,j.currentMonth),L=E;else if(A=b.isSameMonth(E,j.currentMonth)?j.currentMonth:b.startOfMonth(E),L=E,N(L)){const I=b.startOfMonth(E),Q=b.endOfMonth(E);L=Cx({adapter:b,date:L,minDate:b.isBefore(o,I)?I:o,maxDate:b.isAfter(i,Q)?Q:i,disablePast:n,disableFuture:r,isDateDisabled:N,timezone:h})}const F=!b.isSameMonth(j.currentMonth,A),z=!b.isSameYear(j.currentMonth,A);F&&l?.(A),z&&c?.(b.startOfYear(A)),v({type:"setVisibleDate",month:A,direction:b.isAfterDay(A,j.currentMonth)?"left":"right",focusedDay:j.focusedDay!=null&&L!=null&&b.isSameDay(L,j.focusedDay)?j.focusedDay:L,skipAnimation:T})}),P=g.useCallback(()=>{v({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:S,calendarState:j,setVisibleDate:C,isDateDisabled:N,onMonthSwitchingAnimationEnd:P}},Sxe=t=>Dt("MuiPickersFadeTransitionGroup",t);Tt("MuiPickersFadeTransitionGroup",["root"]);const Cxe=["children"],Pxe=t=>kt({root:["root"]},Sxe,t),kxe=Ne(ig,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function LI(t){const s=Ls({props:t,name:"MuiPickersFadeTransitionGroup"}),{className:a,reduceAnimations:r,transKey:n,classes:i}=s,{children:o}=s,l=as(s,Cxe),c=Pxe(i),m=xi();return r?o:e.jsx(kxe,{className:et(c.root,a),ownerState:l,children:e.jsx(au,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:m.transitions.duration.enteringScreen,enter:m.transitions.duration.enteringScreen,exit:0},children:o},n)})}const Exe=t=>Dt("MuiPickersSlideTransition",t),Ei=Tt("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),Txe=["children","className","reduceAnimations","slideDirection","transKey","classes"],Mxe=(t,s)=>{const{slideDirection:a}=s,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${a}`],exitActive:[`slideExitActiveLeft-${a}`]};return kt(r,Exe,t)},Dxe=Ne(ig,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(t,s)=>[s.root,{[`.${Ei["slideEnter-left"]}`]:s["slideEnter-left"]},{[`.${Ei["slideEnter-right"]}`]:s["slideEnter-right"]},{[`.${Ei.slideEnterActive}`]:s.slideEnterActive},{[`.${Ei.slideExit}`]:s.slideExit},{[`.${Ei["slideExitActiveLeft-left"]}`]:s["slideExitActiveLeft-left"]},{[`.${Ei["slideExitActiveLeft-right"]}`]:s["slideExitActiveLeft-right"]}]})(({theme:t})=>{const s=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${Ei["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${Ei["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${Ei.slideEnterActive}`]:{transform:"translate(0%)",transition:s},[`& .${Ei.slideExit}`]:{transform:"translate(0%)"},[`& .${Ei["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:s,zIndex:0},[`& .${Ei["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:s,zIndex:0}}});function Rxe(t){const s=Ls({props:t,name:"MuiPickersSlideTransition"}),{children:a,className:r,reduceAnimations:n,slideDirection:i,transKey:o,classes:l}=s,c=as(s,Txe),{ownerState:m}=Ba(),u=je({},m,{slideDirection:i}),h=Mxe(l,u),f=xi();if(n)return e.jsx("div",{className:et(h.root,r),children:a});const b={exit:h.exit,enterActive:h.enterActive,enter:h.enter,exitActive:h.exitActive};return e.jsx(Dxe,{className:et(h.root,r),childFactory:w=>g.cloneElement(w,{classNames:b}),role:"presentation",ownerState:u,children:e.jsx(d4,je({mountOnEnter:!0,unmountOnExit:!0,timeout:f.transitions.duration.complex,classNames:b},c,{children:a}),o)})}const Axe=t=>Dt("MuiDayCalendar",t);Tt("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const Ixe=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],Oxe=["ownerState"],Fxe=t=>kt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},Axe,t),$I=(Ex+Bv*2)*6,Lxe=Ne("div",{name:"MuiDayCalendar",slot:"Root"})({}),$xe=Ne("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),zxe=Ne(x,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary})),qxe=Ne(x,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.disabled})),Bxe=Ne(x,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:t})=>je({},t.typography.caption,{width:Ex,height:Ex,padding:0,margin:`0 ${Bv}px`,color:(t.vars||t).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),Uxe=Ne("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:$I}),Vxe=Ne(Rxe,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:$I}),Hxe=Ne("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),Wxe=Ne("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${Bv}px 0`,display:"flex",justifyContent:"center"});function Yxe(t){let{parentProps:s,day:a,focusedDay:r,selectedDays:n,isDateDisabled:i,currentMonthNumber:o,isViewFocused:l}=t,c=as(t,Ixe);const{disabled:m,disableHighlightToday:u,isMonthSwitchingAnimating:h,showDaysOutsideCurrentMonth:f,slots:b,slotProps:w,timezone:S}=s,j=Es(),v=wu(S),N=r!=null&&j.isSameDay(a,r),C=l&&N,P=n.some(Y=>j.isSameDay(Y,a)),E=j.isSameDay(a,v),M=g.useMemo(()=>m||i(a),[m,i,a]),T=g.useMemo(()=>j.getMonth(a)!==o,[j,a,o]),A=fI({day:a,selected:P,disabled:M,today:E,outsideCurrentMonth:T,disableMargin:void 0,disableHighlightToday:u,showDaysOutsideCurrentMonth:f}),L=b?.day??sfe,F=ea({elementType:L,externalSlotProps:w?.day,additionalProps:je({disableHighlightToday:u,showDaysOutsideCurrentMonth:f,role:"gridcell",isAnimating:h,"data-timestamp":j.toJsDate(a).valueOf()},c),ownerState:je({},A,{day:a,isDayDisabled:M,isDaySelected:P})}),z=as(F,Oxe),I=g.useMemo(()=>{const Y=j.startOfMonth(j.setMonth(a,o));return f?j.isSameDay(a,j.startOfWeek(Y)):j.isSameDay(a,Y)},[o,a,f,j]),Q=g.useMemo(()=>{const Y=j.endOfMonth(j.setMonth(a,o));return f?j.isSameDay(a,j.endOfWeek(Y)):j.isSameDay(a,Y)},[o,a,f,j]);return e.jsx(L,je({},z,{day:a,disabled:M,autoFocus:!T&&C,today:E,outsideCurrentMonth:T,isFirstVisibleCell:I,isLastVisibleCell:Q,selected:P,tabIndex:N?0:-1,"aria-selected":P,"aria-current":E?"date":void 0}))}function Gxe(t){const s=Ls({props:t,name:"MuiDayCalendar"}),a=Es(),{onFocusedDayChange:r,className:n,classes:i,currentMonth:o,selectedDays:l,focusedDay:c,loading:m,onSelectedDaysChange:u,onMonthSwitchingAnimationEnd:h,readOnly:f,reduceAnimations:b,renderLoading:w=()=>e.jsx("span",{children:"..."}),slideDirection:S,TransitionProps:j,disablePast:v,disableFuture:N,minDate:C,maxDate:P,shouldDisableDate:E,shouldDisableMonth:M,shouldDisableYear:T,dayOfWeekFormatter:A=xe=>a.format(xe,"weekdayShort").charAt(0).toUpperCase(),hasFocus:L,onFocusedViewChange:F,gridLabelId:z,displayWeekNumber:I,fixedWeekNumber:Q,timezone:Y}=s,B=wu(Y),q=Fxe(i),V=$r(),G=FI({shouldDisableDate:E,shouldDisableMonth:M,shouldDisableYear:T,minDate:C,maxDate:P,disablePast:v,disableFuture:N,timezone:Y}),H=Zr(),D=Ot(xe=>{f||u(xe)}),R=xe=>{G(xe)||(r(xe),F?.(!0))},$=Ot((xe,ge)=>{switch(xe.key){case"ArrowUp":R(a.addDays(ge,-7)),xe.preventDefault();break;case"ArrowDown":R(a.addDays(ge,7)),xe.preventDefault();break;case"ArrowLeft":{const le=a.addDays(ge,V?1:-1),pe=a.addMonths(ge,V?1:-1),Re=Cx({adapter:a,date:le,minDate:V?le:a.startOfMonth(pe),maxDate:V?a.endOfMonth(pe):le,isDateDisabled:G,timezone:Y});R(Re||le),xe.preventDefault();break}case"ArrowRight":{const le=a.addDays(ge,V?-1:1),pe=a.addMonths(ge,V?-1:1),Re=Cx({adapter:a,date:le,minDate:V?a.startOfMonth(pe):le,maxDate:V?le:a.endOfMonth(pe),isDateDisabled:G,timezone:Y});R(Re||le),xe.preventDefault();break}case"Home":R(a.startOfWeek(ge)),xe.preventDefault();break;case"End":R(a.endOfWeek(ge)),xe.preventDefault();break;case"PageUp":R(a.addMonths(ge,1)),xe.preventDefault();break;case"PageDown":R(a.addMonths(ge,-1)),xe.preventDefault();break}}),W=Ot((xe,ge)=>R(ge)),J=Ot((xe,ge)=>{c!=null&&a.isSameDay(c,ge)&&F?.(!1)}),te=a.getMonth(o),ee=a.getYear(o),ae=g.useMemo(()=>l.filter(xe=>!!xe).map(xe=>a.startOfDay(xe)),[a,l]),ce=`${ee}-${te}`,he=g.useMemo(()=>g.createRef(),[ce]),ne=g.useMemo(()=>{const xe=a.getWeekArray(o);let ge=a.addMonths(o,1);for(;Q&&xe.length<Q;){const le=a.getWeekArray(ge),pe=a.isSameDay(xe[xe.length-1][0],le[0][0]);le.slice(pe?1:0).forEach(Re=>{xe.length<Q&&xe.push(Re)}),ge=a.addMonths(ge,1)}return xe},[o,Q,a]);return e.jsxs(Lxe,{role:"grid","aria-labelledby":z,className:q.root,children:[e.jsxs($xe,{role:"row",className:q.header,children:[I&&e.jsx(qxe,{variant:"caption",role:"columnheader","aria-label":H.calendarWeekNumberHeaderLabel,className:q.weekNumberLabel,children:H.calendarWeekNumberHeaderText}),ope(a,B).map((xe,ge)=>e.jsx(zxe,{variant:"caption",role:"columnheader","aria-label":a.format(xe,"weekday"),className:q.weekDayLabel,children:A(xe)},ge.toString()))]}),m?e.jsx(Uxe,{className:q.loadingContainer,children:w()}):e.jsx(Vxe,je({transKey:ce,onExited:h,reduceAnimations:b,slideDirection:S,className:et(n,q.slideTransition)},j,{nodeRef:he,children:e.jsx(Hxe,{ref:he,role:"rowgroup",className:q.monthContainer,children:ne.map((xe,ge)=>e.jsxs(Wxe,{role:"row",className:q.weekContainer,"aria-rowindex":ge+1,children:[I&&e.jsx(Bxe,{className:q.weekNumber,role:"rowheader","aria-label":H.calendarWeekNumberAriaLabelText(a.getWeekNumber(xe[0])),children:H.calendarWeekNumberText(a.getWeekNumber(xe[0]))}),xe.map((le,pe)=>e.jsx(Yxe,{parentProps:s,day:le,selectedDays:ae,isViewFocused:L,focusedDay:c,onKeyDown:$,onFocus:W,onBlur:J,onDaySelect:D,isDateDisabled:G,currentMonthNumber:te,"aria-colindex":pe+1},le.toString()))]},`week-${xe[0]}`))})}))]})}function zI(t){return Dt("MuiMonthCalendar",t)}const uy=Tt("MuiMonthCalendar",["root","button","disabled","selected"]),Kxe=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],Qxe=(t,s)=>{const a={button:["button",s.isMonthDisabled&&"disabled",s.isMonthSelected&&"selected"]};return kt(a,zI,t)},Zxe=Ne("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(t,s)=>[s.button,{[`&.${uy.disabled}`]:s.disabled},{[`&.${uy.selected}`]:s.selected}]})(({theme:t})=>je({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Nn(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Nn(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${uy.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${uy.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),Xxe=g.memo(function(s){const{autoFocus:a,classes:r,disabled:n,selected:i,value:o,onClick:l,onKeyDown:c,onFocus:m,onBlur:u,slots:h,slotProps:f}=s,b=as(s,Kxe),w=g.useRef(null),{ownerState:S}=Ba(),j=je({},S,{isMonthDisabled:n,isMonthSelected:i}),v=Qxe(r,j);Ia(()=>{a&&w.current?.focus()},[a]);const N=h?.monthButton??Zxe,C=ea({elementType:N,externalSlotProps:f?.monthButton,externalForwardedProps:b,additionalProps:{disabled:n,ref:w,type:"button",role:"radio","aria-checked":i,onClick:P=>l(P,o),onKeyDown:P=>c(P,o),onFocus:P=>m(P,o),onBlur:P=>u(P,o)},ownerState:j,className:v.button});return e.jsx(N,je({},C))}),Jxe=["autoFocus","className","currentMonth","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],ege=t=>kt({root:["root"]},zI,t);function tge(t,s){const a=Ls({props:t,name:s}),r=Cg(a);return je({},a,r,{monthsPerRow:a.monthsPerRow??3})}const cT=(t,s,a,r,n)=>!!(t===s&&r&&n.isSameYear(a,r)),sge=Ne("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:t=>In(t)&&t!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:lp,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),age=g.forwardRef(function(s,a){const r=tge(s,"MuiMonthCalendar"),{autoFocus:n,className:i,currentMonth:o,classes:l,value:c,defaultValue:m,referenceDate:u,disabled:h,disableFuture:f,disablePast:b,maxDate:w,minDate:S,onChange:j,shouldDisableMonth:v,readOnly:N,onMonthFocus:C,hasFocus:P,onFocusedViewChange:E,monthsPerRow:M,timezone:T,gridLabelId:A,slots:L,slotProps:F}=r,z=as(r,Jxe),{value:I,handleValueChange:Q,timezone:Y}=rd({name:"MonthCalendar",timezone:T,value:c,defaultValue:m,referenceDate:u,onChange:j,valueManager:or}),B=wu(Y),q=$r(),V=Es(),{ownerState:G}=Ba(),H=g.useMemo(()=>or.getInitialReferenceValue({value:I,adapter:V,props:r,timezone:Y,referenceDate:u,granularity:uo.month}),[]),D=ege(l),R=g.useMemo(()=>V.getMonth(B),[V,B]),$=g.useMemo(()=>I!=null?V.getMonth(I):null,[I,V]),[W,J]=g.useState(()=>$||V.getMonth(H)),[te,ee]=On({name:"MonthCalendar",state:"hasFocus",controlled:P,default:n??!1}),ae=Ot(pe=>{ee(pe),E&&E(pe)}),ce=g.useCallback(pe=>{const Re=V.startOfMonth(b&&V.isAfter(B,S)?B:S),Se=V.startOfMonth(f&&V.isBefore(B,w)?B:w),He=V.startOfMonth(pe);return V.isBefore(He,Re)||V.isAfter(He,Se)?!0:v?v(He):!1},[f,b,w,S,B,v,V]),he=Ot((pe,Re)=>{if(N)return;const Se=I&&o&&!V.isSameYear(I,o)?V.setYear(I,V.getYear(o)):I,He=V.setMonth(Se??H,Re);Q(He)}),ne=Ot(pe=>{ce(V.setMonth(I??o??H,pe))||(J(pe),ae(!0),C&&C(pe))});g.useEffect(()=>{J(pe=>$!==null&&pe!==$?$:pe)},[$]);const xe=Ot((pe,Re)=>{switch(pe.key){case"ArrowUp":ne((12+Re-3)%12),pe.preventDefault();break;case"ArrowDown":ne((12+Re+3)%12),pe.preventDefault();break;case"ArrowLeft":ne((12+Re+(q?1:-1))%12),pe.preventDefault();break;case"ArrowRight":ne((12+Re+(q?-1:1))%12),pe.preventDefault();break}}),ge=Ot((pe,Re)=>{ne(Re)}),le=Ot((pe,Re)=>{W===Re&&ae(!1)});return e.jsx(sge,je({ref:a,className:et(D.root,i),ownerState:G,role:"radiogroup","aria-labelledby":A,monthsPerRow:M},z,{children:sS(V,o??I??H).map(pe=>{const Re=V.getMonth(pe),Se=V.format(pe,"monthShort"),He=V.format(pe,"month"),ze=cT(Re,$,pe,I,V),st=h||ce(pe);return e.jsx(Xxe,{selected:ze,value:Re,onClick:he,onKeyDown:xe,autoFocus:te&&Re===W,disabled:st,tabIndex:Re===W&&!st?0:-1,onFocus:ge,onBlur:le,"aria-current":cT(Re,R,pe,B,V)?"date":void 0,"aria-label":He,slots:L,slotProps:F,classes:l,children:Se},Se)})}))});function qI(t){return Dt("MuiYearCalendar",t)}const my=Tt("MuiYearCalendar",["root","button","disabled","selected"]),rge=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],nge=(t,s)=>{const a={button:["button",s.isYearDisabled&&"disabled",s.isYearSelected&&"selected"]};return kt(a,qI,t)},ige=Ne("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(t,s)=>[s.button,{[`&.${my.disabled}`]:s.disabled},{[`&.${my.selected}`]:s.selected}]})(({theme:t})=>je({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:Nn(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Nn(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${my.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${my.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),oge=g.memo(function(s){const{autoFocus:a,classes:r,disabled:n,selected:i,value:o,onClick:l,onKeyDown:c,onFocus:m,onBlur:u,slots:h,slotProps:f}=s,b=as(s,rge),w=g.useRef(null),{ownerState:S}=Ba(),j=je({},S,{isYearDisabled:n,isYearSelected:i}),v=nge(r,j);Ia(()=>{a&&w.current?.focus()},[a]);const N=h?.yearButton??ige,C=ea({elementType:N,externalSlotProps:f?.yearButton,externalForwardedProps:b,additionalProps:{disabled:n,ref:w,type:"button",role:"radio","aria-checked":i,onClick:P=>l(P,o),onKeyDown:P=>c(P,o),onFocus:P=>m(P,o),onBlur:P=>u(P,o)},ownerState:j,className:v.button});return e.jsx(N,je({},C))}),lge=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],cge=t=>kt({root:["root"]},qI,t);function dge(t,s){const a=Ls({props:t,name:s}),r=Cg(a);return je({},a,r,{yearsPerRow:a.yearsPerRow??3,yearsOrder:a.yearsOrder??"asc"})}const uge=Ne("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:t=>In(t)&&t!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:lp,maxHeight:Wpe,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),mge=Ne("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),pge=g.forwardRef(function(s,a){const r=dge(s,"MuiYearCalendar"),{autoFocus:n,className:i,classes:o,value:l,defaultValue:c,referenceDate:m,disabled:u,disableFuture:h,disablePast:f,maxDate:b,minDate:w,onChange:S,readOnly:j,shouldDisableYear:v,onYearFocus:N,hasFocus:C,onFocusedViewChange:P,yearsOrder:E,yearsPerRow:M,timezone:T,gridLabelId:A,slots:L,slotProps:F}=r,z=as(r,lge),{value:I,handleValueChange:Q,timezone:Y}=rd({name:"YearCalendar",timezone:T,value:l,defaultValue:c,referenceDate:m,onChange:S,valueManager:or}),B=wu(Y),q=$r(),V=Es(),{ownerState:G}=Ba(),H=g.useMemo(()=>or.getInitialReferenceValue({value:I,adapter:V,props:r,timezone:Y,referenceDate:m,granularity:uo.year}),[]),D=cge(o),R=g.useMemo(()=>V.getYear(B),[V,B]),$=g.useMemo(()=>I!=null?V.getYear(I):null,[I,V]),[W,J]=g.useState(()=>$||V.getYear(H)),[te,ee]=On({name:"YearCalendar",state:"hasFocus",controlled:C,default:n??!1}),ae=Ot(ke=>{ee(ke),P&&P(ke)}),ce=g.useCallback(ke=>{if(f&&V.isBeforeYear(ke,B)||h&&V.isAfterYear(ke,B)||w&&V.isBeforeYear(ke,w)||b&&V.isAfterYear(ke,b))return!0;if(!v)return!1;const We=V.startOfYear(ke);return v(We)},[h,f,b,w,B,v,V]),he=Ot((ke,We)=>{if(j)return;const ye=V.setYear(I??H,We);Q(ye)}),ne=Ot(ke=>{ce(V.setYear(I??H,ke))||(J(ke),ae(!0),N?.(ke))});g.useEffect(()=>{J(ke=>$!==null&&ke!==$?$:ke)},[$]);const xe=E!=="desc"?M*1:M*-1,ge=q&&E==="asc"||!q&&E==="desc"?-1:1,le=Ot((ke,We)=>{switch(ke.key){case"ArrowUp":ne(We-xe),ke.preventDefault();break;case"ArrowDown":ne(We+xe),ke.preventDefault();break;case"ArrowLeft":ne(We-ge),ke.preventDefault();break;case"ArrowRight":ne(We+ge),ke.preventDefault();break}}),pe=Ot((ke,We)=>{ne(We)}),Re=Ot((ke,We)=>{W===We&&ae(!1)}),Se=g.useRef(null),He=Bs(a,Se);g.useEffect(()=>{if(n||Se.current===null)return;const ke=Se.current.querySelector('[tabindex="0"]');if(!ke)return;const We=ke.offsetHeight,ye=ke.offsetTop,Ye=Se.current.clientHeight,at=Se.current.scrollTop,bt=ye+We;We>Ye||ye<at||(Se.current.scrollTop=bt-Ye/2-We/2)},[n]);const ze=V.getYearRange([w,b]);E==="desc"&&ze.reverse();let st=M-ze.length%M;return st===M&&(st=0),e.jsxs(uge,je({ref:He,className:et(D.root,i),ownerState:G,role:"radiogroup","aria-labelledby":A,yearsPerRow:M},z,{children:[ze.map(ke=>{const We=V.getYear(ke),ye=We===$,Ye=u||ce(ke);return e.jsx(oge,{selected:ye,value:We,onClick:he,onKeyDown:le,autoFocus:te&&We===W,disabled:Ye,tabIndex:We===W&&!Ye?0:-1,onFocus:pe,onBlur:Re,"aria-current":R===We?"date":void 0,slots:L,slotProps:F,classes:o,children:V.format(ke,"year")},V.format(ke,"year"))}),Array.from({length:st},(ke,We)=>e.jsx(mge,{},We))]}))}),hge=t=>Dt("MuiPickersCalendarHeader",t),fge=Tt("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),xge=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],gge=["ownerState"],yge=t=>kt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},hge,t),bge=Ne("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),vge=Ne("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:t})=>je({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})),jge=Ne("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),Nge=Ne(ta,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${fge.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),wge=Ne(Cpe,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:t})=>({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"})),_ge=g.forwardRef(function(s,a){const r=Zr(),n=Es(),i=Ls({props:s,name:"MuiPickersCalendarHeader"}),{slots:o,slotProps:l,currentMonth:c,disabled:m,disableFuture:u,disablePast:h,maxDate:f,minDate:b,onMonthChange:w,onViewChange:S,view:j,reduceAnimations:v,views:N,labelId:C,className:P,classes:E,timezone:M,format:T=`${n.formats.month} ${n.formats.year}`}=i,A=as(i,xge),{ownerState:L}=Ba(),F=yge(E),z=o?.switchViewButton??Nge,I=ea({elementType:z,externalSlotProps:l?.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(j)},ownerState:je({},L,{view:j}),className:F.switchViewButton}),Q=o?.switchViewIcon??wge,Y=ea({elementType:Q,externalSlotProps:l?.switchViewIcon,ownerState:L,className:F.switchViewIcon}),B=as(Y,gge),q=()=>w(n.addMonths(c,1)),V=()=>w(n.addMonths(c,-1)),G=Vpe(c,{disableFuture:u,maxDate:f,timezone:M}),H=Hpe(c,{disablePast:h,minDate:b,timezone:M}),D=()=>{if(!(N.length===1||!S||m))if(N.length===2)S(N.find($=>$!==j)||N[0]);else{const $=N.indexOf(j)!==0?0:1;S(N[$])}};if(N.length===1&&N[0]==="year")return null;const R=n.formatByString(c,T);return e.jsxs(bge,je({},A,{ownerState:L,className:et(F.root,P),ref:a,children:[e.jsxs(vge,{role:"presentation",onClick:D,ownerState:L,"aria-live":"polite",className:F.labelContainer,children:[e.jsx(LI,{reduceAnimations:v,transKey:R,children:e.jsx(jge,{id:C,ownerState:L,className:F.label,children:R})}),N.length>1&&!m&&e.jsx(z,je({},I,{children:e.jsx(Q,je({},B))}))]}),e.jsx(au,{in:j==="day",appear:!v,enter:!v,children:e.jsx(iI,{slots:o,slotProps:l,onGoToPrevious:V,isPreviousDisabled:H,previousLabel:r.previousMonth,onGoToNext:q,isNextDisabled:G,nextLabel:r.nextMonth})})]}))}),Sge="@media (prefers-reduced-motion: reduce)",Wm=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),dT=Wm&&Wm[1]?parseInt(Wm[1],10):null,uT=Wm&&Wm[2]?parseInt(Wm[2],10):null,Cge=dT&&dT<10||uT&&uT<13||!1;function BI(t){const s=mg(Sge,{defaultMatches:!1});return t??(s||Cge)}const Pge=t=>Dt("MuiDateCalendar",t);Tt("MuiDateCalendar",["root","viewTransitionContainer"]);const kge=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],Ege=t=>kt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},Pge,t);function Tge(t,s){const a=Ls({props:t,name:s}),r=BI(a.reduceAnimations),n=Cg(a);return je({},a,n,{loading:a.loading??!1,openTo:a.openTo??"day",views:a.views??["year","day"],reduceAnimations:r,renderLoading:a.renderLoading??(()=>e.jsx("span",{children:"..."}))})}const Mge=Ne(Uv,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:cp}),Dge=Ne(LI,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),Rge=g.forwardRef(function(s,a){const r=Es(),{ownerState:n}=Ba(),i=wn(),o=Tge(s,"MuiDateCalendar"),{autoFocus:l,onViewChange:c,value:m,defaultValue:u,referenceDate:h,disableFuture:f,disablePast:b,onChange:w,onMonthChange:S,reduceAnimations:j,shouldDisableDate:v,shouldDisableMonth:N,shouldDisableYear:C,view:P,views:E,openTo:M,className:T,classes:A,disabled:L,readOnly:F,minDate:z,maxDate:I,disableHighlightToday:Q,focusedView:Y,onFocusedViewChange:B,showDaysOutsideCurrentMonth:q,fixedWeekNumber:V,dayOfWeekFormatter:G,slots:H,slotProps:D,loading:R,renderLoading:$,displayWeekNumber:W,yearsOrder:J,yearsPerRow:te,monthsPerRow:ee,timezone:ae}=o,ce=as(o,kge),{value:he,handleValueChange:ne,timezone:xe}=rd({name:"DateCalendar",timezone:ae,value:m,defaultValue:u,referenceDate:h,onChange:w,valueManager:or}),{view:ge,setView:le,focusedView:pe,setFocusedView:Re,goToNextView:Se,setValueAndGoToNextView:He}=_g({view:P,views:E,openTo:M,onChange:ne,onViewChange:c,autoFocus:l,focusedView:Y,onFocusedViewChange:B}),{referenceDate:ze,calendarState:st,setVisibleDate:ke,isDateDisabled:We,onMonthSwitchingAnimationEnd:ye}=_xe({value:he,referenceDate:h,reduceAnimations:j,onMonthChange:S,minDate:z,maxDate:I,shouldDisableDate:v,disablePast:b,disableFuture:f,timezone:xe,getCurrentMonthFromVisibleDate:(Nt,ps)=>r.isSameMonth(Nt,ps)?ps:r.startOfMonth(Nt)}),Ye=L&&he||z,at=L&&he||I,bt=`${i}-grid-label`,ct=pe!==null,ht=H?.calendarHeader??_ge,Et=ea({elementType:ht,externalSlotProps:D?.calendarHeader,additionalProps:{views:E,view:ge,currentMonth:st.currentMonth,onViewChange:le,onMonthChange:Nt=>ke({target:Nt,reason:"header-navigation"}),minDate:Ye,maxDate:at,disabled:L,disablePast:b,disableFuture:f,reduceAnimations:j,timezone:xe,labelId:bt},ownerState:n}),be=Ot(Nt=>{const ps=r.startOfMonth(Nt),cs=r.endOfMonth(Nt),Ns=We(Nt)?Cx({adapter:r,date:Nt,minDate:r.isBefore(z,ps)?ps:z,maxDate:r.isAfter(I,cs)?cs:I,disablePast:b,disableFuture:f,isDateDisabled:We,timezone:xe}):Nt;Ns?(He(Ns,"finish"),ke({target:Ns,reason:"cell-interaction"})):(Se(),ke({target:ps,reason:"cell-interaction"}))}),Oe=Ot(Nt=>{const ps=r.startOfYear(Nt),cs=r.endOfYear(Nt),Ns=We(Nt)?Cx({adapter:r,date:Nt,minDate:r.isBefore(z,ps)?ps:z,maxDate:r.isAfter(I,cs)?cs:I,disablePast:b,disableFuture:f,isDateDisabled:We,timezone:xe}):Nt;Ns?(He(Ns,"finish"),ke({target:Ns,reason:"cell-interaction"})):(Se(),ke({target:ps,reason:"cell-interaction"}))}),Le=Ot(Nt=>ne(Nt&&Sb(r,Nt,he??ze),"finish",ge));g.useEffect(()=>{r.isValid(he)&&ke({target:he,reason:"controlled-value-change"})},[he]);const jt=Ege(A),Jt={disablePast:b,disableFuture:f,maxDate:I,minDate:z},Kt={disableHighlightToday:Q,readOnly:F,disabled:L,timezone:xe,gridLabelId:bt,slots:H,slotProps:D},rt=g.useRef(ge);g.useEffect(()=>{rt.current!==ge&&(pe===rt.current&&Re(ge,!0),rt.current=ge)},[pe,Re,ge]);const Lt=g.useMemo(()=>[he],[he]);return e.jsxs(Mge,je({ref:a,className:et(jt.root,T),ownerState:n},ce,{children:[e.jsx(ht,je({},Et,{slots:H,slotProps:D})),e.jsx(Dge,{reduceAnimations:j,className:jt.viewTransitionContainer,transKey:ge,ownerState:n,children:e.jsxs("div",{children:[ge==="year"&&e.jsx(pge,je({},Jt,Kt,{value:he,onChange:Oe,shouldDisableYear:C,hasFocus:ct,onFocusedViewChange:Nt=>Re("year",Nt),yearsOrder:J,yearsPerRow:te,referenceDate:ze})),ge==="month"&&e.jsx(age,je({},Jt,Kt,{currentMonth:st.currentMonth,hasFocus:ct,className:T,value:he,onChange:be,shouldDisableMonth:N,onFocusedViewChange:Nt=>Re("month",Nt),monthsPerRow:ee,referenceDate:ze})),ge==="day"&&e.jsx(Gxe,je({},st,Jt,Kt,{onMonthSwitchingAnimationEnd:ye,hasFocus:ct,onFocusedDayChange:Nt=>ke({target:Nt,reason:"cell-interaction"}),reduceAnimations:j,selectedDays:Lt,onSelectedDaysChange:Le,shouldDisableDate:v,shouldDisableMonth:N,shouldDisableYear:C,onFocusedViewChange:Nt=>Re("day",Nt),showDaysOutsideCurrentMonth:q,fixedWeekNumber:V,dayOfWeekFormatter:G,displayWeekNumber:W,loading:R,renderLoading:$}))]})})]}))});function UI(t){return Dt("MuiPickersToolbar",t)}const Age=Tt("MuiPickersToolbar",["root","title","content"]);function Yv(){const{ownerState:t}=Ba(),s=$r();return g.useMemo(()=>je({},t,{toolbarDirection:s?"rtl":"ltr"}),[t,s])}const Ige=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],Oge=t=>kt({root:["root"],title:["title"],content:["content"]},UI,t),Fge=Ne("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),Lge=Ne("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:t=>In(t)&&t!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),jS=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersToolbar"}),{children:n,className:i,classes:o,toolbarTitle:l,hidden:c,titleId:m,landscapeDirection:u}=r,h=as(r,Ige),f=Yv(),b=Oge(o);return c?null:e.jsxs(Fge,je({ref:a,className:et(b.root,i),ownerState:f},h,{children:[e.jsx(x,{color:"text.secondary",variant:"overline",id:m,className:b.title,children:l}),e.jsx(Lge,{className:b.content,ownerState:f,landscapeDirection:u,children:n})]}))});function $ge(t){return Dt("MuiDatePickerToolbar",t)}Tt("MuiDatePickerToolbar",["root","title"]);const zge=["toolbarFormat","toolbarPlaceholder","className","classes"],qge=t=>kt({root:["root"],title:["title"]},$ge,t),Bge=Ne(jS,{name:"MuiDatePickerToolbar",slot:"Root"})({}),Uge=Ne(x,{name:"MuiDatePickerToolbar",slot:"Title"})({variants:[{props:{pickerOrientation:"landscape"},style:{margin:"auto 16px auto auto"}}]}),Vge=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiDatePickerToolbar"}),{toolbarFormat:n,toolbarPlaceholder:i="",className:o,classes:l}=r,c=as(r,zge),m=Es(),{value:u,views:h,orientation:f}=nl(),b=Zr(),w=Yv(),S=qge(l),j=g.useMemo(()=>{if(!m.isValid(u))return i;const v=Px(m,{format:n,views:h},!0);return m.formatByString(u,v)},[u,n,i,m,h]);return e.jsx(Bge,je({ref:a,toolbarTitle:b.datePickerToolbarTitle,className:et(S.root,o)},c,{children:e.jsx(Uge,{variant:"h4",align:f==="landscape"?"left":"center",ownerState:w,className:S.title,children:j})}))});function VI(t,s){const a=Ls({props:t,name:s}),r=Cg(a),n=g.useMemo(()=>a.localeText?.toolbarTitle==null?a.localeText:je({},a.localeText,{datePickerToolbarTitle:a.localeText.toolbarTitle}),[a.localeText]);return je({},a,r,{localeText:n},tS({views:a.views,openTo:a.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{slots:je({toolbar:Vge},a.slots)})}function Hge(t){return Dt("MuiPickerPopper",t)}Tt("MuiPickerPopper",["root","paper"]);const Wge=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Yge=t=>kt({root:["root"],paper:["paper"]},Hge,t),Gge=Ne(cg,{name:"MuiPickerPopper",slot:"Root"})(({theme:t})=>({zIndex:t.zIndex.modal})),Kge=Ne(oa,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:t})=>new Set(["top","top-start","top-end"]).has(t),style:{transformOrigin:"bottom center"}}]});function Qge(t,s){return s.documentElement.clientWidth<t.clientX||s.documentElement.clientHeight<t.clientY}function Zge(t,s){const a=g.useRef(!1),r=g.useRef(!1),n=g.useRef(null),i=g.useRef(!1);g.useEffect(()=>{if(!t)return;function c(){i.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),i.current=!1}},[t]);const o=Ot(c=>{if(!i.current)return;const m=r.current;r.current=!1;const u=ir(n.current);if(!n.current||"clientX"in c&&Qge(c,u))return;if(a.current){a.current=!1;return}let h;c.composedPath?h=c.composedPath().indexOf(n.current)>-1:h=!u.documentElement.contains(c.target)||n.current.contains(c.target),!h&&!m&&s(c)}),l=c=>{c.defaultMuiPrevented||(r.current=!0)};return g.useEffect(()=>{if(t){const c=ir(n.current),m=()=>{a.current=!0};return c.addEventListener("touchstart",o),c.addEventListener("touchmove",m),()=>{c.removeEventListener("touchstart",o),c.removeEventListener("touchmove",m)}}},[t,o]),g.useEffect(()=>{if(t){const c=ir(n.current);return c.addEventListener("click",o),()=>{c.removeEventListener("click",o),r.current=!1}}},[t,o]),[n,l,l]}const Xge=g.forwardRef((t,s)=>{const{PaperComponent:a,ownerState:r,children:n,paperSlotProps:i,paperClasses:o,onPaperClick:l,onPaperTouchStart:c}=t,m=as(t,Wge),u=ea({elementType:a,externalSlotProps:i,additionalProps:{tabIndex:-1,elevation:8,ref:s},className:o,ownerState:r});return e.jsx(a,je({},m,u,{onClick:h=>{l(h),u.onClick?.(h)},onTouchStart:h=>{c(h),u.onTouchStart?.(h)},ownerState:r,children:n}))});function Jge(t){const s=Ls({props:t,name:"MuiPickerPopper"}),{children:a,placement:r="bottom-start",slots:n,slotProps:i,classes:o}=s,{open:l,popupRef:c,reduceAnimations:m}=nl(),{ownerState:u,rootRefObject:h}=Ba(),{dismissViews:f,getCurrentViewMode:b,onPopperExited:w,triggerElement:S,viewContainerRole:j}=Ba();g.useEffect(()=>{function V(G){l&&G.key==="Escape"&&f()}return document.addEventListener("keydown",V),()=>{document.removeEventListener("keydown",V)}},[f,l]);const v=g.useRef(null);g.useEffect(()=>{j==="tooltip"||b()==="field"||(l?v.current=rn(h.current):v.current&&v.current instanceof HTMLElement&&setTimeout(()=>{v.current instanceof HTMLElement&&v.current.focus()}))},[l,j,b,h]);const N=Yge(o),C=Ot(()=>{j==="tooltip"?The(()=>{h.current?.contains(rn(h.current))||c.current?.contains(rn(c.current))||f()}):f()}),[P,E,M]=Zge(l,C),T=g.useRef(null),A=Bs(T,c),L=Bs(A,P),F=V=>{V.key==="Escape"&&(V.stopPropagation(),f())},z=n?.desktopTransition??m?au:xx,I=n?.desktopTrapFocus??AR,Q=n?.desktopPaper??Kge,Y=n?.popper??Gge,B=ea({elementType:Y,externalSlotProps:i?.popper,additionalProps:{transition:!0,role:j??void 0,open:l,placement:r,anchorEl:S,onKeyDown:F},className:N.root,ownerState:u}),q=g.useMemo(()=>je({},u,{popperPlacement:B.placement}),[u,B.placement]);return e.jsx(Y,je({},B,{children:({TransitionProps:V})=>e.jsx(I,je({open:l,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:j==="tooltip",isEnabled:()=>!0},i?.desktopTrapFocus,{children:e.jsx(z,je({},V,i?.desktopTransition,{onExited:G=>{w?.(),i?.desktopTransition?.onExited?.(G),V?.onExited?.()},children:e.jsx(Xge,{PaperComponent:Q,ownerState:q,ref:L,onPaperClick:E,onPaperTouchStart:M,paperClasses:N.paper,paperSlotProps:i?.desktopPaper,children:a})}))}))}))}function mT(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function e0e(t,s){const[a,r]=g.useState(mT);return Ia(()=>{const n=()=>{r(mT())};return window.addEventListener("orientationchange",n),()=>{window.removeEventListener("orientationchange",n)}},[]),jm(t,["hours","minutes","seconds"])?"portrait":s??a}function t0e(t){const{props:s,valueManager:a,validator:r}=t,{value:n,defaultValue:i,onChange:o,referenceDate:l,timezone:c,onAccept:m,closeOnSelect:u,open:h,onOpen:f,onClose:b}=s,{current:w}=g.useRef(i),{current:S}=g.useRef(n!==void 0),{current:j}=g.useRef(h!==void 0),v=Es(),{timezone:N,value:C,handleValueChange:P}=rd({name:"a picker component",timezone:c,value:n,defaultValue:w,referenceDate:l,onChange:o,valueManager:a}),[E,M]=g.useState(()=>({open:!1,lastExternalValue:C,clockShallowValue:void 0,lastCommittedValue:C,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:T}=bI({props:s,validator:r,timezone:N,value:C,onError:s.onError}),A=Ot(I=>{const Q=typeof I=="function"?I(E.open):I;j||M(Y=>je({},Y,{open:Q})),Q&&f&&f(),Q||b?.()}),L=Ot((I,Q)=>{const{changeImportance:Y="accept",skipPublicationIfPristine:B=!1,validationError:q,shortcut:V,shouldClose:G=Y==="accept"}=Q??{};let H,D;!B&&!S&&!E.hasBeenModifiedSinceMount?(H=!0,D=Y==="accept"):(H=!a.areValuesEqual(v,I,C),D=Y==="accept"&&!a.areValuesEqual(v,I,E.lastCommittedValue)),M(W=>je({},W,{clockShallowValue:H?void 0:W.clockShallowValue,lastCommittedValue:D?I:W.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let R=null;const $=()=>(R||(R={validationError:q??T(I)},V&&(R.shortcut=V)),R);H&&P(I,$()),D&&m&&m(I,$()),G&&A(!1)});C!==E.lastExternalValue&&M(I=>je({},I,{lastExternalValue:C,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const F=Ot((I,Q="partial")=>{if(Q==="shallow"){M(Y=>je({},Y,{clockShallowValue:I,hasBeenModifiedSinceMount:!0}));return}L(I,{changeImportance:Q==="finish"&&u?"accept":"set"})});g.useEffect(()=>{if(j){if(h===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");M(I=>je({},I,{open:h}))}},[j,h]);const z=g.useMemo(()=>a.cleanValue(v,E.clockShallowValue===void 0?C:E.clockShallowValue),[v,a,E.clockShallowValue,C]);return{timezone:N,state:E,setValue:L,setValueFromView:F,setOpen:A,value:C,viewValue:z}}const s0e=["className","sx"],HI=({ref:t,props:s,valueManager:a,valueType:r,variant:n,validator:i,onPopperExited:o,autoFocusView:l,rendererInterceptor:c,localeText:m,viewContainerRole:u,getStepNavigation:h})=>{const{views:f,view:b,openTo:w,onViewChange:S,viewRenderers:j,reduceAnimations:v,orientation:N,disableOpenPicker:C,closeOnSelect:P,disabled:E,readOnly:M,formatDensity:T,enableAccessibleFieldDOMStructure:A,selectedSections:L,onSelectedSectionsChange:F,format:z,label:I,autoFocus:Q,name:Y}=s,{className:B,sx:q}=s,V=as(s,s0e),G=wn(),H=Es(),D=BI(v),R=e0e(f,N),{current:$}=g.useRef(w??null),[W,J]=g.useState(null),te=g.useRef(null),ee=g.useRef(null),ae=g.useRef(null),ce=Bs(t,ae),{timezone:he,state:ne,setOpen:xe,setValue:ge,setValueFromView:le,value:pe,viewValue:Re}=t0e({props:s,valueManager:a,validator:i}),{view:Se,setView:He,defaultView:ze,focusedView:st,setFocusedView:ke,setValueAndGoToNextView:We,goToNextStep:ye,hasNextStep:Ye,hasSeveralSteps:at}=_g({view:b,views:f,openTo:w,onChange:le,onViewChange:S,autoFocus:l,getStepNavigation:h}),bt=Ot(()=>ge(a.emptyValue)),ct=Ot(()=>ge(a.getTodayValue(H,he,r))),ht=Ot(()=>ge(pe)),Et=Ot(()=>ge(ne.lastCommittedValue,{skipPublicationIfPristine:!0})),be=Ot(()=>{ge(pe,{skipPublicationIfPristine:!0})}),{hasUIView:Oe,viewModeLookup:Le,timeViewsCount:jt}=g.useMemo(()=>f.reduce(($t,$s)=>{const zt=j[$s]==null?"field":"UI";return $t.viewModeLookup[$s]=zt,zt==="UI"&&($t.hasUIView=!0,mu($s)&&($t.timeViewsCount+=1)),$t},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[j,f]),Jt=Le[Se],Kt=Ot(()=>Jt),[rt,Lt]=g.useState(Jt==="UI"?Se:null);rt!==Se&&Le[Se]==="UI"&&Lt(Se),Ia(()=>{Jt==="field"&&ne.open&&(xe(!1),setTimeout(()=>{ee?.current?.setSelectedSections(Se),ee?.current?.focusField(Se)}))},[Se]),Ia(()=>{if(!ne.open)return;let $t=Se;Jt==="field"&&rt!=null&&($t=rt),$t!==ze&&Le[$t]==="UI"&&Le[ze]==="UI"&&($t=ze),$t!==Se&&He($t),ke($t,!0)},[ne.open]);const Nt=g.useMemo(()=>({isPickerValueEmpty:a.areValuesEqual(H,pe,a.emptyValue),isPickerOpen:ne.open,isPickerDisabled:s.disabled??!1,isPickerReadOnly:s.readOnly??!1,pickerOrientation:R,pickerVariant:n}),[H,a,pe,ne.open,R,n,s.disabled,s.readOnly]),ps=g.useMemo(()=>C||!Oe?"hidden":E||M?"disabled":"enabled",[C,Oe,E,M]),cs=Ot(ye),Ns=g.useMemo(()=>P&&!at?[]:["cancel","nextOrAccept"],[P,at]),Ys=g.useMemo(()=>({setValue:ge,setOpen:xe,clearValue:bt,setValueToToday:ct,acceptValueChanges:ht,cancelValueChanges:Et,setView:He,goToNextStep:cs}),[ge,xe,bt,ct,ht,Et,He,cs]),Is=g.useMemo(()=>je({},Ys,{value:pe,timezone:he,open:ne.open,views:f,view:rt,initialView:$,disabled:E??!1,readOnly:M??!1,autoFocus:Q??!1,variant:n,orientation:R,popupRef:te,reduceAnimations:D,triggerRef:J,triggerStatus:ps,hasNextStep:Ye,fieldFormat:z??"",name:Y,label:I,rootSx:q,rootRef:ce,rootClassName:B}),[Ys,pe,ce,n,R,D,E,M,z,B,Y,I,q,ps,Ye,he,ne.open,rt,f,$,Q]),Ms=g.useMemo(()=>({dismissViews:be,ownerState:Nt,hasUIView:Oe,getCurrentViewMode:Kt,rootRefObject:ae,labelId:G,triggerElement:W,viewContainerRole:u,defaultActionBarActions:Ns,onPopperExited:o}),[be,Nt,Oe,Kt,G,W,u,Ns,o]),pa=g.useMemo(()=>({formatDensity:T,enableAccessibleFieldDOMStructure:A,selectedSections:L,onSelectedSectionsChange:F,fieldRef:ee}),[T,A,L,F,ee]);return{providerProps:{localeText:m,contextValue:Is,privateContextValue:Ms,actionsContextValue:Ys,fieldPrivateContextValue:pa,isValidContextValue:$t=>{const $s=i({adapter:H,value:$t,timezone:he,props:s});return!a.hasError($s)}},renderCurrentView:()=>{if(rt==null)return null;const $t=j[rt];if($t==null)return null;const $s=je({},V,{views:f,timezone:he,value:Re,onChange:We,view:rt,onViewChange:He,showViewSwitcher:jt>1,timeViewsCount:jt},u==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:st,onFocusedViewChange:ke});return c?e.jsx(c,{viewRenderers:j,popperView:rt,rendererProps:$s}):$t($s)},ownerState:Nt}};function WI(t){return Dt("MuiPickersLayout",t)}const co=Tt("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),a0e=["actions"],r0e=Ne(dg,{name:"MuiPickersLayout",slot:"ActionBar"})({});function n0e(t){const{actions:s}=t,a=as(t,a0e),r=Zr(),{clearValue:n,setValueToToday:i,acceptValueChanges:o,cancelValueChanges:l,goToNextStep:c,hasNextStep:m}=nl();if(s==null||s.length===0)return null;const u=s?.map(h=>{switch(h){case"clear":return e.jsx(lo,{onClick:n,children:r.clearButtonLabel},h);case"cancel":return e.jsx(lo,{onClick:l,children:r.cancelButtonLabel},h);case"accept":return e.jsx(lo,{onClick:o,children:r.okButtonLabel},h);case"today":return e.jsx(lo,{onClick:i,children:r.todayButtonLabel},h);case"next":return e.jsx(lo,{onClick:c,children:r.nextStepButtonLabel},h);case"nextOrAccept":return m?e.jsx(lo,{onClick:c,children:r.nextStepButtonLabel},h):e.jsx(lo,{onClick:o,children:r.okButtonLabel},h);default:return null}});return e.jsx(r0e,je({},a,{children:u}))}const i0e=g.memo(n0e),o0e=["items","changeImportance"],l0e=["getValue"],c0e=Ne(zR,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function d0e(t){const{items:s,changeImportance:a="accept"}=t,r=as(t,o0e),{setValue:n}=Spe(),i=_pe();if(s==null||s.length===0)return null;const o=s.map(l=>{let{getValue:c}=l,m=as(l,l0e);const u=c({isValid:i});return je({},m,{label:m.label,onClick:()=>{n(u,{changeImportance:a,shortcut:m})},disabled:!i(u)})});return e.jsx(c0e,je({dense:!0,sx:[{maxHeight:cp,maxWidth:200,overflow:"auto"},...Array.isArray(r.sx)?r.sx:[r.sx]]},r,{children:o.map(l=>e.jsx(MJ,{children:e.jsx(Me,je({},l))},l.id??l.label))}))}const u0e=["ownerState"];function m0e(t){return t.view!==null}const p0e=(t,s)=>{const{pickerOrientation:a}=s;return kt({root:["root",a==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},WI,t)},YI=t=>{const{ownerState:s,defaultActionBarActions:a}=Ba(),{view:r}=nl(),n=$r(),{children:i,slots:o,slotProps:l,classes:c}=t,m=g.useMemo(()=>je({},s,{layoutDirection:n?"rtl":"ltr",hasShortcuts:!1}),[s,n]),u=p0e(c,m),h=o?.actionBar??i0e,f=ea({elementType:h,externalSlotProps:l?.actionBar,additionalProps:{actions:a},className:u.actionBar,ownerState:m}),b=as(f,u0e),w=e.jsx(h,je({},b)),S=o?.toolbar,j=ea({elementType:S,externalSlotProps:l?.toolbar,className:u.toolbar,ownerState:m}),v=m0e(j)&&S?e.jsx(S,je({},j)):null,N=i,C=o?.tabs,P=r&&C?e.jsx(C,je({className:u.tabs},l?.tabs)):null,E=o?.shortcuts??d0e,M=ea({elementType:E,externalSlotProps:l?.shortcuts,className:u.shortcuts,ownerState:m}),T=Array.isArray(M?.items)&&M.items.length>0,A=r&&E?e.jsx(E,je({},M)):null;return{toolbar:v,content:N,tabs:P,actionBar:w,shortcuts:A,ownerState:je({},m,{hasShortcuts:T})}},h0e=(t,s)=>{const{pickerOrientation:a}=s;return kt({root:["root",a==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},WI,t)},GI=Ne("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${co.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape",hasShortcuts:!1},style:{[`& .${co.toolbar}`]:{gridColumn:1,gridRow:"1 / 3"}}},{props:{pickerOrientation:"landscape",hasShortcuts:!0},style:{[`& .${co.toolbar}`]:{gridColumn:"2 / 4",gridRow:1,maxWidth:"max-content"},[`& .${co.shortcuts}`]:{gridColumn:1,gridRow:2}}},{props:{pickerOrientation:"portrait"},style:{[`& .${co.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${co.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{hasShortcuts:!0,layoutDirection:"rtl"},style:{[`& .${co.shortcuts}`]:{gridColumn:4}}}]}),KI=Ne("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),QI=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersLayout"}),{toolbar:n,content:i,tabs:o,actionBar:l,shortcuts:c,ownerState:m}=YI(r),{orientation:u,variant:h}=nl(),{sx:f,className:b,classes:w}=r,S=h0e(w,m);return e.jsxs(GI,{ref:a,sx:f,className:et(S.root,b),ownerState:m,children:[u==="landscape"?c:n,u==="landscape"?n:c,e.jsx(KI,{className:S.contentWrapper,ownerState:m,children:h==="desktop"?e.jsxs(g.Fragment,{children:[i,o]}):e.jsxs(g.Fragment,{children:[o,i]})}),l]})});function ZI(t){const{steps:s}=t;return Upe({steps:s,isViewMatchingStep:(a,r)=>r.views==null||r.views.includes(a),onStepChange:({step:a,defaultView:r,setView:n,view:i,views:o})=>{const l=a.views==null?r:a.views.find(c=>o.includes(c));l!==i&&n(l)}})}const f0e=["props","steps"],x0e=["ownerState"],NS=t=>{let{props:s,steps:a}=t,r=as(t,f0e);const{slots:n,slotProps:i,label:o,inputRef:l,localeText:c}=s,m=ZI({steps:a}),{providerProps:u,renderCurrentView:h,ownerState:f}=HI(je({},r,{props:s,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:m})),b=u.privateContextValue.labelId,w=i?.toolbar?.hidden??!1,S=n.field,j=ea({elementType:S,externalSlotProps:i?.field,additionalProps:je({},w&&{id:b}),ownerState:f}),v=as(j,x0e),N=n.layout??QI;let C=b;w&&(o?C=`${b}-label`:C=void 0);const P=je({},i,{toolbar:je({},i?.toolbar,{titleId:b}),popper:je({"aria-labelledby":C},i?.popper)});return{renderPicker:()=>e.jsxs(aI,je({},u,{children:[e.jsx(S,je({},v,{slots:n,slotProps:P,inputRef:l})),e.jsx(Jge,{slots:n,slotProps:P,children:e.jsx(N,je({},P?.layout,{slots:n,slotProps:P,children:h()}))})]}))}},Wi=({view:t,onViewChange:s,views:a,focusedView:r,onFocusedViewChange:n,value:i,defaultValue:o,referenceDate:l,onChange:c,className:m,classes:u,disableFuture:h,disablePast:f,minDate:b,maxDate:w,shouldDisableDate:S,shouldDisableMonth:j,shouldDisableYear:v,reduceAnimations:N,onMonthChange:C,monthsPerRow:P,onYearChange:E,yearsOrder:M,yearsPerRow:T,slots:A,slotProps:L,loading:F,renderLoading:z,disableHighlightToday:I,readOnly:Q,disabled:Y,showDaysOutsideCurrentMonth:B,dayOfWeekFormatter:q,sx:V,autoFocus:G,fixedWeekNumber:H,displayWeekNumber:D,timezone:R})=>e.jsx(Rge,{view:t,onViewChange:s,views:a.filter(op),focusedView:r&&op(r)?r:null,onFocusedViewChange:n,value:i,defaultValue:o,referenceDate:l,onChange:c,className:m,classes:u,disableFuture:h,disablePast:f,minDate:b,maxDate:w,shouldDisableDate:S,shouldDisableMonth:j,shouldDisableYear:v,reduceAnimations:N,onMonthChange:C,monthsPerRow:P,onYearChange:E,yearsOrder:M,yearsPerRow:T,slots:A,slotProps:L,loading:F,renderLoading:z,disableHighlightToday:I,readOnly:Q,disabled:Y,showDaysOutsideCurrentMonth:B,dayOfWeekFormatter:q,sx:V,autoFocus:G,fixedWeekNumber:H,displayWeekNumber:D,timezone:R}),XI=g.forwardRef(function(s,a){const r=Es(),n=VI(s,"MuiDesktopDatePicker"),i=je({day:Wi,month:Wi,year:Wi},n.viewRenderers),o=je({},n,{closeOnSelect:n.closeOnSelect??!0,viewRenderers:i,format:Px(r,n,!1),yearsPerRow:n.yearsPerRow??4,slots:je({field:AI},n.slots),slotProps:je({},n.slotProps,{field:c=>je({},un(n.slotProps?.field,c),Cp(n)),toolbar:je({hidden:!0},n.slotProps?.toolbar)})}),{renderPicker:l}=NS({ref:a,props:o,valueManager:or,valueType:"date",validator:Pp,steps:null});return l()});XI.propTypes={autoFocus:re.bool,className:re.string,closeOnSelect:re.bool,dayOfWeekFormatter:re.func,defaultValue:re.object,disabled:re.bool,disableFuture:re.bool,disableHighlightToday:re.bool,disableOpenPicker:re.bool,disablePast:re.bool,displayWeekNumber:re.bool,enableAccessibleFieldDOMStructure:re.any,fixedWeekNumber:re.number,format:re.string,formatDensity:re.oneOf(["dense","spacious"]),inputRef:vp,label:re.node,loading:re.bool,localeText:re.object,maxDate:re.object,minDate:re.object,monthsPerRow:re.oneOf([3,4]),name:re.string,onAccept:re.func,onChange:re.func,onClose:re.func,onError:re.func,onMonthChange:re.func,onOpen:re.func,onSelectedSectionsChange:re.func,onViewChange:re.func,onYearChange:re.func,open:re.bool,openTo:re.oneOf(["day","month","year"]),orientation:re.oneOf(["landscape","portrait"]),readOnly:re.bool,reduceAnimations:re.bool,referenceDate:re.object,renderLoading:re.func,selectedSections:re.oneOfType([re.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),re.number]),shouldDisableDate:re.func,shouldDisableMonth:re.func,shouldDisableYear:re.func,showDaysOutsideCurrentMonth:re.bool,slotProps:re.object,slots:re.object,sx:re.oneOfType([re.arrayOf(re.oneOfType([re.func,re.object,re.bool])),re.func,re.object]),timezone:re.string,value:re.object,view:re.oneOf(["day","month","year"]),viewRenderers:re.shape({day:re.func,month:re.func,year:re.func}),views:re.arrayOf(re.oneOf(["day","month","year"]).isRequired),yearsOrder:re.oneOf(["asc","desc"]),yearsPerRow:re.oneOf([3,4])};const g0e=Ne(Kl)({[`& .${Vf.container}`]:{outline:0},[`& .${Vf.paper}`]:{outline:0,minWidth:lp}}),y0e=Ne(ug)({"&:first-of-type":{padding:0}});function b0e(t){const{children:s,slots:a,slotProps:r}=t,{open:n}=nl(),{dismissViews:i,onPopperExited:o}=Ba(),l=a?.dialog??g0e,c=a?.mobileTransition??au;return e.jsx(l,je({open:n,onClose:()=>{i(),o?.()}},r?.dialog,{TransitionComponent:c,TransitionProps:r?.mobileTransition,PaperComponent:a?.mobilePaper,PaperProps:r?.mobilePaper,children:e.jsx(y0e,{children:s})}))}const v0e=["props","steps"],j0e=["ownerState"],wS=t=>{let{props:s,steps:a}=t,r=as(t,v0e);const{slots:n,slotProps:i,label:o,inputRef:l,localeText:c}=s,m=ZI({steps:a}),{providerProps:u,renderCurrentView:h,ownerState:f}=HI(je({},r,{props:s,localeText:c,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:m})),b=u.privateContextValue.labelId,w=i?.toolbar?.hidden??!1,S=n.field,j=ea({elementType:S,externalSlotProps:i?.field,additionalProps:je({},w&&{id:b}),ownerState:f}),v=as(j,j0e),N=n.layout??QI;let C=b;w&&(o?C=`${b}-label`:C=void 0);const P=je({},i,{toolbar:je({},i?.toolbar,{titleId:b}),mobilePaper:je({"aria-labelledby":C},i?.mobilePaper)});return{renderPicker:()=>e.jsxs(aI,je({},u,{children:[e.jsx(S,je({},v,{slots:n,slotProps:P,inputRef:l})),e.jsx(b0e,{slots:n,slotProps:P,children:e.jsx(N,je({},P?.layout,{slots:n,slotProps:P,children:h()}))})]}))}},JI=g.forwardRef(function(s,a){const r=Es(),n=VI(s,"MuiMobileDatePicker"),i=je({day:Wi,month:Wi,year:Wi},n.viewRenderers),o=je({},n,{viewRenderers:i,format:Px(r,n,!1),slots:je({field:AI},n.slots),slotProps:je({},n.slotProps,{field:c=>je({},un(n.slotProps?.field,c),Cp(n)),toolbar:je({hidden:!1},n.slotProps?.toolbar)})}),{renderPicker:l}=wS({ref:a,props:o,valueManager:or,valueType:"date",validator:Pp,steps:null});return l()});JI.propTypes={autoFocus:re.bool,className:re.string,closeOnSelect:re.bool,dayOfWeekFormatter:re.func,defaultValue:re.object,disabled:re.bool,disableFuture:re.bool,disableHighlightToday:re.bool,disableOpenPicker:re.bool,disablePast:re.bool,displayWeekNumber:re.bool,enableAccessibleFieldDOMStructure:re.any,fixedWeekNumber:re.number,format:re.string,formatDensity:re.oneOf(["dense","spacious"]),inputRef:vp,label:re.node,loading:re.bool,localeText:re.object,maxDate:re.object,minDate:re.object,monthsPerRow:re.oneOf([3,4]),name:re.string,onAccept:re.func,onChange:re.func,onClose:re.func,onError:re.func,onMonthChange:re.func,onOpen:re.func,onSelectedSectionsChange:re.func,onViewChange:re.func,onYearChange:re.func,open:re.bool,openTo:re.oneOf(["day","month","year"]),orientation:re.oneOf(["landscape","portrait"]),readOnly:re.bool,reduceAnimations:re.bool,referenceDate:re.object,renderLoading:re.func,selectedSections:re.oneOfType([re.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),re.number]),shouldDisableDate:re.func,shouldDisableMonth:re.func,shouldDisableYear:re.func,showDaysOutsideCurrentMonth:re.bool,slotProps:re.object,slots:re.object,sx:re.oneOfType([re.arrayOf(re.oneOfType([re.func,re.object,re.bool])),re.func,re.object]),timezone:re.string,value:re.object,view:re.oneOf(["day","month","year"]),viewRenderers:re.shape({day:re.func,month:re.func,year:re.func}),views:re.arrayOf(re.oneOf(["day","month","year"]).isRequired),yearsOrder:re.oneOf(["asc","desc"]),yearsPerRow:re.oneOf([3,4])};const N0e=["desktopModeMediaQuery"],pT=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiDatePicker"}),{desktopModeMediaQuery:n=uS}=r,i=as(r,N0e);return mg(n,{defaultMatches:!0})?e.jsx(XI,je({ref:a},i)):e.jsx(JI,je({ref:a},i))});function w0e(t){return Dt("MuiPickersToolbarText",t)}const _0e=Tt("MuiPickersToolbarText",["root"]),S0e=["className","classes","selected","value"],C0e=t=>kt({root:["root"]},w0e,t),P0e=Ne(x,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:t})=>({transition:t.transitions.create("color"),color:(t.vars||t).palette.text.secondary,"&[data-selected]":{color:(t.vars||t).palette.text.primary}})),_S=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersToolbarText"}),{className:n,classes:i,selected:o,value:l}=r,c=as(r,S0e),m=C0e(i);return e.jsx(P0e,je({ref:a,className:et(m.root,n),component:"span",ownerState:r},o&&{"data-selected":!0},c,{children:l}))}),k0e=["align","className","classes","selected","typographyClassName","value","variant","width"],E0e=t=>kt({root:["root"]},UI,t),T0e=Ne(lo,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),Jn=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiPickersToolbarButton"}),{align:n,className:i,classes:o,selected:l,typographyClassName:c,value:m,variant:u,width:h}=r,f=as(r,k0e),b=E0e(o);return e.jsx(T0e,je({variant:"text",ref:a,className:et(b.root,i),ownerState:r},h?{sx:{width:h}}:{},f,{children:e.jsx(_S,{align:n,className:c,variant:u,value:m,selected:l})}))});function M0e(t){return Dt("MuiTimePickerToolbar",t)}const Zf=Tt("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),D0e=["ampm","ampmInClock","className","classes"],R0e=(t,s)=>{const{pickerOrientation:a,toolbarDirection:r}=s;return kt({root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",a==="landscape"&&"hourMinuteLabelLandscape",r==="rtl"&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",a==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},M0e,t)},A0e=Ne(jS,{name:"MuiTimePickerToolbar",slot:"Root"})({}),I0e=Ne(_S,{name:"MuiTimePickerToolbar",slot:"Separator"})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),O0e=Ne("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(t,s)=>[{[`&.${Zf.hourMinuteLabelLandscape}`]:s.hourMinuteLabelLandscape,[`&.${Zf.hourMinuteLabelReverse}`]:s.hourMinuteLabelReverse},s.hourMinuteLabel]})({display:"flex",justifyContent:"flex-end",alignItems:"flex-end",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{pickerOrientation:"landscape"},style:{marginTop:"auto"}}]}),F0e=Ne("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(t,s)=>[{[`.${Zf.ampmLabel}`]:s.ampmLabel},{[`&.${Zf.ampmLandscape}`]:s.ampmLandscape},s.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${Zf.ampmLabel}`]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});function L0e(t){const s=Ls({props:t,name:"MuiTimePickerToolbar"}),{ampm:a,ampmInClock:r,className:n,classes:i}=s,o=as(s,D0e),l=Es(),c=Zr(),m=Yv(),u=R0e(i,m),{value:h,setValue:f,disabled:b,readOnly:w,view:S,setView:j,views:v}=nl(),N=!!(a&&!r&&v.includes("hours")),{meridiemMode:C,handleMeridiemChange:P}=qv(h,a,T=>f(T,{changeImportance:"set"})),E=T=>l.isValid(h)?l.format(h,T):"--",M=e.jsx(I0e,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:u.separator});return e.jsxs(A0e,je({landscapeDirection:"row",toolbarTitle:c.timePickerToolbarTitle,ownerState:m,className:et(u.root,n)},o,{children:[e.jsxs(O0e,{className:u.hourMinuteLabel,ownerState:m,children:[jm(v,"hours")&&e.jsx(Jn,{tabIndex:-1,variant:"h3",onClick:()=>j("hours"),selected:S==="hours",value:E(a?"hours12h":"hours24h")}),jm(v,["hours","minutes"])&&M,jm(v,"minutes")&&e.jsx(Jn,{tabIndex:-1,variant:"h3",onClick:()=>j("minutes"),selected:S==="minutes",value:E("minutes")}),jm(v,["minutes","seconds"])&&M,jm(v,"seconds")&&e.jsx(Jn,{variant:"h3",onClick:()=>j("seconds"),selected:S==="seconds",value:E("seconds")})]}),N&&e.jsxs(F0e,{className:u.ampmSelection,ownerState:m,children:[e.jsx(Jn,{disableRipple:!0,variant:"subtitle2",selected:C==="am",typographyClassName:u.ampmLabel,value:mo(l,"am"),onClick:w?void 0:()=>P("am"),disabled:b}),e.jsx(Jn,{disableRipple:!0,variant:"subtitle2",selected:C==="pm",typographyClassName:u.ampmLabel,value:mo(l,"pm"),onClick:w?void 0:()=>P("pm"),disabled:b})]})]}))}function eO(t,s){const a=Es(),r=Ls({props:t,name:s}),n=wI(r),i=r.ampm??a.is12HourCycleInCurrentLocale(),o=g.useMemo(()=>r.localeText?.toolbarTitle==null?r.localeText:je({},r.localeText,{timePickerToolbarTitle:r.localeText.toolbarTitle}),[r.localeText]);return je({},r,n,{ampm:i,localeText:o},tS({views:r.views,openTo:r.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{slots:je({toolbar:L0e},r.slots),slotProps:je({},r.slotProps,{toolbar:je({ampm:i,ampmInClock:r.ampmInClock},r.slotProps?.toolbar)})})}const gN=({view:t,onViewChange:s,focusedView:a,onFocusedViewChange:r,views:n,value:i,defaultValue:o,referenceDate:l,onChange:c,className:m,classes:u,disableFuture:h,disablePast:f,minTime:b,maxTime:w,shouldDisableTime:S,minutesStep:j,ampm:v,ampmInClock:N,slots:C,slotProps:P,readOnly:E,disabled:M,sx:T,autoFocus:A,showViewSwitcher:L,disableIgnoringDatePartForTimeValidation:F,timezone:z})=>e.jsx(khe,{view:t,onViewChange:s,focusedView:a&&mu(a)?a:null,onFocusedViewChange:r,views:n.filter(mu),value:i,defaultValue:o,referenceDate:l,onChange:c,className:m,classes:u,disableFuture:h,disablePast:f,minTime:b,maxTime:w,shouldDisableTime:S,minutesStep:j,ampm:v,ampmInClock:N,slots:C,slotProps:P,readOnly:E,disabled:M,sx:T,autoFocus:A,showViewSwitcher:L,disableIgnoringDatePartForTimeValidation:F,timezone:z}),SS=({view:t,onViewChange:s,focusedView:a,onFocusedViewChange:r,views:n,value:i,defaultValue:o,referenceDate:l,onChange:c,className:m,classes:u,disableFuture:h,disablePast:f,minTime:b,maxTime:w,shouldDisableTime:S,minutesStep:j,ampm:v,slots:N,slotProps:C,readOnly:P,disabled:E,sx:M,autoFocus:T,disableIgnoringDatePartForTimeValidation:A,timeSteps:L,skipDisabled:F,timezone:z})=>e.jsx(Fhe,{view:t,onViewChange:s,focusedView:a&&mu(a)?a:null,onFocusedViewChange:r,views:n.filter(mu),value:i,defaultValue:o,referenceDate:l,onChange:c,className:m,classes:u,disableFuture:h,disablePast:f,minTime:b,maxTime:w,shouldDisableTime:S,minutesStep:j,ampm:v,slots:N,slotProps:C,readOnly:P,disabled:E,sx:M,autoFocus:T,disableIgnoringDatePartForTimeValidation:A,timeStep:L?.minutes,skipDisabled:F,timezone:z}),up=({view:t,onViewChange:s,focusedView:a,onFocusedViewChange:r,views:n,value:i,defaultValue:o,referenceDate:l,onChange:c,className:m,classes:u,disableFuture:h,disablePast:f,minTime:b,maxTime:w,shouldDisableTime:S,minutesStep:j,ampm:v,slots:N,slotProps:C,readOnly:P,disabled:E,sx:M,autoFocus:T,disableIgnoringDatePartForTimeValidation:A,timeSteps:L,skipDisabled:F,timezone:z})=>e.jsx(Khe,{view:t,onViewChange:s,focusedView:a&&Cm(a)?a:null,onFocusedViewChange:r,views:n.filter(mu),value:i,defaultValue:o,referenceDate:l,onChange:c,className:m,classes:u,disableFuture:h,disablePast:f,minTime:b,maxTime:w,shouldDisableTime:S,minutesStep:j,ampm:v,slots:N,slotProps:C,readOnly:P,disabled:E,sx:M,autoFocus:T,disableIgnoringDatePartForTimeValidation:A,timeSteps:L,skipDisabled:F,timezone:z}),$0e=["views","format"],tO=(t,s,a)=>{let{views:r,format:n}=s,i=as(s,$0e);if(n)return n;const o=[],l=[];if(r.forEach(u=>{mu(u)?l.push(u):op(u)&&o.push(u)}),l.length===0)return Px(t,je({views:o},i),!1);if(o.length===0)return Pb(t,je({views:l},i));const c=Pb(t,je({views:l},i));return`${Px(t,je({views:o},i),!1)} ${c}`},z0e=(t,s,a)=>a?s.filter(r=>!Cm(r)||r==="hours"):t?[...s,"meridiem"]:s,q0e=(t,s)=>1440/((t.hours??1)*(t.minutes??5))<=s;function sO({thresholdToRenderTimeInASingleColumn:t,ampm:s,timeSteps:a,views:r}){const n=t??24,i=je({hours:1,minutes:5,seconds:5},a),o=q0e(i,n);return{thresholdToRenderTimeInASingleColumn:n,timeSteps:i,shouldRenderTimeInASingleColumn:o,views:z0e(s,r,o)}}const aO=g.forwardRef(function(s,a){const r=Es(),n=eO(s,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:i,views:o,timeSteps:l}=sO(n),c=i?SS:up,m=je({hours:c,minutes:c,seconds:c,meridiem:c},n.viewRenderers),u=n.ampmInClock??!0,f=m.hours?.name===up.name?o:o.filter(S=>S!=="meridiem"),b=je({},n,{ampmInClock:u,timeSteps:l,viewRenderers:m,format:Pb(r,n),views:i?["hours"]:f,slots:je({field:II},n.slots),slotProps:je({},n.slotProps,{field:S=>je({},un(n.slotProps?.field,S),Cp(n)),toolbar:je({hidden:!0,ampmInClock:u},n.slotProps?.toolbar)})}),{renderPicker:w}=NS({ref:a,props:b,valueManager:or,valueType:"time",validator:Sg,steps:null});return w()});aO.propTypes={ampm:re.bool,ampmInClock:re.bool,autoFocus:re.bool,className:re.string,closeOnSelect:re.bool,defaultValue:re.object,disabled:re.bool,disableFuture:re.bool,disableIgnoringDatePartForTimeValidation:re.bool,disableOpenPicker:re.bool,disablePast:re.bool,enableAccessibleFieldDOMStructure:re.any,format:re.string,formatDensity:re.oneOf(["dense","spacious"]),inputRef:vp,label:re.node,localeText:re.object,maxTime:re.object,minTime:re.object,minutesStep:re.number,name:re.string,onAccept:re.func,onChange:re.func,onClose:re.func,onError:re.func,onOpen:re.func,onSelectedSectionsChange:re.func,onViewChange:re.func,open:re.bool,openTo:re.oneOf(["hours","meridiem","minutes","seconds"]),orientation:re.oneOf(["landscape","portrait"]),readOnly:re.bool,reduceAnimations:re.bool,referenceDate:re.object,selectedSections:re.oneOfType([re.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),re.number]),shouldDisableTime:re.func,skipDisabled:re.bool,slotProps:re.object,slots:re.object,sx:re.oneOfType([re.arrayOf(re.oneOfType([re.func,re.object,re.bool])),re.func,re.object]),thresholdToRenderTimeInASingleColumn:re.number,timeSteps:re.shape({hours:re.number,minutes:re.number,seconds:re.number}),timezone:re.string,value:re.object,view:re.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:re.shape({hours:re.func,meridiem:re.func,minutes:re.func,seconds:re.func}),views:re.arrayOf(re.oneOf(["hours","minutes","seconds"]).isRequired)};const rO=g.forwardRef(function(s,a){const r=Es(),n=eO(s,"MuiMobileTimePicker"),i=je({hours:gN,minutes:gN,seconds:gN},n.viewRenderers),o=n.ampmInClock??!1,l=je({},n,{ampmInClock:o,viewRenderers:i,format:Pb(r,n),slots:je({field:II},n.slots),slotProps:je({},n.slotProps,{field:m=>je({},un(n.slotProps?.field,m),Cp(n)),toolbar:je({hidden:!1,ampmInClock:o},n.slotProps?.toolbar)})}),{renderPicker:c}=wS({ref:a,props:l,valueManager:or,valueType:"time",validator:Sg,steps:null});return c()});rO.propTypes={ampm:re.bool,ampmInClock:re.bool,autoFocus:re.bool,className:re.string,closeOnSelect:re.bool,defaultValue:re.object,disabled:re.bool,disableFuture:re.bool,disableIgnoringDatePartForTimeValidation:re.bool,disableOpenPicker:re.bool,disablePast:re.bool,enableAccessibleFieldDOMStructure:re.any,format:re.string,formatDensity:re.oneOf(["dense","spacious"]),inputRef:vp,label:re.node,localeText:re.object,maxTime:re.object,minTime:re.object,minutesStep:re.number,name:re.string,onAccept:re.func,onChange:re.func,onClose:re.func,onError:re.func,onOpen:re.func,onSelectedSectionsChange:re.func,onViewChange:re.func,open:re.bool,openTo:re.oneOf(["hours","minutes","seconds"]),orientation:re.oneOf(["landscape","portrait"]),readOnly:re.bool,reduceAnimations:re.bool,referenceDate:re.object,selectedSections:re.oneOfType([re.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),re.number]),shouldDisableTime:re.func,slotProps:re.object,slots:re.object,sx:re.oneOfType([re.arrayOf(re.oneOfType([re.func,re.object,re.bool])),re.func,re.object]),timezone:re.string,value:re.object,view:re.oneOf(["hours","minutes","seconds"]),viewRenderers:re.shape({hours:re.func,minutes:re.func,seconds:re.func}),views:re.arrayOf(re.oneOf(["hours","minutes","seconds"]).isRequired)};const B0e=["desktopModeMediaQuery"],U0e=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiTimePicker"}),{desktopModeMediaQuery:n=uS}=r,i=as(r,B0e);return mg(n,{defaultMatches:!0})?e.jsx(aO,je({ref:a},i)):e.jsx(rO,je({ref:a},i))});function V0e(t){return Dt("MuiDateTimePickerTabs",t)}Tt("MuiDateTimePickerTabs",["root"]);const H0e=t=>op(t)?"date":"time",W0e=t=>t==="date"?"day":"hours",Y0e=t=>kt({root:["root"]},V0e,t),G0e=Ne(Zo,{name:"MuiDateTimePickerTabs",slot:"Root"})(({theme:t})=>({boxShadow:`0 -1px 0 0 inset ${(t.vars||t).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(t.vars||t).palette.divider}`,[`& .${By.indicator}`]:{bottom:"auto",top:0}}})),K0e=function(s){const a=Ls({props:s,name:"MuiDateTimePickerTabs"}),{dateIcon:r=e.jsx(Tpe,{}),timeIcon:n=e.jsx(Mpe,{}),hidden:i=typeof window>"u"||window.innerHeight<667,className:o,classes:l,sx:c}=a,m=Zr(),{ownerState:u}=Ba(),{view:h,setView:f}=nl(),b=Y0e(l),w=(S,j)=>{f(W0e(j))};return i?null:e.jsxs(G0e,{ownerState:u,variant:"fullWidth",value:H0e(h),onChange:w,className:et(o,b.root),sx:c,children:[e.jsx(As,{value:"date","aria-label":m.dateTableLabel,icon:e.jsx(g.Fragment,{children:r})}),e.jsx(As,{value:"time","aria-label":m.timeTableLabel,icon:e.jsx(g.Fragment,{children:n})})]})};function Q0e(t){return Dt("MuiDateTimePickerToolbar",t)}const yN=Tt("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),Z0e=["ampm","ampmInClock","toolbarFormat","toolbarPlaceholder","toolbarTitle","className","classes"],X0e=(t,s)=>{const{pickerOrientation:a,toolbarDirection:r}=s;return kt({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",r==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",r==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",a==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},Q0e,t)},J0e=Ne(jS,{name:"MuiDateTimePickerToolbar",slot:"Root",shouldForwardProp:t=>In(t)&&t!=="toolbarVariant"})(({theme:t})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",variants:[{props:{toolbarVariant:"desktop"},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,[`& .${Age.content} .${_0e.root}[data-selected]`]:{color:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightBold}}},{props:{toolbarVariant:"desktop",pickerOrientation:"landscape"},style:{borderRight:`1px solid ${(t.vars||t).palette.divider}`}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{paddingLeft:24,paddingRight:0}}]})),eye=Ne("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer"})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),tye=Ne("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",shouldForwardProp:t=>In(t)&&t!=="toolbarVariant"})({display:"flex",flexDirection:"row",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{gap:9,marginRight:4,alignSelf:"flex-end"}},{props:({pickerOrientation:t,toolbarVariant:s})=>t==="landscape"&&s!=="desktop",style:{flexDirection:"column"}},{props:({pickerOrientation:t,toolbarVariant:s,toolbarDirection:a})=>t==="landscape"&&s!=="desktop"&&a==="rtl",style:{flexDirection:"column-reverse"}}]}),sye=Ne("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",shouldForwardProp:t=>In(t)&&t!=="toolbarVariant"})({display:"flex",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop"},style:{gap:1.5}}]}),hT=Ne(_S,{name:"MuiDateTimePickerToolbar",slot:"Separator",shouldForwardProp:t=>In(t)&&t!=="toolbarVariant"})({margin:"0 4px 0 2px",cursor:"default",variants:[{props:{toolbarVariant:"desktop"},style:{margin:0}}]}),aye=Ne("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(t,s)=>[{[`.${yN.ampmLabel}`]:s.ampmLabel},{[`&.${yN.ampmLandscape}`]:s.ampmLandscape},s.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${yN.ampmLabel}`]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"}}]}),rye=g.createContext(null);function nye(t){const s=Ls({props:t,name:"MuiDateTimePickerToolbar"}),{ampm:a,ampmInClock:r,toolbarFormat:n,toolbarPlaceholder:i="",toolbarTitle:o,className:l,classes:c}=s,m=as(s,Z0e),{value:u,setValue:h,disabled:f,readOnly:b,variant:w,orientation:S,view:j,setView:v,views:N}=nl(),C=Zr(),P=Yv(),E=X0e(c,P),M=Es(),T=g.useContext(rye),A=T?T.value:u,L=T?T.setValue:h,F=T?T.view:j,z=T?T.setView:v,{meridiemMode:I,handleMeridiemChange:Q}=qv(A,a,D=>L(D,{changeImportance:"set"})),Y=T?.forceDesktopVariant?"desktop":w,B=Y==="desktop",q=!!(a&&!r),V=o??C.dateTimePickerToolbarTitle,G=g.useMemo(()=>M.isValid(A)?n?M.formatByString(A,n):M.format(A,"shortDate"):i,[A,n,i,M]),H=(D,R)=>M.isValid(A)?M.format(A,D):R;return e.jsxs(J0e,je({className:et(E.root,l),toolbarTitle:V,toolbarVariant:Y},m,{ownerState:P,children:[e.jsxs(eye,{className:E.dateContainer,ownerState:P,children:[N.includes("year")&&e.jsx(Jn,{tabIndex:-1,variant:"subtitle1",onClick:()=>z("year"),selected:F==="year",value:H("year","")}),N.includes("day")&&e.jsx(Jn,{tabIndex:-1,variant:B?"h5":"h4",onClick:()=>z("day"),selected:F==="day",value:G})]}),e.jsxs(tye,{className:E.timeContainer,ownerState:P,toolbarVariant:Y,children:[e.jsxs(sye,{className:E.timeDigitsContainer,ownerState:P,toolbarVariant:Y,children:[N.includes("hours")&&e.jsxs(g.Fragment,{children:[e.jsx(Jn,{variant:B?"h5":"h3",width:B&&S==="portrait"?cf:void 0,onClick:()=>z("hours"),selected:F==="hours",value:H(a?"hours12h":"hours24h","--")}),e.jsx(hT,{variant:B?"h5":"h3",value:":",className:E.separator,ownerState:P,toolbarVariant:Y}),e.jsx(Jn,{variant:B?"h5":"h3",width:B&&S==="portrait"?cf:void 0,onClick:()=>z("minutes"),selected:F==="minutes"||!N.includes("minutes")&&F==="hours",value:H("minutes","--"),disabled:!N.includes("minutes")})]}),N.includes("seconds")&&e.jsxs(g.Fragment,{children:[e.jsx(hT,{variant:B?"h5":"h3",value:":",className:E.separator,ownerState:P,toolbarVariant:Y}),e.jsx(Jn,{variant:B?"h5":"h3",width:B&&S==="portrait"?cf:void 0,onClick:()=>z("seconds"),selected:F==="seconds",value:H("seconds","--")})]})]}),q&&!B&&e.jsxs(aye,{className:E.ampmSelection,ownerState:P,children:[e.jsx(Jn,{variant:"subtitle2",selected:I==="am",typographyClassName:E.ampmLabel,value:mo(M,"am"),onClick:b?void 0:()=>Q("am"),disabled:f}),e.jsx(Jn,{variant:"subtitle2",selected:I==="pm",typographyClassName:E.ampmLabel,value:mo(M,"pm"),onClick:b?void 0:()=>Q("pm"),disabled:f})]}),a&&B&&e.jsx(Jn,{variant:"h5",onClick:()=>z("meridiem"),selected:F==="meridiem",value:A&&I?mo(M,I):"--",width:cf})]})]}))}function nO(t,s){const a=Es(),r=Ls({props:t,name:s}),n=_I(r),i=r.ampm??a.is12HourCycleInCurrentLocale(),o=g.useMemo(()=>r.localeText?.toolbarTitle==null?r.localeText:je({},r.localeText,{dateTimePickerToolbarTitle:r.localeText.toolbarTitle}),[r.localeText]),{openTo:l,views:c}=tS({views:r.views,openTo:r.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{shouldRenderTimeInASingleColumn:m,thresholdToRenderTimeInASingleColumn:u,views:h,timeSteps:f}=sO({thresholdToRenderTimeInASingleColumn:r.thresholdToRenderTimeInASingleColumn,ampm:i,timeSteps:r.timeSteps,views:c}),b=i?[...c,"meridiem"]:c;return je({},r,n,{timeSteps:f,openTo:l,shouldRenderTimeInASingleColumn:m,thresholdToRenderTimeInASingleColumn:u,views:h,viewsForFormatting:b,ampm:i,localeText:o,orientation:r.orientation??"portrait",slots:je({toolbar:nye,tabs:K0e},r.slots),slotProps:je({},r.slotProps,{toolbar:je({ampm:i},r.slotProps?.toolbar)})})}const iye=g.forwardRef(function(s,a){const{toolbar:r,tabs:n,content:i,actionBar:o,shortcuts:l,ownerState:c}=YI(s),{orientation:m}=nl(),{sx:u,className:h,classes:f}=s,b=o&&(o.props.actions?.length??0)>0;return e.jsxs(GI,{ref:a,className:et(co.root,f?.root,h),sx:[{[`& .${co.tabs}`]:{gridRow:4,gridColumn:"1 / 4"},[`& .${co.actionBar}`]:{gridRow:5}},...Array.isArray(u)?u:[u]],ownerState:c,children:[m==="landscape"?l:r,m==="landscape"?r:l,e.jsxs(KI,{className:et(co.contentWrapper,f?.contentWrapper),ownerState:c,sx:{display:"grid"},children:[i,n,b&&e.jsx(pr,{sx:{gridRow:3,gridColumn:"1 / 4"}})]}),o]})}),oye=["openTo","focusedView","timeViewsCount"],lye=function(s){const{viewRenderers:a,popperView:r,rendererProps:n}=s,{openTo:i,focusedView:o,timeViewsCount:l}=n,c=as(n,oye),m=je({},c,{autoFocus:!1,focusedView:null,sx:[{[`&.${m_.root}`]:{borderBottom:0},[`&.${m_.root}, .${p_.root}, &.${u_.root}`]:{maxHeight:cp}}]}),u=Cm(r),h=u?"day":r,f=u?r:"hours";return e.jsxs(g.Fragment,{children:[a[h]?.(je({},n,{view:u?"day":r,focusedView:o&&op(o)?o:null,views:n.views.filter(op),sx:[{gridColumn:1},...m.sx]})),l>0&&e.jsxs(g.Fragment,{children:[e.jsx(pr,{orientation:"vertical",sx:{gridColumn:2}}),a[f]?.(je({},m,{view:u?r:"hours",focusedView:o&&Cm(o)?o:null,openTo:Cm(i)?i:"hours",views:n.views.filter(Cm),sx:[{gridColumn:3},...m.sx]}))]})]})},iO=g.forwardRef(function(s,a){const r=Es(),n=nO(s,"MuiDesktopDateTimePicker"),i=n.shouldRenderTimeInASingleColumn?SS:up,o=je({day:Wi,month:Wi,year:Wi,hours:i,minutes:i,seconds:i,meridiem:i},n.viewRenderers),l=n.ampmInClock??!0,m=o.hours?.name===up.name?n.views:n.views.filter(f=>f!=="meridiem"),u=je({},n,{viewRenderers:o,format:tO(r,je({},n,{views:n.viewsForFormatting})),views:m,yearsPerRow:n.yearsPerRow??4,ampmInClock:l,slots:je({field:OI,layout:iye},n.slots),slotProps:je({},n.slotProps,{field:f=>je({},un(n.slotProps?.field,f),Cp(n)),toolbar:je({hidden:!0,ampmInClock:l},n.slotProps?.toolbar),tabs:je({hidden:!0},n.slotProps?.tabs)})}),{renderPicker:h}=NS({ref:a,props:u,valueManager:or,valueType:"date-time",validator:Vv,rendererInterceptor:lye,steps:null});return h()});iO.propTypes={ampm:re.bool,ampmInClock:re.bool,autoFocus:re.bool,className:re.string,closeOnSelect:re.bool,dayOfWeekFormatter:re.func,defaultValue:re.object,disabled:re.bool,disableFuture:re.bool,disableHighlightToday:re.bool,disableIgnoringDatePartForTimeValidation:re.bool,disableOpenPicker:re.bool,disablePast:re.bool,displayWeekNumber:re.bool,enableAccessibleFieldDOMStructure:re.any,fixedWeekNumber:re.number,format:re.string,formatDensity:re.oneOf(["dense","spacious"]),inputRef:vp,label:re.node,loading:re.bool,localeText:re.object,maxDate:re.object,maxDateTime:re.object,maxTime:re.object,minDate:re.object,minDateTime:re.object,minTime:re.object,minutesStep:re.number,monthsPerRow:re.oneOf([3,4]),name:re.string,onAccept:re.func,onChange:re.func,onClose:re.func,onError:re.func,onMonthChange:re.func,onOpen:re.func,onSelectedSectionsChange:re.func,onViewChange:re.func,onYearChange:re.func,open:re.bool,openTo:re.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:re.oneOf(["landscape","portrait"]),readOnly:re.bool,reduceAnimations:re.bool,referenceDate:re.object,renderLoading:re.func,selectedSections:re.oneOfType([re.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),re.number]),shouldDisableDate:re.func,shouldDisableMonth:re.func,shouldDisableTime:re.func,shouldDisableYear:re.func,showDaysOutsideCurrentMonth:re.bool,skipDisabled:re.bool,slotProps:re.object,slots:re.object,sx:re.oneOfType([re.arrayOf(re.oneOfType([re.func,re.object,re.bool])),re.func,re.object]),thresholdToRenderTimeInASingleColumn:re.number,timeSteps:re.shape({hours:re.number,minutes:re.number,seconds:re.number}),timezone:re.string,value:re.object,view:re.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:re.shape({day:re.func,hours:re.func,meridiem:re.func,minutes:re.func,month:re.func,seconds:re.func,year:re.func}),views:re.arrayOf(re.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:re.oneOf(["asc","desc"]),yearsPerRow:re.oneOf([3,4])};const cye=[{views:YA},{views:oI}],oO=g.forwardRef(function(s,a){const r=Es(),n=nO(s,"MuiMobileDateTimePicker"),i=n.shouldRenderTimeInASingleColumn?SS:up,o=je({day:Wi,month:Wi,year:Wi,hours:i,minutes:i,seconds:i,meridiem:i},n.viewRenderers),l=n.ampmInClock??!1,m=o.hours?.name===up.name?n.views:n.views.filter(f=>f!=="meridiem"),u=je({},n,{viewRenderers:o,format:tO(r,je({},n,{views:n.viewsForFormatting})),views:m,ampmInClock:l,slots:je({field:OI},n.slots),slotProps:je({},n.slotProps,{field:f=>je({},un(n.slotProps?.field,f),Cp(n)),toolbar:je({hidden:!1,ampmInClock:l},n.slotProps?.toolbar),tabs:je({hidden:!1},n.slotProps?.tabs),layout:je({},n.slotProps?.layout,{sx:Mhe([{[`& .${m_.root}`]:{width:lp},[`& .${p_.root}`]:{flex:1,maxHeight:cp-1,[`.${p_.item}`]:{width:"auto"}},[`& .${u_.root}`]:{width:lp,maxHeight:cp,flex:1,[`.${u_.item}`]:{justifyContent:"center"}}}],n.slotProps?.layout?.sx)})})}),{renderPicker:h}=wS({ref:a,props:u,valueManager:or,valueType:"date-time",validator:Vv,steps:cye});return h()});oO.propTypes={ampm:re.bool,ampmInClock:re.bool,autoFocus:re.bool,className:re.string,closeOnSelect:re.bool,dayOfWeekFormatter:re.func,defaultValue:re.object,disabled:re.bool,disableFuture:re.bool,disableHighlightToday:re.bool,disableIgnoringDatePartForTimeValidation:re.bool,disableOpenPicker:re.bool,disablePast:re.bool,displayWeekNumber:re.bool,enableAccessibleFieldDOMStructure:re.any,fixedWeekNumber:re.number,format:re.string,formatDensity:re.oneOf(["dense","spacious"]),inputRef:vp,label:re.node,loading:re.bool,localeText:re.object,maxDate:re.object,maxDateTime:re.object,maxTime:re.object,minDate:re.object,minDateTime:re.object,minTime:re.object,minutesStep:re.number,monthsPerRow:re.oneOf([3,4]),name:re.string,onAccept:re.func,onChange:re.func,onClose:re.func,onError:re.func,onMonthChange:re.func,onOpen:re.func,onSelectedSectionsChange:re.func,onViewChange:re.func,onYearChange:re.func,open:re.bool,openTo:re.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:re.oneOf(["landscape","portrait"]),readOnly:re.bool,reduceAnimations:re.bool,referenceDate:re.object,renderLoading:re.func,selectedSections:re.oneOfType([re.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),re.number]),shouldDisableDate:re.func,shouldDisableMonth:re.func,shouldDisableTime:re.func,shouldDisableYear:re.func,showDaysOutsideCurrentMonth:re.bool,skipDisabled:re.bool,slotProps:re.object,slots:re.object,sx:re.oneOfType([re.arrayOf(re.oneOfType([re.func,re.object,re.bool])),re.func,re.object]),thresholdToRenderTimeInASingleColumn:re.number,timeSteps:re.shape({hours:re.number,minutes:re.number,seconds:re.number}),timezone:re.string,value:re.object,view:re.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:re.shape({day:re.func,hours:re.func,meridiem:re.func,minutes:re.func,month:re.func,seconds:re.func,year:re.func}),views:re.arrayOf(re.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:re.oneOf(["asc","desc"]),yearsPerRow:re.oneOf([3,4])};const dye=["desktopModeMediaQuery"],uye=g.forwardRef(function(s,a){const r=Ls({props:s,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:n=uS}=r,i=as(r,dye);return mg(n,{defaultMatches:!0})?e.jsx(iO,je({ref:a},i)):e.jsx(oO,je({ref:a},i))});var Ky={exports:{}},mye=Ky.exports,fT;function pye(){return fT||(fT=1,(function(t,s){(function(a,r){t.exports=r()})(mye,(function(){var a=1e3,r=6e4,n=36e5,i="millisecond",o="second",l="minute",c="hour",m="day",u="week",h="month",f="quarter",b="year",w="date",S="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var B=["th","st","nd","rd"],q=Y%100;return"["+Y+(B[(q-20)%10]||B[q]||B[0])+"]"}},C=function(Y,B,q){var V=String(Y);return!V||V.length>=B?Y:""+Array(B+1-V.length).join(q)+Y},P={s:C,z:function(Y){var B=-Y.utcOffset(),q=Math.abs(B),V=Math.floor(q/60),G=q%60;return(B<=0?"+":"-")+C(V,2,"0")+":"+C(G,2,"0")},m:function Y(B,q){if(B.date()<q.date())return-Y(q,B);var V=12*(q.year()-B.year())+(q.month()-B.month()),G=B.clone().add(V,h),H=q-G<0,D=B.clone().add(V+(H?-1:1),h);return+(-(V+(q-G)/(H?G-D:D-G))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:h,y:b,w:u,d:m,D:w,h:c,m:l,s:o,ms:i,Q:f}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},E="en",M={};M[E]=N;var T="$isDayjsObject",A=function(Y){return Y instanceof I||!(!Y||!Y[T])},L=function Y(B,q,V){var G;if(!B)return E;if(typeof B=="string"){var H=B.toLowerCase();M[H]&&(G=H),q&&(M[H]=q,G=H);var D=B.split("-");if(!G&&D.length>1)return Y(D[0])}else{var R=B.name;M[R]=B,G=R}return!V&&G&&(E=G),G||!V&&E},F=function(Y,B){if(A(Y))return Y.clone();var q=typeof B=="object"?B:{};return q.date=Y,q.args=arguments,new I(q)},z=P;z.l=L,z.i=A,z.w=function(Y,B){return F(Y,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var I=(function(){function Y(q){this.$L=L(q.locale,null,!0),this.parse(q),this.$x=this.$x||q.x||{},this[T]=!0}var B=Y.prototype;return B.parse=function(q){this.$d=(function(V){var G=V.date,H=V.utc;if(G===null)return new Date(NaN);if(z.u(G))return new Date;if(G instanceof Date)return new Date(G);if(typeof G=="string"&&!/Z$/i.test(G)){var D=G.match(j);if(D){var R=D[2]-1||0,$=(D[7]||"0").substring(0,3);return H?new Date(Date.UTC(D[1],R,D[3]||1,D[4]||0,D[5]||0,D[6]||0,$)):new Date(D[1],R,D[3]||1,D[4]||0,D[5]||0,D[6]||0,$)}}return new Date(G)})(q),this.init()},B.init=function(){var q=this.$d;this.$y=q.getFullYear(),this.$M=q.getMonth(),this.$D=q.getDate(),this.$W=q.getDay(),this.$H=q.getHours(),this.$m=q.getMinutes(),this.$s=q.getSeconds(),this.$ms=q.getMilliseconds()},B.$utils=function(){return z},B.isValid=function(){return this.$d.toString()!==S},B.isSame=function(q,V){var G=F(q);return this.startOf(V)<=G&&G<=this.endOf(V)},B.isAfter=function(q,V){return F(q)<this.startOf(V)},B.isBefore=function(q,V){return this.endOf(V)<F(q)},B.$g=function(q,V,G){return z.u(q)?this[V]:this.set(G,q)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(q,V){var G=this,H=!!z.u(V)||V,D=z.p(q),R=function(he,ne){var xe=z.w(G.$u?Date.UTC(G.$y,ne,he):new Date(G.$y,ne,he),G);return H?xe:xe.endOf(m)},$=function(he,ne){return z.w(G.toDate()[he].apply(G.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ne)),G)},W=this.$W,J=this.$M,te=this.$D,ee="set"+(this.$u?"UTC":"");switch(D){case b:return H?R(1,0):R(31,11);case h:return H?R(1,J):R(0,J+1);case u:var ae=this.$locale().weekStart||0,ce=(W<ae?W+7:W)-ae;return R(H?te-ce:te+(6-ce),J);case m:case w:return $(ee+"Hours",0);case c:return $(ee+"Minutes",1);case l:return $(ee+"Seconds",2);case o:return $(ee+"Milliseconds",3);default:return this.clone()}},B.endOf=function(q){return this.startOf(q,!1)},B.$set=function(q,V){var G,H=z.p(q),D="set"+(this.$u?"UTC":""),R=(G={},G[m]=D+"Date",G[w]=D+"Date",G[h]=D+"Month",G[b]=D+"FullYear",G[c]=D+"Hours",G[l]=D+"Minutes",G[o]=D+"Seconds",G[i]=D+"Milliseconds",G)[H],$=H===m?this.$D+(V-this.$W):V;if(H===h||H===b){var W=this.clone().set(w,1);W.$d[R]($),W.init(),this.$d=W.set(w,Math.min(this.$D,W.daysInMonth())).$d}else R&&this.$d[R]($);return this.init(),this},B.set=function(q,V){return this.clone().$set(q,V)},B.get=function(q){return this[z.p(q)]()},B.add=function(q,V){var G,H=this;q=Number(q);var D=z.p(V),R=function(J){var te=F(H);return z.w(te.date(te.date()+Math.round(J*q)),H)};if(D===h)return this.set(h,this.$M+q);if(D===b)return this.set(b,this.$y+q);if(D===m)return R(1);if(D===u)return R(7);var $=(G={},G[l]=r,G[c]=n,G[o]=a,G)[D]||1,W=this.$d.getTime()+q*$;return z.w(W,this)},B.subtract=function(q,V){return this.add(-1*q,V)},B.format=function(q){var V=this,G=this.$locale();if(!this.isValid())return G.invalidDate||S;var H=q||"YYYY-MM-DDTHH:mm:ssZ",D=z.z(this),R=this.$H,$=this.$m,W=this.$M,J=G.weekdays,te=G.months,ee=G.meridiem,ae=function(ne,xe,ge,le){return ne&&(ne[xe]||ne(V,H))||ge[xe].slice(0,le)},ce=function(ne){return z.s(R%12||12,ne,"0")},he=ee||function(ne,xe,ge){var le=ne<12?"AM":"PM";return ge?le.toLowerCase():le};return H.replace(v,(function(ne,xe){return xe||(function(ge){switch(ge){case"YY":return String(V.$y).slice(-2);case"YYYY":return z.s(V.$y,4,"0");case"M":return W+1;case"MM":return z.s(W+1,2,"0");case"MMM":return ae(G.monthsShort,W,te,3);case"MMMM":return ae(te,W);case"D":return V.$D;case"DD":return z.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return ae(G.weekdaysMin,V.$W,J,2);case"ddd":return ae(G.weekdaysShort,V.$W,J,3);case"dddd":return J[V.$W];case"H":return String(R);case"HH":return z.s(R,2,"0");case"h":return ce(1);case"hh":return ce(2);case"a":return he(R,$,!0);case"A":return he(R,$,!1);case"m":return String($);case"mm":return z.s($,2,"0");case"s":return String(V.$s);case"ss":return z.s(V.$s,2,"0");case"SSS":return z.s(V.$ms,3,"0");case"Z":return D}return null})(ne)||D.replace(":","")}))},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(q,V,G){var H,D=this,R=z.p(V),$=F(q),W=($.utcOffset()-this.utcOffset())*r,J=this-$,te=function(){return z.m(D,$)};switch(R){case b:H=te()/12;break;case h:H=te();break;case f:H=te()/3;break;case u:H=(J-W)/6048e5;break;case m:H=(J-W)/864e5;break;case c:H=J/n;break;case l:H=J/r;break;case o:H=J/a;break;default:H=J}return G?H:z.a(H)},B.daysInMonth=function(){return this.endOf(h).$D},B.$locale=function(){return M[this.$L]},B.locale=function(q,V){if(!q)return this.$L;var G=this.clone(),H=L(q,V,!0);return H&&(G.$L=H),G},B.clone=function(){return z.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},Y})(),Q=I.prototype;return F.prototype=Q,[["$ms",i],["$s",o],["$m",l],["$H",c],["$W",m],["$M",h],["$y",b],["$D",w]].forEach((function(Y){Q[Y[1]]=function(B){return this.$g(B,Y[0],Y[1])}})),F.extend=function(Y,B){return Y.$i||(Y(B,I,F),Y.$i=!0),F},F.locale=L,F.isDayjs=A,F.unix=function(Y){return F(1e3*Y)},F.en=M[E],F.Ls=M,F.p={},F}))})(Ky)),Ky.exports}var hye=pye();const rr=Ji(hye),oe=({type:t="text",value:s,onChange:a,setValue:r,name:n,formik:i,size:o="small",onBlur:l,fullWidth:c=!0,slotProps:m,label:u,...h})=>{const[f,b]=vt.useState({[n||""]:!1}),w=g.useCallback(L=>{const F=L.target.value;i&&n?i.setFieldValue(n,F):r?r(F):a&&a(L)},[i,n,r,a]),S=g.useCallback(L=>{const F=L?L.format("YYYY-MM-DD"):"";i&&n?i.setFieldValue(n,F):r?r(F):a&&a({target:{value:F}})},[i,n,r,a]),j=g.useCallback(L=>{const F=L?L.format("HH:mm"):"";i&&n?i.setFieldValue(n,F):r&&r(F)},[i,n,r]),v=g.useCallback(()=>{const L={target:{name:n,id:n}};i?.handleBlur&&n?i.handleBlur(L):l&&l(L)},[i,n,l]),N=g.useCallback(L=>{const F=L?L.format("YYYY-MM-DDTHH:mm"):"";i&&n?i.setFieldValue(n,F):r&&r(F)},[i,n,r]),C=g.useMemo(()=>!i||!n?!1:i.touched?.[n]&&i.errors?.[n],[i?.touched?.[n],i?.errors?.[n],n]),P=typeof C=="string"?C:void 0,E=g.useMemo(()=>s!==void 0?s:i&&n?i.values[n]:"",[s,i?.values[n],n]),M=g.useMemo(()=>E&&rr(E).isValid()?rr(E):null,[E]),T=g.useMemo(()=>E&&typeof E=="string"&&E.includes(":")?rr(E,"HH:mm"):null,[E]);if(t==="year")return e.jsx(pT,{label:u,value:M,onChange:S,onClose:v,views:["year"],format:"YYYY",disabled:h.disabled,slotProps:{desktopPaper:{elevation:0,className:"!shadow-lg"},textField:{fullWidth:c,size:o,error:!!C,helperText:P,name:n,id:n,disabled:h.disabled,slotProps:{htmlInput:{required:!1}},InputLabelProps:{shrink:!0},className:h.className,...h}}});if(t==="date")return e.jsx(pT,{label:u,value:M,onChange:S,onClose:v,format:"DD/MM/YYYY",disabled:h.disabled,slotProps:{desktopPaper:{elevation:0,className:"!shadow-lg"},textField:{fullWidth:c,size:o,error:!!C,helperText:P,name:n,id:n,disabled:h.disabled,slotProps:{htmlInput:{required:!1}},InputLabelProps:{shrink:!0},className:h.className,...h}}});if(t==="time")return e.jsx(U0e,{label:u,value:T,onChange:j,onClose:v,disabled:h.disabled,slotProps:{textField:{fullWidth:c,size:o,error:!!C,helperText:P,name:n,id:n,disabled:h.disabled,slotProps:{htmlInput:{required:!1}},InputLabelProps:{shrink:!0},...h}}});if(t==="datetime-local")return e.jsx(uye,{label:u,value:M,onChange:N,onClose:v,disabled:h.disabled,slotProps:{textField:{fullWidth:c,size:o,error:!!C,helperText:P,name:n,id:n,disabled:h.disabled,slotProps:{htmlInput:{required:!1}},InputLabelProps:{shrink:!0},...h}}});const A=g.useCallback(L=>{i?.handleBlur&&i.handleBlur(L),l&&l(L)},[i,l]);return e.jsx(mr,{fullWidth:c,type:t!=="password"?t:f[n]?"text":"password",label:u,size:o,name:n,slotProps:{htmlInput:{required:!1},input:{...t==="search"&&{endAdornment:e.jsx(iA,{})},...t==="password"&&{endAdornment:e.jsx(ta,{size:"small",onClick:()=>b({[n||""]:!f[n]}),children:f[n]?e.jsx(Sle,{}):e.jsx(Sn,{})})}},...m},helperText:P,error:!!C,onBlur:A,value:E,onChange:w,...h})},Ie=(t,s)=>{if(!t)return null;const r={...{year:"numeric",month:"short",day:"numeric"},...s};try{return new Intl.DateTimeFormat("en-US",r).format(new Date(t))}catch{return console.warn("Invalid date string provided to formatDate:",t),null}},mp=t=>Ie(t,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Or=t=>{try{return t?(typeof t=="string"?new Date(t):t).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}catch{return console.warn("Invalid date provided to formatForDateInput:",t),new Date().toISOString().split("T")[0]}};var bN,xT;function fye(){if(xT)return bN;xT=1;function t(v){this._maxSize=v,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(v){return this._values[v]},t.prototype.set=function(v,N){return this._size>=this._maxSize&&this.clear(),v in this._values||this._size++,this._values[v]=N};var s=/[^.^\]^[]+|(?=\[\]|\.\.)/g,a=/^\d+$/,r=/^\d/,n=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,i=/^\s*(['"]?)(.*?)(\1)\s*$/,o=512,l=new t(o),c=new t(o),m=new t(o);bN={Cache:t,split:h,normalizePath:u,setter:function(v){var N=u(v);return c.get(v)||c.set(v,function(P,E){for(var M=0,T=N.length,A=P;M<T-1;){var L=N[M];if(L==="__proto__"||L==="constructor"||L==="prototype")return P;A=A[N[M++]]}A[N[M]]=E})},getter:function(v,N){var C=u(v);return m.get(v)||m.set(v,function(E){for(var M=0,T=C.length;M<T;)if(E!=null||!N)E=E[C[M++]];else return;return E})},join:function(v){return v.reduce(function(N,C){return N+(b(C)||a.test(C)?"["+C+"]":(N?".":"")+C)},"")},forEach:function(v,N,C){f(Array.isArray(v)?v:h(v),N,C)}};function u(v){return l.get(v)||l.set(v,h(v).map(function(N){return N.replace(i,"$2")}))}function h(v){return v.match(s)||[""]}function f(v,N,C){var P=v.length,E,M,T,A;for(M=0;M<P;M++)E=v[M],E&&(j(E)&&(E='"'+E+'"'),A=b(E),T=!A&&/^\d+$/.test(E),N.call(C,E,A,T,M,v))}function b(v){return typeof v=="string"&&v&&["'",'"'].indexOf(v.charAt(0))!==-1}function w(v){return v.match(r)&&!v.match(a)}function S(v){return n.test(v)}function j(v){return!b(v)&&(w(v)||S(v))}return bN}var eu=fye(),vN,gT;function xye(){if(gT)return vN;gT=1;const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,s=u=>u.match(t)||[],a=u=>u[0].toUpperCase()+u.slice(1),r=(u,h)=>s(u).join(h).toLowerCase(),n=u=>s(u).reduce((h,f)=>`${h}${h?f[0].toUpperCase()+f.slice(1).toLowerCase():f.toLowerCase()}`,"");return vN={words:s,upperFirst:a,camelCase:n,pascalCase:u=>a(n(u)),snakeCase:u=>r(u,"_"),kebabCase:u=>r(u,"-"),sentenceCase:u=>a(r(u," ")),titleCase:u=>s(u).map(a).join(" ")},vN}var jN=xye(),py={exports:{}},yT;function gye(){if(yT)return py.exports;yT=1,py.exports=function(n){return t(s(n),n)},py.exports.array=t;function t(n,i){var o=n.length,l=new Array(o),c={},m=o,u=a(i),h=r(n);for(i.forEach(function(b){if(!h.has(b[0])||!h.has(b[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});m--;)c[m]||f(n[m],m,new Set);return l;function f(b,w,S){if(S.has(b)){var j;try{j=", node was:"+JSON.stringify(b)}catch{j=""}throw new Error("Cyclic dependency"+j)}if(!h.has(b))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(b));if(!c[w]){c[w]=!0;var v=u.get(b)||new Set;if(v=Array.from(v),w=v.length){S.add(b);do{var N=v[--w];f(N,h.get(N),S)}while(w);S.delete(b)}l[--o]=b}}}function s(n){for(var i=new Set,o=0,l=n.length;o<l;o++){var c=n[o];i.add(c[0]),i.add(c[1])}return Array.from(i)}function a(n){for(var i=new Map,o=0,l=n.length;o<l;o++){var c=n[o];i.has(c[0])||i.set(c[0],new Set),i.has(c[1])||i.set(c[1],new Set),i.get(c[0]).add(c[1])}return i}function r(n){for(var i=new Map,o=0,l=n.length;o<l;o++)i.set(n[o],o);return i}return py.exports}var yye=gye();const bye=Ji(yye),vye=Object.prototype.toString,jye=Error.prototype.toString,Nye=RegExp.prototype.toString,wye=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",_ye=/^Symbol\((.*)\)(.*)$/;function Sye(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function bT(t,s=!1){if(t==null||t===!0||t===!1)return""+t;const a=typeof t;if(a==="number")return Sye(t);if(a==="string")return s?`"${t}"`:t;if(a==="function")return"[Function "+(t.name||"anonymous")+"]";if(a==="symbol")return wye.call(t).replace(_ye,"Symbol($1)");const r=vye.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+jye.call(t)+"]":r==="RegExp"?Nye.call(t):null}function Ul(t,s){let a=bT(t,s);return a!==null?a:JSON.stringify(t,function(r,n){let i=bT(this[r],s);return i!==null?i:n},2)}function lO(t){return t==null?[]:[].concat(t)}let cO,dO,uO,Cye=/\$\{\s*(\w+)\s*\}/g;cO=Symbol.toStringTag;class vT{constructor(s,a,r,n){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[cO]="Error",this.name="ValidationError",this.value=a,this.path=r,this.type=n,this.errors=[],this.inner=[],lO(s).forEach(i=>{if(bn.isError(i)){this.errors.push(...i.errors);const o=i.inner.length?i.inner:[i];this.inner.push(...o)}else this.errors.push(i)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}dO=Symbol.hasInstance;uO=Symbol.toStringTag;class bn extends Error{static formatError(s,a){const r=a.label||a.path||"this";return a=Object.assign({},a,{path:r,originalPath:a.path}),typeof s=="string"?s.replace(Cye,(n,i)=>Ul(a[i])):typeof s=="function"?s(a):s}static isError(s){return s&&s.name==="ValidationError"}constructor(s,a,r,n,i){const o=new vT(s,a,r,n);if(i)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[uO]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,bn)}static[dO](s){return vT[Symbol.hasInstance](s)||super[Symbol.hasInstance](s)}}let Ro={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:s,value:a,originalValue:r})=>{const n=r!=null&&r!==a?` (cast from the value \`${Ul(r,!0)}\`).`:".";return s!=="mixed"?`${t} must be a \`${s}\` type, but the final value was: \`${Ul(a,!0)}\``+n:`${t} must match the configured type. The validated value was: \`${Ul(a,!0)}\``+n}},Mn={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Sc={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},h_={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},f_={isValue:"${path} field must be ${value}"},Qy={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},Zy={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Pye={notType:t=>{const{path:s,value:a,spec:r}=t,n=r.types.length;if(Array.isArray(a)){if(a.length<n)return`${s} tuple value has too few items, expected a length of ${n} but got ${a.length} for value: \`${Ul(a,!0)}\``;if(a.length>n)return`${s} tuple value has too many items, expected a length of ${n} but got ${a.length} for value: \`${Ul(a,!0)}\``}return bn.formatError(Ro.notType,t)}};Object.assign(Object.create(null),{mixed:Ro,string:Mn,number:Sc,date:h_,object:Qy,array:Zy,boolean:f_,tuple:Pye});const Gv=t=>t&&t.__isYupSchema__;class Eb{static fromOptions(s,a){if(!a.then&&!a.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:n,otherwise:i}=a,o=typeof r=="function"?r:(...l)=>l.every(c=>c===r);return new Eb(s,(l,c)=>{var m;let u=o(...l)?n:i;return(m=u?.(c))!=null?m:c})}constructor(s,a){this.fn=void 0,this.refs=s,this.refs=s,this.fn=a}resolve(s,a){let r=this.refs.map(i=>i.getValue(a?.value,a?.parent,a?.context)),n=this.fn(r,s,a);if(n===void 0||n===s)return s;if(!Gv(n))throw new TypeError("conditions must return a schema object");return n.resolve(a)}}const hy={context:"$",value:"."};function x_(t,s){return new nd(t,s)}class nd{constructor(s,a={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof s!="string")throw new TypeError("ref must be a string, got: "+s);if(this.key=s.trim(),s==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===hy.context,this.isValue=this.key[0]===hy.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?hy.context:this.isValue?hy.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&eu.getter(this.path,!0),this.map=a.map}getValue(s,a,r){let n=this.isContext?r:this.isValue?s:a;return this.getter&&(n=this.getter(n||{})),this.map&&(n=this.map(n)),n}cast(s,a){return this.getValue(s,a?.parent,a?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(s){return s&&s.__isYupRef}}nd.prototype.__isYupRef=!0;const po=t=>t==null;function hm(t){function s({value:a,path:r="",options:n,originalValue:i,schema:o},l,c){const{name:m,test:u,params:h,message:f,skipAbsent:b}=t;let{parent:w,context:S,abortEarly:j=o.spec.abortEarly,disableStackTrace:v=o.spec.disableStackTrace}=n;const N={value:a,parent:w,context:S};function C(z={}){const I=mO(Object.assign({value:a,originalValue:i,label:o.spec.label,path:z.path||r,spec:o.spec,disableStackTrace:z.disableStackTrace||v},h,z.params),N),Q=new bn(bn.formatError(z.message||f,I),a,I.path,z.type||m,I.disableStackTrace);return Q.params=I,Q}const P=j?l:c;let E={path:r,parent:w,type:m,from:n.from,createError:C,resolve(z){return pO(z,N)},options:n,originalValue:i,schema:o};const M=z=>{bn.isError(z)?P(z):z?c(null):P(C())},T=z=>{bn.isError(z)?P(z):l(z)};if(b&&po(a))return M(!0);let L;try{var F;if(L=u.call(E,a,E),typeof((F=L)==null?void 0:F.then)=="function"){if(n.sync)throw new Error(`Validation test of type: "${E.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(L).then(M,T)}}catch(z){T(z);return}M(L)}return s.OPTIONS=t,s}function mO(t,s){if(!t)return t;for(const a of Object.keys(t))t[a]=pO(t[a],s);return t}function pO(t,s){return nd.isRef(t)?t.getValue(s.value,s.parent,s.context):t}function kye(t,s,a,r=a){let n,i,o;return s?(eu.forEach(s,(l,c,m)=>{let u=c?l.slice(1,l.length-1):l;t=t.resolve({context:r,parent:n,value:a});let h=t.type==="tuple",f=m?parseInt(u,10):0;if(t.innerType||h){if(h&&!m)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(a&&f>=a.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${s}. because there is no value at that index. `);n=a,a=a&&a[f],t=h?t.spec.types[f]:t.innerType}if(!m){if(!t.fields||!t.fields[u])throw new Error(`The schema does not contain the path: ${s}. (failed at: ${o} which is a type: "${t.type}")`);n=a,a=a&&a[u],t=t.fields[u]}i=u,o=c?"["+l+"]":"."+l}),{schema:t,parent:n,parentPath:i}):{parent:n,parentPath:s,schema:t}}class Tb extends Set{describe(){const s=[];for(const a of this.values())s.push(nd.isRef(a)?a.describe():a);return s}resolveAll(s){let a=[];for(const r of this.values())a.push(s(r));return a}clone(){return new Tb(this.values())}merge(s,a){const r=this.clone();return s.forEach(n=>r.add(n)),a.forEach(n=>r.delete(n)),r}}function km(t,s=new Map){if(Gv(t)||!t||typeof t!="object")return t;if(s.has(t))return s.get(t);let a;if(t instanceof Date)a=new Date(t.getTime()),s.set(t,a);else if(t instanceof RegExp)a=new RegExp(t),s.set(t,a);else if(Array.isArray(t)){a=new Array(t.length),s.set(t,a);for(let r=0;r<t.length;r++)a[r]=km(t[r],s)}else if(t instanceof Map){a=new Map,s.set(t,a);for(const[r,n]of t.entries())a.set(r,km(n,s))}else if(t instanceof Set){a=new Set,s.set(t,a);for(const r of t)a.add(km(r,s))}else if(t instanceof Object){a={},s.set(t,a);for(const[r,n]of Object.entries(t))a[r]=km(n,s)}else throw Error(`Unable to clone ${t}`);return a}function Eye(t){if(!(t!=null&&t.length))return;const s=[];let a="",r=!1,n=!1;for(let i=0;i<t.length;i++){const o=t[i];if(o==="["&&!n){a&&(s.push(...a.split(".").filter(Boolean)),a=""),r=!0;continue}if(o==="]"&&!n){a&&(/^\d+$/.test(a)?s.push(a):s.push(a.replace(/^"|"$/g,"")),a=""),r=!1;continue}if(o==='"'){n=!n;continue}if(o==="."&&!r&&!n){a&&(s.push(a),a="");continue}a+=o}return a&&s.push(...a.split(".").filter(Boolean)),s}function Tye(t,s){const a=s?`${s}.${t.path}`:t.path;return t.errors.map(r=>({message:r,path:Eye(a)}))}function hO(t,s){var a;if(!((a=t.inner)!=null&&a.length)&&t.errors.length)return Tye(t,s);const r=s?`${s}.${t.path}`:t.path;return t.inner.flatMap(n=>hO(n,r))}class Vn{constructor(s){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Tb,this._blacklist=new Tb,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Ro.notType)}),this.type=s.type,this._typeCheck=s.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},s?.spec),this.withMutation(a=>{a.nonNullable()})}get _type(){return this.type}clone(s){if(this._mutate)return s&&Object.assign(this.spec,s),this;const a=Object.create(Object.getPrototypeOf(this));return a.type=this.type,a._typeCheck=this._typeCheck,a._whitelist=this._whitelist.clone(),a._blacklist=this._blacklist.clone(),a.internalTests=Object.assign({},this.internalTests),a.exclusiveTests=Object.assign({},this.exclusiveTests),a.deps=[...this.deps],a.conditions=[...this.conditions],a.tests=[...this.tests],a.transforms=[...this.transforms],a.spec=km(Object.assign({},this.spec,s)),a}label(s){let a=this.clone();return a.spec.label=s,a}meta(...s){if(s.length===0)return this.spec.meta;let a=this.clone();return a.spec.meta=Object.assign(a.spec.meta||{},s[0]),a}withMutation(s){let a=this._mutate;this._mutate=!0;let r=s(this);return this._mutate=a,r}concat(s){if(!s||s===this)return this;if(s.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${s.type}`);let a=this,r=s.clone();const n=Object.assign({},a.spec,r.spec);return r.spec=n,r.internalTests=Object.assign({},a.internalTests,r.internalTests),r._whitelist=a._whitelist.merge(s._whitelist,s._blacklist),r._blacklist=a._blacklist.merge(s._blacklist,s._whitelist),r.tests=a.tests,r.exclusiveTests=a.exclusiveTests,r.withMutation(i=>{s.tests.forEach(o=>{i.test(o.OPTIONS)})}),r.transforms=[...a.transforms,...r.transforms],r}isType(s){return s==null?!!(this.spec.nullable&&s===null||this.spec.optional&&s===void 0):this._typeCheck(s)}resolve(s){let a=this;if(a.conditions.length){let r=a.conditions;a=a.clone(),a.conditions=[],a=r.reduce((n,i)=>i.resolve(n,s),a),a=a.resolve(s)}return a}resolveOptions(s){var a,r,n,i;return Object.assign({},s,{from:s.from||[],strict:(a=s.strict)!=null?a:this.spec.strict,abortEarly:(r=s.abortEarly)!=null?r:this.spec.abortEarly,recursive:(n=s.recursive)!=null?n:this.spec.recursive,disableStackTrace:(i=s.disableStackTrace)!=null?i:this.spec.disableStackTrace})}cast(s,a={}){let r=this.resolve(Object.assign({},a,{value:s})),n=a.assert==="ignore-optionality",i=r._cast(s,a);if(a.assert!==!1&&!r.isType(i)){if(n&&po(i))return i;let o=Ul(s),l=Ul(i);throw new TypeError(`The value of ${a.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(l!==o?`result of cast: ${l}`:""))}return i}_cast(s,a){let r=s===void 0?s:this.transforms.reduce((n,i)=>i.call(this,n,s,this,a),s);return r===void 0&&(r=this.getDefault(a)),r}_validate(s,a={},r,n){let{path:i,originalValue:o=s,strict:l=this.spec.strict}=a,c=s;l||(c=this._cast(c,Object.assign({assert:!1},a)));let m=[];for(let u of Object.values(this.internalTests))u&&m.push(u);this.runTests({path:i,value:c,originalValue:o,options:a,tests:m},r,u=>{if(u.length)return n(u,c);this.runTests({path:i,value:c,originalValue:o,options:a,tests:this.tests},r,n)})}runTests(s,a,r){let n=!1,{tests:i,value:o,originalValue:l,path:c,options:m}=s,u=S=>{n||(n=!0,a(S,o))},h=S=>{n||(n=!0,r(S,o))},f=i.length,b=[];if(!f)return h([]);let w={value:o,originalValue:l,path:c,options:m,schema:this};for(let S=0;S<i.length;S++){const j=i[S];j(w,u,function(N){N&&(Array.isArray(N)?b.push(...N):b.push(N)),--f<=0&&h(b)})}}asNestedTest({key:s,index:a,parent:r,parentPath:n,originalParent:i,options:o}){const l=s??a;if(l==null)throw TypeError("Must include `key` or `index` for nested validations");const c=typeof l=="number";let m=r[l];const u=Object.assign({},o,{strict:!0,parent:r,value:m,originalValue:i[l],key:void 0,[c?"index":"key"]:l,path:c||l.includes(".")?`${n||""}[${c?l:`"${l}"`}]`:(n?`${n}.`:"")+s});return(h,f,b)=>this.resolve(u)._validate(m,u,f,b)}validate(s,a){var r;let n=this.resolve(Object.assign({},a,{value:s})),i=(r=a?.disableStackTrace)!=null?r:n.spec.disableStackTrace;return new Promise((o,l)=>n._validate(s,a,(c,m)=>{bn.isError(c)&&(c.value=m),l(c)},(c,m)=>{c.length?l(new bn(c,m,void 0,void 0,i)):o(m)}))}validateSync(s,a){var r;let n=this.resolve(Object.assign({},a,{value:s})),i,o=(r=a?.disableStackTrace)!=null?r:n.spec.disableStackTrace;return n._validate(s,Object.assign({},a,{sync:!0}),(l,c)=>{throw bn.isError(l)&&(l.value=c),l},(l,c)=>{if(l.length)throw new bn(l,s,void 0,void 0,o);i=c}),i}isValid(s,a){return this.validate(s,a).then(()=>!0,r=>{if(bn.isError(r))return!1;throw r})}isValidSync(s,a){try{return this.validateSync(s,a),!0}catch(r){if(bn.isError(r))return!1;throw r}}_getDefault(s){let a=this.spec.default;return a==null?a:typeof a=="function"?a.call(this,s):km(a)}getDefault(s){return this.resolve(s||{})._getDefault(s)}default(s){return arguments.length===0?this._getDefault():this.clone({default:s})}strict(s=!0){return this.clone({strict:s})}nullability(s,a){const r=this.clone({nullable:s});return r.internalTests.nullable=hm({message:a,name:"nullable",test(n){return n===null?this.schema.spec.nullable:!0}}),r}optionality(s,a){const r=this.clone({optional:s});return r.internalTests.optionality=hm({message:a,name:"optionality",test(n){return n===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(s=Ro.defined){return this.optionality(!1,s)}nullable(){return this.nullability(!0)}nonNullable(s=Ro.notNull){return this.nullability(!1,s)}required(s=Ro.required){return this.clone().withMutation(a=>a.nonNullable(s).defined(s))}notRequired(){return this.clone().withMutation(s=>s.nullable().optional())}transform(s){let a=this.clone();return a.transforms.push(s),a}test(...s){let a;if(s.length===1?typeof s[0]=="function"?a={test:s[0]}:a=s[0]:s.length===2?a={name:s[0],test:s[1]}:a={name:s[0],message:s[1],test:s[2]},a.message===void 0&&(a.message=Ro.default),typeof a.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),n=hm(a),i=a.exclusive||a.name&&r.exclusiveTests[a.name]===!0;if(a.exclusive&&!a.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return a.name&&(r.exclusiveTests[a.name]=!!a.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===a.name&&(i||o.OPTIONS.test===n.OPTIONS.test))),r.tests.push(n),r}when(s,a){!Array.isArray(s)&&typeof s!="string"&&(a=s,s=".");let r=this.clone(),n=lO(s).map(i=>new nd(i));return n.forEach(i=>{i.isSibling&&r.deps.push(i.key)}),r.conditions.push(typeof a=="function"?new Eb(n,a):Eb.fromOptions(n,a)),r}typeError(s){let a=this.clone();return a.internalTests.typeError=hm({message:s,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),a}oneOf(s,a=Ro.oneOf){let r=this.clone();return s.forEach(n=>{r._whitelist.add(n),r._blacklist.delete(n)}),r.internalTests.whiteList=hm({message:a,name:"oneOf",skipAbsent:!0,test(n){let i=this.schema._whitelist,o=i.resolveAll(this.resolve);return o.includes(n)?!0:this.createError({params:{values:Array.from(i).join(", "),resolved:o}})}}),r}notOneOf(s,a=Ro.notOneOf){let r=this.clone();return s.forEach(n=>{r._blacklist.add(n),r._whitelist.delete(n)}),r.internalTests.blacklist=hm({message:a,name:"notOneOf",test(n){let i=this.schema._blacklist,o=i.resolveAll(this.resolve);return o.includes(n)?this.createError({params:{values:Array.from(i).join(", "),resolved:o}}):!0}}),r}strip(s=!0){let a=this.clone();return a.spec.strip=s,a}describe(s){const a=(s?this.resolve(s):this).clone(),{label:r,meta:n,optional:i,nullable:o}=a.spec;return{meta:n,label:r,optional:i,nullable:o,default:a.getDefault(s),type:a.type,oneOf:a._whitelist.describe(),notOneOf:a._blacklist.describe(),tests:a.tests.filter((c,m,u)=>u.findIndex(h=>h.OPTIONS.name===c.OPTIONS.name)===m).map(c=>{const m=c.OPTIONS.params&&s?mO(Object.assign({},c.OPTIONS.params),s):c.OPTIONS.params;return{name:c.OPTIONS.name,params:m}})}}get"~standard"(){const s=this;return{version:1,vendor:"yup",async validate(r){try{return{value:await s.validate(r,{abortEarly:!1})}}catch(n){if(n instanceof bn)return{issues:hO(n)};throw n}}}}}Vn.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])Vn.prototype[`${t}At`]=function(s,a,r={}){const{parent:n,parentPath:i,schema:o}=kye(this,s,a,r.context);return o[t](n&&n[i],Object.assign({},r,{parent:n,path:s}))};for(const t of["equals","is"])Vn.prototype[t]=Vn.prototype.oneOf;for(const t of["not","nope"])Vn.prototype[t]=Vn.prototype.notOneOf;const Mye=()=>!0;function hs(t){return new fO(t)}class fO extends Vn{constructor(s){super(typeof s=="function"?{type:"mixed",check:s}:Object.assign({type:"mixed",check:Mye},s))}}hs.prototype=fO.prototype;function xO(){return new gO}class gO extends Vn{constructor(){super({type:"boolean",check(s){return s instanceof Boolean&&(s=s.valueOf()),typeof s=="boolean"}}),this.withMutation(()=>{this.transform((s,a)=>{if(this.spec.coerce&&!this.isType(s)){if(/^(true|1)$/i.test(String(s)))return!0;if(/^(false|0)$/i.test(String(s)))return!1}return s})})}isTrue(s=f_.isValue){return this.test({message:s,name:"is-value",exclusive:!0,params:{value:"true"},test(a){return po(a)||a===!0}})}isFalse(s=f_.isValue){return this.test({message:s,name:"is-value",exclusive:!0,params:{value:"false"},test(a){return po(a)||a===!1}})}default(s){return super.default(s)}defined(s){return super.defined(s)}optional(){return super.optional()}required(s){return super.required(s)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(s){return super.nonNullable(s)}strip(s){return super.strip(s)}}xO.prototype=gO.prototype;const Dye=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Rye(t){const s=g_(t);if(!s)return Date.parse?Date.parse(t):Number.NaN;if(s.z===void 0&&s.plusMinus===void 0)return new Date(s.year,s.month,s.day,s.hour,s.minute,s.second,s.millisecond).valueOf();let a=0;return s.z!=="Z"&&s.plusMinus!==void 0&&(a=s.hourOffset*60+s.minuteOffset,s.plusMinus==="+"&&(a=0-a)),Date.UTC(s.year,s.month,s.day,s.hour,s.minute+a,s.second,s.millisecond)}function g_(t){var s,a;const r=Dye.exec(t);return r?{year:wl(r[1]),month:wl(r[2],1)-1,day:wl(r[3],1),hour:wl(r[4]),minute:wl(r[5]),second:wl(r[6]),millisecond:r[7]?wl(r[7].substring(0,3)):0,precision:(s=(a=r[7])==null?void 0:a.length)!=null?s:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:wl(r[10]),minuteOffset:wl(r[11])}:null}function wl(t,s=0){return Number(t)||s}let Aye=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Iye=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Oye=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Fye="^\\d{4}-\\d{2}-\\d{2}",Lye="\\d{2}:\\d{2}:\\d{2}",$ye="(([+-]\\d{2}(:?\\d{2})?)|Z)",zye=new RegExp(`${Fye}T${Lye}(\\.\\d+)?${$ye}$`),qye=t=>po(t)||t===t.trim(),Bye={}.toString();function me(){return new yO}class yO extends Vn{constructor(){super({type:"string",check(s){return s instanceof String&&(s=s.valueOf()),typeof s=="string"}}),this.withMutation(()=>{this.transform((s,a)=>{if(!this.spec.coerce||this.isType(s)||Array.isArray(s))return s;const r=s!=null&&s.toString?s.toString():s;return r===Bye?s:r})})}required(s){return super.required(s).withMutation(a=>a.test({message:s||Ro.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(s=>(s.tests=s.tests.filter(a=>a.OPTIONS.name!=="required"),s))}length(s,a=Mn.length){return this.test({message:a,name:"length",exclusive:!0,params:{length:s},skipAbsent:!0,test(r){return r.length===this.resolve(s)}})}min(s,a=Mn.min){return this.test({message:a,name:"min",exclusive:!0,params:{min:s},skipAbsent:!0,test(r){return r.length>=this.resolve(s)}})}max(s,a=Mn.max){return this.test({name:"max",exclusive:!0,message:a,params:{max:s},skipAbsent:!0,test(r){return r.length<=this.resolve(s)}})}matches(s,a){let r=!1,n,i;return a&&(typeof a=="object"?{excludeEmptyString:r=!1,message:n,name:i}=a:n=a),this.test({name:i||"matches",message:n||Mn.matches,params:{regex:s},skipAbsent:!0,test:o=>o===""&&r||o.search(s)!==-1})}email(s=Mn.email){return this.matches(Aye,{name:"email",message:s,excludeEmptyString:!0})}url(s=Mn.url){return this.matches(Iye,{name:"url",message:s,excludeEmptyString:!0})}uuid(s=Mn.uuid){return this.matches(Oye,{name:"uuid",message:s,excludeEmptyString:!1})}datetime(s){let a="",r,n;return s&&(typeof s=="object"?{message:a="",allowOffset:r=!1,precision:n=void 0}=s:a=s),this.matches(zye,{name:"datetime",message:a||Mn.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:a||Mn.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:i=>{if(!i||r)return!0;const o=g_(i);return o?!!o.z:!1}}).test({name:"datetime_precision",message:a||Mn.datetime_precision,params:{precision:n},skipAbsent:!0,test:i=>{if(!i||n==null)return!0;const o=g_(i);return o?o.precision===n:!1}})}ensure(){return this.default("").transform(s=>s===null?"":s)}trim(s=Mn.trim){return this.transform(a=>a!=null?a.trim():a).test({message:s,name:"trim",test:qye})}lowercase(s=Mn.lowercase){return this.transform(a=>po(a)?a:a.toLowerCase()).test({message:s,name:"string_case",exclusive:!0,skipAbsent:!0,test:a=>po(a)||a===a.toLowerCase()})}uppercase(s=Mn.uppercase){return this.transform(a=>po(a)?a:a.toUpperCase()).test({message:s,name:"string_case",exclusive:!0,skipAbsent:!0,test:a=>po(a)||a===a.toUpperCase()})}}me.prototype=yO.prototype;let Uye=t=>t!=+t;function Ge(){return new bO}class bO extends Vn{constructor(){super({type:"number",check(s){return s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&!Uye(s)}}),this.withMutation(()=>{this.transform((s,a)=>{if(!this.spec.coerce)return s;let r=s;if(typeof r=="string"){if(r=r.replace(/\s/g,""),r==="")return NaN;r=+r}return this.isType(r)||r===null?r:parseFloat(r)})})}min(s,a=Sc.min){return this.test({message:a,name:"min",exclusive:!0,params:{min:s},skipAbsent:!0,test(r){return r>=this.resolve(s)}})}max(s,a=Sc.max){return this.test({message:a,name:"max",exclusive:!0,params:{max:s},skipAbsent:!0,test(r){return r<=this.resolve(s)}})}lessThan(s,a=Sc.lessThan){return this.test({message:a,name:"max",exclusive:!0,params:{less:s},skipAbsent:!0,test(r){return r<this.resolve(s)}})}moreThan(s,a=Sc.moreThan){return this.test({message:a,name:"min",exclusive:!0,params:{more:s},skipAbsent:!0,test(r){return r>this.resolve(s)}})}positive(s=Sc.positive){return this.moreThan(0,s)}negative(s=Sc.negative){return this.lessThan(0,s)}integer(s=Sc.integer){return this.test({name:"integer",message:s,skipAbsent:!0,test:a=>Number.isInteger(a)})}truncate(){return this.transform(s=>po(s)?s:s|0)}round(s){var a;let r=["ceil","floor","round","trunc"];if(s=((a=s)==null?void 0:a.toLowerCase())||"round",s==="trunc")return this.truncate();if(r.indexOf(s.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(n=>po(n)?n:Math[s](n))}}Ge.prototype=bO.prototype;let vO=new Date(""),Vye=t=>Object.prototype.toString.call(t)==="[object Date]";function Ca(){return new Pg}class Pg extends Vn{constructor(){super({type:"date",check(s){return Vye(s)&&!isNaN(s.getTime())}}),this.withMutation(()=>{this.transform((s,a)=>!this.spec.coerce||this.isType(s)||s===null?s:(s=Rye(s),isNaN(s)?Pg.INVALID_DATE:new Date(s)))})}prepareParam(s,a){let r;if(nd.isRef(s))r=s;else{let n=this.cast(s);if(!this._typeCheck(n))throw new TypeError(`\`${a}\` must be a Date or a value that can be \`cast()\` to a Date`);r=n}return r}min(s,a=h_.min){let r=this.prepareParam(s,"min");return this.test({message:a,name:"min",exclusive:!0,params:{min:s},skipAbsent:!0,test(n){return n>=this.resolve(r)}})}max(s,a=h_.max){let r=this.prepareParam(s,"max");return this.test({message:a,name:"max",exclusive:!0,params:{max:s},skipAbsent:!0,test(n){return n<=this.resolve(r)}})}}Pg.INVALID_DATE=vO;Ca.prototype=Pg.prototype;Ca.INVALID_DATE=vO;function Hye(t,s=[]){let a=[],r=new Set,n=new Set(s.map(([o,l])=>`${o}-${l}`));function i(o,l){let c=eu.split(o)[0];r.add(c),n.has(`${l}-${c}`)||a.push([l,c])}for(const o of Object.keys(t)){let l=t[o];r.add(o),nd.isRef(l)&&l.isSibling?i(l.path,o):Gv(l)&&"deps"in l&&l.deps.forEach(c=>i(c,o))}return bye.array(Array.from(r),a).reverse()}function jT(t,s){let a=1/0;return t.some((r,n)=>{var i;if((i=s.path)!=null&&i.includes(r))return a=n,!0}),a}function jO(t){return(s,a)=>jT(t,s)-jT(t,a)}const NO=(t,s,a)=>{if(typeof t!="string")return t;let r=t;try{r=JSON.parse(t)}catch{}return a.isType(r)?r:t};function Xy(t){if("fields"in t){const s={};for(const[a,r]of Object.entries(t.fields))s[a]=Xy(r);return t.setFields(s)}if(t.type==="array"){const s=t.optional();return s.innerType&&(s.innerType=Xy(s.innerType)),s}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(Xy)}):"optional"in t?t.optional():t}const Wye=(t,s)=>{const a=[...eu.normalizePath(s)];if(a.length===1)return a[0]in t;let r=a.pop(),n=eu.getter(eu.join(a),!0)(t);return!!(n&&r in n)};let NT=t=>Object.prototype.toString.call(t)==="[object Object]";function wT(t,s){let a=Object.keys(t.fields);return Object.keys(s).filter(r=>a.indexOf(r)===-1)}const Yye=jO([]);function nt(t){return new wO(t)}class wO extends Vn{constructor(s){super({type:"object",check(a){return NT(a)||typeof a=="function"}}),this.fields=Object.create(null),this._sortErrors=Yye,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{s&&this.shape(s)})}_cast(s,a={}){var r;let n=super._cast(s,a);if(n===void 0)return this.getDefault(a);if(!this._typeCheck(n))return n;let i=this.fields,o=(r=a.stripUnknown)!=null?r:this.spec.noUnknown,l=[].concat(this._nodes,Object.keys(n).filter(h=>!this._nodes.includes(h))),c={},m=Object.assign({},a,{parent:c,__validating:a.__validating||!1}),u=!1;for(const h of l){let f=i[h],b=h in n,w=n[h];if(f){let S;m.path=(a.path?`${a.path}.`:"")+h,f=f.resolve({value:w,context:a.context,parent:c});let j=f instanceof Vn?f.spec:void 0,v=j?.strict;if(j!=null&&j.strip){u=u||h in n;continue}S=!a.__validating||!v?f.cast(w,m):w,S!==void 0&&(c[h]=S)}else b&&!o&&(c[h]=w);(b!==h in c||c[h]!==w)&&(u=!0)}return u?c:n}_validate(s,a={},r,n){let{from:i=[],originalValue:o=s,recursive:l=this.spec.recursive}=a;a.from=[{schema:this,value:o},...i],a.__validating=!0,a.originalValue=o,super._validate(s,a,r,(c,m)=>{if(!l||!NT(m)){n(c,m);return}o=o||m;let u=[];for(let h of this._nodes){let f=this.fields[h];!f||nd.isRef(f)||u.push(f.asNestedTest({options:a,key:h,parent:m,parentPath:a.path,originalParent:o}))}this.runTests({tests:u,value:m,originalValue:o,options:a},r,h=>{n(h.sort(this._sortErrors).concat(c),m)})})}clone(s){const a=super.clone(s);return a.fields=Object.assign({},this.fields),a._nodes=this._nodes,a._excludedEdges=this._excludedEdges,a._sortErrors=this._sortErrors,a}concat(s){let a=super.concat(s),r=a.fields;for(let[n,i]of Object.entries(this.fields)){const o=r[n];r[n]=o===void 0?i:o}return a.withMutation(n=>n.setFields(r,[...this._excludedEdges,...s._excludedEdges]))}_getDefault(s){if("default"in this.spec)return super._getDefault(s);if(!this._nodes.length)return;let a={};return this._nodes.forEach(r=>{var n;const i=this.fields[r];let o=s;(n=o)!=null&&n.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),a[r]=i&&"getDefault"in i?i.getDefault(o):void 0}),a}setFields(s,a){let r=this.clone();return r.fields=s,r._nodes=Hye(s,a),r._sortErrors=jO(Object.keys(s)),a&&(r._excludedEdges=a),r}shape(s,a=[]){return this.clone().withMutation(r=>{let n=r._excludedEdges;return a.length&&(Array.isArray(a[0])||(a=[a]),n=[...r._excludedEdges,...a]),r.setFields(Object.assign(r.fields,s),n)})}partial(){const s={};for(const[a,r]of Object.entries(this.fields))s[a]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(s)}deepPartial(){return Xy(this)}pick(s){const a={};for(const r of s)this.fields[r]&&(a[r]=this.fields[r]);return this.setFields(a,this._excludedEdges.filter(([r,n])=>s.includes(r)&&s.includes(n)))}omit(s){const a=[];for(const r of Object.keys(this.fields))s.includes(r)||a.push(r);return this.pick(a)}from(s,a,r){let n=eu.getter(s,!0);return this.transform(i=>{if(!i)return i;let o=i;return Wye(i,s)&&(o=Object.assign({},i),r||delete o[s],o[a]=n(i)),o})}json(){return this.transform(NO)}exact(s){return this.test({name:"exact",exclusive:!0,message:s||Qy.exact,test(a){if(a==null)return!0;const r=wT(this.schema,a);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(s=!0,a=Qy.noUnknown){typeof s!="boolean"&&(a=s,s=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:a,test(n){if(n==null)return!0;const i=wT(this.schema,n);return!s||i.length===0||this.createError({params:{unknown:i.join(", ")}})}});return r.spec.noUnknown=s,r}unknown(s=!0,a=Qy.noUnknown){return this.noUnknown(!s,a)}transformKeys(s){return this.transform(a=>{if(!a)return a;const r={};for(const n of Object.keys(a))r[s(n)]=a[n];return r})}camelCase(){return this.transformKeys(jN.camelCase)}snakeCase(){return this.transformKeys(jN.snakeCase)}constantCase(){return this.transformKeys(s=>jN.snakeCase(s).toUpperCase())}describe(s){const a=(s?this.resolve(s):this).clone(),r=super.describe(s);r.fields={};for(const[i,o]of Object.entries(a.fields)){var n;let l=s;(n=l)!=null&&n.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[i]})),r.fields[i]=o.describe(l)}return r}}nt.prototype=wO.prototype;function il(t){return new _O(t)}class _O extends Vn{constructor(s){super({type:"array",spec:{types:s},check(a){return Array.isArray(a)}}),this.innerType=void 0,this.innerType=s}_cast(s,a){const r=super._cast(s,a);if(!this._typeCheck(r)||!this.innerType)return r;let n=!1;const i=r.map((o,l)=>{const c=this.innerType.cast(o,Object.assign({},a,{path:`${a.path||""}[${l}]`,parent:r,originalValue:o,value:o,index:l}));return c!==o&&(n=!0),c});return n?i:r}_validate(s,a={},r,n){var i;let o=this.innerType,l=(i=a.recursive)!=null?i:this.spec.recursive;a.originalValue!=null&&a.originalValue,super._validate(s,a,r,(c,m)=>{var u;if(!l||!o||!this._typeCheck(m)){n(c,m);return}let h=new Array(m.length);for(let b=0;b<m.length;b++){var f;h[b]=o.asNestedTest({options:a,index:b,parent:m,parentPath:a.path,originalParent:(f=a.originalValue)!=null?f:s})}this.runTests({value:m,tests:h,originalValue:(u=a.originalValue)!=null?u:s,options:a},r,b=>n(b.concat(c),m))})}clone(s){const a=super.clone(s);return a.innerType=this.innerType,a}json(){return this.transform(NO)}concat(s){let a=super.concat(s);return a.innerType=this.innerType,s.innerType&&(a.innerType=a.innerType?a.innerType.concat(s.innerType):s.innerType),a}of(s){let a=this.clone();if(!Gv(s))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Ul(s));return a.innerType=s,a.spec=Object.assign({},a.spec,{types:s}),a}length(s,a=Zy.length){return this.test({message:a,name:"length",exclusive:!0,params:{length:s},skipAbsent:!0,test(r){return r.length===this.resolve(s)}})}min(s,a){return a=a||Zy.min,this.test({message:a,name:"min",exclusive:!0,params:{min:s},skipAbsent:!0,test(r){return r.length>=this.resolve(s)}})}max(s,a){return a=a||Zy.max,this.test({message:a,name:"max",exclusive:!0,params:{max:s},skipAbsent:!0,test(r){return r.length<=this.resolve(s)}})}ensure(){return this.default(()=>[]).transform((s,a)=>this._typeCheck(s)?s:a==null?[]:[].concat(a))}compact(s){let a=s?(r,n,i)=>!s(r,n,i):r=>!!r;return this.transform(r=>r!=null?r.filter(a):r)}describe(s){const a=(s?this.resolve(s):this).clone(),r=super.describe(s);if(a.innerType){var n;let i=s;(n=i)!=null&&n.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),r.innerType=a.innerType.describe(i)}return r}}il.prototype=_O.prototype;const Gye=({open:t,setOpen:s})=>{const a=Ws(),[r,n]=g.useState(!1),[i,o]=g.useState("approve"),[l,c]=g.useState(null),{data:m,isLoading:u}=mA({page:1,limit:10,status:"P"},{enabled:t,retry:!1,refetchOnMount:!1,refetchOnWindowFocus:!1}),h=m?.data||[],f=pA(),b=xt({initialValues:{remarks:""},validationSchema:nt({remarks:me().required(`${i==="approve"?"Approval":"Rejection"} remarks are required`).trim().min(1,`${i==="approve"?"Approval":"Rejection"} remarks are required`)}),enableReinitialize:!0,onSubmit:async E=>{if(!(!l||!l.approvals?.[0]))try{await f.mutateAsync({request_id:l.id,approval_id:l.approvals[0].id,action:i==="approve"?"A":"R",remarks:E.remarks.trim()}),b.resetForm(),n(!1),c(null)}catch(M){console.error("Error taking action on request:",M)}}}),w=E=>{c(E),o("approve"),n(!0)},S=E=>{c(E),o("reject"),n(!0)},j=()=>{b.resetForm(),n(!1),c(null)},v=E=>{if(!E)return"default";switch(E.toUpperCase()){case"A":case"APPROVED":return"success";case"R":case"REJECTED":return"error";case"P":case"PENDING":return"warning";default:return"default"}},N=E=>{if(!E)return"N/A";switch(E.toUpperCase()){case"A":case"APPROVED":return"Approved";case"R":case"REJECTED":return"Rejected";case"P":case"PENDING":return"Pending";default:return E}},C=E=>E.replace(/_/g," ").replace(/\w\S*/g,M=>M.charAt(0).toUpperCase()+M.substr(1)),P=E=>{if(E.reference_id)return`#${E.reference_id}`;if(E.request_data)try{const M=JSON.parse(E.request_data);return M.order_number||M.reference_number||`REQ-${E.id}`}catch{return`REQ-${E.id}`}return`REQ-${E.id}`};return e.jsxs(e.Fragment,{children:[e.jsx(it,{open:t,setOpen:s,title:"Recent Requests",size:"small",children:e.jsxs("div",{className:"!p-2",children:[u?e.jsx("div",{className:"!space-y-2",children:[1,2,3].map(E=>e.jsxs("div",{className:"!bg-white !rounded-lg !border !border-gray-200 !p-4",children:[e.jsx(X,{variant:"text",width:"60%",height:20,className:"!mb-2"}),e.jsx(X,{variant:"text",width:"40%",height:16,className:"!mb-3"}),e.jsxs("div",{className:"!flex !gap-2 !mb-3",children:[e.jsx(X,{variant:"rectangular",width:80,height:24}),e.jsx(X,{variant:"rectangular",width:80,height:24})]}),e.jsxs("div",{className:"!flex !gap-2",children:[e.jsx(X,{variant:"rectangular",width:100,height:32}),e.jsx(X,{variant:"rectangular",width:100,height:32})]})]},E))}):h.length===0?e.jsxs("div",{className:"!text-center !py-12",children:[e.jsx(ks,{className:"!w-16 !h-16 !text-gray-400 !mx-auto !mb-4"}),e.jsx(x,{variant:"body1",className:"!text-gray-600 !mb-2",children:"No Pending Approvals"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"All requests have been processed"})]}):e.jsx("div",{className:"!space-y-2",children:h.map(E=>{const M=E.requester?.name||`User #${E.requester_id}`,T=C(E.request_type),A=P(E),L=E.approvals?.[0]?.status||E.status;return e.jsxs("div",{className:"!bg-white !rounded-lg !border !border-gray-200 !p-3 !hover:!shadow-md !transition-shadow",children:[e.jsx("div",{className:"!flex !items-center !justify-between !mb-2",children:e.jsxs("div",{className:"!flex !items-center !gap-2 !flex-1 !min-w-0",children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:A}),e.jsx(Me,{label:T,size:"small",className:"!capitalize !text-xs !h-5"})]})}),e.jsxs(x,{variant:"caption",className:"!text-gray-600 !text-xs !leading-tight !block !mb-3",children:[e.jsx("span",{className:"!font-medium",children:M})," has requested"," ",e.jsxs("span",{className:"!font-medium",children:[T," Approval"]})]}),e.jsxs("div",{className:"!flex !items-center !justify-between !gap-2",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !flex-wrap",children:[e.jsx(Me,{label:N(L),color:v(L),size:"small",className:"!capitalize !text-xs !h-5"}),E.createdate&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs",children:Ie(E.createdate instanceof Date?E.createdate.toISOString():String(E.createdate))})]}),e.jsxs("div",{className:"!flex !gap-2 !shrink-0",children:[e.jsx(K,{variant:"contained",color:"success",size:"small",startIcon:e.jsx(zl,{className:"!w-4 !h-4"}),onClick:()=>w(E),disabled:L?.toUpperCase()!=="P"&&L?.toUpperCase()!=="PENDING",className:"!text-xs !h-8 !px-3",children:"Approve"}),e.jsx(K,{variant:"contained",color:"error",size:"small",startIcon:e.jsx(An,{className:"!w-4 !h-4"}),onClick:()=>S(E),disabled:L?.toUpperCase()!=="P"&&L?.toUpperCase()!=="PENDING",className:"!text-xs !h-8 !px-3",children:"Reject"})]})]})]},E.id)})}),e.jsx("div",{className:"!mt-4 !pt-4 !border-t !border-gray-200 !flex !justify-end",children:e.jsx(K,{variant:"outlined",size:"small",onClick:()=>{s(!1),a("/workflows/approvals")},children:"View All"})})]})}),e.jsxs(Kl,{open:r,onClose:j,maxWidth:"sm",fullWidth:!0,className:"!rounded-lg",children:[e.jsxs(Nv,{className:"!flex !items-center !gap-3 !pb-4 !border-b !border-gray-200 !relative",children:[e.jsx("div",{className:`!w-12 !h-12 !rounded-full !flex !items-center !justify-center !shrink-0 ${i==="approve"?"!bg-green-100":"!bg-red-100"}`,children:i==="approve"?e.jsx(zl,{className:"!w-6 !h-6 !text-green-600"}):e.jsx(An,{className:"!w-6 !h-6 !text-red-600"})}),e.jsxs("div",{className:"!flex-1",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:i==="approve"?"Approve Request?":"Reject Request?"}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mt-1",children:i==="approve"?e.jsxs(e.Fragment,{children:["Are you sure you want to approve this"," ",l?.request_type?.replaceAll("_"," ").toLowerCase()||"request"," ","from"," ",e.jsx("span",{className:"!font-semibold !text-gray-900",children:l?.requester?.name||"User"}),"?"]}):e.jsxs(e.Fragment,{children:["Are you sure you want to reject this"," ",l?.request_type?.toLowerCase()||"request"," ","from"," ",e.jsx("span",{className:"!font-semibold !text-gray-900",children:l?.requester?.name||"User"}),"?"]})})]}),e.jsx(ta,{onClick:j,className:"!absolute !top-2 !right-2 !bg-white !rounded-full !shadow-md hover:!bg-gray-100 !border !border-gray-200",size:"small",children:e.jsx(An,{className:"!w-4 !h-4 !text-gray-600"})})]}),e.jsxs(ug,{className:"!p-4",children:[l&&e.jsxs("div",{className:"!mb-4 !pb-4 !border-b !border-gray-200",children:[e.jsx(x,{variant:"subtitle2",className:"!font-semibold !text-gray-700 !mb-3",children:"Request Details"}),l.reference_details?e.jsx("div",{className:"!bg-gray-50 !rounded-md !p-4 !border !border-gray-200",children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[l.reference_details.order_number&&e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !font-medium",children:"Order Number"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.reference_details.order_number})]}),l.reference_details.customer_name&&e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !font-medium",children:"Customer Name"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.reference_details.customer_name})]}),l.reference_details.total_amount&&e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !font-medium",children:"Total Amount"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-primary-600",children:l.reference_details.total_amount})]}),l.reference_id&&e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !font-medium",children:"Reference ID"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:["#",l.reference_id]})]})]})}):e.jsx("div",{className:"!bg-gray-50 !rounded-md !p-4 !border !border-gray-200",children:e.jsx(x,{variant:"body2",className:"!text-gray-600 !text-center",children:"No request details available"})})]}),e.jsx(oe,{name:"remarks",multiline:!0,rows:3,label:i==="approve"?"Approval Remarks":"Rejection Remarks",placeholder:i==="approve"?"Enter approval remarks...":"Enter rejection remarks...",formik:b,required:!0})]}),e.jsxs(dg,{className:"!px-6 !py-4 !gap-2",children:[e.jsx(K,{variant:"outlined",onClick:j,children:"Cancel"}),e.jsx(K,{variant:"contained",color:i==="approve"?"success":"error",startIcon:i==="approve"?e.jsx(zl,{className:"!w-4 !h-4"}):e.jsx(An,{className:"!w-4 !h-4"}),onClick:()=>b.handleSubmit(),disabled:f.isPending||!b.isValid||!b.values.remarks.trim(),children:f.isPending?i==="approve"?"Approving...":"Rejecting...":i==="approve"?"Yes, Approve":"Yes, Reject"})]})]})]})},Kv={async getNotifications(t){const s={};t?.page&&(s.page=t.page),t?.limit&&(s.limit=t.limit),t?.type&&(s.type=t.type),t?.category&&(s.category=t.category),t?.is_read!==void 0&&(s.is_read=t.is_read),t?.priority&&(s.priority=t.priority);const a=await ie.get("/notifications",{params:s});return{data:a.data.data.notifications||[],pagination:a.data.pagination||{page:1,limit:20,total:0,total_pages:0},unread_count:a.data.data.unread_count||0}},async getNotificationById(t){return(await ie.get(`/notifications/${t}`)).data.data},async createNotification(t){return(await ie.post("/notifications",t)).data.data},async markAsRead(t){return(await ie.put(`/notifications/${t}/read`)).data.data},async markAllAsRead(){return(await ie.put("/notifications/read-all")).data.data||{count:0}},async deleteNotification(t){await ie.delete(`/notifications/${t}`)},async clearAll(){return(await ie.delete("/notifications/clear-all")).data.data||{count:0}},async getUnreadCount(){return(await ie.get("/notifications/unread-count")).data.data||{count:0}}},Kye=t=>tt({queryKey:["notifications",t],queryFn:()=>Kv.getNotifications(t)}),Qye=()=>{const t=is();return yu({mutationFn:s=>Kv.markAsRead(s),onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]}),t.invalidateQueries({queryKey:["notifications","unread-count"]})}})},Zye=()=>{const t=is();return yu({mutationFn:()=>Kv.markAllAsRead(),onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]}),t.invalidateQueries({queryKey:["notifications","unread-count"]})}})},Xye=()=>{const t=is();return yu({mutationFn:()=>Kv.clearAll(),onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]}),t.invalidateQueries({queryKey:["notifications","unread-count"]})}})},Jye=({onNotificationClick:t})=>{const[s,a]=g.useState(null),r=g.useRef(null),n=Ws(),i=!!s,{data:o,isLoading:l,refetch:c}=Kye({limit:20}),m=Qye(),u=Zye(),h=Xye(),f=o?.data||[],b=o?.unread_count||0,w=E=>{a(E.currentTarget)},S=()=>{a(null)},j=async E=>{E.is_read||await m.mutateAsync(E.id),E.action_url&&n(E.action_url),t?.(E),S()},v=async()=>{try{await u.mutateAsync(),c()}catch(E){console.error("Failed to mark all as read:",E)}},N=async()=>{try{await h.mutateAsync(),S(),c()}catch(E){console.error("Failed to clear all notifications:",E)}},C=E=>{switch(E){case"success":return e.jsx(mt,{className:"!text-green-500"});case"warning":return e.jsx(vg,{className:"!text-yellow-500"});case"error":return e.jsx(Xw,{className:"!text-red-500"});default:return e.jsx(mle,{className:"!text-blue-500"})}},P=E=>{if(!E)return"Just now";const M=new Date,T=new Date(E),A=M.getTime()-T.getTime(),L=Math.floor(A/6e4),F=Math.floor(A/36e5),z=Math.floor(A/864e5);return L<1?"Just now":L<60?`${L}m ago`:F<24?`${F}h ago`:z<7?`${z}d ago`:T.toLocaleDateString()};return e.jsxs("div",{className:"relative",ref:r,children:[e.jsx(j4,{badgeContent:b,color:"error",max:99,children:e.jsx(ta,{onClick:w,className:"!p-1.5 !rounded-md !bg-gray-100 !text-gray-600 hover:!text-gray-900 hover:!bg-gray-100","aria-label":"notifications","aria-controls":i?"notifications-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,children:e.jsx(y8,{className:"!text-gray-600"})})}),e.jsxs(k4,{id:"notifications-menu",anchorEl:s,open:i,onClose:S,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{className:"!mt-2 !ml-1 !min-w-[400px] !max-w-[400px] !max-h-[600px] relative",sx:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"visible","&::before":{content:'""',position:"absolute",top:-8,right:16,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"8px solid white",zIndex:1,pointerEvents:"none"},"&::after":{content:'""',position:"absolute",top:-9,right:16,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"8px solid #e5e7eb",zIndex:0,pointerEvents:"none"}}},list:{className:"!py-2 !relative"}},children:[e.jsxs(y,{className:"!px-4 !py-3 !border-b !border-gray-200 !flex !items-center !justify-between !bg-gray-50",children:[e.jsx(x,{variant:"h6",className:"!text-base !font-semibold !text-gray-900",children:"Notifications"}),b>0&&e.jsx(lo,{size:"small",onClick:v,className:"!text-xs !text-blue-600 hover:!text-blue-700 !normal-case",children:"Mark all as read"})]}),e.jsx(y,{className:"!max-h-[450px] !overflow-y-auto",children:l?e.jsx(y,{className:"!p-4 !space-y-3",children:[1,2,3].map(E=>e.jsxs(y,{className:"!flex !gap-3",children:[e.jsx(X,{variant:"circular",width:40,height:40}),e.jsxs(y,{className:"!flex-1",children:[e.jsx(X,{width:"60%",height:20}),e.jsx(X,{width:"100%",height:16,className:"!mt-2"}),e.jsx(X,{width:"40%",height:12,className:"!mt-1"})]})]},E))}):f.length===0?e.jsxs(y,{className:"!p-8 !text-center",children:[e.jsx(y8,{className:"!text-gray-400 !mb-2"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No notifications"})]}):f.map(E=>e.jsxs(Z,{onClick:()=>j(E),className:`!px-4 !py-3 !border-b !border-gray-100 hover:!bg-gray-50 ${E.is_read?"":"!bg-blue-50"}`,children:[e.jsx(zy,{className:"!min-w-0 !mr-3",children:C(E.type)}),e.jsx(qy,{primary:e.jsxs(y,{className:"!flex !items-start !justify-between !gap-2",children:[e.jsx(x,{variant:"body2",className:`!font-medium !text-sm ${E.is_read?"!text-gray-700":"!text-gray-900"}`,children:E.title}),!E.is_read&&e.jsx(ole,{className:"!text-blue-500 !text-xs"})]}),secondary:e.jsxs(e.Fragment,{children:[e.jsx(x,{component:"span",variant:"body2",className:"!text-xs !text-wrap !text-gray-500 !mt-1 !block",children:E.message}),e.jsx(x,{component:"span",variant:"caption",className:"!text-xs !text-gray-400 !mt-1 !block",children:P(E.createdate)})]})})]},E.id))}),f.length>0&&!l&&[e.jsx(pr,{},"divider"),e.jsx(y,{className:"!px-4 !py-2 !flex !justify-center",children:e.jsx(lo,{size:"small",onClick:N,className:"!text-xs !text-gray-600 hover:!text-gray-900 !normal-case",children:"Clear all notifications"})},"clear-all")]]})]})},ebe=Ne(j4)(({theme:t})=>({"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:`0 0 0 2px ${t.palette.background.paper}`,borderRadius:"50%",minWidth:"10px",height:"10px","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}})),tbe=({sidebarOpen:t,toggleSidebar:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(!1),o=Ws(),l=!!a,{user:c,isLoading:m,logout:u,isLoggingOut:h}=uA(),{data:f}=mA({page:1,limit:100,status:"P"},{retry:!1,refetchOnMount:!1,refetchOnWindowFocus:!1}),b=f?.pagination?.total_count||0,w=M=>{r(M.currentTarget)},S=()=>{r(null)},j=()=>{try{u(),S()}catch(M){console.error("Logout failed:",M)}},v=()=>{o("/profile"),S()},N=()=>{o("/settings/system"),S()},C=()=>c?.name?c.name.split(" ").map(M=>M[0]).join("").toUpperCase().slice(0,2):"U",P=()=>c?.name??"User",E=()=>c?.role?.name??"User";return e.jsxs("header",{className:"bg-white border-b border-gray-200 h-[67px]",children:[e.jsxs("div",{className:"flex items-center justify-between h-full px-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{onClick:s,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 sm:hidden",children:t?e.jsx(Dle,{size:20}):e.jsx(Ple,{size:20})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j4,{badgeContent:b,color:"error",max:99,invisible:b===0,children:e.jsx(ta,{onClick:()=>i(!0),className:"!p-1.5 !rounded-md !bg-gray-100 !text-gray-600 hover:!text-gray-900 hover:!bg-gray-100","aria-label":"approvals","aria-controls":n?"approvals-drawer":void 0,"aria-haspopup":"true","aria-expanded":n?"true":void 0,children:e.jsx(rle,{className:"!text-gray-600"})})}),e.jsx(Jye,{onNotificationClick:M=>{console.log("Notification clicked:",M)}}),e.jsxs("div",{className:"relative",children:[e.jsx(ta,{onClick:w,className:"!p-2 !rounded-md !bg-gray-50 !text-gray-700 hover:!bg-gray-100","aria-label":"user menu","aria-controls":l?"user-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,children:m?e.jsx(X,{variant:"circular",width:40,height:40,sx:{bgcolor:"grey.200"}}):e.jsx(ebe,{overlap:"rectangular",anchorOrigin:{vertical:"bottom",horizontal:"left"},variant:"dot",children:e.jsx(ut,{alt:P(),src:c?.profile_image||void 0,className:"!w-9 !h-9 !text-sm !font-medium",sx:{bgcolor:"primary.main",borderRadius:"5px"},children:C()})})}),e.jsxs(k4,{id:"user-menu",anchorEl:a,open:l,onClose:S,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{className:"!mt-2 !min-w-[240px] relative",sx:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"visible"}},list:{className:"!px-0 !py-1 !relative"}},children:[e.jsx(y,{sx:{position:"absolute",top:-8,right:16,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"8px solid white",zIndex:1,pointerEvents:"none"}}),e.jsx(y,{sx:{position:"absolute",top:-9,right:16,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"8px solid #e5e7eb",zIndex:0,pointerEvents:"none"}}),e.jsxs(y,{className:"!px-4 !py-3 !border-b !border-gray-200 !bg-gray-50",children:[e.jsxs(y,{className:"!flex !items-center !gap-3 !mb-2",children:[m?e.jsx(X,{variant:"circular",width:40,height:40,sx:{bgcolor:"grey.200"}}):e.jsx(ut,{alt:P(),src:c?.profile_image||void 0,sx:{width:40,height:40,bgcolor:"primary.main",fontSize:"1rem",fontWeight:500},children:C()}),e.jsxs(y,{className:"!flex-1",children:[e.jsx(x,{variant:"body2",className:"!text-sm !font-medium !text-gray-900",sx:{fontWeight:500},children:m?e.jsx(X,{width:120,height:16}):P()}),e.jsx(x,{variant:"caption",className:"!text-xs !text-gray-500",children:m?e.jsx(X,{width:80,height:12}):E()})]})]}),e.jsx(x,{variant:"caption",className:"!text-xs !text-gray-500",children:m?e.jsx(X,{width:150,height:12}):c?.email||"user@example.com"})]}),e.jsxs(Z,{onClick:v,className:"!px-4 !py-2",children:[e.jsx(zy,{className:"!min-w-0 !mr-3",children:e.jsx(ale,{fontSize:"small",className:"!text-gray-500"})}),e.jsx(qy,{primary:"My Profile",primaryTypographyProps:{className:"!text-sm !text-gray-700"}})]}),e.jsxs(Z,{onClick:N,className:"!px-4 !py-2",children:[e.jsx(zy,{className:"!min-w-0 !mr-3",children:e.jsx(cu,{fontSize:"small",className:"!text-gray-500"})}),e.jsx(qy,{primary:"Settings",primaryTypographyProps:{className:"!text-sm !text-gray-700"}})]}),e.jsx(pr,{className:"!my-1"}),e.jsxs(Z,{onClick:j,disabled:h,className:"!px-4 !py-2",sx:{"&.Mui-disabled":{opacity:.5}},children:[e.jsx(zy,{className:"!min-w-0 !mr-3",children:e.jsx(xle,{fontSize:"small",className:"!text-red-600"})}),e.jsx(qy,{primary:h?"Signing out...":"Logout",primaryTypographyProps:{className:"!text-sm !text-red-600"}})]})]})]})]})]}),e.jsx(Gye,{open:n,setOpen:i})]})},sbe=()=>{const t=Qe("dashboard"),s=Qe("company"),a=Qe("user"),r=Qe("role"),n=Qe("depot"),i=Qe("zone"),o=Qe("currency"),l=Qe("route"),c=Qe("route-type"),m=Qe("outlet"),u=Qe("outlet-group"),h=Qe("asset-type"),f=Qe("asset-master"),b=Qe("warehouse"),w=Qe("vehicle"),S=Qe("brand"),j=Qe("product-category"),v=Qe("product-sub-category"),N=Qe("unit-of-measurement"),C=Qe("subunit-of-measurement"),P=Qe("product"),E=Qe("pricelist"),M=Qe("sales-target-group"),T=Qe("sales-target"),A=Qe("sales-bonus-rule"),L=Qe("kpi-target"),F=Qe("survey"),z=Qe("promotions"),I=Qe("order"),Q=Qe("delivery"),Y=Qe("return"),B=Qe("payment"),q=Qe("invoice"),V=Qe("credit-note"),G=Qe("visit"),H=Qe("asset-movement"),D=Qe("maintenance"),R=Qe("installation"),$=Qe("inspection"),W=Qe("van-stock"),J=Qe("stock-movement"),te=Qe("stock-transfer"),ee=Qe("batch-lots"),ae=Qe("inventory-items"),ce=Qe("inventory-management"),he=Qe("competitor"),ne=Qe("customer-complaint"),xe=Qe("customer-category"),ge=Qe("customer-type"),le=Qe("customer-channel"),pe=Qe("product-flavour"),Re=Qe("product-volume"),Se=Qe("product-shelf-life"),He=Qe("product-type"),ze=Qe("product-target-group"),st=Qe("product-web-order"),ke=Qe("cooler-type"),We=Qe("cooler-sub-type"),ye=Qe("tax-master"),Ye=Qe("location"),at=Qe("route-effectiveness"),bt=Qe("erp-sync"),ct=Qe("report"),ht=Qe("approval"),Et=Qe("exception"),be=Qe("alert"),Oe=Qe("profile"),Le=Qe("login-history"),jt=Qe("token"),Jt=Qe("setting"),Kt=g.useMemo(()=>({dashboard:t,company:s,user:a,role:r,depot:n,zone:i,currency:o,route:l,"route-type":c,outlet:m,"outlet-group":u,"asset-type":h,"asset-master":f,warehouse:b,vehicle:w,brand:S,"product-category":j,"product-sub-category":v,"unit-of-measurement":N,"subunit-of-measurement":C,product:P,pricelist:E,"sales-target-group":M,"sales-target":T,"sales-bonus-rule":A,"kpi-target":L,survey:F,promotions:z,order:I,delivery:Q,return:Y,payment:B,invoice:q,"credit-note":V,visit:G,"asset-movement":H,maintenance:D,installation:R,inspection:$,"van-stock":W,"stock-movement":J,"stock-transfer":te,"batch-lots":ee,"inventory-items":ae,"inventory-management":ce,competitor:he,"customer-complaint":ne,"customer-category":xe,"customer-type":ge,"customer-channel":le,"product-flavour":pe,"product-volume":Re,"product-shelf-life":Se,"product-type":He,"product-target-group":ze,"product-web-order":st,"cooler-type":ke,"cooler-sub-type":We,"tax-master":ye,location:Ye,"route-effectiveness":at,"erp-sync":bt,report:ct,approval:ht,exception:Et,alert:be,profile:Oe,"login-history":Le,token:jt,setting:Jt}),[t,s,a,r,n,i,o,l,c,m,u,h,f,b,w,S,j,v,N,C,P,E,M,T,A,L,F,z,I,Q,Y,B,q,V,G,H,D,R,$,W,J,te,ee,ae,ce,he,ne,xe,ge,le,pe,Re,Se,He,ze,st,ke,We,ye,Ye,at,bt,ct,ht,Et,be,Oe,Le,jt,Jt]),rt=g.useCallback(ps=>{const cs=Vse[ps];if(!cs)return!0;const Ns=Kt[cs];return Ns?.isRead||Ns?.isCreate||Ns?.isUpdate||Ns?.isDelete||!1},[Kt]),Lt=g.useCallback(ps=>ps.map(cs=>{if(cs.children&&cs.children.length>0){const Ns=Lt(cs.children);return Ns.length>0?{...cs,children:Ns}:null}return rt(cs.id)?cs:null}).filter(cs=>cs!==null),[rt]),Nt=g.useMemo(()=>Object.values(Kt).some(ps=>ps?.isLoading),[Kt]);return{hasPermission:rt,filterMenuItems:Lt,isLoading:Nt}},abe=()=>{const t=Ws(),s=fi(),[a,r]=g.useState(new Set),[n,i]=g.useState(""),{filterMenuItems:o,isLoading:l}=sbe(),c=w=>w?s.pathname===w||s.pathname.startsWith(w+"/"):!1,m=(w,S)=>S.trim()?w.toLowerCase().includes(S.toLowerCase()):!0,u=g.useMemo(()=>o(r9),[o]),h=g.useMemo(()=>{if(!n.trim())return u;const w=n.toLowerCase();return u.map(S=>{const j=S.children?.map(v=>{const N=m(v.label,w),C=v.children?.filter(E=>m(E.label,w)),P=C&&C.length>0;return N||P?{...v,children:P?C:v.children}:null}).filter(Boolean);return j&&j.length>0?{...S,children:j}:null}).filter(Boolean)},[n,u]);g.useEffect(()=>{(S=>{S.forEach(j=>{j.children&&j.children.forEach(v=>{v.children&&v.children.some(C=>c(C.href))&&r(C=>C.has(v.id)?C:new Set(C).add(v.id))})})})(u)},[s.pathname,u]),g.useEffect(()=>{if(n.trim()){const w=new Set;h.forEach(S=>{S.children?.forEach(j=>{j.children&&j.children.length>0&&w.add(j.id)})}),r(w)}},[n,h]);const f=w=>{r(S=>{const j=new Set(S);return j.has(w)?j.delete(w):j.add(w),j})},b=g.useCallback(w=>{if(!w)return;const S=w,j=s.pathname,v={forceReload:Date.now()};S===j?t(S,{replace:!0,state:v}):t(S,{replace:!1,state:v}),n.trim()&&setTimeout(()=>{i("")},100)},[t,s.pathname,n]);return e.jsxs("div",{className:"h-screen w-72 bg-white border-r border-gray-200 flex flex-col transition-all duration-300 ease-in-out",children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 flex items-center gap-2",children:[e.jsx("img",{src:"/sfa.png",alt:"DCC-SFA Logo",className:"h-[42px] w-auto object-contain"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-[#004080] text-xl leading-tight",children:"DCC-SFA"}),e.jsx("span",{className:"font-medium text-[#666666] text-xs leading-tight",children:"Your Reliable IT Partner"})]})]}),e.jsx("div",{className:"",children:e.jsx("input",{type:"text",placeholder:"Search menu...",value:n,className:"!w-full !p-2 px-2.5 placeholder:text-sm rounded-none outline-none border-b border-gray-200",onChange:w=>i(w.target.value)})}),e.jsx("div",{className:"flex flex-col overflow-y-auto",children:l?e.jsx("div",{className:"p-2 space-y-2",children:[1,2,3,4,5,6,7,8,9,10].map(w=>e.jsxs("div",{className:"flex items-center gap-2 p-2",children:[e.jsx(X,{variant:"rectangular",width:24,height:24,className:"!rounded"}),e.jsx(X,{variant:"text",width:"80%",height:24})]},w))}):h.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:e.jsx("span",{className:"text-sm text-gray-500 text-center",children:n.trim()?`No menu items found matching "${n}"`:"No menu items available"})}):h.map(w=>e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm px-2 py-2 leading-tight font-medium uppercase text-gray-600",children:w.label}),w.children&&w.children.length>0&&e.jsx("div",{className:"flex flex-col p-1",children:w.children.map(S=>{const j=S.children?.some(P=>c(P.href)),v=c(S.href)||j,N=a.has(S.id),C=S.children&&S.children.length>0;return e.jsxs(vt.Fragment,{children:[e.jsxs(aE,{onClick:()=>C?f(S.id):b(S.href),className:`group !justify-between !cursor-pointer !mb-0.5 !flex !items-center hover:!bg-blue-200 !rounded !p-1.5 !transition-colors !duration-300 ${v?"!bg-blue-200":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[S.icon&&e.jsx("div",{className:`flex items-center h-8 w-8 justify-center rounded transition-colors duration-300 ease-in-out ${v?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 group-hover:bg-blue-600 group-hover:text-white"}`,children:e.jsx(S.icon,{className:`pointer-events-none transition-colors duration-300 ${v?"text-white":"text-gray-600 group-hover:text-white"}`})}),e.jsx("span",{className:`text-sm truncate !font-medium transition-colors duration-300 ease-in-out flex items-center gap-1 ${v?"text-blue-600 !font-semibold":"text-gray-600 group-hover:text-blue-600"}`,children:S.label?.length>22?S.label?.slice(0,22)+"...":S.label})]}),S.children&&S.children.length>0&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ile,{fontSize:"small",className:`transition-all duration-300 ease-in-out ${N?"rotate-90":""} ${v?"text-blue-600":"text-gray-600 group-hover:text-blue-600"}`})})]},S.id),S.children&&S.children.length>0&&e.jsx(fw,{in:N,timeout:"auto",unmountOnExit:!0,children:e.jsx("div",{className:"flex flex-col",children:S.children.map(P=>{const E=c(P.href);return e.jsx(aE,{onClick:M=>{M.stopPropagation(),b(P.href)},className:"group !justify-between !cursor-pointer !flex !items-center hover:!bg-transparent !rounded !p-0 !pl-10 !transition-colors !duration-300",children:e.jsxs("div",{className:"flex relative items-center gap-2",children:[e.jsx("div",{className:"absolute z-0 left-1 top-0 h-full border-l-2 border-dotted border-gray-300"}),e.jsx("span",{className:`text-2xl z-10 transition-colors duration-300 ${E?"text-blue-600":"text-gray-600 group-hover:text-blue-600"}`,children:""}),e.jsx("span",{className:`text-sm truncate transition-colors !font-medium duration-300 ease-in-out flex items-center gap-1 ${E?"text-blue-600 !font-semibold":"text-gray-600 group-hover:text-blue-600"}`,children:P.label})]})},P.id)})})})]},S.id)})})]})},w.id))})]})};var NN={exports:{}};var _T;function rbe(){return _T||(_T=1,(function(t){(function(){var s={}.hasOwnProperty;function a(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=n(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return a.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)s.call(i,l)&&i[l]&&(o=n(o,l));return o}function n(i,o){return o?i?i+" "+o:i+o:i}t.exports?(a.default=a,t.exports=a):window.classNames=a})()})(NN)),NN.exports}var nbe=rbe();const nr=Ji(nbe),ibe=({navItem:t,navLink:s,id:a})=>{const[r,n]=g.useState([]),[i,o]=g.useState(""),{state:l}=fi();g.useEffect(()=>{l&&o(l)},[l]);const c=Ws(),m=(u,h,f)=>{if(u.stopPropagation(),f!==0)c(r[f-1].navLink,{state:i});else if(r.length>1)c(r[f+1].navLink,{state:i});else return;n(r.filter(b=>b.id!==h))};return g.useEffect(()=>{n(u=>{const h=u.findIndex(w=>w.navItem===t);if(h!==-1){if(u[h].id===a&&u[h].navLink===s)return u;const w=[...u];return w[h]={id:a,navItem:t,navLink:s},w}const f=u.findIndex(w=>w.id===a);if(f!==-1){const w=[...u];return w[f]={id:a,navItem:t,navLink:s},w}if(typeof t=="string"&&/^\d+$/.test(t)&&u.length>0){const w=u[u.length-1];if(w&&w.id!==a){const S=[...u];return S[S.length-1]={...w,navItem:`${w.navItem} ${t}`,navLink:s,id:a},S}return u}return[...u,{id:a,navItem:t,navLink:s}]})},[a,t,s]),g.useEffect(()=>{document.title=t},[t]),e.jsx("div",{className:"flex !p-0 items-center gap-1 border-b overflow-x-auta border-gray-300",children:e.jsx("div",{className:"flex items-center hide-scrollbar gap-0.5 w-[84vw] transition-all duration-300 overflow-x-auto overflow-y-hidden breadcrambs rounded-lg px-0.5 py-1",children:r.filter(u=>r?.some(h=>h.navItem===u.navItem)).map((u,h)=>e.jsx(Me,{label:u.navItem?u.navItem?.replaceAll("-"," "):"Executive Dashboard",className:nr("!rounded-md flex items-center !capitalize !text-white px-2 py-1",u.id===a?"!bg-blue-600":"!bg-blue-300"),onClick:()=>c(u.navLink,{state:i}),onDelete:f=>m(f,u.id,h),deleteIcon:e.jsx(cle,{className:"!text-white"})},u.id))})})},obe=async t=>{try{return(await ie.get("/currencies",{params:t})).data}catch(s){throw console.error("Error fetching currencies:",s),new Error(s.response?.data?.message||"Failed to fetch currencies")}},lbe=async t=>{try{return(await ie.post("/currencies",t)).data}catch(s){throw console.error("Error creating currency:",s),new Error(s.response?.data?.message||"Failed to create currency")}},cbe=async(t,s)=>{try{return(await ie.put(`/currencies/${t}`,s)).data}catch(a){throw console.error("Error updating currency:",a),new Error(a.response?.data?.message||"Failed to update currency")}},dbe=async t=>{try{return(await ie.delete(`/currencies/${t}`)).data}catch(s){throw console.error("Error deleting currency:",s),new Error(s.response?.data?.message||"Failed to delete currency")}},Al={all:["currencies"],lists:()=>[...Al.all,"list"],list:t=>[...Al.lists(),t],details:()=>[...Al.all,"detail"],detail:t=>[...Al.details(),t]},Zl=(t,s)=>tt({queryKey:Al.list(t||{}),queryFn:()=>obe(t),staleTime:300*1e3,...s}),ube=t=>{const s=is();return De({mutationFn:lbe,loadingMessage:"Creating currency...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Al.lists()})},onError:t?.onError})},mbe=t=>{const s=is();return De({mutationFn:({id:a,...r})=>cbe(a,r),loadingMessage:"Updating currency...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Al.lists()}),s.invalidateQueries({queryKey:Al.detail(r.id)})},onError:t?.onError})},pbe=t=>{const s=is();return De({mutationFn:dbe,loadingMessage:"Deleting currency...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Al.lists()})},onError:t?.onError})},hbe=async()=>{try{return(await ie.get("/settings")).data}catch(t){throw t}},fbe=async(t,s)=>{try{return(await ie.put(`/settings/${t}`,s,{headers:s instanceof FormData?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"}})).data}catch(a){throw a}},SO={all:["settings"],detail:()=>[...SO.all,"detail"]},_u=()=>tt({queryKey:SO.detail(),queryFn:()=>hbe(),staleTime:300*1e3}),xbe=()=>De({mutationFn:({id:t,settingsData:s})=>fbe(t,s),loadingMessage:"Updating settings...",invalidateQueries:[["settings"]]}),gbe=({children:t})=>{const{data:s,isLoading:a,error:r}=Zl({limit:1e3}),{data:n,isLoading:i,error:o}=_u(),l=s?.data||[],m=n?.data?.currency_id||1,u={currencies:l,defaultCurrencyId:m,isLoading:a||i,error:r?.message||o?.message||null};return e.jsx(CO.Provider,{value:u,children:t})},CO=g.createContext(void 0),ybe=()=>{const t=g.useContext(CO);if(t===void 0)throw new Error("useCurrencyContext must be used within a CurrencyProvider");return t},bbe=()=>{const[t,s]=g.useState(!1),[a,r]=g.useState(0),n=fi(),i=g.useRef(null),o=g.useRef(""),l=g.useRef(null),c=()=>s(!t);g.useEffect(()=>{const h=n.pathname+n.search,b=n.state?.forceReload??null,w=o.current!==h,S=l.current!==b;(w||S)&&(w&&(o.current=h),S&&b!==null&&(l.current=b),r(j=>j+1),i.current&&i.current.scrollTo({top:0,behavior:"smooth"}))},[n.pathname,n.search,n.key,n.state]);const m=`${n.pathname}${n.search}${n.key||a}${n.state?.forceReload||""}`,u=()=>{const h=n.pathname.split("/").filter(Boolean),f=h[h.length-1]||"",b=/^\d+$/.test(f);return n.pathname==="/"||n.pathname==="/dashboard/executive"?"Executive Dashboard":b&&h.length>1?`${h[h.length-2].split("-").map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" ")} @${f}`:f.split("-").map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(" ")||""};return e.jsx(gbe,{children:e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(abe,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(tbe,{sidebarOpen:t,toggleSidebar:c}),e.jsx(ibe,{id:n.pathname,navItem:u(),navLink:n.pathname}),e.jsx("main",{ref:i,className:"flex-1 overflow-auto p-5",children:e.jsx(lU,{},m)})]})]})})},vbe=nt({email:me().matches(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,"Please enter a valid email address").required("Email is required"),password:me().min(6,"Password must be at least 6 characters").required("Password is required")}),jbe=()=>{const t=Ws(),s=fi(),a=is(),r=s.state?.from?.pathname||"/",n=Ole({onSuccess:l=>{l.success&&(window.dispatchEvent(new Event("auth-change")),a.invalidateQueries({queryKey:Dl.profile()}),setTimeout(()=>{t(r,{replace:!0})},100))}});g.useEffect(()=>{Bi.isAuthenticated()&&t(r,{replace:!0})},[t,r]);const i=xt({initialValues:{email:"",password:"",rememberMe:!1},validationSchema:vbe,onSubmit:async l=>{await o(l)}}),o=async l=>{console.log(l),l.rememberMe?localStorage.setItem("dcc_sfa_remember_email",l.email):localStorage.removeItem("dcc_sfa_remember_email");const c={email:l.email,password:l.password};n.mutate(c)};return g.useEffect(()=>{const l=localStorage.getItem("dcc_sfa_remember_email");l&&(i.setFieldValue("email",l),i.setFieldValue("rememberMe",!0))},[]),e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row",children:[e.jsx("div",{className:"w-full lg:w-1/2 bg-white p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"bg-gradient-to-br min-h-[400px] lg:h-full rounded-lg from-blue-600 via-blue-700 to-blue-800 flex flex-col justify-center items-center p-6 sm:p-8 lg:p-10 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full"}),e.jsx("div",{className:"absolute top-40 right-32 w-24 h-24 bg-white rounded-full"}),e.jsx("div",{className:"absolute bottom-32 left-32 w-40 h-40 bg-white rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-28 h-28 bg-white rounded-full"})]}),e.jsxs("div",{className:"relative z-10 text-center mb-8 lg:mb-12",children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-3 lg:mb-4",children:"Streamline your sales force operations."}),e.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:"Access your SFA dashboard to manage orders, customers, and field operations."})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-4xl bg-white rounded-xl lg:rounded-2xl shadow-xl lg:shadow-2xl py-4 sm:py-6 lg:py-6 px-4 sm:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Total Orders"}),e.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"1,247"}),e.jsx("div",{className:"text-xs text-green-600",children:"+15.2%"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Active Customers"}),e.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"856"}),e.jsx("div",{className:"text-xs text-green-600",children:"+8.7%"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Field Visits"}),e.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"324"}),e.jsx("div",{className:"text-xs text-orange-600",children:"This Week"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:"Product Categories"}),e.jsx("div",{className:"flex items-center justify-center h-20 sm:h-24 bg-white rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-blue-600 mb-1",children:"2,847 Units"}),e.jsx("div",{className:"text-xs text-gray-600 px-2",children:"Beverages: 35% | Snacks: 28% | Dairy: 22% | Others: 15%"})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2 sm:mb-3",children:"Recent Orders"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white rounded p-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-blue-600 font-bold",children:"B"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 text-xs sm:text-sm truncate",children:"Coca-Cola 500ml Pack"}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:"Order #ORD-2024-001"})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-xs sm:text-sm",children:"TZS 245.50"}),e.jsx("div",{className:"text-xs text-green-600",children:"Delivered"})]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white rounded p-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-orange-600 text-lg font-bold",children:"S"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 text-xs sm:text-sm truncate",children:"Snack Mix Variety Pack"}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:"Order #ORD-2024-002"})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-xs sm:text-sm",children:"TZS 189.75"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Processing"})]})]})]})]})]})]})}),e.jsxs("div",{className:"w-full lg:w-1/2 bg-white flex flex-col justify-center px-4 sm:px-6 lg:px-12 xl:px-32 py-6 sm:py-8 lg:py-12",children:[e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm sm:text-lg",children:"D"})}),e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"DCC-SFA"})]})}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Enter your email and password to access your account."})]}),e.jsxs("form",{onSubmit:i.handleSubmit,noValidate:!0,className:"space-y-4 sm:space-y-6",children:[e.jsx(oe,{name:"email",type:"email",label:"Email",placeholder:"Enter your email",formik:i,required:!0,className:"!mt-4"}),e.jsx(oe,{name:"password",type:"password",label:"Password",placeholder:"Enter your password",formik:i,required:!0,className:"!mt-6"}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:e.jsx(Xn,{control:e.jsx(Fo,{name:"rememberMe",checked:i.values.rememberMe,onChange:i.handleChange,size:"small",sx:{color:"#6b7280","&.Mui-checked":{color:"#3b82f6"}}}),label:e.jsx("span",{className:"text-gray-700 text-xs sm:text-sm font-medium",children:"Remember Me"})})}),e.jsx(K,{type:"submit",variant:"contained",fullWidth:!0,disabled:!i.isValid||n.isPending,loading:n.isPending,className:"!py-2 sm:!py-3 disabled:!text-gray-200 !text-sm sm:!text-base !font-semibold !rounded-lg !bg-gradient-to-r !from-blue-600 !to-blue-700 hover:!from-blue-700 hover:!to-blue-800 !shadow-md hover:!shadow-lg !transition-all !duration-200",children:n.isPending?"Signing In...":"Log In"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-0 mt-8 sm:mt-12 text-xs text-gray-500",children:[e.jsxs("span",{className:"text-center sm:text-left",children:["Copyright  ",new Date().getFullYear()," DCC Sales Force Automation System."]}),e.jsx(fJ,{component:lx,to:"/privacy-policy",className:"text-gray-500 hover:text-gray-700 no-underline hover:underline transition-colors text-center sm:text-right",children:"Privacy Policy"})]})]})]})},Nbe=()=>e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm sm:text-lg",children:"D"})}),e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"DCC-SFA"})]}),e.jsx(lx,{to:"/login",className:"inline-flex items-center px-4 py-2 border border-blue-600 text-blue-600 rounded-md text-sm font-medium hover:bg-blue-50 transition-colors",children:"Back to Login"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 sm:px-8 py-8 sm:py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Privacy Policy"}),e.jsx("p",{className:"text-blue-100 text-lg sm:text-xl max-w-2xl mx-auto",children:"Your privacy is important to us. This policy explains how we collect, use, and protect your information."}),e.jsxs("div",{className:"mt-6 text-sm text-blue-200",children:["Last updated: January 15, ",new Date().getFullYear()]})]})}),e.jsx("div",{className:"px-6 sm:px-8 py-8 sm:py-12",children:e.jsxs("div",{className:"prose prose-lg max-w-none",children:[e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"1"})}),"Introduction"]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:'DCC Sales Force Automation System ("DCC-SFA", "we", "us", or "our") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our sales force automation platform and related services.'}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"By using our services, you agree to the collection and use of information in accordance with this policy. If you do not agree with the terms of this Privacy Policy, please do not access or use our services."})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"2"})}),"Information We Collect"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Personal Information"}),e.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[e.jsx("li",{children:"Name, email address, and contact information"}),e.jsx("li",{children:"Company and job title information"}),e.jsx("li",{children:"User credentials and authentication data"}),e.jsx("li",{children:"Profile information and preferences"}),e.jsx("li",{children:"Communication records and support interactions"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Business Information"}),e.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[e.jsx("li",{children:"Customer and prospect data"}),e.jsx("li",{children:"Sales orders and transaction records"}),e.jsx("li",{children:"Product catalogs and pricing information"}),e.jsx("li",{children:"Route and territory management data"}),e.jsx("li",{children:"Performance metrics and analytics"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Technical Information"}),e.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[e.jsx("li",{children:"Device information and IP addresses"}),e.jsx("li",{children:"Browser type and version"}),e.jsx("li",{children:"Usage patterns and system logs"}),e.jsx("li",{children:"Cookies and similar tracking technologies"}),e.jsx("li",{children:"Location data (when permitted)"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"3"})}),"How We Use Your Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Service Delivery"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-800 space-y-2 text-sm",children:[e.jsx("li",{children:"Provide and maintain our platform"}),e.jsx("li",{children:"Process transactions and orders"}),e.jsx("li",{children:"Manage user accounts and permissions"}),e.jsx("li",{children:"Deliver customer support"})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-3",children:"Business Operations"}),e.jsxs("ul",{className:"list-disc list-inside text-green-800 space-y-2 text-sm",children:[e.jsx("li",{children:"Generate reports and analytics"}),e.jsx("li",{children:"Improve system performance"}),e.jsx("li",{children:"Conduct research and development"}),e.jsx("li",{children:"Ensure system security"})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-3",children:"Communication"}),e.jsxs("ul",{className:"list-disc list-inside text-purple-800 space-y-2 text-sm",children:[e.jsx("li",{children:"Send important notifications"}),e.jsx("li",{children:"Provide system updates"}),e.jsx("li",{children:"Share marketing materials"}),e.jsx("li",{children:"Respond to inquiries"})]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-3",children:"Legal Compliance"}),e.jsxs("ul",{className:"list-disc list-inside text-orange-800 space-y-2 text-sm",children:[e.jsx("li",{children:"Comply with legal obligations"}),e.jsx("li",{children:"Protect against fraud"}),e.jsx("li",{children:"Enforce our terms of service"}),e.jsx("li",{children:"Respond to legal requests"})]})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"4"})}),"Information Sharing and Disclosure"]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-6 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-yellow-600 text-xl",children:""})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"We Do Not Sell Your Data"}),e.jsx("p",{className:"text-yellow-700 mt-1",children:"We do not sell, trade, or rent your personal information to third parties for marketing purposes."})]})]})}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"We may share your information only in the following limited circumstances:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold",children:""})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Service Providers"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"With trusted third-party service providers who assist us in operating our platform, conducting business, or serving users."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold",children:""})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Legal Requirements"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"When required by law or to protect our rights, property, or safety, or that of our users."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold",children:""})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Business Transfers"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"In connection with any merger, sale of assets, or acquisition of our business."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold",children:""})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Consent"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"With your explicit consent for any other purpose not covered in this policy."})]})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"5"})}),"Data Security"]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-3",children:"Security Measures"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{className:"text-green-800 text-sm",children:"Encryption in transit and at rest"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{className:"text-green-800 text-sm",children:"Multi-factor authentication"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{className:"text-green-800 text-sm",children:"Role-based access controls"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{className:"text-green-800 text-sm",children:"Regular security audits"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{className:"text-green-800 text-sm",children:"Intrusion detection systems"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{className:"text-green-800 text-sm",children:"Secure data backups"})]})]})]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"While we implement industry-standard security measures to protect your information, no method of transmission over the internet or electronic storage is 100% secure. We cannot guarantee absolute security but are committed to maintaining the highest standards of data protection."})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"6"})}),"Your Rights and Choices"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Access and Portability"}),e.jsx("p",{className:"text-blue-800 text-sm",children:"Request access to your personal data and receive it in a portable format."})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Correction"}),e.jsx("p",{className:"text-green-800 text-sm",children:"Update or correct inaccurate personal information in your account."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Deletion"}),e.jsx("p",{className:"text-purple-800 text-sm",children:"Request deletion of your personal data, subject to legal requirements."})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"Communication Preferences"}),e.jsx("p",{className:"text-orange-800 text-sm",children:"Opt out of marketing communications while receiving essential service updates."})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"How to Exercise Your Rights"}),e.jsx("p",{className:"text-gray-700 text-sm mb-3",children:'To exercise any of these rights, please contact us using the information provided in the "Contact Us" section below. We will respond to your request within 30 days.'}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Email: privacy@dcc-sfa.com"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"7"})}),"Data Retention"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"We retain your personal information only for as long as necessary to fulfill the purposes outlined in this Privacy Policy, unless a longer retention period is required or permitted by law."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),e.jsxs("span",{className:"text-gray-700 text-sm",children:[e.jsx("strong",{children:"Account Information:"})," Retained while your account is active and for 3 years after closure"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),e.jsxs("span",{className:"text-gray-700 text-sm",children:[e.jsx("strong",{children:"Transaction Records:"})," Retained for 7 years for accounting and legal compliance"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),e.jsxs("span",{className:"text-gray-700 text-sm",children:[e.jsx("strong",{children:"Communication Logs:"})," Retained for 2 years for customer support purposes"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),e.jsxs("span",{className:"text-gray-700 text-sm",children:[e.jsx("strong",{children:"Analytics Data:"})," Retained for 1 year in aggregated, anonymized form"]})]})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"8"})}),"Cookies and Tracking Technologies"]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Types of Cookies We Use"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-white text-lg",children:""})}),e.jsx("h4",{className:"font-semibold text-blue-900 text-sm",children:"Essential"}),e.jsx("p",{className:"text-blue-800 text-xs",children:"Required for basic functionality"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-white text-lg",children:""})}),e.jsx("h4",{className:"font-semibold text-green-900 text-sm",children:"Functional"}),e.jsx("p",{className:"text-green-800 text-xs",children:"Remember your preferences"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-white text-lg",children:""})}),e.jsx("h4",{className:"font-semibold text-purple-900 text-sm",children:"Analytics"}),e.jsx("p",{className:"text-purple-800 text-xs",children:"Help us improve our service"})]})]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"You can control cookie preferences through your browser settings. However, disabling certain cookies may affect the functionality of our platform. We use cookies to enhance your experience, remember your preferences, and analyze how our platform is used."})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"9"})}),"International Data Transfers"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"Your information may be transferred to and processed in countries other than your country of residence. These countries may have different data protection laws than your country."}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Safeguards for International Transfers"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-800 text-sm space-y-1",children:[e.jsx("li",{children:"Standard contractual clauses approved by relevant authorities"}),e.jsx("li",{children:"Adequacy decisions from data protection authorities"}),e.jsx("li",{children:"Certification schemes and codes of conduct"}),e.jsx("li",{children:"Binding corporate rules for intra-group transfers"})]})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"10"})}),"Children's Privacy"]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-yellow-600 text-xl",children:""})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Age Restriction"}),e.jsx("p",{className:"text-yellow-700 mt-1",children:"Our services are not intended for children under 16 years of age. We do not knowingly collect personal information from children under 16. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."})]})]})})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"11"})}),"Changes to This Privacy Policy"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"We may update this Privacy Policy from time to time to reflect changes in our practices, technology, legal requirements, or other factors. When we make changes, we will:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold",children:"1"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:'Update the "Last Updated" date'}),e.jsx("p",{className:"text-gray-700 text-sm",children:"We will revise the date at the top of this policy to indicate when changes were made."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold",children:"2"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Notify Users of Material Changes"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"For significant changes, we will provide notice through email or platform notifications."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold",children:"3"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Provide Review Period"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"We will give you reasonable time to review changes before they take effect."})]})]})]}),e.jsx("div",{className:"mt-6 bg-blue-50 rounded-lg p-4",children:e.jsx("p",{className:"text-blue-800 text-sm",children:e.jsx("strong",{children:"Your continued use of our services after any changes to this Privacy Policy constitutes acceptance of the updated policy."})})})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"12"})}),"Contact Us"]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:"Questions About This Privacy Policy?"}),e.jsx("p",{className:"text-blue-800",children:"We're here to help. Contact our privacy team for any questions or concerns."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:""})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Email"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"privacy@dcc-sfa.com"})]})]}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Send us an email and we'll respond within 24-48 hours."})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:""})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Address"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"DCC-SFA Privacy Office"})]})]}),e.jsxs("p",{className:"text-gray-700 text-sm",children:["123 Business District",e.jsx("br",{}),"Suite 456, Tech City",e.jsx("br",{}),"Country, Postal Code"]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Data Protection Officer"}),e.jsx("p",{className:"text-gray-700 text-sm mb-2",children:"For complex privacy matters or data protection concerns, contact our Data Protection Officer:"}),e.jsx("p",{className:"text-blue-600 font-medium",children:"dpo@dcc-sfa.com"})]})})]})]})]})})]}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"D"})}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"DCC-SFA"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Copyright  2025 DCC Sales Force Automation System. All rights reserved."}),e.jsxs("div",{className:"flex justify-center space-x-6 text-sm",children:[e.jsx(lx,{to:"/login",className:"text-blue-600 hover:text-blue-700 hover:underline transition-colors",children:"Back to Login"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("span",{className:"text-gray-500",children:"Privacy Policy"})]})]})})]})]});function kg(t){return t+.5|0}const Dc=(t,s,a)=>Math.max(Math.min(t,a),s);function df(t){return Dc(kg(t*2.55),0,255)}function Bc(t){return Dc(kg(t*255),0,255)}function Ml(t){return Dc(kg(t/2.55)/100,0,1)}function ST(t){return Dc(kg(t*100),0,100)}const Ti={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},y_=[..."0123456789ABCDEF"],wbe=t=>y_[t&15],_be=t=>y_[(t&240)>>4]+y_[t&15],fy=t=>(t&240)>>4===(t&15),Sbe=t=>fy(t.r)&&fy(t.g)&&fy(t.b)&&fy(t.a);function Cbe(t){var s=t.length,a;return t[0]==="#"&&(s===4||s===5?a={r:255&Ti[t[1]]*17,g:255&Ti[t[2]]*17,b:255&Ti[t[3]]*17,a:s===5?Ti[t[4]]*17:255}:(s===7||s===9)&&(a={r:Ti[t[1]]<<4|Ti[t[2]],g:Ti[t[3]]<<4|Ti[t[4]],b:Ti[t[5]]<<4|Ti[t[6]],a:s===9?Ti[t[7]]<<4|Ti[t[8]]:255})),a}const Pbe=(t,s)=>t<255?s(t):"";function kbe(t){var s=Sbe(t)?wbe:_be;return t?"#"+s(t.r)+s(t.g)+s(t.b)+Pbe(t.a,s):void 0}const Ebe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function PO(t,s,a){const r=s*Math.min(a,1-a),n=(i,o=(i+t/30)%12)=>a-r*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function Tbe(t,s,a){const r=(n,i=(n+t/60)%6)=>a-a*s*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Mbe(t,s,a){const r=PO(t,1,.5);let n;for(s+a>1&&(n=1/(s+a),s*=n,a*=n),n=0;n<3;n++)r[n]*=1-s-a,r[n]+=s;return r}function Dbe(t,s,a,r,n){return t===n?(s-a)/r+(s<a?6:0):s===n?(a-t)/r+2:(t-s)/r+4}function CS(t){const a=t.r/255,r=t.g/255,n=t.b/255,i=Math.max(a,r,n),o=Math.min(a,r,n),l=(i+o)/2;let c,m,u;return i!==o&&(u=i-o,m=l>.5?u/(2-i-o):u/(i+o),c=Dbe(a,r,n,u,i),c=c*60+.5),[c|0,m||0,l]}function PS(t,s,a,r){return(Array.isArray(s)?t(s[0],s[1],s[2]):t(s,a,r)).map(Bc)}function kS(t,s,a){return PS(PO,t,s,a)}function Rbe(t,s,a){return PS(Mbe,t,s,a)}function Abe(t,s,a){return PS(Tbe,t,s,a)}function kO(t){return(t%360+360)%360}function Ibe(t){const s=Ebe.exec(t);let a=255,r;if(!s)return;s[5]!==r&&(a=s[6]?df(+s[5]):Bc(+s[5]));const n=kO(+s[2]),i=+s[3]/100,o=+s[4]/100;return s[1]==="hwb"?r=Rbe(n,i,o):s[1]==="hsv"?r=Abe(n,i,o):r=kS(n,i,o),{r:r[0],g:r[1],b:r[2],a}}function Obe(t,s){var a=CS(t);a[0]=kO(a[0]+s),a=kS(a),t.r=a[0],t.g=a[1],t.b=a[2]}function Fbe(t){if(!t)return;const s=CS(t),a=s[0],r=ST(s[1]),n=ST(s[2]);return t.a<255?`hsla(${a}, ${r}%, ${n}%, ${Ml(t.a)})`:`hsl(${a}, ${r}%, ${n}%)`}const CT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},PT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Lbe(){const t={},s=Object.keys(PT),a=Object.keys(CT);let r,n,i,o,l;for(r=0;r<s.length;r++){for(o=l=s[r],n=0;n<a.length;n++)i=a[n],l=l.replace(i,CT[i]);i=parseInt(PT[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let xy;function $be(t){xy||(xy=Lbe(),xy.transparent=[0,0,0,0]);const s=xy[t.toLowerCase()];return s&&{r:s[0],g:s[1],b:s[2],a:s.length===4?s[3]:255}}const zbe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qbe(t){const s=zbe.exec(t);let a=255,r,n,i;if(s){if(s[7]!==r){const o=+s[7];a=s[8]?df(o):Dc(o*255,0,255)}return r=+s[1],n=+s[3],i=+s[5],r=255&(s[2]?df(r):Dc(r,0,255)),n=255&(s[4]?df(n):Dc(n,0,255)),i=255&(s[6]?df(i):Dc(i,0,255)),{r,g:n,b:i,a}}}function Bbe(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ml(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const wN=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,fm=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Ube(t,s,a){const r=fm(Ml(t.r)),n=fm(Ml(t.g)),i=fm(Ml(t.b));return{r:Bc(wN(r+a*(fm(Ml(s.r))-r))),g:Bc(wN(n+a*(fm(Ml(s.g))-n))),b:Bc(wN(i+a*(fm(Ml(s.b))-i))),a:t.a+a*(s.a-t.a)}}function gy(t,s,a){if(t){let r=CS(t);r[s]=Math.max(0,Math.min(r[s]+r[s]*a,s===0?360:1)),r=kS(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function EO(t,s){return t&&Object.assign(s||{},t)}function kT(t){var s={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(s={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(s.a=Bc(t[3]))):(s=EO(t,{r:0,g:0,b:0,a:1}),s.a=Bc(s.a)),s}function Vbe(t){return t.charAt(0)==="r"?qbe(t):Ibe(t)}class Mx{constructor(s){if(s instanceof Mx)return s;const a=typeof s;let r;a==="object"?r=kT(s):a==="string"&&(r=Cbe(s)||$be(s)||Vbe(s)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var s=EO(this._rgb);return s&&(s.a=Ml(s.a)),s}set rgb(s){this._rgb=kT(s)}rgbString(){return this._valid?Bbe(this._rgb):void 0}hexString(){return this._valid?kbe(this._rgb):void 0}hslString(){return this._valid?Fbe(this._rgb):void 0}mix(s,a){if(s){const r=this.rgb,n=s.rgb;let i;const o=a===i?.5:a,l=2*o-1,c=r.a-n.a,m=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-m,r.r=255&m*r.r+i*n.r+.5,r.g=255&m*r.g+i*n.g+.5,r.b=255&m*r.b+i*n.b+.5,r.a=o*r.a+(1-o)*n.a,this.rgb=r}return this}interpolate(s,a){return s&&(this._rgb=Ube(this._rgb,s._rgb,a)),this}clone(){return new Mx(this.rgb)}alpha(s){return this._rgb.a=Bc(s),this}clearer(s){const a=this._rgb;return a.a*=1-s,this}greyscale(){const s=this._rgb,a=kg(s.r*.3+s.g*.59+s.b*.11);return s.r=s.g=s.b=a,this}opaquer(s){const a=this._rgb;return a.a*=1+s,this}negate(){const s=this._rgb;return s.r=255-s.r,s.g=255-s.g,s.b=255-s.b,this}lighten(s){return gy(this._rgb,2,s),this}darken(s){return gy(this._rgb,2,-s),this}saturate(s){return gy(this._rgb,1,s),this}desaturate(s){return gy(this._rgb,1,-s),this}rotate(s){return Obe(this._rgb,s),this}}function _l(){}const Hbe=(()=>{let t=0;return()=>t++})();function xa(t){return t==null}function Nr(t){if(Array.isArray&&Array.isArray(t))return!0;const s=Object.prototype.toString.call(t);return s.slice(0,7)==="[object"&&s.slice(-6)==="Array]"}function sa(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function mn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function To(t,s){return mn(t)?t:s}function qs(t,s){return typeof t>"u"?s:t}const Wbe=(t,s)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/s,TO=(t,s)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*s:+t;function za(t,s,a){if(t&&typeof t.call=="function")return t.apply(a,s)}function _a(t,s,a,r){let n,i,o;if(Nr(t))for(i=t.length,n=0;n<i;n++)s.call(a,t[n],n);else if(sa(t))for(o=Object.keys(t),i=o.length,n=0;n<i;n++)s.call(a,t[o[n]],o[n])}function Mb(t,s){let a,r,n,i;if(!t||!s||t.length!==s.length)return!1;for(a=0,r=t.length;a<r;++a)if(n=t[a],i=s[a],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function Db(t){if(Nr(t))return t.map(Db);if(sa(t)){const s=Object.create(null),a=Object.keys(t),r=a.length;let n=0;for(;n<r;++n)s[a[n]]=Db(t[a[n]]);return s}return t}function MO(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Ybe(t,s,a,r){if(!MO(t))return;const n=s[t],i=a[t];sa(n)&&sa(i)?Dx(n,i,r):s[t]=Db(i)}function Dx(t,s,a){const r=Nr(s)?s:[s],n=r.length;if(!sa(t))return t;a=a||{};const i=a.merger||Ybe;let o;for(let l=0;l<n;++l){if(o=r[l],!sa(o))continue;const c=Object.keys(o);for(let m=0,u=c.length;m<u;++m)i(c[m],t,o,a)}return t}function Xf(t,s){return Dx(t,s,{merger:Gbe})}function Gbe(t,s,a){if(!MO(t))return;const r=s[t],n=a[t];sa(r)&&sa(n)?Xf(r,n):Object.prototype.hasOwnProperty.call(s,t)||(s[t]=Db(n))}const ET={"":t=>t,x:t=>t.x,y:t=>t.y};function Kbe(t){const s=t.split("."),a=[];let r="";for(const n of s)r+=n,r.endsWith("\\")?r=r.slice(0,-1)+".":(a.push(r),r="");return a}function Qbe(t){const s=Kbe(t);return a=>{for(const r of s){if(r==="")break;a=a&&a[r]}return a}}function pu(t,s){return(ET[s]||(ET[s]=Qbe(s)))(t)}function ES(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Rx=t=>typeof t<"u",Qc=t=>typeof t=="function",TT=(t,s)=>{if(t.size!==s.size)return!1;for(const a of t)if(!s.has(a))return!1;return!0};function Zbe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Sa=Math.PI,Ka=2*Sa,Xbe=Ka+Sa,Rb=Number.POSITIVE_INFINITY,Jbe=Sa/180,Er=Sa/2,Ed=Sa/4,MT=Sa*2/3,DO=Math.log10,Jo=Math.sign;function Jf(t,s,a){return Math.abs(t-s)<a}function DT(t){const s=Math.round(t);t=Jf(t,s,t/1e3)?s:t;const a=Math.pow(10,Math.floor(DO(t))),r=t/a;return(r<=1?1:r<=2?2:r<=5?5:10)*a}function eve(t){const s=[],a=Math.sqrt(t);let r;for(r=1;r<a;r++)t%r===0&&(s.push(r),s.push(t/r));return a===(a|0)&&s.push(a),s.sort((n,i)=>n-i).pop(),s}function tve(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ax(t){return!tve(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function sve(t,s){const a=Math.round(t);return a-s<=t&&a+s>=t}function ave(t,s,a){let r,n,i;for(r=0,n=t.length;r<n;r++)i=t[r][a],isNaN(i)||(s.min=Math.min(s.min,i),s.max=Math.max(s.max,i))}function Il(t){return t*(Sa/180)}function rve(t){return t*(180/Sa)}function RT(t){if(!mn(t))return;let s=1,a=0;for(;Math.round(t*s)/s!==t;)s*=10,a++;return a}function RO(t,s){const a=s.x-t.x,r=s.y-t.y,n=Math.sqrt(a*a+r*r);let i=Math.atan2(r,a);return i<-.5*Sa&&(i+=Ka),{angle:i,distance:n}}function b_(t,s){return Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2))}function nve(t,s){return(t-s+Xbe)%Ka-Sa}function ai(t){return(t%Ka+Ka)%Ka}function Ix(t,s,a,r){const n=ai(t),i=ai(s),o=ai(a),l=ai(i-n),c=ai(o-n),m=ai(n-i),u=ai(n-o);return n===i||n===o||r&&i===o||l>c&&m<u}function ln(t,s,a){return Math.max(s,Math.min(a,t))}function ive(t){return ln(t,-32768,32767)}function Ol(t,s,a,r=1e-6){return t>=Math.min(s,a)-r&&t<=Math.max(s,a)+r}function TS(t,s,a){a=a||(o=>t[o]<s);let r=t.length-1,n=0,i;for(;r-n>1;)i=n+r>>1,a(i)?n=i:r=i;return{lo:n,hi:r}}const Yd=(t,s,a,r)=>TS(t,a,r?n=>{const i=t[n][s];return i<a||i===a&&t[n+1][s]===a}:n=>t[n][s]<a),ove=(t,s,a)=>TS(t,a,r=>t[r][s]>=a);function lve(t,s,a){let r=0,n=t.length;for(;r<n&&t[r]<s;)r++;for(;n>r&&t[n-1]>a;)n--;return r>0||n<t.length?t.slice(r,n):t}const AO=["push","pop","shift","splice","unshift"];function cve(t,s){if(t._chartjs){t._chartjs.listeners.push(s);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),AO.forEach(a=>{const r="_onData"+ES(a),n=t[a];Object.defineProperty(t,a,{configurable:!0,enumerable:!1,value(...i){const o=n.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),o}})})}function AT(t,s){const a=t._chartjs;if(!a)return;const r=a.listeners,n=r.indexOf(s);n!==-1&&r.splice(n,1),!(r.length>0)&&(AO.forEach(i=>{delete t[i]}),delete t._chartjs)}function IO(t){const s=new Set(t);return s.size===t.length?t:Array.from(s)}const OO=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function FO(t,s){let a=[],r=!1;return function(...n){a=n,r||(r=!0,OO.call(window,()=>{r=!1,t.apply(s,a)}))}}function dve(t,s){let a;return function(...r){return s?(clearTimeout(a),a=setTimeout(t,s,r)):t.apply(this,r),s}}const MS=t=>t==="start"?"left":t==="end"?"right":"center",sn=(t,s,a)=>t==="start"?s:t==="end"?a:(s+a)/2,uve=(t,s,a,r)=>t===(r?"left":"right")?a:t==="center"?(s+a)/2:s;function mve(t,s,a){const r=s.length;let n=0,i=r;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,m=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:b,maxDefined:w}=o.getUserBounds();if(b){if(n=Math.min(Yd(c,u,h).lo,a?r:Yd(s,u,o.getPixelForValue(h)).lo),m){const S=c.slice(0,n+1).reverse().findIndex(j=>!xa(j[l.axis]));n-=Math.max(0,S)}n=ln(n,0,r-1)}if(w){let S=Math.max(Yd(c,o.axis,f,!0).hi+1,a?0:Yd(s,u,o.getPixelForValue(f),!0).hi+1);if(m){const j=c.slice(S-1).findIndex(v=>!xa(v[l.axis]));S+=Math.max(0,j)}i=ln(S,n,r)-n}else i=r-n}return{start:n,count:i}}function pve(t){const{xScale:s,yScale:a,_scaleRanges:r}=t,n={xmin:s.min,xmax:s.max,ymin:a.min,ymax:a.max};if(!r)return t._scaleRanges=n,!0;const i=r.xmin!==s.min||r.xmax!==s.max||r.ymin!==a.min||r.ymax!==a.max;return Object.assign(r,n),i}const yy=t=>t===0||t===1,IT=(t,s,a)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-s)*Ka/a)),OT=(t,s,a)=>Math.pow(2,-10*t)*Math.sin((t-s)*Ka/a)+1,ex={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Er)+1,easeOutSine:t=>Math.sin(t*Er),easeInOutSine:t=>-.5*(Math.cos(Sa*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>yy(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>yy(t)?t:IT(t,.075,.3),easeOutElastic:t=>yy(t)?t:OT(t,.075,.3),easeInOutElastic(t){return yy(t)?t:t<.5?.5*IT(t*2,.1125,.45):.5+.5*OT(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let s=1.70158;return(t/=.5)<1?.5*(t*t*(((s*=1.525)+1)*t-s)):.5*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)},easeInBounce:t=>1-ex.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ex.easeInBounce(t*2)*.5:ex.easeOutBounce(t*2-1)*.5+.5};function DS(t){if(t&&typeof t=="object"){const s=t.toString();return s==="[object CanvasPattern]"||s==="[object CanvasGradient]"}return!1}function FT(t){return DS(t)?t:new Mx(t)}function _N(t){return DS(t)?t:new Mx(t).saturate(.5).darken(.1).hexString()}const hve=["x","y","borderWidth","radius","tension"],fve=["color","borderColor","backgroundColor"];function xve(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:s=>s!=="onProgress"&&s!=="onComplete"&&s!=="fn"}),t.set("animations",{colors:{type:"color",properties:fve},numbers:{type:"number",properties:hve}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:s=>s|0}}}})}function gve(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const LT=new Map;function yve(t,s){s=s||{};const a=t+JSON.stringify(s);let r=LT.get(a);return r||(r=new Intl.NumberFormat(t,s),LT.set(a,r)),r}function RS(t,s,a){return yve(s,a).format(t)}const bve={values(t){return Nr(t)?t:""+t},numeric(t,s,a){if(t===0)return"0";const r=this.chart.options.locale;let n,i=t;if(a.length>1){const m=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(m<1e-4||m>1e15)&&(n="scientific"),i=vve(t,a)}const o=DO(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),RS(t,r,c)}};function vve(t,s){let a=s.length>3?s[2].value-s[1].value:s[1].value-s[0].value;return Math.abs(a)>=1&&t!==Math.floor(t)&&(a=t-Math.floor(t)),a}var LO={formatters:bve};function jve(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(s,a)=>a.lineWidth,tickColor:(s,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:LO.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:s=>!s.startsWith("before")&&!s.startsWith("after")&&s!=="callback"&&s!=="parser",_indexable:s=>s!=="borderDash"&&s!=="tickBorderDash"&&s!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:s=>s!=="backdropPadding"&&s!=="callback",_indexable:s=>s!=="backdropPadding"})}const hu=Object.create(null),v_=Object.create(null);function tx(t,s){if(!s)return t;const a=s.split(".");for(let r=0,n=a.length;r<n;++r){const i=a[r];t=t[i]||(t[i]=Object.create(null))}return t}function SN(t,s,a){return typeof s=="string"?Dx(tx(t,s),a):Dx(tx(t,""),s)}class Nve{constructor(s,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,n)=>_N(n.backgroundColor),this.hoverBorderColor=(r,n)=>_N(n.borderColor),this.hoverColor=(r,n)=>_N(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(s),this.apply(a)}set(s,a){return SN(this,s,a)}get(s){return tx(this,s)}describe(s,a){return SN(v_,s,a)}override(s,a){return SN(hu,s,a)}route(s,a,r,n){const i=tx(this,s),o=tx(this,r),l="_"+a;Object.defineProperties(i,{[l]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const c=this[l],m=o[n];return sa(c)?Object.assign({},m,c):qs(c,m)},set(c){this[l]=c}}})}apply(s){s.forEach(a=>a(this))}}var hr=new Nve({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[xve,gve,jve]);function wve(t){return!t||xa(t.size)||xa(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function $T(t,s,a,r,n){let i=s[n];return i||(i=s[n]=t.measureText(n).width,a.push(n)),i>r&&(r=i),r}function Td(t,s,a){const r=t.currentDevicePixelRatio,n=a!==0?Math.max(a/2,.5):0;return Math.round((s-n)*r)/r+n}function zT(t,s){!s&&!t||(s=s||t.getContext("2d"),s.save(),s.resetTransform(),s.clearRect(0,0,t.width,t.height),s.restore())}function j_(t,s,a,r){$O(t,s,a,r,null)}function $O(t,s,a,r,n){let i,o,l,c,m,u,h,f;const b=s.pointStyle,w=s.rotation,S=s.radius;let j=(w||0)*Jbe;if(b&&typeof b=="object"&&(i=b.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(a,r),t.rotate(j),t.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),t.restore();return}if(!(isNaN(S)||S<=0)){switch(t.beginPath(),b){default:n?t.ellipse(a,r,n/2,S,0,0,Ka):t.arc(a,r,S,0,Ka),t.closePath();break;case"triangle":u=n?n/2:S,t.moveTo(a+Math.sin(j)*u,r-Math.cos(j)*S),j+=MT,t.lineTo(a+Math.sin(j)*u,r-Math.cos(j)*S),j+=MT,t.lineTo(a+Math.sin(j)*u,r-Math.cos(j)*S),t.closePath();break;case"rectRounded":m=S*.516,c=S-m,o=Math.cos(j+Ed)*c,h=Math.cos(j+Ed)*(n?n/2-m:c),l=Math.sin(j+Ed)*c,f=Math.sin(j+Ed)*(n?n/2-m:c),t.arc(a-h,r-l,m,j-Sa,j-Er),t.arc(a+f,r-o,m,j-Er,j),t.arc(a+h,r+l,m,j,j+Er),t.arc(a-f,r+o,m,j+Er,j+Sa),t.closePath();break;case"rect":if(!w){c=Math.SQRT1_2*S,u=n?n/2:c,t.rect(a-u,r-c,2*u,2*c);break}j+=Ed;case"rectRot":h=Math.cos(j)*(n?n/2:S),o=Math.cos(j)*S,l=Math.sin(j)*S,f=Math.sin(j)*(n?n/2:S),t.moveTo(a-h,r-l),t.lineTo(a+f,r-o),t.lineTo(a+h,r+l),t.lineTo(a-f,r+o),t.closePath();break;case"crossRot":j+=Ed;case"cross":h=Math.cos(j)*(n?n/2:S),o=Math.cos(j)*S,l=Math.sin(j)*S,f=Math.sin(j)*(n?n/2:S),t.moveTo(a-h,r-l),t.lineTo(a+h,r+l),t.moveTo(a+f,r-o),t.lineTo(a-f,r+o);break;case"star":h=Math.cos(j)*(n?n/2:S),o=Math.cos(j)*S,l=Math.sin(j)*S,f=Math.sin(j)*(n?n/2:S),t.moveTo(a-h,r-l),t.lineTo(a+h,r+l),t.moveTo(a+f,r-o),t.lineTo(a-f,r+o),j+=Ed,h=Math.cos(j)*(n?n/2:S),o=Math.cos(j)*S,l=Math.sin(j)*S,f=Math.sin(j)*(n?n/2:S),t.moveTo(a-h,r-l),t.lineTo(a+h,r+l),t.moveTo(a+f,r-o),t.lineTo(a-f,r+o);break;case"line":o=n?n/2:Math.cos(j)*S,l=Math.sin(j)*S,t.moveTo(a-o,r-l),t.lineTo(a+o,r+l);break;case"dash":t.moveTo(a,r),t.lineTo(a+Math.cos(j)*(n?n/2:S),r+Math.sin(j)*S);break;case!1:t.closePath();break}t.fill(),s.borderWidth>0&&t.stroke()}}function Ox(t,s,a){return a=a||.5,!s||t&&t.x>s.left-a&&t.x<s.right+a&&t.y>s.top-a&&t.y<s.bottom+a}function Qv(t,s){t.save(),t.beginPath(),t.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),t.clip()}function Zv(t){t.restore()}function _ve(t,s,a,r,n){if(!s)return t.lineTo(a.x,a.y);if(n==="middle"){const i=(s.x+a.x)/2;t.lineTo(i,s.y),t.lineTo(i,a.y)}else n==="after"!=!!r?t.lineTo(s.x,a.y):t.lineTo(a.x,s.y);t.lineTo(a.x,a.y)}function Sve(t,s,a,r){if(!s)return t.lineTo(a.x,a.y);t.bezierCurveTo(r?s.cp1x:s.cp2x,r?s.cp1y:s.cp2y,r?a.cp2x:a.cp1x,r?a.cp2y:a.cp1y,a.x,a.y)}function Cve(t,s){s.translation&&t.translate(s.translation[0],s.translation[1]),xa(s.rotation)||t.rotate(s.rotation),s.color&&(t.fillStyle=s.color),s.textAlign&&(t.textAlign=s.textAlign),s.textBaseline&&(t.textBaseline=s.textBaseline)}function Pve(t,s,a,r,n){if(n.strikethrough||n.underline){const i=t.measureText(r),o=s-i.actualBoundingBoxLeft,l=s+i.actualBoundingBoxRight,c=a-i.actualBoundingBoxAscent,m=a+i.actualBoundingBoxDescent,u=n.strikethrough?(c+m)/2:m;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function kve(t,s){const a=t.fillStyle;t.fillStyle=s.color,t.fillRect(s.left,s.top,s.width,s.height),t.fillStyle=a}function Fx(t,s,a,r,n,i={}){const o=Nr(s)?s:[s],l=i.strokeWidth>0&&i.strokeColor!=="";let c,m;for(t.save(),t.font=n.string,Cve(t,i),c=0;c<o.length;++c)m=o[c],i.backdrop&&kve(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),xa(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(m,a,r,i.maxWidth)),t.fillText(m,a,r,i.maxWidth),Pve(t,a,r,m,i),r+=Number(n.lineHeight);t.restore()}function Ab(t,s){const{x:a,y:r,w:n,h:i,radius:o}=s;t.arc(a+o.topLeft,r+o.topLeft,o.topLeft,1.5*Sa,Sa,!0),t.lineTo(a,r+i-o.bottomLeft),t.arc(a+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Sa,Er,!0),t.lineTo(a+n-o.bottomRight,r+i),t.arc(a+n-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Er,0,!0),t.lineTo(a+n,r+o.topRight),t.arc(a+n-o.topRight,r+o.topRight,o.topRight,0,-Er,!0),t.lineTo(a+o.topLeft,r)}const Eve=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Tve=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Mve(t,s){const a=(""+t).match(Eve);if(!a||a[1]==="normal")return s*1.2;switch(t=+a[2],a[3]){case"px":return t;case"%":t/=100;break}return s*t}const Dve=t=>+t||0;function AS(t,s){const a={},r=sa(s),n=r?Object.keys(s):s,i=sa(t)?r?o=>qs(t[o],t[s[o]]):o=>t[o]:()=>t;for(const o of n)a[o]=Dve(i(o));return a}function zO(t){return AS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ym(t){return AS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Xi(t){const s=zO(t);return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function cn(t,s){t=t||{},s=s||hr.font;let a=qs(t.size,s.size);typeof a=="string"&&(a=parseInt(a,10));let r=qs(t.style,s.style);r&&!(""+r).match(Tve)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const n={family:qs(t.family,s.family),lineHeight:Mve(qs(t.lineHeight,s.lineHeight),a),size:a,style:r,weight:qs(t.weight,s.weight),string:""};return n.string=wve(n),n}function by(t,s,a,r){let n,i,o;for(n=0,i=t.length;n<i;++n)if(o=t[n],o!==void 0&&o!==void 0)return o}function Rve(t,s,a){const{min:r,max:n}=t,i=TO(s,(n-r)/2),o=(l,c)=>a&&l===0?0:l+c;return{min:o(r,-Math.abs(i)),max:o(n,i)}}function Su(t,s){return Object.assign(Object.create(t),s)}function IS(t,s=[""],a,r,n=()=>t[0]){const i=a||t;typeof r>"u"&&(r=VO("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:n,override:l=>IS([l,...t],s,i,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return BO(l,c,()=>qve(c,s,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return BT(l).includes(c)},ownKeys(l){return BT(l)},set(l,c,m){const u=l._storage||(l._storage=n());return l[c]=u[c]=m,delete l._keys,!0}})}function pp(t,s,a,r){const n={_cacheable:!1,_proxy:t,_context:s,_subProxy:a,_stack:new Set,_descriptors:qO(t,r),setContext:i=>pp(t,i,a,r),override:i=>pp(t.override(i),s,a,r)};return new Proxy(n,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return BO(i,o,()=>Ive(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function qO(t,s={scriptable:!0,indexable:!0}){const{_scriptable:a=s.scriptable,_indexable:r=s.indexable,_allKeys:n=s.allKeys}=t;return{allKeys:n,scriptable:a,indexable:r,isScriptable:Qc(a)?a:()=>a,isIndexable:Qc(r)?r:()=>r}}const Ave=(t,s)=>t?t+ES(s):s,OS=(t,s)=>sa(s)&&t!=="adapters"&&(Object.getPrototypeOf(s)===null||s.constructor===Object);function BO(t,s,a){if(Object.prototype.hasOwnProperty.call(t,s)||s==="constructor")return t[s];const r=a();return t[s]=r,r}function Ive(t,s,a){const{_proxy:r,_context:n,_subProxy:i,_descriptors:o}=t;let l=r[s];return Qc(l)&&o.isScriptable(s)&&(l=Ove(s,l,t,a)),Nr(l)&&l.length&&(l=Fve(s,l,t,o.isIndexable)),OS(s,l)&&(l=pp(l,n,i&&i[s],o)),l}function Ove(t,s,a,r){const{_proxy:n,_context:i,_subProxy:o,_stack:l}=a;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=s(i,o||r);return l.delete(t),OS(t,c)&&(c=FS(n._scopes,n,t,c)),c}function Fve(t,s,a,r){const{_proxy:n,_context:i,_subProxy:o,_descriptors:l}=a;if(typeof i.index<"u"&&r(t))return s[i.index%s.length];if(sa(s[0])){const c=s,m=n._scopes.filter(u=>u!==c);s=[];for(const u of c){const h=FS(m,n,t,u);s.push(pp(h,i,o&&o[t],l))}}return s}function UO(t,s,a){return Qc(t)?t(s,a):t}const Lve=(t,s)=>t===!0?s:typeof t=="string"?pu(s,t):void 0;function $ve(t,s,a,r,n){for(const i of s){const o=Lve(a,i);if(o){t.add(o);const l=UO(o._fallback,a,n);if(typeof l<"u"&&l!==a&&l!==r)return l}else if(o===!1&&typeof r<"u"&&a!==r)return null}return!1}function FS(t,s,a,r){const n=s._rootScopes,i=UO(s._fallback,a,r),o=[...t,...n],l=new Set;l.add(r);let c=qT(l,o,a,i||a,r);return c===null||typeof i<"u"&&i!==a&&(c=qT(l,o,i,c,r),c===null)?!1:IS(Array.from(l),[""],n,i,()=>zve(s,a,r))}function qT(t,s,a,r,n){for(;a;)a=$ve(t,s,a,r,n);return a}function zve(t,s,a){const r=t._getTarget();s in r||(r[s]={});const n=r[s];return Nr(n)&&sa(a)?a:n||{}}function qve(t,s,a,r){let n;for(const i of s)if(n=VO(Ave(i,t),a),typeof n<"u")return OS(t,n)?FS(a,r,t,n):n}function VO(t,s){for(const a of s){if(!a)continue;const r=a[t];if(typeof r<"u")return r}}function BT(t){let s=t._keys;return s||(s=t._keys=Bve(t._scopes)),s}function Bve(t){const s=new Set;for(const a of t)for(const r of Object.keys(a).filter(n=>!n.startsWith("_")))s.add(r);return Array.from(s)}const Uve=Number.EPSILON||1e-14,hp=(t,s)=>s<t.length&&!t[s].skip&&t[s],HO=t=>t==="x"?"y":"x";function Vve(t,s,a,r){const n=t.skip?s:t,i=s,o=a.skip?s:a,l=b_(i,n),c=b_(o,i);let m=l/(l+c),u=c/(l+c);m=isNaN(m)?0:m,u=isNaN(u)?0:u;const h=r*m,f=r*u;return{previous:{x:i.x-h*(o.x-n.x),y:i.y-h*(o.y-n.y)},next:{x:i.x+f*(o.x-n.x),y:i.y+f*(o.y-n.y)}}}function Hve(t,s,a){const r=t.length;let n,i,o,l,c,m=hp(t,0);for(let u=0;u<r-1;++u)if(c=m,m=hp(t,u+1),!(!c||!m)){if(Jf(s[u],0,Uve)){a[u]=a[u+1]=0;continue}n=a[u]/s[u],i=a[u+1]/s[u],l=Math.pow(n,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),a[u]=n*o*s[u],a[u+1]=i*o*s[u])}}function Wve(t,s,a="x"){const r=HO(a),n=t.length;let i,o,l,c=hp(t,0);for(let m=0;m<n;++m){if(o=l,l=c,c=hp(t,m+1),!l)continue;const u=l[a],h=l[r];o&&(i=(u-o[a])/3,l[`cp1${a}`]=u-i,l[`cp1${r}`]=h-i*s[m]),c&&(i=(c[a]-u)/3,l[`cp2${a}`]=u+i,l[`cp2${r}`]=h+i*s[m])}}function Yve(t,s="x"){const a=HO(s),r=t.length,n=Array(r).fill(0),i=Array(r);let o,l,c,m=hp(t,0);for(o=0;o<r;++o)if(l=c,c=m,m=hp(t,o+1),!!c){if(m){const u=m[s]-c[s];n[o]=u!==0?(m[a]-c[a])/u:0}i[o]=l?m?Jo(n[o-1])!==Jo(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}Hve(t,n,i),Wve(t,i,s)}function vy(t,s,a){return Math.max(Math.min(t,a),s)}function Gve(t,s){let a,r,n,i,o,l=Ox(t[0],s);for(a=0,r=t.length;a<r;++a)o=i,i=l,l=a<r-1&&Ox(t[a+1],s),i&&(n=t[a],o&&(n.cp1x=vy(n.cp1x,s.left,s.right),n.cp1y=vy(n.cp1y,s.top,s.bottom)),l&&(n.cp2x=vy(n.cp2x,s.left,s.right),n.cp2y=vy(n.cp2y,s.top,s.bottom)))}function Kve(t,s,a,r,n){let i,o,l,c;if(s.spanGaps&&(t=t.filter(m=>!m.skip)),s.cubicInterpolationMode==="monotone")Yve(t,n);else{let m=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=Vve(m,l,t[Math.min(i+1,o-(r?0:1))%o],s.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,m=l}s.capBezierPoints&&Gve(t,a)}function LS(){return typeof window<"u"&&typeof document<"u"}function $S(t){let s=t.parentNode;return s&&s.toString()==="[object ShadowRoot]"&&(s=s.host),s}function Ib(t,s,a){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*s.parentNode[a])):r=t,r}const Xv=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Qve(t,s){return Xv(t).getPropertyValue(s)}const Zve=["top","right","bottom","left"];function tu(t,s,a){const r={};a=a?"-"+a:"";for(let n=0;n<4;n++){const i=Zve[n];r[i]=parseFloat(t[s+"-"+i+a])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Xve=(t,s,a)=>(t>0||s>0)&&(!a||!a.shadowRoot);function Jve(t,s){const a=t.touches,r=a&&a.length?a[0]:t,{offsetX:n,offsetY:i}=r;let o=!1,l,c;if(Xve(n,i,t.target))l=n,c=i;else{const m=s.getBoundingClientRect();l=r.clientX-m.left,c=r.clientY-m.top,o=!0}return{x:l,y:c,box:o}}function Od(t,s){if("native"in t)return t;const{canvas:a,currentDevicePixelRatio:r}=s,n=Xv(a),i=n.boxSizing==="border-box",o=tu(n,"padding"),l=tu(n,"border","width"),{x:c,y:m,box:u}=Jve(t,a),h=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:b,height:w}=s;return i&&(b-=o.width+l.width,w-=o.height+l.height),{x:Math.round((c-h)/b*a.width/r),y:Math.round((m-f)/w*a.height/r)}}function e1e(t,s,a){let r,n;if(s===void 0||a===void 0){const i=t&&$S(t);if(!i)s=t.clientWidth,a=t.clientHeight;else{const o=i.getBoundingClientRect(),l=Xv(i),c=tu(l,"border","width"),m=tu(l,"padding");s=o.width-m.width-c.width,a=o.height-m.height-c.height,r=Ib(l.maxWidth,i,"clientWidth"),n=Ib(l.maxHeight,i,"clientHeight")}}return{width:s,height:a,maxWidth:r||Rb,maxHeight:n||Rb}}const Rc=t=>Math.round(t*10)/10;function t1e(t,s,a,r){const n=Xv(t),i=tu(n,"margin"),o=Ib(n.maxWidth,t,"clientWidth")||Rb,l=Ib(n.maxHeight,t,"clientHeight")||Rb,c=e1e(t,s,a);let{width:m,height:u}=c;if(n.boxSizing==="content-box"){const f=tu(n,"border","width"),b=tu(n,"padding");m-=b.width+f.width,u-=b.height+f.height}return m=Math.max(0,m-i.width),u=Math.max(0,r?m/r:u-i.height),m=Rc(Math.min(m,o,c.maxWidth)),u=Rc(Math.min(u,l,c.maxHeight)),m&&!u&&(u=Rc(m/2)),(s!==void 0||a!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,m=Rc(Math.floor(u*r))),{width:m,height:u}}function UT(t,s,a){const r=s||1,n=Rc(t.height*r),i=Rc(t.width*r);t.height=Rc(t.height),t.width=Rc(t.width);const o=t.canvas;return o.style&&(a||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==n||o.width!==i?(t.currentDevicePixelRatio=r,o.height=n,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const s1e=(function(){let t=!1;try{const s={get passive(){return t=!0,!1}};LS()&&(window.addEventListener("test",null,s),window.removeEventListener("test",null,s))}catch{}return t})();function VT(t,s){const a=Qve(t,s),r=a&&a.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Fd(t,s,a,r){return{x:t.x+a*(s.x-t.x),y:t.y+a*(s.y-t.y)}}function a1e(t,s,a,r){return{x:t.x+a*(s.x-t.x),y:r==="middle"?a<.5?t.y:s.y:r==="after"?a<1?t.y:s.y:a>0?s.y:t.y}}function r1e(t,s,a,r){const n={x:t.cp2x,y:t.cp2y},i={x:s.cp1x,y:s.cp1y},o=Fd(t,n,a),l=Fd(n,i,a),c=Fd(i,s,a),m=Fd(o,l,a),u=Fd(l,c,a);return Fd(m,u,a)}const n1e=function(t,s){return{x(a){return t+t+s-a},setWidth(a){s=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,r){return a-r},leftForLtr(a,r){return a-r}}},i1e=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,s){return t+s},leftForLtr(t,s){return t}}};function Gm(t,s,a){return t?n1e(s,a):i1e()}function WO(t,s){let a,r;(s==="ltr"||s==="rtl")&&(a=t.canvas.style,r=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",s,"important"),t.prevTextDirection=r)}function YO(t,s){s!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",s[0],s[1]))}function GO(t){return t==="angle"?{between:Ix,compare:nve,normalize:ai}:{between:Ol,compare:(s,a)=>s-a,normalize:s=>s}}function HT({start:t,end:s,count:a,loop:r,style:n}){return{start:t%a,end:s%a,loop:r&&(s-t+1)%a===0,style:n}}function o1e(t,s,a){const{property:r,start:n,end:i}=a,{between:o,normalize:l}=GO(r),c=s.length;let{start:m,end:u,loop:h}=t,f,b;if(h){for(m+=c,u+=c,f=0,b=c;f<b&&o(l(s[m%c][r]),n,i);++f)m--,u--;m%=c,u%=c}return u<m&&(u+=c),{start:m,end:u,loop:h,style:t.style}}function KO(t,s,a){if(!a)return[t];const{property:r,start:n,end:i}=a,o=s.length,{compare:l,between:c,normalize:m}=GO(r),{start:u,end:h,loop:f,style:b}=o1e(t,s,a),w=[];let S=!1,j=null,v,N,C;const P=()=>c(n,C,v)&&l(n,C)!==0,E=()=>l(i,v)===0||c(i,C,v),M=()=>S||P(),T=()=>!S||E();for(let A=u,L=u;A<=h;++A)N=s[A%o],!N.skip&&(v=m(N[r]),v!==C&&(S=c(v,n,i),j===null&&M()&&(j=l(v,n)===0?A:L),j!==null&&T()&&(w.push(HT({start:j,end:A,loop:f,count:o,style:b})),j=null),L=A,C=v));return j!==null&&w.push(HT({start:j,end:h,loop:f,count:o,style:b})),w}function QO(t,s){const a=[],r=t.segments;for(let n=0;n<r.length;n++){const i=KO(r[n],t.points,s);i.length&&a.push(...i)}return a}function l1e(t,s,a,r){let n=0,i=s-1;if(a&&!r)for(;n<s&&!t[n].skip;)n++;for(;n<s&&t[n].skip;)n++;for(n%=s,a&&(i+=n);i>n&&t[i%s].skip;)i--;return i%=s,{start:n,end:i}}function c1e(t,s,a,r){const n=t.length,i=[];let o=s,l=t[s],c;for(c=s+1;c<=a;++c){const m=t[c%n];m.skip||m.stop?l.skip||(r=!1,i.push({start:s%n,end:(c-1)%n,loop:r}),s=o=m.stop?c:null):(o=c,l.skip&&(s=c)),l=m}return o!==null&&i.push({start:s%n,end:o%n,loop:r}),i}function d1e(t,s){const a=t.points,r=t.options.spanGaps,n=a.length;if(!n)return[];const i=!!t._loop,{start:o,end:l}=l1e(a,n,i,r);if(r===!0)return WT(t,[{start:o,end:l,loop:i}],a,s);const c=l<o?l+n:l,m=!!t._fullLoop&&o===0&&l===n-1;return WT(t,c1e(a,o,c,m),a,s)}function WT(t,s,a,r){return!r||!r.setContext||!a?s:u1e(t,s,a,r)}function u1e(t,s,a,r){const n=t._chart.getContext(),i=YT(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=a.length,m=[];let u=i,h=s[0].start,f=h;function b(w,S,j,v){const N=l?-1:1;if(w!==S){for(w+=c;a[w%c].skip;)w-=N;for(;a[S%c].skip;)S+=N;w%c!==S%c&&(m.push({start:w%c,end:S%c,loop:j,style:v}),u=v,h=S%c)}}for(const w of s){h=l?h:w.start;let S=a[h%c],j;for(f=h+1;f<=w.end;f++){const v=a[f%c];j=YT(r.setContext(Su(n,{type:"segment",p0:S,p1:v,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),m1e(j,u)&&b(h,f-1,w.loop,u),S=v,u=j}h<f-1&&b(h,f-1,w.loop,u)}return m}function YT(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function m1e(t,s){if(!s)return!1;const a=[],r=function(n,i){return DS(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(s,r)}function jy(t,s,a){return t.options.clip?t[a]:s[a]}function p1e(t,s){const{xScale:a,yScale:r}=t;return a&&r?{left:jy(a,s,"left"),right:jy(a,s,"right"),top:jy(r,s,"top"),bottom:jy(r,s,"bottom")}:s}function ZO(t,s){const a=s._clip;if(a.disabled)return!1;const r=p1e(s,t.chartArea);return{left:a.left===!1?0:r.left-(a.left===!0?0:a.left),right:a.right===!1?t.width:r.right+(a.right===!0?0:a.right),top:a.top===!1?0:r.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?t.height:r.bottom+(a.bottom===!0?0:a.bottom)}}class h1e{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(s,a,r,n){const i=a.listeners[n],o=a.duration;i.forEach(l=>l({chart:s,initial:a.initial,numSteps:o,currentStep:Math.min(r-a.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=OO.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(s=Date.now()){let a=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(s),l=!0):(i[o]=i[i.length-1],i.pop());l&&(n.draw(),this._notify(n,r,s,"progress")),i.length||(r.running=!1,this._notify(n,r,s,"complete"),r.initial=!1),a+=i.length}),this._lastDate=s,a===0&&(this._running=!1)}_getAnims(s){const a=this._charts;let r=a.get(s);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(s,r)),r}listen(s,a,r){this._getAnims(s).listeners[a].push(r)}add(s,a){!a||!a.length||this._getAnims(s).items.push(...a)}has(s){return this._getAnims(s).items.length>0}start(s){const a=this._charts.get(s);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((r,n)=>Math.max(r,n._duration),0),this._refresh())}running(s){if(!this._running)return!1;const a=this._charts.get(s);return!(!a||!a.running||!a.items.length)}stop(s){const a=this._charts.get(s);if(!a||!a.items.length)return;const r=a.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();a.items=[],this._notify(s,a,Date.now(),"complete")}remove(s){return this._charts.delete(s)}}var Cl=new h1e;const GT="transparent",f1e={boolean(t,s,a){return a>.5?s:t},color(t,s,a){const r=FT(t||GT),n=r.valid&&FT(s||GT);return n&&n.valid?n.mix(r,a).hexString():s},number(t,s,a){return t+(s-t)*a}};class x1e{constructor(s,a,r,n){const i=a[r];n=by([s.to,n,i,s.from]);const o=by([s.from,i,n]);this._active=!0,this._fn=s.fn||f1e[s.type||typeof o],this._easing=ex[s.easing]||ex.linear,this._start=Math.floor(Date.now()+(s.delay||0)),this._duration=this._total=Math.floor(s.duration),this._loop=!!s.loop,this._target=a,this._prop=r,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(s,a,r){if(this._active){this._notify(!1);const n=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,s.duration)),this._total+=i,this._loop=!!s.loop,this._to=by([s.to,a,n,s.from]),this._from=by([s.from,n,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(s){const a=s-this._start,r=this._duration,n=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||a<r),!this._active){this._target[n]=l,this._notify(!0);return}if(a<0){this._target[n]=i;return}c=a/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,l,c)}wait(){const s=this._promises||(this._promises=[]);return new Promise((a,r)=>{s.push({res:a,rej:r})})}_notify(s){const a=s?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][a]()}}class XO{constructor(s,a){this._chart=s,this._properties=new Map,this.configure(a)}configure(s){if(!sa(s))return;const a=Object.keys(hr.animation),r=this._properties;Object.getOwnPropertyNames(s).forEach(n=>{const i=s[n];if(!sa(i))return;const o={};for(const l of a)o[l]=i[l];(Nr(i.properties)&&i.properties||[n]).forEach(l=>{(l===n||!r.has(l))&&r.set(l,o)})})}_animateOptions(s,a){const r=a.options,n=y1e(s,r);if(!n)return[];const i=this._createAnimations(n,r);return r.$shared&&g1e(s.options.$animations,r).then(()=>{s.options=r},()=>{}),i}_createAnimations(s,a){const r=this._properties,n=[],i=s.$animations||(s.$animations={}),o=Object.keys(a),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const m=o[c];if(m.charAt(0)==="$")continue;if(m==="options"){n.push(...this._animateOptions(s,a));continue}const u=a[m];let h=i[m];const f=r.get(m);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){s[m]=u;continue}i[m]=h=new x1e(f,s,m,u),n.push(h)}return n}update(s,a){if(this._properties.size===0){Object.assign(s,a);return}const r=this._createAnimations(s,a);if(r.length)return Cl.add(this._chart,r),!0}}function g1e(t,s){const a=[],r=Object.keys(s);for(let n=0;n<r.length;n++){const i=t[r[n]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function y1e(t,s){if(!s)return;let a=t.options;if(!a){t.options=s;return}return a.$shared&&(t.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function KT(t,s){const a=t&&t.options||{},r=a.reverse,n=a.min===void 0?s:0,i=a.max===void 0?s:0;return{start:r?i:n,end:r?n:i}}function b1e(t,s,a){if(a===!1)return!1;const r=KT(t,a),n=KT(s,a);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}function v1e(t){let s,a,r,n;return sa(t)?(s=t.top,a=t.right,r=t.bottom,n=t.left):s=a=r=n=t,{top:s,right:a,bottom:r,left:n,disabled:t===!1}}function JO(t,s){const a=[],r=t._getSortedDatasetMetas(s);let n,i;for(n=0,i=r.length;n<i;++n)a.push(r[n].index);return a}function QT(t,s,a,r={}){const n=t.keys,i=r.mode==="single";let o,l,c,m;if(s===null)return;let u=!1;for(o=0,l=n.length;o<l;++o){if(c=+n[o],c===a){if(u=!0,r.all)continue;break}m=t.values[c],mn(m)&&(i||s===0||Jo(s)===Jo(m))&&(s+=m)}return!u&&!r.all?0:s}function j1e(t,s){const{iScale:a,vScale:r}=s,n=a.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,m,u;for(c=0,m=o.length;c<m;++c)u=o[c],l[c]={[n]:u,[i]:t[u]};return l}function CN(t,s){const a=t&&t.options.stacked;return a||a===void 0&&s.stack!==void 0}function N1e(t,s,a){return`${t.id}.${s.id}.${a.stack||a.type}`}function w1e(t){const{min:s,max:a,minDefined:r,maxDefined:n}=t.getUserBounds();return{min:r?s:Number.NEGATIVE_INFINITY,max:n?a:Number.POSITIVE_INFINITY}}function _1e(t,s,a){const r=t[s]||(t[s]={});return r[a]||(r[a]={})}function ZT(t,s,a,r){for(const n of s.getMatchingVisibleMetas(r).reverse()){const i=t[n.index];if(a&&i>0||!a&&i<0)return n.index}return null}function XT(t,s){const{chart:a,_cachedMeta:r}=t,n=a._stacks||(a._stacks={}),{iScale:i,vScale:o,index:l}=r,c=i.axis,m=o.axis,u=N1e(i,o,r),h=s.length;let f;for(let b=0;b<h;++b){const w=s[b],{[c]:S,[m]:j}=w,v=w._stacks||(w._stacks={});f=v[m]=_1e(n,u,S),f[l]=j,f._top=ZT(f,o,!0,r.type),f._bottom=ZT(f,o,!1,r.type);const N=f._visualValues||(f._visualValues={});N[l]=j}}function PN(t,s){const a=t.scales;return Object.keys(a).filter(r=>a[r].axis===s).shift()}function S1e(t,s){return Su(t,{active:!1,dataset:void 0,datasetIndex:s,index:s,mode:"default",type:"dataset"})}function C1e(t,s,a){return Su(t,{active:!1,dataIndex:s,parsed:void 0,raw:void 0,element:a,index:s,mode:"default",type:"data"})}function Wh(t,s){const a=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){s=s||t._parsed;for(const n of s){const i=n._stacks;if(!i||i[r]===void 0||i[r][a]===void 0)return;delete i[r][a],i[r]._visualValues!==void 0&&i[r]._visualValues[a]!==void 0&&delete i[r]._visualValues[a]}}}const kN=t=>t==="reset"||t==="none",JT=(t,s)=>s?t:Object.assign({},t),P1e=(t,s,a)=>t&&!s.hidden&&s._stacked&&{keys:JO(a,!0),values:null};class Jv{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(s,a){this.chart=s,this._ctx=s.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const s=this._cachedMeta;this.configure(),this.linkScales(),s._stacked=CN(s.vScale,s),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(s){this.index!==s&&Wh(this._cachedMeta),this.index=s}linkScales(){const s=this.chart,a=this._cachedMeta,r=this.getDataset(),n=(h,f,b,w)=>h==="x"?f:h==="r"?w:b,i=a.xAxisID=qs(r.xAxisID,PN(s,"x")),o=a.yAxisID=qs(r.yAxisID,PN(s,"y")),l=a.rAxisID=qs(r.rAxisID,PN(s,"r")),c=a.indexAxis,m=a.iAxisID=n(c,i,o,l),u=a.vAxisID=n(c,o,i,l);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(o),a.rScale=this.getScaleForId(l),a.iScale=this.getScaleForId(m),a.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(s){return this.chart.scales[s]}_getOtherScale(s){const a=this._cachedMeta;return s===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const s=this._cachedMeta;this._data&&AT(this._data,this),s._stacked&&Wh(s)}_dataCheck(){const s=this.getDataset(),a=s.data||(s.data=[]),r=this._data;if(sa(a)){const n=this._cachedMeta;this._data=j1e(a,n)}else if(r!==a){if(r){AT(r,this);const n=this._cachedMeta;Wh(n),n._parsed=[]}a&&Object.isExtensible(a)&&cve(a,this),this._syncList=[],this._data=a}}addElements(){const s=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(s.dataset=new this.datasetElementType)}buildOrUpdateElements(s){const a=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const i=a._stacked;a._stacked=CN(a.vScale,a),a.stack!==r.stack&&(n=!0,Wh(a),a.stack=r.stack),this._resyncElements(s),(n||i!==a._stacked)&&(XT(this,a._parsed),a._stacked=CN(a.vScale,a))}configure(){const s=this.chart.config,a=s.datasetScopeKeys(this._type),r=s.getOptionScopes(this.getDataset(),a,!0);this.options=s.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(s,a){const{_cachedMeta:r,_data:n}=this,{iScale:i,_stacked:o}=r,l=i.axis;let c=s===0&&a===n.length?!0:r._sorted,m=s>0&&r._parsed[s-1],u,h,f;if(this._parsing===!1)r._parsed=n,r._sorted=!0,f=n;else{Nr(n[s])?f=this.parseArrayData(r,n,s,a):sa(n[s])?f=this.parseObjectData(r,n,s,a):f=this.parsePrimitiveData(r,n,s,a);const b=()=>h[l]===null||m&&h[l]<m[l];for(u=0;u<a;++u)r._parsed[u+s]=h=f[u],c&&(b()&&(c=!1),m=h);r._sorted=c}o&&XT(this,f)}parsePrimitiveData(s,a,r,n){const{iScale:i,vScale:o}=s,l=i.axis,c=o.axis,m=i.getLabels(),u=i===o,h=new Array(n);let f,b,w;for(f=0,b=n;f<b;++f)w=f+r,h[f]={[l]:u||i.parse(m[w],w),[c]:o.parse(a[w],w)};return h}parseArrayData(s,a,r,n){const{xScale:i,yScale:o}=s,l=new Array(n);let c,m,u,h;for(c=0,m=n;c<m;++c)u=c+r,h=a[u],l[c]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(s,a,r,n){const{xScale:i,yScale:o}=s,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,m=new Array(n);let u,h,f,b;for(u=0,h=n;u<h;++u)f=u+r,b=a[f],m[u]={x:i.parse(pu(b,l),f),y:o.parse(pu(b,c),f)};return m}getParsed(s){return this._cachedMeta._parsed[s]}getDataElement(s){return this._cachedMeta.data[s]}applyStack(s,a,r){const n=this.chart,i=this._cachedMeta,o=a[s.axis],l={keys:JO(n,!0),values:a._stacks[s.axis]._visualValues};return QT(l,o,i.index,{mode:r})}updateRangeFromParsed(s,a,r,n){const i=r[a.axis];let o=i===null?NaN:i;const l=n&&r._stacks[a.axis];n&&l&&(n.values=l,o=QT(n,i,this._cachedMeta.index)),s.min=Math.min(s.min,o),s.max=Math.max(s.max,o)}getMinMax(s,a){const r=this._cachedMeta,n=r._parsed,i=r._sorted&&s===r.iScale,o=n.length,l=this._getOtherScale(s),c=P1e(a,r,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=w1e(l);let f,b;function w(){b=n[f];const S=b[l.axis];return!mn(b[s.axis])||u>S||h<S}for(f=0;f<o&&!(!w()&&(this.updateRangeFromParsed(m,s,b,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!w()){this.updateRangeFromParsed(m,s,b,c);break}}return m}getAllParsedValues(s){const a=this._cachedMeta._parsed,r=[];let n,i,o;for(n=0,i=a.length;n<i;++n)o=a[n][s.axis],mn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(s){const a=this._cachedMeta,r=a.iScale,n=a.vScale,i=this.getParsed(s);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(s){const a=this._cachedMeta;this.update(s||"default"),a._clip=v1e(qs(this.options.clip,b1e(a.xScale,a.yScale,this.getMaxOverflow())))}update(s){}draw(){const s=this._ctx,a=this.chart,r=this._cachedMeta,n=r.data||[],i=a.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||n.length-l,m=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(s,i,l,c),u=l;u<l+c;++u){const h=n[u];h.hidden||(h.active&&m?o.push(h):h.draw(s,i))}for(u=0;u<o.length;++u)o[u].draw(s,i)}getStyle(s,a){const r=a?"active":"default";return s===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(s||0,r)}getContext(s,a,r){const n=this.getDataset();let i;if(s>=0&&s<this._cachedMeta.data.length){const o=this._cachedMeta.data[s];i=o.$context||(o.$context=C1e(this.getContext(),s,o)),i.parsed=this.getParsed(s),i.raw=n.data[s],i.index=i.dataIndex=s}else i=this.$context||(this.$context=S1e(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=r,i}resolveDatasetElementOptions(s){return this._resolveElementOptions(this.datasetElementType.id,s)}resolveDataElementOptions(s,a){return this._resolveElementOptions(this.dataElementType.id,a,s)}_resolveElementOptions(s,a="default",r){const n=a==="active",i=this._cachedDataOpts,o=s+"-"+a,l=i[o],c=this.enableOptionSharing&&Rx(r);if(l)return JT(l,c);const m=this.chart.config,u=m.datasetElementScopeKeys(this._type,s),h=n?[`${s}Hover`,"hover",s,""]:[s,""],f=m.getOptionScopes(this.getDataset(),u),b=Object.keys(hr.elements[s]),w=()=>this.getContext(r,n,a),S=m.resolveNamedOptions(f,b,w,h);return S.$shared&&(S.$shared=c,i[o]=Object.freeze(JT(S,c))),S}_resolveAnimations(s,a,r){const n=this.chart,i=this._cachedDataOpts,o=`animation-${a}`,l=i[o];if(l)return l;let c;if(n.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,a),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(s,r,a))}const m=new XO(n,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(m)),m}getSharedOptions(s){if(s.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},s))}includeOptions(s,a){return!a||kN(s)||this.chart._animationsDisabled}_getSharedOptions(s,a){const r=this.resolveDataElementOptions(s,a),n=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(a,i)||i!==n;return this.updateSharedOptions(i,a,r),{sharedOptions:i,includeOptions:o}}updateElement(s,a,r,n){kN(n)?Object.assign(s,r):this._resolveAnimations(a,n).update(s,r)}updateSharedOptions(s,a,r){s&&!kN(a)&&this._resolveAnimations(void 0,a).update(s,r)}_setStyle(s,a,r,n){s.active=n;const i=this.getStyle(a,n);this._resolveAnimations(a,r,n).update(s,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(s,a,r){this._setStyle(s,r,"active",!1)}setHoverStyle(s,a,r){this._setStyle(s,r,"active",!0)}_removeDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!1)}_setDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!0)}_resyncElements(s){const a=this._data,r=this._cachedMeta.data;for(const[l,c,m]of this._syncList)this[l](c,m);this._syncList=[];const n=r.length,i=a.length,o=Math.min(i,n);o&&this.parse(0,o),i>n?this._insertElements(n,i-n,s):i<n&&this._removeElements(i,n-i)}_insertElements(s,a,r=!0){const n=this._cachedMeta,i=n.data,o=s+a;let l;const c=m=>{for(m.length+=a,l=m.length-1;l>=o;l--)m[l]=m[l-a]};for(c(i),l=s;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(s,a),r&&this.updateElements(i,s,a,"reset")}updateElements(s,a,r,n){}_removeElements(s,a){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(s,a);r._stacked&&Wh(r,n)}r.data.splice(s,a)}_sync(s){if(this._parsing)this._syncList.push(s);else{const[a,r,n]=s;this[a](r,n)}this.chart._dataChanges.push([this.index,...s])}_onDataPush(){const s=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-s,s])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(s,a){a&&this._sync(["_removeElements",s,a]);const r=arguments.length-2;r&&this._sync(["_insertElements",s,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function k1e(t,s){if(!t._cache.$bar){const a=t.getMatchingVisibleMetas(s);let r=[];for(let n=0,i=a.length;n<i;n++)r=r.concat(a[n].controller.getAllParsedValues(t));t._cache.$bar=IO(r.sort((n,i)=>n-i))}return t._cache.$bar}function E1e(t){const s=t.iScale,a=k1e(s,t.type);let r=s._length,n,i,o,l;const c=()=>{o===32767||o===-32768||(Rx(l)&&(r=Math.min(r,Math.abs(o-l)||r)),l=o)};for(n=0,i=a.length;n<i;++n)o=s.getPixelForValue(a[n]),c();for(l=void 0,n=0,i=s.ticks.length;n<i;++n)o=s.getPixelForTick(n),c();return r}function T1e(t,s,a,r){const n=a.barThickness;let i,o;return xa(n)?(i=s.min*a.categoryPercentage,o=a.barPercentage):(i=n*r,o=1),{chunk:i/r,ratio:o,start:s.pixels[t]-i/2}}function M1e(t,s,a,r){const n=s.pixels,i=n[t];let o=t>0?n[t-1]:null,l=t<n.length-1?n[t+1]:null;const c=a.categoryPercentage;o===null&&(o=i-(l===null?s.end-s.start:l-i)),l===null&&(l=i+i-o);const m=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/r,ratio:a.barPercentage,start:m}}function D1e(t,s,a,r){const n=a.parse(t[0],r),i=a.parse(t[1],r),o=Math.min(n,i),l=Math.max(n,i);let c=o,m=l;Math.abs(o)>Math.abs(l)&&(c=l,m=o),s[a.axis]=m,s._custom={barStart:c,barEnd:m,start:n,end:i,min:o,max:l}}function eF(t,s,a,r){return Nr(t)?D1e(t,s,a,r):s[a.axis]=a.parse(t,r),s}function eM(t,s,a,r){const n=t.iScale,i=t.vScale,o=n.getLabels(),l=n===i,c=[];let m,u,h,f;for(m=a,u=a+r;m<u;++m)f=s[m],h={},h[n.axis]=l||n.parse(o[m],m),c.push(eF(f,h,i,m));return c}function EN(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function R1e(t,s,a){return t!==0?Jo(t):(s.isHorizontal()?1:-1)*(s.min>=a?1:-1)}function A1e(t){let s,a,r,n,i;return t.horizontal?(s=t.base>t.x,a="left",r="right"):(s=t.base<t.y,a="bottom",r="top"),s?(n="end",i="start"):(n="start",i="end"),{start:a,end:r,reverse:s,top:n,bottom:i}}function I1e(t,s,a,r){let n=s.borderSkipped;const i={};if(!n){t.borderSkipped=i;return}if(n===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:m,bottom:u}=A1e(t);n==="middle"&&a&&(t.enableBorderRadius=!0,(a._top||0)===r?n=m:(a._bottom||0)===r?n=u:(i[tM(u,o,l,c)]=!0,n=m)),i[tM(n,o,l,c)]=!0,t.borderSkipped=i}function tM(t,s,a,r){return r?(t=O1e(t,s,a),t=sM(t,a,s)):t=sM(t,s,a),t}function O1e(t,s,a){return t===s?a:t===a?s:t}function sM(t,s,a){return t==="start"?s:t==="end"?a:t}function F1e(t,{inflateAmount:s},a){t.inflateAmount=s==="auto"?a===1?.33:0:s}class L1e extends Jv{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(s,a,r,n){return eM(s,a,r,n)}parseArrayData(s,a,r,n){return eM(s,a,r,n)}parseObjectData(s,a,r,n){const{iScale:i,vScale:o}=s,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,m=i.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let f,b,w,S;for(f=r,b=r+n;f<b;++f)S=a[f],w={},w[i.axis]=i.parse(pu(S,m),f),h.push(eF(pu(S,u),w,o,f));return h}updateRangeFromParsed(s,a,r,n){super.updateRangeFromParsed(s,a,r,n);const i=r._custom;i&&a===this._cachedMeta.vScale&&(s.min=Math.min(s.min,i.min),s.max=Math.max(s.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(s){const a=this._cachedMeta,{iScale:r,vScale:n}=a,i=this.getParsed(s),o=i._custom,l=EN(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const s=this._cachedMeta;s.stack=this.getDataset().stack}update(s){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,s)}updateElements(s,a,r,n){const i=n==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),m=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(a,n);for(let b=a;b<a+r;b++){const w=this.getParsed(b),S=i||xa(w[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(b),j=this._calculateBarIndexPixels(b,u),v=(w._stacks||{})[l.axis],N={horizontal:m,base:S.base,enableBorderRadius:!v||EN(w._custom)||o===v._top||o===v._bottom,x:m?S.head:j.center,y:m?j.center:S.head,height:m?j.size:Math.abs(S.size),width:m?Math.abs(S.size):j.size};f&&(N.options=h||this.resolveDataElementOptions(b,s[b].active?"active":n));const C=N.options||s[b].options;I1e(N,C,v,o),F1e(N,C,u.ratio),this.updateElement(s[b],b,N,n)}}_getStacks(s,a){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(a),c=l&&l[r.axis],m=u=>{const h=u._parsed.find(b=>b[r.axis]===c),f=h&&h[u.vScale.axis];if(xa(f)||isNaN(f))return!0};for(const u of n)if(!(a!==void 0&&m(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===s))break;return o.length||o.push(void 0),o}_getStackCount(s){return this._getStacks(void 0,s).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const s=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(s).filter(r=>s[r].axis===a).shift()}_getAxis(){const s={},a=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)s[qs(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,a)]=!0;return Object.keys(s)}_getStackIndex(s,a,r){const n=this._getStacks(s,r),i=a!==void 0?n.indexOf(a):-1;return i===-1?n.length-1:i}_getRuler(){const s=this.options,a=this._cachedMeta,r=a.iScale,n=[];let i,o;for(i=0,o=a.data.length;i<o;++i)n.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const l=s.barThickness;return{min:l||E1e(a),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:s.grouped,ratio:l?1:s.categoryPercentage*s.barPercentage}}_calculateBarValuePixels(s){const{_cachedMeta:{vScale:a,_stacked:r,index:n},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(s),m=c._custom,u=EN(m);let h=c[a.axis],f=0,b=r?this.applyStack(a,c,r):h,w,S;b!==h&&(f=b-h,b=h),u&&(h=m.barStart,b=m.barEnd-m.barStart,h!==0&&Jo(h)!==Jo(m.barEnd)&&(f=0),f+=h);const j=!xa(i)&&!u?i:f;let v=a.getPixelForValue(j);if(this.chart.getDataVisibility(s)?w=a.getPixelForValue(f+b):w=v,S=w-v,Math.abs(S)<o){S=R1e(S,a,l)*o,h===l&&(v-=S/2);const N=a.getPixelForDecimal(0),C=a.getPixelForDecimal(1),P=Math.min(N,C),E=Math.max(N,C);v=Math.max(Math.min(v,E),P),w=v+S,r&&!u&&(c._stacks[a.axis]._visualValues[n]=a.getValueForPixel(w)-a.getValueForPixel(v))}if(v===a.getPixelForValue(l)){const N=Jo(S)*a.getLineWidthForValue(l)/2;v+=N,S-=N}return{size:S,base:v,head:w,center:w+S/2}}_calculateBarIndexPixels(s,a){const r=a.scale,n=this.options,i=n.skipNull,o=qs(n.maxBarThickness,1/0);let l,c;const m=this._getAxisCount();if(a.grouped){const u=i?this._getStackCount(s):a.stackCount,h=n.barThickness==="flex"?M1e(s,a,n,u*m):T1e(s,a,n,u*m),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,b=this._getAxis().indexOf(qs(f,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,i?s:void 0)+b;l=h.start+h.chunk*w+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=r.getPixelForValue(this.getParsed(s)[r.axis],s),c=Math.min(o,a.min*a.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const s=this._cachedMeta,a=s.vScale,r=s.data,n=r.length;let i=0;for(;i<n;++i)this.getParsed(i)[a.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}function $1e(t,s,a){let r=1,n=1,i=0,o=0;if(s<Ka){const l=t,c=l+s,m=Math.cos(l),u=Math.sin(l),h=Math.cos(c),f=Math.sin(c),b=(C,P,E)=>Ix(C,l,c,!0)?1:Math.max(P,P*a,E,E*a),w=(C,P,E)=>Ix(C,l,c,!0)?-1:Math.min(P,P*a,E,E*a),S=b(0,m,h),j=b(Er,u,f),v=w(Sa,m,h),N=w(Sa+Er,u,f);r=(S-v)/2,n=(j-N)/2,i=-(S+v)/2,o=-(j+N)/2}return{ratioX:r,ratioY:n,offsetX:i,offsetY:o}}class tF extends Jv{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:s=>s!=="spacing",_indexable:s=>s!=="spacing"&&!s.startsWith("borderDash")&&!s.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(s){const a=s.data,{labels:{pointStyle:r,textAlign:n,color:i,useBorderRadius:o,borderRadius:l}}=s.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((c,m)=>{const h=s.getDatasetMeta(0).controller.getStyle(m);return{text:c,fillStyle:h.backgroundColor,fontColor:i,hidden:!s.getDataVisibility(m),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:n,pointStyle:r,borderRadius:o&&(l||h.borderRadius),index:m}}):[]}},onClick(s,a,r){r.chart.toggleDataVisibility(a.index),r.chart.update()}}}};constructor(s,a){super(s,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(s,a){const r=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=r;else{let i=c=>+r[c];if(sa(r[s])){const{key:c="value"}=this._parsing;i=m=>+pu(r[m],c)}let o,l;for(o=s,l=s+a;o<l;++o)n._parsed[o]=i(o)}}_getRotation(){return Il(this.options.rotation-90)}_getCircumference(){return Il(this.options.circumference)}_getRotationExtents(){let s=Ka,a=-Ka;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,i=n._getRotation(),o=n._getCircumference();s=Math.min(s,i),a=Math.max(a,i+o)}return{rotation:s,circumference:a-s}}update(s){const a=this.chart,{chartArea:r}=a,n=this._cachedMeta,i=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),c=Math.min(Wbe(this.options.cutout,l),1),m=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:b,offsetX:w,offsetY:S}=$1e(h,u,c),j=(r.width-o)/f,v=(r.height-o)/b,N=Math.max(Math.min(j,v)/2,0),C=TO(this.options.radius,N),P=Math.max(C*c,0),E=(C-P)/this._getVisibleDatasetWeightTotal();this.offsetX=w*C,this.offsetY=S*C,n.total=this.calculateTotal(),this.outerRadius=C-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*m,0),this.updateElements(i,0,i.length,s)}_circumference(s,a){const r=this.options,n=this._cachedMeta,i=this._getCircumference();return a&&r.animation.animateRotate||!this.chart.getDataVisibility(s)||n._parsed[s]===null||n.data[s].hidden?0:this.calculateCircumference(n._parsed[s]*i/Ka)}updateElements(s,a,r,n){const i=n==="reset",o=this.chart,l=o.chartArea,m=o.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&m.animateScale,b=f?0:this.innerRadius,w=f?0:this.outerRadius,{sharedOptions:S,includeOptions:j}=this._getSharedOptions(a,n);let v=this._getRotation(),N;for(N=0;N<a;++N)v+=this._circumference(N,i);for(N=a;N<a+r;++N){const C=this._circumference(N,i),P=s[N],E={x:u+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+C,circumference:C,outerRadius:w,innerRadius:b};j&&(E.options=S||this.resolveDataElementOptions(N,P.active?"active":n)),v+=C,this.updateElement(P,N,E,n)}}calculateTotal(){const s=this._cachedMeta,a=s.data;let r=0,n;for(n=0;n<a.length;n++){const i=s._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!a[n].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(s){const a=this._cachedMeta.total;return a>0&&!isNaN(s)?Ka*(Math.abs(s)/a):0}getLabelAndValue(s){const a=this._cachedMeta,r=this.chart,n=r.data.labels||[],i=RS(a._parsed[s],r.options.locale);return{label:n[s]||"",value:i}}getMaxBorderWidth(s){let a=0;const r=this.chart;let n,i,o,l,c;if(!s){for(n=0,i=r.data.datasets.length;n<i;++n)if(r.isDatasetVisible(n)){o=r.getDatasetMeta(n),s=o.data,l=o.controller;break}}if(!s)return 0;for(n=0,i=s.length;n<i;++n)c=l.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(a=Math.max(a,c.borderWidth||0,c.hoverBorderWidth||0));return a}getMaxOffset(s){let a=0;for(let r=0,n=s.length;r<n;++r){const i=this.resolveDataElementOptions(r);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(s){let a=0;for(let r=0;r<s;++r)this.chart.isDatasetVisible(r)&&(a+=this._getRingWeight(r));return a}_getRingWeight(s){return Math.max(qs(this.chart.data.datasets[s].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class z1e extends Jv{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(s){const a=this._cachedMeta,{dataset:r,data:n=[],_dataset:i}=a,o=this.chart._animationsDisabled;let{start:l,count:c}=mve(a,n,o);this._drawStart=l,this._drawCount=c,pve(a)&&(l=0,c=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=n;const m=this.resolveDatasetElementOptions(s);this.options.showLine||(m.borderWidth=0),m.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:m},s),this.updateElements(n,l,c,s)}updateElements(s,a,r,n){const i=n==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:m}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(a,n),f=o.axis,b=l.axis,{spanGaps:w,segment:S}=this.options,j=Ax(w)?w:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||n==="none",N=a+r,C=s.length;let P=a>0&&this.getParsed(a-1);for(let E=0;E<C;++E){const M=s[E],T=v?M:{};if(E<a||E>=N){T.skip=!0;continue}const A=this.getParsed(E),L=xa(A[b]),F=T[f]=o.getPixelForValue(A[f],E),z=T[b]=i||L?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,A,c):A[b],E);T.skip=isNaN(F)||isNaN(z)||L,T.stop=E>0&&Math.abs(A[f]-P[f])>j,S&&(T.parsed=A,T.raw=m.data[E]),h&&(T.options=u||this.resolveDataElementOptions(E,M.active?"active":n)),v||this.updateElement(M,E,T,n),P=A}}getMaxOverflow(){const s=this._cachedMeta,a=s.dataset,r=a.options&&a.options.borderWidth||0,n=s.data||[];if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,o)/2}draw(){const s=this._cachedMeta;s.dataset.updateControlPoints(this.chart.chartArea,s.iScale.axis),super.draw()}}class q1e extends tF{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Md(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class zS{static override(s){Object.assign(zS.prototype,s)}options;constructor(s){this.options=s||{}}init(){}formats(){return Md()}parse(){return Md()}format(){return Md()}add(){return Md()}diff(){return Md()}startOf(){return Md()}endOf(){return Md()}}var B1e={_date:zS};function U1e(t,s,a,r){const{controller:n,data:i,_sorted:o}=t,l=n._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&s===l.axis&&s!=="r"&&o&&i.length){const m=l._reversePixels?ove:Yd;if(r){if(n._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(s);if(h){const f=m(i,s,a-h),b=m(i,s,a+h);return{lo:f.lo,hi:b.hi}}}}else{const u=m(i,s,a);if(c){const{vScale:h}=n._cachedMeta,{_parsed:f}=t,b=f.slice(0,u.lo+1).reverse().findIndex(S=>!xa(S[h.axis]));u.lo-=Math.max(0,b);const w=f.slice(u.hi).findIndex(S=>!xa(S[h.axis]));u.hi+=Math.max(0,w)}return u}}return{lo:0,hi:i.length-1}}function e1(t,s,a,r,n){const i=t.getSortedVisibleDatasetMetas(),o=a[s];for(let l=0,c=i.length;l<c;++l){const{index:m,data:u}=i[l],{lo:h,hi:f}=U1e(i[l],s,o,n);for(let b=h;b<=f;++b){const w=u[b];w.skip||r(w,m,b)}}}function V1e(t){const s=t.indexOf("x")!==-1,a=t.indexOf("y")!==-1;return function(r,n){const i=s?Math.abs(r.x-n.x):0,o=a?Math.abs(r.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function TN(t,s,a,r,n){const i=[];return!n&&!t.isPointInArea(s)||e1(t,a,s,function(l,c,m){!n&&!Ox(l,t.chartArea,0)||l.inRange(s.x,s.y,r)&&i.push({element:l,datasetIndex:c,index:m})},!0),i}function H1e(t,s,a,r){let n=[];function i(o,l,c){const{startAngle:m,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=RO(o,{x:s.x,y:s.y});Ix(h,m,u)&&n.push({element:o,datasetIndex:l,index:c})}return e1(t,a,s,i),n}function W1e(t,s,a,r,n,i){let o=[];const l=V1e(a);let c=Number.POSITIVE_INFINITY;function m(u,h,f){const b=u.inRange(s.x,s.y,n);if(r&&!b)return;const w=u.getCenterPoint(n);if(!(!!i||t.isPointInArea(w))&&!b)return;const j=l(s,w);j<c?(o=[{element:u,datasetIndex:h,index:f}],c=j):j===c&&o.push({element:u,datasetIndex:h,index:f})}return e1(t,a,s,m),o}function MN(t,s,a,r,n,i){return!i&&!t.isPointInArea(s)?[]:a==="r"&&!r?H1e(t,s,a,n):W1e(t,s,a,r,n,i)}function aM(t,s,a,r,n){const i=[],o=a==="x"?"inXRange":"inYRange";let l=!1;return e1(t,a,s,(c,m,u)=>{c[o]&&c[o](s[a],n)&&(i.push({element:c,datasetIndex:m,index:u}),l=l||c.inRange(s.x,s.y,n))}),r&&!l?[]:i}var Y1e={modes:{index(t,s,a,r){const n=Od(s,t),i=a.axis||"x",o=a.includeInvisible||!1,l=a.intersect?TN(t,n,i,r,o):MN(t,n,i,!1,r,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(m=>{const u=l[0].index,h=m.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:m.index,index:u})}),c):[]},dataset(t,s,a,r){const n=Od(s,t),i=a.axis||"xy",o=a.includeInvisible||!1;let l=a.intersect?TN(t,n,i,r,o):MN(t,n,i,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,m=t.getDatasetMeta(c).data;l=[];for(let u=0;u<m.length;++u)l.push({element:m[u],datasetIndex:c,index:u})}return l},point(t,s,a,r){const n=Od(s,t),i=a.axis||"xy",o=a.includeInvisible||!1;return TN(t,n,i,r,o)},nearest(t,s,a,r){const n=Od(s,t),i=a.axis||"xy",o=a.includeInvisible||!1;return MN(t,n,i,a.intersect,r,o)},x(t,s,a,r){const n=Od(s,t);return aM(t,n,"x",a.intersect,r)},y(t,s,a,r){const n=Od(s,t);return aM(t,n,"y",a.intersect,r)}}};const sF=["left","top","right","bottom"];function Yh(t,s){return t.filter(a=>a.pos===s)}function rM(t,s){return t.filter(a=>sF.indexOf(a.pos)===-1&&a.box.axis===s)}function Gh(t,s){return t.sort((a,r)=>{const n=s?r:a,i=s?a:r;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function G1e(t){const s=[];let a,r,n,i,o,l;for(a=0,r=(t||[]).length;a<r;++a)n=t[a],{position:i,options:{stack:o,stackWeight:l=1}}=n,s.push({index:a,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&i+o,stackWeight:l});return s}function K1e(t){const s={};for(const a of t){const{stack:r,pos:n,stackWeight:i}=a;if(!r||!sF.includes(n))continue;const o=s[r]||(s[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return s}function Q1e(t,s){const a=K1e(t),{vBoxMaxWidth:r,hBoxMaxHeight:n}=s;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,m=a[l.stack],u=m&&l.stackWeight/m.weight;l.horizontal?(l.width=u?u*r:c&&s.availableWidth,l.height=n):(l.width=r,l.height=u?u*n:c&&s.availableHeight)}return a}function Z1e(t){const s=G1e(t),a=Gh(s.filter(m=>m.box.fullSize),!0),r=Gh(Yh(s,"left"),!0),n=Gh(Yh(s,"right")),i=Gh(Yh(s,"top"),!0),o=Gh(Yh(s,"bottom")),l=rM(s,"x"),c=rM(s,"y");return{fullSize:a,leftAndTop:r.concat(i),rightAndBottom:n.concat(c).concat(o).concat(l),chartArea:Yh(s,"chartArea"),vertical:r.concat(n).concat(c),horizontal:i.concat(o).concat(l)}}function nM(t,s,a,r){return Math.max(t[a],s[a])+Math.max(t[r],s[r])}function aF(t,s){t.top=Math.max(t.top,s.top),t.left=Math.max(t.left,s.left),t.bottom=Math.max(t.bottom,s.bottom),t.right=Math.max(t.right,s.right)}function X1e(t,s,a,r){const{pos:n,box:i}=a,o=t.maxPadding;if(!sa(n)){a.size&&(t[n]-=a.size);const h=r[a.stack]||{size:0,count:1};h.size=Math.max(h.size,a.horizontal?i.height:i.width),a.size=h.size/h.count,t[n]+=a.size}i.getPadding&&aF(o,i.getPadding());const l=Math.max(0,s.outerWidth-nM(o,t,"left","right")),c=Math.max(0,s.outerHeight-nM(o,t,"top","bottom")),m=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,a.horizontal?{same:m,other:u}:{same:u,other:m}}function J1e(t){const s=t.maxPadding;function a(r){const n=Math.max(s[r]-t[r],0);return t[r]+=n,n}t.y+=a("top"),t.x+=a("left"),a("right"),a("bottom")}function eje(t,s){const a=s.maxPadding;function r(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{i[o]=Math.max(s[o],a[o])}),i}return r(t?["left","right"]:["top","bottom"])}function uf(t,s,a,r){const n=[];let i,o,l,c,m,u;for(i=0,o=t.length,m=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||s.w,l.height||s.h,eje(l.horizontal,s));const{same:h,other:f}=X1e(s,a,l,r);m|=h&&n.length,u=u||f,c.fullSize||n.push(l)}return m&&uf(n,s,a,r)||u}function Ny(t,s,a,r,n){t.top=a,t.left=s,t.right=s+r,t.bottom=a+n,t.width=r,t.height=n}function iM(t,s,a,r){const n=a.padding;let{x:i,y:o}=s;for(const l of t){const c=l.box,m=r[l.stack]||{placed:0,weight:1},u=l.stackWeight/m.weight||1;if(l.horizontal){const h=s.w*u,f=m.size||c.height;Rx(m.start)&&(o=m.start),c.fullSize?Ny(c,n.left,o,a.outerWidth-n.right-n.left,f):Ny(c,s.left+m.placed,o,h,f),m.start=o,m.placed+=h,o=c.bottom}else{const h=s.h*u,f=m.size||c.width;Rx(m.start)&&(i=m.start),c.fullSize?Ny(c,i,n.top,f,a.outerHeight-n.bottom-n.top):Ny(c,i,s.top+m.placed,f,h),m.start=i,m.placed+=h,i=c.right}}s.x=i,s.y=o}var zi={addBox(t,s){t.boxes||(t.boxes=[]),s.fullSize=s.fullSize||!1,s.position=s.position||"top",s.weight=s.weight||0,s._layers=s._layers||function(){return[{z:0,draw(a){s.draw(a)}}]},t.boxes.push(s)},removeBox(t,s){const a=t.boxes?t.boxes.indexOf(s):-1;a!==-1&&t.boxes.splice(a,1)},configure(t,s,a){s.fullSize=a.fullSize,s.position=a.position,s.weight=a.weight},update(t,s,a,r){if(!t)return;const n=Xi(t.options.layout.padding),i=Math.max(s-n.width,0),o=Math.max(a-n.height,0),l=Z1e(t.boxes),c=l.vertical,m=l.horizontal;_a(t.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const u=c.reduce((S,j)=>j.box.options&&j.box.options.display===!1?S:S+1,0)||1,h=Object.freeze({outerWidth:s,outerHeight:a,padding:n,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},n);aF(f,Xi(r));const b=Object.assign({maxPadding:f,w:i,h:o,x:n.left,y:n.top},n),w=Q1e(c.concat(m),h);uf(l.fullSize,b,h,w),uf(c,b,h,w),uf(m,b,h,w)&&uf(c,b,h,w),J1e(b),iM(l.leftAndTop,b,h,w),b.x+=b.w,b.y+=b.h,iM(l.rightAndBottom,b,h,w),t.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},_a(l.chartArea,S=>{const j=S.box;Object.assign(j,t.chartArea),j.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class rF{acquireContext(s,a){}releaseContext(s){return!1}addEventListener(s,a,r){}removeEventListener(s,a,r){}getDevicePixelRatio(){return 1}getMaximumSize(s,a,r,n){return a=Math.max(0,a||s.width),r=r||s.height,{width:a,height:Math.max(0,n?Math.floor(a/n):r)}}isAttached(s){return!0}updateConfig(s){}}class tje extends rF{acquireContext(s){return s&&s.getContext&&s.getContext("2d")||null}updateConfig(s){s.options.animation=!1}}const Jy="$chartjs",sje={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},oM=t=>t===null||t==="";function aje(t,s){const a=t.style,r=t.getAttribute("height"),n=t.getAttribute("width");if(t[Jy]={initial:{height:r,width:n,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",oM(n)){const i=VT(t,"width");i!==void 0&&(t.width=i)}if(oM(r))if(t.style.height==="")t.height=t.width/(s||2);else{const i=VT(t,"height");i!==void 0&&(t.height=i)}return t}const nF=s1e?{passive:!0}:!1;function rje(t,s,a){t&&t.addEventListener(s,a,nF)}function nje(t,s,a){t&&t.canvas&&t.canvas.removeEventListener(s,a,nF)}function ije(t,s){const a=sje[t.type]||t.type,{x:r,y:n}=Od(t,s);return{type:a,chart:s,native:t,x:r!==void 0?r:null,y:n!==void 0?n:null}}function Ob(t,s){for(const a of t)if(a===s||a.contains(s))return!0}function oje(t,s,a){const r=t.canvas,n=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Ob(l.addedNodes,r),o=o&&!Ob(l.removedNodes,r);o&&a()});return n.observe(document,{childList:!0,subtree:!0}),n}function lje(t,s,a){const r=t.canvas,n=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Ob(l.removedNodes,r),o=o&&!Ob(l.addedNodes,r);o&&a()});return n.observe(document,{childList:!0,subtree:!0}),n}const Lx=new Map;let lM=0;function iF(){const t=window.devicePixelRatio;t!==lM&&(lM=t,Lx.forEach((s,a)=>{a.currentDevicePixelRatio!==t&&s()}))}function cje(t,s){Lx.size||window.addEventListener("resize",iF),Lx.set(t,s)}function dje(t){Lx.delete(t),Lx.size||window.removeEventListener("resize",iF)}function uje(t,s,a){const r=t.canvas,n=r&&$S(r);if(!n)return;const i=FO((l,c)=>{const m=n.clientWidth;a(l,c),m<n.clientWidth&&a()},window),o=new ResizeObserver(l=>{const c=l[0],m=c.contentRect.width,u=c.contentRect.height;m===0&&u===0||i(m,u)});return o.observe(n),cje(t,i),o}function DN(t,s,a){a&&a.disconnect(),s==="resize"&&dje(t)}function mje(t,s,a){const r=t.canvas,n=FO(i=>{t.ctx!==null&&a(ije(i,t))},t);return rje(r,s,n),n}class pje extends rF{acquireContext(s,a){const r=s&&s.getContext&&s.getContext("2d");return r&&r.canvas===s?(aje(s,a),r):null}releaseContext(s){const a=s.canvas;if(!a[Jy])return!1;const r=a[Jy].initial;["height","width"].forEach(i=>{const o=r[i];xa(o)?a.removeAttribute(i):a.setAttribute(i,o)});const n=r.style||{};return Object.keys(n).forEach(i=>{a.style[i]=n[i]}),a.width=a.width,delete a[Jy],!0}addEventListener(s,a,r){this.removeEventListener(s,a);const n=s.$proxies||(s.$proxies={}),o={attach:oje,detach:lje,resize:uje}[a]||mje;n[a]=o(s,a,r)}removeEventListener(s,a){const r=s.$proxies||(s.$proxies={}),n=r[a];if(!n)return;({attach:DN,detach:DN,resize:DN}[a]||nje)(s,a,n),r[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(s,a,r,n){return t1e(s,a,r,n)}isAttached(s){const a=s&&$S(s);return!!(a&&a.isConnected)}}function hje(t){return!LS()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?tje:pje}let Xl=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(s){const{x:a,y:r}=this.getProps(["x","y"],s);return{x:a,y:r}}hasValue(){return Ax(this.x)&&Ax(this.y)}getProps(s,a){const r=this.$animations;if(!a||!r)return this;const n={};return s.forEach(i=>{n[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),n}};function fje(t,s){const a=t.options.ticks,r=xje(t),n=Math.min(a.maxTicksLimit||r,r),i=a.major.enabled?yje(s):[],o=i.length,l=i[0],c=i[o-1],m=[];if(o>n)return bje(s,m,i,o/n),m;const u=gje(i,s,n);if(o>0){let h,f;const b=o>1?Math.round((c-l)/(o-1)):null;for(wy(s,m,u,xa(b)?0:l-b,l),h=0,f=o-1;h<f;h++)wy(s,m,u,i[h],i[h+1]);return wy(s,m,u,c,xa(b)?s.length:c+b),m}return wy(s,m,u),m}function xje(t){const s=t.options.offset,a=t._tickSize(),r=t._length/a+(s?0:1),n=t._maxLength/a;return Math.floor(Math.min(r,n))}function gje(t,s,a){const r=vje(t),n=s.length/a;if(!r)return Math.max(n,1);const i=eve(r);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>n)return c}return Math.max(n,1)}function yje(t){const s=[];let a,r;for(a=0,r=t.length;a<r;a++)t[a].major&&s.push(a);return s}function bje(t,s,a,r){let n=0,i=a[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(s.push(t[o]),n++,i=a[n*r])}function wy(t,s,a,r,n){const i=qs(r,0),o=Math.min(qs(n,t.length),t.length);let l=0,c,m,u;for(a=Math.ceil(a),n&&(c=n-r,a=c/Math.floor(c/a)),u=i;u<0;)l++,u=Math.round(i+l*a);for(m=Math.max(i,0);m<o;m++)m===u&&(s.push(t[m]),l++,u=Math.round(i+l*a))}function vje(t){const s=t.length;let a,r;if(s<2)return!1;for(r=t[0],a=1;a<s;++a)if(t[a]-t[a-1]!==r)return!1;return r}const jje=t=>t==="left"?"right":t==="right"?"left":t,cM=(t,s,a)=>s==="top"||s==="left"?t[s]+a:t[s]-a,dM=(t,s)=>Math.min(s||t,t);function uM(t,s){const a=[],r=t.length/s,n=t.length;let i=0;for(;i<n;i+=r)a.push(t[Math.floor(i)]);return a}function Nje(t,s,a){const r=t.ticks.length,n=Math.min(s,r-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(n),m;if(!(a&&(r===1?m=Math.max(c-i,o-c):s===0?m=(t.getPixelForTick(1)-c)/2:m=(c-t.getPixelForTick(n-1))/2,c+=n<s?m:-m,c<i-l||c>o+l)))return c}function wje(t,s){_a(t,a=>{const r=a.gc,n=r.length/2;let i;if(n>s){for(i=0;i<n;++i)delete a.data[r[i]];r.splice(0,n)}})}function Kh(t){return t.drawTicks?t.tickLength:0}function mM(t,s){if(!t.display)return 0;const a=cn(t.font,s),r=Xi(t.padding);return(Nr(t.text)?t.text.length:1)*a.lineHeight+r.height}function _je(t,s){return Su(t,{scale:s,type:"scale"})}function Sje(t,s,a){return Su(t,{tick:a,index:s,type:"tick"})}function Cje(t,s,a){let r=MS(t);return(a&&s!=="right"||!a&&s==="right")&&(r=jje(r)),r}function Pje(t,s,a,r){const{top:n,left:i,bottom:o,right:l,chart:c}=t,{chartArea:m,scales:u}=c;let h=0,f,b,w;const S=o-n,j=l-i;if(t.isHorizontal()){if(b=sn(r,i,l),sa(a)){const v=Object.keys(a)[0],N=a[v];w=u[v].getPixelForValue(N)+S-s}else a==="center"?w=(m.bottom+m.top)/2+S-s:w=cM(t,a,s);f=l-i}else{if(sa(a)){const v=Object.keys(a)[0],N=a[v];b=u[v].getPixelForValue(N)-j+s}else a==="center"?b=(m.left+m.right)/2-j+s:b=cM(t,a,s);w=sn(r,o,n),h=a==="left"?-Er:Er}return{titleX:b,titleY:w,maxWidth:f,rotation:h}}class kp extends Xl{constructor(s){super(),this.id=s.id,this.type=s.type,this.options=void 0,this.ctx=s.ctx,this.chart=s.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(s){this.options=s.setContext(this.getContext()),this.axis=s.axis,this._userMin=this.parse(s.min),this._userMax=this.parse(s.max),this._suggestedMin=this.parse(s.suggestedMin),this._suggestedMax=this.parse(s.suggestedMax)}parse(s,a){return s}getUserBounds(){let{_userMin:s,_userMax:a,_suggestedMin:r,_suggestedMax:n}=this;return s=To(s,Number.POSITIVE_INFINITY),a=To(a,Number.NEGATIVE_INFINITY),r=To(r,Number.POSITIVE_INFINITY),n=To(n,Number.NEGATIVE_INFINITY),{min:To(s,r),max:To(a,n),minDefined:mn(s),maxDefined:mn(a)}}getMinMax(s){let{min:a,max:r,minDefined:n,maxDefined:i}=this.getUserBounds(),o;if(n&&i)return{min:a,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,m=l.length;c<m;++c)o=l[c].controller.getMinMax(this,s),n||(a=Math.min(a,o.min)),i||(r=Math.max(r,o.max));return a=i&&a>r?r:a,r=n&&a>r?a:r,{min:To(a,To(r,a)),max:To(r,To(a,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const s=this.chart.data;return this.options.labels||(this.isHorizontal()?s.xLabels:s.yLabels)||s.labels||[]}getLabelItems(s=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(s))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){za(this.options.beforeUpdate,[this])}update(s,a,r){const{beginAtZero:n,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=s,this.maxHeight=a,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Rve(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?uM(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=fje(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let s=this.options.reverse,a,r;this.isHorizontal()?(a=this.left,r=this.right):(a=this.top,r=this.bottom,s=!s),this._startPixel=a,this._endPixel=r,this._reversePixels=s,this._length=r-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){za(this.options.afterUpdate,[this])}beforeSetDimensions(){za(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){za(this.options.afterSetDimensions,[this])}_callHooks(s){this.chart.notifyPlugins(s,this.getContext()),za(this.options[s],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){za(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(s){const a=this.options.ticks;let r,n,i;for(r=0,n=s.length;r<n;r++)i=s[r],i.label=za(a.callback,[i.value,r,s],this)}afterTickToLabelConversion(){za(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){za(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const s=this.options,a=s.ticks,r=dM(this.ticks.length,s.ticks.maxTicksLimit),n=a.minRotation||0,i=a.maxRotation;let o=n,l,c,m;if(!this._isVisible()||!a.display||n>=i||r<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,b=ln(this.chart.width-h,0,this.maxWidth);l=s.offset?this.maxWidth/r:b/(r-1),h+6>l&&(l=b/(r-(s.offset?.5:1)),c=this.maxHeight-Kh(s.grid)-a.padding-mM(s.title,this.chart.options.font),m=Math.sqrt(h*h+f*f),o=rve(Math.min(Math.asin(ln((u.highest.height+6)/l,-1,1)),Math.asin(ln(c/m,-1,1))-Math.asin(ln(f/m,-1,1)))),o=Math.max(n,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){za(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){za(this.options.beforeFit,[this])}fit(){const s={width:0,height:0},{chart:a,options:{ticks:r,title:n,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=mM(n,a.options.font);if(l?(s.width=this.maxWidth,s.height=Kh(i)+c):(s.height=this.maxHeight,s.width=Kh(i)+c),r.display&&this.ticks.length){const{first:m,last:u,widest:h,highest:f}=this._getLabelSizes(),b=r.padding*2,w=Il(this.labelRotation),S=Math.cos(w),j=Math.sin(w);if(l){const v=r.mirror?0:j*h.width+S*f.height;s.height=Math.min(this.maxHeight,s.height+v+b)}else{const v=r.mirror?0:S*h.width+j*f.height;s.width=Math.min(this.maxWidth,s.width+v+b)}this._calculatePadding(m,u,j,S)}}this._handleMargins(),l?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=s.height):(this.width=s.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(s,a,r,n){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,m=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,b=0;c?m?(f=n*s.width,b=r*a.height):(f=r*s.height,b=n*a.width):i==="start"?b=a.width:i==="end"?f=s.width:i!=="inner"&&(f=s.width/2,b=a.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((b-h+o)*this.width/(this.width-h),0)}else{let u=a.height/2,h=s.height/2;i==="start"?(u=0,h=s.height):i==="end"&&(u=a.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){za(this.options.afterFit,[this])}isHorizontal(){const{axis:s,position:a}=this.options;return a==="top"||a==="bottom"||s==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(s){this.beforeTickToLabelConversion(),this.generateTickLabels(s);let a,r;for(a=0,r=s.length;a<r;a++)xa(s[a].label)&&(s.splice(a,1),r--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let s=this._labelSizes;if(!s){const a=this.options.ticks.sampleSize;let r=this.ticks;a<r.length&&(r=uM(r,a)),this._labelSizes=s=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return s}_computeLabelSizes(s,a,r){const{ctx:n,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(a/dM(a,r));let m=0,u=0,h,f,b,w,S,j,v,N,C,P,E;for(h=0;h<a;h+=c){if(w=s[h].label,S=this._resolveTickFontOptions(h),n.font=j=S.string,v=i[j]=i[j]||{data:{},gc:[]},N=S.lineHeight,C=P=0,!xa(w)&&!Nr(w))C=$T(n,v.data,v.gc,C,w),P=N;else if(Nr(w))for(f=0,b=w.length;f<b;++f)E=w[f],!xa(E)&&!Nr(E)&&(C=$T(n,v.data,v.gc,C,E),P+=N);o.push(C),l.push(P),m=Math.max(C,m),u=Math.max(P,u)}wje(i,a);const M=o.indexOf(m),T=l.indexOf(u),A=L=>({width:o[L]||0,height:l[L]||0});return{first:A(0),last:A(a-1),widest:A(M),highest:A(T),widths:o,heights:l}}getLabelForValue(s){return s}getPixelForValue(s,a){return NaN}getValueForPixel(s){}getPixelForTick(s){const a=this.ticks;return s<0||s>a.length-1?null:this.getPixelForValue(a[s].value)}getPixelForDecimal(s){this._reversePixels&&(s=1-s);const a=this._startPixel+s*this._length;return ive(this._alignToPixels?Td(this.chart,a,0):a)}getDecimalForPixel(s){const a=(s-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:s,max:a}=this;return s<0&&a<0?a:s>0&&a>0?s:0}getContext(s){const a=this.ticks||[];if(s>=0&&s<a.length){const r=a[s];return r.$context||(r.$context=Sje(this.getContext(),s,r))}return this.$context||(this.$context=_je(this.chart.getContext(),this))}_tickSize(){const s=this.options.ticks,a=Il(this.labelRotation),r=Math.abs(Math.cos(a)),n=Math.abs(Math.sin(a)),i=this._getLabelSizes(),o=s.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*r>l*n?l/r:c/n:c*n<l*r?c/r:l/n}_isVisible(){const s=this.options.display;return s!=="auto"?!!s:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(s){const a=this.axis,r=this.chart,n=this.options,{grid:i,position:o,border:l}=n,c=i.offset,m=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Kh(i),b=[],w=l.setContext(this.getContext()),S=w.display?w.width:0,j=S/2,v=function(q){return Td(r,q,S)};let N,C,P,E,M,T,A,L,F,z,I,Q;if(o==="top")N=v(this.bottom),T=this.bottom-f,L=N-j,z=v(s.top)+j,Q=s.bottom;else if(o==="bottom")N=v(this.top),z=s.top,Q=v(s.bottom)-j,T=N+j,L=this.top+f;else if(o==="left")N=v(this.right),M=this.right-f,A=N-j,F=v(s.left)+j,I=s.right;else if(o==="right")N=v(this.left),F=s.left,I=v(s.right)-j,M=N+j,A=this.left+f;else if(a==="x"){if(o==="center")N=v((s.top+s.bottom)/2+.5);else if(sa(o)){const q=Object.keys(o)[0],V=o[q];N=v(this.chart.scales[q].getPixelForValue(V))}z=s.top,Q=s.bottom,T=N+j,L=T+f}else if(a==="y"){if(o==="center")N=v((s.left+s.right)/2);else if(sa(o)){const q=Object.keys(o)[0],V=o[q];N=v(this.chart.scales[q].getPixelForValue(V))}M=N-j,A=M-f,F=s.left,I=s.right}const Y=qs(n.ticks.maxTicksLimit,h),B=Math.max(1,Math.ceil(h/Y));for(C=0;C<h;C+=B){const q=this.getContext(C),V=i.setContext(q),G=l.setContext(q),H=V.lineWidth,D=V.color,R=G.dash||[],$=G.dashOffset,W=V.tickWidth,J=V.tickColor,te=V.tickBorderDash||[],ee=V.tickBorderDashOffset;P=Nje(this,C,c),P!==void 0&&(E=Td(r,P,H),m?M=A=F=I=E:T=L=z=Q=E,b.push({tx1:M,ty1:T,tx2:A,ty2:L,x1:F,y1:z,x2:I,y2:Q,width:H,color:D,borderDash:R,borderDashOffset:$,tickWidth:W,tickColor:J,tickBorderDash:te,tickBorderDashOffset:ee}))}return this._ticksLength=h,this._borderValue=N,b}_computeLabelItems(s){const a=this.axis,r=this.options,{position:n,ticks:i}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:m,padding:u,mirror:h}=i,f=Kh(r.grid),b=f+u,w=h?-u:b,S=-Il(this.labelRotation),j=[];let v,N,C,P,E,M,T,A,L,F,z,I,Q="middle";if(n==="top")M=this.bottom-w,T=this._getXAxisLabelAlignment();else if(n==="bottom")M=this.top+w,T=this._getXAxisLabelAlignment();else if(n==="left"){const B=this._getYAxisLabelAlignment(f);T=B.textAlign,E=B.x}else if(n==="right"){const B=this._getYAxisLabelAlignment(f);T=B.textAlign,E=B.x}else if(a==="x"){if(n==="center")M=(s.top+s.bottom)/2+b;else if(sa(n)){const B=Object.keys(n)[0],q=n[B];M=this.chart.scales[B].getPixelForValue(q)+b}T=this._getXAxisLabelAlignment()}else if(a==="y"){if(n==="center")E=(s.left+s.right)/2-b;else if(sa(n)){const B=Object.keys(n)[0],q=n[B];E=this.chart.scales[B].getPixelForValue(q)}T=this._getYAxisLabelAlignment(f).textAlign}a==="y"&&(c==="start"?Q="top":c==="end"&&(Q="bottom"));const Y=this._getLabelSizes();for(v=0,N=l.length;v<N;++v){C=l[v],P=C.label;const B=i.setContext(this.getContext(v));A=this.getPixelForTick(v)+i.labelOffset,L=this._resolveTickFontOptions(v),F=L.lineHeight,z=Nr(P)?P.length:1;const q=z/2,V=B.color,G=B.textStrokeColor,H=B.textStrokeWidth;let D=T;o?(E=A,T==="inner"&&(v===N-1?D=this.options.reverse?"left":"right":v===0?D=this.options.reverse?"right":"left":D="center"),n==="top"?m==="near"||S!==0?I=-z*F+F/2:m==="center"?I=-Y.highest.height/2-q*F+F:I=-Y.highest.height+F/2:m==="near"||S!==0?I=F/2:m==="center"?I=Y.highest.height/2-q*F:I=Y.highest.height-z*F,h&&(I*=-1),S!==0&&!B.showLabelBackdrop&&(E+=F/2*Math.sin(S))):(M=A,I=(1-z)*F/2);let R;if(B.showLabelBackdrop){const $=Xi(B.backdropPadding),W=Y.heights[v],J=Y.widths[v];let te=I-$.top,ee=0-$.left;switch(Q){case"middle":te-=W/2;break;case"bottom":te-=W;break}switch(T){case"center":ee-=J/2;break;case"right":ee-=J;break;case"inner":v===N-1?ee-=J:v>0&&(ee-=J/2);break}R={left:ee,top:te,width:J+$.width,height:W+$.height,color:B.backdropColor}}j.push({label:P,font:L,textOffset:I,options:{rotation:S,color:V,strokeColor:G,strokeWidth:H,textAlign:D,textBaseline:Q,translation:[E,M],backdrop:R}})}return j}_getXAxisLabelAlignment(){const{position:s,ticks:a}=this.options;if(-Il(this.labelRotation))return s==="top"?"left":"right";let n="center";return a.align==="start"?n="left":a.align==="end"?n="right":a.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(s){const{position:a,ticks:{crossAlign:r,mirror:n,padding:i}}=this.options,o=this._getLabelSizes(),l=s+i,c=o.widest.width;let m,u;return a==="left"?n?(u=this.right+i,r==="near"?m="left":r==="center"?(m="center",u+=c/2):(m="right",u+=c)):(u=this.right-l,r==="near"?m="right":r==="center"?(m="center",u-=c/2):(m="left",u=this.left)):a==="right"?n?(u=this.left+i,r==="near"?m="right":r==="center"?(m="center",u-=c/2):(m="left",u-=c)):(u=this.left+l,r==="near"?m="left":r==="center"?(m="center",u+=c/2):(m="right",u=this.right)):m="right",{textAlign:m,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const s=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:s.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:s.width}}drawBackground(){const{ctx:s,options:{backgroundColor:a},left:r,top:n,width:i,height:o}=this;a&&(s.save(),s.fillStyle=a,s.fillRect(r,n,i,o),s.restore())}getLineWidthForValue(s){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const n=this.ticks.findIndex(i=>i.value===s);return n>=0?a.setContext(this.getContext(n)).lineWidth:0}drawGrid(s){const a=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(s));let i,o;const l=(c,m,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(m.x,m.y),r.stroke(),r.restore())};if(a.display)for(i=0,o=n.length;i<o;++i){const c=n[i];a.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),a.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:s,ctx:a,options:{border:r,grid:n}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let m,u,h,f;this.isHorizontal()?(m=Td(s,this.left,o)-o/2,u=Td(s,this.right,l)+l/2,h=f=c):(h=Td(s,this.top,o)-o/2,f=Td(s,this.bottom,l)+l/2,m=u=c),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(m,h),a.lineTo(u,f),a.stroke(),a.restore()}drawLabels(s){if(!this.options.ticks.display)return;const r=this.ctx,n=this._computeLabelArea();n&&Qv(r,n);const i=this.getLabelItems(s);for(const o of i){const l=o.options,c=o.font,m=o.label,u=o.textOffset;Fx(r,m,0,u,c,l)}n&&Zv(r)}drawTitle(){const{ctx:s,options:{position:a,title:r,reverse:n}}=this;if(!r.display)return;const i=cn(r.font),o=Xi(r.padding),l=r.align;let c=i.lineHeight/2;a==="bottom"||a==="center"||sa(a)?(c+=o.bottom,Nr(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:m,titleY:u,maxWidth:h,rotation:f}=Pje(this,c,a,l);Fx(s,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:Cje(l,a,n),textBaseline:"middle",translation:[m,u]})}draw(s){this._isVisible()&&(this.drawBackground(),this.drawGrid(s),this.drawBorder(),this.drawTitle(),this.drawLabels(s))}_layers(){const s=this.options,a=s.ticks&&s.ticks.z||0,r=qs(s.grid&&s.grid.z,-1),n=qs(s.border&&s.border.z,0);return!this._isVisible()||this.draw!==kp.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(s){const a=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let i,o;for(i=0,o=a.length;i<o;++i){const l=a[i];l[r]===this.id&&(!s||l.type===s)&&n.push(l)}return n}_resolveTickFontOptions(s){const a=this.options.ticks.setContext(this.getContext(s));return cn(a.font)}_maxDigits(){const s=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/s}}class _y{constructor(s,a,r){this.type=s,this.scope=a,this.override=r,this.items=Object.create(null)}isForType(s){return Object.prototype.isPrototypeOf.call(this.type.prototype,s.prototype)}register(s){const a=Object.getPrototypeOf(s);let r;Tje(a)&&(r=this.register(a));const n=this.items,i=s.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+s);return i in n||(n[i]=s,kje(s,o,r),this.override&&hr.override(s.id,s.overrides)),o}get(s){return this.items[s]}unregister(s){const a=this.items,r=s.id,n=this.scope;r in a&&delete a[r],n&&r in hr[n]&&(delete hr[n][r],this.override&&delete hu[r])}}function kje(t,s,a){const r=Dx(Object.create(null),[a?hr.get(a):{},hr.get(s),t.defaults]);hr.set(s,r),t.defaultRoutes&&Eje(s,t.defaultRoutes),t.descriptors&&hr.describe(s,t.descriptors)}function Eje(t,s){Object.keys(s).forEach(a=>{const r=a.split("."),n=r.pop(),i=[t].concat(r).join("."),o=s[a].split("."),l=o.pop(),c=o.join(".");hr.route(i,n,c,l)})}function Tje(t){return"id"in t&&"defaults"in t}class Mje{constructor(){this.controllers=new _y(Jv,"datasets",!0),this.elements=new _y(Xl,"elements"),this.plugins=new _y(Object,"plugins"),this.scales=new _y(kp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...s){this._each("register",s)}remove(...s){this._each("unregister",s)}addControllers(...s){this._each("register",s,this.controllers)}addElements(...s){this._each("register",s,this.elements)}addPlugins(...s){this._each("register",s,this.plugins)}addScales(...s){this._each("register",s,this.scales)}getController(s){return this._get(s,this.controllers,"controller")}getElement(s){return this._get(s,this.elements,"element")}getPlugin(s){return this._get(s,this.plugins,"plugin")}getScale(s){return this._get(s,this.scales,"scale")}removeControllers(...s){this._each("unregister",s,this.controllers)}removeElements(...s){this._each("unregister",s,this.elements)}removePlugins(...s){this._each("unregister",s,this.plugins)}removeScales(...s){this._each("unregister",s,this.scales)}_each(s,a,r){[...a].forEach(n=>{const i=r||this._getRegistryForType(n);r||i.isForType(n)||i===this.plugins&&n.id?this._exec(s,i,n):_a(n,o=>{const l=r||this._getRegistryForType(o);this._exec(s,l,o)})})}_exec(s,a,r){const n=ES(s);za(r["before"+n],[],r),a[s](r),za(r["after"+n],[],r)}_getRegistryForType(s){for(let a=0;a<this._typedRegistries.length;a++){const r=this._typedRegistries[a];if(r.isForType(s))return r}return this.plugins}_get(s,a,r){const n=a.get(s);if(n===void 0)throw new Error('"'+s+'" is not a registered '+r+".");return n}}var Do=new Mje;class Dje{constructor(){this._init=void 0}notify(s,a,r,n){if(a==="beforeInit"&&(this._init=this._createDescriptors(s,!0),this._notify(this._init,s,"install")),this._init===void 0)return;const i=n?this._descriptors(s).filter(n):this._descriptors(s),o=this._notify(i,s,a,r);return a==="afterDestroy"&&(this._notify(i,s,"stop"),this._notify(this._init,s,"uninstall"),this._init=void 0),o}_notify(s,a,r,n){n=n||{};for(const i of s){const o=i.plugin,l=o[r],c=[a,n,i.options];if(za(l,c,o)===!1&&n.cancelable)return!1}return!0}invalidate(){xa(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(s){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(s);return this._notifyStateChanges(s),a}_createDescriptors(s,a){const r=s&&s.config,n=qs(r.options&&r.options.plugins,{}),i=Rje(r);return n===!1&&!a?[]:Ije(s,i,n,a)}_notifyStateChanges(s){const a=this._oldCache||[],r=this._cache,n=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(n(a,r),s,"stop"),this._notify(n(r,a),s,"start")}}function Rje(t){const s={},a=[],r=Object.keys(Do.plugins.items);for(let i=0;i<r.length;i++)a.push(Do.getPlugin(r[i]));const n=t.plugins||[];for(let i=0;i<n.length;i++){const o=n[i];a.indexOf(o)===-1&&(a.push(o),s[o.id]=!0)}return{plugins:a,localIds:s}}function Aje(t,s){return!s&&t===!1?null:t===!0?{}:t}function Ije(t,{plugins:s,localIds:a},r,n){const i=[],o=t.getContext();for(const l of s){const c=l.id,m=Aje(r[c],n);m!==null&&i.push({plugin:l,options:Oje(t.config,{plugin:l,local:a[c]},m,o)})}return i}function Oje(t,{plugin:s,local:a},r,n){const i=t.pluginScopeKeys(s),o=t.getOptionScopes(r,i);return a&&s.defaults&&o.push(s.defaults),t.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function N_(t,s){const a=hr.datasets[t]||{};return((s.datasets||{})[t]||{}).indexAxis||s.indexAxis||a.indexAxis||"x"}function Fje(t,s){let a=t;return t==="_index_"?a=s:t==="_value_"&&(a=s==="x"?"y":"x"),a}function Lje(t,s){return t===s?"_index_":"_value_"}function pM(t){if(t==="x"||t==="y"||t==="r")return t}function $je(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function w_(t,...s){if(pM(t))return t;for(const a of s){const r=a.axis||$je(a.position)||t.length>1&&pM(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function hM(t,s,a){if(a[s+"AxisID"]===t)return{axis:s}}function zje(t,s){if(s.data&&s.data.datasets){const a=s.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(a.length)return hM(t,"x",a[0])||hM(t,"y",a[0])}return{}}function qje(t,s){const a=hu[t.type]||{scales:{}},r=s.scales||{},n=N_(t.type,s),i=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!sa(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=w_(o,l,zje(o,t),hr.scales[l.type]),m=Lje(c,n),u=a.scales||{};i[o]=Xf(Object.create(null),[{axis:c},l,u[c],u[m]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||N_(l,s),u=(hu[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=Fje(h,c),b=o[f+"AxisID"]||f;i[b]=i[b]||Object.create(null),Xf(i[b],[{axis:f},r[b],u[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];Xf(l,[hr.scales[l.type],hr.scale])}),i}function oF(t){const s=t.options||(t.options={});s.plugins=qs(s.plugins,{}),s.scales=qje(t,s)}function lF(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Bje(t){return t=t||{},t.data=lF(t.data),oF(t),t}const fM=new Map,cF=new Set;function Sy(t,s){let a=fM.get(t);return a||(a=s(),fM.set(t,a),cF.add(a)),a}const Qh=(t,s,a)=>{const r=pu(s,a);r!==void 0&&t.add(r)};class Uje{constructor(s){this._config=Bje(s),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(s){this._config.type=s}get data(){return this._config.data}set data(s){this._config.data=lF(s)}get options(){return this._config.options}set options(s){this._config.options=s}get plugins(){return this._config.plugins}update(){const s=this._config;this.clearCache(),oF(s)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(s){return Sy(s,()=>[[`datasets.${s}`,""]])}datasetAnimationScopeKeys(s,a){return Sy(`${s}.transition.${a}`,()=>[[`datasets.${s}.transitions.${a}`,`transitions.${a}`],[`datasets.${s}`,""]])}datasetElementScopeKeys(s,a){return Sy(`${s}-${a}`,()=>[[`datasets.${s}.elements.${a}`,`datasets.${s}`,`elements.${a}`,""]])}pluginScopeKeys(s){const a=s.id,r=this.type;return Sy(`${r}-plugin-${a}`,()=>[[`plugins.${a}`,...s.additionalOptionScopes||[]]])}_cachedScopes(s,a){const r=this._scopeCache;let n=r.get(s);return(!n||a)&&(n=new Map,r.set(s,n)),n}getOptionScopes(s,a,r){const{options:n,type:i}=this,o=this._cachedScopes(s,r),l=o.get(a);if(l)return l;const c=new Set;a.forEach(u=>{s&&(c.add(s),u.forEach(h=>Qh(c,s,h))),u.forEach(h=>Qh(c,n,h)),u.forEach(h=>Qh(c,hu[i]||{},h)),u.forEach(h=>Qh(c,hr,h)),u.forEach(h=>Qh(c,v_,h))});const m=Array.from(c);return m.length===0&&m.push(Object.create(null)),cF.has(a)&&o.set(a,m),m}chartOptionScopes(){const{options:s,type:a}=this;return[s,hu[a]||{},hr.datasets[a]||{},{type:a},hr,v_]}resolveNamedOptions(s,a,r,n=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=xM(this._resolverCache,s,n);let c=o;if(Hje(o,a)){i.$shared=!1,r=Qc(r)?r():r;const m=this.createResolver(s,r,l);c=pp(o,r,m)}for(const m of a)i[m]=c[m];return i}createResolver(s,a,r=[""],n){const{resolver:i}=xM(this._resolverCache,s,r);return sa(a)?pp(i,a,void 0,n):i}}function xM(t,s,a){let r=t.get(s);r||(r=new Map,t.set(s,r));const n=a.join();let i=r.get(n);return i||(i={resolver:IS(s,a),subPrefixes:a.filter(l=>!l.toLowerCase().includes("hover"))},r.set(n,i)),i}const Vje=t=>sa(t)&&Object.getOwnPropertyNames(t).some(s=>Qc(t[s]));function Hje(t,s){const{isScriptable:a,isIndexable:r}=qO(t);for(const n of s){const i=a(n),o=r(n),l=(o||i)&&t[n];if(i&&(Qc(l)||Vje(l))||o&&Nr(l))return!0}return!1}var Wje="4.5.1";const Yje=["top","bottom","left","right","chartArea"];function gM(t,s){return t==="top"||t==="bottom"||Yje.indexOf(t)===-1&&s==="x"}function yM(t,s){return function(a,r){return a[t]===r[t]?a[s]-r[s]:a[t]-r[t]}}function bM(t){const s=t.chart,a=s.options.animation;s.notifyPlugins("afterRender"),za(a&&a.onComplete,[t],s)}function Gje(t){const s=t.chart,a=s.options.animation;za(a&&a.onProgress,[t],s)}function dF(t){return LS()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const eb={},vM=t=>{const s=dF(t);return Object.values(eb).filter(a=>a.canvas===s).pop()};function Kje(t,s,a){const r=Object.keys(t);for(const n of r){const i=+n;if(i>=s){const o=t[n];delete t[n],(a>0||i>s)&&(t[i+a]=o)}}}function Qje(t,s,a,r){return!a||t.type==="mouseout"?null:r?s:t}let t1=class{static defaults=hr;static instances=eb;static overrides=hu;static registry=Do;static version=Wje;static getChart=vM;static register(...s){Do.add(...s),jM()}static unregister(...s){Do.remove(...s),jM()}constructor(s,a){const r=this.config=new Uje(a),n=dF(s),i=vM(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||hje(n)),this.platform.updateConfig(r);const l=this.platform.acquireContext(n,o.aspectRatio),c=l&&l.canvas,m=c&&c.height,u=c&&c.width;if(this.id=Hbe(),this.ctx=l,this.canvas=c,this.width=u,this.height=m,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Dje,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=dve(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],eb[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Cl.listen(this,"complete",bM),Cl.listen(this,"progress",Gje),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:s,maintainAspectRatio:a},width:r,height:n,_aspectRatio:i}=this;return xa(s)?a&&i?i:n?r/n:null:s}get data(){return this.config.data}set data(s){this.config.data=s}get options(){return this._options}set options(s){this.config.options=s}get registry(){return Do}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():UT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zT(this.canvas,this.ctx),this}stop(){return Cl.stop(this),this}resize(s,a){Cl.running(this)?this._resizeBeforeDraw={width:s,height:a}:this._resize(s,a)}_resize(s,a){const r=this.options,n=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,s,a,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,UT(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),za(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};_a(a,(r,n)=>{r.id=n})}buildOrUpdateScales(){const s=this.options,a=s.scales,r=this.scales,n=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let i=[];a&&(i=i.concat(Object.keys(a).map(o=>{const l=a[o],c=w_(o,l),m=c==="r",u=c==="x";return{options:l,dposition:m?"chartArea":u?"bottom":"left",dtype:m?"radialLinear":u?"category":"linear"}}))),_a(i,o=>{const l=o.options,c=l.id,m=w_(c,l),u=qs(l.type,o.dtype);(l.position===void 0||gM(l.position,m)!==gM(o.dposition))&&(l.position=o.dposition),n[c]=!0;let h=null;if(c in r&&r[c].type===u)h=r[c];else{const f=Do.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,s)}),_a(n,(o,l)=>{o||delete r[l]}),_a(r,o=>{zi.configure(this,o,o.options),zi.addBox(this,o)})}_updateMetasets(){const s=this._metasets,a=this.data.datasets.length,r=s.length;if(s.sort((n,i)=>n.index-i.index),r>a){for(let n=a;n<r;++n)this._destroyDatasetMeta(n);s.splice(a,r-a)}this._sortedMetasets=s.slice(0).sort(yM("order","index"))}_removeUnreferencedMetasets(){const{_metasets:s,data:{datasets:a}}=this;s.length>a.length&&delete this._stacks,s.forEach((r,n)=>{a.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const s=[],a=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=a.length;r<n;r++){const i=a[r];let o=this.getDatasetMeta(r);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=i.indexAxis||N_(l,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=Do.getController(l),{datasetElementType:m,dataElementType:u}=hr.datasets[l];Object.assign(c,{dataElementType:Do.getElement(u),datasetElementType:m&&Do.getElement(m)}),o.controller=new c(this,r),s.push(o.controller)}}return this._updateMetasets(),s}_resetElements(){_a(this.data.datasets,(s,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(s){const a=this.config;a.update();const r=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:s,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let m=0,u=this.data.datasets.length;m<u;m++){const{controller:h}=this.getDatasetMeta(m),f=!n&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),n||_a(i,m=>{m.reset()}),this._updateDatasets(s),this.notifyPlugins("afterUpdate",{mode:s}),this._layers.sort(yM("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){_a(this.scales,s=>{zi.removeBox(this,s)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const s=this.options,a=new Set(Object.keys(this._listeners)),r=new Set(s.events);(!TT(a,r)||!!this._responsiveListeners!==s.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:s}=this,a=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:i}of a){const o=r==="_removeElements"?-i:i;Kje(s,n,o)}}_getUniformDataChanges(){const s=this._dataChanges;if(!s||!s.length)return;this._dataChanges=[];const a=this.data.datasets.length,r=i=>new Set(s.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),n=r(0);for(let i=1;i<a;i++)if(!TT(n,r(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(s){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;zi.update(this,this.width,this.height,s);const a=this.chartArea,r=a.width<=0||a.height<=0;this._layers=[],_a(this.boxes,n=>{r&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(s){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:s,cancelable:!0})!==!1){for(let a=0,r=this.data.datasets.length;a<r;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,r=this.data.datasets.length;a<r;++a)this._updateDataset(a,Qc(s)?s({datasetIndex:a}):s);this.notifyPlugins("afterDatasetsUpdate",{mode:s})}}_updateDataset(s,a){const r=this.getDatasetMeta(s),n={meta:r,index:s,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(r.controller._update(a),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Cl.has(this)?this.attached&&!Cl.running(this)&&Cl.start(this):(this.draw(),bM({chart:this})))}draw(){let s;if(this._resizeBeforeDraw){const{width:r,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(s=0;s<a.length&&a[s].z<=0;++s)a[s].draw(this.chartArea);for(this._drawDatasets();s<a.length;++s)a[s].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(s){const a=this._sortedMetasets,r=[];let n,i;for(n=0,i=a.length;n<i;++n){const o=a[n];(!s||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const s=this.getSortedVisibleDatasetMetas();for(let a=s.length-1;a>=0;--a)this._drawDataset(s[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(s){const a=this.ctx,r={meta:s,index:s.index,cancelable:!0},n=ZO(this,s);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(n&&Qv(a,n),s.controller.draw(),n&&Zv(a),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(s){return Ox(s,this.chartArea,this._minPadding)}getElementsAtEventForMode(s,a,r,n){const i=Y1e.modes[a];return typeof i=="function"?i(this,s,r,n):[]}getDatasetMeta(s){const a=this.data.datasets[s],r=this._metasets;let n=r.filter(i=>i&&i._dataset===a).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:s,_dataset:a,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=Su(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(s){const a=this.data.datasets[s];if(!a)return!1;const r=this.getDatasetMeta(s);return typeof r.hidden=="boolean"?!r.hidden:!a.hidden}setDatasetVisibility(s,a){const r=this.getDatasetMeta(s);r.hidden=!a}toggleDataVisibility(s){this._hiddenIndices[s]=!this._hiddenIndices[s]}getDataVisibility(s){return!this._hiddenIndices[s]}_updateVisibility(s,a,r){const n=r?"show":"hide",i=this.getDatasetMeta(s),o=i.controller._resolveAnimations(void 0,n);Rx(a)?(i.data[a].hidden=!r,this.update()):(this.setDatasetVisibility(s,r),o.update(i,{visible:r}),this.update(l=>l.datasetIndex===s?n:void 0))}hide(s,a){this._updateVisibility(s,a,!1)}show(s,a){this._updateVisibility(s,a,!0)}_destroyDatasetMeta(s){const a=this._metasets[s];a&&a.controller&&a.controller._destroy(),delete this._metasets[s]}_stop(){let s,a;for(this.stop(),Cl.remove(this),s=0,a=this.data.datasets.length;s<a;++s)this._destroyDatasetMeta(s)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:s,ctx:a}=this;this._stop(),this.config.clearCache(),s&&(this.unbindEvents(),zT(s,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete eb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...s){return this.canvas.toDataURL(...s)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const s=this._listeners,a=this.platform,r=(i,o)=>{a.addEventListener(this,i,o),s[i]=o},n=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};_a(this.options.events,i=>r(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const s=this._responsiveListeners,a=this.platform,r=(c,m)=>{a.addEventListener(this,c,m),s[c]=m},n=(c,m)=>{s[c]&&(a.removeEventListener(this,c,m),delete s[c])},i=(c,m)=>{this.canvas&&this.resize(c,m)};let o;const l=()=>{n("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),r("attach",l)},a.isAttached(this.canvas)?l():o()}unbindEvents(){_a(this._listeners,(s,a)=>{this.platform.removeEventListener(this,a,s)}),this._listeners={},_a(this._responsiveListeners,(s,a)=>{this.platform.removeEventListener(this,a,s)}),this._responsiveListeners=void 0}updateHoverStyle(s,a,r){const n=r?"set":"remove";let i,o,l,c;for(a==="dataset"&&(i=this.getDatasetMeta(s[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),l=0,c=s.length;l<c;++l){o=s[l];const m=o&&this.getDatasetMeta(o.datasetIndex).controller;m&&m[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(s){const a=this._active||[],r=s.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Mb(r,a)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,a))}notifyPlugins(s,a,r){return this._plugins.notify(this,s,a,r)}isPluginEnabled(s){return this._plugins._cache.filter(a=>a.plugin.id===s).length===1}_updateHoverStyles(s,a,r){const n=this.options.hover,i=(c,m)=>c.filter(u=>!m.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(a,s),l=r?s:i(s,a);o.length&&this.updateHoverStyle(o,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(s,a){const r={event:s,replay:a,cancelable:!0,inChartArea:this.isPointInArea(s)},n=o=>(o.options.events||this.options.events).includes(s.native.type);if(this.notifyPlugins("beforeEvent",r,n)===!1)return;const i=this._handleEvent(s,a,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(i||r.changed)&&this.render(),this}_handleEvent(s,a,r){const{_active:n=[],options:i}=this,o=a,l=this._getActiveElements(s,n,r,o),c=Zbe(s),m=Qje(s,this._lastEvent,r,c);r&&(this._lastEvent=null,za(i.onHover,[s,l,this],this),c&&za(i.onClick,[s,l,this],this));const u=!Mb(l,n);return(u||a)&&(this._active=l,this._updateHoverStyles(l,n,a)),this._lastEvent=m,u}_getActiveElements(s,a,r,n){if(s.type==="mouseout")return[];if(!r)return a;const i=this.options.hover;return this.getElementsAtEventForMode(s,i.mode,i,n)}};function jM(){return _a(t1.instances,t=>t._plugins.invalidate())}function Zje(t,s,a){const{startAngle:r,x:n,y:i,outerRadius:o,innerRadius:l,options:c}=s,{borderWidth:m,borderJoinStyle:u}=c,h=Math.min(m/o,ai(r-a));if(t.beginPath(),t.arc(n,i,o-m/2,r+h/2,a-h/2),l>0){const f=Math.min(m/l,ai(r-a));t.arc(n,i,l+m/2,a-f/2,r+f/2,!0)}else{const f=Math.min(m/2,o*ai(r-a));if(u==="round")t.arc(n,i,f,a-Sa/2,r+Sa/2,!0);else if(u==="bevel"){const b=2*f*f,w=-b*Math.cos(a+Sa/2)+n,S=-b*Math.sin(a+Sa/2)+i,j=b*Math.cos(r+Sa/2)+n,v=b*Math.sin(r+Sa/2)+i;t.lineTo(w,S),t.lineTo(j,v)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function Xje(t,s,a){const{startAngle:r,pixelMargin:n,x:i,y:o,outerRadius:l,innerRadius:c}=s;let m=n/l;t.beginPath(),t.arc(i,o,l,r-m,a+m),c>n?(m=n/c,t.arc(i,o,c,a+m,r-m,!0)):t.arc(i,o,n,a+Er,r-Er),t.closePath(),t.clip()}function Jje(t){return AS(t,["outerStart","outerEnd","innerStart","innerEnd"])}function e2e(t,s,a,r){const n=Jje(t.options.borderRadius),i=(a-s)/2,o=Math.min(i,r*s/2),l=c=>{const m=(a-Math.min(i,c))*r/2;return ln(c,0,Math.min(i,m))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:ln(n.innerStart,0,o),innerEnd:ln(n.innerEnd,0,o)}}function xm(t,s,a,r){return{x:a+t*Math.cos(s),y:r+t*Math.sin(s)}}function Fb(t,s,a,r,n,i){const{x:o,y:l,startAngle:c,pixelMargin:m,innerRadius:u}=s,h=Math.max(s.outerRadius+r+a-m,0),f=u>0?u+r+a+m:0;let b=0;const w=n-c;if(r){const B=u>0?u-r:0,q=h>0?h-r:0,V=(B+q)/2,G=V!==0?w*V/(V+r):w;b=(w-G)/2}const S=Math.max(.001,w*h-a/Sa)/h,j=(w-S)/2,v=c+j+b,N=n-j-b,{outerStart:C,outerEnd:P,innerStart:E,innerEnd:M}=e2e(s,f,h,N-v),T=h-C,A=h-P,L=v+C/T,F=N-P/A,z=f+E,I=f+M,Q=v+E/z,Y=N-M/I;if(t.beginPath(),i){const B=(L+F)/2;if(t.arc(o,l,h,L,B),t.arc(o,l,h,B,F),P>0){const H=xm(A,F,o,l);t.arc(H.x,H.y,P,F,N+Er)}const q=xm(I,N,o,l);if(t.lineTo(q.x,q.y),M>0){const H=xm(I,Y,o,l);t.arc(H.x,H.y,M,N+Er,Y+Math.PI)}const V=(N-M/f+(v+E/f))/2;if(t.arc(o,l,f,N-M/f,V,!0),t.arc(o,l,f,V,v+E/f,!0),E>0){const H=xm(z,Q,o,l);t.arc(H.x,H.y,E,Q+Math.PI,v-Er)}const G=xm(T,v,o,l);if(t.lineTo(G.x,G.y),C>0){const H=xm(T,L,o,l);t.arc(H.x,H.y,C,v-Er,L)}}else{t.moveTo(o,l);const B=Math.cos(L)*h+o,q=Math.sin(L)*h+l;t.lineTo(B,q);const V=Math.cos(F)*h+o,G=Math.sin(F)*h+l;t.lineTo(V,G)}t.closePath()}function t2e(t,s,a,r,n){const{fullCircles:i,startAngle:o,circumference:l}=s;let c=s.endAngle;if(i){Fb(t,s,a,r,c,n);for(let m=0;m<i;++m)t.fill();isNaN(l)||(c=o+(l%Ka||Ka))}return Fb(t,s,a,r,c,n),t.fill(),c}function s2e(t,s,a,r,n){const{fullCircles:i,startAngle:o,circumference:l,options:c}=s,{borderWidth:m,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:b}=c,w=c.borderAlign==="inner";if(!m)return;t.setLineDash(h||[]),t.lineDashOffset=f,w?(t.lineWidth=m*2,t.lineJoin=u||"round"):(t.lineWidth=m,t.lineJoin=u||"bevel");let S=s.endAngle;if(i){Fb(t,s,a,r,S,n);for(let j=0;j<i;++j)t.stroke();isNaN(l)||(S=o+(l%Ka||Ka))}w&&Xje(t,s,S),c.selfJoin&&S-o>=Sa&&b===0&&u!=="miter"&&Zje(t,s,S),i||(Fb(t,s,a,r,S,n),t.stroke())}class a2e extends Xl{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:s=>s!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(s){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,a,r){const n=this.getProps(["x","y"],r),{angle:i,distance:o}=RO(n,{x:s,y:a}),{startAngle:l,endAngle:c,innerRadius:m,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,b=qs(h,c-l),w=Ix(i,l,c)&&l!==c,S=b>=Ka||w,j=Ol(o,m+f,u+f);return S&&j}getCenterPoint(s){const{x:a,y:r,startAngle:n,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:c,spacing:m}=this.options,u=(n+i)/2,h=(o+l+m+c)/2;return{x:a+Math.cos(u)*h,y:r+Math.sin(u)*h}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:a,circumference:r}=this,n=(a.offset||0)/4,i=(a.spacing||0)/2,o=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=r>Ka?Math.floor(r/Ka):0,r===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const l=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(l)*n,Math.sin(l)*n);const c=1-Math.sin(Math.min(Sa,r||0)),m=n*c;s.fillStyle=a.backgroundColor,s.strokeStyle=a.borderColor,t2e(s,this,m,i,o),s2e(s,this,m,i,o),s.restore()}}function uF(t,s,a=s){t.lineCap=qs(a.borderCapStyle,s.borderCapStyle),t.setLineDash(qs(a.borderDash,s.borderDash)),t.lineDashOffset=qs(a.borderDashOffset,s.borderDashOffset),t.lineJoin=qs(a.borderJoinStyle,s.borderJoinStyle),t.lineWidth=qs(a.borderWidth,s.borderWidth),t.strokeStyle=qs(a.borderColor,s.borderColor)}function r2e(t,s,a){t.lineTo(a.x,a.y)}function n2e(t){return t.stepped?_ve:t.tension||t.cubicInterpolationMode==="monotone"?Sve:r2e}function mF(t,s,a={}){const r=t.length,{start:n=0,end:i=r-1}=a,{start:o,end:l}=s,c=Math.max(n,o),m=Math.min(i,l),u=n<o&&i<o||n>l&&i>l;return{count:r,start:c,loop:s.loop,ilen:m<c&&!u?r+m-c:m-c}}function i2e(t,s,a,r){const{points:n,options:i}=s,{count:o,start:l,loop:c,ilen:m}=mF(n,a,r),u=n2e(i);let{move:h=!0,reverse:f}=r||{},b,w,S;for(b=0;b<=m;++b)w=n[(l+(f?m-b:b))%o],!w.skip&&(h?(t.moveTo(w.x,w.y),h=!1):u(t,S,w,f,i.stepped),S=w);return c&&(w=n[(l+(f?m:0))%o],u(t,S,w,f,i.stepped)),!!c}function o2e(t,s,a,r){const n=s.points,{count:i,start:o,ilen:l}=mF(n,a,r),{move:c=!0,reverse:m}=r||{};let u=0,h=0,f,b,w,S,j,v;const N=P=>(o+(m?l-P:P))%i,C=()=>{S!==j&&(t.lineTo(u,j),t.lineTo(u,S),t.lineTo(u,v))};for(c&&(b=n[N(0)],t.moveTo(b.x,b.y)),f=0;f<=l;++f){if(b=n[N(f)],b.skip)continue;const P=b.x,E=b.y,M=P|0;M===w?(E<S?S=E:E>j&&(j=E),u=(h*u+P)/++h):(C(),t.lineTo(P,E),w=M,h=0,S=j=E),v=E}C()}function __(t){const s=t.options,a=s.borderDash&&s.borderDash.length;return!t._decimated&&!t._loop&&!s.tension&&s.cubicInterpolationMode!=="monotone"&&!s.stepped&&!a?o2e:i2e}function l2e(t){return t.stepped?a1e:t.tension||t.cubicInterpolationMode==="monotone"?r1e:Fd}function c2e(t,s,a,r){let n=s._path;n||(n=s._path=new Path2D,s.path(n,a,r)&&n.closePath()),uF(t,s.options),t.stroke(n)}function d2e(t,s,a,r){const{segments:n,options:i}=s,o=__(s);for(const l of n)uF(t,i,l.style),t.beginPath(),o(t,s,l,{start:a,end:a+r-1})&&t.closePath(),t.stroke()}const u2e=typeof Path2D=="function";function m2e(t,s,a,r){u2e&&!s.options.segment?c2e(t,s,a,r):d2e(t,s,a,r)}class s1 extends Xl{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:s=>s!=="borderDash"&&s!=="fill"};constructor(s){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,s&&Object.assign(this,s)}updateControlPoints(s,a){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;Kve(this._points,r,s,n,a),this._pointsUpdated=!0}}set points(s){this._points=s,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=d1e(this,this.options.segment))}first(){const s=this.segments,a=this.points;return s.length&&a[s[0].start]}last(){const s=this.segments,a=this.points,r=s.length;return r&&a[s[r-1].end]}interpolate(s,a){const r=this.options,n=s[a],i=this.points,o=QO(this,{property:a,start:n,end:n});if(!o.length)return;const l=[],c=l2e(r);let m,u;for(m=0,u=o.length;m<u;++m){const{start:h,end:f}=o[m],b=i[h],w=i[f];if(b===w){l.push(b);continue}const S=Math.abs((n-b[a])/(w[a]-b[a])),j=c(b,w,S,r.stepped);j[a]=s[a],l.push(j)}return l.length===1?l[0]:l}pathSegment(s,a,r){return __(this)(s,this,a,r)}path(s,a,r){const n=this.segments,i=__(this);let o=this._loop;a=a||0,r=r||this.points.length-a;for(const l of n)o&=i(s,this,l,{start:a,end:a+r-1});return!!o}draw(s,a,r,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(s.save(),m2e(s,this,r,n),s.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function NM(t,s,a,r){const n=t.options,{[a]:i}=t.getProps([a],r);return Math.abs(s-i)<n.radius+n.hitRadius}class p2e extends Xl{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(s){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,a,r){const n=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(s-i,2)+Math.pow(a-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(s,a){return NM(this,s,"x",a)}inYRange(s,a){return NM(this,s,"y",a)}getCenterPoint(s){const{x:a,y:r}=this.getProps(["x","y"],s);return{x:a,y:r}}size(s){s=s||this.options||{};let a=s.radius||0;a=Math.max(a,a&&s.hoverRadius||0);const r=a&&s.borderWidth||0;return(a+r)*2}draw(s,a){const r=this.options;this.skip||r.radius<.1||!Ox(this,a,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,j_(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}function pF(t,s){const{x:a,y:r,base:n,width:i,height:o}=t.getProps(["x","y","base","width","height"],s);let l,c,m,u,h;return t.horizontal?(h=o/2,l=Math.min(a,n),c=Math.max(a,n),m=r-h,u=r+h):(h=i/2,l=a-h,c=a+h,m=Math.min(r,n),u=Math.max(r,n)),{left:l,top:m,right:c,bottom:u}}function Ac(t,s,a,r){return t?0:ln(s,a,r)}function h2e(t,s,a){const r=t.options.borderWidth,n=t.borderSkipped,i=zO(r);return{t:Ac(n.top,i.top,0,a),r:Ac(n.right,i.right,0,s),b:Ac(n.bottom,i.bottom,0,a),l:Ac(n.left,i.left,0,s)}}function f2e(t,s,a){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,i=Ym(n),o=Math.min(s,a),l=t.borderSkipped,c=r||sa(n);return{topLeft:Ac(!c||l.top||l.left,i.topLeft,0,o),topRight:Ac(!c||l.top||l.right,i.topRight,0,o),bottomLeft:Ac(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:Ac(!c||l.bottom||l.right,i.bottomRight,0,o)}}function x2e(t){const s=pF(t),a=s.right-s.left,r=s.bottom-s.top,n=h2e(t,a/2,r/2),i=f2e(t,a/2,r/2);return{outer:{x:s.left,y:s.top,w:a,h:r,radius:i},inner:{x:s.left+n.l,y:s.top+n.t,w:a-n.l-n.r,h:r-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function RN(t,s,a,r){const n=s===null,i=a===null,l=t&&!(n&&i)&&pF(t,r);return l&&(n||Ol(s,l.left,l.right))&&(i||Ol(a,l.top,l.bottom))}function g2e(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function y2e(t,s){t.rect(s.x,s.y,s.w,s.h)}function AN(t,s,a={}){const r=t.x!==a.x?-s:0,n=t.y!==a.y?-s:0,i=(t.x+t.w!==a.x+a.w?s:0)-r,o=(t.y+t.h!==a.y+a.h?s:0)-n;return{x:t.x+r,y:t.y+n,w:t.w+i,h:t.h+o,radius:t.radius}}class b2e extends Xl{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(s){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,s&&Object.assign(this,s)}draw(s){const{inflateAmount:a,options:{borderColor:r,backgroundColor:n}}=this,{inner:i,outer:o}=x2e(this),l=g2e(o.radius)?Ab:y2e;s.save(),(o.w!==i.w||o.h!==i.h)&&(s.beginPath(),l(s,AN(o,a,i)),s.clip(),l(s,AN(i,-a,o)),s.fillStyle=r,s.fill("evenodd")),s.beginPath(),l(s,AN(i,a)),s.fillStyle=n,s.fill(),s.restore()}inRange(s,a,r){return RN(this,s,a,r)}inXRange(s,a){return RN(this,s,null,a)}inYRange(s,a){return RN(this,null,s,a)}getCenterPoint(s){const{x:a,y:r,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],s);return{x:i?(a+n)/2:a,y:i?r:(r+n)/2}}getRange(s){return s==="x"?this.width/2:this.height/2}}function v2e(t,s,a){const r=t.segments,n=t.points,i=s.points,o=[];for(const l of r){let{start:c,end:m}=l;m=a1(c,m,n);const u=S_(a,n[c],n[m],l.loop);if(!s.segments){o.push({source:l,target:u,start:n[c],end:n[m]});continue}const h=QO(s,u);for(const f of h){const b=S_(a,i[f.start],i[f.end],f.loop),w=KO(l,n,b);for(const S of w)o.push({source:S,target:f,start:{[a]:wM(u,b,"start",Math.max)},end:{[a]:wM(u,b,"end",Math.min)}})}}return o}function S_(t,s,a,r){if(r)return;let n=s[t],i=a[t];return t==="angle"&&(n=ai(n),i=ai(i)),{property:t,start:n,end:i}}function j2e(t,s){const{x:a=null,y:r=null}=t||{},n=s.points,i=[];return s.segments.forEach(({start:o,end:l})=>{l=a1(o,l,n);const c=n[o],m=n[l];r!==null?(i.push({x:c.x,y:r}),i.push({x:m.x,y:r})):a!==null&&(i.push({x:a,y:c.y}),i.push({x:a,y:m.y}))}),i}function a1(t,s,a){for(;s>t;s--){const r=a[s];if(!isNaN(r.x)&&!isNaN(r.y))break}return s}function wM(t,s,a,r){return t&&s?r(t[a],s[a]):t?t[a]:s?s[a]:0}function hF(t,s){let a=[],r=!1;return Nr(t)?(r=!0,a=t):a=j2e(t,s),a.length?new s1({points:a,options:{tension:0},_loop:r,_fullLoop:r}):null}function _M(t){return t&&t.fill!==!1}function N2e(t,s,a){let n=t[s].fill;const i=[s];let o;if(!a)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!mn(n))return n;if(o=t[n],!o)return!1;if(o.visible)return n;i.push(n),n=o.fill}return!1}function w2e(t,s,a){const r=P2e(t);if(sa(r))return isNaN(r.value)?!1:r;let n=parseFloat(r);return mn(n)&&Math.floor(n)===n?_2e(r[0],s,n,a):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function _2e(t,s,a,r){return(t==="-"||t==="+")&&(a=s+a),a===s||a<0||a>=r?!1:a}function S2e(t,s){let a=null;return t==="start"?a=s.bottom:t==="end"?a=s.top:sa(t)?a=s.getPixelForValue(t.value):s.getBasePixel&&(a=s.getBasePixel()),a}function C2e(t,s,a){let r;return t==="start"?r=a:t==="end"?r=s.options.reverse?s.min:s.max:sa(t)?r=t.value:r=s.getBaseValue(),r}function P2e(t){const s=t.options,a=s.fill;let r=qs(a&&a.target,a);return r===void 0&&(r=!!s.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function k2e(t){const{scale:s,index:a,line:r}=t,n=[],i=r.segments,o=r.points,l=E2e(s,a);l.push(hF({x:null,y:s.bottom},r));for(let c=0;c<i.length;c++){const m=i[c];for(let u=m.start;u<=m.end;u++)T2e(n,o[u],l)}return new s1({points:n,options:{}})}function E2e(t,s){const a=[],r=t.getMatchingVisibleMetas("line");for(let n=0;n<r.length;n++){const i=r[n];if(i.index===s)break;i.hidden||a.unshift(i.dataset)}return a}function T2e(t,s,a){const r=[];for(let n=0;n<a.length;n++){const i=a[n],{first:o,last:l,point:c}=M2e(i,s,"x");if(!(!c||o&&l)){if(o)r.unshift(c);else if(t.push(c),!l)break}}t.push(...r)}function M2e(t,s,a){const r=t.interpolate(s,a);if(!r)return{};const n=r[a],i=t.segments,o=t.points;let l=!1,c=!1;for(let m=0;m<i.length;m++){const u=i[m],h=o[u.start][a],f=o[u.end][a];if(Ol(n,h,f)){l=n===h,c=n===f;break}}return{first:l,last:c,point:r}}class fF{constructor(s){this.x=s.x,this.y=s.y,this.radius=s.radius}pathSegment(s,a,r){const{x:n,y:i,radius:o}=this;return a=a||{start:0,end:Ka},s.arc(n,i,o,a.end,a.start,!0),!r.bounds}interpolate(s){const{x:a,y:r,radius:n}=this,i=s.angle;return{x:a+Math.cos(i)*n,y:r+Math.sin(i)*n,angle:i}}}function D2e(t){const{chart:s,fill:a,line:r}=t;if(mn(a))return R2e(s,a);if(a==="stack")return k2e(t);if(a==="shape")return!0;const n=A2e(t);return n instanceof fF?n:hF(n,r)}function R2e(t,s){const a=t.getDatasetMeta(s);return a&&t.isDatasetVisible(s)?a.dataset:null}function A2e(t){return(t.scale||{}).getPointPositionForValue?O2e(t):I2e(t)}function I2e(t){const{scale:s={},fill:a}=t,r=S2e(a,s);if(mn(r)){const n=s.isHorizontal();return{x:n?r:null,y:n?null:r}}return null}function O2e(t){const{scale:s,fill:a}=t,r=s.options,n=s.getLabels().length,i=r.reverse?s.max:s.min,o=C2e(a,s,i),l=[];if(r.grid.circular){const c=s.getPointPositionForValue(0,i);return new fF({x:c.x,y:c.y,radius:s.getDistanceFromCenterForValue(o)})}for(let c=0;c<n;++c)l.push(s.getPointPositionForValue(c,o));return l}function IN(t,s,a){const r=D2e(s),{chart:n,index:i,line:o,scale:l,axis:c}=s,m=o.options,u=m.fill,h=m.backgroundColor,{above:f=h,below:b=h}=u||{},w=n.getDatasetMeta(i),S=ZO(n,w);r&&o.points.length&&(Qv(t,a),F2e(t,{line:o,target:r,above:f,below:b,area:a,scale:l,axis:c,clip:S}),Zv(t))}function F2e(t,s){const{line:a,target:r,above:n,below:i,area:o,scale:l,clip:c}=s,m=a._loop?"angle":s.axis;t.save();let u=i;i!==n&&(m==="x"?(SM(t,r,o.top),ON(t,{line:a,target:r,color:n,scale:l,property:m,clip:c}),t.restore(),t.save(),SM(t,r,o.bottom)):m==="y"&&(CM(t,r,o.left),ON(t,{line:a,target:r,color:i,scale:l,property:m,clip:c}),t.restore(),t.save(),CM(t,r,o.right),u=n)),ON(t,{line:a,target:r,color:u,scale:l,property:m,clip:c}),t.restore()}function SM(t,s,a){const{segments:r,points:n}=s;let i=!0,o=!1;t.beginPath();for(const l of r){const{start:c,end:m}=l,u=n[c],h=n[a1(c,m,n)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,a),t.lineTo(u.x,u.y)),o=!!s.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(h.x,a)}t.lineTo(s.first().x,a),t.closePath(),t.clip()}function CM(t,s,a){const{segments:r,points:n}=s;let i=!0,o=!1;t.beginPath();for(const l of r){const{start:c,end:m}=l,u=n[c],h=n[a1(c,m,n)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(a,u.y),t.lineTo(u.x,u.y)),o=!!s.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(a,h.y)}t.lineTo(a,s.first().y),t.closePath(),t.clip()}function ON(t,s){const{line:a,target:r,property:n,color:i,scale:o,clip:l}=s,c=v2e(a,r,n);for(const{source:m,target:u,start:h,end:f}of c){const{style:{backgroundColor:b=i}={}}=m,w=r!==!0;t.save(),t.fillStyle=b,L2e(t,o,l,w&&S_(n,h,f)),t.beginPath();const S=!!a.pathSegment(t,m);let j;if(w){S?t.closePath():PM(t,r,f,n);const v=!!r.pathSegment(t,u,{move:S,reverse:!0});j=S&&v,j||PM(t,r,h,n)}t.closePath(),t.fill(j?"evenodd":"nonzero"),t.restore()}}function L2e(t,s,a,r){const n=s.chart.chartArea,{property:i,start:o,end:l}=r||{};if(i==="x"||i==="y"){let c,m,u,h;i==="x"?(c=o,m=n.top,u=l,h=n.bottom):(c=n.left,m=o,u=n.right,h=l),t.beginPath(),a&&(c=Math.max(c,a.left),u=Math.min(u,a.right),m=Math.max(m,a.top),h=Math.min(h,a.bottom)),t.rect(c,m,u-c,h-m),t.clip()}}function PM(t,s,a,r){const n=s.interpolate(a,r);n&&t.lineTo(n.x,n.y)}var $2e={id:"filler",afterDatasetsUpdate(t,s,a){const r=(t.data.datasets||[]).length,n=[];let i,o,l,c;for(o=0;o<r;++o)i=t.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof s1&&(c={visible:t.isDatasetVisible(o),index:o,fill:w2e(l,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,n.push(c);for(o=0;o<r;++o)c=n[o],!(!c||c.fill===!1)&&(c.fill=N2e(n,o,a.propagate))},beforeDraw(t,s,a){const r=a.drawTime==="beforeDraw",n=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=n.length-1;o>=0;--o){const l=n[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),r&&l.fill&&IN(t.ctx,l,i))}},beforeDatasetsDraw(t,s,a){if(a.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let n=r.length-1;n>=0;--n){const i=r[n].$filler;_M(i)&&IN(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,s,a){const r=s.meta.$filler;!_M(r)||a.drawTime!=="beforeDatasetDraw"||IN(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const kM=(t,s)=>{let{boxHeight:a=s,boxWidth:r=s}=t;return t.usePointStyle&&(a=Math.min(a,s),r=t.pointStyleWidth||Math.min(r,s)),{boxWidth:r,boxHeight:a,itemHeight:Math.max(s,a)}},z2e=(t,s)=>t!==null&&s!==null&&t.datasetIndex===s.datasetIndex&&t.index===s.index;class EM extends Xl{constructor(s){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=s.chart,this.options=s.options,this.ctx=s.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(s,a,r){this.maxWidth=s,this.maxHeight=a,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const s=this.options.labels||{};let a=za(s.generateLabels,[this.chart],this)||[];s.filter&&(a=a.filter(r=>s.filter(r,this.chart.data))),s.sort&&(a=a.sort((r,n)=>s.sort(r,n,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:s,ctx:a}=this;if(!s.display){this.width=this.height=0;return}const r=s.labels,n=cn(r.font),i=n.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=kM(r,i);let m,u;a.font=n.string,this.isHorizontal()?(m=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,m=this._fitCols(o,n,l,c)+10),this.width=Math.min(m,s.maxWidth||this.maxWidth),this.height=Math.min(u,s.maxHeight||this.maxHeight)}_fitRows(s,a,r,n){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],m=this.lineWidths=[0],u=n+l;let h=s;i.textAlign="left",i.textBaseline="middle";let f=-1,b=-u;return this.legendItems.forEach((w,S)=>{const j=r+a/2+i.measureText(w.text).width;(S===0||m[m.length-1]+j+2*l>o)&&(h+=u,m[m.length-(S>0?0:1)]=0,b+=u,f++),c[S]={left:0,top:b,row:f,width:j,height:n},m[m.length-1]+=j+l}),h}_fitCols(s,a,r,n){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],m=this.columnSizes=[],u=o-s;let h=l,f=0,b=0,w=0,S=0;return this.legendItems.forEach((j,v)=>{const{itemWidth:N,itemHeight:C}=q2e(r,a,i,j,n);v>0&&b+C+2*l>u&&(h+=f+l,m.push({width:f,height:b}),w+=f+l,S++,f=b=0),c[v]={left:w,top:b,col:S,width:N,height:C},f=Math.max(f,N),b+=C+l}),h+=f,m.push({width:f,height:b}),h}adjustHitBoxes(){if(!this.options.display)return;const s=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:r,labels:{padding:n},rtl:i}}=this,o=Gm(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=sn(r,this.left+n,this.right-this.lineWidths[l]);for(const m of a)l!==m.row&&(l=m.row,c=sn(r,this.left+n,this.right-this.lineWidths[l])),m.top+=this.top+s+n,m.left=o.leftForLtr(o.x(c),m.width),c+=m.width+n}else{let l=0,c=sn(r,this.top+s+n,this.bottom-this.columnSizes[l].height);for(const m of a)m.col!==l&&(l=m.col,c=sn(r,this.top+s+n,this.bottom-this.columnSizes[l].height)),m.top=c,m.left+=this.left+n,m.left=o.leftForLtr(o.x(m.left),m.width),c+=m.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const s=this.ctx;Qv(s,this),this._draw(),Zv(s)}}_draw(){const{options:s,columnSizes:a,lineWidths:r,ctx:n}=this,{align:i,labels:o}=s,l=hr.color,c=Gm(s.rtl,this.left,this.width),m=cn(o.font),{padding:u}=o,h=m.size,f=h/2;let b;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=m.string;const{boxWidth:w,boxHeight:S,itemHeight:j}=kM(o,h),v=function(M,T,A){if(isNaN(w)||w<=0||isNaN(S)||S<0)return;n.save();const L=qs(A.lineWidth,1);if(n.fillStyle=qs(A.fillStyle,l),n.lineCap=qs(A.lineCap,"butt"),n.lineDashOffset=qs(A.lineDashOffset,0),n.lineJoin=qs(A.lineJoin,"miter"),n.lineWidth=L,n.strokeStyle=qs(A.strokeStyle,l),n.setLineDash(qs(A.lineDash,[])),o.usePointStyle){const F={radius:S*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:L},z=c.xPlus(M,w/2),I=T+f;$O(n,F,z,I,o.pointStyleWidth&&w)}else{const F=T+Math.max((h-S)/2,0),z=c.leftForLtr(M,w),I=Ym(A.borderRadius);n.beginPath(),Object.values(I).some(Q=>Q!==0)?Ab(n,{x:z,y:F,w,h:S,radius:I}):n.rect(z,F,w,S),n.fill(),L!==0&&n.stroke()}n.restore()},N=function(M,T,A){Fx(n,A.text,M,T+j/2,m,{strikethrough:A.hidden,textAlign:c.textAlign(A.textAlign)})},C=this.isHorizontal(),P=this._computeTitleHeight();C?b={x:sn(i,this.left+u,this.right-r[0]),y:this.top+u+P,line:0}:b={x:this.left+u,y:sn(i,this.top+P+u,this.bottom-a[0].height),line:0},WO(this.ctx,s.textDirection);const E=j+u;this.legendItems.forEach((M,T)=>{n.strokeStyle=M.fontColor,n.fillStyle=M.fontColor;const A=n.measureText(M.text).width,L=c.textAlign(M.textAlign||(M.textAlign=o.textAlign)),F=w+f+A;let z=b.x,I=b.y;c.setWidth(this.width),C?T>0&&z+F+u>this.right&&(I=b.y+=E,b.line++,z=b.x=sn(i,this.left+u,this.right-r[b.line])):T>0&&I+E>this.bottom&&(z=b.x=z+a[b.line].width+u,b.line++,I=b.y=sn(i,this.top+P+u,this.bottom-a[b.line].height));const Q=c.x(z);if(v(Q,I,M),z=uve(L,z+w+f,C?z+F:this.right,s.rtl),N(c.x(z),I,M),C)b.x+=F+u;else if(typeof M.text!="string"){const Y=m.lineHeight;b.y+=xF(M,Y)+u}else b.y+=E}),YO(this.ctx,s.textDirection)}drawTitle(){const s=this.options,a=s.title,r=cn(a.font),n=Xi(a.padding);if(!a.display)return;const i=Gm(s.rtl,this.left,this.width),o=this.ctx,l=a.position,c=r.size/2,m=n.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+m,h=sn(s.align,h,this.right-f);else{const w=this.columnSizes.reduce((S,j)=>Math.max(S,j.height),0);u=m+sn(s.align,this.top,this.bottom-w-s.labels.padding-this._computeTitleHeight())}const b=sn(l,h,h+f);o.textAlign=i.textAlign(MS(l)),o.textBaseline="middle",o.strokeStyle=a.color,o.fillStyle=a.color,o.font=r.string,Fx(o,a.text,b,u,r)}_computeTitleHeight(){const s=this.options.title,a=cn(s.font),r=Xi(s.padding);return s.display?a.lineHeight+r.height:0}_getLegendItemAt(s,a){let r,n,i;if(Ol(s,this.left,this.right)&&Ol(a,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(n=i[r],Ol(s,n.left,n.left+n.width)&&Ol(a,n.top,n.top+n.height))return this.legendItems[r]}return null}handleEvent(s){const a=this.options;if(!V2e(s.type,a))return;const r=this._getLegendItemAt(s.x,s.y);if(s.type==="mousemove"||s.type==="mouseout"){const n=this._hoveredItem,i=z2e(n,r);n&&!i&&za(a.onLeave,[s,n,this],this),this._hoveredItem=r,r&&!i&&za(a.onHover,[s,r,this],this)}else r&&za(a.onClick,[s,r,this],this)}}function q2e(t,s,a,r,n){const i=B2e(r,t,s,a),o=U2e(n,r,s.lineHeight);return{itemWidth:i,itemHeight:o}}function B2e(t,s,a,r){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((i,o)=>i.length>o.length?i:o)),s+a.size/2+r.measureText(n).width}function U2e(t,s,a){let r=t;return typeof s.text!="string"&&(r=xF(s,a)),r}function xF(t,s){const a=t.text?t.text.length:0;return s*a}function V2e(t,s){return!!((t==="mousemove"||t==="mouseout")&&(s.onHover||s.onLeave)||s.onClick&&(t==="click"||t==="mouseup"))}var H2e={id:"legend",_element:EM,start(t,s,a){const r=t.legend=new EM({ctx:t.ctx,options:a,chart:t});zi.configure(t,r,a),zi.addBox(t,r)},stop(t){zi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,s,a){const r=t.legend;zi.configure(t,r,a),r.options=a},afterUpdate(t){const s=t.legend;s.buildLabels(),s.adjustHitBoxes()},afterEvent(t,s){s.replay||t.legend.handleEvent(s.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,s,a){const r=s.datasetIndex,n=a.chart;n.isDatasetVisible(r)?(n.hide(r),s.hidden=!0):(n.show(r),s.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const s=t.data.datasets,{labels:{usePointStyle:a,pointStyle:r,textAlign:n,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const m=c.controller.getStyle(a?0:void 0),u=Xi(m.borderWidth);return{text:s[c.index].label,fillStyle:m.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:m.borderColor,pointStyle:r||m.pointStyle,rotation:m.rotation,textAlign:n||m.textAlign,borderRadius:o&&(l||m.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class gF extends Xl{constructor(s){super(),this.chart=s.chart,this.options=s.options,this.ctx=s.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(s,a){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=s,this.height=this.bottom=a;const n=Nr(r.text)?r.text.length:1;this._padding=Xi(r.padding);const i=n*cn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const s=this.options.position;return s==="top"||s==="bottom"}_drawArgs(s){const{top:a,left:r,bottom:n,right:i,options:o}=this,l=o.align;let c=0,m,u,h;return this.isHorizontal()?(u=sn(l,r,i),h=a+s,m=i-r):(o.position==="left"?(u=r+s,h=sn(l,n,a),c=Sa*-.5):(u=i-s,h=sn(l,a,n),c=Sa*.5),m=n-a),{titleX:u,titleY:h,maxWidth:m,rotation:c}}draw(){const s=this.ctx,a=this.options;if(!a.display)return;const r=cn(a.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:m}=this._drawArgs(i);Fx(s,a.text,0,0,r,{color:a.color,maxWidth:c,rotation:m,textAlign:MS(a.align),textBaseline:"middle",translation:[o,l]})}}function W2e(t,s){const a=new gF({ctx:t.ctx,options:s,chart:t});zi.configure(t,a,s),zi.addBox(t,a),t.titleBlock=a}var Y2e={id:"title",_element:gF,start(t,s,a){W2e(t,a)},stop(t){const s=t.titleBlock;zi.removeBox(t,s),delete t.titleBlock},beforeUpdate(t,s,a){const r=t.titleBlock;zi.configure(t,r,a),r.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mf={average(t){if(!t.length)return!1;let s,a,r=new Set,n=0,i=0;for(s=0,a=t.length;s<a;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),n+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:n/i}},nearest(t,s){if(!t.length)return!1;let a=s.x,r=s.y,n=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const m=c.getCenterPoint(),u=b_(s,m);u<n&&(n=u,l=c)}}if(l){const c=l.tooltipPosition();a=c.x,r=c.y}return{x:a,y:r}}};function Mo(t,s){return s&&(Nr(s)?Array.prototype.push.apply(t,s):t.push(s)),t}function Pl(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function G2e(t,s){const{element:a,datasetIndex:r,index:n}=s,i=t.getDatasetMeta(r).controller,{label:o,value:l}=i.getLabelAndValue(n);return{chart:t,label:o,parsed:i.getParsed(n),raw:t.data.datasets[r].data[n],formattedValue:l,dataset:i.getDataset(),dataIndex:n,datasetIndex:r,element:a}}function TM(t,s){const a=t.chart.ctx,{body:r,footer:n,title:i}=t,{boxWidth:o,boxHeight:l}=s,c=cn(s.bodyFont),m=cn(s.titleFont),u=cn(s.footerFont),h=i.length,f=n.length,b=r.length,w=Xi(s.padding);let S=w.height,j=0,v=r.reduce((P,E)=>P+E.before.length+E.lines.length+E.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(S+=h*m.lineHeight+(h-1)*s.titleSpacing+s.titleMarginBottom),v){const P=s.displayColors?Math.max(l,c.lineHeight):c.lineHeight;S+=b*P+(v-b)*c.lineHeight+(v-1)*s.bodySpacing}f&&(S+=s.footerMarginTop+f*u.lineHeight+(f-1)*s.footerSpacing);let N=0;const C=function(P){j=Math.max(j,a.measureText(P).width+N)};return a.save(),a.font=m.string,_a(t.title,C),a.font=c.string,_a(t.beforeBody.concat(t.afterBody),C),N=s.displayColors?o+2+s.boxPadding:0,_a(r,P=>{_a(P.before,C),_a(P.lines,C),_a(P.after,C)}),N=0,a.font=u.string,_a(t.footer,C),a.restore(),j+=w.width,{width:j,height:S}}function K2e(t,s){const{y:a,height:r}=s;return a<r/2?"top":a>t.height-r/2?"bottom":"center"}function Q2e(t,s,a,r){const{x:n,width:i}=r,o=a.caretSize+a.caretPadding;if(t==="left"&&n+i+o>s.width||t==="right"&&n-i-o<0)return!0}function Z2e(t,s,a,r){const{x:n,width:i}=a,{width:o,chartArea:{left:l,right:c}}=t;let m="center";return r==="center"?m=n<=(l+c)/2?"left":"right":n<=i/2?m="left":n>=o-i/2&&(m="right"),Q2e(m,t,s,a)&&(m="center"),m}function MM(t,s,a){const r=a.yAlign||s.yAlign||K2e(t,a);return{xAlign:a.xAlign||s.xAlign||Z2e(t,s,a,r),yAlign:r}}function X2e(t,s){let{x:a,width:r}=t;return s==="right"?a-=r:s==="center"&&(a-=r/2),a}function J2e(t,s,a){let{y:r,height:n}=t;return s==="top"?r+=a:s==="bottom"?r-=n+a:r-=n/2,r}function DM(t,s,a,r){const{caretSize:n,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=a,m=n+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:b}=Ym(o);let w=X2e(s,l);const S=J2e(s,c,m);return c==="center"?l==="left"?w+=m:l==="right"&&(w-=m):l==="left"?w-=Math.max(u,f)+n:l==="right"&&(w+=Math.max(h,b)+n),{x:ln(w,0,r.width-s.width),y:ln(S,0,r.height-s.height)}}function Cy(t,s,a){const r=Xi(a.padding);return s==="center"?t.x+t.width/2:s==="right"?t.x+t.width-r.right:t.x+r.left}function RM(t){return Mo([],Pl(t))}function eNe(t,s,a){return Su(t,{tooltip:s,tooltipItems:a,type:"tooltip"})}function AM(t,s){const a=s&&s.dataset&&s.dataset.tooltip&&s.dataset.tooltip.callbacks;return a?t.override(a):t}const yF={beforeTitle:_l,title(t){if(t.length>0){const s=t[0],a=s.chart.data.labels,r=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return s.dataset.label||"";if(s.label)return s.label;if(r>0&&s.dataIndex<r)return a[s.dataIndex]}return""},afterTitle:_l,beforeBody:_l,beforeLabel:_l,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let s=t.dataset.label||"";s&&(s+=": ");const a=t.formattedValue;return xa(a)||(s+=a),s},labelColor(t){const a=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const a=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:_l,afterBody:_l,beforeFooter:_l,footer:_l,afterFooter:_l};function Tn(t,s,a,r){const n=t[s].call(a,r);return typeof n>"u"?yF[s].call(a,r):n}class IM extends Xl{static positioners=mf;constructor(s){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=s.chart,this.options=s.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(s){this.options=s,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const s=this._cachedAnimations;if(s)return s;const a=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&a.options.animation&&r.animations,i=new XO(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=eNe(this.chart.getContext(),this,this._tooltipItems))}getTitle(s,a){const{callbacks:r}=a,n=Tn(r,"beforeTitle",this,s),i=Tn(r,"title",this,s),o=Tn(r,"afterTitle",this,s);let l=[];return l=Mo(l,Pl(n)),l=Mo(l,Pl(i)),l=Mo(l,Pl(o)),l}getBeforeBody(s,a){return RM(Tn(a.callbacks,"beforeBody",this,s))}getBody(s,a){const{callbacks:r}=a,n=[];return _a(s,i=>{const o={before:[],lines:[],after:[]},l=AM(r,i);Mo(o.before,Pl(Tn(l,"beforeLabel",this,i))),Mo(o.lines,Tn(l,"label",this,i)),Mo(o.after,Pl(Tn(l,"afterLabel",this,i))),n.push(o)}),n}getAfterBody(s,a){return RM(Tn(a.callbacks,"afterBody",this,s))}getFooter(s,a){const{callbacks:r}=a,n=Tn(r,"beforeFooter",this,s),i=Tn(r,"footer",this,s),o=Tn(r,"afterFooter",this,s);let l=[];return l=Mo(l,Pl(n)),l=Mo(l,Pl(i)),l=Mo(l,Pl(o)),l}_createItems(s){const a=this._active,r=this.chart.data,n=[],i=[],o=[];let l=[],c,m;for(c=0,m=a.length;c<m;++c)l.push(G2e(this.chart,a[c]));return s.filter&&(l=l.filter((u,h,f)=>s.filter(u,h,f,r))),s.itemSort&&(l=l.sort((u,h)=>s.itemSort(u,h,r))),_a(l,u=>{const h=AM(s.callbacks,u);n.push(Tn(h,"labelColor",this,u)),i.push(Tn(h,"labelPointStyle",this,u)),o.push(Tn(h,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(s,a){const r=this.options.setContext(this.getContext()),n=this._active;let i,o=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const l=mf[r.position].call(this,n,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=TM(this,r),m=Object.assign({},l,c),u=MM(this.chart,r,m),h=DM(r,m,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),s&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(s,a,r,n){const i=this.getCaretPosition(s,r,n);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(s,a,r){const{xAlign:n,yAlign:i}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:m,bottomLeft:u,bottomRight:h}=Ym(l),{x:f,y:b}=s,{width:w,height:S}=a;let j,v,N,C,P,E;return i==="center"?(P=b+S/2,n==="left"?(j=f,v=j-o,C=P+o,E=P-o):(j=f+w,v=j+o,C=P-o,E=P+o),N=j):(n==="left"?v=f+Math.max(c,u)+o:n==="right"?v=f+w-Math.max(m,h)-o:v=this.caretX,i==="top"?(C=b,P=C-o,j=v-o,N=v+o):(C=b+S,P=C+o,j=v+o,N=v-o),E=C),{x1:j,x2:v,x3:N,y1:C,y2:P,y3:E}}drawTitle(s,a,r){const n=this.title,i=n.length;let o,l,c;if(i){const m=Gm(r.rtl,this.x,this.width);for(s.x=Cy(this,r.titleAlign,r),a.textAlign=m.textAlign(r.titleAlign),a.textBaseline="middle",o=cn(r.titleFont),l=r.titleSpacing,a.fillStyle=r.titleColor,a.font=o.string,c=0;c<i;++c)a.fillText(n[c],m.x(s.x),s.y+o.lineHeight/2),s.y+=o.lineHeight+l,c+1===i&&(s.y+=r.titleMarginBottom-l)}}_drawColorBox(s,a,r,n,i){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:m}=i,u=cn(i.bodyFont),h=Cy(this,"left",i),f=n.x(h),b=c<u.lineHeight?(u.lineHeight-c)/2:0,w=a.y+b;if(i.usePointStyle){const S={radius:Math.min(m,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},j=n.leftForLtr(f,m)+m/2,v=w+c/2;s.strokeStyle=i.multiKeyBackground,s.fillStyle=i.multiKeyBackground,j_(s,S,j,v),s.strokeStyle=o.borderColor,s.fillStyle=o.backgroundColor,j_(s,S,j,v)}else{s.lineWidth=sa(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,s.strokeStyle=o.borderColor,s.setLineDash(o.borderDash||[]),s.lineDashOffset=o.borderDashOffset||0;const S=n.leftForLtr(f,m),j=n.leftForLtr(n.xPlus(f,1),m-2),v=Ym(o.borderRadius);Object.values(v).some(N=>N!==0)?(s.beginPath(),s.fillStyle=i.multiKeyBackground,Ab(s,{x:S,y:w,w:m,h:c,radius:v}),s.fill(),s.stroke(),s.fillStyle=o.backgroundColor,s.beginPath(),Ab(s,{x:j,y:w+1,w:m-2,h:c-2,radius:v}),s.fill()):(s.fillStyle=i.multiKeyBackground,s.fillRect(S,w,m,c),s.strokeRect(S,w,m,c),s.fillStyle=o.backgroundColor,s.fillRect(j,w+1,m-2,c-2))}s.fillStyle=this.labelTextColors[r]}drawBody(s,a,r){const{body:n}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:m,boxPadding:u}=r,h=cn(r.bodyFont);let f=h.lineHeight,b=0;const w=Gm(r.rtl,this.x,this.width),S=function(A){a.fillText(A,w.x(s.x+b),s.y+f/2),s.y+=f+i},j=w.textAlign(o);let v,N,C,P,E,M,T;for(a.textAlign=o,a.textBaseline="middle",a.font=h.string,s.x=Cy(this,j,r),a.fillStyle=r.bodyColor,_a(this.beforeBody,S),b=l&&j!=="right"?o==="center"?m/2+u:m+2+u:0,P=0,M=n.length;P<M;++P){for(v=n[P],N=this.labelTextColors[P],a.fillStyle=N,_a(v.before,S),C=v.lines,l&&C.length&&(this._drawColorBox(a,s,P,w,r),f=Math.max(h.lineHeight,c)),E=0,T=C.length;E<T;++E)S(C[E]),f=h.lineHeight;_a(v.after,S)}b=0,f=h.lineHeight,_a(this.afterBody,S),s.y-=i}drawFooter(s,a,r){const n=this.footer,i=n.length;let o,l;if(i){const c=Gm(r.rtl,this.x,this.width);for(s.x=Cy(this,r.footerAlign,r),s.y+=r.footerMarginTop,a.textAlign=c.textAlign(r.footerAlign),a.textBaseline="middle",o=cn(r.footerFont),a.fillStyle=r.footerColor,a.font=o.string,l=0;l<i;++l)a.fillText(n[l],c.x(s.x),s.y+o.lineHeight/2),s.y+=o.lineHeight+r.footerSpacing}}drawBackground(s,a,r,n){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=s,{width:m,height:u}=r,{topLeft:h,topRight:f,bottomLeft:b,bottomRight:w}=Ym(n.cornerRadius);a.fillStyle=n.backgroundColor,a.strokeStyle=n.borderColor,a.lineWidth=n.borderWidth,a.beginPath(),a.moveTo(l+h,c),o==="top"&&this.drawCaret(s,a,r,n),a.lineTo(l+m-f,c),a.quadraticCurveTo(l+m,c,l+m,c+f),o==="center"&&i==="right"&&this.drawCaret(s,a,r,n),a.lineTo(l+m,c+u-w),a.quadraticCurveTo(l+m,c+u,l+m-w,c+u),o==="bottom"&&this.drawCaret(s,a,r,n),a.lineTo(l+b,c+u),a.quadraticCurveTo(l,c+u,l,c+u-b),o==="center"&&i==="left"&&this.drawCaret(s,a,r,n),a.lineTo(l,c+h),a.quadraticCurveTo(l,c,l+h,c),a.closePath(),a.fill(),n.borderWidth>0&&a.stroke()}_updateAnimationTarget(s){const a=this.chart,r=this.$animations,n=r&&r.x,i=r&&r.y;if(n||i){const o=mf[s.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=TM(this,s),c=Object.assign({},o,this._size),m=MM(a,s,c),u=DM(s,c,m,a);(n._to!==u.x||i._to!==u.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(s){const a=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(a);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Xi(a.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&l&&(s.save(),s.globalAlpha=r,this.drawBackground(i,s,n,a),WO(s,a.textDirection),i.y+=o.top,this.drawTitle(i,s,a),this.drawBody(i,s,a),this.drawFooter(i,s,a),YO(s,a.textDirection),s.restore())}getActiveElements(){return this._active||[]}setActiveElements(s,a){const r=this._active,n=s.map(({datasetIndex:l,index:c})=>{const m=this.chart.getDatasetMeta(l);if(!m)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:m.data[c],index:c}}),i=!Mb(r,n),o=this._positionChanged(n,a);(i||o)&&(this._active=n,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(s,a,r=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],o=this._getActiveElements(s,i,a,r),l=this._positionChanged(o,s),c=a||!Mb(o,i)||l;return c&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:s.x,y:s.y},this.update(!0,a))),c}_getActiveElements(s,a,r,n){const i=this.options;if(s.type==="mouseout")return[];if(!n)return a.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(s,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(s,a){const{caretX:r,caretY:n,options:i}=this,o=mf[i.position].call(this,s,a);return o!==!1&&(r!==o.x||n!==o.y)}}var tNe={id:"tooltip",_element:IM,positioners:mf,afterInit(t,s,a){a&&(t.tooltip=new IM({chart:t,options:a}))},beforeUpdate(t,s,a){t.tooltip&&t.tooltip.initialize(a)},reset(t,s,a){t.tooltip&&t.tooltip.initialize(a)},afterDraw(t){const s=t.tooltip;if(s&&s._willRender()){const a={tooltip:s};if(t.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;s.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",a)}},afterEvent(t,s){if(t.tooltip){const a=s.replay;t.tooltip.handleEvent(s.event,a,s.inChartArea)&&(s.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,s)=>s.bodyFont.size,boxWidth:(t,s)=>s.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yF},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const sNe=(t,s,a,r)=>(typeof s=="string"?(a=t.push(s)-1,r.unshift({index:a,label:s})):isNaN(s)&&(a=null),a);function aNe(t,s,a,r){const n=t.indexOf(s);if(n===-1)return sNe(t,s,a,r);const i=t.lastIndexOf(s);return n!==i?a:n}const rNe=(t,s)=>t===null?null:ln(Math.round(t),0,s);function OM(t){const s=this.getLabels();return t>=0&&t<s.length?s[t]:t}class nNe extends kp{static id="category";static defaults={ticks:{callback:OM}};constructor(s){super(s),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(s){const a=this._addedLabels;if(a.length){const r=this.getLabels();for(const{index:n,label:i}of a)r[n]===i&&r.splice(n,1);this._addedLabels=[]}super.init(s)}parse(s,a){if(xa(s))return null;const r=this.getLabels();return a=isFinite(a)&&r[a]===s?a:aNe(r,s,qs(a,s),this._addedLabels),rNe(a,r.length-1)}determineDataLimits(){const{minDefined:s,maxDefined:a}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(s||(r=0),a||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const s=this.min,a=this.max,r=this.options.offset,n=[];let i=this.getLabels();i=s===0&&a===i.length-1?i:i.slice(s,a+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=s;o<=a;o++)n.push({value:o});return n}getLabelForValue(s){return OM.call(this,s)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(s){return typeof s!="number"&&(s=this.parse(s)),s===null?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getPixelForTick(s){const a=this.ticks;return s<0||s>a.length-1?null:this.getPixelForValue(a[s].value)}getValueForPixel(s){return Math.round(this._startValue+this.getDecimalForPixel(s)*this._valueRange)}getBasePixel(){return this.bottom}}function iNe(t,s){const a=[],{bounds:n,step:i,min:o,max:l,precision:c,count:m,maxTicks:u,maxDigits:h,includeBounds:f}=t,b=i||1,w=u-1,{min:S,max:j}=s,v=!xa(o),N=!xa(l),C=!xa(m),P=(j-S)/(h+1);let E=DT((j-S)/w/b)*b,M,T,A,L;if(E<1e-14&&!v&&!N)return[{value:S},{value:j}];L=Math.ceil(j/E)-Math.floor(S/E),L>w&&(E=DT(L*E/w/b)*b),xa(c)||(M=Math.pow(10,c),E=Math.ceil(E*M)/M),n==="ticks"?(T=Math.floor(S/E)*E,A=Math.ceil(j/E)*E):(T=S,A=j),v&&N&&i&&sve((l-o)/i,E/1e3)?(L=Math.round(Math.min((l-o)/E,u)),E=(l-o)/L,T=o,A=l):C?(T=v?o:T,A=N?l:A,L=m-1,E=(A-T)/L):(L=(A-T)/E,Jf(L,Math.round(L),E/1e3)?L=Math.round(L):L=Math.ceil(L));const F=Math.max(RT(E),RT(T));M=Math.pow(10,xa(c)?F:c),T=Math.round(T*M)/M,A=Math.round(A*M)/M;let z=0;for(v&&(f&&T!==o?(a.push({value:o}),T<o&&z++,Jf(Math.round((T+z*E)*M)/M,o,FM(o,P,t))&&z++):T<o&&z++);z<L;++z){const I=Math.round((T+z*E)*M)/M;if(N&&I>l)break;a.push({value:I})}return N&&f&&A!==l?a.length&&Jf(a[a.length-1].value,l,FM(l,P,t))?a[a.length-1].value=l:a.push({value:l}):(!N||A===l)&&a.push({value:A}),a}function FM(t,s,{horizontal:a,minRotation:r}){const n=Il(r),i=(a?Math.sin(n):Math.cos(n))||.001,o=.75*s*(""+t).length;return Math.min(s/i,o)}class oNe extends kp{constructor(s){super(s),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(s,a){return xa(s)||(typeof s=="number"||s instanceof Number)&&!isFinite(+s)?null:+s}handleTickRangeOptions(){const{beginAtZero:s}=this.options,{minDefined:a,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this;const o=c=>n=a?n:c,l=c=>i=r?i:c;if(s){const c=Jo(n),m=Jo(i);c<0&&m<0?l(0):c>0&&m>0&&o(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);l(i+c),s||o(n-c)}this.min=n,this.max=i}getTickLimit(){const s=this.options.ticks;let{maxTicksLimit:a,stepSize:r}=s,n;return r?(n=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),a=a||11),a&&(n=Math.min(a,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const s=this.options,a=s.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n={maxTicks:r,bounds:s.bounds,min:s.min,max:s.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,o=iNe(n,i);return s.bounds==="ticks"&&ave(o,this,"value"),s.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const s=this.ticks;let a=this.min,r=this.max;if(super.configure(),this.options.offset&&s.length){const n=(r-a)/Math.max(s.length-1,1)/2;a-=n,r+=n}this._startValue=a,this._endValue=r,this._valueRange=r-a}getLabelForValue(s){return RS(s,this.chart.options.locale,this.options.ticks.format)}}class lNe extends oNe{static id="linear";static defaults={ticks:{callback:LO.formatters.numeric}};determineDataLimits(){const{min:s,max:a}=this.getMinMax(!0);this.min=mn(s)?s:0,this.max=mn(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const s=this.isHorizontal(),a=s?this.width:this.height,r=Il(this.options.ticks.minRotation),n=(s?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/n))}getPixelForValue(s){return s===null?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getValueForPixel(s){return this._startValue+this.getDecimalForPixel(s)*this._valueRange}}const r1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rn=Object.keys(r1);function LM(t,s){return t-s}function $M(t,s){if(xa(s))return null;const a=t._adapter,{parser:r,round:n,isoWeekday:i}=t._parseOpts;let o=s;return typeof r=="function"&&(o=r(o)),mn(o)||(o=typeof r=="string"?a.parse(o,r):a.parse(o)),o===null?null:(n&&(o=n==="week"&&(Ax(i)||i===!0)?a.startOf(o,"isoWeek",i):a.startOf(o,n)),+o)}function zM(t,s,a,r){const n=Rn.length;for(let i=Rn.indexOf(t);i<n-1;++i){const o=r1[Rn[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((a-s)/(l*o.size))<=r)return Rn[i]}return Rn[n-1]}function cNe(t,s,a,r,n){for(let i=Rn.length-1;i>=Rn.indexOf(a);i--){const o=Rn[i];if(r1[o].common&&t._adapter.diff(n,r,o)>=s-1)return o}return Rn[a?Rn.indexOf(a):0]}function dNe(t){for(let s=Rn.indexOf(t)+1,a=Rn.length;s<a;++s)if(r1[Rn[s]].common)return Rn[s]}function qM(t,s,a){if(!a)t[s]=!0;else if(a.length){const{lo:r,hi:n}=TS(a,s),i=a[r]>=s?a[r]:a[n];t[i]=!0}}function uNe(t,s,a,r){const n=t._adapter,i=+n.startOf(s[0].value,r),o=s[s.length-1].value;let l,c;for(l=i;l<=o;l=+n.add(l,1,r))c=a[l],c>=0&&(s[c].major=!0);return s}function BM(t,s,a){const r=[],n={},i=s.length;let o,l;for(o=0;o<i;++o)l=s[o],n[l]=o,r.push({value:l,major:!1});return i===0||!a?r:uNe(t,r,n,a)}class UM extends kp{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(s){super(s),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(s,a={}){const r=s.time||(s.time={}),n=this._adapter=new B1e._date(s.adapters.date);n.init(a),Xf(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(s),this._normalized=a.normalized}parse(s,a){return s===void 0?null:$M(this,s)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const s=this.options,a=this._adapter,r=s.time.unit||"day";let{min:n,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(m){!o&&!isNaN(m.min)&&(n=Math.min(n,m.min)),!l&&!isNaN(m.max)&&(i=Math.max(i,m.max))}(!o||!l)&&(c(this._getLabelBounds()),(s.bounds!=="ticks"||s.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=mn(n)&&!isNaN(n)?n:+a.startOf(Date.now(),r),i=mn(i)&&!isNaN(i)?i:+a.endOf(Date.now(),r)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const s=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return s.length&&(a=s[0],r=s[s.length-1]),{min:a,max:r}}buildTicks(){const s=this.options,a=s.time,r=s.ticks,n=r.source==="labels"?this.getLabelTimestamps():this._generate();s.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,o=this.max,l=lve(n,i,o);return this._unit=a.unit||(r.autoSkip?zM(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):cNe(this,l.length,a.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:dNe(this._unit),this.initOffsets(n),s.reverse&&l.reverse(),BM(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(s=>+s.value))}initOffsets(s=[]){let a=0,r=0,n,i;this.options.offset&&s.length&&(n=this.getDecimalForValue(s[0]),s.length===1?a=1-n:a=(this.getDecimalForValue(s[1])-n)/2,i=this.getDecimalForValue(s[s.length-1]),s.length===1?r=i:r=(i-this.getDecimalForValue(s[s.length-2]))/2);const o=s.length<3?.5:.25;a=ln(a,0,o),r=ln(r,0,o),this._offsets={start:a,end:r,factor:1/(a+1+r)}}_generate(){const s=this._adapter,a=this.min,r=this.max,n=this.options,i=n.time,o=i.unit||zM(i.minUnit,a,r,this._getLabelCapacity(a)),l=qs(n.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,m=Ax(c)||c===!0,u={};let h=a,f,b;if(m&&(h=+s.startOf(h,"isoWeek",c)),h=+s.startOf(h,m?"day":o),s.diff(r,a,o)>1e5*l)throw new Error(a+" and "+r+" are too far apart with stepSize of "+l+" "+o);const w=n.ticks.source==="data"&&this.getDataTimestamps();for(f=h,b=0;f<r;f=+s.add(f,l,o),b++)qM(u,f,w);return(f===r||n.bounds==="ticks"||b===1)&&qM(u,f,w),Object.keys(u).sort(LM).map(S=>+S)}getLabelForValue(s){const a=this._adapter,r=this.options.time;return r.tooltipFormat?a.format(s,r.tooltipFormat):a.format(s,r.displayFormats.datetime)}format(s,a){const n=this.options.time.displayFormats,i=this._unit,o=a||n[i];return this._adapter.format(s,o)}_tickFormatFunction(s,a,r,n){const i=this.options,o=i.ticks.callback;if(o)return za(o,[s,a,r],this);const l=i.time.displayFormats,c=this._unit,m=this._majorUnit,u=c&&l[c],h=m&&l[m],f=r[a],b=m&&h&&f&&f.major;return this._adapter.format(s,n||(b?h:u))}generateTickLabels(s){let a,r,n;for(a=0,r=s.length;a<r;++a)n=s[a],n.label=this._tickFormatFunction(n.value,a,s)}getDecimalForValue(s){return s===null?NaN:(s-this.min)/(this.max-this.min)}getPixelForValue(s){const a=this._offsets,r=this.getDecimalForValue(s);return this.getPixelForDecimal((a.start+r)*a.factor)}getValueForPixel(s){const a=this._offsets,r=this.getDecimalForPixel(s)/a.factor-a.end;return this.min+r*(this.max-this.min)}_getLabelSize(s){const a=this.options.ticks,r=this.ctx.measureText(s).width,n=Il(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(n),o=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*o,h:r*o+l*i}}_getLabelCapacity(s){const a=this.options.time,r=a.displayFormats,n=r[a.unit]||r.millisecond,i=this._tickFormatFunction(s,0,BM(this,[s],this._majorUnit),n),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let s=this._cache.data||[],a,r;if(s.length)return s;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(a=0,r=n.length;a<r;++a)s=s.concat(n[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const s=this._cache.labels||[];let a,r;if(s.length)return s;const n=this.getLabels();for(a=0,r=n.length;a<r;++a)s.push($M(this,n[a]));return this._cache.labels=this._normalized?s:this.normalize(s)}normalize(s){return IO(s.sort(LM))}}function Py(t,s,a){let r=0,n=t.length-1,i,o,l,c;a?(s>=t[r].pos&&s<=t[n].pos&&({lo:r,hi:n}=Yd(t,"pos",s)),{pos:i,time:l}=t[r],{pos:o,time:c}=t[n]):(s>=t[r].time&&s<=t[n].time&&({lo:r,hi:n}=Yd(t,"time",s)),{time:i,pos:l}=t[r],{time:o,pos:c}=t[n]);const m=o-i;return m?l+(c-l)*(s-i)/m:l}class M$e extends UM{static id="timeseries";static defaults=UM.defaults;constructor(s){super(s),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const s=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(s);this._minPos=Py(a,this.min),this._tableRange=Py(a,this.max)-this._minPos,super.initOffsets(s)}buildLookupTable(s){const{min:a,max:r}=this,n=[],i=[];let o,l,c,m,u;for(o=0,l=s.length;o<l;++o)m=s[o],m>=a&&m<=r&&n.push(m);if(n.length<2)return[{time:a,pos:0},{time:r,pos:1}];for(o=0,l=n.length;o<l;++o)u=n[o+1],c=n[o-1],m=n[o],Math.round((u+c)/2)!==m&&i.push({time:m,pos:o/(l-1)});return i}_generate(){const s=this.min,a=this.max;let r=super.getDataTimestamps();return(!r.includes(s)||!r.length)&&r.splice(0,0,s),(!r.includes(a)||r.length===1)&&r.push(a),r.sort((n,i)=>n-i)}_getTimestampsForTable(){let s=this._cache.all||[];if(s.length)return s;const a=this.getDataTimestamps(),r=this.getLabelTimestamps();return a.length&&r.length?s=this.normalize(a.concat(r)):s=a.length?a:r,s=this._cache.all=s,s}getDecimalForValue(s){return(Py(this._table,s)-this._minPos)/this._tableRange}getValueForPixel(s){const a=this._offsets,r=this.getDecimalForPixel(s)/a.factor-a.end;return Py(this._table,r*this._tableRange+this._minPos,!0)}}const mNe=async()=>(await ie.get("/dashboard/statistics")).data.data,pNe=async(t=30)=>(await ie.get("/dashboard/sales-performance",{params:{period:t}})).data.data,hNe=async(t=30,s=5)=>(await ie.get("/dashboard/top-products",{params:{period:t,limit:s}})).data.data,fNe=async()=>(await ie.get("/dashboard/order-status")).data.data,n1=180*1e3,xNe=()=>tt({queryKey:["dashboardStatistics"],queryFn:mNe,staleTime:n1}),gNe=(t=30)=>tt({queryKey:["salesPerformance",t],queryFn:()=>pNe(t),staleTime:n1}),yNe=(t=30,s=5)=>tt({queryKey:["topProducts",t,s],queryFn:()=>hNe(t,s),staleTime:n1}),bNe=()=>tt({queryKey:["orderStatus"],queryFn:fNe,staleTime:n1}),vNe=(t,s)=>t.find(r=>r.id===s)?.code||"TZS",jNe=t=>({USD:"$",EUR:"",GBP:"",JPY:"",INR:"",TZS:"TZS",CAD:"C$",AUD:"A$"})[t]||t,NNe=(t,s,a=[],r=1)=>{const n=vNe(a,r),i=jNe(n);if(n==="TZS"&&!a.length)return`TZS ${t.toLocaleString()}`;if(s)return s.replace(/[$]|[A-Z]{2,3}/g,o=>o.length>=2?`${i} `:`${i} `);if(n==="INR"){if(t>=1e5){const o=t/1e5;return`${i} ${o.toFixed(1)}L`}return`${i} ${t.toLocaleString("en-IN")}`}return`${i} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}`},Ya=()=>{const{currencies:t,defaultCurrencyId:s}=ybe();return{formatCurrency:(a,r)=>NNe(a,r,t,s),currencies:t,defaultCurrencyId:s}},bF="label";function VM(t,s){typeof t=="function"?t(s):t&&(t.current=s)}function wNe(t,s){const a=t.options;a&&s&&Object.assign(a,s)}function vF(t,s){t.labels=s}function jF(t,s,a=bF){const r=[];t.datasets=s.map(n=>{const i=t.datasets.find(o=>o[a]===n[a]);return!i||!n.data||r.includes(i)?{...n}:(r.push(i),Object.assign(i,n),i)})}function _Ne(t,s=bF){const a={labels:[],datasets:[]};return vF(a,t.labels),jF(a,t.datasets,s),a}function SNe(t,s){const{height:a=150,width:r=300,redraw:n=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:m=[],fallbackContent:u,updateMode:h,...f}=t,b=g.useRef(null),w=g.useRef(null),S=()=>{b.current&&(w.current=new t1(b.current,{type:o,data:_Ne(l,i),options:c&&{...c},plugins:m}),VM(s,w.current))},j=()=>{VM(s,null),w.current&&(w.current.destroy(),w.current=null)};return g.useEffect(()=>{!n&&w.current&&c&&wNe(w.current,c)},[n,c]),g.useEffect(()=>{!n&&w.current&&vF(w.current.config.data,l.labels)},[n,l.labels]),g.useEffect(()=>{!n&&w.current&&l.datasets&&jF(w.current.config.data,l.datasets,i)},[n,l.datasets]),g.useEffect(()=>{w.current&&(n?(j(),setTimeout(S)):w.current.update(h))},[n,c,l.labels,l.datasets,h]),g.useEffect(()=>{w.current&&(j(),setTimeout(S))},[o]),g.useEffect(()=>(S(),()=>j()),[]),e.jsx("canvas",{ref:b,role:"img",height:a,width:r,...f,children:u})}const NF=g.forwardRef(SNe);function i1(t,s){return t1.register(s),g.forwardRef((a,r)=>e.jsx(NF,{...a,ref:r,type:t}))}const HM=i1("line",z1e),CNe=i1("bar",L1e),PNe=i1("doughnut",tF),kNe=i1("pie",q1e);t1.register(nNe,lNe,p2e,s1,b2e,a2e,Y2e,tNe,H2e,$2e);const WM=()=>{const{data:t,isLoading:s}=xNe(),{data:a,isLoading:r}=gNe(30),{data:n,isLoading:i}=yNe(30,5),{data:o,isLoading:l}=bNe(),{formatCurrency:c}=Ya(),m={primary:"#3b82f6",success:"#10b981",warning:"#f59e0b",danger:"#ef4444",purple:"#8b5cf6"},u=ae=>{const ce={blue:{bg:"bg-blue-50",text:"text-blue-600",icon:"bg-blue-100",progress:"bg-blue-500"},pink:{bg:"bg-pink-50",text:"text-pink-600",icon:"bg-pink-100",progress:"bg-pink-500"},cyan:{bg:"bg-cyan-50",text:"text-cyan-600",icon:"bg-cyan-100",progress:"bg-cyan-500"},green:{bg:"bg-green-50",text:"text-green-600",icon:"bg-green-100",progress:"bg-green-500"},purple:{bg:"bg-purple-50",text:"text-purple-600",icon:"bg-purple-100",progress:"bg-purple-500"},orange:{bg:"bg-orange-50",text:"text-orange-600",icon:"bg-orange-100",progress:"bg-orange-500"}};return ce[ae]||ce.blue},h=[{title:"Total Orders",value:t?.totalOrders.value.toLocaleString()||"0",description:`${t?.totalOrders.growthPercentage||"0"}% This Month`,icon:Mle,color:"blue",progress:t?Math.min(t.totalOrders.thisMonth/t.totalOrders.value*100,100):0},{title:"Sales Revenue",value:c(t?.salesRevenue.value||0,t?.salesRevenue.formatted),description:`${t?.salesRevenue.growthPercentage||"0"}% vs Target`,icon:Tle,color:"green",progress:t?parseFloat(t.salesRevenue.targetProgress):0},{title:"Deliveries",value:t?.deliveries.value.toLocaleString()||"0",description:`${t?.deliveries.successRate||"0"}% Success Rate`,icon:Rle,color:"cyan",progress:t?parseFloat(t.deliveries.successRate):0},{title:"Active Outlets",value:t?.activeOutlets.value.toLocaleString()||"0",description:`${t?.activeOutlets.thisWeek||0} New This Week`,icon:Ale,color:"pink",progress:t?Math.min(t.activeOutlets.thisMonth/t.activeOutlets.value*100,100):0}],f=a?.labels||[],b={labels:f,datasets:[{label:"Daily Sales",data:a?.sales||[],borderColor:m.primary,backgroundColor:m.primary+"20",tension:.4,fill:!1}]},w=o?.labels.map(ae=>ae?.charAt(0).toUpperCase()+ae?.slice(1))||[],S={labels:w,datasets:[{data:o?.values||[],backgroundColor:[m.primary,m.success,m.warning,m.danger,m.purple],borderWidth:0}]},j=n?.products.map(ae=>ae.length>15?ae.substring(0,15)+"...":ae)||[],v=n?.products||[],N={labels:j,datasets:[{label:"Units Sold",data:n?.quantities||[],backgroundColor:m.primary,borderColor:m.primary,borderWidth:1}]},C={labels:f,datasets:[{label:"Revenue",data:a?.sales||[],borderColor:m.success,backgroundColor:m.success+"40",tension:.4,fill:!0}]},P=t?Math.round(t.totalOrders.value/Math.max(f.length,1)):0,E=f.map((ae,ce)=>P+ce%3),M={labels:f,datasets:[{label:"Sales",data:a?.sales||[],type:"bar",backgroundColor:m.warning,borderColor:m.warning,borderWidth:1,yAxisID:"y"},{label:"Orders",data:E,type:"line",borderColor:m.danger,backgroundColor:m.danger+"20",tension:.4,fill:!1,yAxisID:"y1"}]},T=t?[{name:"Achieved",value:t?.salesRevenue.value||0},{name:"Pending",value:(t.salesRevenue.target?t.salesRevenue.target-(t.salesRevenue.value||0):0)||0}].filter(ae=>ae.value>0):[],A={labels:T.map(ae=>ae.name),datasets:[{data:T.map(ae=>ae.value),backgroundColor:[m.success,m.warning],borderWidth:0}]},L=f.length>0,F=w.length>0,z=j.length>0,I=f.length>0,Q=f.length>0,Y=T.length>0,B={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}},q={...B,plugins:{...B.plugins,tooltip:{callbacks:{label:ae=>`Daily Sales: ${c(ae.parsed.y)}`}}},scales:{x:{ticks:{maxRotation:45,minRotation:45}}}},V={...B,plugins:{...B.plugins,tooltip:{callbacks:{label:ae=>{const ce=ae.dataIndex;return`${v[ce]||ae.dataset.label}: ${c(ae.parsed.y)}`}}}},scales:{x:{ticks:{maxRotation:45,minRotation:45}}}},G={...B,plugins:{...B.plugins,legend:{position:"bottom"},tooltip:{callbacks:{label:ae=>{const ce=ae.dataset.data.reduce((ne,xe)=>ne+xe,0),he=(ae.parsed/ce*100).toFixed(1);return`${ae.label}: ${c(ae.parsed)} (${he}%)`}}}}},H={...B,plugins:{...B.plugins,tooltip:{callbacks:{label:ae=>{const ce=ae.dataset.data.reduce((ne,xe)=>ne+xe,0),he=(ae.parsed/ce*100).toFixed(0);return`${ae.label}: ${he}%`}}}}},D={...B,plugins:{...B.plugins,tooltip:{callbacks:{label:ae=>{const ce=ae.dataset.label||"",he=ae.parsed.y;return`${ce}: ${c(he)}`}}}},scales:{x:{ticks:{maxRotation:45,minRotation:45}},y:{type:"linear",display:!0,position:"left"},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1}}}},R=s||r||i||l,$=()=>e.jsx("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(X,{variant:"text",width:280,height:32,className:"!mb-2"}),e.jsx(X,{variant:"text",width:400,height:20})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(X,{variant:"rectangular",width:140,height:28,className:"!rounded-full"}),e.jsx(X,{variant:"rectangular",width:100,height:28,className:"!rounded-full"}),e.jsx(X,{variant:"rectangular",width:150,height:28,className:"!rounded-full"})]})]})}),W=()=>e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx(X,{variant:"text",width:120,height:16}),e.jsx(X,{variant:"circular",width:32,height:32,className:"!bg-gray-200"})]}),e.jsxs("div",{className:"flex items-end gap-2 mb-4",children:[e.jsx(X,{variant:"text",width:100,height:32}),e.jsx(X,{variant:"text",width:140,height:16})]}),e.jsx(X,{variant:"rectangular",width:"100%",height:8,className:"!rounded-full !bg-gray-200"})]}),J=({height:ae=288})=>e.jsx("div",{className:"relative",style:{height:`${ae}px`},children:e.jsx("div",{className:"absolute inset-0 flex flex-col",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-12 flex flex-col justify-between w-12",children:[1,2,3,4,5].map(ce=>e.jsx(X,{variant:"text",width:40,height:12,className:"!bg-gray-200"},ce))}),e.jsx("div",{className:"absolute left-12 right-0 top-0 bottom-12 flex items-end justify-between gap-2 px-4",children:[1,2,3,4,5,6,7,8,9,10].map(ce=>e.jsx(X,{variant:"rectangular",width:"8%",style:{height:`${60+ce%3*15}%`},className:"!bg-gray-200 !rounded-t"},ce))}),e.jsx("div",{className:"absolute left-12 right-0 bottom-0 h-12 flex items-center justify-between px-4",children:[1,2,3,4,5,6,7,8,9,10].map(ce=>e.jsx(X,{variant:"text",width:30,height:12,className:"!bg-gray-200"},ce))})]})})}),te=()=>e.jsxs("div",{className:"h-72 w-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(X,{variant:"circular",width:200,height:200,className:"!bg-gray-200"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(X,{variant:"circular",width:100,height:100,className:"!bg-white"})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2",children:[1,2].map(ae=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{variant:"rectangular",width:12,height:12,className:"!bg-gray-200 !rounded"}),e.jsx(X,{variant:"text",width:80,height:14})]},ae))})]}),ee=()=>e.jsx("div",{className:"space-y-4",children:[1,2,3].map(ae=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx(X,{variant:"text",width:120,height:16}),e.jsx(X,{variant:"text",width:80,height:16})]}),e.jsx(X,{variant:"rectangular",width:"100%",height:8,className:"!rounded-full !bg-gray-200 !mb-1"}),e.jsx(X,{variant:"text",width:150,height:12})]},ae))});return R?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx($,{}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(ae=>e.jsx(W,{},ae))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:e.jsx(J,{height:288})})}),e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"bg-white shadow-sm p-1 rounded-lg border border-gray-100",children:[e.jsx(X,{variant:"text",width:150,height:24,className:"!mb-4"}),e.jsx(te,{})]})})]}),e.jsx("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:e.jsx(J,{height:288})}),e.jsx("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:e.jsx(J,{height:288})}),e.jsx("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:e.jsx(J,{height:320})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsx(X,{variant:"text",width:180,height:24,className:"!mb-4"}),e.jsx("div",{className:"h-64 w-full flex items-center justify-center",children:e.jsx(X,{variant:"circular",width:200,height:200,className:"!bg-gray-200"})})]}),e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsx(X,{variant:"text",width:150,height:24,className:"!mb-4"}),e.jsx(ee,{})]})]})]}):e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-600 mb-1",children:"Executive Dashboard"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Track your sales performance, orders, and field operations"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:[c(t?.salesRevenue.value||0,t?.salesRevenue.formatted)," ","Revenue MTD"]}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:[t?.totalOrders.value.toLocaleString()||"0"," Orders"]}),e.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm font-medium",children:[t?.deliveries.successRate||"0","% Delivery Success"]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:h.map(ae=>{const ce=u(ae.color);return e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:ae.title}),e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg ${ce.icon}`,children:e.jsx(ae.icon,{size:16})})]}),e.jsxs("div",{className:"flex items-end gap-2 mb-4",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:ae.value}),e.jsx("span",{className:`text-sm font-medium ${ce.text}`,children:ae.description})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${ce.progress}`,style:{width:`${Math.min(ae.progress,100)}%`}})})]},ae.title)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sales Performance & Trends"}),r?e.jsx(J,{height:288}):L?e.jsx("div",{className:"h-72 w-full",children:e.jsx(HM,{data:b,options:q})}):e.jsx("div",{className:"h-72 flex items-center justify-center bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 mx-auto mb-2 flex justify-center",children:e.jsx(kle,{size:48})}),e.jsx("span",{className:"text-gray-500",children:"No sales data available"})]})})]})}),e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Status"}),l?e.jsx(te,{}):F?e.jsx("div",{className:"h-72 w-full flex items-center justify-center",children:e.jsx(PNe,{data:S,options:G})}):e.jsx("div",{className:"h-72 flex items-center justify-center bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 mx-auto mb-2 flex justify-center",children:e.jsx(Ele,{size:48})}),e.jsx("span",{className:"text-gray-500",children:"No order data available"})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[z&&e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Selling Products (Last 30 Days)"}),i?e.jsx(J,{height:288}):e.jsx("div",{className:"h-72 w-full",children:e.jsx(CNe,{data:N,options:V})})]}),I&&e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Trend"}),r?e.jsx(J,{height:288}):e.jsx("div",{className:"h-72 w-full",children:e.jsx(HM,{data:C,options:q})})]})]}),Q&&e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sales vs Orders Performance"}),r?e.jsx(J,{height:320}):e.jsx("div",{className:"h-80 w-full",children:e.jsx(NF,{type:"bar",data:M,options:D})})]}),Y&&T.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue vs Target"}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(kNe,{data:A,options:H})})]}),e.jsxs("div",{className:"bg-white shadow-sm p-5 rounded-lg border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sales Distribution"}),e.jsx("div",{className:"space-y-4",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx("span",{className:"text-sm font-semibold",children:c(t.salesRevenue.value||0,t.salesRevenue.formatted)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${Math.min(parseFloat(t.salesRevenue.targetProgress||"0"),100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Target Progress:"," ",parseFloat(t.salesRevenue.targetProgress||"0").toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Orders"}),e.jsx("span",{className:"text-sm font-semibold",children:t.totalOrders.value.toLocaleString()})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(t.totalOrders.thisMonth/Math.max(t.totalOrders.value,1)*100,100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["This Month: ",t.totalOrders.thisMonth]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Delivery Success"}),e.jsxs("span",{className:"text-sm font-semibold",children:[t.deliveries.successRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-cyan-500 h-2 rounded-full",style:{width:`${Math.min(parseFloat(t.deliveries.successRate||"0"),100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Completed: ",t.deliveries.value.toLocaleString()]})]})]})})]})]})]})},Xt=({children:t,title:s="Delete Confirmation",description:a="Are you sure you want to delete Admin?",onConfirm:r,onCancel:n,confirmText:i="Delete",cancelText:o="Cancel",placement:l="top",disabled:c=!1})=>{const[m,u]=g.useState(!1),h=g.useRef(null),f=()=>{c||u(!0)},b=()=>{u(!1),n?.()},w=()=>{u(!1),r?.()},S=()=>{b()},j=l==="bottom"?"bottom":"top";return e.jsx(e.Fragment,{children:e.jsx(qa,{open:m,onClose:b,onOpen:()=>{},disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,placement:j,slotProps:{tooltip:{sx:{minWidth:"320px",maxWidth:"360px",padding:0},className:"!relative !w-auto !min-w-0 !max-w-auto !rounded-lg !my-[2px] !bg-white !shadow-xl !border !border-gray-200"},arrow:{className:"color-white",style:{color:"white"}}},title:e.jsx(PZ,{onClickAway:S,children:e.jsxs("div",{onClick:v=>v.stopPropagation(),children:[e.jsx("div",{className:"pt-4 pb-2 px-4",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2 leading-tight",children:s}),e.jsx("p",{className:"text-sm text-gray-600 text-wrap leading-relaxed",children:a})]})})}),e.jsxs("div",{className:"flex justify-end gap-2 pb-4 px-4",children:[e.jsx(K,{type:"button",size:"small",variant:"outlined",onClick:b,children:o}),e.jsx(K,{type:"button",size:"small",onClick:w,children:i})]})]})}),arrow:!0,children:e.jsx("div",{ref:h,onClick:f,className:`inline-block ${c?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:t})})})},ENe=({children:t,itemName:s="this item",onConfirm:a,onCancel:r})=>e.jsx(Xt,{title:"Delete Confirmation",description:`Are you sure you want to delete ${s}?`,onConfirm:a,onCancel:r,confirmText:"Delete",cancelText:"Cancel",children:t}),rs=({onClick:t,disabled:s=!1,tooltip:a="Edit",size:r="medium"})=>{const n=e.jsx(ta,{size:r,onClick:i=>{i.stopPropagation(),t?.()},disabled:s,className:"!bg-blue-100 !rounded hover:!bg-blue-200 !text-blue-600",children:e.jsx(rA,{fontSize:"small"})});return a?e.jsx(qa,{placement:"top",title:a,arrow:!0,children:n}):n},Vt=({onClick:t,disabled:s=!1,tooltip:a="Delete",size:r="medium",confirmDelete:n=!0,itemName:i="this item"})=>{const o=e.jsx(ta,{size:r,disabled:s,className:"!bg-red-100 !rounded hover:!bg-red-200 !text-red-600",children:e.jsx(Nb,{fontSize:"small"})}),l=a?e.jsx(qa,{placement:"top",title:a,arrow:!0,children:o}):o;return n?e.jsx(ENe,{itemName:i,onConfirm:t,children:l}):e.jsx("div",{onClick:c=>c.stopPropagation(),children:l})},Wa=({onClick:t,disabled:s=!1,tooltip:a="Action",size:r="medium",icon:n,color:i="primary"})=>{const o=c=>{switch(c){case"error":return"!bg-red-100 hover:!bg-red-200 !text-red-600";case"warning":return"!bg-orange-100 hover:!bg-orange-200 !text-orange-600";case"success":return"!bg-green-100 hover:!bg-green-200 !text-green-600";case"info":return"!bg-blue-100 hover:!bg-blue-200 !text-blue-600";default:return"!bg-gray-100 hover:!bg-gray-200 !text-gray-600"}},l=e.jsx(ta,{size:r,onClick:t,disabled:s,className:`!rounded ${o(i)} ${s?"!cursor-not-allowed":""}`,children:n});return a?e.jsx(qa,{placement:"top",title:a,arrow:!0,children:l}):l},ts=({value:t="",placeholder:s="Search...",onChange:a,onInputChange:r,onEnterPress:n,className:i="",size:o="small",showClear:l=!0,disabled:c=!1,fullWidth:m=!1,debounceMs:u=300})=>{const[h,f]=g.useState(t||"");g.useEffect(()=>{if(u===0){a?.(h);return}const j=setTimeout(()=>{a?.(h)},u);return()=>clearTimeout(j)},[h,u,a]),g.useEffect(()=>{f(t||"")},[t]);const b=g.useCallback(j=>{const v=j.target.value;f(v),r?.(v)},[r]),w=g.useCallback(()=>{f(""),a?.(""),r?.("")},[a,r]),S=g.useCallback(j=>{j.key==="Enter"&&n&&(j.preventDefault(),n(h))},[n,h]);return e.jsx(mr,{value:h,onChange:b,onKeyDown:S,placeholder:s,size:o,disabled:c,fullWidth:m,className:i,variant:"outlined",slotProps:{input:{startAdornment:e.jsx(_w,{position:"start",children:e.jsx(iA,{className:"!text-gray-400 !text-xl"})}),endAdornment:l&&h&&e.jsx(_w,{position:"end",children:e.jsx(lle,{className:"!text-gray-400 !text-xl !cursor-pointer hover:!text-gray-600",onClick:w})}),className:"!text-sm"}}})},_e=({formik:t,name:s="",size:a="small",setValue:r,label:n,value:i,required:o,children:l,fullWidth:c=!1,placeholder:m,onBlur:u,onChange:h,disabled:f,disableClearable:b=!1,...w})=>{const S=g.useMemo(()=>l?vt.Children.toArray(l).filter(A=>vt.isValidElement(A)?A.props.value!==void 0:!1).map(A=>{const L=A.props,F=L.value;let z="";const I=L.children;if(typeof I=="string")z=I;else if(vt.isValidElement(I)){const Q=I.props;z=(typeof Q?.children=="string"?Q.children:Q?.children?.toString())||F?.toString()||""}else Array.isArray(I)?z=I.map(Q=>typeof Q=="string"?Q:"").join("")||F?.toString()||"":I!=null?z=String(I):z=F?.toString()||"";return{value:F,label:z||F?.toString()||"",disabled:L.disabled||!1}}).filter(A=>A.value!==void 0&&A.value!==null):[],[l]),j=g.useMemo(()=>i!==void 0?i:t&&s&&t.values[s]||null,[i,t?.values[s],s]),v=g.useMemo(()=>j==null||j===""?null:S.find(T=>T.value===j||String(T.value)===String(j))||null,[j,S]),N=g.useCallback((M,T)=>{const A=T?.value??null;t&&s?t.setFieldValue(s,A):r?r(A):h&&h({target:{name:s,value:A},currentTarget:{name:s,value:A}})},[t,s,r,h]),C=g.useCallback(()=>{t&&s&&(t.setFieldTouched(s,!0),t.handleBlur({target:{name:s}})),u&&u({target:{name:s}})},[t,s,u]),P=g.useMemo(()=>!t||!s?!1:t.touched?.[s]&&t.errors?.[s],[t?.touched?.[s],t?.errors?.[s],s]),E=typeof P=="string"?P:void 0;return e.jsxs(wv,{fullWidth:c,error:!!P,children:[e.jsx(Ir,{options:S,value:v,onChange:N,onBlur:C,getOptionLabel:M=>M&&(M.label||String(M.value))||"",isOptionEqualToValue:(M,T)=>!M||!T?!1:M.value===T.value||String(M.value)===String(T.value),getOptionDisabled:M=>M?.disabled||!1,disabled:f,size:a,fullWidth:c,openOnFocus:!0,selectOnFocus:!0,clearOnBlur:!1,disableClearable:!!b,filterOptions:(M,T)=>!T.inputValue||T.inputValue.trim()===""?M:M.filter(A=>A.label.toLowerCase().includes(T.inputValue.toLowerCase())),sx:{minWidth:"160px"},slotProps:{popper:{style:{zIndex:1300},placement:"bottom-start"},listbox:{style:{maxHeight:"300px"}}},renderInput:M=>e.jsx(mr,{...M,label:n,placeholder:m,required:o,error:!!P,name:s,size:a,sx:{minWidth:"160px"},slotProps:{input:{...M.InputProps,readOnly:!1},htmlInput:{...M.inputProps,required:!1}}}),renderOption:(M,T)=>g.createElement("li",{...M,key:`${T.value}-${T.label}`},T.label),noOptionsText:"No options available",...w}),E&&e.jsx(_4,{children:E})]})},fe=({title:t,value:s,icon:a,color:r="blue",isLoading:n=!1})=>e.jsx(y,{className:"rounded-lg shadow-sm border p-6 bg-white border-gray-200",children:e.jsxs(y,{className:"flex items-center justify-between",children:[e.jsxs(y,{children:[e.jsx("p",{className:`text-sm font-medium text-${r}-500`,children:t}),n?e.jsx(X,{variant:"text",width:64,height:35,className:"mt-1",sx:{bgcolor:"rgba(229, 231, 235, 1)"}}):e.jsx("p",{className:`text-2xl font-bold mt-1 text-${r}-600`,children:s})]}),e.jsx(y,{className:`w-12 h-12 rounded-full flex items-center justify-center bg-${r}-100`,children:e.jsx(y,{className:`text-${r}-600`,children:a})})]})});function YM(t,s){return s.split(".").reduce((a,r)=>a&&a[r]!==void 0?a[r]:"",t)}function GM(t,s,a){const r=YM(t,String(a)),n=YM(s,String(a));return n<r?-1:n>r?1:0}function TNe(t,s){return t==="none"?()=>0:t==="desc"?(a,r)=>GM(a,r,s):(a,r)=>-GM(a,r,s)}function KM(t){const{order:s,orderBy:a,onRequestSort:r,columns:n,sortable:i}=t,o=c=>m=>{r(m,c)},l=n.filter(c=>c.isVisible!==!1);return e.jsx(XR,{children:e.jsx(Qd,{children:l.map(c=>e.jsx($i,{align:c.numeric?"right":"left",padding:c.disablePadding?"none":"normal",sortDirection:a===c.id&&s!=="none"?s:!1,className:nr(c.className,"!border-b !px-1.5 !border-gray-200 !bg-blue-50 !font-semibold","!whitespace-nowrap !text-gray-700 !p-4 !text-sm",c.numeric&&"!justify-end"),style:{width:c.width},children:i&&c.sortable!==!1?e.jsxs(Qte,{IconComponent:vie,slotProps:{icon:{className:"!w-4 !h-4 !text-primary-500"}},active:a===c.id&&s!=="none",direction:a===c.id&&s!=="none"?s:"asc",onClick:o(c.id),className:nr("hover:!text-blue-600 !flex !justify-between",a===c.id&&s!=="none"&&"!text-blue-600"),children:[c.label,a===c.id&&s!=="none"?e.jsx(y,{component:"span",sx:GR,children:s==="desc"?"sorted descending":"sorted ascending"}):null]}):c.label},String(c.id)))})})}function QM({columns:t,rows:s=3}){const a=Array.from({length:s},(i,o)=>o),r=(i,o)=>{const l=["60%","80%","70%","90%","50%","75%"];return l[o%l.length]},n=t.filter(i=>i.isVisible!==!1);return e.jsx(e.Fragment,{children:a.map((i,o)=>e.jsx(Qd,{children:n.map((l,c)=>e.jsx($i,{align:l.numeric?"right":"left",padding:l.disablePadding?"none":"normal",className:"!border-b !border-gray-100 !h-[50px]",children:e.jsx(y,{className:"!flex !items-center !gap-1.5",children:e.jsx(y,{className:"!flex-1",children:e.jsx(X,{variant:"text",width:r(l,c),height:20,className:"!bg-gray-100 !rounded"})})})},`skeleton-${o}-${String(l.id)}`))},`skeleton-row-${o}`))})}function ot(t){const{data:s,columns:a,sortable:r=!0,pagination:n=!0,onRowClick:i,loading:o=!1,emptyMessage:l="No data available",getRowId:c=(V,G)=>V.id??G,initialOrderBy:m,initialOrder:u="none",stickyHeader:h=!1,maxHeight:f,totalCount:b=0,page:w=0,rowsPerPage:S=6,onPageChange:j,isPermission:v=!0,noAccessMessage:N="You do not have permission to access this content",compact:C=!1}=t,[P,E]=g.useState(u),[M,T]=g.useState(()=>{if(m&&u!=="none"){const V=a.find(G=>G.id===m);if(V&&V.sortable!==!1)return m}return""}),A=g.useMemo(()=>new Map(a.map(V=>[String(V.id),V])),[a]),L=g.useMemo(()=>a.filter(V=>V.isVisible!==!1),[a]),F=(V,G)=>{A.get(String(G))?.sortable!==!1&&(M!==G?(E("asc"),T(G)):P==="none"?E("asc"):P==="asc"?E("desc"):(E("none"),T("")))},z=(V,G,H)=>{i?.(G,H)},I=(V,G)=>{j?.(G)},Q=g.useMemo(()=>!r||!M||P==="none"?s:[...s].sort(TNe(P,M)),[s,P,M,r]),Y=o&&s.length===0,B=!v,q=()=>B?e.jsxs(y,{className:"!flex !flex-col !items-center !justify-center !py-16 !px-4",children:[e.jsx(y,{className:"!mb-4 !p-4 !rounded-full !bg-red-100",children:e.jsx(ioe,{className:"!w-12 !h-12 !text-red-500"})}),e.jsxs(y,{className:"!text-center !max-w-md",children:[e.jsx(y,{className:"!text-lg !font-semibold !text-gray-700 !mb-2",children:"Access Denied"}),e.jsx(y,{className:"!text-sm !text-gray-500",children:N})]})]}):Y?e.jsxs(Mw,{className:C?"":"!min-w-[750px]",size:"small",stickyHeader:h,children:[e.jsx(KM,{order:P,orderBy:M?String(M):"",onRequestSort:()=>{},columns:a,sortable:r}),e.jsx(Dw,{children:e.jsx(QM,{columns:a,rows:6})})]}):e.jsxs(Mw,{className:C?"":"!min-w-[750px]",size:"small",stickyHeader:h,children:[e.jsx(KM,{order:P,orderBy:M?String(M):"",onRequestSort:F,columns:a,sortable:r}),e.jsx(Dw,{children:o?e.jsx(QM,{columns:a,rows:S}):Q.length===0?e.jsx(Qd,{children:e.jsx($i,{colSpan:a.length,align:"center",className:"!py-4 !border-none !text-gray-500 !italic",children:l})}):Q.map((V,G)=>{const H=c(V,G);return e.jsx(Qd,{hover:!0,onClick:D=>z(D,V,G),tabIndex:-1,className:"!whitespace-nowrap last:!border-b-0 !cursor-pointer hover:!bg-gray-50",children:L.map(D=>e.jsx($i,{align:D.numeric?"right":"left",padding:D.disablePadding?"none":"normal",className:"!border-b !p-1.5 !border-gray-100 !text-gray-700 !whitespace-nowrap !text-sm",children:D.render?D.render(V[D.id],V,G):String(V[D.id]||"")},String(D.id)))},String(H))})})]});return e.jsx(y,{className:"!w-full",children:e.jsxs(oa,{elevation:0,className:"!bg-white !shadow-sm !rounded-lg !border !border-gray-100",children:[t.actions&&!Array.isArray(t.actions)&&e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!p-3",children:t.actions}),e.jsx(pr,{className:"!border-gray-200"})]}),e.jsx(ZR,{style:{maxHeight:f},children:q()}),n&&v&&e.jsx(qte,{rowsPerPageOptions:[],component:"div",showFirstButton:!0,showLastButton:!0,count:b,rowsPerPage:S,page:w,onPageChange:I,className:"!border-t !border-gray-200 [&_.MuiTablePagination-toolbar]:!text-gray-700 [&_.MuiTablePagination-selectIcon]:!text-gray-500"})]})})}const MNe=async t=>{try{return(await ie.get("/api-tokens",{params:t})).data}catch(s){throw s}},DNe=async t=>(await ie.patch(`/api-tokens/${t}/revoke`)).data,RNe=async t=>(await ie.delete(`/api-tokens/${t}`)).data,Ic={all:["api-tokens"],lists:()=>[...Ic.all,"list"],list:t=>[...Ic.lists(),t],details:()=>[...Ic.all,"detail"],detail:t=>[...Ic.details(),t]},ANe=(t,s)=>tt({queryKey:Ic.list(t||{}),queryFn:()=>MNe(t),staleTime:300*1e3,...s}),INe=t=>{const s=is();return De({mutationFn:DNe,loadingMessage:"Revoking token...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Ic.lists()}),s.invalidateQueries({queryKey:Ic.detail(r)})},onError:t?.onError})},ONe=t=>{const s=is();return De({mutationFn:RNe,loadingMessage:"Deleting token...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Ic.lists()})},onError:t?.onError})},FNe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState("all"),[o,l]=g.useState(1),[c]=g.useState(10),{isUpdate:m,isDelete:u,isRead:h}=Qe("token"),{data:f,isLoading:b,error:w}=ANe({search:t,page:o,limit:c,isActive:a==="all"?void 0:a==="active"?"Y":"N",isRevoked:n==="all"?void 0:n==="revoked"?"true":"false"},{enabled:h}),S=f?.data||[],j=f?.meta?.total_count||0,v=(f?.meta?.current_page||1)-1,N=INe(),C=ONe(),P=f?.stats||{},E=P.total_tokens??S.length,M=P.active_tokens??S.filter(q=>q.is_active==="Y").length,T=P.revoked_tokens??S.filter(q=>q.is_revoked).length,A=P.expired_tokens??S.filter(q=>q.expires_at&&new Date(q.expires_at)<new Date).length,L=g.useCallback(async q=>{try{await N.mutateAsync(q)}catch(V){console.error("Error revoking token:",V)}},[N]),F=g.useCallback(async q=>{try{await C.mutateAsync(q)}catch(V){console.error("Error deleting token:",V)}},[C]),z=g.useCallback(q=>{s(q),l(1)},[]),I=q=>{l(q+1)},Q=q=>{if(!q)return"Unknown device";const V=q.toLowerCase();if(V.includes("macintosh")||V.includes("mac os x")){const G=q.match(/Mac OS X (\d+[._]\d+[._]\d+)/),H=G?G[1].replace(/_/g,"."):"";if(V.includes("chrome")){const D=q.match(/Chrome\/(\d+\.\d+\.\d+\.\d+)/),R=D?D[1]:"";return`Mac${H?` (macOS ${H})`:""} - Chrome${R?` ${R}`:""}`}if(V.includes("safari")&&!V.includes("chrome"))return`Mac${H?` (macOS ${H})`:""} - Safari`;if(V.includes("firefox"))return`Mac${H?` (macOS ${H})`:""} - Firefox`}if(V.includes("windows")){let G="";if(V.includes("windows nt 10.0"))G="Windows 10";else if(V.includes("windows nt 11.0"))G="Windows 11";else if(V.includes("windows nt 6.3"))G="Windows 8.1";else if(V.includes("windows nt 6.2"))G="Windows 8";else if(V.includes("windows nt 6.1"))G="Windows 7";else{const H=q.match(/Windows NT (\d+\.\d+)/i);if(H){const D=H[1];D==="10.0"?G="Windows 10":D==="11.0"?G="Windows 11":D==="6.3"?G="Windows 8.1":D==="6.2"?G="Windows 8":D==="6.1"?G="Windows 7":G=`Windows NT ${D}`}else G="Windows"}if(V.includes("chrome")){const H=q.match(/Chrome\/(\d+\.\d+\.\d+\.\d+)/),D=H?H[1]:"";return`${G}${D?` - Chrome ${D}`:" - Chrome"}`}if(V.includes("firefox")){const H=q.match(/Firefox\/(\d+\.\d+)/),D=H?H[1]:"";return`${G}${D?` - Firefox ${D}`:" - Firefox"}`}if(V.includes("edge")){const H=q.match(/Edg\/(\d+\.\d+\.\d+\.\d+)/),D=H?H[1]:"";return`${G}${D?` - Edge ${D}`:" - Edge"}`}return G}return V.includes("android")&&V.includes("chrome")?"Android - Chrome":(V.includes("iphone")||V.includes("ipad"))&&V.includes("safari")?"iOS - Safari":V.includes("dart")?"Mobile App (Dart)":q},Y=q=>q.is_revoked?"revoked":q.expires_at&&new Date(q.expires_at)<new Date?"expired":q.is_active==="Y"?"active":"inactive",B=[{id:"users_api_tokens_user_idTousers",label:"User",render:(q,V)=>{const G=V.users_api_tokens_user_idTousers;return e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:G?.name,className:"!rounded !bg-primary-100 !text-primary-500",children:G?.name?.charAt(0)||"U"}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:G?.name||"Unknown User"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:G?.email||`ID: ${V.user_id}`})]})]})}},{id:"token_type",label:"Token Type",render:(q,V)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:V.token_type||e.jsx("span",{className:"italic text-gray-400",children:"No Token Type"})})},{id:"device_id",label:"Device",render:(q,V)=>e.jsx(qa,{title:V.device_id||"No Device",arrow:!0,placement:"top",children:e.jsx(x,{variant:"body2",className:"!text-gray-900",children:V.device_id?Q(V.device_id):e.jsx("span",{className:"italic text-gray-400",children:"No Device"})})})},{id:"ip_address",label:"IP Address",render:(q,V)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:V.ip_address&&V.ip_address!==""?V.ip_address?.replace(/^::ffff:/,""):e.jsx("span",{className:"italic text-gray-400",children:"No IP"})})},{id:"is_active",label:"Status",render:(q,V)=>{const G=Y(V),D={active:{label:"Active",color:"success",icon:e.jsx(mt,{})},inactive:{label:"Inactive",color:"default",icon:e.jsx(Ct,{})},revoked:{label:"Revoked",color:"error",icon:e.jsx(Ct,{})},expired:{label:"Expired",color:"warning",icon:e.jsx(Ct,{})}}[G];return e.jsx(Me,{variant:"outlined",icon:D.icon,label:D.label,size:"small",color:D.color})}},{id:"issued_at",label:"Issued At",render:(q,V)=>Ie(V.issued_at?.toString())||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},{id:"expires_at",label:"Expires At",render:(q,V)=>Ie(V.expires_at?.toString())||e.jsx("span",{className:"italic text-gray-400",children:"No Expiry"})},...m||u||h?[{id:"action",label:"Actions",sortable:!1,render:(q,V)=>{const G=V.is_revoked,H=V.expires_at&&new Date(V.expires_at)<new Date;return e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[m&&!G&&!H&&e.jsx(e.Fragment,{children:e.jsx(Xt,{title:"Revoke Token",description:"Are you sure you want to revoke this token? It will no longer be usable.",confirmText:"Revoke",onConfirm:()=>L(V.id),children:e.jsx(Wa,{tooltip:`Revoke Token #${V.id}`,disabled:N.isPending,icon:e.jsx(Ct,{}),color:"error"})})}),u&&e.jsx(Vt,{onClick:()=>F(V.id),tooltip:`Delete Token #${V.id}`,itemName:`Token #${V.id}`,confirmDelete:!0})]})}}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"API Tokens Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage and monitor API tokens for all users"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Tokens",value:E,icon:e.jsx(aoe,{className:"w-6 h-6"}),color:"blue",isLoading:b}),e.jsx(fe,{title:"Active Tokens",value:M,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:b}),e.jsx(fe,{title:"Revoked Tokens",value:T,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:b}),e.jsx(fe,{title:"Expired Tokens",value:A,icon:e.jsx(eA,{className:"w-6 h-6"}),color:"orange",isLoading:b})]}),w&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load API tokens. Please try again."}),e.jsx(ot,{data:S,columns:B,actions:h?e.jsx("div",{className:"flex justify-between gap-3 items-center flex-wrap",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(ts,{placeholder:"Search API Tokens...",value:t,onChange:z,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:q=>r(q.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:n,onChange:q=>i(q.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Revoked"}),e.jsx(Z,{value:"revoked",children:"Revoked"}),e.jsx(Z,{value:"not-revoked",children:"Not Revoked"})]})]})}):!1,getRowId:q=>q.id,initialOrderBy:"id",loading:b,totalCount:j,page:v,rowsPerPage:c,onPageChange:I,isPermission:h,emptyMessage:t?`No API tokens found matching "${t}"`:"No API tokens found in the system"})]})},LNe=async t=>{try{return(await ie.get("/asset-maintenance",{params:t})).data}catch(s){throw console.error("Error fetching asset maintenances:",s),new Error(s.response?.data?.message||"Failed to fetch asset maintenances")}},$Ne=async t=>{try{return(await ie.post("/asset-maintenance",t)).data.data}catch(s){throw console.error("Error creating asset maintenance:",s),new Error(s.response?.data?.message||"Failed to create asset maintenance")}},zNe=async(t,s)=>{try{return(await ie.put(`/asset-maintenance/${t}`,s)).data.data}catch(a){throw console.error("Error updating asset maintenance:",a),new Error(a.response?.data?.message||"Failed to update asset maintenance")}},qNe=async t=>{try{await ie.delete(`/asset-maintenance/${t}`)}catch(s){throw console.error("Error deleting asset maintenance:",s),new Error(s.response?.data?.message||"Failed to delete asset maintenance")}},pf={all:["asset-maintenance"],lists:()=>[...pf.all,"list"],list:t=>[...pf.lists(),t],details:()=>[...pf.all,"detail"],detail:t=>[...pf.details(),t]},BNe=(t,s)=>tt({queryKey:pf.list(t),queryFn:()=>LNe(t),staleTime:300*1e3,...s}),UNe=()=>De({mutationFn:$Ne,invalidateQueries:["asset-maintenance"],loadingMessage:"Creating asset maintenance..."}),VNe=()=>De({mutationFn:({id:t,data:s})=>zNe(t,s),invalidateQueries:["asset-maintenance"],loadingMessage:"Updating asset maintenance..."}),HNe=()=>De({mutationFn:qNe,invalidateQueries:["asset-maintenance"],loadingMessage:"Deleting asset maintenance..."}),WNe=async t=>{try{return(await ie.get(`/import-export/${t}/template`,{responseType:"blob"})).data}catch(s){throw console.error("Error downloading template:",s),new Error(s.response?.data?.message||"Failed to download template")}},YNe=async(t,s,a={})=>{try{const r=new FormData;return r.append("file",s),a.batchSize&&r.append("batchSize",a.batchSize.toString()),a.skipDuplicates!==void 0&&r.append("skipDuplicates",a.skipDuplicates.toString()),a.updateExisting!==void 0&&r.append("updateExisting",a.updateExisting.toString()),(await ie.post(`/import-export/${t}/import`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error importing data:",r),new Error(r.response?.data?.message||"Failed to import data")}},GNe=async(t,s)=>{try{return(await ie.get(`/import-export/${t}/export/excel`,{params:s,responseType:"blob"})).data}catch(a){throw console.error("Error exporting to Excel:",a),new Error(a.response?.data?.message||"Failed to export to Excel")}},ys=()=>De({mutationFn:async t=>{const s=await WNe(t),a=window.URL.createObjectURL(s),r=document.createElement("a");return r.href=a,r.download=`${t}_template_${Date.now()}.xlsx`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),{success:!0,message:"Template downloaded successfully"}},loadingMessage:"Downloading template..."}),bs=t=>De({mutationFn:({tableName:s,file:a,options:r})=>YNe(s,a,r),loadingMessage:"Importing data...",onSuccess:t?.onSuccess,onError:t?.onError}),ls=()=>De({mutationFn:async({tableName:t,filters:s})=>{const a=await GNe(t,s),r=window.URL.createObjectURL(a),n=document.createElement("a");return n.href=r,n.download=`${t}_export_${Date.now()}.xlsx`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r),{success:!0,message:"Data exported to Excel successfully"}},loadingMessage:"Exporting to Excel..."}),KNe=nt({file:hs().required("Please select a file to import")}),QNe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:KNe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("asset_maintenance")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"asset_maintenance",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Asset Maintenance",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple asset maintenance records. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},ZNe=async t=>{try{return(await ie.get("/asset-master",{params:t})).data}catch(s){throw console.error("Error fetching asset master:",s),new Error(s.response?.data?.message||"Failed to fetch asset master")}},XNe=async(t,s)=>{try{const a=new FormData;if(Object.entries(t).forEach(([n,i])=>{i!=null&&a.append(n,i.toString())}),s&&s.length>0){s.forEach(i=>{a.append("assetImages",i)});const n=s.map((i,o)=>({caption:`Asset Image ${o+1}`}));a.append("assetImages",JSON.stringify(n))}return(await ie.post("/asset-master",a,{headers:{"Content-Type":"multipart/form-data"}})).data.data}catch(a){throw console.error("Error creating asset master:",a),new Error(a.response?.data?.message||"Failed to create asset master")}},JNe=async(t,s)=>{try{return(await ie.put(`/asset-master/${t}`,s)).data.data}catch(a){throw console.error("Error updating asset master:",a),new Error(a.response?.data?.message||"Failed to update asset master")}},ewe=async t=>{try{await ie.delete(`/asset-master/${t}`)}catch(s){throw console.error("Error deleting asset master:",s),new Error(s.response?.data?.message||"Failed to delete asset master")}},hf={all:["asset-master"],lists:()=>[...hf.all,"list"],list:t=>[...hf.lists(),t],details:()=>[...hf.all,"detail"],detail:t=>[...hf.details(),t]},qS=(t,s)=>tt({queryKey:hf.list(t),queryFn:()=>ZNe(t),staleTime:300*1e3,...s}),twe=()=>De({mutationFn:({data:t,images:s})=>XNe(t,s),invalidateQueries:["asset-master"],loadingMessage:"Creating asset..."}),swe=()=>De({mutationFn:({id:t,data:s})=>JNe(t,s),invalidateQueries:["asset-master"],loadingMessage:"Updating asset..."}),awe=()=>De({mutationFn:ewe,invalidateQueries:["asset-master"],loadingMessage:"Deleting asset..."}),rwe=nt({asset_id:Ge().required("Asset is required").positive("Asset ID must be positive"),maintenance_date:Ca().required("Maintenance date is required").max(new Date,"Maintenance date cannot be in the future"),issue_reported:me().max(1e3,"Issue reported must be less than 1000 characters").optional(),action_taken:me().max(1e3,"Action taken must be less than 1000 characters").optional(),technician_id:Ge().required("Technician is required").positive("Technician ID must be positive"),cost:Ge().min(0,"Cost must be non-negative").optional(),remarks:me().max(1e3,"Remarks must be less than 1000 characters").optional(),is_active:me().oneOf(["Y","N"],"Status must be Active or Inactive").required("Status is required")}),wF=Ne("span")(({theme:t})=>({borderRadius:"50%",width:18,height:18,boxShadow:"inset 0 0 0 1px rgba(16,22,26,.2), inset 0 -1px 0 rgba(16,22,26,.1)",backgroundColor:"#f5f8fa",backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))",".Mui-focusVisible &":{outline:`2px auto ${t.palette.primary.main}`,outlineOffset:2},"input:hover ~ &":{backgroundColor:t.primaryColors?.[100]},"input:disabled ~ &":{boxShadow:"none",background:"rgba(206,217,224,.5)"}})),nwe=Ne(wF)(({theme:t})=>({backgroundColor:t.palette.primary.main,backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))","&::before":{display:"block",width:18,height:18,backgroundImage:"radial-gradient(#fff,#fff 28%,transparent 32%)",content:'""'},"input:hover ~ &":{backgroundColor:t.primaryColors?.[700]||"#1d4ed8"}})),ZM=t=>e.jsx(gx,{disableRipple:!0,color:"default",checkedIcon:e.jsx(nwe,{}),icon:e.jsx(wF,{}),...t}),Ts=({formik:t,name:s,label:a="Status",required:r=!1,className:n="",disabled:i=!1,value:o,onChange:l})=>{const c=o!==void 0?o:t?.values?.[s]||"Y",m=f=>{const b=f.target.value;t?t.setFieldValue(s,b):l&&l(b)},u=t?.touched?.[s]&&t?.errors?.[s],h=typeof u=="string"?u:void 0;return e.jsxs(wv,{component:"fieldset",className:`${n}`,error:!!u,disabled:i,children:[e.jsxs(LR,{component:"legend",className:"!text-gray-700 !text-sm !font-medium",children:[a,r&&e.jsx("span",{children:" *"})]}),e.jsxs(yx,{row:!0,name:s,value:c,onChange:m,className:"!gap-4 pl-1",children:[e.jsx(Xn,{value:"Y",control:e.jsx(ZM,{}),label:"Active",disabled:i}),e.jsx(Xn,{value:"N",control:e.jsx(ZM,{}),label:"Inactive",disabled:i})]}),h&&e.jsx("span",{className:"!text-red-500 !text-xs !mt-1 !ml-2",children:h})]})},iwe=({selectedMaintenance:t,setSelectedMaintenance:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,{data:i}=qS({page:1,limit:1e3,status:"active"}),o=i?.data||[],{data:l}=Qr({page:1,limit:1e3,isActive:"Y"}),c=l?.data||[],m=UNe(),u=VNe(),h=()=>{s(null),r(!1),f.resetForm()},f=xt({initialValues:{asset_id:t?.asset_id?.toString()||"",maintenance_date:Or(t?.maintenance_date),issue_reported:t?.issue_reported||"",action_taken:t?.action_taken||"",technician_id:t?.technician_id?.toString()||"",cost:t?.cost?.toString()||"",remarks:t?.remarks||"",is_active:t?.is_active||"Y"},validationSchema:rwe,enableReinitialize:!0,onSubmit:async b=>{try{const w={asset_id:Number(b.asset_id),maintenance_date:b.maintenance_date,issue_reported:b.issue_reported,action_taken:b.action_taken,technician_id:Number(b.technician_id),cost:b.cost?Number(b.cost):void 0,remarks:b.remarks,is_active:b.is_active};n&&t?await u.mutateAsync({id:t.id,data:w}):await m.mutateAsync(w),h()}catch(w){console.error("Error submitting asset maintenance:",w)}}});return e.jsx(it,{open:a,setOpen:h,title:n?"Edit Asset Maintenance":"Create Asset Maintenance",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsxs(_e,{name:"asset_id",label:"Asset",formik:f,required:!0,children:[e.jsx(Z,{value:"",children:"Select Asset"}),o.map(b=>e.jsxs(Z,{value:b.id?.toString()||"",children:[b.asset_master_asset_types?.name," (",b.serial_number,")"]},b.id))]}),e.jsxs(_e,{name:"technician_id",label:"Technician",formik:f,required:!0,children:[e.jsx(Z,{value:"",children:"Select Technician"}),c.map(b=>e.jsxs(Z,{value:b.id?.toString()||"",children:[b.name," (",b.email,")"]},b.id))]}),e.jsx(oe,{name:"maintenance_date",label:"Maintenance Date",type:"date",formik:f,required:!0,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(oe,{name:"cost",label:"Cost",type:"number",placeholder:"Enter maintenance cost",formik:f})]}),e.jsx(oe,{name:"issue_reported",label:"Issue Reported",placeholder:"Describe the issue that was reported",formik:f,multiline:!0,rows:3}),e.jsx(oe,{name:"action_taken",label:"Action Taken",placeholder:"Describe the action taken to resolve the issue",formik:f,multiline:!0,rows:3}),e.jsx(oe,{name:"remarks",label:"Remarks",placeholder:"Enter additional remarks",formik:f,multiline:!0,rows:3}),e.jsx(Ts,{name:"is_active",formik:f,required:!0,className:"col-span-2"}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,className:"!mr-3",disabled:m.isPending||u.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:m.isPending||u.isPending,children:[m.isPending||u.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," "]})]})]})})})},owe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{formatCurrency:b}=Ya(),{isCreate:w,isUpdate:S,isDelete:j,isRead:v}=Qe("maintenance"),{data:N,isLoading:C,error:P}=BNe({search:t,page:u,limit:f,status:a==="all"?void 0:a},{enabled:v}),E=N?.data||[],M=N?.meta?.total||0,T=(N?.meta?.page||1)-1,A=HNe(),L=ls(),F=N?.stats||{},z=F.total_records??0,I=F.active_records??0,Q=F.inactive_records??0,Y=F.this_month_records??F.records_this_month??0,B=g.useCallback(()=>{i(null),l(!0)},[]),q=g.useCallback($=>{i($),l(!0)},[]),V=g.useCallback(async $=>{try{await A.mutateAsync($)}catch(W){console.error("Error deleting asset maintenance:",W)}},[A]),G=g.useCallback($=>{s($),h(1)},[]),H=$=>{h($+1)},D=g.useCallback(async()=>{try{const $={search:t,status:a==="all"?void 0:a};await L.mutateAsync({tableName:"asset_maintenance",filters:$})}catch($){console.error("Error exporting asset maintenances:",$)}},[L,t,a]),R=[{id:"asset_info",label:"Asset Info",sortable:!1,render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:W.asset_maintenance_master?.serial_number||"Asset",className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:W.asset_maintenance_master?.asset_master_asset_types?.name||"Unknown Asset"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:W.asset_maintenance_master?.serial_number||`Asset #${W.asset_id}`})]})]})},{id:"maintenance_details",label:"Maintenance Details",sortable:!1,render:($,W)=>e.jsxs(y,{className:"flex flex-col gap-1",children:[e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Xo,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:W.issue_reported||"No issue reported"})]}),e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(ks,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:W.action_taken||"No action taken"})]})]})},{id:"technician",label:"Technician",sortable:!1,render:($,W)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(ut,{alt:W.asset_maintenance_technician?.name,src:W.asset_maintenance_technician?.profile_image||"mkx",className:"!rounded !bg-primary-100 !text-primary-500"}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:W.asset_maintenance_technician?.name||"Unknown Technician"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:W.asset_maintenance_technician?.email||"Unknown Email"})]})]})},{id:"maintenance_date",label:"Date",sortable:!0,render:($,W)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:Ie(W.maintenance_date)})]})},{id:"cost",label:"Cost",sortable:!0,render:($,W)=>e.jsx(y,{className:"flex items-center gap-1",children:e.jsx("span",{className:"text-xs",children:W.cost?b(Number(W.cost)):e.jsx("span",{className:"italic",children:"No Cost"})})})},{id:"remarks",label:"Remarks",sortable:!0,render:($,W)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(ks,{className:"w-3 h-3 text-gray-400"}),e.jsx(qa,{title:W.remarks||"No remarks",placement:"top",arrow:!0,children:e.jsx("span",{className:"text-xs truncate max-w-32",children:W.remarks||"No remarks"})})]})},{id:"is_active",label:"Active Status",sortable:!0,render:($,W)=>e.jsx(Me,{icon:W.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:W.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:W.is_active==="Y"?"success":"error"})},...S||j||v?[{id:"action",label:"Actions",sortable:!1,render:($,W)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[S&&e.jsx(rs,{onClick:()=>q(W),tooltip:`Edit Maintenance #${W.id}`}),j&&e.jsx(Vt,{onClick:()=>V(W.id),tooltip:`Delete Maintenance #${W.id}`,itemName:`Maintenance #${W.id}`,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Asset Maintenance"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track and manage asset maintenance records"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Maintenance",value:z,icon:e.jsx(Xo,{className:"w-6 h-6"}),color:"blue",isLoading:C}),e.jsx(fe,{title:"Active Maintenance",value:I,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:C}),e.jsx(fe,{title:"Inactive Maintenance",value:Q,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:C}),e.jsx(fe,{title:"This Month",value:Y,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"purple",isLoading:C})]}),P&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load asset maintenance records. Please try again."}),e.jsx(ot,{data:E,columns:R,actions:v||w?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[v&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ts,{placeholder:"Search Maintenance Records...",value:t,onChange:G,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:$=>r($.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[v&&e.jsx(Xt,{title:"Export Asset Maintenance",description:"Are you sure you want to export the current asset maintenance data to Excel? This will include all filtered results.",onConfirm:D,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:L.isPending,children:L.isPending?"Exporting...":"Export"})}),w&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),w&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:B,children:"Create"})]})]}):!1,getRowId:$=>$.id,initialOrderBy:"maintenance_date",loading:C,totalCount:M,page:T,rowsPerPage:f,onPageChange:H,isPermission:v,emptyMessage:t?`No asset maintenance records found matching "${t}"`:"No asset maintenance records found in the system"}),e.jsx(iwe,{selectedMaintenance:n,setSelectedMaintenance:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(QNe,{drawerOpen:c,setDrawerOpen:m})]})},lwe=nt({file:hs().required("Please select a file to import")}),cwe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:lwe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("asset_master")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"asset_master",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Assets",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple assets. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},dwe=async t=>{try{return(await ie.get("/asset-types",{params:t})).data}catch(s){throw console.error("Error fetching asset types:",s),new Error(s.response?.data?.message||"Failed to fetch asset types")}},uwe=async t=>{try{return(await ie.post("/asset-types",t)).data}catch(s){throw console.error("Error creating asset type:",s),new Error(s.response?.data?.message||"Failed to create asset type")}},mwe=async(t,s)=>{try{return(await ie.put(`/asset-types/${t}`,s)).data}catch(a){throw console.error("Error updating asset type:",a),new Error(a.response?.data?.message||"Failed to update asset type")}},pwe=async t=>{try{return(await ie.delete(`/asset-types/${t}`)).data}catch(s){throw console.error("Error deleting asset type:",s),new Error(s.response?.data?.message||"Failed to delete asset type")}},ff={all:["asset-types"],lists:()=>[...ff.all,"list"],list:t=>[...ff.lists(),t],details:()=>[...ff.all,"detail"],detail:t=>[...ff.details(),t]},BS=(t,s)=>tt({queryKey:ff.list(t),queryFn:()=>dwe(t),staleTime:300*1e3,...s}),hwe=()=>De({mutationFn:uwe,invalidateQueries:["asset-types"],loadingMessage:"Creating asset type..."}),fwe=()=>De({mutationFn:({id:t,...s})=>mwe(t,s),invalidateQueries:["asset-types"],loadingMessage:"Updating asset type..."}),xwe=()=>De({mutationFn:pwe,invalidateQueries:["asset-types"],loadingMessage:"Deleting asset type..."}),gwe=nt({asset_type_id:Ge().required("Asset type is required").positive("Asset type must be selected"),serial_number:me().required("Serial number is required").min(1,"Serial number must be at least 1 character").max(100,"Serial number must not exceed 100 characters").matches(/^[A-Za-z0-9\-_]+$/,"Serial number can only contain letters, numbers, hyphens, and underscores"),purchase_date:Ca().nullable().transform((t,s)=>s===""||s===null?null:t).max(new Date,"Purchase date cannot be in the future"),warranty_expiry:Ca().nullable().transform((t,s)=>s===""||s===null?null:t).when("purchase_date",(t,s)=>t?s.min(t,"Warranty expiry must be after purchase date"):s),current_location:me().nullable().max(255,"Current location must not exceed 255 characters"),current_status:me().nullable().oneOf(["Available","In Use","Under Maintenance","Retired","Lost","Damaged",""],"Invalid status selected"),assigned_to:me().nullable().max(100,"Assigned to must not exceed 100 characters"),is_active:me().oneOf(["Y","N"],"Status must be Y or N").default("Y")}),ywe=({selectedAsset:t,setSelectedAsset:s,drawerOpen:a,setDrawerOpen:r})=>{const[n,i]=g.useState([]),[o,l]=g.useState([]),c=g.useRef(null),m=!!t,{data:u}=BS({page:1,limit:1e3,isActive:"Y"}),h=u?.data||[],{data:f}=Qr({page:1,limit:1e3,isActive:"Y"}),b=f?.data||[],w=twe(),S=swe(),j=()=>{s(null),r(!1),i([]),v.resetForm()},v=xt({initialValues:{asset_type_id:t?.asset_type_id||0,serial_number:t?.serial_number||"",purchase_date:t?.purchase_date?t.purchase_date.split("T")[0]:"",warranty_expiry:t?.warranty_expiry?t.warranty_expiry.split("T")[0]:"",warranty_period:"1",current_location:t?.current_location||"",current_status:t?.current_status||"Available",assigned_to:t?.assigned_to||"",is_active:t?.is_active||"Y"},validationSchema:gwe,enableReinitialize:!0,onSubmit:async T=>{try{const A={...T,asset_type_id:Number(T.asset_type_id),purchase_date:T.purchase_date,warranty_expiry:T.warranty_expiry,current_location:T.current_location,current_status:T.current_status,assigned_to:T.assigned_to};m&&t?await S.mutateAsync({id:t.id,data:A}):await w.mutateAsync({data:A,images:n.length>0?n:void 0}),j()}catch(A){console.error("Error submitting asset:",A)}}}),N=T=>{const A=T.target.files;if(A){const L=Array.from(A),F=L.filter(z=>{const I=z.type.startsWith("image/"),Q=z.size<=5*1024*1024;return I&&Q});F.length!==L.length&&alert("Some files were skipped. Only image files under 5MB are allowed."),i(z=>[...z,...F])}c.current&&(c.current.value="")},C=T=>{i(A=>A.filter((L,F)=>F!==T))},P=T=>{l(A=>A.filter((L,F)=>F!==T))},E=()=>{c.current?.click()};g.useEffect(()=>{a||(i([]),l([]))},[a]),g.useEffect(()=>{t&&t.asset_master_image?l(t.asset_master_image):l([])},[t]),g.useEffect(()=>{const T=v.values.purchase_date,A=v.values.warranty_period;if(T&&A){const L=new Date(T),F=parseInt(A);if(!isNaN(L.getTime())&&!isNaN(F)){const z=new Date(L);z.setFullYear(z.getFullYear()+F);const I=z.toISOString().split("T")[0];v.setFieldValue("warranty_expiry",I)}}},[v.values.purchase_date,v.values.warranty_period]);const M=[{value:"Available",label:"Available"},{value:"In Use",label:"In Use"},{value:"Under Maintenance",label:"Under Maintenance"},{value:"Retired",label:"Retired"},{value:"Lost",label:"Lost"},{value:"Damaged",label:"Damaged"}];return e.jsx(it,{open:a,setOpen:j,title:m?"Edit Asset":"Create Asset",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:v.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(_e,{name:"asset_type_id",label:"Asset Type",formik:v,required:!0,children:h.map(T=>e.jsx(Z,{value:T.id,children:T.name},T.id))}),e.jsx(oe,{name:"serial_number",label:"Serial Number",placeholder:"Enter serial number",formik:v,required:!0}),e.jsx(oe,{name:"purchase_date",label:"Purchase Date",type:"date",formik:v,slotProps:{inputLabel:{shrink:!0}}}),e.jsxs(_e,{name:"warranty_period",label:"Warranty Period",formik:v,children:[e.jsx(Z,{value:"1",children:"1 Year"}),e.jsx(Z,{value:"2",children:"2 Years"}),e.jsx(Z,{value:"3",children:"3 Years"}),e.jsx(Z,{value:"4",children:"4 Years"}),e.jsx(Z,{value:"5",children:"5 Years"})]}),e.jsx(oe,{name:"warranty_expiry",label:"Warranty Expiry",type:"date",formik:v,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(oe,{name:"current_location",label:"Current Location",placeholder:"Enter current location",formik:v}),e.jsx(_e,{name:"current_status",label:"Current Status",formik:v,children:M.map(T=>e.jsx(Z,{value:T.value,children:T.label},T.value))}),e.jsx(_e,{name:"assigned_to",label:"Assigned To",formik:v,children:b.map(T=>e.jsxs(Z,{value:T.name,children:[T.name," (",T.email,")"]},T.id))}),e.jsx(Ts,{name:"is_active",formik:v,required:!0})]}),e.jsx(y,{className:"!space-y-3",children:e.jsxs(y,{className:"!p-3 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-2",children:"Asset Images (Optional)"}),e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-4 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:E,children:[e.jsx(xs,{className:"!mx-auto !mb-2 !text-gray-400 !text-2xl"}),e.jsx(x,{variant:"body2",className:"!mb-1 !text-gray-700",children:m?"Add more images":"Upload images"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"JPG, PNG, GIF, WEBP (Max 10MB)"}),e.jsx("input",{ref:c,type:"file",accept:"image/*",multiple:!0,onChange:N,className:"!hidden"})]}),(o.length>0||n.length>0)&&e.jsxs(y,{className:"!mt-3 !space-y-2",children:[e.jsxs(x,{variant:"caption",className:"!text-gray-600 !font-medium",children:["Images (",o.length+n.length,")"]}),e.jsxs(y,{className:"!space-y-1",children:[o.map((T,A)=>e.jsxs(y,{className:"!flex !items-center !justify-between !p-2 !bg-blue-50 !rounded !border !border-blue-200",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !flex-1 !min-w-0",children:[e.jsx(g8,{className:"!text-blue-500 !w-4 !h-4"}),e.jsxs(x,{variant:"caption",className:"!truncate !text-blue-700",title:T.caption||`Image ${A+1}`,children:[T.caption||`Image ${A+1}`," (Current)"]})]}),e.jsx(ta,{size:"small",color:"error",onClick:()=>P(A),className:"!p-1",children:e.jsx(Nb,{fontSize:"inherit"})})]},`existing-${A}`)),n.map((T,A)=>e.jsxs(y,{className:"!flex !items-center !justify-between !p-2 !bg-green-50 !rounded !border !border-green-200",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !flex-1 !min-w-0",children:[e.jsx(g8,{className:"!text-green-500 !w-4 !h-4"}),e.jsxs(x,{variant:"caption",className:"!truncate !text-green-700",title:T.name,children:[T.name," (",(T.size/1024).toFixed(0),"KB)"]})]}),e.jsx(ta,{size:"small",color:"error",onClick:()=>C(A),className:"!p-1",children:e.jsx(Nb,{fontSize:"inherit"})})]},`new-${A}`))]})]})]})}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:j,className:"!mr-3",disabled:w.isPending||S.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:w.isPending||S.isPending,children:[w.isPending||S.isPending?m?"Updating...":"Creating...":m?"Update":"Create"," "]})]})]})})})},bwe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("asset-master"),{data:v,isLoading:N,error:C}=qS({search:t,page:u,limit:f,status:a==="all"?void 0:a},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=awe(),A=ls(),L=v?.stats?.total_assets??0,F=v?.stats?.active_assets??0,z=v?.stats?.inactive_assets??0,I=v?.stats?.assets_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(R=>{i(R),l(!0)},[]),B=g.useCallback(async R=>{try{await T.mutateAsync(R)}catch($){console.error("Error deleting asset:",$)}},[T]),q=g.useCallback(R=>{s(R),h(1)},[]),V=R=>{h(R+1)},G=g.useCallback(async()=>{try{const R={search:t,status:a==="all"?void 0:a};await A.mutateAsync({tableName:"asset_master",filters:R})}catch(R){console.error("Error exporting assets:",R)}},[A,t,a]),H=R=>({Available:"success","In Use":"primary","Under Maintenance":"warning",Retired:"secondary",Lost:"error",Damaged:"error"})[R]||"default",D=[{id:"asset_info",label:"Asset Info",render:(R,$)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:$.serial_number,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:$.asset_master_asset_types?.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:$.serial_number})]})]})},{id:"current_location",label:"Location",render:(R,$)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:$.current_location||"Not specified"})]})},{id:"current_status",label:"Status",render:(R,$)=>e.jsx(Me,{label:$.current_status||"Available",color:H($.current_status||"Available"),size:"small"})},{id:"assigned_to",label:"Assigned To",render:(R,$)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Tr,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:$.assigned_to||"Unassigned"})]})},{id:"warranty_expiry",label:"Warranty",render:(R,$)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:$.warranty_expiry?Ie($.warranty_expiry):"No warranty"})]})},{id:"is_active",label:"Active Status",render:(R,$)=>e.jsx(Me,{icon:$.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:$.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:$.is_active==="Y"?"success":"error"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(R,$)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y($),tooltip:`Edit ${$.serial_number}`}),S&&e.jsx(Vt,{onClick:()=>B($.id),tooltip:`Delete ${$.serial_number}`,itemName:$.serial_number,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Asset Master"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage and track all company assets and equipment"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Assets",value:L,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Assets",value:F,icon:e.jsx(bg,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Assets",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"This Month",value:I,icon:e.jsx(Xo,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load assets. Please try again."}),e.jsx(ot,{data:P,columns:D,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Assets...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:R=>r(R.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Assets",description:"Are you sure you want to export the current asset data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:R=>R.id,initialOrderBy:"serial_number",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No assets found matching "${t}"`:"No assets found in the system"}),e.jsx(ywe,{selectedAsset:n,setSelectedAsset:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(cwe,{drawerOpen:c,setDrawerOpen:m})]})},vwe=async t=>{try{return(await ie.get("/asset-movement",{params:t})).data}catch(s){throw console.error("Error fetching asset movements:",s),new Error(s.response?.data?.message||"Failed to fetch asset movements")}},jwe=async t=>{try{return(await ie.post("/asset-movement",t)).data.data}catch(s){throw console.error("Error creating asset movement:",s),new Error(s.response?.data?.message||"Failed to create asset movement")}},Nwe=async(t,s)=>{try{return(await ie.put(`/asset-movement/${t}`,s)).data.data}catch(a){throw console.error("Error updating asset movement:",a),new Error(a.response?.data?.message||"Failed to update asset movement")}},wwe=async t=>{try{await ie.delete(`/asset-movement/${t}`)}catch(s){throw console.error("Error deleting asset movement:",s),new Error(s.response?.data?.message||"Failed to delete asset movement")}},xf={all:["asset-movement"],lists:()=>[...xf.all,"list"],list:t=>[...xf.lists(),t],details:()=>[...xf.all,"detail"],detail:t=>[...xf.details(),t]},_we=(t,s)=>tt({queryKey:xf.list(t),queryFn:()=>vwe(t),staleTime:300*1e3,...s}),Swe=()=>De({mutationFn:jwe,invalidateQueries:["asset-movement"],loadingMessage:"Creating asset movement..."}),Cwe=()=>De({mutationFn:({id:t,data:s})=>Nwe(t,s),invalidateQueries:["asset-movement"],loadingMessage:"Updating asset movement..."}),Pwe=()=>De({mutationFn:wwe,invalidateQueries:["asset-movement"],loadingMessage:"Deleting asset movement..."}),kwe=nt({file:hs().required("Please select a file to import")}),Ewe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:kwe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("asset_movements")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"asset_movements",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Asset Movements",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple asset movements. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},Twe=nt({asset_id:Ge().positive("Asset ID must be a positive number").required("Asset ID is required"),from_location:me().max(255,"From location must be less than 255 characters").nullable(),to_location:me().max(255,"To location must be less than 255 characters").nullable(),movement_type:me().oneOf(["transfer","maintenance","repair","disposal","return","other"],"Movement type must be one of: transfer, maintenance, repair, disposal, return, other").nullable(),movement_date:Ca().required("Movement date is required").max(new Date,"Movement date cannot be in the future"),performed_by:Ge().positive("Performed by must be a positive number").required("Performed by is required"),notes:me().max(1e3,"Notes must be less than 1000 characters").nullable(),is_active:me().oneOf(["Y","N"],"Active status must be Y or N").required("Active status is required")}),Mwe=({selectedMovement:t,setSelectedMovement:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,{data:i}=qS({page:1,limit:1e3,status:"active"}),o=i?.data||[],{data:l}=Qr({page:1,limit:1e3,isActive:"Y"}),c=l?.data||[],m=Swe(),u=Cwe(),h=()=>{s(null),r(!1),f.resetForm()},f=xt({initialValues:{asset_id:t?.asset_id?.toString()||"",from_location:t?.from_location||"",to_location:t?.to_location||"",movement_type:t?.movement_type||"",movement_date:Or(t?.movement_date),performed_by:t?.performed_by?.toString()||"",notes:t?.notes||"",is_active:t?.is_active||"Y"},validationSchema:Twe,enableReinitialize:!0,onSubmit:async w=>{try{const S={asset_id:Number(w.asset_id),from_location:w.from_location,to_location:w.to_location,movement_type:w.movement_type,movement_date:w.movement_date,performed_by:Number(w.performed_by),notes:w.notes,is_active:w.is_active};n&&t?await u.mutateAsync({id:t.id,data:S}):await m.mutateAsync(S),h()}catch(S){console.error("Error submitting asset movement:",S)}}}),b=[{value:"transfer",label:"Transfer"},{value:"maintenance",label:"Maintenance"},{value:"repair",label:"Repair"},{value:"disposal",label:"Disposal"},{value:"return",label:"Return"},{value:"other",label:"Other"}];return e.jsx(it,{open:a,setOpen:h,title:n?"Edit Asset Movement":"Create Asset Movement",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsxs(_e,{name:"asset_id",label:"Asset",formik:f,required:!0,children:[e.jsx(Z,{value:"",children:"Select Asset"}),o.map(w=>e.jsxs(Z,{value:w.id?.toString()||"",children:[w.asset_master_asset_types?.name," (",w.serial_number,")"]},w.id))]}),e.jsxs(_e,{name:"movement_type",label:"Movement Type",formik:f,children:[e.jsx(Z,{value:"",children:"Select Movement Type"}),b.map(w=>e.jsx(Z,{value:w.value,children:w.label},w.value))]}),e.jsx(oe,{name:"from_location",label:"From Location",placeholder:"Enter source location",formik:f}),e.jsx(oe,{name:"to_location",label:"To Location",placeholder:"Enter destination location",formik:f}),e.jsx(oe,{name:"movement_date",label:"Movement Date",type:"date",formik:f,required:!0,slotProps:{inputLabel:{shrink:!0}}}),e.jsxs(_e,{name:"performed_by",label:"Performed By",formik:f,required:!0,children:[e.jsx(Z,{value:"",children:"Select User"}),c.map(w=>e.jsxs(Z,{value:w.id?.toString()||"",children:[w.name," (",w.email,")"]},w.id))]}),e.jsx(Ts,{name:"is_active",formik:f,required:!0,className:"col-span-2"})]}),e.jsx(oe,{name:"notes",label:"Notes",placeholder:"Enter additional notes about the movement",formik:f,multiline:!0,rows:3}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,className:"!mr-3",disabled:m.isPending||u.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:m.isPending||u.isPending,children:[m.isPending||u.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," "]})]})]})})})},Dwe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("asset-movement"),{data:v,isLoading:N,error:C}=_we({search:t,page:u,limit:f,status:a==="all"?void 0:a},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=Pwe(),A=ls(),L=v?.stats||{},F=L.total_records??0,z=L.active_records??0,I=L.inactive_records??0,Q=L.this_month_records??0,Y=g.useCallback(()=>{i(null),l(!0)},[]),B=g.useCallback($=>{i($),l(!0)},[]),q=g.useCallback(async $=>{try{await T.mutateAsync($)}catch(W){console.error("Error deleting asset movement:",W)}},[T]),V=g.useCallback($=>{s($),h(1)},[]),G=$=>{h($+1)},H=g.useCallback(async()=>{try{const $={search:t,status:a==="all"?void 0:a};await A.mutateAsync({tableName:"asset_movements",filters:$})}catch($){console.error("Error exporting asset movements:",$)}},[A,t,a]),D=$=>{const W=$.toLowerCase();return{transfer:"primary",maintenance:"warning",repair:"error",disposal:"secondary",return:"success",other:"default"}[W]||"default"},R=[{id:"asset_info",label:"Asset Info",render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:W.asset_movements_master?.serial_number||"Asset",className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:W.asset_movements_master?.asset_master_asset_types?.name||"Unknown Asset"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:W.asset_movements_master?.serial_number||`Asset #${W.asset_id}`})]})]})},{id:"movement_details",label:"Movement Details",render:($,W)=>e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:W.from_location||"Unknown"})]}),e.jsx(Qw,{className:"w-3 h-3 text-gray-400"}),e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:W.to_location||"Unknown"})]})]})},{id:"movement_type",label:"Type",render:($,W)=>e.jsx(Me,{label:W.movement_type||"Other",variant:"outlined",color:D(W.movement_type||"other"),size:"small",className:"!capitalize"})},{id:"performed_by",label:"Performed By",render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:W.asset_movements_performed_by?.name,src:W.asset_movements_performed_by?.profile_image||"mkx",className:"!rounded !bg-primary-100 !text-primary-500"}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:W.asset_movements_performed_by?.name||"Unknown User"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:W.asset_movements_performed_by?.email||"Unknown Email"})]})]})},{id:"movement_date",label:"Date",render:($,W)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:Ie(W.movement_date)})]})},{id:"notes",label:"Notes",render:($,W)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(ks,{className:"w-3 h-3 text-gray-400"}),e.jsx(qa,{title:W.notes||"No notes",placement:"top",arrow:!0,children:e.jsx("span",{className:"text-xs truncate max-w-32",children:W.notes||"No notes"})})]})},{id:"is_active",label:"Active Status",render:($,W)=>e.jsx(Me,{icon:W.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:W.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:W.is_active==="Y"?"success":"error"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:($,W)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>B(W),tooltip:`Edit Movement #${W.id}`}),S&&e.jsx(Vt,{onClick:()=>q(W.id),tooltip:`Delete Movement #${W.id}`,itemName:`Movement #${W.id}`,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Asset Movement"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track and manage asset movements across locations"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Movements",value:F,icon:e.jsx(Qw,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Movements",value:z,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Movements",value:I,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"This Month",value:Q,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load asset movements. Please try again."}),e.jsx(ot,{data:P,columns:R,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[j&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ts,{placeholder:"Search Movements...",value:t,onChange:V,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:$=>r($.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Asset Movements",description:"Are you sure you want to export the current asset movement data to Excel? This will include all filtered results.",onConfirm:H,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Y,children:"Create"})]})]}):!1,getRowId:$=>$.id,initialOrderBy:"movement_date",loading:N,totalCount:E,page:M,rowsPerPage:f,onPageChange:G,isPermission:j,emptyMessage:t?`No asset movements found matching "${t}"`:"No asset movements found in the system"}),e.jsx(Mwe,{selectedMovement:n,setSelectedMovement:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(Ewe,{drawerOpen:c,setDrawerOpen:m})]})},Rwe=nt({file:hs().required("Please select a file to import")}),Awe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:Rwe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("asset_types")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"asset_types",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Asset Types",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple asset types. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},Iwe=nt({name:me().required("Asset type name is required").min(2,"Name must be at least 2 characters").max(100,"Name must be less than 100 characters"),description:me().max(255,"Description must be less than 255 characters"),category:me().max(50,"Category must be less than 50 characters"),brand:me().max(100,"Brand must be less than 100 characters"),is_active:me().required("Status is required")}),Owe=({selectedAssetType:t,setSelectedAssetType:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=hwe(),l=fwe(),c=xt({initialValues:{name:t?.name||"",description:t?.description||"",category:t?.category||"",brand:t?.brand||"",is_active:t?.is_active||"Y"},validationSchema:Iwe,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,description:m.description,category:m.category,brand:m.brand,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving asset type:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Asset Type":"Create Asset Type",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"name",label:"Asset Type Name",placeholder:"Enter asset type name",formik:c,required:!0})}),e.jsx(oe,{name:"category",label:"Category",placeholder:"Enter category",formik:c}),e.jsx(oe,{name:"brand",label:"Brand",placeholder:"Enter brand",formik:c}),e.jsx(Ts,{name:"is_active",formik:c,required:!0}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter description",formik:c,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:[o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," "]})]})]})})})},Fwe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("asset-type"),{data:v,isFetching:N,error:C}=BS({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total_count||0,M=(v?.meta?.current_page||1)-1,T=xwe(),A=ls(),L=v?.stats?.total_asset_types??P.length,F=v?.stats?.active_asset_types??P.filter(D=>D.is_active==="Y").length,z=v?.stats?.inactive_asset_types??P.filter(D=>D.is_active==="N").length,I=v?.stats?.new_asset_types??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting asset type:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"asset_types",filters:D})}catch(D){console.error("Error exporting asset types:",D)}},[A,t,a]),H=[{id:"name",label:"Asset Type Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:R.name}),R.description&&e.jsx(qa,{title:R.description,placement:"top",arrow:!0,children:e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",maxWidth:"300px",cursor:"help"},children:R.description})})]})]})},{id:"category",label:"Category",render:(D,R)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.category||e.jsx("span",{className:"italic text-gray-400",children:"No Category"})})},{id:"brand",label:"Brand",render:(D,R)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.brand||e.jsx("span",{className:"italic text-gray-400",children:"No Brand"})})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Asset Types Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage asset types, categories, and brands for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Asset Types",value:L,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Types",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Types",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load asset types. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Asset Types...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>{r(D.target.value),h(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Asset Types",description:"Are you sure you want to export the current asset types data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No asset types found matching "${t}"`:"No asset types found in the system"}),e.jsx(Owe,{selectedAssetType:n,setSelectedAssetType:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(Awe,{drawerOpen:c,setDrawerOpen:m})]})},Eg={async getBatchLots(t){return(await ie.get("/batch-lots",{params:t})).data},async getBatchLotById(t){return(await ie.get(`/batch-lots/${t}`)).data},async fetchBatchLotById(t){return(await ie.get(`/batch-lots/${t}`)).data},async createBatchLot(t){return(await ie.post("/batch-lots",t)).data},async updateBatchLot(t){const{id:s,...a}=t;return(await ie.put(`/batch-lots/${s}`,a)).data},async deleteBatchLot(t){return(await ie.delete(`/batch-lots/${t}`)).data},async getBatchLotsDropdown(t){return(await ie.get("/batch-lots-dropdown",{params:t})).data}},o1="batchLots",Lwe=(t,s)=>tt({queryKey:[o1,t],queryFn:()=>Eg.getBatchLots(t),enabled:s?.enabled}),$we=()=>{const t=is();return yu({mutationFn:s=>Eg.createBatchLot(s),onSuccess:()=>{t.invalidateQueries({queryKey:[o1]}),It.success("Batch lot created successfully")},onError:s=>{It.error(s?.response?.data?.message||"Failed to create batch lot")}})},zwe=()=>{const t=is();return yu({mutationFn:s=>Eg.updateBatchLot(s),onSuccess:()=>{t.invalidateQueries({queryKey:[o1]}),It.success("Batch lot updated successfully")},onError:s=>{It.error(s?.response?.data?.message||"Failed to update batch lot")}})},qwe=()=>{const t=is();return yu({mutationFn:s=>Eg.deleteBatchLot(s),onSuccess:()=>{t.invalidateQueries({queryKey:[o1]}),It.success("Batch lot deleted successfully")},onError:s=>{It.error(s?.response?.data?.message||"Failed to delete batch lot")}})},Bwe=t=>tt({queryKey:["batchLot",t],queryFn:()=>Eg.fetchBatchLotById(t),enabled:!!t,staleTime:300*1e3}),Uwe=nt({file:hs().required("Please select a file to import")}),Vwe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:Uwe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("batch_lots")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"batch_lots",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Batch Lots",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple batch lots. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},Hwe=nt({batch_number:me().required("Batch number is required").max(50,"Batch number must not exceed 50 characters"),lot_number:me().max(50,"Lot number must not exceed 50 characters").nullable(),manufacturing_date:Ca().required("Manufacturing date is required").max(new Date,"Manufacturing date cannot be in the future"),expiry_date:Ca().required("Expiry date is required").min(x_("manufacturing_date"),"Expiry date must be after manufacturing date").min(new Date,"Expiry date must be a future date"),quantity:Ge().required("Quantity is required").positive("Quantity must be positive").integer("Quantity must be a whole number"),remaining_quantity:Ge().positive("Remaining quantity must be positive").integer("Remaining quantity must be a whole number").max(x_("quantity"),"Remaining quantity cannot exceed total quantity").nullable(),supplier_name:me().max(255,"Supplier name must not exceed 255 characters").nullable(),purchase_price:Ge().positive("Purchase price must be positive").nullable(),quality_grade:me().oneOf(["A","B","C","D","F"],"Quality grade must be A, B, C, D, or F").nullable(),storage_location:me().max(100,"Storage location must not exceed 100 characters").nullable(),is_active:me().oneOf(["Y","N"],"Status must be Y or N").required("Status is required")}),Wwe=({selectedBatchLot:t,setSelectedBatchLot:s,drawerOpen:a,setDrawerOpen:r})=>{const[n,i]=g.useState([]),o=g.useRef(!1),l=!!t,c=()=>{s(null),r(!1),i([]),o.current=!1,h.resetForm()},m=$we(),u=zwe();vt.useEffect(()=>{a||(o.current=!1)},[a]);const h=xt({initialValues:{batch_number:t?.batch_number||"",lot_number:t?.lot_number||"",manufacturing_date:t?.manufacturing_date?new Date(t.manufacturing_date).toISOString().split("T")[0]:"",expiry_date:t?.expiry_date?new Date(t.expiry_date).toISOString().split("T")[0]:"",quantity:t?.quantity||"",remaining_quantity:t?.remaining_quantity||"",supplier_name:t?.supplier_name||"",purchase_price:t?.purchase_price||"",quality_grade:t?.quality_grade||"A",storage_location:t?.storage_location||"",is_active:t?.is_active||"Y"},validationSchema:Hwe,enableReinitialize:!0,onSubmit:async f=>{try{const b={batch_number:f.batch_number,lot_number:f.lot_number,manufacturing_date:f.manufacturing_date,expiry_date:f.expiry_date,quantity:Number(f.quantity),remaining_quantity:f.remaining_quantity?Number(f.remaining_quantity):void 0,supplier_name:f.supplier_name,purchase_price:f.purchase_price?Number(f.purchase_price):void 0,quality_grade:f.quality_grade,storage_location:f.storage_location,is_active:f.is_active,products:n.filter(w=>w.product_id>0&&w.quantity>0).map(w=>({product_id:w.product_id,quantity:w.quantity}))};l&&t?await u.mutateAsync({id:t.id,...b}):await m.mutateAsync(b),c()}catch(b){console.error("Error saving batch lot:",b)}}});return e.jsx(it,{open:a,setOpen:c,title:l?"Edit Batch Lot":"Create Batch Lot",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:h.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"batch_number",label:"Batch Number",placeholder:"Enter batch number",formik:h,required:!0}),e.jsx(oe,{name:"lot_number",label:"Lot Number",placeholder:"Enter lot number (optional)",formik:h}),e.jsx(oe,{name:"manufacturing_date",label:"Manufacturing Date",type:"date",formik:h,required:!0}),e.jsx(oe,{name:"expiry_date",label:"Expiry Date",type:"date",formik:h,required:!0}),e.jsx(oe,{name:"quantity",label:"Total Quantity",placeholder:"Enter total quantity",formik:h,type:"number",required:!0}),e.jsx(oe,{name:"remaining_quantity",label:"Remaining Quantity",placeholder:"Enter remaining quantity",formik:h,type:"number"}),e.jsx(oe,{name:"purchase_price",label:"Purchase Price",placeholder:"Enter purchase price",formik:h,type:"number"}),e.jsx(oe,{name:"storage_location",label:"Storage Location",placeholder:"Enter storage location",formik:h}),e.jsx(oe,{name:"supplier_name",label:"Supplier Name",placeholder:"Enter supplier name",formik:h,className:"md:!col-span-2"}),e.jsx(Ts,{name:"is_active",label:"Status",formik:h})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3 !pt-4",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:c,disabled:m.isPending||u.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:m.isPending||u.isPending,children:m.isPending||u.isPending?l?"Updating...":"Creating...":l?"Update":"Create"})]})]})})})},Ywe=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState(null),[l,c]=g.useState(!1),[m,u]=g.useState(!1),[h,f]=g.useState(1),[b]=g.useState(10),{isCreate:w,isUpdate:S,isDelete:j,isRead:v}=Qe("batch-lots"),{data:N}=_u(),{data:C}=Zl({limit:1e3}),P=N?.data,E=C?.data||[],M=P?.currency_id||1,T=E.find(ne=>ne.id===M),{data:A,isFetching:L,error:F}=Lwe({search:s,page:h,limit:b,status:r==="all"?void 0:r},{enabled:v}),z=ne=>{if(ne==null)return"N/A";const xe=T?.code||"INR",le={USD:"en-US",EUR:"de-DE",GBP:"en-GB",JPY:"ja-JP",CNY:"zh-CN",AUD:"en-AU",CAD:"en-CA",INR:"en-IN",AED:"ar-AE",SAR:"ar-SA"}[xe]||"en-IN";return new Intl.NumberFormat(le,{style:"currency",currency:xe,minimumFractionDigits:2,maximumFractionDigits:2}).format(ne)},I=A?.data||[],Q=A?.meta?.total_count||0,Y=(A?.meta?.current_page||1)-1,B=qwe(),q=ls(),V=A?.stats?.total_batch_lots??I.length,G=A?.stats?.active_batch_lots??I.filter(ne=>ne.is_active==="Y").length,H=A?.stats?.expiring_batch_lots??0,D=A?.stats?.expired_batch_lots??0,R=g.useCallback(()=>{o(null),c(!0)},[]),$=g.useCallback(ne=>{t(`/masters/batch-lots/${ne}`)},[t]),W=g.useCallback(ne=>{o(ne),c(!0)},[]),J=g.useCallback(async ne=>{try{await B.mutateAsync(ne)}catch(xe){console.error("Error deleting batch lot:",xe)}},[B]),te=g.useCallback(ne=>{a(ne),f(1)},[]),ee=ne=>{f(ne+1)},ae=g.useCallback(async()=>{try{const ne={search:s,status:r==="all"?void 0:r};await q.mutateAsync({tableName:"batch_lots",filters:ne})}catch(ne){console.error("Error exporting batch lots:",ne)}},[q,s,r]),ce=ne=>{const xe=new Date,ge=new Date(ne),le=Math.ceil((ge.getTime()-xe.getTime())/(1e3*60*60*24));return le<0?{status:"expired",color:"error",label:"Expired",icon:e.jsx(Ct,{})}:le<=30?{status:"expiring",color:"warning",label:`${le}d left`,icon:e.jsx(vg,{})}:{status:"valid",color:"success",label:"Valid",icon:e.jsx(mt,{})}},he=[{id:"batch_number",label:"Batch Info",render:(ne,xe)=>e.jsxs(y,{className:"!flex !gap-2 !items-center !cursor-pointer hover:!opacity-80 !transition-opacity",onClick:()=>$(xe.id),children:[e.jsx(ut,{alt:xe.batch_number,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium hover:!text-primary-600 !transition-colors",children:xe.batch_number}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:xe.lot_number?`Lot: ${xe.lot_number}`:"No lot number"})]})]})},{id:"products",label:"Products",render:(ne,xe)=>e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center text-sm text-gray-900",children:[e.jsx(Wt,{className:"w-4 h-4 text-gray-400 mr-2"}),xe.products?.length||0," product(s)"]}),xe.products&&xe.products.length>0&&e.jsxs(y,{className:"flex items-center text-xs text-gray-500 mt-1",children:[e.jsx(Gy,{className:"w-4 h-4 text-gray-400 mr-2"}),xe.products[0]?.name||"Unknown",xe.products.length>1&&` +${xe.products.length-1} more`]})]})},{id:"dates",label:"Dates",render:(ne,xe)=>e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center text-sm text-gray-900",children:[e.jsx(na,{className:"w-4 h-4 text-gray-400 mr-2"}),Ie(xe.expiry_date?.toString())]}),e.jsxs(y,{className:"flex items-center text-xs text-gray-500 mt-1",children:[e.jsx(_s,{className:"w-4 h-4 text-gray-400 mr-2"}),"Mfg: ",Ie(xe.manufacturing_date?.toString())]})]})},{id:"quantity",label:"Quantity",render:(ne,xe)=>e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center text-sm text-gray-900",children:[e.jsx(Wt,{className:"w-4 h-4 text-gray-400 mr-2"}),Number(xe.quantity).toLocaleString()," total"]}),e.jsxs(y,{className:"flex items-center text-sm text-gray-500 mt-1",children:[e.jsx(Gy,{className:"w-4 h-4 text-gray-400 mr-2"}),Number(xe.remaining_quantity).toLocaleString()," remaining"]})]})},{id:"supplier",label:"Supplier",render:(ne,xe)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:xe.supplier_name||e.jsx("span",{className:"!text-gray-500 italic",children:"no supplier"})})},{id:"storage",label:"Storage",render:(ne,xe)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:xe.storage_location||e.jsx("span",{className:"!text-gray-500 italic",children:"no location"})})},{id:"purchase_price",label:"Purchase Price",render:(ne,xe)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:z(xe.purchase_price)})},{id:"expiry_status",label:"Expiry Status",render:(ne,xe)=>{const ge=ce(xe.expiry_date||"");return e.jsx(Me,{icon:ge.icon,label:ge.label,size:"small",variant:"outlined",color:ge.color})}},{id:"is_active",label:"Status",render:ne=>e.jsx(Me,{icon:ne==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:ne==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:ne==="Y"?"success":"error"})},{id:"createdate",label:"Created",render:(ne,xe)=>e.jsx(x,{variant:"body2",className:"!text-gray-500",children:Ie(xe.createdate?.toString())})},...S||j||v?[{id:"action",label:"Actions",sortable:!1,render:(ne,xe)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[v&&e.jsx(Wa,{onClick:()=>$(xe.id),tooltip:`View ${xe.batch_number}`,icon:e.jsx(Sn,{fontSize:"small"}),color:"info"}),S&&e.jsx(rs,{onClick:()=>W(xe),tooltip:`Edit ${xe.batch_number}`}),j&&e.jsx(Vt,{onClick:()=>J(xe.id),tooltip:`Delete ${xe.batch_number}`,itemName:xe.batch_number,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Batch & Lot Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track batch numbers, lot numbers, expiry dates, and inventory levels"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Batch Lots",value:V,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:L}),e.jsx(fe,{title:"Active Batches",value:G,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:L}),e.jsx(fe,{title:"Expiring Soon",value:H,icon:e.jsx(na,{className:"w-6 h-6"}),color:"orange",isLoading:L}),e.jsx(fe,{title:"Expired",value:D,icon:e.jsx(Gy,{className:"w-6 h-6"}),color:"red",isLoading:L})]}),F&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load batch lots. Please try again."}),e.jsx(ot,{data:I,columns:he,actions:v||w?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:v&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Batch Lots...",value:s,onChange:te,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:r,onChange:ne=>{n(ne.target.value),f(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[v&&e.jsx(Xt,{title:"Export Batch Lots",description:"Are you sure you want to export the current batch lots data to Excel? This will include all filtered results.",onConfirm:ae,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:q.isPending,children:q.isPending?"Exporting...":"Export"})}),w&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>u(!0),children:"Import"}),w&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:R,children:"Create"})]})]}):!1,getRowId:ne=>ne.id,initialOrderBy:"expiry_date",loading:L,totalCount:Q,page:Y,rowsPerPage:b,isPermission:v,onPageChange:ee,emptyMessage:s?`No batch lots found matching "${s}"`:"No batch lots found in the system"}),e.jsx(Wwe,{selectedBatchLot:i,setSelectedBatchLot:o,drawerOpen:l,setDrawerOpen:c}),e.jsx(Vwe,{drawerOpen:m,setDrawerOpen:u})]})},Gwe=()=>{const{id:t}=Kr(),{data:s,isLoading:a,error:r}=Bwe(Number(t)),n=s?.data,i=n?.products||[],o=u=>u==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(u),l=u=>{const h=new Date,f=new Date(u),b=Math.ceil((f.getTime()-h.getTime())/(1e3*60*60*24));return b<0?{status:"expired",color:"error",label:"Expired",icon:e.jsx(Ct,{})}:b<=30?{status:"expiring",color:"warning",label:`${b} days left`,icon:e.jsx(vg,{})}:{status:"valid",color:"success",label:"Valid",icon:e.jsx(mt,{})}};if(a)return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !items-center !gap-3",children:e.jsxs(y,{className:"!flex-1",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(X,{variant:"text",width:250,height:32}),e.jsx(X,{variant:"rectangular",width:80,height:24,className:"!rounded-full"})]}),e.jsx(X,{variant:"text",width:300,height:20,className:"!mt-1"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[1,2,3,4].map(u=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:[e.jsx(X,{variant:"text",width:100,height:20}),e.jsx(X,{variant:"text",width:150,height:32,className:"!mt-2"})]},u))}),e.jsx(X,{variant:"rectangular",height:400,className:"!rounded-lg !shadow !border !border-gray-200"})]});if(r)return e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load batch lot details. Please try again."});if(!n)return e.jsx(lt,{severity:"warning",className:"!mb-4",children:"Batch lot not found."});const c=l(n.expiry_date),m=[{id:"name",label:"Product Info",render:(u,h)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:h.name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!font-medium",children:h.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:h.code})]})]})},{id:"category",label:"Category",render:(u,h)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:h.category?.name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(_r,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!font-medium",children:h.category?.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:h.sub_category?.name})]})]})},{id:"volume",label:"Volume",render:u=>e.jsx(x,{variant:"body2",className:"!font-medium",children:u?.name})},{id:"brand",label:"Brand",render:u=>e.jsx(x,{variant:"body2",className:"!font-medium",children:u?.name})},{id:"quantity",label:"Quantity",render:u=>e.jsx(x,{variant:"body2",className:"!font-medium",children:Number(u).toLocaleString()})},{id:"base_price",label:"Base Price",render:u=>e.jsx(x,{variant:"body2",className:"!font-medium",children:o(Number(u))})}];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !items-center !gap-3",children:e.jsxs(y,{className:"!flex-1",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(x,{variant:"h5",className:"!font-bold !text-gray-900",children:n.batch_number}),e.jsx(Me,{icon:n.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:n.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:n.is_active==="Y"?"success":"error"}),e.jsx(Me,{icon:c.icon,label:c.label,size:"small",color:c.color,variant:"outlined",className:"!pl-1"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-500 !mt-1",children:n.lot_number&&`Lot Number: ${n.lot_number}`})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-2",children:"Total Quantity"}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:n.quantity.toLocaleString()})]}),e.jsx(ut,{className:"!bg-blue-100",children:e.jsx(J9,{className:"text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-2",children:"Remaining"}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:n.remaining_quantity.toLocaleString()})]}),e.jsx(ut,{className:"!bg-green-100",children:e.jsx(Gy,{className:"text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-2",children:"Products"}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:i.length})]}),e.jsx(ut,{className:"!bg-purple-100",children:e.jsx(Wt,{className:"text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-2",children:"Expiry Status"}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:c.label})]}),e.jsx(ut,{className:`!bg-${c.color==="error"?"red":c.color==="warning"?"orange":"green"}-100`,children:e.jsx(na,{className:`text-${c.color==="error"?"red":c.color==="warning"?"orange":"green"}-600`})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6 mb-6",children:[e.jsx(x,{variant:"h6",className:"!font-bold !mb-4 !text-gray-900",children:"Batch Lot Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(_s,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Manufacturing Date"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:Ie(n.manufacturing_date?.toString())})]}),e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(_s,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Expiry Date"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:Ie(n.expiry_date?.toString())})]}),n.supplier_name&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(Un,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Supplier"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:n.supplier_name})]}),n.purchase_price&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(wr,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Purchase Price"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:o(Number(n.purchase_price))})]}),n.storage_location&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ks,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Storage Location"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:n.storage_location})]}),e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(Tr,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Created Date"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:Ie(n.createdate?.toString())})]})]})]}),e.jsx(ot,{data:i,columns:m,getRowId:u=>u.id,initialOrderBy:"name",emptyMessage:"No products found for this batch lot",pagination:!1})]})},Kwe=async t=>{try{return(await ie.get("/brands",{params:t})).data}catch(s){throw console.error("Error fetching brands:",s),new Error(s.response?.data?.message||"Failed to fetch brands")}},Qwe=async t=>{try{return(await ie.post("/brands",t)).data.data}catch(s){throw console.error("Error creating brand:",s),new Error(s.response?.data?.message||"Failed to create brand")}},Zwe=async(t,s)=>{try{return(await ie.put(`/brands/${t}`,s)).data.data}catch(a){throw console.error("Error updating brand:",a),new Error(a.response?.data?.message||"Failed to update brand")}},Xwe=async t=>{try{await ie.delete(`/brands/${t}`)}catch(s){throw console.error("Error deleting brand:",s),new Error(s.response?.data?.message||"Failed to delete brand")}},gf={all:["brands"],lists:()=>[...gf.all,"list"],list:t=>[...gf.lists(),t],details:()=>[...gf.all,"detail"],detail:t=>[...gf.details(),t]},_F=(t,s)=>tt({queryKey:gf.list(t),queryFn:()=>Kwe(t),staleTime:300*1e3,...s}),Jwe=()=>De({mutationFn:Qwe,invalidateQueries:["brands"],loadingMessage:"Creating brand..."}),e_e=()=>De({mutationFn:({id:t,data:s})=>Zwe(t,s),invalidateQueries:["brands"],loadingMessage:"Updating brand..."}),t_e=()=>De({mutationFn:Xwe,invalidateQueries:["brands"],loadingMessage:"Deleting brand..."}),s_e=nt({file:hs().required("Please select a file to import")}),a_e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:s_e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("brands")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"brands",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Brands",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple brands. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},r_e=nt({name:me().required("Brand name is required").min(2,"Brand name must be at least 2 characters").max(100,"Brand name must not exceed 100 characters").trim(),description:me().max(500,"Description must not exceed 500 characters").nullable().transform(t=>t===""?null:t),is_active:me().required("Status is required").oneOf(["Y","N"],"Status must be either Active or Inactive")}),n_e=({selectedBrand:t,setSelectedBrand:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=Jwe(),l=e_e(),c=xt({initialValues:{name:t?.name||"",description:t?.description||"",is_active:t?.is_active||"Y"},validationSchema:r_e,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,description:m.description,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,data:u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving brand:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Brand":"Create Brand",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"name",label:"Brand Name",placeholder:"Enter brand name",formik:c,required:!0})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter description",formik:c,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:[o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," "]})]})]})})})},i_e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("brand"),{data:v,isFetching:N,error:C}=_F({search:t,page:u,limit:f,status:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=t_e(),A=ls(),L=v?.stats?.total_brands??0,F=v?.stats?.active_brands??0,z=v?.stats?.inactive_brands??0,I=v?.stats?.new_brands_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting brand:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,status:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"brands",filters:D})}catch(D){console.error("Error exporting brands:",D)}},[A,t,a]),H=[{id:"name",label:"Brand Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.name,className:"!rounded !bg-primary-100 !text-primary-500",src:R.logo||void 0,children:e.jsx(_r,{className:"w-5 h-5"})}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:R.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:["Code: ",R.code]})]})]})},{id:"description",label:"Description",render:(D,R)=>R.description?e.jsx(qa,{title:R.description,placement:"top",arrow:!0,children:e.jsx(x,{variant:"body2",className:"!text-gray-900 !max-w-xs !truncate",children:R.description})}):e.jsx("span",{className:"italic text-gray-400",children:"No Description"})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Brands Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage brands for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Brands",value:L,icon:e.jsx(_r,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Brands",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Brands",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load brands. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Brands...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>r(D.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Brands",description:"Are you sure you want to export the current brands data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No brands found matching "${t}"`:"No brands found in the system"}),e.jsx(n_e,{selectedBrand:n,setSelectedBrand:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(a_e,{drawerOpen:c,setDrawerOpen:m})]})},o_e=async t=>(await ie.get("/company",{params:t})).data,l_e=async t=>(await ie.post("/company",t,{headers:t instanceof FormData?{"Content-Type":"multipart/form-data"}:void 0})).data,c_e=async(t,s)=>(await ie.put(`/company/${t}`,s,{headers:s instanceof FormData?{"Content-Type":"multipart/form-data"}:void 0})).data,d_e=async t=>(await ie.delete(`/company/${t}`)).data,yf={all:["companies"],lists:()=>[...yf.all,"list"],list:t=>[...yf.lists(),t],details:()=>[...yf.all,"detail"],detail:t=>[...yf.details(),t]},SF=(t,s)=>tt({queryKey:yf.list(t),queryFn:()=>o_e(t),staleTime:300*1e3,...s}),u_e=t=>De({mutationFn:s=>l_e(s),loadingMessage:"Creating company...",invalidateQueries:["companies"],onSuccess:t?.onSuccess,onError:t?.onError}),m_e=t=>De({mutationFn:({id:s,companyData:a})=>c_e(s,a),loadingMessage:"Updating company...",invalidateQueries:["companies"],onSuccess:t?.onSuccess,onError:t?.onError}),p_e=t=>De({mutationFn:s=>d_e(s),loadingMessage:"Deleting company...",invalidateQueries:["companies"],onSuccess:t?.onSuccess,onError:t?.onError}),h_e=nt({name:me().required("Company name is required").min(2,"Company name must be at least 2 characters").max(100,"Company name must not exceed 100 characters"),address:me().max(500,"Address must not exceed 500 characters"),city:me().max(100,"City must not exceed 100 characters"),state:me().max(100,"State must not exceed 100 characters"),country:me().max(100,"Country must not exceed 100 characters"),zipcode:me().matches(/^[0-9]{5,10}$/,"Invalid zip code format").max(10,"Zip code must not exceed 10 characters"),phone_number:me().matches(/^[0-9+\-\s()]+$/,"Invalid phone number format"),email:me().email("Invalid email format"),website:me().url("Invalid website URL"),is_active:me().required("Status is required")}),f_e=({selectedCompany:t,setSelectedCompany:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,[i,o]=g.useState(null),l=u_e({onSuccess:()=>{m()}}),c=m_e({onSuccess:()=>{m()}}),m=()=>{s(null),r(!1),o(null),u.resetForm()},u=xt({initialValues:{name:t?.name||"",address:t?.address||"",city:t?.city||"",state:t?.state||"",country:t?.country||"",zipcode:t?.zipcode||"",phone_number:t?.phone_number||"",email:t?.email||"",website:t?.website||"",is_active:t?.is_active||"Y"},validationSchema:h_e,enableReinitialize:!0,onSubmit:async b=>{try{const w=new FormData;w.append("name",b.name),w.append("address",b.address||""),w.append("city",b.city||""),w.append("state",b.state||""),w.append("country",b.country||""),w.append("zipcode",b.zipcode||""),w.append("phone_number",b.phone_number||""),w.append("email",b.email||""),w.append("website",b.website||""),w.append("is_active",b.is_active),i&&w.append("logo",i),n&&t?await c.mutateAsync({id:t.id,companyData:w}):await l.mutateAsync(w)}catch(w){console.error("Error saving company:",w)}}}),h=b=>{const w=b.target.files?.[0];w&&o(w)},f=()=>{o(null);const b=document.getElementById("logo-upload");b&&(b.value="")};return e.jsx(it,{open:a,setOpen:m,title:n?"Edit Company":"Create Company",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:u.handleSubmit,className:"!space-y-6",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center mb-4 cursor-pointer hover:border-blue-500 transition-colors",children:[e.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:h,className:"hidden"}),e.jsx("label",{htmlFor:"logo-upload",className:"cursor-pointer",children:i?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:URL.createObjectURL(i),alt:"Logo preview",className:"h-24 w-24 object-cover rounded"})}),e.jsx("p",{className:"text-sm text-gray-600",children:i.name}),e.jsx("button",{type:"button",onClick:b=>{b.preventDefault(),b.stopPropagation(),f()},className:"text-red-600 text-sm hover:underline",children:"Remove"})]}):t?.logo?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:t.logo,alt:"Current logo",className:"h-24 w-24 object-cover rounded"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Current Logo"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Click to change"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("svg",{className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload company logo"}),e.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG, GIF up to 10MB"})]})})]}),e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Company Name",placeholder:"Enter company name",formik:u,required:!0,className:"md:!col-span-2"}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"address",label:"Address",placeholder:"Enter company address",formik:u,multiline:!0,rows:3})}),e.jsx(oe,{name:"city",label:"City",placeholder:"Enter city",formik:u}),e.jsx(oe,{name:"state",label:"State",placeholder:"Enter state",formik:u}),e.jsx(oe,{name:"country",label:"Country",placeholder:"Enter country",formik:u}),e.jsx(oe,{name:"zipcode",label:"Zip Code",placeholder:"Enter zip code",formik:u}),e.jsx(oe,{name:"phone_number",label:"Phone Number",placeholder:"Enter phone number",formik:u,type:"tel"}),e.jsx(oe,{name:"email",label:"Email",placeholder:"Enter email address",formik:u,type:"email"}),e.jsx(oe,{name:"website",label:"Website",placeholder:"Enter website URL",formik:u,type:"url"}),e.jsxs(_e,{name:"is_active",label:"Status",formik:u,required:!0,children:[e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:m,className:"!capitalize",children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",className:"!capitalize",disableElevation:!0,disabled:u.isSubmitting||l.isPending||c.isPending,children:u.isSubmitting||l.isPending||c.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},x_e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(1),[u]=g.useState(10),{isCreate:h,isUpdate:f,isDelete:b,isRead:w}=Qe("company"),{data:S,isFetching:j}=SF({page:c,limit:u,search:t,is_active:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:w}),v=p_e(),C=(S?.data||[]).filter(F=>{const z=t===""||F.name.toLowerCase().includes(t.toLowerCase())||F.code.toLowerCase().includes(t.toLowerCase())||F.email?.toLowerCase().includes(t.toLowerCase())||F.city?.toLowerCase().includes(t.toLowerCase()),I=a==="all"||a==="active"&&F.is_active==="Y"||a==="inactive"&&F.is_active==="N";return z&&I}),P=g.useCallback(()=>{i(null),l(!0)},[]),E=g.useCallback(F=>{i(F),l(!0)},[]),M=g.useCallback(F=>{v.mutate(F)},[v]),T=g.useCallback(F=>{s(F),m(1)},[]),A=F=>m(F+1),L=[{id:"name",label:"Company & Logo",render:(F,z)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:z.name,src:z.logo,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(_n,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:z.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:z.code})]})]})},{id:"email",label:"Contact",render:(F,z)=>e.jsxs(y,{className:"space-y-1",children:[z.email?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nx,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:z.email})]}):e.jsx("span",{className:"italic text-gray-400",children:"No Email"}),z.phone_number&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rv,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:z.phone_number})]})]})},{id:"location",label:"Location",render:(F,z)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:[z.city,z.state,z.country].filter(Boolean).join(", ")||"No Location"})]})},{id:"website",label:"Website",render:(F,z)=>z.website?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(c8,{className:"w-3 h-3 text-gray-400"}),e.jsx("a",{href:z.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs",children:"Visit Site"})]}):e.jsx("span",{className:"italic text-gray-400",children:"No Website"})},{id:"is_active",label:"Status",render:F=>e.jsx(Me,{icon:F==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:F==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:F==="Y"?"success":"error"})},{id:"created_at",label:"Created Date",render:(F,z)=>Ie(z.created_at)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...f||b?[{id:"action",label:"Actions",sortable:!1,render:(F,z)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[f&&e.jsx(rs,{onClick:()=>E(z),tooltip:`Edit ${z.name}`}),b&&e.jsx(Vt,{onClick:()=>M(z.id),tooltip:`Delete ${z.name}`,itemName:z.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Companies Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage your company database and organizational structure"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Companies",value:S?.stats?.total_companies||0,icon:e.jsx(_n,{className:"w-6 h-6"}),color:"blue",isLoading:j}),e.jsx(fe,{title:"Active Companies",value:S?.stats?.active_companies||0,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:j}),e.jsx(fe,{title:"Inactive Companies",value:S?.stats?.inactive_companies||0,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:j}),e.jsx(fe,{title:"New This Month",value:S?.stats?.new_companies||0,icon:e.jsx(c8,{className:"w-6 h-6"}),color:"purple",isLoading:j})]}),e.jsx(ot,{data:C,columns:L,actions:w||h?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex items-center flex-wrap gap-2",children:w&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Companies",value:t,onChange:T,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:F=>r(F.target.value),className:"!min-w-32",size:"small",children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),h&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:P,children:"Create"})]}):!1,getRowId:F=>F.id,initialOrderBy:"name",loading:j,totalCount:S?.meta?.total||0,page:c-1,rowsPerPage:u,isPermission:w,onPageChange:A,emptyMessage:t?`No companies found matching "${t}"`:"No companies found in the system"}),e.jsx(f_e,{selectedCompany:n,setSelectedCompany:i,drawerOpen:o,setDrawerOpen:l})]})},g_e=async t=>{try{return(await ie.get("/competitor-activity",{params:t})).data}catch(s){throw console.error("Error fetching competitor activities:",s),new Error(s.response?.data?.message||"Failed to fetch competitor activities")}},y_e=async t=>{try{const s=t instanceof FormData?{headers:{"Content-Type":"multipart/form-data"}}:{headers:{"Content-Type":"application/json"}};return(await ie.post("/competitor-activity",t,s)).data.data}catch(s){throw console.error("Error creating competitor activity:",s),new Error(s.response?.data?.message||"Failed to create competitor activity")}},b_e=async(t,s)=>{try{const a=s instanceof FormData?{headers:{"Content-Type":"multipart/form-data"}}:{headers:{"Content-Type":"application/json"}};return(await ie.put(`/competitor-activity/${t}`,s,a)).data.data}catch(a){throw console.error("Error updating competitor activity:",a),new Error(a.response?.data?.message||"Failed to update competitor activity")}},v_e=async t=>{try{await ie.delete(`/competitor-activity/${t}`)}catch(s){throw console.error("Error deleting competitor activity:",s),new Error(s.response?.data?.message||"Failed to delete competitor activity")}},bf={all:["competitor-activity"],lists:()=>[...bf.all,"list"],list:t=>[...bf.lists(),t],details:()=>[...bf.all,"detail"],detail:t=>[...bf.details(),t]},j_e=(t,s)=>tt({queryKey:bf.list(t),queryFn:()=>g_e(t),staleTime:300*1e3,...s}),N_e=t=>De({mutationFn:y_e,invalidateQueries:["competitor-activity"],loadingMessage:"Creating competitor activity...",...t}),w_e=t=>De({mutationFn:({id:s,data:a})=>b_e(s,a),invalidateQueries:["competitor-activity"],loadingMessage:"Updating competitor activity...",...t}),__e=()=>De({mutationFn:v_e,invalidateQueries:["competitor-activity"],loadingMessage:"Deleting competitor activity..."}),S_e=nt({file:hs().required("Please select a file to import")}),C_e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:S_e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("competitor_activity")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"competitor_activity",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Competitor Activities",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple competitor activities. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},P_e=async t=>{try{return(await ie.get("/reports/visits",{params:t})).data}catch(s){throw s}},k_e=async t=>{try{return(await ie.get(`/reports/visits/${t}`)).data}catch(s){throw s}},E_e=async t=>(await ie.post("/visits",t)).data,T_e=async(t,s)=>(await ie.put(`/reports/visits/${t}`,s)).data,M_e=async t=>(await ie.delete(`/reports/visits/${t}`)).data,qo={all:["visits"],lists:()=>[...qo.all,"list"],list:t=>[...qo.lists(),t],details:()=>[...qo.all,"detail"],detail:t=>[...qo.details(),t]},US=(t,s)=>tt({queryKey:qo.list(t||{}),queryFn:()=>P_e(t),staleTime:300*1e3,enabled:s?.enabled??!0}),D_e=t=>tt({queryKey:qo.detail(t),queryFn:()=>k_e(t),enabled:!!t,staleTime:300*1e3}),R_e=t=>{const s=is();return De({mutationFn:E_e,loadingMessage:"Creating visit...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:qo.lists()})},onError:t?.onError})},A_e=t=>{const s=is();return De({mutationFn:({id:a,...r})=>T_e(a,r),loadingMessage:"Updating visit...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:qo.lists()}),s.invalidateQueries({queryKey:qo.detail(r.id)})},onError:t?.onError})},I_e=t=>{const s=is();return De({mutationFn:M_e,loadingMessage:"Deleting visit...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:qo.lists()})},onError:t?.onError})},O_e=nt({customer_id:Ge().required("Customer is required"),visit_id:Ge().positive("Visit ID must be a positive number").nullable(),brand_name:me().required("Brand name is required").max(255,"Brand name must be less than 255 characters"),product_name:me().max(255,"Product name must be less than 255 characters").nullable(),observed_price:Ge().min(0,"Observed price must be a positive number").nullable(),promotion_details:me().max(1e3,"Promotion details must be less than 1000 characters").nullable(),visibility_score:Ge().min(0,"Visibility score must be at least 0").max(100,"Visibility score must be at most 100").nullable(),remarks:me().max(1e3,"Remarks must be less than 1000 characters").nullable(),is_active:me().oneOf(["Y","N"],"Active status must be Y or N").required("Active status is required")}),F_e=async t=>{try{return(await ie.get("/customers",{params:t})).data}catch(s){throw s}},L_e=async t=>{try{return(await ie.get(`/customers/${t}`)).data}catch(s){throw s}},$_e=async t=>(await ie.post("/customers",t)).data,z_e=async(t,s)=>(await ie.put(`/customers/${t}`,s)).data,q_e=async t=>(await ie.delete(`/customers/${t}`)).data,B_e=async t=>{try{return(await ie.get("/customers-dropdown",{params:t})).data}catch(s){throw s}},U_e=async t=>{try{return(await ie.get(`/customers/${t}/relations`)).data}catch(s){throw s}},ho={all:["customers"],lists:()=>[...ho.all,"list"],list:t=>[...ho.lists(),t],details:()=>[...ho.all,"detail"],detail:t=>[...ho.details(),t]},Ep=(t,s)=>tt({queryKey:ho.list(t||{}),queryFn:()=>F_e(t),staleTime:300*1e3,...s}),V_e=t=>tt({queryKey:ho.detail(t),queryFn:()=>L_e(t),enabled:!!t,staleTime:300*1e3}),H_e=t=>tt({queryKey:[...ho.detail(t),"relations"],queryFn:()=>U_e(t),enabled:!!t,staleTime:300*1e3}),W_e=(t,s)=>tt({queryKey:["customers","dropdown",t],queryFn:()=>B_e(t),staleTime:300*1e3,...s}),Y_e=t=>{const s=is();return De({mutationFn:$_e,loadingMessage:"Creating customer...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:ho.lists()})},onError:t?.onError})},G_e=t=>{const s=is();return De({mutationFn:({id:a,...r})=>z_e(a,r),loadingMessage:"Updating customer...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:ho.lists()}),s.invalidateQueries({queryKey:ho.detail(r.id)})},onError:t?.onError})},K_e=t=>{const s=is();return De({mutationFn:q_e,loadingMessage:"Deleting customer...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:ho.lists()})},onError:t?.onError})},so=({name:t,label:s,required:a=!1,fullWidth:r=!0,formik:n,setValue:i,value:o,nameToSearch:l="",onChange:c})=>{const[m,u]=g.useState(""),[h,f]=g.useState(""),[b,w]=g.useState(""),[S,j]=g.useState(!1),[v,N]=g.useState(null),[C,P]=g.useState(!1),E=g.useRef(!1),M=n?n.values[t]:o,T=M?typeof M=="number"?M.toString():String(M).trim():"";g.useEffect(()=>{const H=setTimeout(()=>{S||(w(h),h&&P(!0))},300);return()=>clearTimeout(H)},[h,S]);const A=vt.useMemo(()=>C||m?b:T&&l&&!C?l:b,[b,l,C,T,m]),L=T?Number(T):void 0,{data:F,isLoading:z}=W_e({search:A,customer_id:L&&!A?L:void 0}),I=(F?.data||[]).map(H=>({id:H.id,name:H.name,code:H.code}));g.useEffect(()=>{if(!E.current&&T&&!v&&!z&&I.length>0){const H=I.find(D=>D.id.toString()===T);H&&(E.current=!0,N(H),m||u(H.name),P(!0),setTimeout(()=>{E.current=!1},100))}},[T,z,I.length]);const Q=vt.useMemo(()=>{if(!T)return null;const H=I.find(D=>D.id.toString()===T);return H||(v&&v.id.toString()===T?v:null)},[T,I,v]);g.useEffect(()=>{!T&&(v||m)&&(u(""),N(null),P(!1))},[T]);const Y=vt.useMemo(()=>{const H=[];Q&&(I.some($=>$.id===Q.id)||H.push(Q));const D=new Set;return Q&&D.add(Q.id),I.forEach(R=>{D.has(R.id)||(H.push(R),D.add(R.id))}),H},[I,Q]),B=n?.touched?.[t]&&n?.errors?.[t],q=typeof B=="string"?B:void 0,V=g.useCallback((H,D)=>{j(!0),N(D);const R=D?D.id.toString():"";n?n.setFieldValue(t,R):i&&i(R),c&&c(H,D),D?u(D.name):(u(""),w("")),setTimeout(()=>j(!1),100)},[n,t,i,c]),G=g.useCallback((H,D,R)=>{if(R==="input"){S?u(D):(u(D),f(D));return}R==="clear"&&(u(""),f(""),w(""))},[S]);return e.jsx(Ir,{options:Y,getOptionLabel:H=>H.name,value:Q,loading:z,onChange:V,inputValue:m,onInputChange:G,isOptionEqualToValue:(H,D)=>H.id===D.id,size:"small",fullWidth:r,filterOptions:H=>H,renderOption:(H,D)=>g.createElement(y,{component:"li",...H,key:D.id,className:"!flex !items-center !gap-2 cursor-pointer py-1 px-2 hover:!bg-gray-50"},e.jsx(ut,{src:D.name||"mkx",alt:D.name,className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{children:[e.jsx("p",{className:"!text-gray-900 !text-sm",children:D.name||""}),D.code&&e.jsx("p",{className:"!text-gray-500 !text-xs",children:D.code})]})),renderInput:H=>e.jsx(mr,{...H,label:`${s+(a?" *":"")}`,required:!1,error:!!B,require:!0,helperText:q,onBlur:n?.handleBlur,name:t,size:"small"}),noOptionsText:b&&!z?"No customers found":"Type to search customers",loadingText:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ki,{thickness:6,size:16,color:"inherit"})," Loading customers..."]})})},Q_e=({selectedActivity:t,setSelectedActivity:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,{data:i}=US({page:1,limit:1e3,status:"completed"}),o=i?.data||[],l=N_e(),c=w_e(),m=()=>{s(null),r(!1),u.resetForm()},u=xt({initialValues:{customer_id:t?.customer_id?.toString()||"",visit_id:t?.visit_id?.toString()||"",brand_name:t?.brand_name||"",product_name:t?.product_name||"",observed_price:t?.observed_price?.toString()||"",promotion_details:t?.promotion_details||"",visibility_score:t?.visibility_score?.toString()||"",image_url:t?.image_url||"",remarks:t?.remarks||"",is_active:t?.is_active||"Y"},validationSchema:O_e,enableReinitialize:!0,onSubmit:async h=>{try{const f=new FormData;if(f.append("customer_id",h.customer_id.toString()),h.visit_id&&h.visit_id!==""&&f.append("visit_id",h.visit_id),f.append("brand_name",h.brand_name),f.append("product_name",h.product_name),h.observed_price&&h.observed_price!==""&&Number(h.observed_price)>0&&f.append("observed_price",h.observed_price.toString()),f.append("promotion_details",h.promotion_details),h.visibility_score&&h.visibility_score!==""){const b=Number(h.visibility_score);b>=0&&b<=100&&f.append("visibility_score",h.visibility_score.toString())}if(f.append("remarks",h.remarks),f.append("is_active",h.is_active),h.image_url&&h.image_url.startsWith("data:image/")){const b=h.image_url.split(",")[1],w=atob(b),S=new Array(w.length);for(let C=0;C<w.length;C++)S[C]=w.charCodeAt(C);const j=new Uint8Array(S),v=new Blob([j],{type:"image/jpeg"}),N=new File([v],"competition-image.jpg",{type:"image/jpeg"});f.append("image",N)}n&&t?await c.mutateAsync({id:t.id,data:f}):await l.mutateAsync(f),m()}catch(f){console.error("Error submitting competitor activity:",f)}}});return e.jsx(it,{open:a,setOpen:m,title:n?"Edit Competitor Activity":"Create Competitor Activity",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:u.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(so,{name:"customer_id",label:"Customer",formik:u,required:!0}),e.jsx(_e,{name:"visit_id",label:"Visit (Optional)",formik:u,children:o.map(h=>e.jsx(Z,{value:h.id?.toString()||"",children:`Visit #${h.id} - ${h.purpose||"General"}`},h.id))}),e.jsxs(y,{className:"md:!col-span-2",children:[e.jsx(x,{component:"label",className:"!text-gray-700 !text-sm !font-medium !mb-2 !block",children:"Competition Image"}),e.jsxs(y,{className:"!border-2 flex items-center justify-center !border-dashed !border-gray-300 !rounded !p-3 !text-center !cursor-pointer hover:!border-blue-400 !transition-colors",component:"label",sx:{"&:hover":{backgroundColor:"rgba(59, 130, 246, 0.05)"}},children:[e.jsx("input",{type:"file",name:"image_url",accept:"image/*",hidden:!0,onChange:h=>{const f=h.target.files?.[0];if(f){const b=new FileReader;b.onloadend=()=>{u.setFieldValue("image_url",b.result)},b.readAsDataURL(f)}else u.setFieldValue("image_url","");u.handleChange(h)}}),u.values.image_url?e.jsxs(y,{className:"!relative",children:[e.jsx("img",{src:u.values.image_url,alt:"Competition image",className:"!max-h-20 !max-w-xs !rounded !mx-auto !border !border-gray-200"}),e.jsx(ta,{size:"small",className:"!absolute !h-6 !w-6 !top-1 !right-1  !text-red-600",onClick:h=>{h.preventDefault(),u.setFieldValue("image_url","")},sx:{position:"absolute"},children:e.jsx(Vr,{})})]}):e.jsxs(y,{className:"!py-4",children:[e.jsx(y,{className:"!text-2xl !text-gray-400 !mb-1",children:""}),e.jsx(x,{className:"!text-gray-600 !text-xs !mb-1",children:"Click to upload image"}),e.jsx(x,{className:"!text-gray-400 !text-xs",children:"PNG, JPG, GIF up to 10MB"})]})]}),u.touched.image_url&&u.errors.image_url&&e.jsx(x,{className:"!text-red-500 !text-xs !mt-1",children:u.errors.image_url})]}),e.jsx(oe,{name:"brand_name",label:"Brand Name",placeholder:"Enter competitor brand name",formik:u,required:!0}),e.jsx(oe,{name:"product_name",label:"Product Name",placeholder:"Enter product name (optional)",formik:u}),e.jsx(oe,{name:"observed_price",label:"Observed Price",type:"number",placeholder:"Enter observed price",formik:u}),e.jsx(oe,{name:"visibility_score",label:"Visibility Score",type:"number",placeholder:"Enter visibility score (0-100)",formik:u}),e.jsx(Ts,{name:"is_active",label:"Status",formik:u})]}),e.jsx(oe,{name:"promotion_details",label:"Promotion Details",placeholder:"Enter promotion details",formik:u,multiline:!0,rows:3}),e.jsx(oe,{name:"remarks",label:"Remarks",placeholder:"Enter additional remarks",formik:u,multiline:!0,rows:3}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:m,className:"!mr-3",disabled:l.isPending||c.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:l.isPending||c.isPending,children:[l.isPending||c.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," "]})]})]})})})},Z_e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{formatCurrency:b}=Ya(),{isCreate:w,isUpdate:S,isDelete:j,isRead:v}=Qe("competitor"),{data:N,isLoading:C,error:P}=j_e({search:t,page:u,limit:f,status:a==="all"?void 0:a},{enabled:v}),E=N?.data||[],M=N?.meta?.total||0,T=(N?.meta?.page||1)-1,A=__e(),L=ls(),F=N?.stats?.total_records??0,z=N?.stats?.active_records??0,I=N?.stats?.inactive_records??0,Q=N?.stats?.records_this_month??0,Y=g.useCallback(()=>{i(null),l(!0)},[]),B=g.useCallback($=>{i($),l(!0)},[]),q=g.useCallback(async $=>{try{await A.mutateAsync($)}catch(W){console.error("Error deleting competitor activity:",W)}},[A]),V=g.useCallback($=>{s($),h(1)},[]),G=$=>{h($+1)},H=g.useCallback(async()=>{try{const $={search:t,status:a==="all"?void 0:a};await L.mutateAsync({tableName:"competitor_activity",filters:$})}catch($){console.error("Error exporting competitor activities:",$)}},[L,t,a]),D=$=>$==null?"default":$>=80?"success":$>=60?"primary":$>=40?"warning":"error",R=[{id:"customer_info",label:"Customer Info",render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:W.competitor_activity_customers?.name||"Customer",className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(_n,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:W.competitor_activity_customers?.name||"Unknown Customer"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:W.competitor_activity_customers?.code||`Customer #${W.customer_id}`})]})]})},{id:"brand_product",label:"Brand & Product",render:($,W)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:W.brand_name}),W.product_name&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:W.product_name})]})},{id:"price",label:"Price",render:($,W)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(wr,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs font-medium",children:W.observed_price?`${b(Number(W.observed_price))}`:"N/A"})]})},{id:"visibility_score",label:"Visibility",render:($,W)=>e.jsx(y,{className:"flex items-center gap-1",children:e.jsx(Me,{variant:"outlined",label:W.visibility_score?`${W.visibility_score}%`:"N/A",color:D(W.visibility_score??null),size:"small"})})},{id:"promotion",label:"Promotion",render:($,W)=>e.jsx(qa,{title:W.promotion_details||"No promotion details",placement:"top",arrow:!0,children:e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(sl,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs truncate max-w-24",children:W.promotion_details||"None"})]})})},{id:"visit_info",label:"Visit Info",render:($,W)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:W.visits?Ie(W.visits.visit_date):"No visit"})]})},{id:"image",label:"Image",render:($,W)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(eoe,{className:"w-3 h-3 text-gray-400"}),W.image_url?e.jsx("button",{onClick:()=>window.open(W.image_url,"_blank"),className:"text-xs text-blue-600 hover:text-blue-800 hover:underline cursor-pointer",title:"Click to view image",children:"Available"}):e.jsx("span",{className:"text-xs italic text-gray-500",children:"No Image"})]})},{id:"is_active",label:"Active Status",render:($,W)=>e.jsx(Me,{icon:W.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:W.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:W.is_active==="Y"?"success":"error"})},...S||j||v?[{id:"action",label:"Actions",sortable:!1,render:($,W)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[S&&e.jsx(rs,{onClick:()=>B(W),tooltip:`Edit Activity #${W.id}`}),j&&e.jsx(Vt,{onClick:()=>q(W.id),tooltip:`Delete Activity #${W.id}`,itemName:`Activity #${W.id}`,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Competitor Activities"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track competitor activities, pricing, and market intelligence"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Activities",value:F,icon:e.jsx(sl,{className:"w-6 h-6"}),color:"blue",isLoading:C}),e.jsx(fe,{title:"Active Activities",value:z,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:C}),e.jsx(fe,{title:"Inactive Activities",value:I,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:C}),e.jsx(fe,{title:"This Month",value:Q,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"purple",isLoading:C})]}),P&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load competitor activities. Please try again."}),e.jsx(ot,{data:E,columns:R,actions:e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ts,{placeholder:"Search Activities...",value:t,onChange:V,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:$=>r($.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{title:"Export Competitor Activities",description:"Are you sure you want to export the current competitor activity data to Excel? This will include all filtered results.",onConfirm:H,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:L.isPending,children:L.isPending?"Exporting...":"Export"})}),w&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),w&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Y,children:"Create"})]})]}),getRowId:$=>$.id,initialOrderBy:"createdate",loading:C,totalCount:M,page:T,rowsPerPage:f,onPageChange:G,isPermission:v,emptyMessage:t?`No competitor activities found matching "${t}"`:"No competitor activities found in the system"}),e.jsx(Q_e,{selectedActivity:n,setSelectedActivity:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(C_e,{drawerOpen:c,setDrawerOpen:m})]})},X_e=async t=>{try{return(await ie.get("/customer-category",{params:t})).data}catch(s){throw console.error("Error fetching customer categories:",s),new Error(s.response?.data?.message||"Failed to fetch customer categories")}},J_e=async t=>{try{return(await ie.get(`/customer-category/${t}`)).data.data}catch(s){throw console.error("Error fetching customer category:",s),new Error(s.response?.data?.message||"Failed to fetch customer category")}},e4e=async t=>{try{const s=await ie.post("/customer-category/bulk",t);if(s.data?.results?.created?.[0])return s.data.results.created[0];if(s.data?.results?.updated?.[0])return s.data.results.updated[0];if(s.data?.data)return s.data.data;if(s.data)return s.data;throw new Error("Invalid response structure from API")}catch(s){throw console.error("Error creating customer category:",s),new Error(s.response?.data?.message)}},t4e=async(t,s)=>{try{const a=await ie.post("/customer-category/bulk",{id:t,...s});if(a.data?.results?.updated?.[0])return a.data.results.updated[0];if(a.data?.results?.created?.[0])return a.data.results.created[0];if(a.data?.data)return a.data.data;if(a.data)return a.data;throw new Error("Invalid response structure from API")}catch(a){throw console.error("Error updating customer category:",a),new Error(a.response?.data?.message||"Failed to update customer category")}},s4e=async t=>{try{await ie.delete(`/customer-category/${t}`)}catch(s){throw console.error("Error deleting customer category:",s),new Error(s.response?.data?.message||"Failed to delete customer category")}},Em={all:["customer-category"],lists:()=>[...Em.all,"list"],list:t=>[...Em.lists(),t],details:()=>[...Em.all,"detail"],detail:t=>[...Em.details(),t]},CF=(t,s)=>tt({queryKey:Em.list(t),queryFn:()=>X_e(t),staleTime:300*1e3,...s}),a4e=(t,s)=>tt({queryKey:Em.detail(t),queryFn:()=>J_e(t),enabled:!!t,staleTime:300*1e3,...s}),r4e=()=>De({mutationFn:e4e,invalidateQueries:["customer-category"],loadingMessage:"Creating customer category..."}),n4e=()=>De({mutationFn:({id:t,data:s})=>t4e(t,s),invalidateQueries:["customer-category"],loadingMessage:"Updating customer category..."}),i4e=()=>De({mutationFn:s4e,invalidateQueries:["customer-category"],loadingMessage:"Deleting customer category..."}),o4e=async t=>{try{return(await ie.get("/product-categories",{params:t})).data}catch(s){throw console.error("Error fetching product categories:",s),new Error(s.response?.data?.message||"Failed to fetch product categories")}},l4e=async t=>{try{return(await ie.post("/product-categories",t)).data.data}catch(s){throw console.error("Error creating product category:",s),new Error(s.response?.data?.message||"Failed to create product category")}},c4e=async(t,s)=>{try{return(await ie.put(`/product-categories/${t}`,s)).data.data}catch(a){throw console.error("Error updating product category:",a),new Error(a.response?.data?.message||"Failed to update product category")}},d4e=async t=>{try{await ie.delete(`/product-categories/${t}`)}catch(s){throw console.error("Error deleting product category:",s),new Error(s.response?.data?.message||"Failed to delete product category")}},u4e=async t=>{try{return(await ie.get("/product-categories-dropdown",{params:t})).data}catch(s){throw console.error("Error fetching product categories dropdown:",s),new Error(s.response?.data?.message||"Failed to fetch product categories dropdown")}},vf={all:["product-categories"],lists:()=>[...vf.all,"list"],list:t=>[...vf.lists(),t],details:()=>[...vf.all,"detail"],detail:t=>[...vf.details(),t]},Tp=(t,s)=>tt({queryKey:vf.list(t),queryFn:()=>o4e(t),staleTime:300*1e3,...s}),m4e=()=>De({mutationFn:l4e,invalidateQueries:["product-categories"],loadingMessage:"Creating product category..."}),p4e=()=>De({mutationFn:({id:t,data:s})=>c4e(t,s),invalidateQueries:["product-categories"],loadingMessage:"Updating product category..."}),h4e=()=>De({mutationFn:d4e,invalidateQueries:["product-categories"],loadingMessage:"Deleting product category..."}),f4e=(t,s)=>tt({queryKey:["product-categories","dropdown",t],queryFn:()=>u4e(t),staleTime:300*1e3,...s}),fu=({name:t="category_id",label:s="Product Category",required:a=!1,fullWidth:r=!0,size:n="small",formik:i,setValue:o,value:l,nameToSearch:c="",onChange:m,className:u,disabled:h=!1})=>{const[f,b]=g.useState(""),[w,S]=g.useState(""),[j,v]=g.useState(!1),[N,C]=g.useState(null),[P,E]=g.useState(!1),M=i?i.values[t]:l,T=M?typeof M=="number"?M.toString():String(M).trim():"";g.useEffect(()=>{const H=setTimeout(()=>{j||(S(f),f&&E(!0))},300);return()=>clearTimeout(H)},[f,j]);const A=vt.useMemo(()=>P||f?w:T&&c&&!P?c:w,[w,c,P,T,f]),L=T?Number(T):void 0,{data:F,isLoading:z}=f4e({search:A,category_id:L&&!A?L:void 0}),I=(F?.data||[]).map(H=>({id:H.id,category_name:H.category_name}));g.useEffect(()=>{if(T&&!N&&!z&&I.length>0){const H=I.find(D=>D.id.toString()===T);H&&(C(H),f||b(H.category_name),E(!0))}},[T,N,f,I,z]);const Q=vt.useMemo(()=>{if(!T)return null;const H=I.find(D=>D.id.toString()===T);return H||(N&&N.id.toString()===T?N:null)},[T,I,N]);g.useEffect(()=>{Q&&Q!==N?(C(Q),!f&&Q.category_name&&b(Q.category_name)):!T&&N?(C(null),b("")):N&&!f&&T&&b(N.category_name)},[Q,T,N,f]),g.useEffect(()=>{T?N&&N.id.toString()!==T&&(C(null),b(""),E(!1)):(N||f)&&(b(""),C(null),E(!1))},[T]);const Y=vt.useMemo(()=>{const H=[];Q&&(I.some($=>$.id===Q.id)||H.push(Q));const D=new Set;return Q&&D.add(Q.id),I.forEach(R=>{D.has(R.id)||(H.push(R),D.add(R.id))}),H},[I,Q,T]),B=i?.touched?.[t]&&i?.errors?.[t],q=typeof B=="string"?B:void 0,V=g.useCallback((H,D)=>{v(!0),C(D);const R=D?D.id.toString():"";i?i.setFieldValue(t,R):o&&o(R),m&&m(H,D),D||(b(""),S("")),setTimeout(()=>v(!1),100)},[i,t,o,m]),G=g.useCallback((H,D,R)=>{if(R==="reset"||R==="clear"){v(!0),b(""),S(""),setTimeout(()=>v(!1),100);return}b(D)},[]);return e.jsx(Ir,{options:Y,getOptionLabel:H=>H.category_name,value:Q,loading:z,onChange:V,inputValue:f,onInputChange:G,isOptionEqualToValue:(H,D)=>H.id===D.id,size:n,fullWidth:r,className:u,disabled:h,filterOptions:H=>H,renderOption:(H,D)=>g.createElement(y,{component:"li",...H,key:D.id,className:"!flex !items-center !gap-2 cursor-pointer py-1 px-2 hover:!bg-gray-50"},e.jsx(ut,{src:D.category_name||"mkx",alt:D.category_name,className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsx(y,{children:e.jsx("p",{className:"!text-gray-900 !text-sm",children:D.category_name||""})})),renderInput:H=>e.jsx(mr,{...H,label:s,required:a,error:!!B,helperText:q,onBlur:i?.handleBlur,name:t,size:n,className:u,disabled:h}),noOptionsText:w&&!z?"No categories found":"Type to search categories",loadingText:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ki,{thickness:6,size:16,color:"inherit"})," Loading categories..."]})})},x4e=nt({category_name:me().required("Category name is required").min(2,"Category name must be at least 2 characters").max(255,"Category name must be less than 255 characters"),category_code:me().required("Category code is required").min(2,"Category code must be at least 2 characters").max(50,"Category code must be less than 50 characters"),level:me().required("Category level is required").min(1,"Category level must be at least 1 character").max(10,"Category level must be less than 10 characters"),is_active:me().oneOf(["Y","N"]).required("Status is required")}),g4e=["Monthly Sales Amount ()","Quarterly Sales Amount ()","Monthly Sales Quantity (Crates)","Monthly Sales Quantity (Cases)","Monthly Sales Quantity (Units)","Quarterly Sales Quantity (Crates)","Order Frequency per Month","Order Frequency per Quarter","Payment Terms (Days)","Credit Limit ()","Purchase History (Months Active)","Average Order Value ()","Last Order Days Ago"],y4e=[{value:">=",label:"Greater than or equal (>=)"},{value:"<=",label:"Less than or equal (<=)"},{value:">",label:"Greater than (>)"},{value:"<",label:"Less than (<)"},{value:"=",label:"Equal (=)"},{value:"!=",label:"Not equal (!=)"}],b4e=t=>{switch(t){case"Monthly Sales Amount ()":case"Quarterly Sales Amount ()":case"Average Order Value ()":case"Credit Limit ()":return"e.g., 50000";case"Monthly Sales Quantity (Crates)":case"Monthly Sales Quantity (Cases)":case"Monthly Sales Quantity (Units)":case"Quarterly Sales Quantity (Crates)":return"e.g., 1";case"Order Frequency per Month":case"Order Frequency per Quarter":case"Purchase History (Months Active)":return"e.g., 4";case"Payment Terms (Days)":case"Last Order Days Ago":return"e.g., 30";default:return"Enter threshold value"}},v4e=t=>{switch(t){case"Monthly Sales Amount ()":return"Enter amount in rupees (e.g., 50000 for 50,000)";case"Quarterly Sales Amount ()":return"Enter amount in rupees for 3 months (e.g., 150000 for 1.5L)";case"Monthly Sales Quantity (Crates)":return"Enter number of crates per month (e.g., 1 for 1 crate/month)";case"Monthly Sales Quantity (Cases)":return"Enter number of cases per month (e.g., 24 for 24 cases/month)";case"Monthly Sales Quantity (Units)":return"Enter number of individual units per month";case"Quarterly Sales Quantity (Crates)":return"Enter number of crates for 3 months";case"Order Frequency per Month":return"Enter number of orders per month (e.g., 4 for weekly orders)";case"Order Frequency per Quarter":return"Enter number of orders for 3 months";case"Payment Terms (Days)":return"Enter credit period in days (e.g., 30 for 30-day credit)";case"Credit Limit ()":return"Enter credit limit in rupees";case"Purchase History (Months Active)":return"Enter months since first purchase";case"Average Order Value ()":return"Enter average order value in rupees";case"Last Order Days Ago":return"Enter days since last order (e.g., 7 for last week)";default:return""}},j4e=({selectedCustomerCategory:t,setSelectedCustomerCategory:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,[i,o]=g.useState([]),[l,c]=g.useState(null),[m,u]=g.useState({_index:0,condition_type:"",condition_operator:">=",threshold_value:"",product_category_id:"",condition_description:"",is_active:"Y"}),{data:h}=Tp({limit:1e3}),f=h?.data||[],{data:b,isLoading:w}=a4e(t?.id||0,{enabled:n&&!!t?.id});g.useEffect(()=>{if(b&&n){const A=b.conditions?.map((L,F)=>({_index:F,id:L.id,condition_type:L.condition_type||"",condition_operator:L.condition_operator||">=",threshold_value:L.threshold_value?.toString()||"",product_category_id:L.product_category_id?.toString()||"",condition_description:L.condition_description||"",is_active:L.is_active||"Y"}))||[];o(A)}else o([]);c(null),u({_index:0,condition_type:"",condition_operator:">=",threshold_value:"",product_category_id:"",condition_description:"",is_active:"Y"})},[b,n]);const S=()=>{s(null),r(!1),o([]),c(null),u({_index:0,condition_type:"",condition_operator:">=",threshold_value:"",product_category_id:"",condition_description:"",is_active:"Y"}),M.resetForm()},j=r4e(),v=n4e(),N=()=>{if(!m.condition_type.trim()){It.error("Condition type is required");return}if(!m.threshold_value.trim()){It.error(`Threshold value is required for ${m.condition_type}`);return}const A=parseFloat(m.threshold_value);if(isNaN(A)||A<0){It.error("Please enter a valid positive number for threshold value");return}if(m.condition_type.includes("Days")&&A>365){It.error("Days cannot exceed 365 for this condition type");return}if(m.condition_type.includes("Months")&&A>12){It.error("Months cannot exceed 12 for this condition type");return}if(i.some(z=>z.condition_type===m.condition_type&&z.condition_operator===m.condition_operator)){It.error("A condition with this type and operator already exists");return}const F={_index:i.length,condition_type:m.condition_type,condition_operator:m.condition_operator,threshold_value:m.threshold_value,product_category_id:m.product_category_id,condition_description:m.condition_description,is_active:m.is_active};o([...i,F]),u({_index:i.length+1,condition_type:"",condition_operator:">=",threshold_value:"",product_category_id:"",condition_description:"",is_active:"Y"}),c(null),It.success("Condition added successfully")},C=A=>{const L=i.filter((F,z)=>z!==A).map((F,z)=>({...F,_index:z}));o(L),c(null)},P=A=>{if(i.some((z,I)=>I!==A&&z.condition_type===m.condition_type&&z.condition_operator===m.condition_operator)){It.error("A condition with this type and operator already exists");return}const F=[...i];F[A]={...m,_index:A,id:i[A].id},o(F),u({_index:i.length,condition_type:"",condition_operator:">=",threshold_value:"",product_category_id:"",condition_description:"",is_active:"Y"}),c(null)},E=A=>{c(A._index),u({_index:A._index,id:A.id,condition_type:A.condition_type,condition_operator:A.condition_operator,threshold_value:A.threshold_value,product_category_id:A.product_category_id,condition_description:A.condition_description,is_active:A.is_active})},M=xt({initialValues:{category_name:t?.category_name||"",category_code:t?.category_code||"",level:t?.level||0,is_active:t?.is_active||"Y"},validationSchema:x4e,enableReinitialize:!0,onSubmit:async A=>{try{const L={category_name:A.category_name,category_code:A.category_code,level:Number(A.level),is_active:A.is_active,conditions:i.map(F=>({...F.id&&{id:F.id},condition_type:F.condition_type,condition_operator:F.condition_operator,threshold_value:Number(F.threshold_value),product_category_id:F.product_category_id?Number(F.product_category_id):null,condition_description:F.condition_description||null,is_active:F.is_active}))};n&&t?await v.mutateAsync({id:t.id,data:L}):await j.mutateAsync(L),S()}catch(L){console.error("Error saving customer category:",L)}}}),T=[{id:"condition_type",label:"Condition Type",render:(A,L)=>e.jsx(x,{variant:"body2",className:l===L._index?"!font-bold !text-primary-600":"",onClick:()=>E(L),style:{cursor:"pointer"},children:L.condition_type||"-"})},{id:"condition_operator",label:"Operator",render:(A,L)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:L.condition_operator||"-"})},{id:"threshold_value",label:"Threshold Value",render:(A,L)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:L.threshold_value||"-"})},{id:"product_category",label:"Product Category",render:(A,L)=>{const F=f.find(z=>z.id===Number(L.product_category_id));return e.jsx(x,{variant:"body2",className:"!text-gray-700",children:F?.category_name||"-"})}},{id:"actions",label:"Actions",sortable:!1,render:(A,L)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(rs,{onClick:()=>E(L),tooltip:"Edit condition",size:"small"}),e.jsx(Vt,{onClick:()=>C(L._index),tooltip:"Remove condition",confirmDelete:!0,size:"small",itemName:"condition"})]})}];return e.jsx(it,{open:a,setOpen:S,title:n?"Edit Customer Category":"Create Customer Category",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:M.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 lg:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"category_name",label:"Category Name",placeholder:"Enter category name",formik:M,required:!0}),e.jsx(oe,{name:"category_code",label:"Category Code",placeholder:"Enter category code",formik:M,required:!0}),e.jsx(oe,{type:"number",name:"level",label:"Category Level",placeholder:"Enter category level",formik:M,required:!0}),e.jsx(Ts,{name:"is_active",formik:M,className:"col-span-2"})]}),e.jsxs(y,{className:"!space-y-4 !mt-6",children:[e.jsxs(y,{className:"!flex !justify-between !items-center",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"Category Conditions"}),e.jsx(K,{type:"button",variant:"outlined",startIcon:e.jsx(os,{}),onClick:N,size:"small",children:"Add Condition"})]}),e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4 !bg-gray-50 !rounded-lg",children:[e.jsx(_e,{value:m.condition_type,onChange:A=>u({...m,condition_type:A.target.value}),label:"Condition Type",size:"small",fullWidth:!0,children:g4e.map(A=>e.jsx(Z,{value:A,children:A},A))}),e.jsx(_e,{value:m.condition_operator,onChange:A=>u({...m,condition_operator:A.target.value}),label:"Operator",size:"small",fullWidth:!0,children:y4e.map(A=>e.jsx(Z,{value:A.value,children:A.label},A.value))}),e.jsx(oe,{value:m.threshold_value,onChange:A=>u({...m,threshold_value:A.target.value}),label:"Threshold Value",placeholder:b4e(m.condition_type),helperText:v4e(m.condition_type),type:"number",size:"small",fullWidth:!0}),e.jsx(fu,{value:m.product_category_id,onChange:(A,L)=>u({...m,product_category_id:L?L.id.toString():""}),label:"Product Category (Optional)",size:"small",fullWidth:!0}),e.jsxs(y,{className:"!bg-blue-50 col-span-2 !border !border-blue-200 !rounded-lg !p-4",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-semibold !text-blue-900 !mb-2",children:[e.jsx(ple,{fontSize:"small"})," How Conditions Work:"]}),e.jsxs(x,{variant:"body2",className:"!text-blue-800 !mb-2",children:[e.jsx("strong",{children:"Example 1:"}),' "Monthly Sales Quantity (Crates)  1"  Customers who buy at least 1 crate per month']}),e.jsxs(x,{variant:"body2",className:"!text-blue-800 !mb-2",children:[e.jsx("strong",{children:"Example 2:"}),' "Monthly Sales Amount ()  50000"  Customers with monthly sales of 50,000 or more']}),e.jsxs(x,{variant:"body2",className:"!text-blue-800",children:[e.jsx("strong",{children:"Note:"})," All conditions are evaluated based on customer's purchase history and behavior patterns."]})]}),e.jsx(y,{className:"md:!col-span-2 !flex !items-center !gap-4",children:l!==null&&e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>P(l),children:"Update"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{c(null),u({_index:i.length,condition_type:"",condition_operator:">=",threshold_value:"",product_category_id:"",condition_description:"",is_active:"Y"})},children:"Cancel"})]})})]}),w&&n?e.jsx(y,{className:"!mt-4",children:e.jsx(y,{className:"!bg-white !rounded-lg !border !border-gray-200 !p-4",children:e.jsx(y,{className:"!space-y-3",children:[1,2,3].map(A=>e.jsxs(y,{className:"!flex !items-center !gap-4 !pb-3 !border-b !border-gray-100 last:!border-0",children:[e.jsx(X,{variant:"text",width:"20%",height:24,className:"!flex-1"}),e.jsx(X,{variant:"text",width:"15%",height:24,className:"!flex-1"}),e.jsx(X,{variant:"text",width:"15%",height:24,className:"!flex-1"}),e.jsx(X,{variant:"text",width:"20%",height:24,className:"!flex-1"}),e.jsx(X,{variant:"circular",width:32,height:32,className:"!flex-shrink-0"})]},A))})})}):i.length>0&&e.jsx(y,{className:"!mt-4",children:e.jsx(ot,{data:i,columns:T,getRowId:A=>A._index.toString(),pagination:!1,sortable:!1,emptyMessage:"No conditions added yet."})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:S,className:"!mr-3",disabled:j.isPending||v.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:j.isPending||v.isPending,children:j.isPending||v.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},N4e=nt({file:hs().required("Please select a file to import")}),w4e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:N4e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("customer_category")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"customer_category",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Outlet Categories",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple outlet categories. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},_4e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("customer-category"),{data:v,isLoading:N,error:C}=CF({search:t,page:u,limit:f,is_active:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=i4e(),A=ls(),L=v?.stats,F=L?.total_categories||P.length,z=L?.active_categories||P.filter(R=>R.is_active==="Y").length,I=L?.inactive_categories||P.filter(R=>R.is_active==="N").length,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(()=>{m(!0)},[]),B=g.useCallback(R=>{i(R),l(!0)},[]),q=g.useCallback(async R=>{try{await T.mutateAsync(R)}catch($){console.error("Error deleting customer category:",$)}},[T]),V=g.useCallback(R=>{s(R),h(1)},[]),G=R=>{h(R+1)},H=g.useCallback(async()=>{try{const R={search:t,is_active:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"customer_category",filters:R})}catch(R){console.error("Error exporting customer categories:",R)}},[A,t,a]),D=[{id:"category_name",label:"Category Name",render:(R,$)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:$.category_name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(la,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:$.category_name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:$.category_code})]})]})},{id:"conditions",label:"Conditions",render:(R,$)=>e.jsxs(x,{variant:"body2",className:"!text-gray-700",children:[$.conditions?.length||0," condition(s)"]})},{id:"level",label:"Level",render:R=>e.jsx(Me,{label:R,className:"!px-5",size:"small",variant:"outlined"})},{id:"is_active",label:"Status",render:R=>e.jsx(Me,{icon:R==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:R==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:R==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(R,$)=>Ie($.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(R,$)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>B($),tooltip:`Edit ${$.category_name}`}),S&&e.jsx(Vt,{onClick:()=>q($.id),tooltip:`Delete ${$.category_name}`,itemName:$.category_name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Customer Category Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage customer categories and their conditions"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Categories",value:F,icon:e.jsx(la,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Categories",value:z,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Categories",value:I,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"Total Conditions",value:P.reduce((R,$)=>R+($.conditions?.length||0),0),icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load customer categories. Please try again."}),e.jsx(ot,{data:P,columns:D,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Customer Categories...",value:t,onChange:V,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:R=>r(R.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[j&&e.jsx(Xt,{title:"Export Customer Categories",description:"Are you sure you want to export the current customer categories data to Excel? This will include all filtered results.",onConfirm:H,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsxs(e.Fragment,{children:[e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:Y,children:"Import"}),e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]})]}):!1,getRowId:R=>R.id,initialOrderBy:"category_name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:G,emptyMessage:t?`No customer categories found matching "${t}"`:"No customer categories found in the system"}),e.jsx(j4e,{selectedCustomerCategory:n,setSelectedCustomerCategory:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(w4e,{drawerOpen:c,setDrawerOpen:m})]})},S4e=async t=>{try{return(await ie.get("/customer-types",{params:t})).data}catch(s){throw console.error("Error fetching customer types:",s),new Error(s.response?.data?.message||"Failed to fetch customer types")}},C4e=async t=>{try{return(await ie.get(`/customer-types/${t}`)).data.data}catch(s){throw console.error("Error fetching customer type:",s),new Error(s.response?.data?.message||"Failed to fetch customer type")}},P4e=async t=>{try{return(await ie.post("/customer-types",t)).data}catch(s){throw console.error("Error creating customer type:",s),new Error(s.response?.data?.message||"Failed to create customer type")}},k4e=async(t,s)=>{try{return(await ie.put(`/customer-types/${t}`,s)).data}catch(a){throw console.error("Error updating customer type:",a),new Error(a.response?.data?.message||"Failed to update customer type")}},E4e=async t=>{try{await ie.delete(`/customer-types/${t}`)}catch(s){throw console.error("Error deleting customer type:",s),new Error(s.response?.data?.message||"Failed to delete customer type")}},Tm={all:["customer-type"],lists:()=>[...Tm.all,"list"],list:t=>[...Tm.lists(),t],details:()=>[...Tm.all,"detail"],detail:t=>[...Tm.details(),t]},VS=(t,s)=>tt({queryKey:Tm.list(t),queryFn:()=>S4e(t),staleTime:300*1e3,...s}),T4e=(t,s)=>tt({queryKey:Tm.detail(t),queryFn:()=>C4e(t),enabled:!!t,staleTime:300*1e3,...s}),M4e=()=>De({mutationFn:async t=>await P4e(t),invalidateQueries:["customer-type"],loadingMessage:"Creating customer type..."}),D4e=()=>De({mutationFn:async({id:t,data:s})=>await k4e(t,s),invalidateQueries:["customer-type"],loadingMessage:"Updating customer type..."}),R4e=()=>De({mutationFn:E4e,invalidateQueries:["customer-type"],loadingMessage:"Deleting customer type..."}),A4e=nt({type_name:me().required("Type name is required").min(2,"Type name must be at least 2 characters").max(255,"Type name must be less than 255 characters"),is_active:me().oneOf(["Y","N"]).required("Status is required")}),I4e=({selectedCustomerType:t,setSelectedCustomerType:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),m.resetForm()},o=M4e(),l=D4e(),{data:c}=T4e(t?.id||0,{enabled:n&&!!t?.id}),m=xt({initialValues:{type_name:t?.type_name||"",is_active:t?.is_active||"Y"},validationSchema:A4e,enableReinitialize:!0,onSubmit:async u=>{try{const h={type_name:u.type_name,is_active:u.is_active};n&&t?await l.mutateAsync({id:t.id,data:h}):await o.mutateAsync(h),i()}catch(h){console.error("Error saving customer type:",h)}}});return vt.useEffect(()=>{c&&n&&m.setValues({type_name:c.type_name||"",is_active:c.is_active||"Y"})},[c,n]),e.jsx(it,{open:a,setOpen:i,title:n?"Edit Customer Type":"Create Customer Type",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:m.handleSubmit,className:"!space-y-5",children:[e.jsxs(y,{className:"!grid !grid-cols-1 !gap-5",children:[e.jsx(oe,{name:"type_name",label:"Type Name",placeholder:"Enter type name",formik:m,required:!0}),e.jsx(y,{children:e.jsx(Ts,{name:"is_active",formik:m,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},O4e=nt({file:hs().required("Please select a file to import")}),F4e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:O4e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("customer_type")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"customer_type",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Customer Types",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple customer types. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},L4e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("customer-type"),{data:v,isLoading:N,error:C}=VS({search:t,page:u,limit:f,is_active:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=R4e(),A=ls(),L=v?.stats,F=L?.total||P.length,z=L?.active||P.filter($=>$.is_active==="Y").length,I=L?.inactive||P.filter($=>$.is_active==="N").length,Q=L?.new_this_month||0,Y=g.useCallback(()=>{i(null),l(!0)},[]),B=g.useCallback(()=>{m(!0)},[]),q=g.useCallback($=>{i($),l(!0)},[]),V=g.useCallback(async $=>{try{await T.mutateAsync($)}catch(W){console.error("Error deleting customer type:",W)}},[T]),G=g.useCallback($=>{s($),h(1)},[]),H=$=>{h($+1)},D=g.useCallback(async()=>{try{const $={search:t,is_active:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"customer_type",filters:$})}catch($){console.error("Error exporting customer types:",$)}},[A,t,a]),R=[{id:"type_name",label:"Type Name",render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:W.type_name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(_r,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:W.type_name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:W.type_code})]})]})},{id:"is_active",label:"Status",render:$=>e.jsx(Me,{icon:$==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:$==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:$==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:($,W)=>Ie(W.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:($,W)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>q(W),tooltip:`Edit ${W.type_name}`}),S&&e.jsx(Vt,{onClick:()=>V(W.id),tooltip:`Delete ${W.type_name}`,itemName:W.type_name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Customer Type Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage customer types and their associations"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Types",value:F,icon:e.jsx(_r,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Types",value:z,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Types",value:I,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:Q,icon:e.jsx(_n,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load customer types. Please try again."}),e.jsx(ot,{data:P,columns:R,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Customer Types...",value:t,onChange:G,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:$=>r($.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[j&&e.jsx(Xt,{title:"Export Customer Types",description:"Are you sure you want to export the current customer types data to Excel? This will include all filtered results.",onConfirm:D,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsxs(e.Fragment,{children:[e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:B,children:"Import"}),e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Y,children:"Create"})]})]})]}):!1,getRowId:$=>$.id,initialOrderBy:"type_name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:H,emptyMessage:t?`No customer types found matching "${t}"`:"No customer types found in the system"}),e.jsx(I4e,{selectedCustomerType:n,setSelectedCustomerType:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(F4e,{drawerOpen:c,setDrawerOpen:m})]})},$4e=async t=>{try{return(await ie.get("/customer-channels",{params:t})).data}catch(s){throw console.error("Error fetching customer channels:",s),new Error(s.response?.data?.message||"Failed to fetch customer channels")}},z4e=async t=>{try{return(await ie.get(`/customer-channels/${t}`)).data.data}catch(s){throw console.error("Error fetching customer channel:",s),new Error(s.response?.data?.message||"Failed to fetch customer channel")}},q4e=async t=>{try{return(await ie.post("/customer-channels",t)).data}catch(s){throw console.error("Error creating customer channel:",s),new Error(s.response?.data?.message||"Failed to create customer channel")}},B4e=async(t,s)=>{try{return(await ie.put(`/customer-channels/${t}`,s)).data}catch(a){throw console.error("Error updating customer channel:",a),new Error(a.response?.data?.message||"Failed to update customer channel")}},U4e=async t=>{try{await ie.delete(`/customer-channels/${t}`)}catch(s){throw console.error("Error deleting customer channel:",s),new Error(s.response?.data?.message||"Failed to delete customer channel")}},Mm={all:["customer-channel"],lists:()=>[...Mm.all,"list"],list:t=>[...Mm.lists(),t],details:()=>[...Mm.all,"detail"],detail:t=>[...Mm.details(),t]},HS=(t,s)=>tt({queryKey:Mm.list(t),queryFn:()=>$4e(t),staleTime:300*1e3,...s}),V4e=(t,s)=>tt({queryKey:Mm.detail(t),queryFn:()=>z4e(t),enabled:!!t,staleTime:300*1e3,...s}),H4e=()=>De({mutationFn:async t=>await q4e(t),invalidateQueries:["customer-channel"],loadingMessage:"Creating outlet channel..."}),W4e=()=>De({mutationFn:async({id:t,data:s})=>await B4e(t,s),invalidateQueries:["customer-channel"],loadingMessage:"Updating outlet channel..."}),Y4e=()=>De({mutationFn:U4e,invalidateQueries:["customer-channel"],loadingMessage:"Deleting outlet channel..."}),G4e=nt({channel_name:me().required("Channel name is required").min(2,"Channel name must be at least 2 characters").max(255,"Channel name must be less than 255 characters"),is_active:me().oneOf(["Y","N"]).required("Status is required")}),K4e=({selectedCustomerChannel:t,setSelectedCustomerChannel:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),m.resetForm()},o=H4e(),l=W4e(),{data:c}=V4e(t?.id||0,{enabled:n&&!!t?.id}),m=xt({initialValues:{channel_name:t?.channel_name||"",is_active:t?.is_active||"Y"},validationSchema:G4e,enableReinitialize:!0,onSubmit:async u=>{try{const h={channel_name:u.channel_name,is_active:u.is_active};n&&t?await l.mutateAsync({id:t.id,data:h}):await o.mutateAsync(h),i()}catch(h){console.error("Error saving outlet channel:",h)}}});return vt.useEffect(()=>{c&&n&&m.setValues({channel_name:c.channel_name||"",is_active:c.is_active||"Y"})},[c,n]),e.jsx(it,{open:a,setOpen:i,title:n?"Edit Outlet Channel":"Create Outlet Channel",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:m.handleSubmit,className:"!space-y-4",children:[e.jsx(oe,{name:"channel_name",label:"Channel Name",placeholder:"Enter channel name",formik:m,required:!0}),e.jsx(Ts,{name:"is_active",label:"Status",formik:m,required:!0}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2 !mt-6 !pt-4",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},Q4e=nt({file:hs().required("Please select a file to import")}),Z4e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:Q4e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("customer_channel")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"customer_channel",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Outlet Channels",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple outlet channels. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},X4e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("customer-channel"),{data:v,isLoading:N,error:C}=HS({search:t,page:u,limit:f,is_active:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=Y4e(),A=ls(),L=v?.stats,F=L?.total||P.length,z=L?.active||P.filter($=>$.is_active==="Y").length,I=L?.inactive||P.filter($=>$.is_active==="N").length,Q=L?.new_this_month||0,Y=g.useCallback(()=>{i(null),l(!0)},[]),B=g.useCallback(()=>{m(!0)},[]),q=g.useCallback($=>{i($),l(!0)},[]),V=g.useCallback(async $=>{try{await T.mutateAsync($)}catch(W){console.error("Error deleting outlet channel:",W)}},[T]),G=g.useCallback($=>{s($),h(1)},[]),H=$=>{h($+1)},D=g.useCallback(async()=>{try{const $={search:t,is_active:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"customer_channel",filters:$})}catch($){console.error("Error exporting outlet channels:",$)}},[A,t,a]),R=[{id:"channel_name",label:"Channel Name",render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:W.channel_name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(_r,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:W.channel_name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:W.channel_code})]})]})},{id:"is_active",label:"Status",render:$=>e.jsx(Me,{icon:$==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:$==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:$==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:($,W)=>Ie(W.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:($,W)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>q(W),tooltip:`Edit ${W.channel_name}`}),S&&e.jsx(Vt,{onClick:()=>V(W.id),tooltip:`Delete ${W.channel_name}`,itemName:W.channel_name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Outlet Channel Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage outlet channels and their associations"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Channels",value:F,icon:e.jsx(_r,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Channels",value:z,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Channels",value:I,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:Q,icon:e.jsx(_n,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load outlet channels. Please try again."}),e.jsx(ot,{data:P,columns:R,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Outlet Channels...",value:t,onChange:G,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:$=>r($.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[j&&e.jsx(Xt,{title:"Export Outlet Channels",description:"Are you sure you want to export the current outlet channels data to Excel? This will include all filtered results.",onConfirm:D,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsxs(e.Fragment,{children:[e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:B,children:"Import"}),e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Y,children:"Create"})]})]})]}):!1,getRowId:$=>$.id,initialOrderBy:"channel_name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:H,emptyMessage:t?`No outlet channels found matching "${t}"`:"No outlet channels found in the system"}),e.jsx(K4e,{selectedCustomerChannel:n,setSelectedCustomerChannel:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(Z4e,{drawerOpen:c,setDrawerOpen:m})]})},J4e=async t=>{try{return(await ie.get("/customer-complaints",{params:t})).data}catch(s){throw console.error("Error fetching customer complaints:",s),new Error(s.response?.data?.message||"Failed to fetch customer complaints")}},eSe=async t=>{try{return(await ie.post("/customer-complaints",t)).data}catch(s){throw console.error("Error creating customer complaint:",s),new Error(s.response?.data?.message||"Failed to create customer complaint")}},tSe=async(t,s)=>{try{return(await ie.post("/customer-complaints",{id:t,...s})).data}catch(a){throw console.error("Error updating customer complaint:",a),new Error(a.response?.data?.message||"Failed to update customer complaint")}},sSe=async t=>{try{return(await ie.delete(`/customer-complaints/${t}`)).data}catch(s){throw console.error("Error deleting customer complaint:",s),new Error(s.response?.data?.message||"Failed to delete customer complaint")}},jf={all:["customer-complaints"],lists:()=>[...jf.all,"list"],list:t=>[...jf.lists(),t],details:()=>[...jf.all,"detail"],detail:t=>[...jf.details(),t]},aSe=(t,s)=>tt({queryKey:jf.list(t),queryFn:()=>J4e(t),staleTime:300*1e3,...s}),rSe=()=>De({mutationFn:eSe,invalidateQueries:["customer-complaints"],loadingMessage:"Creating customer complaint..."}),nSe=()=>De({mutationFn:({id:t,...s})=>tSe(t,s),invalidateQueries:["customer-complaints"],loadingMessage:"Updating customer complaint..."}),iSe=()=>De({mutationFn:sSe,invalidateQueries:["customer-complaints"],loadingMessage:"Deleting customer complaint..."}),oSe=nt({file:hs().required("Please select a file to import")}),lSe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:oSe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("customer_complaints")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"customer_complaints",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Customer Complaints",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple customer complaints. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},pn=({name:t="salesperson_id",label:s="Sales Person",required:a=!1,fullWidth:r=!0,size:n="small",formik:i,setValue:o,value:l,nameToSearch:c="",onChange:m,className:u,placeholder:h})=>{const[f,b]=g.useState(""),[w,S]=g.useState(""),[j,v]=g.useState(""),[N,C]=g.useState(!1),[P,E]=g.useState(null),[M,T]=g.useState(!1),A=i?i.values[t]:l,L=A?typeof A=="number"?A.toString():String(A).trim():"";g.useEffect(()=>{const R=setTimeout(()=>{N||(v(w),w&&T(!0))},300);return()=>clearTimeout(R)},[w,N]);const F=vt.useMemo(()=>M||f?j:L&&c&&!M?c:j,[j,c,M,L,f]),z=L?Number(L):void 0,{data:I,isLoading:Q}=G9({search:F,user_id:z&&!F?z:void 0}),Y=(I?.data||[]).map(R=>({id:R.id,name:R.name,email:R.email,profile_image:R.profile_image}));g.useEffect(()=>{if(L&&!P&&!Q&&Y.length>0){const R=Y.find($=>$.id.toString()===L);R&&(E(R),f||b(R.name),T(!0))}},[L,P,f,Y,Q]);const B=vt.useMemo(()=>{if(!L)return null;const R=Y.find($=>$.id.toString()===L);return R||(P&&P.id.toString()===L?P:null)},[L,Y,P]);g.useEffect(()=>{B&&B!==P?(E(B),!f&&B.name&&b(B.name)):!L&&P?(E(null),b("")):P&&!f&&L&&b(P.name)},[B,L,P,f]),g.useEffect(()=>{L?P&&P.id.toString()!==L&&(E(null),b(""),T(!1)):(P||f)&&(b(""),E(null),T(!1))},[L]);const q=vt.useMemo(()=>{const R=[];B&&(Y.some(J=>J.id===B.id)||R.push(B));const $=new Set;return B&&$.add(B.id),Y.forEach(W=>{$.has(W.id)||(R.push(W),$.add(W.id))}),R},[Y,B,L]),V=i?.touched?.[t]&&i?.errors?.[t],G=typeof V=="string"?V:void 0,H=g.useCallback((R,$)=>{C(!0),E($);const W=$?$.id.toString():"";i?i.setFieldValue(t,W):o&&o(W),m&&m(R,$),$?(b($.name),S(""),v("")):(b(""),S(""),v("")),setTimeout(()=>C(!1),100)},[i,t,o,m]),D=g.useCallback((R,$,W)=>{if(W==="input"){N?b($):(b($),S($));return}W==="clear"&&(b(""),S(""),v(""))},[N]);return e.jsx(Ir,{options:q,getOptionLabel:R=>R.name,value:B,loading:Q,onChange:H,inputValue:f,onInputChange:D,isOptionEqualToValue:(R,$)=>R.id===$.id,size:n,fullWidth:r,className:u,filterOptions:R=>R,renderOption:(R,$)=>g.createElement(y,{component:"li",...R,key:$.id,className:"!flex !items-center !gap-2 cursor-pointer py-1 px-2 hover:!bg-gray-50"},e.jsx(ut,{src:$.profile_image||"mkx",alt:$.name,className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{children:[e.jsx("p",{className:"!text-gray-900 !text-sm",children:$.name||""}),$.email&&e.jsx("p",{className:"!text-gray-500 !text-xs",children:$.email})]})),renderInput:R=>e.jsx(mr,{...R,label:`${s+(a?" *":"")}`,required:!1,error:!!V,helperText:G,placeholder:h,onBlur:i?.handleBlur,name:t,size:n,className:u}),noOptionsText:j&&!Q?"No users found":"Type to search users",loadingText:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ki,{thickness:6,size:16,color:"inherit"})," Loading users..."]})})},cSe=nt({customer_id:Ge().required("Customer is required"),complaint_title:me().required("Complaint title is required").max(255,"Complaint title must be less than 255 characters"),complaint_description:me().required("Complaint description is required").min(10,"Complaint description must be at least 10 characters"),status:me().oneOf(["P","R","C"],"Invalid status"),submitted_by:Ge().required("Submitted by is required")}),dSe=({selectedComplaint:t,setSelectedComplaint:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=rSe(),l=nSe(),c=xt({initialValues:{customer_id:t?.customer_id||0,complaint_title:t?.complaint_title||"",complaint_description:t?.complaint_description||"",status:t?.status||"P",submitted_by:t?.submitted_by_user?.id||""},validationSchema:cSe,enableReinitialize:!0,onSubmit:async m=>{try{const u={customer_id:m.customer_id,complaint_title:m.complaint_title,complaint_description:m.complaint_description,status:m.status,submitted_by:m.submitted_by};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving customer complaint:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Customer Complaint":"Create Customer Complaint",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-4",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsx(so,{name:"customer_id",label:"Customer",formik:c,required:!0,nameToSearch:t?.customer?.name||""}),e.jsx(oe,{name:"complaint_title",label:"Complaint Title",placeholder:"Enter complaint title",formik:c,required:!0}),e.jsx(pn,{name:"submitted_by",label:"Submitted By",formik:c,required:!0}),e.jsxs(_e,{name:"status",label:"Status",formik:c,required:!0,children:[e.jsx(Z,{value:"P",children:"Pending"}),e.jsx(Z,{value:"R",children:"Resolved"}),e.jsx(Z,{value:"C",children:"Closed"})]}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"complaint_description",label:"Complaint Description",placeholder:"Enter complaint description",formik:c,multiline:!0,rows:4,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},uSe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("customer-complaint"),{data:v,isFetching:N,error:C}=aSe({page:u,limit:f,search:t,status:a!=="all"?a:void 0},{enabled:j}),P=v?.data||[],E=v?.pagination,M=iSe(),T=ls(),A=g.useCallback($=>{s($),h(1)},[]),L=g.useCallback($=>{r($),h(1)},[]),F=$=>{h($+1)},z=g.useCallback(()=>{i(null),l(!0)},[]),I=g.useCallback($=>{i($),l(!0)},[]),Q=g.useCallback(async $=>{try{await M.mutateAsync($)}catch(W){console.error("Error deleting customer complaint:",W)}},[M]),Y=g.useCallback(async()=>{try{const $={search:t,status:a!=="all"?a:void 0};await T.mutateAsync({tableName:"customer_complaints",filters:$})}catch($){console.error("Error exporting customer complaints:",$)}},[T,t,a]),B=$=>{switch($?.toUpperCase()){case"P":return"warning";case"R":return"success";case"C":return"default";default:return"default"}},q=$=>{switch($?.toUpperCase()){case"P":return"Pending";case"R":return"Resolved";case"C":return"Closed";default:return $||"N/A"}},V=[{id:"complaint_title",label:"Title",render:($,W)=>e.jsx(x,{variant:"body2",className:"!font-medium !text-gray-900",children:W.complaint_title||"N/A"})},{id:"customer",label:"Customer",render:($,W)=>e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(ut,{className:"!w-10 !h-10 !rounded !bg-primary-100 !text-primary-500 !text-xs",children:e.jsx(Tr,{className:"!w-4 !h-4"})}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-medium !text-gray-900",children:W.customer?.name||`Customer #${W.customer_id}`}),W.customer?.code&&e.jsx(x,{variant:"caption",className:"!text-gray-500",children:W.customer.code})]})]})},{id:"complaint_description",label:"Complaint Description",render:($,W)=>e.jsx(qa,{title:W.complaint_description,placement:"top",arrow:!0,children:e.jsx(x,{variant:"body2",className:"!text-gray-900 !max-w-md",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:W.complaint_description})})},{id:"submitted_by_user",label:"Submitted By",render:($,W)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:W.submitted_by_user?.name||"N/A"})},{id:"status",label:"Status",render:($,W)=>e.jsx(Me,{label:q(W.status),color:B(W.status),size:"small",variant:"outlined",className:"!capitalize"})},{id:"createdate",label:"Created Date",render:($,W)=>Ie(String(W.createdate||""))||"N/A"},...w||S||j?[{id:"actions",label:"Actions",sortable:!1,render:($,W)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>I(W),tooltip:`Edit complaint #${W.id}`}),S&&e.jsx(Vt,{onClick:()=>Q(W.id),tooltip:`Delete complaint #${W.id}`,itemName:`complaint #${W.id}`,confirmDelete:!0})]})}]:[]],G=E?.total_count||P.length,H=P.filter($=>$.status==="P").length,D=P.filter($=>$.status==="R").length,R=P.filter($=>$.status==="C").length;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs("div",{children:[e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:"Customer Complaints"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"View and manage customer complaints"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Complaints",value:G,icon:e.jsx(cN,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Pending Complaints",value:H,icon:e.jsx(zc,{className:"w-6 h-6"}),color:"orange",isLoading:N}),e.jsx(fe,{title:"Resolved Complaints",value:D,icon:e.jsx(cN,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Closed Complaints",value:R,icon:e.jsx(cN,{className:"w-6 h-6"}),color:"gray",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load customer complaints. Please try again."}),e.jsx(ot,{data:P,columns:V,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[j&&e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx(ts,{placeholder:"Search complaints...",value:t,onChange:A,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:$=>L($.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"P",children:"Pending"}),e.jsx(Z,{value:"R",children:"Resolved"}),e.jsx(Z,{value:"C",children:"Closed"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Customer Complaints",description:"Are you sure you want to export the current customer complaints data to Excel? This will include all filtered results.",onConfirm:Y,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:T.isPending,children:T.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:z,children:"Create"})]})]}):!1,getRowId:$=>$.id,initialOrderBy:"createdate",loading:N,totalCount:E?.total_count||0,page:u-1,rowsPerPage:f,onPageChange:F,isPermission:j,emptyMessage:t||a!=="all"?"No complaints found matching your filters":"No customer complaints found in the system"}),e.jsx(dSe,{selectedComplaint:n,setSelectedComplaint:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(lSe,{drawerOpen:c,setDrawerOpen:m})]})},mSe=nt({file:hs().required("Please select a file to import")}),pSe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:mSe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("currencies")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"currencies",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Currencies",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple currencies. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !space-x-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},hSe=nt({name:me().required("Currency name is required").min(2,"Currency name must be at least 2 characters").max(100,"Currency name must be less than 100 characters").trim(),code:me().required("Currency code is required").length(3,"Currency code must be exactly 3 characters").matches(/^[A-Z]{3}$/,"Currency code must be exactly 3 capital letters (e.g., USD, EUR, INR)").trim(),symbol:me().max(10,"Currency symbol must be less than 10 characters").nullable().optional(),exchange_rate_to_base:Ge().positive("Exchange rate must be positive").max(1e12,"Exchange rate exceeds maximum allowed value").nullable().optional(),is_base:me().oneOf(["Y","N"],"Must be Y or N").required("Base currency status is required"),is_active:me().oneOf(["Y","N"],"Must be Y or N").required("Active status is required")}),fSe=({selectedCurrency:t,setSelectedCurrency:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=ube(),l=mbe(),c=xt({initialValues:{name:t?.name||"",code:t?.code||"",symbol:t?.symbol||"",exchange_rate_to_base:t?.exchange_rate_to_base||"",is_base:t?.is_base||"N",is_active:t?.is_active||"Y"},validationSchema:hSe,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,code:m.code,symbol:m.symbol,exchange_rate_to_base:m.exchange_rate_to_base?Number(m.exchange_rate_to_base):void 0,is_base:m.is_base,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving currency:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Currency":"Create Currency",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Currency Name",placeholder:"Enter currency name",formik:c,required:!0}),e.jsx(oe,{name:"code",label:"Currency Code",placeholder:"Enter currency code (e.g., USD, EUR, INR)",formik:c,required:!0}),e.jsx(oe,{name:"symbol",label:"Currency Symbol",placeholder:"Enter currency symbol (e.g., $, , )",formik:c}),e.jsx(oe,{name:"exchange_rate_to_base",label:"Exchange Rate to Base",placeholder:"Enter exchange rate",type:"number",formik:c}),e.jsxs(_e,{name:"is_base",label:"Is Base Currency",formik:c,required:!0,children:[e.jsx(Z,{value:"N",children:"No"}),e.jsx(Z,{value:"Y",children:"Yes"})]}),e.jsx(Ts,{name:"is_active",formik:c,required:!0,className:"col-span-2"})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",loading:o.isPending||l.isPending,children:o.isPending?"Creating...":l.isPending?"Updating...":n?"Update Currency":"Create Currency"})]})]})})})},xSe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState("all"),[o,l]=g.useState(null),[c,m]=g.useState(!1),[u,h]=g.useState(!1),[f,b]=g.useState(1),[w]=g.useState(10),{isCreate:S,isUpdate:j,isDelete:v,isRead:N}=Qe("currency"),{data:C,isFetching:P,error:E}=Zl({search:t,page:f,limit:w,status:a==="all"?void 0:a==="active"?"active":"inactive"},{enabled:N}),M=C?.data||[],T=C?.meta?.total||0,A=(C?.meta?.page||1)-1,L=pbe(),F=ls(),z=C?.stats?.total_currencies??0,I=C?.stats?.active_currencies??0,Q=C?.stats?.inactive_currencies??0,Y=C?.stats?.base_currencies??0,B=g.useCallback(()=>{l(null),m(!0)},[]),q=g.useCallback($=>{l($),m(!0)},[]),V=g.useCallback(async $=>{try{await L.mutateAsync($)}catch(W){console.error("Error deleting currency:",W)}},[L]),G=g.useCallback($=>{s($),b(1)},[]),H=$=>{b($+1)},D=g.useCallback(async()=>{try{const $={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await F.mutateAsync({tableName:"currencies",filters:$})}catch($){console.error("Error exporting currencies:",$)}},[F,t,a]),R=[{id:"name",label:"Currency & Code",render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:W.name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(wr,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:W.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:W.code})]})]})},{id:"symbol",label:"Symbol",render:$=>e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-mono",children:$||"N/A"})},{id:"exchange_rate_to_base",label:"Exchange Rate",render:$=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:$?Number($).toFixed(2):"N/A"})},{id:"is_base",label:"Base Currency",render:$=>e.jsx(Me,{icon:$==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:$==="Y"?"Yes":"No",size:"small",variant:"outlined",color:$==="Y"?"success":"default"})},{id:"is_active",label:"Status",render:$=>e.jsx(Me,{icon:$==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:$==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:$==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:($,W)=>Ie(W.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...j||v||N?[{id:"action",label:"Actions",sortable:!1,render:($,W)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[j&&e.jsx(rs,{onClick:()=>q(W),tooltip:`Edit ${W.name}`}),v&&e.jsx(Vt,{onClick:()=>V(W.id),tooltip:`Delete ${W.name}`,itemName:W.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Currency Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage currency settings, exchange rates, and base currency configuration"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Currencies",value:z,icon:e.jsx(wr,{className:"w-6 h-6"}),color:"blue",isLoading:P}),e.jsx(fe,{title:"Active Currencies",value:I,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:P}),e.jsx(fe,{title:"Inactive Currencies",value:Q,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:P}),e.jsx(fe,{title:"Base Currencies",value:Y,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:P})]}),E&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load currencies. Please try again."}),e.jsx(ot,{data:M,columns:R,actions:N||S?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex items-center flex-wrap gap-2",children:N&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Currencies",value:t,onChange:G,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:$=>r($.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:n,onChange:$=>i($.target.value),className:"!min-w-40",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Types"}),e.jsx(Z,{value:"base",children:"Base Currency"}),e.jsx(Z,{value:"non-base",children:"Non-Base"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx(Xt,{title:"Export Currencies",description:"Are you sure you want to export the current currencies data to Excel? This will include all filtered results.",onConfirm:D,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:F.isPending,children:F.isPending?"Exporting...":"Export"})}),S&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>h(!0),children:"Import"}),S&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:B,children:"Create"})]})]}):!1,getRowId:$=>$.id,initialOrderBy:"name",loading:P,totalCount:T,page:A,rowsPerPage:w,isPermission:N,onPageChange:H,emptyMessage:t?`No currencies found matching "${t}"`:"No currencies found in the system"}),e.jsx(fSe,{selectedCurrency:o,setSelectedCurrency:l,drawerOpen:c,setDrawerOpen:m}),e.jsx(pSe,{drawerOpen:u,setDrawerOpen:h})]})},gSe=async t=>{try{return(await ie.get("/depots",{params:t})).data}catch(s){throw console.error("Error fetching depots:",s),new Error(s.response?.data?.message||"Failed to fetch depots")}},ySe=async t=>{try{return(await ie.get(`/depots/${t}`)).data}catch(s){throw console.error("Error fetching depot:",s),new Error(s.response?.data?.message||"Failed to fetch depot")}},bSe=async t=>{try{return(await ie.post("/depots",t)).data}catch(s){throw console.error("Error creating depot:",s),new Error(s.response?.data?.message||"Failed to create depot")}},vSe=async(t,s)=>{try{return(await ie.put(`/depots/${t}`,s)).data}catch(a){throw console.error("Error updating depot:",a),new Error(a.response?.data?.message||"Failed to update depot")}},jSe=async t=>{try{return(await ie.delete(`/depots/${t}`)).data}catch(s){throw console.error("Error deleting depot:",s),new Error(s.response?.data?.message||"Failed to delete depot")}},Dm={all:["depots"],lists:()=>[...Dm.all,"list"],list:t=>[...Dm.lists(),t],details:()=>[...Dm.all,"detail"],detail:t=>[...Dm.details(),t]},No=(t,s)=>tt({queryKey:Dm.list(t),queryFn:()=>gSe(t),staleTime:300*1e3,...s}),NSe=(t,s)=>tt({queryKey:Dm.detail(t),queryFn:()=>ySe(t),enabled:!!t,staleTime:300*1e3,...s}),wSe=()=>De({mutationFn:bSe,invalidateQueries:["depots"],loadingMessage:"Creating depot..."}),_Se=()=>De({mutationFn:({id:t,...s})=>vSe(t,s),invalidateQueries:["depots"],loadingMessage:"Updating depot..."}),SSe=()=>De({mutationFn:jSe,invalidateQueries:["depots"],loadingMessage:"Deleting depot..."}),CSe=nt({file:hs().required("Please select a file to import")}),PSe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:CSe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("depots")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"depots",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Depots",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple depots. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},kSe=nt({parent_id:Ge().required("Company is required").positive("Invalid company"),name:me().required("Depot name is required").min(2,"Name must be at least 2 characters").max(100,"Name must be less than 100 characters"),address:me().max(255,"Address must be less than 255 characters"),city:me().max(50,"City must be less than 50 characters"),state:me().max(50,"State must be less than 50 characters"),phone_number:me().matches(/^[0-9+\-\s()]+$/,"Invalid phone number format").min(8,"Phone number must be at least 8 digits").max(16,"Phone number is too long"),email:me().email("Invalid email format"),manager_id:Ge().positive("Invalid manager"),supervisor_id:Ge().positive("Invalid supervisor"),coordinator_id:Ge().positive("Invalid coordinator"),latitude:Ge().min(-90,"Invalid latitude").max(90,"Invalid latitude"),longitude:Ge().min(-180,"Invalid longitude").max(180,"Invalid longitude"),is_active:me().required("Status is required")}),ESe=({selectedDepot:t,setSelectedDepot:s,drawerOpen:a,setDrawerOpen:r,companies:n})=>{const i=!!t,o=()=>{s(null),r(!1),m.resetForm()},l=wSe(),c=_Se(),m=xt({initialValues:{parent_id:n?.[0]?.id||"",name:t?.name||"",address:t?.address||"",city:t?.city||"",state:t?.state||"",zipcode:t?.zipcode||"",phone_number:t?.phone_number||"",email:t?.email||"",manager_id:t?.manager_id?.toString()||"",supervisor_id:"",coordinator_id:t?.coordinator_id?.toString()||"",latitude:t?.latitude?.toString()||"",longitude:t?.longitude?.toString()||"",is_active:t?.is_active||"Y"},validationSchema:kSe,enableReinitialize:!0,onSubmit:async u=>{try{const h={parent_id:Number(u.parent_id),name:u.name,address:u.address,city:u.city,state:u.state,zipcode:u.zipcode,phone_number:u.phone_number,email:u.email,manager_id:u.manager_id?Number(u.manager_id):void 0,coordinator_id:u.coordinator_id?Number(u.coordinator_id):void 0,latitude:u.latitude?Number(u.latitude):void 0,longitude:u.longitude?Number(u.longitude):void 0,is_active:u.is_active};i&&t?await c.mutateAsync({id:t.id,...h}):await l.mutateAsync(h),o()}catch(h){console.error("Error saving depot:",h)}}});return e.jsx(it,{open:a,setOpen:o,title:i?"Edit Depot":"Create Depot",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:m.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(_e,{name:"parent_id",label:"Company",formik:m,required:!0,disabled:!0,children:n.map(u=>e.jsxs(Z,{value:u.id.toString(),children:[u.name," (",u.code,")"]},u.id))}),e.jsx(oe,{name:"name",label:"Depot Name",placeholder:"Enter depot name",formik:m,required:!0}),e.jsx(oe,{name:"email",label:"Email",placeholder:"Enter email address",formik:m,type:"email"}),e.jsx(oe,{name:"city",label:"City",placeholder:"Enter city",formik:m}),e.jsx(oe,{name:"state",label:"State",placeholder:"Enter state",formik:m}),e.jsx(oe,{type:"number",name:"zipcode",label:"Zip Code",placeholder:"Enter zip code",formik:m}),e.jsx(oe,{name:"phone_number",label:"Phone Number",placeholder:"Enter phone number",formik:m,type:"number"}),e.jsx(pn,{name:"manager_id",label:"Manager",formik:m}),e.jsx(pn,{name:"coordinator_id",label:"Coordinator",formik:m}),e.jsx(oe,{name:"latitude",label:"Latitude",placeholder:"Enter latitude",formik:m,type:"number",slotProps:{htmlInput:{inputMode:"decimal",pattern:"[+-]?[0-9]*\\.?[0-9]*",step:"any",onKeyPress:u=>{!/[0-9.-]/.test(u.key)&&u.key!=="Backspace"&&u.key!=="Delete"&&u.key!=="Tab"&&u.key!=="Enter"&&u.preventDefault()}}}}),e.jsx(oe,{name:"longitude",label:"Longitude",placeholder:"Enter longitude",formik:m,type:"number",slotProps:{htmlInput:{inputMode:"decimal",pattern:"[+-]?[0-9]*\\.?[0-9]*",step:"any",onKeyPress:u=>{!/[0-9.-]/.test(u.key)&&u.key!=="Backspace"&&u.key!=="Delete"&&u.key!=="Tab"&&u.key!=="Enter"&&u.preventDefault()}}}}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"address",label:"Address",placeholder:"Enter depot address",formik:m,multiline:!0,rows:3})}),e.jsx(Ts,{name:"is_active",label:"Status",formik:m,required:!0})]}),e.jsxs(y,{className:"!flex !justify-end items-center ",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:o,className:"!mr-3",disabled:l.isPending||c.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:l.isPending||c.isPending,children:[l.isPending||c.isPending?i?"Updating...":"Creating...":i?"Update":"Create"," "]})]})]})})})},TSe=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState("all"),[l,c]=g.useState(null),[m,u]=g.useState(!1),[h,f]=g.useState(!1),[b,w]=g.useState(1),[S]=g.useState(10),{isCreate:j,isUpdate:v,isDelete:N,isRead:C}=Qe("depot"),{data:P,isFetching:E,error:M}=No({search:s,page:b,limit:S,isActive:r==="all"?void 0:r==="active"?"Y":"N",parent_id:i==="all"?void 0:Number(i)},{enabled:C}),{data:T}=SF({page:1,limit:100}),A=P?.data||[],L=T?.data||[],F=P?.meta?.total_count||0,z=(P?.meta?.current_page||1)-1,I=SSe(),Q=ls(),Y=P?.stats?.total_depots??A.length,B=P?.stats?.active_depots??A.filter(ee=>ee.is_active==="Y").length,q=P?.stats?.inactive_depots??A.filter(ee=>ee.is_active==="N").length,V=P?.stats?.new_depots??0,G=g.useCallback(()=>{c(null),u(!0)},[]),H=g.useCallback(ee=>{c(ee),u(!0)},[]),D=g.useCallback(ee=>{t(`/masters/depots/${ee.id}`)},[t]),R=g.useCallback(async ee=>{try{await I.mutateAsync(ee)}catch(ae){console.error("Error deleting depot:",ae)}},[I]),$=g.useCallback(ee=>{a(ee),w(1)},[]),W=ee=>{w(ee+1)},J=g.useCallback(async()=>{try{const ee={search:s,isActive:r==="all"?void 0:r==="active"?"Y":"N",parent_id:i==="all"?void 0:Number(i)};await Q.mutateAsync({tableName:"depots",filters:ee})}catch(ee){console.error("Error exporting depots:",ee)}},[Q,s,r,i]),te=[{id:"name",label:"Depot & Code",render:(ee,ae)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:ae.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(_n,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:ae.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:ae.code})]})]})},{id:"depot_companies",label:"Company",render:(ee,ae)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:ae.depot_companies?.name||"No Company"})},{id:"contact",label:"Contact",render:(ee,ae)=>e.jsxs(y,{className:"space-y-1",children:[ae.email?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nx,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:ae.email})]}):e.jsx("span",{className:"italic text-gray-400",children:"No Email"}),ae.phone_number&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rv,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:ae.phone_number})]})]})},{id:"location",label:"Location",render:(ee,ae)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:[ae.city,ae.state].filter(Boolean).join(", ")||"No Location"})]})},{id:"is_active",label:"Status",render:ee=>e.jsx(Me,{icon:ee==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:ee==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:ee==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(ee,ae)=>Ie(ae.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...v||N||C?[{id:"action",label:"Actions",sortable:!1,render:(ee,ae)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[C&&e.jsx(Wa,{onClick:()=>D(ae),tooltip:`View ${ae.name}`,icon:e.jsx(Sn,{fontSize:"small"}),color:"info"}),v&&e.jsx(rs,{onClick:()=>H(ae),tooltip:`Edit ${ae.name}`}),N&&e.jsx(Vt,{onClick:()=>R(ae.id),tooltip:`Delete ${ae.name}`,itemName:ae.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Depot Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage depot locations, staff assignments, and operational details"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Depots",value:Y,icon:e.jsx(_n,{className:"w-6 h-6"}),color:"blue",isLoading:E}),e.jsx(fe,{title:"Active Depots",value:B,icon:e.jsx(go,{className:"w-6 h-6"}),color:"green",isLoading:E}),e.jsx(fe,{title:"Inactive Depots",value:q,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:E}),e.jsx(fe,{title:"New This Month",value:V,icon:e.jsx(la,{className:"w-6 h-6"}),color:"purple",isLoading:E})]}),M&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load depots. Please try again."}),e.jsx(ot,{data:A,columns:te,actions:C||j?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ts,{placeholder:"Search Depots...",value:s,onChange:$,debounceMs:400,showClear:!0,className:"!w-80"}),C&&e.jsxs(e.Fragment,{children:[e.jsxs(_e,{value:r,onChange:ee=>n(ee.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:i,onChange:ee=>o(ee.target.value),className:"!w-68",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Companies"}),L.map(ee=>e.jsx(Z,{value:ee.id.toString(),children:ee.name},ee.id))]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[C&&e.jsx(Xt,{title:"Export Depots",description:"Are you sure you want to export the current depot data to Excel? This will include all filtered results.",onConfirm:J,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:Q.isPending,children:Q.isPending?"Exporting...":"Export"})}),j&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>f(!0),children:"Import"}),j&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:G,children:"Create"})]})]}):!1,getRowId:ee=>ee.id,initialOrderBy:"name",loading:E,totalCount:F,page:z,rowsPerPage:S,isPermission:C,onPageChange:W,emptyMessage:s?`No depots found matching "${s}"`:"No depots found in the system"}),e.jsx(ESe,{selectedDepot:l,setSelectedDepot:c,drawerOpen:m,setDrawerOpen:u,companies:L}),e.jsx(PSe,{drawerOpen:h,setDrawerOpen:f})]})},MSe=()=>{const{id:t}=Kr(),s=Ws(),{data:a,isLoading:r,error:n,isFetching:i}=NSe(Number(t)),o=a?.data,l=()=>{s("/masters/depots")};if(r||i)return e.jsxs("div",{className:"!flex !items-start !gap-4",children:[e.jsxs("div",{className:"!flex-2 !flex !flex-col !gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"!absolute !top-3 !right-3",children:e.jsx(X,{variant:"circular",width:10,height:10,className:"!bg-green-200"})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !border-3 !border-white"})}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-green-50"}),e.jsxs("div",{className:"!space-y-2 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"30%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"60%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"40%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"70%",height:14})]})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:140,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4,5,6].map(m=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${40+m*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+m*6}%`,height:16})]},m))})]})]})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(m=>e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"40%",height:12})]}),e.jsx(X,{variant:"text",width:80,height:16,className:"!text-right"})]})},m))})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:150,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(m=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx(X,{variant:"text",width:"40%",height:12,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"80%",height:16})]},m))})]})]})]})]});if(n||!o)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load depot details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:l,className:"mt-4",children:"Back to Depots"})]});const c=({title:m,children:u,icon:h})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[h&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(h,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:m})]}),u]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${o.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":o.is_active==="Y","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":o.is_active!=="Y"}),children:e.jsx(_n,{className:"!w-8 !h-8"})})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:o.name}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:o.code}),e.jsx("div",{className:"!flex !justify-center !gap-2 !mb-4",children:e.jsx(Me,{icon:o.is_active==="Y"?e.jsx(mt,{fontSize:"small"}):e.jsx(cu,{fontSize:"small"}),label:o.is_active==="Y"?"Active":"Inactive",size:"small",color:o.is_active==="Y"?"success":"error"})}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[o.depot_companies&&e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Company"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[o.depot_companies.name," (",o.depot_companies.code,")"]})]}),o.createdate&&e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Created Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof o.createdate=="string"?o.createdate:String(o.createdate||""))})]})]})]}),e.jsx(c,{title:"Depot Information",icon:_n,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Depot Code"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.code})]}),o.depot_companies&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Company"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.depot_companies.name})]}),o.address&&e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Address"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.address})]}),o.city&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"City"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.city})]}),o.state&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"State"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.state})]}),o.zipcode&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Zip Code"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.zipcode})]}),o.phone_number&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Phone Number"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.phone_number})]}),o.email&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Email"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.email})]}),o.createdate&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Created Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof o.createdate=="string"?o.createdate:String(o.createdate||""))})]}),o.updatedate&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Last Updated"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof o.updatedate=="string"?o.updatedate:String(o.updatedate||""))})]})]})})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsx(c,{title:"Staff Assignment",icon:la,children:e.jsxs("div",{className:"!space-y-3",children:[o.depots_manager&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(go,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Manager"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.depots_manager.name})]})]}),e.jsx("div",{className:"!text-right",children:e.jsx(x,{variant:"caption",className:"!text-gray-500 !block",children:o.depots_manager.email})})]})}),o.depots_supervisior&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(go,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Supervisor"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.depots_supervisior.name})]})]}),e.jsx("div",{className:"!text-right",children:e.jsx(x,{variant:"caption",className:"!text-gray-500 !block",children:o.depots_supervisior.email})})]})}),o.depots_coodrinator&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(go,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Coordinator"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.depots_coodrinator.name})]})]}),e.jsx("div",{className:"!text-right",children:e.jsx(x,{variant:"caption",className:"!text-gray-500 !block",children:o.depots_coodrinator.email})})]})}),!o.depots_manager&&!o.depots_supervisior&&!o.depots_coodrinator&&e.jsxs("div",{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(la,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:"No staff assigned to this depot yet."})]})]})}),e.jsx(c,{title:"Location Details",icon:Ks,children:e.jsx("div",{className:"!space-y-3",children:o.city||o.state?e.jsxs(e.Fragment,{children:[o.city&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsx("div",{className:"!flex !items-center !justify-between",children:e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"City"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.city})]})})}),o.state&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsx("div",{className:"!flex !items-center !justify-between",children:e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"State"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.state})]})})}),o.zipcode&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsx("div",{className:"!flex !items-center !justify-between",children:e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Zip Code"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.zipcode})]})})}),(o.latitude||o.longitude)&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsx("div",{className:"!flex !items-center !justify-between",children:e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Coordinates"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.latitude&&o.longitude?`${o.latitude}, ${o.longitude}`:o.latitude?`Lat: ${o.latitude}`:o.longitude?`Lng: ${o.longitude}`:"Not available"})]})})})]}):e.jsxs("div",{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(Ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:"No location details available for this depot."})]})})}),(o.email||o.phone_number)&&e.jsx(c,{title:"Contact Information",icon:Nx,children:e.jsxs("div",{className:"!space-y-3",children:[o.email&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Nx,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Email"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.email})]})]})}),o.phone_number&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Rv,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Phone Number"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.phone_number})]})]})})]})})]})]}),e.jsx("div",{className:"!mt-4",children:e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:l,children:"Back to Depots"})})]})},DSe=async t=>{try{return(await ie.get("/kpi-targets",{params:t})).data}catch(s){throw console.error("Error fetching KPI targets:",s),new Error(s.response?.data?.message||"Failed to fetch KPI targets")}},RSe=async t=>{try{return(await ie.post("/kpi-targets",t)).data.data}catch(s){throw console.error("Error creating KPI target:",s),new Error(s.response?.data?.message||"Failed to create KPI target")}},ASe=async(t,s)=>{try{return(await ie.put(`/kpi-targets/${t}`,s)).data.data}catch(a){throw console.error("Error updating KPI target:",a),new Error(a.response?.data?.message||"Failed to update KPI target")}},ISe=async t=>{try{await ie.delete(`/kpi-targets/${t}`)}catch(s){throw console.error("Error deleting KPI target:",s),new Error(s.response?.data?.message||"Failed to delete KPI target")}},Nf={all:["kpi-targets"],lists:()=>[...Nf.all,"list"],list:t=>[...Nf.lists(),t],details:()=>[...Nf.all,"detail"],detail:t=>[...Nf.details(),t]},OSe=(t,s)=>tt({queryKey:Nf.list(t),queryFn:()=>DSe(t),staleTime:300*1e3,...s}),FSe=()=>De({mutationFn:RSe,invalidateQueries:["kpi-targets"],loadingMessage:"Creating KPI target..."}),LSe=()=>De({mutationFn:({id:t,data:s})=>ASe(t,s),invalidateQueries:["kpi-targets"],loadingMessage:"Updating KPI target..."}),$Se=()=>De({mutationFn:ISe,invalidateQueries:["kpi-targets"],loadingMessage:"Deleting KPI target..."}),zSe=nt({file:hs().required("Please select a file to import")}),qSe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:zSe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("employee_kpi_targets")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"employee_kpi_targets",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import KPI Targets",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple KPI targets. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},BSe=nt({employee_id:Ge().required("Employee is required").positive("Employee must be selected"),kpi_name:me().required("KPI name is required").min(2,"KPI name must be at least 2 characters").max(100,"KPI name must not exceed 100 characters").trim(),target_value:Ge().required("Target value is required").min(0,"Target value must be non-negative").typeError("Target value must be a valid number"),measure_unit:me().nullable().max(50,"Measure unit must not exceed 50 characters").trim(),period_start:Ca().required("Period start date is required").typeError("Period start must be a valid date"),period_end:Ca().required("Period end date is required").typeError("Period end must be a valid date").when("period_start",(t,s)=>t&&t[0]?s.min(t[0],"Period end date must be after period start date"):s),is_active:me().oneOf(["Y","N"],"Status must be Y or N").default("Y")}),USe=({selectedKpiTarget:t,setSelectedKpiTarget:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,{data:i}=Qr({page:1,limit:1e3,isActive:"Y"}),o=i?.data||[],l=FSe(),c=LSe(),m=()=>{s(null),r(!1),u.resetForm()},u=xt({initialValues:{employee_id:t?.employee_id||0,kpi_name:t?.kpi_name||"",target_value:t?.target_value||"",measure_unit:t?.measure_unit||"",period_start:t?.period_start?t.period_start.split("T")[0]:"",period_end:t?.period_end?t.period_end.split("T")[0]:"",is_active:t?.is_active||"Y"},validationSchema:BSe,enableReinitialize:!0,onSubmit:async h=>{try{const f={...h,employee_id:Number(h.employee_id),target_value:h.target_value.toString(),measure_unit:h.measure_unit};n&&t?await c.mutateAsync({id:t.id,data:f}):await l.mutateAsync(f),m()}catch(f){console.error("Error submitting KPI target:",f)}}});return e.jsx(it,{open:a,setOpen:m,title:n?"Edit KPI Target":"Create KPI Target",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:u.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(_e,{name:"employee_id",label:"Employee",formik:u,required:!0,children:o.map(h=>e.jsxs(Z,{value:h.id,children:[h.name," (",h.email,")"]},h.id))}),e.jsx(oe,{name:"kpi_name",label:"KPI Name",placeholder:"Enter KPI name",formik:u,required:!0}),e.jsx(oe,{name:"target_value",label:"Target Value",type:"number",placeholder:"Enter target value",formik:u,required:!0}),e.jsx(oe,{name:"measure_unit",label:"Measure Unit",placeholder:"e.g., USD, %, visits",formik:u}),e.jsx(oe,{name:"period_start",label:"Period Start",type:"date",formik:u,required:!0,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(oe,{name:"period_end",label:"Period End",type:"date",formik:u,required:!0,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(Ts,{name:"is_active",formik:u,required:!0})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:m,className:"!mr-3",disabled:l.isPending||c.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:l.isPending||c.isPending,children:l.isPending||c.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},VSe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("kpi-target"),{data:v,isLoading:N,error:C}=OSe({search:t,page:u,limit:f,is_active:a==="all"?void 0:a},{enabled:j}),P=v?.data||[],E=v?.meta?.total_count||0,M=(v?.meta?.current_page||1)-1,T=v?.stats||{total_targets:0,active_targets:0,inactive_targets:0,targets_this_month:0},A=$Se(),L=ls(),F=T?.total_targets??P.length,z=T?.active_targets??P.filter(R=>R.is_active==="Y").length,I=T?.inactive_targets??P.filter(R=>R.is_active==="N").length,Q=T?.targets_this_month??0,Y=g.useCallback(()=>{i(null),l(!0)},[]),B=g.useCallback(R=>{i(R),l(!0)},[]),q=g.useCallback(async R=>{try{await A.mutateAsync(R)}catch($){console.error("Error deleting KPI target:",$)}},[A]),V=g.useCallback(R=>{s(R),h(1)},[]),G=R=>{h(R+1)},H=g.useCallback(async()=>{try{const R={search:t,is_active:a==="all"?void 0:a};await L.mutateAsync({tableName:"employee_kpi_targets",filters:R})}catch(R){console.error("Error exporting KPI targets:",R)}},[L,t,a]),D=[{id:"kpi_info",label:"KPI Info",render:(R,$)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:$.kpi_name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(sl,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:$.kpi_name}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:["Target: ",$.target_value," ",$.measure_unit||""]})]})]})},{id:"employee",label:"Employee",render:(R,$)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Tr,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:$.employee?.name||"Unknown Employee"})]})},{id:"period",label:"Period",render:(R,$)=>{const W=Ie($.period_start),J=Ie($.period_end);return e.jsx(y,{className:"flex flex-col items-start",children:e.jsxs(y,{className:"flex items-center gap-1 mb-0.5",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:"text-xs font-medium text-gray-800",children:[W," - ",J]})]})})}},{id:"measure_unit",label:"Unit",render:(R,$)=>e.jsx(Me,{label:$.measure_unit||"N/A",size:"small",variant:"outlined"})},{id:"is_active",label:"Status",render:(R,$)=>e.jsx(Me,{icon:$.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:$.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:$.is_active==="Y"?"success":"error"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(R,$)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>B($),tooltip:`Edit ${$.kpi_name}`}),S&&e.jsx(Vt,{onClick:()=>q($.id),tooltip:`Delete ${$.kpi_name}`,itemName:$.kpi_name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"KPI Targets"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage employee KPI targets and performance goals"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Targets",value:F,icon:e.jsx(sl,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Targets",value:z,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Targets",value:I,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"This Month",value:Q,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load KPI targets. Please try again."}),e.jsx(ot,{data:P,columns:D,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[j&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ts,{placeholder:"Search KPI Targets...",value:t,onChange:V,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:R=>r(R.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[j&&e.jsx(Xt,{title:"Export KPI Targets",description:"Are you sure you want to export the current KPI targets data to Excel? This will include all filtered results.",onConfirm:H,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:L.isPending,children:L.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Y,children:"Create"})]})]}):!1,getRowId:R=>R.id,initialOrderBy:"kpi_name",loading:N,totalCount:E,page:M,rowsPerPage:f,onPageChange:G,isPermission:j,emptyMessage:t?`No KPI targets found matching "${t}"`:"No KPI targets found in the system"}),e.jsx(USe,{selectedKpiTarget:n,setSelectedKpiTarget:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(qSe,{drawerOpen:c,setDrawerOpen:m})]})},HSe=async t=>{try{return(await ie.get("/login-history",{params:t})).data}catch(s){throw console.error("Error fetching login history:",s),new Error(s.response?.data?.message||"Failed to fetch login history")}},WSe=async t=>{try{return(await ie.delete(`/login-history/${t}`)).data}catch(s){throw console.error("Error deleting login history:",s),new Error(s.response?.data?.message||"Failed to delete login history")}},wf={all:["login-history"],lists:()=>[...wf.all,"list"],list:t=>[...wf.lists(),t],details:()=>[...wf.all,"detail"],detail:t=>[...wf.details(),t]},YSe=(t,s)=>tt({queryKey:wf.list(t),queryFn:()=>HSe(t),staleTime:300*1e3,...s}),GSe=()=>De({mutationFn:WSe,invalidateQueries:["login-history"],loadingMessage:"Deleting login history..."}),KSe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(1),[o]=g.useState(10),{isDelete:l,isRead:c}=Qe("login-history"),{data:m,isLoading:u,error:h}=YSe({search:t,page:n,limit:o,login_status:a==="all"?void 0:a==="active"?"success":"failed"},{enabled:c}),f=m?.data||[],b=m?.meta?.total_count||0,w=(m?.meta?.current_page||1)-1,S=GSe(),j=ls(),v=m?.stats?.total_logins??f.length,N=m?.stats?.successful_logins??f.filter(F=>F.login_status==="success").length,C=m?.stats?.failed_logins??0,P=m?.stats?.today_logins??0,E=g.useCallback(async F=>{try{await S.mutateAsync(F)}catch(z){console.error("Error deleting login history:",z)}},[S]),M=g.useCallback(F=>{s(F),i(1)},[]),T=F=>{i(F+1)},A=g.useCallback(async()=>{try{const F={search:t,login_status:a==="all"?void 0:a==="active"?"success":"failed"};await j.mutateAsync({tableName:"login_history",filters:F})}catch(F){console.error("Error exporting login history:",F)}},[j,t,a]),L=[{id:"user",label:"User",sortable:!1,render:(F,z)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:z.user?.name,className:"!rounded !bg-primary-100 !text-primary-500",children:z.user?.name?.charAt(0)||"U"}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:z.user?.name||"Unknown User"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:z.user?.email||`ID: ${z.user_id}`})]})]})},{id:"login_time",label:"Login Time",sortable:!0,render:F=>e.jsx(x,{variant:"body2",children:F?mp(F):"N/A"})},{id:"ip_address",label:"IP Address",sortable:!0,render:F=>e.jsx(x,{variant:"body2",className:"font-mono text-sm",children:F?.replace(/^::ffff:/,"")||"N/A"})},{id:"device_info",label:"Device",sortable:!1,render:F=>e.jsx(qa,{title:F||"N/A",placement:"top",arrow:!0,children:e.jsx(x,{variant:"body2",className:"max-w-[200px] truncate text-gray-600",children:F||"N/A"})})},{id:"login_status",label:"Login Status",sortable:!0,render:F=>e.jsx(Me,{icon:F==="success"?e.jsx(mt,{}):e.jsx(Ct,{}),label:F==="success"?"Success":"Failed",size:"small",variant:"outlined",color:F==="success"?"success":"error"})},{id:"failure_reason",label:"Failure Reason",sortable:!1,render:F=>e.jsx(x,{variant:"body2",className:"text-gray-600",children:F||"N/A"})},...l||c?[{id:"action",label:"Action",sortable:!1,render:(F,z)=>e.jsx("div",{className:"!flex !gap-2 !items-center",children:l&&e.jsx(Vt,{onClick:()=>E(z.id),tooltip:"Delete login history",itemName:"login history",confirmDelete:!0})})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Login History"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Monitor login activities across your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Logins",value:v,icon:e.jsx(B4,{className:"w-6 h-6"}),color:"blue",isLoading:u}),e.jsx(fe,{title:"Successful",value:N,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:u}),e.jsx(fe,{title:"Failed",value:C,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:u}),e.jsx(fe,{title:"Today's Logins",value:P,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:u})]}),h&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load login history. Please try again."}),e.jsx(ot,{data:f,columns:L,actions:c?e.jsxs("div",{className:"flex justify-between gap-3 items-center flex-wrap",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(ts,{placeholder:"Search by IP, device, OS, or user...",value:t,onChange:M,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:F=>r(F.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Successful"}),e.jsx(Z,{value:"inactive",children:"Failed"})]})]}),e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(Xt,{title:"Export Login History",description:"Are you sure you want to export the current login history data to Excel? This will include all filtered results.",onConfirm:A,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:j.isPending,children:j.isPending?"Exporting...":"Export"})})})]}):!1,getRowId:F=>F.id,initialOrderBy:"login_time",loading:u,totalCount:b,page:w,rowsPerPage:o,onPageChange:T,isPermission:c,emptyMessage:t?`No login history found matching "${t}"`:"No login history found in the system"})]})},QSe=async t=>{try{return(await ie.get("/routes",{params:t})).data}catch(s){throw s}},ZSe=async t=>{try{return(await ie.get(`/routes/${t}`)).data}catch(s){throw s}},XSe=async t=>(await ie.post("/routes",t)).data,JSe=async(t,s)=>(await ie.put(`/routes/${t}`,s)).data,e3e=async(t,s)=>(await ie({method:"DELETE",url:`/routes/${t}`,data:{force:s||void 0}})).data,Bo={all:["routes"],lists:()=>[...Bo.all,"list"],list:t=>[...Bo.lists(),t],details:()=>[...Bo.all,"detail"],detail:t=>[...Bo.details(),t]},l1=(t,s)=>tt({queryKey:Bo.list(t||{}),queryFn:()=>QSe(t),staleTime:300*1e3,...s}),t3e=t=>tt({queryKey:Bo.detail(t),queryFn:()=>ZSe(t),enabled:!!t,staleTime:300*1e3}),s3e=t=>{const s=is();return De({mutationFn:XSe,loadingMessage:"Creating route...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Bo.lists()})},onError:t?.onError})},a3e=t=>{const s=is();return De({mutationFn:({id:a,...r})=>JSe(a,r),loadingMessage:"Updating route...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Bo.lists()}),s.invalidateQueries({queryKey:Bo.detail(r.id)})},onError:t?.onError})},r3e=t=>{const s=is();return De({mutationFn:({id:a,force:r})=>e3e(a,r),loadingMessage:"Deleting route...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Bo.lists()})},onError:t?.onError})},n3e=async t=>{try{return(await ie.get("/zones",{params:t})).data}catch(s){throw console.error("Error fetching zones:",s),new Error(s.response?.data?.message||"Failed to fetch zones")}},i3e=async t=>{try{return(await ie.post("/zones",t)).data}catch(s){throw console.error("Error creating zone:",s),new Error(s.response?.data?.message||"Failed to create zone")}},o3e=async(t,s)=>{try{return(await ie.put(`/zones/${t}`,s)).data}catch(a){throw console.error("Error updating zone:",a),new Error(a.response?.data?.message||"Failed to update zone")}},l3e=async t=>{try{return(await ie.delete(`/zones/${t}`)).data}catch(s){throw console.error("Error deleting zone:",s),new Error(s.response?.data?.message||"Failed to delete zone")}},c3e=async t=>{try{return(await ie.get("/zone/supervisors",{params:t?{search:t}:{}})).data}catch(s){throw console.error("Error fetching supervisors:",s),new Error(s.response?.data?.message||"Failed to fetch supervisors")}},Li={all:["zones"],lists:()=>[...Li.all,"list"],list:t=>[...Li.lists(),t],details:()=>[...Li.all,"detail"],detail:t=>[...Li.details(),t],supervisors:()=>[...Li.all,"supervisors"],supervisor:t=>[...Li.supervisors(),t]},Jl=(t,s)=>tt({queryKey:Li.list(t||{}),queryFn:()=>n3e(t),staleTime:300*1e3,...s}),d3e=t=>tt({queryKey:Li.supervisor(""),queryFn:()=>c3e(t),staleTime:600*1e3}),u3e=t=>{const s=is();return De({mutationFn:i3e,loadingMessage:"Creating zone...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Li.lists()})},onError:t?.onError})},m3e=t=>{const s=is();return De({mutationFn:({id:a,...r})=>o3e(a,r),loadingMessage:"Updating zone...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Li.lists()}),s.invalidateQueries({queryKey:Li.detail(r.id)})},onError:t?.onError})},p3e=t=>{const s=is();return De({mutationFn:l3e,loadingMessage:"Deleting zone...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Li.lists()})},onError:t?.onError})},h3e=nt({file:hs().required("Please select a file to import")}),f3e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:h3e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("customers")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"customers",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Customers",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple customers. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successfully Imported"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-2",children:"Errors Found:"}),e.jsx(y,{className:"!max-h-40 !overflow-y-auto !bg-red-50 !p-3 !rounded-lg",children:n.errors.map((v,N)=>e.jsx(x,{variant:"caption",className:"!text-red-700 !block !mb-1",children:v},N))})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),a&&o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import"}),n&&o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,className:"!bg-green-600 hover:!bg-green-700",children:"Done"})]})]})})})},x3e=nt().shape({name:me().required("Outlet name is required").min(2,"Outlet name must be at least 2 characters").max(100,"Outlet name must be at most 100 characters"),zones_id:me().nullable(),type:me().nullable(),contact_person:me().max(100,"Contact person name must be at most 100 characters").nullable(),phone_number:me().matches(/^[\+]?[1-9][\d]{0,15}$/,"Invalid phone number format").nullable(),email:me().email("Invalid email format").nullable(),address:me().max(500,"Address must be at most 500 characters").nullable(),city:me().max(100,"City must be at most 100 characters").nullable(),state:me().max(100,"State must be at most 100 characters").nullable(),zipcode:me().max(20,"Zipcode must be at most 20 characters").nullable(),latitude:me().matches(/^-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6}$/,"Invalid latitude format").nullable(),longitude:me().matches(/^-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6}$/,"Invalid longitude format").nullable(),credit_limit:me().matches(/^\d+(\.\d{1,2})?$/,"Invalid credit limit format").nullable(),outstanding_amount:me().matches(/^\d+(\.\d{1,2})?$/,"Invalid outstanding amount format").nullable(),route_id:me().nullable(),salesperson_id:me().nullable(),last_visit_date:me().nullable(),is_active:me().oneOf(["Y","N"],"Status must be Y or N").required("Status is required")}),g3e=({selectedOutlet:t,setSelectedOutlet:s,drawerOpen:a,setDrawerOpen:r,routes:n,zones:i})=>{const o=!!t,l=()=>{s(null),r(!1),w.resetForm()},c=Y_e(),m=G_e(),{data:u}=VS({limit:1e3,is_active:"Y"}),{data:h}=HS({limit:1e3,is_active:"Y"}),f=u?.data||[],b=h?.data||[],w=xt({initialValues:{name:t?.name||"",short_name:t?.short_name||"",zones_id:t?.zones_id?.toString()||"",customer_type_id:t?.customer_type_id?.toString()||"",customer_channel_id:t?.customer_channel_id?.toString()||"",type:t?.type||"Retail",internal_code_one:t?.internal_code_one||"",internal_code_two:t?.internal_code_two||"",contact_person:t?.contact_person||"",phone_number:t?.phone_number||"",email:t?.email||"",address:t?.address||"",city:t?.city||"",state:t?.state||"",zipcode:t?.zipcode||"",latitude:t?.latitude||"",longitude:t?.longitude||"",credit_limit:t?.credit_limit||"",outstanding_amount:t?.outstanding_amount||"0",route_id:t?.route_id?.toString()||"",salesperson_id:t?.salesperson_id?.toString()||"",nfc_tag_code:t?.nfc_tag_code||"",last_visit_date:t?.last_visit_date?t.last_visit_date.split("T")[0]:"",is_active:t?.is_active||"Y"},validationSchema:x3e,enableReinitialize:!0,onSubmit:async S=>{try{const j={name:S.name,short_name:S.short_name,zones_id:S.zones_id?Number(S.zones_id):void 0,customer_type_id:S.customer_type_id?Number(S.customer_type_id):void 0,customer_channel_id:S.customer_channel_id?Number(S.customer_channel_id):void 0,type:S.type,internal_code_one:S.internal_code_one,internal_code_two:S.internal_code_two,contact_person:S.contact_person,phone_number:S.phone_number,email:S.email,address:S.address,city:S.city,state:S.state,zipcode:S.zipcode,latitude:S.latitude,longitude:S.longitude,credit_limit:S.credit_limit,outstanding_amount:S.outstanding_amount||"0",route_id:S.route_id?Number(S.route_id):void 0,salesperson_id:S.salesperson_id?Number(S.salesperson_id):void 0,nfc_tag_code:S.nfc_tag_code,last_visit_date:S.last_visit_date?new Date(S.last_visit_date).toISOString():void 0,is_active:S.is_active};o&&t?await m.mutateAsync({id:t.id,...j}):await c.mutateAsync(j),l()}catch(j){console.log("Error saving customer:",j)}}});return e.jsx(it,{open:a,setOpen:l,title:o?"Edit Outlet":"Create Outlet",children:e.jsx(y,{className:"!p-4",children:e.jsxs("form",{onSubmit:w.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Outlet Name",placeholder:"Enter outlet name",formik:w,required:!0}),e.jsx(oe,{name:"short_name",label:"Short Name",placeholder:"Enter short name",formik:w}),e.jsx(_e,{name:"zones_id",label:"Zone",formik:w,children:i.map(S=>e.jsx(Z,{value:S.id.toString(),children:S.name},S.id))}),e.jsx(_e,{name:"customer_type_id",label:"Customer Type",formik:w,children:f.map(S=>e.jsx(Z,{value:S.id.toString(),children:S.type_name},S.id))}),e.jsx(_e,{name:"customer_channel_id",label:"Customer Channel",formik:w,children:b.map(S=>e.jsx(Z,{value:S.id.toString(),children:S.channel_name},S.id))}),e.jsx(oe,{name:"contact_person",label:"Contact Person",placeholder:"Enter contact person name",formik:w}),e.jsx(oe,{name:"phone_number",label:"Phone Number",placeholder:"Enter phone number",formik:w}),e.jsx(oe,{name:"email",label:"Email",type:"email",placeholder:"Enter email address",formik:w}),e.jsx(oe,{name:"internal_code_one",label:"Internal Code One",placeholder:"Enter internal code one",formik:w}),e.jsx(oe,{name:"internal_code_two",label:"Internal Code Two",placeholder:"Enter internal code two",formik:w}),e.jsx(_e,{name:"route_id",label:"Route",formik:w,children:n.map(S=>e.jsxs(Z,{value:S.id.toString(),children:[S.name," (",S.code,")"]},S.id))}),e.jsx(pn,{name:"salesperson_id",label:"Sales Person",formik:w}),e.jsx(oe,{name:"city",label:"City",placeholder:"Enter city",formik:w}),e.jsx(oe,{name:"state",label:"State",placeholder:"Enter state",formik:w}),e.jsx(oe,{name:"zipcode",label:"Zip Code",placeholder:"Enter zip code",formik:w}),e.jsx(oe,{name:"latitude",label:"Latitude",placeholder:"Enter latitude",formik:w}),e.jsx(oe,{name:"longitude",label:"Longitude",placeholder:"Enter longitude",formik:w}),e.jsx(oe,{name:"credit_limit",label:"Credit Limit",placeholder:"Enter credit limit",formik:w}),e.jsx(oe,{name:"outstanding_amount",label:"Outstanding Amount",placeholder:"Enter outstanding amount",formik:w}),e.jsx(oe,{name:"last_visit_date",label:"Last Visit Date",type:"date",formik:w}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:w,required:!0})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"address",label:"Address",placeholder:"Enter full address",formik:w,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-4",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:l,disabled:c.isPending||m.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",loading:c.isPending||m.isPending,children:c.isPending?"Creating...":m.isPending?"Updating...":o?"Update Outlet":"Create Outlet"})]})]})})})},y3e=["Retail","Wholesale","Corporate","Industrial","Healthcare","Automotive","Restaurant","Service","Manufacturing","Distribution"],b3e=t=>{switch((t||"").toLowerCase()){case"retail":return"primary";case"wholesale":return"success";case"corporate":return"warning";case"industrial":return"default";case"healthcare":return"info";case"automotive":return"error";case"restaurant":return"warning";case"service":return"secondary";case"manufacturing":return"info";case"distribution":return"success";default:return"default"}},PF=t=>{switch((t||"").toLowerCase()){case"retail":return e.jsx(vb,{className:"w-4 h-4"});case"wholesale":return e.jsx(la,{className:"w-4 h-4"});case"corporate":return e.jsx(vs,{className:"w-4 h-4"});case"industrial":return e.jsx(vs,{className:"w-4 h-4"});case"healthcare":return e.jsx(la,{className:"w-4 h-4"});case"automotive":return e.jsx(vs,{className:"w-4 h-4"});case"restaurant":return e.jsx(la,{className:"w-4 h-4"});case"service":return e.jsx(vs,{className:"w-4 h-4"});case"manufacturing":return e.jsx(vs,{className:"w-4 h-4"});case"distribution":return e.jsx(vs,{className:"w-4 h-4"});default:return e.jsx(vb,{className:"w-4 h-4"})}},v3e=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState("all"),[l,c]=g.useState(null),[m,u]=g.useState(!1),[h,f]=g.useState(!1),[b,w]=g.useState(1),[S]=g.useState(10),{isCreate:j,isUpdate:v,isDelete:N,isRead:C}=Qe("outlet"),{data:P}=_u(),{data:E}=Zl({limit:1e3}),T=P?.data?.currency_id||"",{data:A,isFetching:L,error:F}=Ep({search:s,page:b,limit:S,isActive:r==="all"?void 0:r==="active"?"Y":"N",type:i==="all"?void 0:i},{enabled:C}),{data:z}=l1({page:1,limit:100,status:"active"}),{data:I}=Jl({page:1,limit:100,isActive:"Y"}),Q=A?.data||[],Y=z?.data||[],B=I?.data||[],q=A?.meta?.total||0,V=(A?.meta?.page||1)-1,G=K_e(),H=ls(),D=A?.stats?.total_customers??0,R=A?.stats?.active_customers??0,$=A?.stats?.total_credit_limit??0,W=A?.stats?.total_outstanding_amount??0,J=g.useCallback(()=>{c(null),u(!0)},[]),te=g.useCallback(le=>{c(le),u(!0)},[]),ee=g.useCallback(async le=>{try{await G.mutateAsync(le)}catch(pe){console.error("Error deleting outlet:",pe)}},[G]),ae=g.useCallback(le=>{a(le),w(1)},[]),ce=g.useCallback(async()=>{try{const le={search:s,isActive:r==="all"?void 0:r==="active"?"Y":"N",type:i==="all"?void 0:i};await H.mutateAsync({tableName:"customers",filters:le})}catch(le){console.error("Error exporting customers:",le)}},[H,s,r,i]),he=le=>{w(le+1)},ne=le=>(E?.data||[]).find(Se=>Se.id===Number(le))?.code||"USD",xe=le=>{if(!le)return"N/A";const pe=ne(T);return new Intl.NumberFormat("en-US",{style:"currency",currency:pe}).format(parseFloat(le))},ge=[{id:"name",label:"Outlet Name",render:(le,pe)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",onClick:()=>t(`/masters/outlets/${pe.id}`),children:[e.jsx(ut,{alt:pe.name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(vb,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:pe.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:pe.code})]})]})},{id:"customer_type.type_name",label:"Outlet Type",render:(le,pe)=>e.jsx(Me,{icon:PF(pe.customer_type?.type_name||""),label:pe.customer_type?.type_name||"N/A",size:"small",variant:"outlined",className:"!capitalize !px-1",color:b3e(pe.customer_type?.type_name||"")})},{id:"customer_channel.channel_name",label:"Outlet Channel",render:(le,pe)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:pe.customer_channel?.channel_name||"N/A"})},{id:"email",label:"Email",render:(le,pe)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:pe.email||e.jsx("span",{className:"!text-gray-500 !text-xs italic",children:"No Email"})})},{id:"row.city",label:"Location",render:(le,pe)=>e.jsx(y,{children:e.jsxs(y,{className:"flex items-center text-gray-900",children:[e.jsx(Ks,{className:"w-4 h-4 text-gray-400 mr-2"}),pe.city&&pe.state&&pe.zipcode?`${pe.city}${pe.state?`, ${pe.state}`:""}${pe.zipcode?`, ${pe.zipcode}`:""}`:pe.city?pe.city:pe.state?pe.state:pe.zipcode?pe.zipcode:"N/A"]})})},{id:"customer_routes.name",label:"Route",render:(le,pe)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:pe.customer_routes?.name||e.jsx("span",{className:"!text-gray-500 !text-xs italic",children:"No Route"})})},{id:"customer_users.name",label:"Salesperson",render:(le,pe)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:pe.customer_users?.name||e.jsx("span",{className:"!text-gray-500 !text-xs italic",children:"No Salesperson"})})},{id:"credit_limit",label:"Credit Limit",render:(le,pe)=>e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:xe(pe.credit_limit??"0")})},{id:"outstanding_amount",label:"Outstanding",render:(le,pe)=>e.jsx(x,{variant:"body2",className:"!text-red-600 !font-medium",children:xe(pe.outstanding_amount)})},{id:"is_active",label:"Status",render:le=>e.jsx(Me,{icon:le==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:le==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:le==="Y"?"success":"error"})},...v||N||C?[{id:"action",label:"Actions",sortable:!1,render:(le,pe)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[v&&e.jsx(rs,{onClick:()=>te(pe),tooltip:`Edit ${pe.name}`}),N&&e.jsx(Vt,{onClick:()=>ee(pe.id),tooltip:`Delete ${pe.name}`,itemName:pe.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Outlets Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage customer outlets, distributors, retailers, and wholesalers"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Outlets",value:D,icon:e.jsx(vb,{className:"w-6 h-6"}),color:"blue",isLoading:L}),e.jsx(fe,{title:"Active Outlets",value:R,icon:e.jsx(go,{className:"w-6 h-6"}),color:"green",isLoading:L}),e.jsx(fe,{title:"Total Credit Limit",value:xe($.toString()),icon:e.jsx(_p,{className:"w-6 h-6"}),color:"purple",isLoading:L}),e.jsx(fe,{title:"Outstanding Amount",value:xe(W.toString()),icon:e.jsx(zc,{className:"w-6 h-6"}),color:"red",isLoading:L})]}),F&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load outlets. Please try again."}),e.jsx(ot,{data:Q,columns:ge,actions:C||j?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex items-center flex-wrap gap-2",children:C&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Outlets",value:s,onChange:ae,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:r,onChange:le=>n(le.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:i,onChange:le=>o(le.target.value),className:"!min-w-40",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Types"}),y3e.map(le=>e.jsx(Z,{value:le,children:le},le))]})]})}),j&&e.jsxs("div",{className:"flex items-center gap-2",children:[C&&e.jsx(Xt,{title:"Export Customers",description:"Are you sure you want to export the current customers data to Excel? This will include all filtered results.",onConfirm:ce,confirmText:"Export",cancelText:"Cancel",children:e.jsx(K,{variant:"outlined",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(St,{}),disabled:H.isPending,children:H.isPending?"Exporting...":"Export"})}),C&&e.jsx(K,{variant:"outlined",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(fs,{}),onClick:()=>f(!0),children:"Import"}),e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:J,children:"Create"})]})]}):!1,getRowId:le=>le.id,initialOrderBy:"name",loading:L,totalCount:q,page:V,rowsPerPage:S,isPermission:C,onPageChange:he,emptyMessage:s?`No outlets found matching "${s}"`:"No outlets found in the system"}),e.jsx(g3e,{selectedOutlet:l,setSelectedOutlet:c,drawerOpen:m,setDrawerOpen:u,routes:Y,zones:B}),e.jsx(f3e,{drawerOpen:h,setDrawerOpen:f})]})};function gm(t){const{children:s,value:a,index:r,...n}=t;return e.jsx("div",{role:"tabpanel",hidden:a!==r,id:`outlet-tabpanel-${r}`,"aria-labelledby":`outlet-tab-${r}`,...n,children:a===r&&e.jsx(y,{children:s})})}const j3e=()=>{const{id:t}=Kr(),[s,a]=g.useState(0),{data:r,isLoading:n,error:i}=V_e(Number(t)),o=r?.data,l=o?.customer||o||{},c=o?.documents||[],m=o?.assets||[],u=o?.transactions||[],h=o?.feedbacks||[],f=o?.complaints||[],b=(T,A)=>{a(A)};if(n)return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !items-center !gap-3",children:e.jsxs(y,{className:"!flex-1",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(X,{variant:"text",width:200,height:32}),e.jsx(X,{variant:"rectangular",width:80,height:24,className:"!rounded-full"}),e.jsx(X,{variant:"rectangular",width:100,height:24,className:"!rounded-full"})]}),e.jsx(X,{variant:"text",width:300,height:20,className:"!mt-1"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[1,2,3,4].map(T=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(X,{variant:"text",width:100,height:16}),e.jsx(X,{variant:"text",width:120,height:28,className:"!mt-1"}),e.jsx(X,{variant:"text",width:80,height:16,className:"!mt-2"})]}),e.jsx(X,{variant:"circular",width:48,height:48})]})},T))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx(X,{variant:"text",width:150,height:24,className:"!mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(T=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{variant:"circular",width:16,height:16}),e.jsxs("div",{className:"flex-1",children:[e.jsx(X,{variant:"text",width:80,height:16}),e.jsx(X,{variant:"text",width:120,height:20,className:"!mt-1"})]})]},T))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx(X,{variant:"text",width:150,height:24,className:"!mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(T=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{variant:"circular",width:16,height:16}),e.jsxs("div",{className:"flex-1",children:[e.jsx(X,{variant:"text",width:80,height:16}),e.jsx(X,{variant:"text",width:120,height:20,className:"!mt-1"})]})]},T))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(y,{children:e.jsxs(Zo,{value:0,children:[e.jsx(As,{icon:e.jsx(Jw,{}),label:"Assets (0)",iconPosition:"start",className:"!py-0 !min-h-14",disabled:!0}),e.jsx(As,{icon:e.jsx(Yf,{}),label:"Asset History (0)",iconPosition:"start",className:"!py-0 !min-h-14",disabled:!0}),e.jsx(As,{icon:e.jsx(b8,{}),label:"Transactions (0)",iconPosition:"start",className:"!py-0 !min-h-14",disabled:!0}),e.jsx(As,{icon:e.jsx(x8,{}),label:"Feedbacks (0)",iconPosition:"start",className:"!py-0 !min-h-14",disabled:!0}),e.jsx(As,{icon:e.jsx(Xw,{}),label:"Complaints (0)",iconPosition:"start",className:"!py-0 !min-h-14",disabled:!0}),e.jsx(As,{icon:e.jsx(Zw,{}),label:"Attachments (0)",iconPosition:"start",className:"!py-0 !min-h-14",disabled:!0})]})}),e.jsxs(y,{className:"p-4",children:[e.jsx(y,{className:"mb-4",children:e.jsx(X,{variant:"rectangular",width:"100%",height:48,className:"!rounded"})}),[1,2,3,4,5].map(T=>e.jsxs(y,{className:"flex items-center gap-4 mb-3",children:[e.jsx(X,{variant:"rectangular",width:40,height:40,className:"!rounded"}),e.jsx(X,{variant:"text",width:150,height:20}),e.jsx(X,{variant:"text",width:120,height:20}),e.jsx(X,{variant:"text",width:100,height:20}),e.jsx(X,{variant:"text",width:100,height:20}),e.jsx(X,{variant:"rectangular",width:80,height:24,className:"!rounded-full"})]},T))]})]})]});if(i||!l)return e.jsx(y,{className:"p-6",children:e.jsx(lt,{severity:"error",children:"Failed to load outlet details. Please try again."})});const w=[{id:"document_type",label:"Document Type",render:(T,A)=>e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"!bg-blue-100 !text-blue-600 !w-8 !h-8",children:e.jsx(ks,{className:"w-4 h-4"})}),e.jsx(x,{variant:"body2",className:"!font-medium",children:A.document_type})]})},{id:"document_number",label:"Document Number",render:T=>e.jsx(x,{variant:"body2",children:T||e.jsx("span",{className:"text-gray-400",children:"N/A"})})},{id:"issue_date",label:"Issue Date",render:T=>e.jsx(x,{variant:"body2",children:T?Ie(T):"-"})},{id:"expiry_date",label:"Expiry Date",render:T=>e.jsx(x,{variant:"body2",children:T?Ie(T):"-"})},{id:"is_verified",label:"Verification Status",render:T=>e.jsx(Me,{icon:T?e.jsx(_le,{fontSize:"small"}):e.jsx(vg,{fontSize:"small"}),label:T?"Verified":"Pending",size:"small",color:T?"success":"warning"})},{id:"is_active",label:"Status",render:T=>e.jsx(Me,{icon:T==="Y"?e.jsx(mt,{}):e.jsx(f8,{}),label:T==="Y"?"Active":"Inactive",size:"small",color:T==="Y"?"success":"error"})}],S=[{id:"code",label:"Asset Code",render:(T,A)=>e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"!bg-purple-100 !text-purple-600 !w-8 !h-8",children:e.jsx(Wt,{className:"w-4 h-4"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!font-medium",children:A.code}),A.asset_types&&e.jsx(x,{variant:"caption",className:"!text-gray-500",children:A.asset_types.name})]})]})},{id:"brand",label:"Brand & Model",render:(T,A)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",children:A.brand||e.jsx("span",{className:"text-gray-400",children:"No Brand"})}),A.model&&e.jsx(x,{variant:"caption",className:"!text-gray-500",children:A.model})]})},{id:"serial_number",label:"Serial Number",render:T=>e.jsx(x,{variant:"body2",children:T||e.jsx("span",{className:"text-gray-400",children:"N/A"})})},{id:"capacity",label:"Capacity",render:T=>e.jsx(x,{variant:"body2",children:T||e.jsx("span",{className:"text-gray-400",children:"-"})})},{id:"status",label:"Status",render:T=>e.jsx(Me,{label:T||"working",size:"small",className:"!capitalize",color:T==="working"?"success":"default"})},{id:"install_date",label:"Install Date",render:T=>e.jsx(x,{variant:"body2",children:T?Ie(T):"-"})}],j=[{id:"change_date",label:"Change Date",render:T=>e.jsx(x,{variant:"body2",children:T?Ie(T):"-"})},{id:"change_type",label:"Change Type",render:T=>e.jsx(Me,{label:T||"Update",size:"small",className:"!capitalize"})},{id:"old_status",label:"Old Status",render:T=>e.jsx(x,{variant:"body2",className:"!text-gray-600",children:T||"-"})},{id:"new_status",label:"New Status",render:T=>e.jsx(x,{variant:"body2",className:"!font-medium",children:T||"-"})},{id:"remarks",label:"Remarks",render:T=>e.jsx(x,{variant:"body2",className:"!max-w-xs !truncate",children:T||e.jsx("span",{className:"text-gray-400",children:"No remarks"})})}],v=m.flatMap(T=>(T.customer_assets_history||[]).map(A=>({...A,asset_code:T.code,asset_type:T.asset_types?.name}))),N=[{id:"transaction_date",label:"Date",render:T=>e.jsx(x,{variant:"body2",children:T?Ie(T):"-"})},{id:"transaction_type",label:"Type",render:T=>e.jsx(Me,{label:T||"N/A",size:"small",className:"!capitalize"})},{id:"amount",label:"Amount",render:T=>e.jsx(x,{variant:"body2",className:"!font-medium",children:T?M(T):"-"})},{id:"status",label:"Status",render:T=>e.jsx(Me,{label:T||"Pending",size:"small",className:"!capitalize",color:T==="completed"||T==="paid"?"success":T==="pending"?"warning":"default"})},{id:"description",label:"Description",render:T=>e.jsx(x,{variant:"body2",className:"!max-w-xs !truncate",children:T||e.jsx("span",{className:"text-gray-400",children:"No description"})})}],C=[{id:"feedback_date",label:"Date",render:T=>e.jsx(x,{variant:"body2",children:T?Ie(T):"-"})},{id:"rating",label:"Rating",render:T=>e.jsxs(y,{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(A=>e.jsx(x,{variant:"body2",className:A<=(T||0)?"!text-yellow-500":"!text-gray-300",children:""},A)),T&&e.jsxs(x,{variant:"caption",className:"!text-gray-500 !ml-1",children:["(",T,")"]})]})},{id:"feedback_type",label:"Type",render:T=>e.jsx(Me,{label:T||"General",size:"small",className:"!capitalize"})},{id:"comment",label:"Comment",render:T=>e.jsx(x,{variant:"body2",className:"!max-w-xs !truncate",children:T||e.jsx("span",{className:"text-gray-400",children:"No comment"})})},{id:"status",label:"Status",render:T=>e.jsx(Me,{label:T||"Active",size:"small",className:"!capitalize",color:T==="resolved"?"success":"default"})}],P=[{id:"complaint_date",label:"Date",render:T=>e.jsx(x,{variant:"body2",children:T?Ie(T):"-"})},{id:"complaint_type",label:"Type",render:T=>e.jsx(Me,{label:T||"General",size:"small",className:"!capitalize",color:"error"})},{id:"priority",label:"Priority",render:T=>e.jsx(Me,{label:T||"Medium",size:"small",className:"!capitalize",color:T==="high"||T==="urgent"?"error":T==="medium"?"warning":"default"})},{id:"description",label:"Description",render:T=>e.jsx(x,{variant:"body2",className:"!max-w-xs !truncate",children:T||e.jsx("span",{className:"text-gray-400",children:"No description"})})},{id:"status",label:"Status",render:T=>e.jsx(Me,{label:T||"Open",size:"small",className:"!capitalize",color:T==="resolved"||T==="closed"?"success":T==="in_progress"?"warning":"error"})}],E=T=>{switch((T||"").toLowerCase()){case"retail":return"primary";case"wholesale":return"success";case"corporate":return"warning";case"industrial":return"default";case"healthcare":return"info";case"automotive":return"error";case"restaurant":return"warning";case"service":return"secondary";case"manufacturing":return"info";case"distribution":return"success";default:return"default"}},M=T=>T?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(parseFloat(T)):"0";return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !items-center !gap-3",children:e.jsxs(y,{className:"!flex-1",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(x,{variant:"h5",className:"!font-bold !text-gray-900",children:l.name}),e.jsx(Me,{icon:l.is_active==="Y"?e.jsx(mt,{}):e.jsx(f8,{}),label:l.is_active==="Y"?"Active":"Inactive",size:"small",color:l.is_active==="Y"?"success":"error"}),l.type&&e.jsx(Me,{icon:PF(l.type||""),label:l.type||"N/A",size:"small",variant:"outlined",className:"!capitalize !px-1",color:E(l.type||"")})]}),e.jsxs(x,{variant:"body2",className:"!text-gray-500 !mt-1",children:["Code: ",l.code,l.short_name&&`  Short: ${l.short_name}`,l.email&&`  ${l.email}`,l.nfc_tag_code&&`  NFC: ${l.nfc_tag_code}`]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Customer Type",value:l.customer_type?.type_name||"N/A",icon:e.jsx(_n,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Category",value:l.customer_category?.category_name||"N/A",icon:e.jsx(wle,{className:"w-6 h-6"}),color:"purple"}),e.jsx(fe,{title:"Zone",value:l.customer_zones?.name||"N/A",icon:e.jsx(fle,{className:"w-6 h-6"}),color:"green"}),e.jsx(fe,{title:"Channel",value:l.customer_channel?.channel_name||"N/A",icon:e.jsx(jle,{className:"w-6 h-6"}),color:"orange"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(nA,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Contact Person"}),e.jsx(x,{variant:"body1",className:"!font-medium",children:l.contact_person||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ble,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Phone Number"}),e.jsx(x,{variant:"body1",className:"!font-medium",children:l.phone_number||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ks,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Address"}),e.jsx(x,{variant:"body1",className:"!font-medium",children:l.address||"N/A"}),l.city&&e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:[l.city,", ",l.state," ",l.zipcode]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-4",children:"Business Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_p,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Credit Limit"}),e.jsx(x,{variant:"body1",className:"!font-medium",children:l.credit_limit?M(l.credit_limit):"Not Set"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(gle,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Outstanding Amount"}),e.jsx(x,{variant:"body1",className:"!font-medium",children:l.outstanding_amount?M(l.outstanding_amount):"0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_s,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Last Visit Date"}),e.jsx(x,{variant:"body1",className:"!font-medium",children:l.last_visit_date?Ie(l.last_visit_date):"No visits yet"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(y,{children:e.jsxs(Zo,{value:s,onChange:b,className:"!min-h-14",children:[e.jsx(As,{icon:e.jsx(Jw,{}),label:`Assets (${m.length})`,iconPosition:"start",className:"!py-0 !min-h-14",sx:{"& .MuiButtonBase-root":{padding:1}}}),e.jsx(As,{icon:e.jsx(Yf,{}),label:`Asset History (${v.length})`,iconPosition:"start",className:"!py-0 !min-h-14",sx:{"& .MuiButtonBase-root":{padding:1}}}),e.jsx(As,{icon:e.jsx(b8,{}),label:`Transactions (${u.length})`,iconPosition:"start",className:"!py-0 !min-h-14",sx:{"& .MuiButtonBase-root":{padding:1}}}),e.jsx(As,{icon:e.jsx(x8,{}),label:`Feedbacks (${h.length})`,iconPosition:"start",className:"!py-0 !min-h-14",sx:{"& .MuiButtonBase-root":{padding:1}}}),e.jsx(As,{icon:e.jsx(Xw,{}),label:`Complaints (${f.length})`,iconPosition:"start",className:"!py-0 !min-h-14",sx:{"& .MuiButtonBase-root":{padding:1}}}),e.jsx(As,{icon:e.jsx(Zw,{}),label:`Attachments (${c.length})`,iconPosition:"start",className:"!py-0 !min-h-14",sx:{"& .MuiButtonBase-root":{padding:1}}})]})}),e.jsx(gm,{value:s,index:0,children:e.jsx(ot,{data:m,columns:S,getRowId:T=>T.id,initialOrderBy:"createdate",emptyMessage:"No assets found for this outlet",pagination:!1})}),e.jsx(gm,{value:s,index:1,children:e.jsx(ot,{data:v,columns:j,getRowId:T=>T.id,initialOrderBy:"change_date",emptyMessage:"No asset history found",pagination:!1})}),e.jsx(gm,{value:s,index:2,children:e.jsx(ot,{data:u,columns:N,getRowId:T=>T.id,initialOrderBy:"transaction_date",emptyMessage:"No transactions found for this outlet",pagination:!1})}),e.jsx(gm,{value:s,index:3,children:e.jsx(ot,{data:h,columns:C,getRowId:T=>T.id,initialOrderBy:"feedback_date",emptyMessage:"No feedbacks found for this outlet",pagination:!1})}),e.jsx(gm,{value:s,index:4,children:e.jsx(ot,{data:f,columns:P,getRowId:T=>T.id,initialOrderBy:"complaint_date",emptyMessage:"No complaints found for this outlet",pagination:!1})}),e.jsx(gm,{value:s,index:5,children:e.jsx(ot,{data:c,columns:w,getRowId:T=>T.id,initialOrderBy:"createdate",emptyMessage:"No attachments found for this outlet",pagination:!1})})]})]})},N3e=async t=>{try{return(await ie.get("/customer-groups",{params:t})).data}catch(s){throw s}},w3e=async t=>(await ie.post("/customer-groups",t)).data,_3e=async(t,s)=>(await ie.put(`/customer-groups/${t}`,s)).data,S3e=async t=>(await ie.delete(`/customer-groups/${t}`)).data,Fl={all:["outletGroups"],lists:()=>[...Fl.all,"list"],list:t=>[...Fl.lists(),t],details:()=>[...Fl.all,"detail"],detail:t=>[...Fl.details(),t]},C3e=(t,s)=>tt({queryKey:Fl.list(t||{}),queryFn:()=>N3e(t),staleTime:300*1e3,...s}),P3e=t=>{const s=is();return De({mutationFn:w3e,loadingMessage:"Creating outlet group...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Fl.lists()})},onError:t?.onError})},k3e=t=>{const s=is();return De({mutationFn:({id:a,...r})=>_3e(a,r),loadingMessage:"Updating outlet group...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Fl.lists()}),s.invalidateQueries({queryKey:Fl.detail(r.id)})},onError:t?.onError})},E3e=t=>{const s=is();return De({mutationFn:S3e,loadingMessage:"Deleting outlet group...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Fl.lists()})},onError:t?.onError})},T3e=nt().shape({name:me().required("Outlet group name is required").min(2,"Outlet group name must be at least 2 characters").max(255,"Outlet group name must be at most 255 characters"),description:me().max(500,"Description must be at most 500 characters").nullable(),discount_percentage:Ge().min(0,"Discount percentage must be at least 0").max(100,"Discount percentage must be at most 100").nullable(),credit_terms:Ge().min(0,"Credit terms must be at least 0").integer("Credit terms must be a whole number").nullable(),payment_terms:me().max(100,"Payment terms must be at most 100 characters").nullable(),price_group:me().max(50,"Price group must be at most 50 characters").nullable(),is_active:me().oneOf(["Y","N"],"Status must be Y or N").required("Status is required"),customerGroups:il().of(nt().shape({customer_id:Ge().required("Customer ID is required"),is_active:me().oneOf(["Y","N"]).default("Y")})).min(1,"At least one customer must be selected").required("Customers are required")}),M3e=({selectedOutletGroup:t,setSelectedOutletGroup:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),f.resetForm()},o=P3e(),l=k3e(),{data:c,isLoading:m}=Ep({page:1,limit:1e3,isActive:"Y"}),u=c?.data||[],h=()=>t?.members?u.filter(b=>t.members?.some(w=>w.customer_id===b.id)):[],f=xt({initialValues:{name:t?.name||"",description:t?.description||"",discount_percentage:t?.discount_percentage||"",credit_terms:t?.credit_terms||"",payment_terms:t?.payment_terms||"",price_group:t?.price_group||"",is_active:t?.is_active||"Y",selectedCustomers:h(),customerGroups:t?.members?.map(b=>({customer_id:b.customer_id,is_active:"Y"}))||[]},validationSchema:T3e,enableReinitialize:!0,onSubmit:async b=>{try{const w={name:b.name,description:b.description,discount_percentage:b.discount_percentage?Number(b.discount_percentage):void 0,credit_terms:b.credit_terms?Number(b.credit_terms):void 0,payment_terms:b.payment_terms,price_group:b.price_group,is_active:b.is_active,customerGroups:b.customerGroups};n&&t?await l.mutateAsync({id:t.id,...w}):await o.mutateAsync(w),i()}catch(w){console.error("Error saving outlet group:",w)}}});return g.useEffect(()=>{f.values.selectedCustomers&&f.setFieldValue("customerGroups",f.values.selectedCustomers.map(b=>({customer_id:b.id,is_active:"Y"})))},[f.values.selectedCustomers]),e.jsx(it,{open:a,setOpen:i,title:n?"Edit Outlet Group":"Create Outlet Group",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Group Name",placeholder:"Enter outlet group name",formik:f,required:!0}),e.jsx(oe,{name:"discount_percentage",label:"Discount Percentage (%)",type:"number",placeholder:"Enter discount percentage",formik:f}),e.jsx(oe,{name:"credit_terms",label:"Credit Terms (Days)",type:"number",placeholder:"Enter credit terms in days",formik:f}),e.jsx(oe,{name:"payment_terms",label:"Payment Terms",placeholder:"Enter payment terms",formik:f}),e.jsx(oe,{name:"price_group",label:"Price Group",placeholder:"Enter price group",formik:f}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:f,required:!0})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter group description",formik:f,multiline:!0,rows:3})}),e.jsxs(y,{className:"md:!col-span-2",children:[e.jsxs(x,{variant:"body2",className:"!mb-2 !font-medium !text-gray-700",children:["Select Customers ",e.jsx("span",{className:"!text-red-500",children:"*"})]}),e.jsx(Ir,{multiple:!0,size:"small",id:"customers-autocomplete",options:u,value:f.values.selectedCustomers,onChange:(b,w)=>{f.setFieldValue("selectedCustomers",w)},getOptionLabel:b=>`${b.name}`,loading:m,renderInput:b=>e.jsx(mr,{...b,placeholder:"Select customers",error:f.touched.customerGroups&&!!f.errors.customerGroups,helperText:f.touched.customerGroups&&typeof f.errors.customerGroups=="string"?f.errors.customerGroups:""}),slotProps:{chip:{size:"small",color:"primary",variant:"outlined"}},renderOption:(b,w)=>e.jsx(y,{component:"li",...b,children:e.jsxs(y,{className:"!flex !flex-col",children:[e.jsx(x,{variant:"body2",className:"!font-medium",children:w.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:[w.code,"  ",w.type||"N/A"," "," ",w.city||"N/A"]})]})}),isOptionEqualToValue:(b,w)=>b.id===w.id}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !mt-1",children:[f.values.selectedCustomers?.length||0," customer(s) selected"]})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3 !items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",loading:o.isPending||l.isPending,children:o.isPending?"Creating...":l.isPending?"Updating...":n?"Update Outlet Group":"Create Outlet Group"})]})]})})})},D3e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(1),[u]=g.useState(10),{isCreate:h,isUpdate:f,isDelete:b,isRead:w}=Qe("outlet-group"),{formatCurrency:S}=Ya(),{data:j,isFetching:v,error:N}=C3e({search:t,page:c,limit:u,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:w}),C=j?.data||[],P=j?.meta?.total||0,E=(j?.meta?.page||1)-1,M=E3e(),T=j?.stats?.total_groups??C.length,A=j?.stats?.active_groups??C.filter(G=>G.is_active==="Y").length,L=j?.stats?.inactive_groups??C.filter(G=>G.is_active==="N").length,F=Number(j?.stats?.avg_discount)?.toFixed(2)??0,z=g.useCallback(()=>{i(null),l(!0)},[]),I=g.useCallback(G=>{i(G),l(!0)},[]),Q=g.useCallback(async G=>{try{await M.mutateAsync(G)}catch(H){console.error("Error deleting outlet group:",H)}},[M]),Y=g.useCallback(G=>{s(G),m(1)},[]),B=G=>{m(G+1)},q=G=>G==null?"N/A":`${S(Number(G||"0"))}%`,V=[{id:"name",label:"Group Name",render:(G,H)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:H.name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(la,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:H.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:H.code})]})]})},{id:"description",label:"Description",render:(G,H)=>e.jsx(x,{variant:"body2",className:"!text-gray-700 !max-w-xs !truncate",children:H.description||"No Description"})},{id:"discount_percentage",label:"Discount %",render:(G,H)=>e.jsxs(y,{className:"flex items-center",children:[e.jsx(np,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:H.discount_percentage?q(H.discount_percentage):"0"})]})},{id:"credit_terms",label:"Credit Terms",render:(G,H)=>e.jsxs(y,{className:"flex items-center",children:[e.jsx(_s,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx(x,{variant:"body2",className:"!text-gray-700",children:H.credit_terms?`${H.credit_terms} days`:"N/A"})]})},{id:"payment_terms",label:"Payment Terms",render:(G,H)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:H.payment_terms||"N/A"})},{id:"price_group",label:"Price Group",render:(G,H)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:H.price_group||"N/A"})},{id:"members_count",label:"Members",render:(G,H)=>e.jsxs(y,{className:"flex items-center",children:[e.jsx(la,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:H.members?.length||0})]})},{id:"is_active",label:"Status",render:G=>e.jsx(Me,{icon:G==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:G==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:G==="Y"?"success":"error"})},...f||b||w?[{id:"action",label:"Actions",sortable:!1,render:(G,H)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[f&&e.jsx(rs,{onClick:()=>I(H),tooltip:`Edit ${H.name}`}),b&&e.jsx(Vt,{onClick:()=>Q(H.id),tooltip:`Delete ${H.name}`,itemName:H.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Outlet Groups Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage outlet groups with pricing, discounts, and credit terms"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Groups",value:T,icon:e.jsx(la,{className:"w-6 h-6"}),color:"blue",isLoading:v}),e.jsx(fe,{title:"Active Groups",value:A,icon:e.jsx(go,{className:"w-6 h-6"}),color:"green",isLoading:v}),e.jsx(fe,{title:"Inactive Groups",value:L,icon:e.jsx(la,{className:"w-6 h-6"}),color:"red",isLoading:v}),e.jsx(fe,{title:"Avg Discount %",value:F,icon:e.jsx(np,{className:"w-6 h-6"}),color:"purple",isLoading:v})]}),N&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load outlet groups. Please try again."}),e.jsx(ot,{data:C,columns:V,actions:w||h?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex items-center flex-wrap gap-2",children:w&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Outlet Groups",value:t,onChange:Y,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:G=>r(G.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),h&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:z,children:"Add Outlet Group"})]}):!1,getRowId:G=>G.id,initialOrderBy:"name",loading:v,totalCount:P,page:E,rowsPerPage:u,isPermission:w,onPageChange:B,emptyMessage:t?`No outlet groups found matching "${t}"`:"No outlet groups found in the system"}),e.jsx(M3e,{selectedOutletGroup:n,setSelectedOutletGroup:i,drawerOpen:o,setDrawerOpen:l})]})},R3e=async t=>{try{return(await ie.get("/price-lists",{params:t})).data}catch(s){throw console.error("Error fetching price lists:",s),new Error(s.response?.data?.message||"Failed to fetch price lists")}},A3e=async t=>{try{return(await ie.post("/price-lists",t)).data.data}catch(s){throw console.error("Error creating price list:",s),new Error(s.response?.data?.message||"Failed to create price list")}},I3e=async(t,s)=>{try{return(await ie.put(`/price-lists/${t}`,s)).data.data}catch(a){throw console.error("Error updating price list:",a),new Error(a.response?.data?.message||"Failed to update price list")}},O3e=async t=>{try{await ie.delete(`/price-lists/${t}`)}catch(s){throw console.error("Error deleting price list:",s),new Error(s.response?.data?.message||"Failed to delete price list")}},_f={all:["price-lists"],lists:()=>[..._f.all,"list"],list:t=>[..._f.lists(),t],details:()=>[..._f.all,"detail"],detail:t=>[..._f.details(),t]},F3e=(t,s)=>tt({queryKey:_f.list(t),queryFn:()=>R3e(t),staleTime:300*1e3,...s}),L3e=()=>De({mutationFn:A3e,invalidateQueries:["price-lists"],loadingMessage:"Creating price list..."}),$3e=()=>De({mutationFn:({id:t,data:s})=>I3e(t,s),invalidateQueries:["price-lists"],loadingMessage:"Updating price list..."}),z3e=()=>De({mutationFn:O3e,invalidateQueries:["price-lists"],loadingMessage:"Deleting price list..."}),q3e=nt({file:hs().required("Please select a file to import")}),B3e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:q3e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("pricelists")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"pricelists",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Price Lists",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple price lists. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},U3e=nt({product_id:Ge().required("Product is required").positive("Product ID must be positive"),unit_price:Ge().required("Unit price is required").min(0,"Unit price must be non-negative"),uom:me().nullable().max(50,"UOM must not exceed 50 characters"),discount_percent:Ge().nullable().min(0,"Discount percent must be non-negative").max(100,"Discount percent cannot exceed 100"),effective_from:Ca().nullable().transform((t,s)=>s===""||s===null?null:t),effective_to:Ca().nullable().transform((t,s)=>s===""||s===null?null:t).when("effective_from",(t,s)=>t&&t[0]?s.min(t[0],"Effective to date must be after effective from date"):s),is_active:me().oneOf(["Y","N"],"Status must be Y or N").default("Y")}),V3e=nt({name:me().required("Name is required").min(2,"Name must be at least 2 characters").max(100,"Name must not exceed 100 characters").trim(),description:me().nullable().max(255,"Description must not exceed 255 characters").trim(),currency_code:me().nullable().max(10,"Currency code must not exceed 10 characters").trim().uppercase(),valid_from:Ca().nullable().transform((t,s)=>s===""||s===null?null:t),valid_to:Ca().nullable().transform((t,s)=>s===""||s===null?null:t).when("valid_from",(t,s)=>t&&t[0]?s.min(t[0],"Valid to date must be after valid from date"):s),is_active:me().oneOf(["Y","N"],"Status must be Y or N").default("Y"),priceListItems:il().of(U3e).nullable()}),H3e=async t=>{try{return(await ie.get("/products",{params:t})).data}catch(s){throw s}},W3e=async t=>{try{return(await ie.get(`/products/${t}`)).data}catch(s){throw s}},Y3e=async t=>(await ie.post("/products",t)).data,G3e=async(t,s)=>(await ie.put(`/products/${t}`,s)).data,K3e=async t=>(await ie.delete(`/products/${t}`)).data,Q3e=async t=>{try{return(await ie.get("/products-dropdown",{params:t})).data}catch(s){throw s}},Uo={all:["products"],lists:()=>[...Uo.all,"list"],list:t=>[...Uo.lists(),t],details:()=>[...Uo.all,"detail"],detail:t=>[...Uo.details(),t]},Cu=(t,s)=>tt({queryKey:Uo.list(t||{}),queryFn:()=>H3e(t),staleTime:300*1e3,...s}),Z3e=t=>tt({queryKey:Uo.detail(t),queryFn:()=>W3e(t),enabled:!!t,staleTime:300*1e3}),X3e=t=>{const s=is();return De({mutationFn:Y3e,loadingMessage:"Creating product...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Uo.lists()})},onError:t?.onError})},J3e=t=>{const s=is();return De({mutationFn:({id:a,...r})=>G3e(a,r),loadingMessage:"Updating product...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Uo.lists()}),s.invalidateQueries({queryKey:Uo.detail(r.id)})},onError:t?.onError})},eCe=t=>{const s=is();return De({mutationFn:K3e,loadingMessage:"Deleting product...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Uo.lists()})},onError:t?.onError})},tCe=(t,s)=>tt({queryKey:["products","dropdown",t],queryFn:()=>Q3e(t),staleTime:300*1e3,...s}),bo=({name:t="product_id",label:s="Product",required:a=!1,fullWidth:r=!0,size:n="small",formik:i,setValue:o,value:l,nameToSearch:c="",onChange:m,className:u,disabled:h=!1})=>{const[f,b]=g.useState(""),[w,S]=g.useState(""),[j,v]=g.useState(""),[N,C]=g.useState(!1),[P,E]=g.useState(null),[M,T]=g.useState(!1),A=g.useRef(!1),L=i?i.values[t]:l,F=L?typeof L=="number"?L.toString():String(L).trim():"";g.useEffect(()=>{const $=setTimeout(()=>{N||(v(w),w&&T(!0))},300);return()=>clearTimeout($)},[w,N]);const z=vt.useMemo(()=>M||f?j:F&&c&&!M?c:j,[j,c,M,F,f]),I=F?Number(F):void 0,{data:Q,isLoading:Y}=tCe({search:z,product_id:I&&!z?I:void 0}),B=(Q?.data||[]).map($=>({id:$.id,name:$.name,code:$.code,batch_lot:$.batch_lot}));g.useEffect(()=>{if(!A.current&&F&&!P&&!Y&&B.length>0){const $=B.find(W=>W.id.toString()===F);$&&(A.current=!0,E($),f||b($.name),T(!0),setTimeout(()=>{A.current=!1},100))}},[F,Y,B.length]);const q=vt.useMemo(()=>{if(!F)return null;const $=B.find(W=>W.id.toString()===F);return $||(P&&P.id.toString()===F?P:null)},[F,B,P]);g.useEffect(()=>{!F&&(P||f)&&(b(""),E(null),T(!1))},[F]);const V=vt.useMemo(()=>{const $=[];q&&(B.some(te=>te.id===q.id)||$.push(q));const W=new Set;return q&&W.add(q.id),B.forEach(J=>{W.has(J.id)||($.push(J),W.add(J.id))}),$},[B,q]),G=i?.touched?.[t]&&i?.errors?.[t],H=typeof G=="string"?G:void 0,D=g.useCallback(($,W)=>{C(!0),E(W);const J=W?W.id.toString():"";i?i.setFieldValue(t,J):o&&o(J),m&&m($,W),W?b(W.name):(b(""),v("")),setTimeout(()=>C(!1),100)},[i,t,o,m]),R=g.useCallback(($,W,J)=>{if(J==="input"){N?b(W):(b(W),S(W));return}J==="clear"&&(b(""),S(""),v(""))},[N]);return e.jsx(Ir,{options:V,getOptionLabel:$=>$.name,value:q,loading:Y,onChange:D,inputValue:f,onInputChange:R,isOptionEqualToValue:($,W)=>$.id===W.id,size:n,fullWidth:r,className:u,disabled:h,filterOptions:$=>$,renderOption:($,W)=>g.createElement(y,{component:"li",...$,key:W.id,className:"!flex !items-center !gap-2 cursor-pointer py-1 px-2 hover:!bg-gray-50"},e.jsx(ut,{src:W.name||"mkx",alt:W.name,className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{children:[e.jsx("p",{className:"!text-gray-900 !text-sm",children:W.name||""}),W.code&&e.jsx("p",{className:"!text-gray-500 !text-xs",children:W.code})]})),renderInput:$=>e.jsx(mr,{...$,label:s,required:a,error:!!G,helperText:H,onBlur:i?.handleBlur,name:t,size:n,className:u,disabled:h}),noOptionsText:j&&!Y?"No products found":"Type to search products",loadingText:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ki,{thickness:6,size:16,color:"inherit"})," Loading products..."]})})},sCe=({selectedPriceList:t,setSelectedPriceList:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,[i,o]=g.useState([]),l=L3e(),c=$3e(),m=()=>{s(null),r(!1),o([]),u.resetForm()};vt.useEffect(()=>{if(t?.pricelist_item){const v=t.pricelist_item.map(N=>({product_id:N.product_id,unit_price:N.unit_price,uom:N.uom||"",discount_percent:N.discount_percent||"",effective_from:N.effective_from?N.effective_from.split("T")[0]:"",effective_to:N.effective_to?N.effective_to.split("T")[0]:"",is_active:N.is_active}));o(v)}else o([])},[t]);const u=xt({initialValues:{name:t?.name||"",description:t?.description||"",currency_code:t?.currency_code||"INR",valid_from:t?.valid_from?t.valid_from.split("T")[0]:"",valid_to:t?.valid_to?t.valid_to.split("T")[0]:"",is_active:t?.is_active||"Y"},validationSchema:V3e,enableReinitialize:!0,onSubmit:async v=>{try{const N={...v,currency_code:v.currency_code||"INR",valid_from:v.valid_from,valid_to:v.valid_to,description:v.description,priceListItems:i.filter(C=>C.product_id!=="").map(C=>({product_id:Number(C.product_id),unit_price:C.unit_price,uom:C.uom,discount_percent:C.discount_percent,effective_from:C.effective_from,effective_to:C.effective_to,is_active:C.is_active}))};n&&t?await c.mutateAsync({id:t.id,data:N}):await l.mutateAsync(N),m()}catch(N){console.error("Error submitting price list:",N)}}}),h=()=>{const v={product_id:"",unit_price:"",uom:"",discount_percent:"",effective_from:"",effective_to:"",is_active:"Y"};o([...i,v])},f=v=>{const N=i.filter((C,P)=>P!==v);o(N)},b=(v,N,C)=>{const P=[...i];P[v]={...P[v],[N]:C},o(P)},w=i.map((v,N)=>({...v,_index:N})),S=[{id:"product_id",label:"Product",render:(v,N)=>e.jsx(bo,{value:N.product_id,onChange:(C,P)=>b(N._index,"product_id",P?P.id:""),size:"small",className:"!min-w-40"})},{id:"unit_price",label:"Unit Price",render:(v,N)=>e.jsx(oe,{value:N.unit_price,onChange:C=>b(N._index,"unit_price",C.target.value),placeholder:"0.00",type:"number",size:"small",className:"!min-w-24"})},{id:"uom",label:"UOM",render:(v,N)=>e.jsx(oe,{value:N.uom,onChange:C=>b(N._index,"uom",C.target.value),placeholder:"Unit",size:"small",className:"!min-w-20"})},{id:"discount_percent",label:"Discount %",render:(v,N)=>e.jsx(oe,{value:N.discount_percent,onChange:C=>b(N._index,"discount_percent",C.target.value),placeholder:"0",type:"number",size:"small",className:"!min-w-20"})},{id:"effective_from",label:"Effective From",render:(v,N)=>e.jsx(oe,{value:N.effective_from,onChange:C=>b(N._index,"effective_from",C.target.value),type:"date",size:"small",className:"!min-w-32"})},{id:"effective_to",label:"Effective To",render:(v,N)=>e.jsx(oe,{value:N.effective_to,onChange:C=>b(N._index,"effective_to",C.target.value),type:"date",size:"small",className:"!min-w-32"})},{id:"is_active",label:"Status",render:(v,N)=>e.jsxs(_e,{value:N.is_active,onChange:C=>b(N._index,"is_active",C.target.value),size:"small",className:"!min-w-20",children:[e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]})},{id:"actions",label:"Actions",sortable:!1,render:(v,N)=>e.jsx(Vt,{onClick:()=>f(N._index),tooltip:"Remove item",confirmDelete:!0,itemName:"price list item"})}],j=[{value:"INR",label:"INR - Indian Rupee"},{value:"USD",label:"USD - US Dollar"},{value:"EUR",label:"EUR - Euro"},{value:"GBP",label:"GBP - British Pound"},{value:"JPY",label:"JPY - Japanese Yen"},{value:"AUD",label:"AUD - Australian Dollar"},{value:"CAD",label:"CAD - Canadian Dollar"}];return e.jsx(it,{open:a,setOpen:m,title:n?"Edit Price List":"Create Price List",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:u.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"name",label:"Price List Name",placeholder:"Enter price list name",formik:u,required:!0})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter description",formik:u,multiline:!0,rows:3})}),e.jsx(_e,{name:"currency_code",label:"Currency",formik:u,required:!0,children:j.map(v=>e.jsx(Z,{value:v.value,children:v.label},v.value))}),e.jsxs(_e,{name:"is_active",label:"Status",formik:u,required:!0,children:[e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]}),e.jsx(oe,{name:"valid_from",label:"Valid From",type:"date",formik:u,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(oe,{name:"valid_to",label:"Valid To",type:"date",formik:u,slotProps:{inputLabel:{shrink:!0}}})]}),e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !justify-between !items-center",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"Price List Items"}),e.jsx(K,{type:"button",variant:"outlined",startIcon:e.jsx(os,{}),onClick:h,size:"small",children:"Add Item"})]}),i.length>0&&e.jsx(ot,{compact:!0,data:w,columns:S,getRowId:v=>v._index.toString(),pagination:!1,sortable:!1,emptyMessage:"No price list items added yet."}),i.length===0&&e.jsx(y,{className:"!text-center !py-8 !text-gray-500",children:e.jsx(x,{variant:"body2",children:'No price list items added yet. Click "Add Item" to get started.'})})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:m,disabled:l.isPending||c.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:l.isPending||c.isPending,children:l.isPending||c.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},aCe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("pricelist"),{data:v,isFetching:N,error:C}=F3e({search:t,page:u,limit:f,status:a==="all"?void 0:a},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=v?.stats||{},A=z3e(),L=ls(),F=T.total_price_lists??P.length,z=T.active_price_lists??P.filter(R=>R.is_active==="Y").length,I=T.inactive_price_lists??P.filter(R=>R.is_active==="N").length,Q=T.new_price_lists_this_month??0,Y=g.useCallback(()=>{i(null),l(!0)},[]),B=g.useCallback(R=>{i(R),l(!0)},[]),q=g.useCallback(async R=>{try{await A.mutateAsync(R)}catch($){console.error("Error deleting price list:",$)}},[A]),V=g.useCallback(R=>{s(R),h(1)},[]),G=R=>{h(R+1)},H=g.useCallback(async()=>{try{const R={search:t,status:a==="all"?void 0:a};await L.mutateAsync({tableName:"pricelists",filters:R})}catch(R){console.error("Error exporting price lists:",R)}},[L,t,a]),D=[{id:"price_list_info",label:"Price List Info",render:(R,$)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:$.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(ks,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:$.name}),$.description&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:$.description})]})]})},{id:"currency_code",label:"Currency",render:(R,$)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(wr,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs font-medium",children:$.currency_code||"INR"})]})},{id:"validity_period",label:"Validity Period",render:(R,$)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx(y,{className:"text-xs",children:$.valid_from||$.valid_to?e.jsx("span",{children:$.valid_from&&$.valid_to?e.jsxs(e.Fragment,{children:[Ie($.valid_from),e.jsx("span",{className:"mx-1 text-gray-400",children:""}),Ie($.valid_to)]}):$.valid_from?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400",children:"From"})," ",Ie($.valid_from)]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400",children:"Until"})," ",Ie($.valid_to)]})}):e.jsx("span",{className:"text-gray-400 italic",children:"No validity period"})})]})},{id:"items_count",label:"Items",render:(R,$)=>e.jsx(Me,{label:`${$.pricelist_item?.length||0} items`,size:"small",variant:"outlined",color:"primary"})},{id:"is_active",label:"Status",render:(R,$)=>e.jsx(Me,{icon:$.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:$.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:$.is_active==="Y"?"success":"error"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(R,$)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>B($),tooltip:`Edit ${$.name}`}),S&&e.jsx(Vt,{onClick:()=>q($.id),tooltip:`Delete ${$.name}`,itemName:$.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Price Lists"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage pricing lists and product pricing strategies"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Price Lists",value:F,icon:e.jsx(ks,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Lists",value:z,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Lists",value:I,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"This Month",value:Q,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load price lists. Please try again."}),e.jsx(ot,{data:P,columns:D,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Price Lists...",value:t,onChange:V,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:R=>r(R.target.value),className:"!w-32",children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Price Lists",description:"Are you sure you want to export the current price lists data to Excel? This will include all filtered results.",onConfirm:H,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:L.isPending,children:L.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Y,children:"Create"})]})]}):!1,getRowId:R=>R.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:G,emptyMessage:t?`No price lists found matching "${t}"`:"No price lists found in the system"}),e.jsx(sCe,{selectedPriceList:n,setSelectedPriceList:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(B3e,{drawerOpen:c,setDrawerOpen:m})]})},rCe=nt({file:hs().required("Please select a file to import")}),nCe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:rCe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("product_categories")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"product_categories",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Product Categories",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple product categories. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},iCe=nt({category_name:me().min(2,"Category name must be at least 2 characters").max(100,"Category name must not exceed 100 characters").required("Category name is required"),description:me().max(500,"Description must not exceed 500 characters").optional(),is_active:me().oneOf(["Y","N"],"Status must be either Active or Inactive").required("Status is required")}),oCe=({selectedProductCategory:t,setSelectedProductCategory:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=m4e(),l=p4e(),c=xt({initialValues:{category_name:t?.category_name||"",description:t?.description||"",is_active:t?.is_active||"Y"},validationSchema:iCe,enableReinitialize:!0,onSubmit:async m=>{try{const u={category_name:m.category_name,description:m.description,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,data:u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving product category:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Product Category":"Create Product Category",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"category_name",label:"Category Name",placeholder:"Enter category name",formik:c,required:!0})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter description",formik:c,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:[o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," "]})]})]})})})},lCe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("product-category"),{data:v,isFetching:N,error:C}=Tp({search:t,page:u,limit:f,status:a==="all"?void 0:a==="active"?"active":"inactive"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=h4e(),A=ls(),L=v?.stats?.total_product_categories??0,F=v?.stats?.active_product_categories??0,z=v?.stats?.inactive_product_categories??0,I=v?.stats?.new_product_categories_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting product category:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,is_active:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"product_categories",filters:D})}catch(D){console.error("Error exporting product categories:",D)}},[A,t,a]),H=[{id:"category_name",label:"Category Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.category_name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:R.category_name}),R.description&&e.jsx(qa,{title:R.description,placement:"top",arrow:!0,children:e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",title:R.description,sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",maxWidth:"300px",cursor:"help"},children:R.description})})]})]})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.category_name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.category_name}`,itemName:R.category_name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Product Categories Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage product categories for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Categories",value:L,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Categories",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Categories",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load product categories. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Product Categories...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>{r(D.target.value),h(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Product Categories",description:"Are you sure you want to export the current product categories data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"category_name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No product categories found matching "${t}"`:"No product categories found in the system"}),e.jsx(oCe,{selectedProductCategory:n,setSelectedProductCategory:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(nCe,{drawerOpen:c,setDrawerOpen:m})]})},cCe=nt({file:hs().required("Please select a file to import")}),dCe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:cCe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("products")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"products",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Products",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple products. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},uCe=async t=>{try{return(await ie.get("/product-sub-categories",{params:t})).data}catch(s){throw console.error("Error fetching product sub categories:",s),new Error(s.response?.data?.message||"Failed to fetch product sub categories")}},mCe=async t=>{try{return(await ie.post("/product-sub-categories",t)).data.data}catch(s){throw console.error("Error creating product sub category:",s),new Error(s.response?.data?.message||"Failed to create product sub category")}},pCe=async(t,s)=>{try{return(await ie.put(`/product-sub-categories/${t}`,s)).data.data}catch(a){throw console.error("Error updating product sub category:",a),new Error(a.response?.data?.message||"Failed to update product sub category")}},hCe=async t=>{try{await ie.delete(`/product-sub-categories/${t}`)}catch(s){throw console.error("Error deleting product sub category:",s),new Error(s.response?.data?.message||"Failed to delete product sub category")}},Sf={all:["product-sub-categories"],lists:()=>[...Sf.all,"list"],list:t=>[...Sf.lists(),t],details:()=>[...Sf.all,"detail"],detail:t=>[...Sf.details(),t]},kF=(t,s)=>tt({queryKey:Sf.list(t),queryFn:()=>uCe(t),staleTime:300*1e3,...s}),fCe=()=>De({mutationFn:mCe,invalidateQueries:["product-sub-categories"],loadingMessage:"Creating product sub category..."}),xCe=()=>De({mutationFn:({id:t,data:s})=>pCe(t,s),invalidateQueries:["product-sub-categories"],loadingMessage:"Updating product sub category..."}),gCe=()=>De({mutationFn:hCe,invalidateQueries:["product-sub-categories"],loadingMessage:"Deleting product sub category..."}),yCe=async t=>{try{return(await ie.get("/route-types",{params:t})).data}catch(s){throw console.error("Error fetching route types:",s),new Error(s.response?.data?.message||"Failed to fetch route types")}},bCe=async t=>{try{return(await ie.post("/route-types",t)).data.data}catch(s){throw console.error("Error creating route type:",s),new Error(s.response?.data?.message||"Failed to create route type")}},vCe=async(t,s)=>{try{return(await ie.put(`/route-types/${t}`,s)).data.data}catch(a){throw console.error("Error updating route type:",a),new Error(a.response?.data?.message||"Failed to update route type")}},jCe=async t=>{try{await ie.delete(`/route-types/${t}`)}catch(s){throw console.error("Error deleting route type:",s),new Error(s.response?.data?.message||"Failed to delete route type")}},Cf={all:["routeTypes"],lists:()=>[...Cf.all,"list"],list:t=>[...Cf.lists(),t],details:()=>[...Cf.all,"detail"],detail:t=>[...Cf.details(),t]},WS=(t,s)=>tt({queryKey:Cf.list(t),queryFn:()=>yCe(t),staleTime:300*1e3,...s}),NCe=()=>De({mutationFn:t=>bCe(t),invalidateQueries:["routeTypes"],loadingMessage:"Creating route type..."}),wCe=()=>De({mutationFn:({id:t,data:s})=>vCe(t,s),invalidateQueries:["routeTypes"],loadingMessage:"Updating route type..."}),_Ce=()=>De({mutationFn:jCe,invalidateQueries:["routeTypes"],loadingMessage:"Deleting route type..."}),SCe=async t=>{try{return(await ie.get("/tax-masters",{params:t})).data}catch(s){throw console.error("Error fetching tax masters:",s),new Error(s.response?.data?.message||"Failed to fetch tax masters")}},CCe=async t=>{try{return(await ie.get(`/tax-masters/${t}`)).data.data}catch(s){throw console.error("Error fetching tax master:",s),new Error(s.response?.data?.message||"Failed to fetch tax master")}},PCe=async t=>{try{return(await ie.post("/tax-masters",t)).data}catch(s){throw console.error("Error creating tax master:",s),new Error(s.response?.data?.message||"Failed to create tax master")}},kCe=async(t,s)=>{try{return(await ie.put(`/tax-masters/${t}`,s)).data}catch(a){throw console.error("Error updating tax master:",a),new Error(a.response?.data?.message||"Failed to update tax master")}},ECe=async t=>{try{await ie.delete(`/tax-masters/${t}`)}catch(s){throw console.error("Error deleting tax master:",s),new Error(s.response?.data?.message||"Failed to delete tax master")}},Rm={all:["tax-master"],lists:()=>[...Rm.all,"list"],list:t=>[...Rm.lists(),t],details:()=>[...Rm.all,"detail"],detail:t=>[...Rm.details(),t]},EF=(t,s)=>tt({queryKey:Rm.list(t),queryFn:()=>SCe(t),staleTime:300*1e3,...s}),TCe=(t,s)=>tt({queryKey:Rm.detail(t),queryFn:()=>CCe(t),enabled:!!t,staleTime:300*1e3,...s}),MCe=()=>De({mutationFn:async t=>await PCe(t),invalidateQueries:["tax-master"],loadingMessage:"Creating tax master..."}),DCe=()=>De({mutationFn:async({id:t,data:s})=>await kCe(t,s),invalidateQueries:["tax-master"],loadingMessage:"Updating tax master..."}),RCe=()=>De({mutationFn:ECe,invalidateQueries:["tax-master"],loadingMessage:"Deleting tax master..."}),ACe=async t=>{try{return(await ie.get("/unit-measurement",{params:t})).data}catch(s){throw console.error("Error fetching unit of measurement:",s),new Error(s.response?.data?.message||"Failed to fetch unit of measurement")}},ICe=async t=>{try{return(await ie.post("/unit-measurement",t)).data.data}catch(s){throw console.error("Error creating unit of measurement:",s),new Error(s.response?.data?.message||"Failed to create unit of measurement")}},OCe=async(t,s)=>{try{return(await ie.put(`/unit-measurement/${t}`,s)).data.data}catch(a){throw console.error("Error updating unit of measurement:",a),new Error(a.response?.data?.message||"Failed to update unit of measurement")}},FCe=async t=>{try{await ie.delete(`/unit-measurement/${t}`)}catch(s){throw console.error("Error deleting unit of measurement:",s),new Error(s.response?.data?.message||"Failed to delete unit of measurement")}},Pf={all:["unit-of-measurement"],lists:()=>[...Pf.all,"list"],list:t=>[...Pf.lists(),t],details:()=>[...Pf.all,"detail"],detail:t=>[...Pf.details(),t]},c1=(t,s)=>tt({queryKey:Pf.list(t),queryFn:()=>ACe(t),staleTime:300*1e3,...s}),LCe=()=>De({mutationFn:ICe,invalidateQueries:["unit-of-measurement"],loadingMessage:"Creating unit of measurement..."}),$Ce=()=>De({mutationFn:({id:t,data:s})=>OCe(t,s),invalidateQueries:["unit-of-measurement"],loadingMessage:"Updating unit of measurement..."}),zCe=()=>De({mutationFn:FCe,invalidateQueries:["unit-of-measurement"],loadingMessage:"Deleting unit of measurement..."}),qCe=async t=>{try{return(await ie.get("/subunits",{params:t})).data}catch(s){throw console.error("Error fetching sub unit of measurements:",s),new Error(s.response?.data?.message||"Failed to fetch sub unit of measurements")}},BCe=async t=>{try{return(await ie.post("/subunits",t)).data.data}catch(s){throw console.error("Error creating sub unit of measurement:",s),new Error(s.response?.data?.message||"Failed to create sub unit of measurement")}},UCe=async(t,s)=>{try{return(await ie.put(`/subunits/${t}`,s)).data.data}catch(a){throw console.error("Error updating sub unit of measurement:",a),new Error(a.response?.data?.message||"Failed to update sub unit of measurement")}},VCe=async t=>{try{await ie.delete(`/subunits/${t}`)}catch(s){throw console.error("Error deleting sub unit of measurement:",s),new Error(s.response?.data?.message||"Failed to delete sub unit of measurement")}},HCe=async()=>{try{return(await ie.get("/subunits/lookup/units-of-measurement")).data.data}catch(t){throw console.error("Error fetching units of measurement:",t),new Error(t.response?.data?.message||"Failed to fetch units of measurement")}},WCe=async()=>{try{return(await ie.get("/subunits/lookup/products")).data.data}catch(t){throw console.error("Error fetching products:",t),new Error(t.response?.data?.message||"Failed to fetch products")}},Tc={all:["sub-unit-of-measurements"],lists:()=>[...Tc.all,"list"],list:t=>[...Tc.lists(),t],details:()=>[...Tc.all,"detail"],detail:t=>[...Tc.details(),t],lookup:()=>[...Tc.all,"lookup"]},TF=(t,s)=>tt({queryKey:Tc.list(t),queryFn:()=>qCe(t),staleTime:300*1e3,...s}),YCe=t=>tt({queryKey:[...Tc.lookup(),"units-of-measurement"],queryFn:HCe,staleTime:900*1e3,...t}),GCe=t=>tt({queryKey:[...Tc.lookup(),"products"],queryFn:WCe,staleTime:900*1e3,...t}),KCe=()=>De({mutationFn:BCe,invalidateQueries:["sub-unit-of-measurements"],loadingMessage:"Creating sub unit of measurement..."}),QCe=()=>De({mutationFn:({id:t,data:s})=>UCe(t,s),invalidateQueries:["sub-unit-of-measurements"],loadingMessage:"Updating sub unit of measurement..."}),ZCe=()=>De({mutationFn:VCe,invalidateQueries:["sub-unit-of-measurements"],loadingMessage:"Deleting sub unit of measurement..."}),XCe=nt().shape({name:me().required("Product name is required").min(1,"Product name must be at least 1 character").max(255,"Product name must be at most 255 characters"),description:me().max(1e3,"Description cannot exceed 1000 characters").nullable(),category_id:Ge().required("Category is required").min(1,"Please select a valid category"),sub_category_id:Ge().required("Sub-category is required").min(1,"Please select a valid sub-category"),brand_id:Ge().required("Brand is required").min(1,"Please select a valid brand"),unit_of_measurement:Ge().required("Unit of measurement is required").min(1,"Please select a valid unit of measurement"),base_price:Ge().min(0,"Base price must be at least 0").nullable(),tax_rate:Ge().min(0,"Tax rate must be at least 0").max(100,"Tax rate cannot exceed 100%").nullable(),route_type_id:Ge().min(1,"Please select a valid route type").nullable(),outlet_group_id:Ge().min(1,"Please select a valid outlet group").nullable(),tracking_type:me().oneOf(["None","Batch","Serial"],"Tracking type must be None, Batch, or Serial").nullable(),batch_lots_id:Ge().min(1,"Please select a valid batch lot").nullable(),is_active:me().oneOf(["Y","N"],"Status must be Y or N").required("Status is required")}),JCe=async t=>{try{return(await ie.get("/product-flavours",{params:t})).data}catch(s){throw console.error("Error fetching product flavours:",s),new Error(s.response?.data?.message||"Failed to fetch product flavours")}},e5e=async t=>{try{return(await ie.post("/product-flavours",t)).data}catch(s){throw console.error("Error creating product flavour:",s),new Error(s.response?.data?.message||"Failed to create product flavour")}},t5e=async(t,s)=>{try{return(await ie.put(`/product-flavours/${t}`,s)).data}catch(a){throw console.error("Error updating product flavour:",a),new Error(a.response?.data?.message||"Failed to update product flavour")}},s5e=async t=>{try{return(await ie.delete(`/product-flavours/${t}`)).data}catch(s){throw console.error("Error deleting product flavour:",s),new Error(s.response?.data?.message||"Failed to delete product flavour")}},a5e=async t=>{try{return(await ie.get("/product-flavours-dropdown",{params:t})).data}catch(s){throw console.error("Error fetching product flavours dropdown:",s),new Error(s.response?.data?.message||"Failed to fetch product flavours dropdown")}},r5e=async t=>{try{return(await ie.get("/product-shelf-life",{params:t})).data}catch(s){throw console.error("Error fetching product shelf life:",s),new Error(s.response?.data?.message||"Failed to fetch product shelf life")}},n5e=async t=>{try{return(await ie.post("/product-shelf-life",t)).data}catch(s){throw console.error("Error creating product shelf life:",s),new Error(s.response?.data?.message||"Failed to create product shelf life")}},i5e=async(t,s)=>{try{return(await ie.put(`/product-shelf-life/${t}`,s)).data}catch(a){throw console.error("Error updating product shelf life:",a),new Error(a.response?.data?.message||"Failed to update product shelf life")}},o5e=async t=>{try{return(await ie.delete(`/product-shelf-life/${t}`)).data}catch(s){throw console.error("Error deleting product shelf life:",s),new Error(s.response?.data?.message||"Failed to delete product shelf life")}},l5e=async t=>{try{return(await ie.get("/product-shelf-life-dropdown",{params:t})).data}catch(s){throw console.error("Error fetching product shelf life dropdown:",s),new Error(s.response?.data?.message||"Failed to fetch product shelf life dropdown")}},c5e=async t=>{try{return(await ie.get("/product-target-groups",{params:t})).data}catch(s){throw console.error("Error fetching product target groups:",s),new Error(s.response?.data?.message||"Failed to fetch product target groups")}},d5e=async t=>{try{return(await ie.post("/product-target-groups",t)).data}catch(s){throw console.error("Error creating product target group:",s),new Error(s.response?.data?.message||"Failed to create product target group")}},u5e=async(t,s)=>{try{return(await ie.put(`/product-target-groups/${t}`,s)).data}catch(a){throw console.error("Error updating product target group:",a),new Error(a.response?.data?.message||"Failed to update product target group")}},m5e=async t=>{try{return(await ie.delete(`/product-target-groups/${t}`)).data}catch(s){throw console.error("Error deleting product target group:",s),new Error(s.response?.data?.message||"Failed to delete product target group")}},p5e=async t=>{try{return(await ie.get("/product-target-groups-dropdown",{params:t})).data}catch(s){throw console.error("Error fetching product target groups dropdown:",s),new Error(s.response?.data?.message||"Failed to fetch product target groups dropdown")}},h5e=async t=>{try{return(await ie.get("/product-types",{params:t})).data}catch(s){throw console.error("Error fetching product types:",s),new Error(s.response?.data?.message||"Failed to fetch product types")}},f5e=async t=>{try{return(await ie.post("/product-types",t)).data}catch(s){throw console.error("Error creating product type:",s),new Error(s.response?.data?.message||"Failed to create product type")}},x5e=async(t,s)=>{try{return(await ie.put(`/product-types/${t}`,s)).data}catch(a){throw console.error("Error updating product type:",a),new Error(a.response?.data?.message||"Failed to update product type")}},g5e=async t=>{try{return(await ie.delete(`/product-types/${t}`)).data}catch(s){throw console.error("Error deleting product type:",s),new Error(s.response?.data?.message||"Failed to delete product type")}},y5e=async t=>{try{return(await ie.get("/product-types-dropdown",{params:t})).data}catch(s){throw console.error("Error fetching product types dropdown:",s),new Error(s.response?.data?.message||"Failed to fetch product types dropdown")}},b5e=async t=>{try{return(await ie.get("/product-volumes",{params:t})).data}catch(s){throw console.error("Error fetching product volumes:",s),new Error(s.response?.data?.message||"Failed to fetch product volumes")}},v5e=async t=>{try{return(await ie.post("/product-volumes",t)).data}catch(s){throw console.error("Error creating product volume:",s),new Error(s.response?.data?.message||"Failed to create product volume")}},j5e=async(t,s)=>{try{return(await ie.put(`/product-volumes/${t}`,s)).data}catch(a){throw console.error("Error updating product volume:",a),new Error(a.response?.data?.message||"Failed to update product volume")}},N5e=async t=>{try{return(await ie.delete(`/product-volumes/${t}`)).data}catch(s){throw console.error("Error deleting product volume:",s),new Error(s.response?.data?.message||"Failed to delete product volume")}},w5e=async t=>{try{return(await ie.get("/product-volumes-dropdown",{params:t})).data}catch(s){throw console.error("Error fetching product volumes dropdown:",s),new Error(s.response?.data?.message||"Failed to fetch product volumes dropdown")}},_5e=async t=>{try{return(await ie.get("/product-web-orders",{params:t})).data}catch(s){throw console.error("Error fetching product web orders:",s),new Error(s.response?.data?.message||"Failed to fetch product web orders")}},S5e=async t=>{try{return(await ie.post("/product-web-orders",t)).data}catch(s){throw console.error("Error creating product web order:",s),new Error(s.response?.data?.message||"Failed to create product web order")}},C5e=async(t,s)=>{try{return(await ie.put(`/product-web-orders/${t}`,s)).data}catch(a){throw console.error("Error updating product web order:",a),new Error(a.response?.data?.message||"Failed to update product web order")}},P5e=async t=>{try{return(await ie.delete(`/product-web-orders/${t}`)).data}catch(s){throw console.error("Error deleting product web order:",s),new Error(s.response?.data?.message||"Failed to delete product web order")}},k5e=async t=>{try{return(await ie.get("/product-web-orders-dropdown",{params:t})).data}catch(s){throw console.error("Error fetching product web orders dropdown:",s),new Error(s.response?.data?.message||"Failed to fetch product web orders dropdown")}},E5e=({selectedProduct:t,setSelectedProduct:s,drawerOpen:a,setDrawerOpen:r})=>{const[n,i]=g.useState([]),o=g.useRef(!1),l=!!t,c=()=>{s(null),r(!1),i([]),V.resetForm(),o.current=!1},m=X3e(),u=J3e(),{data:h}=kF({limit:1e3,status:"active"}),{data:f}=_F({limit:1e3,status:"active"}),{data:b}=c1({limit:1e3,status:"active"}),{data:w}=WS({limit:1e3,status:"active"}),{data:S}=EF({limit:1e3,isActive:"Y"}),j=h?.data||[],v=f?.data||[],N=b?.data||[],C=w?.data||[],P=S?.data||[],{data:E}=tt({queryKey:["product-types-dropdown"],queryFn:()=>y5e()}),{data:M}=tt({queryKey:["product-target-groups-dropdown"],queryFn:()=>p5e()}),{data:T}=tt({queryKey:["product-web-orders-dropdown"],queryFn:()=>k5e()}),{data:A}=tt({queryKey:["product-volumes-dropdown"],queryFn:()=>w5e()}),{data:L}=tt({queryKey:["product-flavours-dropdown"],queryFn:()=>a5e()}),{data:F}=tt({queryKey:["product-shelf-life-dropdown"],queryFn:()=>l5e()}),z=E?.data||[],I=M?.data||[],Q=T?.data||[],Y=A?.data||[],B=L?.data||[],q=F?.data||[],V=xt({initialValues:{name:t?.name||"",description:t?.description||"",category_id:t?.category_id||"",sub_category_id:t?.sub_category_id||"",brand_id:t?.brand_id||"",unit_of_measurement:t?.unit_of_measurement||"",subunit_id:t?.subunit_id||"",base_price:t?.base_price?Number(t.base_price):"",tax_id:t?.tax_id||"",route_type_id:t?.route_type_id||"",outlet_group_id:t?.outlet_group_id||"",tracking_type:t?.tracking_type||"None",product_type_id:t?.product_type_id||"",product_target_group_id:t?.product_target_group_id||"",product_web_order_id:t?.product_web_order_id||"",volume_id:t?.volume_id||"",flavour_id:t?.flavour_id||"",shelf_life_id:t?.shelf_life_id||"",weight_in_grams:t?.weight_in_grams?Number(t.weight_in_grams):"",volume_in_liters:t?.volume_in_liters?Number(t.volume_in_liters):"",is_active:t?.is_active||"Y"},validationSchema:XCe,enableReinitialize:!0,onSubmit:async R=>{try{const $={name:R.name,description:R.description,category_id:Number(R.category_id),sub_category_id:Number(R.sub_category_id),brand_id:Number(R.brand_id),unit_of_measurement:Number(R.unit_of_measurement),subunit_id:Number(R.subunit_id),base_price:R.base_price?Number(R.base_price):void 0,tax_id:R.tax_id?Number(R.tax_id):void 0,route_type_id:R.route_type_id?Number(R.route_type_id):void 0,outlet_group_id:R.outlet_group_id?Number(R.outlet_group_id):void 0,tracking_type:R.tracking_type&&R.tracking_type!==""&&R.tracking_type!=="None"?R.tracking_type:null,batch_lots:n.filter(W=>W.batch_lot_id>0).map(W=>({batch_lot_id:W.batch_lot_id,quantity:W.quantity||0})),product_type_id:R.product_type_id?Number(R.product_type_id):void 0,product_target_group_id:R.product_target_group_id?Number(R.product_target_group_id):void 0,product_web_order_id:R.product_web_order_id?Number(R.product_web_order_id):void 0,volume_id:R.volume_id?Number(R.volume_id):void 0,flavour_id:R.flavour_id?Number(R.flavour_id):void 0,shelf_life_id:R.shelf_life_id?Number(R.shelf_life_id):void 0,weight_in_grams:R.weight_in_grams?Number(R.weight_in_grams):void 0,volume_in_liters:R.volume_in_liters?Number(R.volume_in_liters):void 0,is_active:R.is_active};l&&t?await u.mutateAsync({id:t.id,...$}):await m.mutateAsync($),c()}catch($){console.error("Error saving product:",$)}}}),{data:G}=TF(V.values.unit_of_measurement?{limit:1e3,isActive:"Y",unitOfMeasurementId:Number(V.values.unit_of_measurement)}:{limit:1e3,isActive:"Y"}),H=G?.data||[],D=R=>{const $=R.target.value;V.setFieldValue("unit_of_measurement",$),V.setFieldValue("subunit_id","")};return e.jsx(it,{open:a,setOpen:c,title:l?"Edit Product":"Create Product",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:V.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Product Name",placeholder:"Enter product name",formik:V,required:!0}),e.jsx(fu,{name:"category_id",label:"Category",formik:V,required:!0}),e.jsx(_e,{name:"sub_category_id",label:"Sub-Category",formik:V,required:!0,children:j.map(R=>e.jsx(Z,{value:R.id,children:R.sub_category_name},R.id))}),e.jsx(_e,{name:"brand_id",label:"Brand",formik:V,required:!0,children:v.map(R=>e.jsx(Z,{value:R.id,children:R.name},R.id))}),e.jsx(_e,{name:"unit_of_measurement",label:"Unit of Measurement",formik:V,required:!0,onChange:D,children:N.map(R=>e.jsxs(Z,{value:R.id,children:[R.name," ",R.symbol&&`(${R.symbol})`]},R.id))}),e.jsx(_e,{name:"subunit_id",label:"Sub Unit of Measurement",formik:V,disabled:!V.values.unit_of_measurement,loading:G===void 0,children:H.map(R=>e.jsxs(Z,{value:R.id,children:[R.name," ",R.code&&`(${R.code})`]},R.id))}),e.jsx(oe,{name:"base_price",label:"Base Price",type:"number",placeholder:"Enter base price",formik:V}),e.jsx(_e,{name:"tax_id",label:"Tax Rate",formik:V,children:P.map(R=>e.jsxs(Z,{value:R.id,children:[R.name," (",R.code,") -"," ",R.tax_rate?`${R.tax_rate}%`:"0%"]},R.id))}),e.jsx(_e,{name:"route_type_id",label:"Route Type",formik:V,children:C.map(R=>e.jsx(Z,{value:R.id,children:R.name},R.id))}),e.jsxs(_e,{name:"tracking_type",label:"Batch/Serial",formik:V,children:[e.jsx(Z,{value:"None",children:"None"}),e.jsx(Z,{value:"Batch",children:"Batch"}),e.jsx(Z,{value:"Serial",children:"Serial"})]}),e.jsx(_e,{name:"product_type_id",label:"Product Type",formik:V,children:z.map(R=>e.jsx(Z,{value:R.id,children:R.name},R.id))}),e.jsx(_e,{name:"product_target_group_id",label:"Product Target Group",formik:V,children:I.map(R=>e.jsx(Z,{value:R.id,children:R.name},R.id))}),e.jsx(_e,{name:"product_web_order_id",label:"Web Order",formik:V,children:Q.map(R=>e.jsx(Z,{value:R.id,children:R.name},R.id))}),e.jsx(_e,{name:"volume_id",label:"Volume",formik:V,children:Y.map(R=>e.jsx(Z,{value:R.id,children:R.name},R.id))}),e.jsx(_e,{name:"flavour_id",label:"Flavour",formik:V,children:B.map(R=>e.jsx(Z,{value:R.id,children:R.name},R.id))}),e.jsx(_e,{name:"shelf_life_id",label:"Shelf Life",formik:V,children:q.map(R=>e.jsx(Z,{value:R.id,children:R.name},R.id))}),e.jsx(oe,{name:"weight_in_grams",label:"Weight (grams)",type:"number",placeholder:"Enter weight in grams",formik:V}),e.jsx(oe,{name:"volume_in_liters",label:"Volume (liters)",type:"number",placeholder:"Enter volume in liters",formik:V}),e.jsx(Ts,{name:"is_active",label:"Status",formik:V}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter product description",formik:V,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:c,disabled:m.isPending||u.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",loading:m.isPending||u.isPending,children:m.isPending?"Creating...":u.isPending?"Updating...":l?"Update":"Create"})]})]})})})},T5e=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState(null),[l,c]=g.useState(!1),[m,u]=g.useState(!1),[h,f]=g.useState(1),[b]=g.useState(10),{isCreate:w,isUpdate:S,isDelete:j,isRead:v}=Qe("product"),{formatCurrency:N}=Ya(),{data:C,isFetching:P,error:E}=Cu({search:s,page:h,limit:b,status:r==="all"?void 0:r==="active"?"active":"inactive"},{enabled:v}),M=C?.data||[],T=C?.meta?.total||0,A=(C?.meta?.page||1)-1,L=eCe(),F=ls(),z=C?.stats?.total_products??0,I=C?.stats?.active_products??0,Q=C?.stats?.inactive_products??0,Y=C?.stats?.new_products_this_month??0,B=g.useCallback(()=>{o(null),c(!0)},[]),q=g.useCallback(J=>{t(`/masters/products/${J}`)},[t]),V=g.useCallback(J=>{o(J),c(!0)},[]),G=g.useCallback(async J=>{try{await L.mutateAsync(J)}catch(te){console.error("Error deleting product:",te)}},[L]),H=g.useCallback(J=>{a(J),f(1)},[]),D=J=>{f(J+1)},R=g.useCallback(async()=>{try{const J={search:s,status:r==="all"?void 0:r==="active"?"active":"inactive"};await F.mutateAsync({tableName:"products",filters:J})}catch(J){console.error("Error exporting products:",J)}},[F,s,r]),$=J=>J==null?"N/A":`${Number(J||"0").toFixed(2)}%`,W=[{id:"name",label:"Product Info",render:(J,te)=>e.jsxs(y,{className:"!flex !gap-2 !items-center !cursor-pointer hover:!opacity-80 !transition-opacity",onClick:()=>q(te.id),children:[e.jsx(ut,{alt:te.name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium hover:!text-primary-600 !transition-colors",children:te.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:te.code})]})]})},{id:"category",label:"Category & Brand",render:(J,te)=>e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center text-sm mt-1",children:[e.jsx(vs,{className:"w-4 h-4 text-gray-400 mr-2"}),te.product_brand?.name||"N/A"]}),e.jsxs(y,{className:"flex items-center text-xs text-gray-900",children:[e.jsx(_r,{className:"w-4 h-4 text-gray-400 mr-2"}),te.product_category?.category_name||"N/A"," ",te.product_sub_category?.sub_category_name&&e.jsx("span",{className:"text-gray-500 pl-0.5",children:` ${te.product_sub_category?.sub_category_name}`})]})]})},{id:"pricing",label:"Pricing",render:(J,te)=>e.jsxs(y,{children:[e.jsx(y,{className:"flex items-center text-sm text-gray-900",children:te.base_price!==null&&te.base_price!==void 0?N(te.base_price):"N/A"}),e.jsxs(y,{className:"flex items-center text-sm text-gray-500 mt-1",children:[e.jsx(np,{className:"w-4 h-4 text-gray-400 mr-2"}),$(te.tax_rate||0)]})]})},{id:"unit_of_measurement",label:"Unit",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:te.product_unit?.name||"N/A"})},{id:"product_subunit.name",label:"Sub Unit",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:te.product_subunit?.name||"N/A"})},{id:"product_type",label:"Product Type",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:te.product_type?.name||"N/A"})},{id:"tracking_type",label:"Tracking Type",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700 uppercase",children:te.tracking_type||"NONE"})},{id:"target_group",label:"Target Group",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:te.product_target_group?.name||e.jsx("span",{className:"!text-gray-500 italic",children:"no target group"})})},{id:"web_order",label:"Web Order",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:te.product_web_order?.name||e.jsx("span",{className:"!text-gray-500 italic",children:"no web order"})})},{id:"volume",label:"Volume",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:te.volume?.name||e.jsx("span",{className:"!text-gray-500 italic",children:"no volume"})})},{id:"flavour",label:"Flavour",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:te.flavour?.name||e.jsx("span",{className:"!text-gray-500 italic",children:"no flavour"})})},{id:"shelf_life",label:"Shelf Life",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:te.shelf_life?.name||e.jsx("span",{className:"!text-gray-500 italic",children:"no shelf life"})})},{id:"weight_in_grams",label:"Weight (g)",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:te.weight_in_grams!==null&&te.weight_in_grams!==void 0?`${Number(te.weight_in_grams).toLocaleString()} g`:e.jsx("span",{className:"!text-gray-500 italic",children:"no weight"})})},{id:"volume_in_liters",label:"Volume (L)",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:te.volume_in_liters!==null&&te.volume_in_liters!==void 0?`${Number(te.volume_in_liters).toFixed(2)} L`:e.jsx("span",{className:"!text-gray-500 italic",children:"no volume"})})},{id:"description",label:"Description",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-700 !max-w-xs !truncate",children:te.description||e.jsx("span",{className:"!text-gray-500 italic",children:"no description"})})},{id:"is_active",label:"Status",render:J=>e.jsx(Me,{icon:J==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:J==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:J==="Y"?"success":"error"})},{id:"createdate",label:"Created",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-500",children:Ie(te.createdate?.toString())})},...S||j||v?[{id:"action",label:"Actions",sortable:!1,render:(J,te)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[v&&e.jsx(Wa,{onClick:()=>q(te.id),tooltip:`View ${te.name}`,icon:e.jsx(Sn,{fontSize:"small"}),color:"info"}),S&&e.jsx(rs,{onClick:()=>V(te),tooltip:`Edit ${te.name}`}),j&&e.jsx(Vt,{onClick:()=>G(te.id),tooltip:`Delete ${te.name}`,itemName:te.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Products Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage your product catalog with pricing and inventory details"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Products",value:z,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:P}),e.jsx(fe,{title:"Active Products",value:I,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"green",isLoading:P}),e.jsx(fe,{title:"Inactive Products",value:Q,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"red",isLoading:P}),e.jsx(fe,{title:"New This Month",value:Y,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:P})]}),E&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load products. Please try again."}),e.jsx(ot,{data:M,columns:W,actions:v||w?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex items-center flex-wrap gap-2",children:v&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Products",value:s,onChange:H,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:r,onChange:J=>{n(J.target.value),f(1)},className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[v&&e.jsx(Xt,{title:"Export Products",description:"Are you sure you want to export the current products data to Excel? This will include all filtered results.",onConfirm:R,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:F.isPending,children:F.isPending?"Exporting...":"Export"})}),w&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>u(!0),children:"Import"}),w&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:B,children:"Create"})]})]}):!1,getRowId:J=>J.id,initialOrderBy:"name",loading:P,totalCount:T,page:A,rowsPerPage:b,isPermission:v,onPageChange:D,emptyMessage:s?`No products found matching "${s}"`:"No products found in the system"}),e.jsx(E5e,{selectedProduct:i,setSelectedProduct:o,drawerOpen:l,setDrawerOpen:c}),e.jsx(dCe,{drawerOpen:m,setDrawerOpen:u})]})},M5e=()=>{const{id:t}=Kr(),{data:s,isLoading:a,error:r}=Z3e(Number(t)),{data:n}=_u(),{data:i}=Zl({limit:1e3}),o=n?.data,l=i?.data||[],c=o?.currency_id||1,m=l.find(S=>S.id===c),u=s?.data,h=u?.batch_lots||[],f=S=>{if(S==null)return"N/A";const j=m?.code||"INR",N={USD:"en-US",EUR:"de-DE",GBP:"en-GB",JPY:"ja-JP",CNY:"zh-CN",AUD:"en-AU",CAD:"en-CA",INR:"en-IN",AED:"ar-AE",SAR:"ar-SA"}[j]||"en-IN";return new Intl.NumberFormat(N,{style:"currency",currency:j,minimumFractionDigits:2,maximumFractionDigits:2}).format(S)},b=S=>S==null?"N/A":`${Number(S||"0").toFixed(2)}%`;if(a)return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !items-center !gap-3",children:e.jsxs(y,{className:"!flex-1",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(X,{variant:"text",width:250,height:32}),e.jsx(X,{variant:"rectangular",width:80,height:24,className:"!rounded-full"})]}),e.jsx(X,{variant:"text",width:300,height:20,className:"!mt-1"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[1,2,3,4].map(S=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:[e.jsx(X,{variant:"text",width:100,height:20}),e.jsx(X,{variant:"text",width:150,height:32,className:"!mt-2"})]},S))}),e.jsx(X,{variant:"rectangular",height:400,className:"!rounded-lg !shadow !border !border-gray-200"})]});if(r)return e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load product details. Please try again."});if(!u)return e.jsx(lt,{severity:"warning",className:"!mb-4",children:"Product not found."});const w=[{id:"batch_number",label:"Batch Number",render:(S,j)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!font-medium",children:S}),j.lot_number&&e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:["Lot: ",j.lot_number]})]})},{id:"quantity",label:"Quantity",render:S=>e.jsx(x,{variant:"body2",children:Number(S).toLocaleString()})},{id:"remaining_quantity",label:"Remaining",render:S=>e.jsx(Me,{label:Number(S).toLocaleString(),size:"small",color:Number(S)>0?"success":"error"})},{id:"manufacturing_date",label:"Mfg Date",render:S=>e.jsx(x,{variant:"body2",children:Ie(S?.toString())})},{id:"expiry_date",label:"Expiry Date",render:S=>e.jsx(x,{variant:"body2",children:Ie(S?.toString())})}];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !items-center !gap-3",children:e.jsxs(y,{className:"!flex-1",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(x,{variant:"h5",className:"!font-bold !text-gray-900",children:u.name}),e.jsx(Me,{icon:u.is_active==="Y"?e.jsx(Da,{className:"w-4 h-4"}):e.jsx(ya,{className:"w-4 h-4"}),label:u.is_active==="Y"?"Active":"Inactive",size:"small",color:u.is_active==="Y"?"success":"error"})]}),e.jsxs(x,{variant:"body2",className:"!text-gray-500 !mt-1",children:["Product Code: ",u.code]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-2",children:"Base Price"}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:f(u.base_price||0)})]}),e.jsx(ut,{className:"!bg-green-100",children:e.jsx(vs,{className:"text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-2",children:"Volume"}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:u.volume_in_liters!==null&&u.volume_in_liters!==void 0?`${Number(u.volume_in_liters).toFixed(2)} L`:"N/A"})]}),e.jsx(ut,{className:"!bg-blue-100",children:e.jsx(lN,{className:"text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-2",children:"Batch Lots"}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:h.length})]}),e.jsx(ut,{className:"!bg-purple-100",children:e.jsx(J9,{className:"text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-2",children:"Shelf Life"}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:u.shelf_life?.name||"N/A"})]}),e.jsx(ut,{className:"!bg-orange-100",children:e.jsx(_s,{className:"text-orange-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6 mb-6",children:[e.jsx(x,{variant:"h6",className:"!font-bold !mb-4 !text-gray-900",children:"Product Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(_r,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Category"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:u.product_category?.category_name||"N/A"})]}),e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(_r,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Sub-Category"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:u.product_sub_category?.sub_category_name||"N/A"})]}),e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(vs,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Brand"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:u.product_brand?.name||"N/A"})]}),e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(Wt,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Unit of Measurement"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:u.product_unit?.name||"N/A"})]}),e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(yoe,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Tracking Type"})]}),e.jsx(Me,{label:u.tracking_type||"None",size:"small",variant:"outlined"})]}),u.product_type&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(Wt,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Product Type"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:u.product_type.name})]}),u.product_target_group&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(Tr,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Target Group"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:u.product_target_group.name})]}),u.volume&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(lN,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Volume"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:u.volume.name})]}),u.flavour&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(_r,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Flavour"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:u.flavour.name})]}),u.shelf_life&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(_s,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Shelf Life"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:u.shelf_life.name})]}),u.vat_percentage!==null&&u.vat_percentage!==void 0&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(np,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"VAT %"})]}),e.jsx(x,{variant:"body1",className:"!font-medium",children:b(u.vat_percentage)})]}),u.weight_in_grams!==null&&u.weight_in_grams!==void 0&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(Qoe,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Weight"})]}),e.jsxs(x,{variant:"body1",className:"!font-medium",children:[Number(u.weight_in_grams).toLocaleString()," g"]})]}),u.volume_in_liters!==null&&u.volume_in_liters!==void 0&&e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-2 mb-1",children:[e.jsx(lN,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Volume"})]}),e.jsxs(x,{variant:"body1",className:"!font-medium",children:[Number(u.volume_in_liters).toFixed(2)," L"]})]})]}),u.description&&e.jsxs(y,{className:"!mt-6",children:[e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-2",children:"Description"}),e.jsx(x,{variant:"body1",className:"!text-gray-700",children:u.description})]})]}),e.jsx(ot,{data:h,actions:e.jsx(y,{children:e.jsxs(x,{variant:"body1",className:"!font-semibold",children:["Batch Lots (",h.length,")"]})}),columns:w,getRowId:S=>S.id,initialOrderBy:"batch_number",emptyMessage:"No batch lots found for this product",pagination:!1})]})},D5e=async t=>{try{return(await ie.get("/promotions",{params:t})).data}catch(s){throw s}},R5e=async t=>{try{return(await ie.get(`/promotions/${t}`)).data}catch(s){throw s}},A5e=async t=>(await ie.post("/promotions",t)).data,I5e=async(t,s)=>(await ie.put(`/promotions/${t}`,s)).data,O5e=async t=>(await ie.delete(`/promotions/${t}`)).data,F5e=async t=>(await ie.patch(`/promotions/${t}/activate`)).data,L5e=async t=>(await ie.patch(`/promotions/${t}/deactivate`)).data,$5e=async t=>(await ie.post("/promotions/calculate",t)).data,z5e=async t=>(await ie.post("/promotions/apply",t)).data,q5e=async(t,s)=>(await ie.post(`/promotions/${t}/settle-period`,s)).data,jn={all:["promotions"],lists:()=>[...jn.all,"list"],list:t=>[...jn.lists(),t],details:()=>[...jn.all,"detail"],detail:t=>[...jn.details(),t]},B5e=(t,s)=>tt({queryKey:jn.list(t),queryFn:()=>D5e(t),staleTime:300*1e3,...s}),MF=(t,s)=>tt({queryKey:jn.detail(t),queryFn:()=>R5e(t),enabled:!!t,staleTime:300*1e3,...s}),U5e=t=>{const s=is();return De({mutationFn:A5e,loadingMessage:"Creating promotion...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:jn.lists()}),a?.data?.id&&s.invalidateQueries({queryKey:jn.detail(a.data.id)})},onError:t?.onError})},V5e=t=>{const s=is();return De({mutationFn:({id:a,data:r})=>I5e(a,r),loadingMessage:"Updating promotion...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:jn.lists()}),s.invalidateQueries({queryKey:jn.detail(r.id)})},onError:t?.onError})},H5e=(t,s)=>{const a=is();return De({mutationFn:()=>F5e(t),loadingMessage:"Activating promotion...",onSuccess:r=>{a.invalidateQueries({queryKey:jn.lists()}),a.invalidateQueries({queryKey:jn.detail(t)}),s?.onSuccess?.(r)},onError:s?.onError})},W5e=(t,s)=>{const a=is();return De({mutationFn:()=>L5e(t),loadingMessage:"Deactivating promotion...",onSuccess:r=>{a.invalidateQueries({queryKey:jn.lists()}),a.invalidateQueries({queryKey:jn.detail(t)}),s?.onSuccess?.(r)},onError:s?.onError})},Y5e=t=>De({mutationFn:$5e,loadingMessage:"Calculating eligible promotions...",onSuccess:t?.onSuccess,onError:t?.onError}),G5e=t=>De({mutationFn:z5e,loadingMessage:"Applying promotion...",onSuccess:t?.onSuccess,onError:t?.onError}),K5e=(t,s)=>{const a=is();return De({mutationFn:r=>q5e(t,r),loadingMessage:"Settling period promotion...",onSuccess:(r,n)=>{a.invalidateQueries({queryKey:jn.detail(t)}),s?.onSuccess?.(r,n)},onError:s?.onError})},Q5e=["Price","Quantity"],Z5e=["Free Product","Percent","Amount"],X5e=["Cash","Credit","Both"],J5e=["(B) Distributor Channel","(C) Customer Channel"],e6e=["All","Invoice","Waybill","Order"],t6e=["Normal","Exclusive","Priority"],s6e=["Normal","Override","Combine"],a6e=nt({name:me().required("Name is required"),start_date:me().required("Start date is required"),finish_date:me().required("Finish date is required").test("is-after-start","Finish date must be after start date",function(t){const{start_date:s}=this.parent;return!t||!s?!0:new Date(t)>=new Date(s)}),description:me(),is_active:me().oneOf(["Y","N"]).required()}),DF=({selectedPromotion:t,setSelectedPromotion:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,{data:i,isLoading:o}=MF(t?.id||null,{enabled:!!t?.id}),{data:l}=Cu({limit:1e3},{enabled:a}),c=l?.data||[],{data:m}=No({limit:1e3,isActive:"Y"},{enabled:a}),u=m?.data||[],{data:h}=Jl({limit:1e3,isActive:"Y"},{enabled:a}),f=h?.data||[],{data:b}=Ep({limit:1e3,isActive:"Y"},{enabled:a}),w=b?.data||[],{data:S}=VS({limit:1e3,is_active:"Y"},{enabled:a}),j=S?.data||[],{data:v}=CF({limit:1e3,is_active:"Y"},{enabled:a}),N=v?.data||[],{data:C}=HS({limit:1e3,is_active:"Y"},{enabled:a}),P=C?.data||[],{data:E}=l1({limit:1e3,status:"Active"},{enabled:a}),M=E?.data||[],{data:T}=Qr({limit:1e3,isActive:"Y"},{enabled:a}),A=T?.data||[],{data:L}=Tp({limit:1e3},{enabled:a}),F=L?.data||[],{data:z}=c1({limit:1e3},{enabled:a}),I=z?.data||[],Q=U5e(),Y=V5e(),[B,q]=g.useState([]),[V,G]=g.useState([]),[H,D]=g.useState([]),[R,$]=g.useState(0),[W,J]=g.useState([]),[te,ee]=g.useState([]),[ae,ce]=g.useState([]),[he,ne]=g.useState([]),[xe,ge]=g.useState([]),[le,pe]=g.useState([]),[Re,Se]=g.useState([]),[He,ze]=g.useState([]),[st,ke]=g.useState(null),[We,ye]=g.useState(0),[Ye,at]=g.useState("Price"),[bt,ct]=g.useState(0),[ht,Et]=g.useState(""),[be,Oe]=g.useState(""),[Le,jt]=g.useState("n. Prod. Gr."),[Jt,Kt]=g.useState(""),[rt,Lt]=g.useState(""),[Nt,ps]=g.useState("Free Product"),[cs,Ns]=g.useState(""),[Ys,Is]=g.useState(null),[Ms,pa]=g.useState({group:"",product:"",at_least:"",unit:"unit"}),[ha,ia]=g.useState({}),$t=g.useRef(null);g.useEffect(()=>{if(!i?.data||!n){q($e=>$e.length>0?[]:$e),G($e=>$e.length>0?[]:$e),D($e=>$e.length>0?[]:$e),J($e=>$e.length>0?[]:$e),ee($e=>$e.length>0?[]:$e),ce($e=>$e.length>0?[]:$e),ge($e=>$e.length>0?[]:$e),pe($e=>$e.length>0?[]:$e),Se($e=>$e.length>0?[]:$e),ze($e=>$e.length>0?[]:$e);return}const de=i.data;if(de.conditions&&Array.isArray(de.conditions)){const $e=[];de.conditions.forEach((Rt,Pe)=>{if(Rt.promotion_condition_products&&Array.isArray(Rt.promotion_condition_products)&&Rt.promotion_condition_products.length>0){const Be=Rt.promotion_condition_products[0];$e.push({_index:Pe,id:Rt.id,product_id:Be.product_id,product_group:Be.product_group,min_quantity:Number(Be.condition_quantity)||0,unit:"unit",type:Rt.condition_type==="PRICE"?"Price":(Rt.condition_type==="QUANTITY","Quantity")})}}),q(Rt=>{const Pe=JSON.stringify(Rt),Be=JSON.stringify($e);return Pe!==Be?$e:Rt})}else q($e=>$e.length>0?[]:$e);const Ee=[];de.depots&&Array.isArray(de.depots)&&de.depots.forEach($e=>{$e.depot_id&&Ee.push($e.depot_id)}),J($e=>{const Rt=$e.sort().join(","),Pe=Ee.sort().join(",");return Rt!==Pe?Ee:$e});const Ae=[];de.routes&&Array.isArray(de.routes)&&de.routes.forEach($e=>{$e.route_id&&Ae.push($e.route_id)}),ce($e=>{const Rt=$e.sort().join(","),Pe=Ae.sort().join(",");return Rt!==Pe?Ae:$e});const ft=[];de.salespersons&&Array.isArray(de.salespersons)&&de.salespersons.forEach($e=>{$e.salesperson_id&&ft.push($e.salesperson_id)}),ne($e=>{const Rt=$e.sort().join(","),Pe=ft.sort().join(",");return Rt!==Pe?ft:$e});const _t=[];if(de.zones&&Array.isArray(de.zones)&&de.zones.forEach($e=>{$e.zone_id&&_t.push($e.zone_id)}),ee($e=>{const Rt=$e.sort().join(","),Pe=_t.sort().join(",");return Rt!==Pe?_t:$e}),de.customer_exclusions&&Array.isArray(de.customer_exclusions)){const $e=[];de.customer_exclusions.forEach(Rt=>{Rt.customer_id&&$e.push(Rt.customer_id)}),ge(Rt=>{const Pe=Rt.sort().join(","),Be=$e.sort().join(",");return Pe!==Be?$e:Rt})}else ge($e=>$e.length>0?[]:$e);if(de.customer_categories&&Array.isArray(de.customer_categories)){const $e=[];de.customer_categories.forEach(Pe=>{Pe.customer_category_id&&$e.push(Pe.customer_category_id)}),Se(Pe=>{const Be=Pe.sort().join(","),Mt=$e.sort().join(",");return Be!==Mt?$e:Pe});const Rt=[];$e.forEach((Pe,Be)=>{Rt.push({_index:Be,id:Pe,outlet_condition:"Distributor",dist:"",outlet_value:"",start:de.start_date?new Date(de.start_date).toISOString().split("T")[0]:"",finish:de.end_date?new Date(de.end_date).toISOString().split("T")[0]:"",group:Pe.toString(),distributor_id:Ee.length>0?Ee[0].toString():""})}),G(Pe=>{const Be=JSON.stringify(Pe),Mt=JSON.stringify(Rt);return Be!==Mt?Rt:Pe})}else G($e=>$e.length>0?[]:$e),Se($e=>$e.length>0?[]:$e);const Gt=[];de.customer_types&&Array.isArray(de.customer_types)&&de.customer_types.forEach($e=>{$e.customer_type_id&&Gt.push($e.customer_type_id)}),pe($e=>{const Rt=$e.sort().join(","),Pe=Gt.sort().join(",");return Rt!==Pe?Gt:$e});const ss=[];if(de.customer_channels&&Array.isArray(de.customer_channels)&&de.customer_channels.forEach($e=>{$e.customer_channel_id&&ss.push($e.customer_channel_id)}),ze($e=>{const Rt=$e.sort().join(","),Pe=ss.sort().join(",");return Rt!==Pe?ss:$e}),de.levels&&Array.isArray(de.levels)){const $e=[];de.levels.forEach(Rt=>{Rt.promotion_benefit_level&&Array.isArray(Rt.promotion_benefit_level)&&Rt.promotion_benefit_level.forEach(Pe=>{if(Pe.product_id){const Be=Pe.benefit_type==="FREE_PRODUCT"?"Free Product":Pe.benefit_type==="PERCENT"?"Percent":"Amount";$e.push({_index:$e.length,id:Pe.id,level_id:Rt.id,type:Be,application:Pe.condition_type||"n. Prod. Gr.",gift:`${Pe.benefit_value||""} ${Pe.promotion_benefit_products?.name||""}`,product_id:Pe.product_id,product_name:Pe.promotion_benefit_products?.name||"",benefit_value:Number(Pe.benefit_value)||0,gift_limit:Number(Pe.gift_limit)||0})}})}),D(Rt=>{const Pe=JSON.stringify(Rt),Be=JSON.stringify($e);return Pe!==Be?$e:Rt})}else D($e=>$e.length>0?[]:$e)},[i?.data?.id,n]);const $s=()=>{pa({group:"",product:"",at_least:"0",unit:"unit"}),at("Price"),ye(0)},zt=()=>{s(null),r(!1),q([]),G([]),D([]),ke(null),Is(null),J([]),ee([]),ce([]),ne([]),ge([]),pe([]),Se([]),ze([]),Kt(""),Lt(""),Et(""),Oe(""),jt("n. Prod. Gr."),Ns(""),at("Price"),ye(0),qt.resetForm(),$s()},qt=xt({initialValues:{name:t?.name||"",short_name:t?.name||"",code:t?.code||"",pay_type:"Cash",scope:"(B) Distributor Channel",slip_type:"All",mandatory:!1,prom_conflict:"Normal",degree:"1",nr:"1",reg_disc_conf:"Normal",conflict_with_constant_disc:!1,start_date:t?.start_date?new Date(t.start_date).toISOString().split("T")[0]:"",finish_date:t?.end_date?new Date(t.end_date).toISOString().split("T")[0]:"",platform:["Mobile"],group:"",dist_comp_participation_min:"0",dist_comp_participation_max:"100",quantity_type:"Price",description:t?.description||"",is_active:t?.is_active||"Y"},validationSchema:a6e,enableReinitialize:!0,onSubmit:async de=>{try{const Ee=(Rs,Oa)=>Array.from(new Set(Rs.filter(Ua=>Ua[Oa]).map(Ua=>Number(Ua[Oa])))),Ae=Ee(V,"distributor_id"),ft=Array.from(new Set([...W,...Ae])),_t=ft.length>0?ft:void 0,Gt=Ee(V,"group"),ss=Array.from(new Set([...Re,...Gt])),$e=ss.length>0?ss:void 0,Rt=ae.length>0?ae:void 0,Pe=te.length>0?te:void 0,Be=he.length>0?he:void 0,Mt=xe.length>0?xe:void 0,Qt=le.length>0?le:void 0,Ht=He.length>0?He:void 0,Us=B.filter(Rs=>Rs.product_id||Rs.product_group).map(Rs=>{const Oa=Rs.product_id?c.find(Xr=>Xr.id===Rs.product_id):null,Ua=F.length>0?F[0].id:null;return{product_id:Rs.product_group?void 0:Rs.product_id,category_id:Oa?.category_id||Ua,product_group:Rs.product_group,min_quantity:Rs.min_quantity||0,min_value:Rs.min_quantity||0,quantity_type:(Rs.type||"Quantity").toUpperCase()}}),Qs=H.filter(Rs=>Rs.product_id).map(Rs=>({benefit_type:Rs.type==="Free Product"?"FREE_PRODUCT":Rs.type==="Percent"?"PERCENT":"AMOUNT",product_id:Rs.product_id,benefit_value:Rs.benefit_value||0,condition_type:Rs.application,gift_limit:Rs.gift_limit||0})),lr={name:de.name,description:de.description,start_date:de.start_date,end_date:de.finish_date,platforms:["Mobile"],quantity_type:(de.quantity_type||"QUANTITY").toUpperCase(),product_conditions:Us.length>0?Us:void 0,location_areas:_t,routes:Rt,zones:Pe,salespersons:Be,customer_exclusions:Mt,outlet1_groups:$e,customer_types:Qt,customer_channels:Ht,levels:Qs.length>0?[{level_number:1,threshold_value:0,discount_type:"PERCENTAGE",discount_value:0,benefits:Qs}]:void 0};if(n&&t){const Rs=Ee(V,"distributor_id"),Oa=Array.from(new Set([...W,...Rs])),Ua=Oa.length>0?Oa:void 0,Xr=Ee(V,"group"),Cs=Array.from(new Set([...Re,...Xr])),Za=Cs.length>0?Cs:void 0,Sr=ae.length>0?ae:void 0,Ps=te.length>0?te:void 0,yr=he.length>0?he:void 0,ao=xe.length>0?xe:void 0,Xa=le.length>0?le:void 0,Ra=He.length>0?He:void 0;await Y.mutateAsync({id:t.id,data:{name:de.name,start_date:de.start_date,end_date:de.finish_date,description:de.description,is_active:de.is_active,platforms:["Mobile"],quantity_type:(de.quantity_type||"QUANTITY").toUpperCase(),product_conditions:Us.length>0?Us:void 0,location_areas:Ua,routes:Sr,zones:Ps,salespersons:yr,customer_exclusions:ao,outlet1_groups:Za,customer_types:Xa,customer_channels:Ra,levels:Qs.length>0?[{level_number:1,threshold_value:0,discount_type:"PERCENTAGE",discount_value:0,benefits:Qs}]:void 0}})}else await Q.mutateAsync(lr);zt(),J([]),ee([]),ce([]),ne([]),ge([]),pe([]),Se([]),ze([])}catch(Ee){console.error("Error saving promotion:",Ee)}}}),ds=()=>{if(!Ms.group&&!Ms.product){ia({...ha,productCondition_new:"Product or Product Category must be selected"}),setTimeout(()=>{$t.current?.scrollIntoView({behavior:"smooth",block:"start"})},100);return}if(!Ms.at_least||parseFloat(Ms.at_least)<=0){ia({...ha,productCondition_quantity_new:"At least value must be greater than 0"}),setTimeout(()=>{$t.current?.scrollIntoView({behavior:"smooth",block:"start"})},100);return}const de={_index:B.length,product_group:Ms.group,product_id:Ms.product?parseInt(Ms.product):void 0,min_quantity:parseFloat(Ms.at_least)||0,unit:Ye==="Quantity"?Ms.unit:void 0,type:Ye};q([...B,de]),$s(),ia({})},ve=de=>{q(B.filter((Ee,Ae)=>Ae!==de))},Ce=(de,Ee,Ae)=>{const ft=[...B];ft[de]={...ft[de],[Ee]:Ae},q(ft)},qe=de=>{D(H.filter((Ee,Ae)=>Ae!==de))},gt=(de,Ee,Ae)=>{const ft=[...H];ft[de]={...ft[de],[Ee]:Ae},D(ft)};return o&&n?e.jsx(it,{open:a,setOpen:zt,title:n?"Edit Promotion":"Create Promotion",size:"extra-large",children:e.jsxs(y,{className:"!p-4",children:[e.jsxs(y,{className:"!grid !grid-cols-2 !gap-3",children:[e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(X,{variant:"text",width:"60%",height:28,className:"!mb-2"}),e.jsxs(y,{className:"!grid !grid-cols-2 !gap-4",children:[e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:56,className:"!rounded"})]})]}),e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(X,{variant:"text",width:"50%",height:28,className:"!mb-2"}),e.jsx(X,{variant:"rectangular",height:48,className:"!rounded !mb-3"}),e.jsx(X,{variant:"rectangular",height:40,className:"!rounded !mb-3"}),e.jsxs(y,{className:"!max-h-64 !overflow-hidden !border !border-gray-200 !rounded !p-2",children:[e.jsx(X,{variant:"rectangular",height:32,className:"!rounded !mb-2"}),e.jsx(X,{variant:"rectangular",height:32,className:"!rounded !mb-2"}),e.jsx(X,{variant:"rectangular",height:32,className:"!rounded !mb-2"}),e.jsx(X,{variant:"rectangular",height:32,className:"!rounded !mb-2"}),e.jsx(X,{variant:"rectangular",height:32,className:"!rounded !mb-2"})]})]}),e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(X,{variant:"text",width:"70%",height:28,className:"!mb-2"}),e.jsxs(y,{className:"!mb-2",children:[e.jsx(X,{variant:"text",width:"30%",height:20,className:"!mb-1"}),e.jsxs(y,{className:"!flex !gap-4",children:[e.jsx(X,{variant:"rectangular",width:100,height:40,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:100,height:40,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:100,height:40,className:"!rounded"})]})]}),e.jsxs(y,{className:"!space-y-2 !mt-2",children:[e.jsxs(y,{className:"!grid !grid-cols-2 !gap-4",children:[e.jsx(X,{variant:"rectangular",height:40,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:40,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:40,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:40,className:"!rounded"})]}),e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(X,{variant:"rectangular",width:80,height:36,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:80,height:36,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:80,height:36,className:"!rounded"})]})]})]}),e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(X,{variant:"text",width:"40%",height:28,className:"!mb-2"}),e.jsxs(y,{className:"!mb-4",children:[e.jsx(X,{variant:"text",width:"20%",height:20,className:"!mb-1"}),e.jsxs(y,{className:"!flex !gap-4",children:[e.jsx(X,{variant:"rectangular",width:120,height:40,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:120,height:40,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:120,height:40,className:"!rounded"})]})]}),e.jsxs(y,{className:"!space-y-4 !mt-2",children:[e.jsxs(y,{className:"!grid !grid-cols-2 !gap-4",children:[e.jsx(X,{variant:"rectangular",height:40,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:40,className:"!rounded"})]}),e.jsx(X,{variant:"rectangular",height:48,className:"!rounded"}),e.jsx(X,{variant:"rectangular",height:40,className:"!rounded"}),e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(X,{variant:"rectangular",width:80,height:36,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:80,height:36,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:80,height:36,className:"!rounded"})]})]})]})]}),e.jsxs(y,{className:"!mt-2 !flex !gap-2 !justify-end !col-span-2",children:[e.jsx(X,{variant:"rectangular",width:100,height:40,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:100,height:40,className:"!rounded"})]})]})}):e.jsx(it,{open:a,setOpen:zt,title:n?"Edit Promotion":"Create Promotion",size:"extra-large",children:e.jsxs(y,{className:"!p-4",children:[Object.keys(ha).length>0&&e.jsx(y,{ref:$t,children:e.jsxs(lt,{severity:"error",className:"!mb-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-semibold !mb-1",children:"Please fix the following errors:"}),e.jsx("ul",{className:"!list-disc !list-inside !space-y-1",children:Object.values(ha).map((de,Ee)=>e.jsx("li",{className:"!text-sm",children:de},Ee))})]})}),e.jsxs("form",{onSubmit:qt.handleSubmit,className:"!grid !grid-cols-2 !gap-3",children:[e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-2 !text-base",children:"Header Information"}),e.jsxs(y,{className:"!grid !grid-cols-2 !gap-4",children:[e.jsx(oe,{name:"name",label:"Name",formik:qt,required:!0,fullWidth:!0}),e.jsx(oe,{name:"short_name",label:"Short Name",formik:qt,fullWidth:!0}),e.jsx(oe,{name:"code",label:"Code",formik:qt,required:!0,fullWidth:!0}),e.jsx(_e,{name:"pay_type",label:"Pay Type",formik:qt,fullWidth:!0,children:X5e.map(de=>e.jsx(Z,{value:de,children:de},de))}),e.jsx(_e,{name:"scope",label:"Scope",formik:qt,fullWidth:!0,children:J5e.map(de=>e.jsx(Z,{value:de,children:de},de))}),e.jsx(_e,{name:"slip_type",label:"Slip Type",formik:qt,fullWidth:!0,children:e6e.map(de=>e.jsx(Z,{value:de,children:de},de))}),e.jsx(_e,{name:"prom_conflict",label:"Prom. Conflict",formik:qt,fullWidth:!0,children:t6e.map(de=>e.jsx(Z,{value:de,children:de},de))}),e.jsx(oe,{name:"degree",label:"Degree",type:"number",formik:qt,fullWidth:!0}),e.jsx(oe,{name:"nr",label:"Nr",type:"number",formik:qt,fullWidth:!0}),e.jsx(_e,{name:"reg_disc_conf",label:"Reg.Disc. Conf.",formik:qt,fullWidth:!0,children:s6e.map(de=>e.jsx(Z,{value:de,children:de},de))}),e.jsx(oe,{name:"start_date",label:"Start",type:"date",formik:qt,required:!0,fullWidth:!0}),e.jsx(oe,{name:"finish_date",label:"Finish",type:"date",formik:qt,required:!0,fullWidth:!0})]})]}),e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-2 !text-base",children:"Suitable Outlets"}),e.jsx(y,{className:"!mb-3 !border !border-gray-400/50 !rounded",children:e.jsxs(Zo,{value:R,onChange:(de,Ee)=>{$(Ee)},variant:"scrollable",scrollButtons:"auto",className:"!min-h-9.5",children:[e.jsx(As,{label:`Depots ${W.length>0?`(${W.length})`:""}`,className:"!min-h-9.5"}),e.jsx(As,{label:`Zones ${te.length>0?`(${te.length})`:""}`,className:"!min-h-9.5"}),e.jsx(As,{label:`Routes ${ae.length>0?`(${ae.length})`:""}`,className:"!min-h-9.5"}),e.jsx(As,{label:`Sales Persons ${he.length>0?`(${he.length})`:""}`,className:"!min-h-9.5"}),e.jsx(As,{label:`Outlet ${xe.length>0?`(${xe.length})`:""}`,className:"!min-h-9.5"}),e.jsx(As,{label:`Customer Type ${le.length>0?`(${le.length})`:""}`,className:"!min-h-9.5"}),e.jsx(As,{label:`Customer Category ${Re.length>0?`(${Re.length})`:""}`,className:"!min-h-9.5"}),e.jsx(As,{label:`Customer Channel ${He.length>0?`(${He.length})`:""}`,className:"!min-h-9.5"})]})}),e.jsxs(y,{className:"!mb-3",children:[R===0&&e.jsx(Ir,{multiple:!0,options:u,getOptionLabel:de=>`${de.name} (${de.code})`,value:u.filter(de=>W.includes(de.id)),onChange:(de,Ee)=>{J(Ee.map(Ae=>Ae.id))},size:"small",fullWidth:!0,filterOptions:(de,Ee)=>de.filter(ft=>{const _t=Ee.inputValue.toLowerCase();return ft.name?.toLowerCase().includes(_t)||ft.code?.toLowerCase().includes(_t)}),renderInput:de=>e.jsx(mr,{...de,placeholder:"Search and select Depots...",size:"small"}),renderTags:()=>null}),R===1&&e.jsx(Ir,{multiple:!0,options:f,getOptionLabel:de=>de.name,value:f.filter(de=>te.includes(de.id)),onChange:(de,Ee)=>{ee(Ee.map(Ae=>Ae.id))},size:"small",fullWidth:!0,filterOptions:(de,Ee)=>de.filter(ft=>{const _t=Ee.inputValue.toLowerCase();return ft.name?.toLowerCase().includes(_t)}),renderInput:de=>e.jsx(mr,{...de,placeholder:"Search and select Zones...",size:"small"}),renderTags:()=>null}),R===2&&e.jsx(Ir,{multiple:!0,options:M,getOptionLabel:de=>`${de.name||de.code||`Route ${de.id}`} ${de.code?`(${de.code})`:""}`,value:M.filter(de=>ae.includes(de.id)),onChange:(de,Ee)=>{ce(Ee.map(Ae=>Ae.id))},size:"small",fullWidth:!0,filterOptions:(de,Ee)=>de.filter(ft=>{const _t=Ee.inputValue.toLowerCase();return ft.name?.toLowerCase().includes(_t)||ft.code?.toLowerCase().includes(_t)}),renderInput:de=>e.jsx(mr,{...de,placeholder:"Search and select Routes...",size:"small"}),renderTags:()=>null}),R===3&&e.jsx(Ir,{multiple:!0,options:A,getOptionLabel:de=>`${de.name} ${de.email?`(${de.email})`:""}`,value:A.filter(de=>he.includes(de.id)),onChange:(de,Ee)=>{ne(Ee.map(Ae=>Ae.id))},size:"small",fullWidth:!0,filterOptions:(de,Ee)=>de.filter(ft=>{const _t=Ee.inputValue.toLowerCase();return ft.name?.toLowerCase().includes(_t)||ft.email?.toLowerCase().includes(_t)}),renderInput:de=>e.jsx(mr,{...de,placeholder:"Search and select Sales Persons...",size:"small"}),renderTags:()=>null}),R===4&&e.jsx(Ir,{multiple:!0,options:w,getOptionLabel:de=>`${de.name} (${de.code})`,value:w.filter(de=>xe.includes(de.id)),onChange:(de,Ee)=>{ge(Ee.map(Ae=>Ae.id))},size:"small",fullWidth:!0,filterOptions:(de,Ee)=>de.filter(ft=>{const _t=Ee.inputValue.toLowerCase();return ft.name?.toLowerCase().includes(_t)||ft.code?.toLowerCase().includes(_t)}),renderInput:de=>e.jsx(mr,{...de,placeholder:"Search and select Outlets...",size:"small"}),renderTags:()=>null}),R===5&&e.jsx(Ir,{multiple:!0,options:j,getOptionLabel:de=>`${de.type_name} (${de.type_code})`,value:j.filter(de=>le.includes(de.id)),onChange:(de,Ee)=>{pe(Ee.map(Ae=>Ae.id))},size:"small",fullWidth:!0,filterOptions:(de,Ee)=>de.filter(ft=>{const _t=Ee.inputValue.toLowerCase();return ft.type_name?.toLowerCase().includes(_t)||ft.type_code?.toLowerCase().includes(_t)}),renderInput:de=>e.jsx(mr,{...de,placeholder:"Search and select Customer Types...",size:"small"}),renderTags:()=>null}),R===6&&e.jsx(Ir,{multiple:!0,options:N,getOptionLabel:de=>`${de.category_name} (${de.category_code})`,value:N.filter(de=>Re.includes(de.id)),onChange:(de,Ee)=>{Se(Ee.map(Ae=>Ae.id))},size:"small",fullWidth:!0,filterOptions:(de,Ee)=>de.filter(ft=>{const _t=Ee.inputValue.toLowerCase();return ft.category_name?.toLowerCase().includes(_t)||ft.category_code?.toLowerCase().includes(_t)}),renderInput:de=>e.jsx(mr,{...de,placeholder:"Search and select Customer Categories...",size:"small"}),renderTags:()=>null}),R===7&&e.jsx(Ir,{multiple:!0,options:P,getOptionLabel:de=>`${de.channel_name} (${de.channel_code})`,value:P.filter(de=>He.includes(de.id)),onChange:(de,Ee)=>{ze(Ee.map(Ae=>Ae.id))},size:"small",fullWidth:!0,filterOptions:(de,Ee)=>de.filter(ft=>{const _t=Ee.inputValue.toLowerCase();return ft.channel_name?.toLowerCase().includes(_t)||ft.channel_code?.toLowerCase().includes(_t)}),renderInput:de=>e.jsx(mr,{...de,placeholder:"Search and select Customer Channels...",size:"small"}),renderTags:()=>null})]}),(R===0&&W.length>0||R===1&&te.length>0||R===2&&ae.length>0||R===3&&he.length>0||R===4&&xe.length>0||R===5&&le.length>0||R===6&&Re.length>0||R===7&&He.length>0)&&e.jsx(y,{className:"!mt-3 !border !border-gray-200 !rounded",children:e.jsxs(y,{className:"!max-h-52 !overflow-y-auto",children:[R===0&&W.map(de=>{const Ee=u.find(Ae=>Ae.id===de);return Ee?e.jsxs(y,{className:"!flex !items-center !border-b !border-gray-200 !justify-between !py-1 !px-2 !bg-gray-50 !rounded !hover:bg-gray-100",children:[e.jsxs(x,{variant:"body2",children:[Ee.name," (",Ee.code,")"]}),e.jsx(ta,{size:"small",onClick:()=>{J(W.filter(Ae=>Ae!==de))},children:e.jsx(Vr,{fontSize:"small"})})]},de):null}),R===1&&te.map(de=>{const Ee=f.find(Ae=>Ae.id===de);return Ee?e.jsxs(y,{className:"!flex !items-center !border-b !border-gray-200 !justify-between !py-1 !px-2 !bg-gray-50 !rounded !hover:bg-gray-100",children:[e.jsx(x,{variant:"body2",children:Ee.name}),e.jsx(ta,{size:"small",onClick:()=>{ee(te.filter(Ae=>Ae!==de))},children:e.jsx(Vr,{fontSize:"small"})})]},de):null}),R===2&&ae.map(de=>{const Ee=M.find(Ae=>Ae.id===de);return Ee?e.jsxs(y,{className:"!flex !items-center !border-b !border-gray-200 !justify-between !py-1 !px-2 !bg-gray-50 !rounded !hover:bg-gray-100",children:[e.jsxs(x,{variant:"body2",children:[Ee.name||Ee.code||`Route ${Ee.id}`," ",Ee.code?`(${Ee.code})`:""]}),e.jsx(ta,{size:"small",onClick:()=>{ce(ae.filter(Ae=>Ae!==de))},children:e.jsx(Vr,{fontSize:"small"})})]},de):null}),R===3&&he.map(de=>{const Ee=A.find(Ae=>Ae.id===de);return Ee?e.jsxs(y,{className:"!flex !items-center !border-b !border-gray-200 !justify-between !py-1 !px-2 !bg-gray-50 !rounded !hover:bg-gray-100",children:[e.jsxs(x,{variant:"body2",children:[Ee.name," ",Ee.email?`(${Ee.email})`:""]}),e.jsx(ta,{size:"small",onClick:()=>{ne(he.filter(Ae=>Ae!==de))},children:e.jsx(Vr,{fontSize:"small"})})]},de):null}),R===4&&xe.map(de=>{const Ee=w.find(Ae=>Ae.id===de);return Ee?e.jsxs(y,{className:"!flex !items-center !border-b !border-gray-200 !justify-between !py-1 !px-2 !bg-gray-50 !rounded !hover:bg-gray-100",children:[e.jsxs(x,{variant:"body2",children:[Ee.name," (",Ee.code,")"]}),e.jsx(ta,{size:"small",onClick:()=>{ge(xe.filter(Ae=>Ae!==de))},children:e.jsx(Vr,{fontSize:"small"})})]},de):null}),R===5&&le.map(de=>{const Ee=j.find(Ae=>Ae.id===de);return Ee?e.jsxs(y,{className:"!flex !items-center !border-b !border-gray-200 !justify-between !py-1 !px-2 !bg-gray-50 !rounded !hover:bg-gray-100",children:[e.jsxs(x,{variant:"body2",children:[Ee.type_name," (",Ee.type_code,")"]}),e.jsx(ta,{size:"small",onClick:()=>{pe(le.filter(Ae=>Ae!==de))},children:e.jsx(Vr,{fontSize:"small"})})]},de):null}),R===6&&Re.map(de=>{const Ee=N.find(Ae=>Ae.id===de);return Ee?e.jsxs(y,{className:"!flex !items-center !border-b !border-gray-200 !justify-between !py-1 !px-2 !bg-gray-50 !rounded !hover:bg-gray-100",children:[e.jsxs(x,{variant:"body2",children:[Ee.category_name," (",Ee.category_code,")"]}),e.jsx(ta,{size:"small",onClick:()=>{Se(Re.filter(Ae=>Ae!==de))},children:e.jsx(Vr,{fontSize:"small"})})]},de):null}),R===7&&He.map(de=>{const Ee=P.find(Ae=>Ae.id===de);return Ee?e.jsxs(y,{className:"!flex !items-center !border-b !border-gray-200 !justify-between !py-1 !px-2 !bg-gray-50 !rounded !hover:bg-gray-100",children:[e.jsxs(x,{variant:"body2",className:"!text-sm",children:[Ee.channel_name," (",Ee.channel_code,")"]}),e.jsx(ta,{size:"small",onClick:()=>{ze(He.filter(Ae=>Ae!==de))},children:e.jsx(Vr,{fontSize:"small"})})]},de):null})]})})]}),e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-2 !text-base",children:["Promotion Product Condition"," ",e.jsxs("span",{className:"!text-gray-500",children:["(",B.length||0,")"]})]}),e.jsxs(y,{className:"!mb-2",children:[e.jsx(x,{className:"!mb-1 !text-xs !font-medium",children:"Type"}),e.jsx(yx,{value:Ye,onChange:de=>{const Ee=de.target.value;at(Ee),pa({...Ms,product:"",group:"",unit:Ee==="Price"?void 0:Ms.unit||"unit"})},row:!0,children:Q5e.map(de=>e.jsx(Xn,{value:de,control:e.jsx(gx,{}),label:de},de))})]}),B.length>0&&e.jsx(y,{className:"!mb-4",children:e.jsx(ot,{data:B.map((de,Ee)=>({id:de._index,type:de.type||"Quantity",product_group:de.product_group||de.product_id&&c.find(Ae=>Ae.id===de.product_id)?.name||"-",at_least:de.type==="Price"?`${de.min_quantity||0}`:`${de.min_quantity||0} ${de.unit||"unit"}`,_index:Ee})),columns:[{id:"type",label:"Type"},{id:"product_group",label:"Product/Category"},{id:"at_least",label:"At least"},{id:"actions",label:"Actions",render:(de,Ee)=>e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(rs,{onClick:()=>{const Ae=B[Ee._index];ke(Ee._index),pa({group:Ae.product_group||"",product:Ae.product_id?.toString()||"",at_least:Ae.min_quantity?.toString()||"",unit:Ae.type==="Price"?void 0:Ae.unit||"unit"}),at(Ae.type||"Quantity"),Ae.product_id?ye(0):Ae.product_group&&ye(1)},tooltip:"Edit condition",size:"small"}),e.jsx(Vt,{onClick:()=>ve(Ee._index),tooltip:"Delete condition",size:"small"})]})}],pagination:!1,sortable:!1,compact:!0})}),e.jsxs(y,{className:"!space-y-4 !mt-2",children:[e.jsxs(y,{className:"!grid !grid-cols-2 !gap-4",children:[e.jsx(oe,{type:"number",value:Ms.at_least||"",onChange:de=>pa({...Ms,at_least:de.target.value}),label:`At least (${Ye==="Quantity"?"Quantity":"Price"})`,size:"small",fullWidth:!0}),Ye==="Quantity"&&e.jsxs(_e,{value:Ms.unit,onChange:de=>pa({...Ms,unit:de.target.value}),size:"small",fullWidth:!0,children:[e.jsx(Z,{value:"unit",children:"unit"}),I.map(de=>e.jsx(Z,{value:de.name,children:de.name},de.id))]})]}),e.jsx(y,{className:"rounded border border-gray-400/50",children:e.jsxs(Zo,{value:We,onChange:(de,Ee)=>{ye(Ee),pa({...Ms,product:"",group:""})},variant:"scrollable",scrollButtons:"auto",className:"!min-h-9.5",children:[e.jsx(As,{label:"Product",className:"!min-h-9.5"}),e.jsx(As,{label:"Product Category",className:"!min-h-9.5"})]})}),We===0?e.jsx(bo,{label:"Product",value:Ms.product,onChange:(de,Ee)=>{const Ae=Ee?Ee.id.toString():"";pa({...Ms,product:Ae,group:""})},fullWidth:!0,size:"small"}):e.jsx(fu,{label:"Product Category",value:Ms.group,nameToSearch:Ms.group||"",onChange:(de,Ee)=>{const Ae=Ee?Ee.category_name:"";pa({...Ms,group:Ae,product:""})},fullWidth:!0,size:"small"}),e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{if(st!==null){const de=st;Ce(de,"product_group",Ms.group),Ce(de,"product_id",Ms.product?parseInt(Ms.product):void 0),Ce(de,"min_quantity",parseFloat(Ms.at_least)||0),Ce(de,"unit",Ye==="Quantity"?Ms.unit:void 0),Ce(de,"type",Ye),ke(null),$s(),ia({})}},disabled:st===null,children:"Update"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:ds,children:"New"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{st!==null&&(ve(st),ke(null),$s())},disabled:st===null,children:"Del"})]})]})]}),e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-2 !text-base",children:["GIFT ",e.jsxs("span",{className:"!text-gray-500",children:["(",H.length,")"]})]}),e.jsxs(y,{className:"!mb-2",children:[e.jsx(x,{className:"!mb-1 !text-xs !font-medium",children:"Type"}),e.jsx(yx,{value:Nt,onChange:de=>{const Ee=de.target.value;if(ps(Ee),Ee==="Percent"&&Jt){const Ae=parseFloat(Jt);!isNaN(Ae)&&Ae>100?Ns("Percent value cannot be more than 100"):Ns("")}else Ns("")},row:!0,children:Z5e.map(de=>e.jsx(Xn,{value:de,control:e.jsx(gx,{}),label:de},de))})]}),H.length>0&&e.jsx(y,{className:"!mb-4",children:e.jsx(ot,{data:H.map((de,Ee)=>({id:Ee,type:de.type,application:de.application,gift:de.gift,_index:Ee})),columns:[{id:"type",label:"Type"},{id:"application",label:"Application"},{id:"gift",label:"Gift",render:(de,Ee)=>{const Ae=H[Ee._index];return Ae.product_name?`${Ae.benefit_value||""} ${Ae.product_name}`:Ae.gift}},{id:"actions",label:"Actions",render:(de,Ee)=>e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(rs,{onClick:()=>{const Ae=H[Ee._index];Is(Ee._index),Kt(Ae.benefit_value?.toString()||""),Lt(Ae.gift_limit?.toString()||""),jt(Ae.application||"n. Prod. Gr."),Ae.type==="Free Product"?(Et(Ae.product_id?.toString()||""),Oe(Ae.product_name||""),ct(0)):(Et(Ae.product_id?.toString()||""),Oe(Ae.product_name||""),ct(1)),ps(Ae.type)},tooltip:"Edit gift",size:"small"}),e.jsx(Vt,{onClick:()=>qe(Ee._index),tooltip:"Delete gift",size:"small"})]})}],pagination:!1,sortable:!1,compact:!0})}),e.jsxs(y,{className:"!space-y-4 !mt-2",children:[e.jsxs(y,{className:"!grid !grid-cols-2 !gap-4",children:[e.jsxs(y,{children:[e.jsx(oe,{label:`${Nt==="Free Product"?"Free Product":Nt==="Percent"?"Discount (Percent)":"Discount (Amount)"}`,type:"number",value:Jt||"",onChange:de=>{const Ee=de.target.value;if(Kt(Ee),Nt==="Percent"){const Ae=parseFloat(Ee);Ee&&!isNaN(Ae)&&Ae>100?Ns("Percent value cannot be more than 100"):Ns("")}else Ns("")},fullWidth:!0,size:"small",error:!!cs}),cs&&e.jsx(x,{variant:"caption",className:"!text-red-500 !mt-1 !block",children:cs})]})," ",Nt==="Percent"&&e.jsx(oe,{label:"Maximum Amount",type:"number",value:rt,onChange:de=>Lt(de.target.value),fullWidth:!0,size:"small"})]}),e.jsx(y,{className:"rounded border border-gray-400/50",children:e.jsxs(Zo,{value:bt,onChange:(de,Ee)=>{ct(Ee),Et("")},variant:"scrollable",scrollButtons:"auto",className:"!min-h-9.5",children:[e.jsx(As,{label:"Product",className:"!min-h-9.5"}),e.jsx(As,{label:"Product Category",className:"!min-h-9.5"})]})}),bt===0?e.jsx(bo,{label:"Product",value:ht,onChange:(de,Ee)=>{const Ae=Ee?Ee.id.toString():"";Et(Ae),Oe(Ee?.name||"")},fullWidth:!0,size:"small"}):e.jsx(fu,{label:"Product Category",value:be,nameToSearch:be||"",onChange:(de,Ee)=>{const Ae=Ee?Ee.category_name:"";Et(Ae),Oe(Ae)},fullWidth:!0,size:"small"}),e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{if(!ht){ia({...ha,gift_update:"Product or Product Category must be selected"}),setTimeout(()=>{$t.current?.scrollIntoView({behavior:"smooth",block:"start"})},100);return}if(!Jt||parseFloat(Jt)<=0){ia({...ha,gift_disc_update:"Discount value must be greater than 0"}),setTimeout(()=>{$t.current?.scrollIntoView({behavior:"smooth",block:"start"})},100);return}if(Nt==="Percent"){const de=parseFloat(Jt);if(!isNaN(de)&&de>100){Ns("Percent value cannot be more than 100"),ia({...ha,gift_disc_update:"Percent value cannot be more than 100"}),setTimeout(()=>{$t.current?.scrollIntoView({behavior:"smooth",block:"start"})},100);return}}Ys!==null&&ht&&(gt(Ys,"type",Nt),gt(Ys,"application",Le),gt(Ys,"gift",Jt?`${Jt} ${be}`:""),gt(Ys,"product_id",parseInt(ht)),gt(Ys,"product_name",be),gt(Ys,"benefit_value",parseFloat(Jt)||0),gt(Ys,"gift_limit",parseFloat(rt)||0),Is(null),Kt(""),Lt(""),Et(""),Oe(""),jt("n. Prod. Gr."),Ns(""),ia({}))},disabled:!!cs||Ys===null,children:"Update"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{if(!ht){ia({...ha,gift_new:"Product or Product Category must be selected"}),setTimeout(()=>{$t.current?.scrollIntoView({behavior:"smooth",block:"start"})},100);return}if(!Jt||parseFloat(Jt)<=0){ia({...ha,gift_disc_new:"Discount value must be greater than 0"}),setTimeout(()=>{$t.current?.scrollIntoView({behavior:"smooth",block:"start"})},100);return}if(Nt==="Percent"){const Ee=parseFloat(Jt);if(!isNaN(Ee)&&Ee>100){Ns("Percent value cannot be more than 100"),ia({...ha,gift_disc_new:"Percent value cannot be more than 100"}),setTimeout(()=>{$t.current?.scrollIntoView({behavior:"smooth",block:"start"})},100);return}}const de={_index:H.length,type:Nt,application:Le,gift:Jt?`${Jt} ${be||""}`:"",product_id:ht?parseInt(ht):void 0,product_name:be,benefit_value:parseFloat(Jt)||0,gift_limit:parseFloat(rt)||0};D([...H,de]),Kt("0"),Lt("0"),Et(""),Oe(""),jt("n. Prod. Gr."),Ns(""),Is(null),ia({})},disabled:!!cs,children:"New"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{Ys!==null&&(qe(Ys),Is(null),Kt("0"),Lt("0"),Et(""),Oe(""),jt("n. Prod. Gr."),Ns(""))},disabled:Ys===null,children:"Del"})]})]})]}),e.jsxs(y,{className:"!mt-2 !flex !gap-2 !justify-end !col-span-2",children:[e.jsx(K,{type:"button",variant:"outlined",size:"medium",onClick:zt,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",size:"medium",disabled:Q.isPending||Y.isPending,children:n?"Update Promotion":"Create Promotion"})]})]})]})})},r6e=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState(null),[l,c]=g.useState(!1),[m,u]=g.useState(1),[h]=g.useState(10),{isCreate:f,isUpdate:b,isDelete:w,isRead:S}=Qe("promotions"),{data:j,isFetching:v,error:N}=B5e({search:s,page:m,limit:h,is_active:r==="all"?void 0:r==="active"?"Y":"N"}),C=j?.data||[],P=j?.pagination?.total_count||0,E=(j?.pagination?.current_page||1)-1,M=ls(),T=De({mutationFn:H=>O5e(H),loadingMessage:"Deleting promotion...",invalidateQueries:[["promotions"]]}),A=j?.stats?.total_promotions||j?.pagination?.total_count||0,L=j?.stats?.active_promotions||C.filter(H=>H.is_active==="Y").length,F=j?.stats?.inactive_promotions||C.filter(H=>H.is_active==="N").length,z=j?.stats?.promotions_this_month||0,I=g.useCallback(()=>{o(null),c(!0)},[]),Q=g.useCallback(H=>{o(H),c(!0)},[]),Y=g.useCallback(async H=>{try{await T.mutateAsync(H)}catch(D){console.error("Error deleting promotion:",D)}},[T]),B=g.useCallback(H=>{a(H),u(1)},[]),q=H=>{u(H+1)},V=g.useCallback(async()=>{try{const H={search:s,status:r==="all"?void 0:r==="active"?"Y":"N"};await M.mutateAsync({tableName:"promotions",filters:H})}catch(H){console.error("Error exporting promotions:",H)}},[M,s,r]),G=[{id:"name",label:"Promotion Info",render:(H,D)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",onClick:()=>t(`/masters/promotions/${D.id}`),children:[e.jsx(ut,{alt:D.name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(_r,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:D.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:D.code})]})]})},{id:"start_date",label:"Start Date",render:(H,D)=>e.jsx(y,{children:Ie(D.start_date)})},{id:"end_date",label:"End Date",render:(H,D)=>e.jsx(y,{children:Ie(D.end_date)})},{id:"is_active",label:"Status",render:H=>e.jsx(Me,{icon:H==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:H==="Y"?"Active":"Inactive",size:"small",color:H==="Y"?"success":"error"})},{id:"createdate",label:"Created",render:(H,D)=>e.jsx(x,{variant:"body2",className:"!text-gray-500",children:Ie(D.createdate?.toString())})},...b||w||S?[{id:"action",label:"Actions",sortable:!1,render:(H,D)=>e.jsxs("div",{className:"!flex !gap-2 !items-center !justify-center",children:[b&&e.jsx(rs,{onClick:()=>Q(D),tooltip:"Edit promotion"}),S&&e.jsx(Wa,{onClick:()=>t(`/masters/promotions/${D.id}`),tooltip:"View promotion",icon:e.jsx(Sn,{fontSize:"small"}),color:"info"}),w&&e.jsx(Vt,{onClick:()=>Y(D.id),tooltip:"Delete promotion",confirmDelete:!0,itemName:"promotion"})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Promotions Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage promotional offers, discounts, and special deals for your products"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Promotions",value:A,icon:e.jsx(_r,{className:"w-6 h-6"}),color:"blue",isLoading:v}),e.jsx(fe,{title:"Active Promotions",value:L,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:v}),e.jsx(fe,{title:"Inactive Promotions",value:F,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:v}),e.jsx(fe,{title:"New This Month",value:z,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:v})]}),N&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load promotions. Please try again."}),e.jsx(ot,{data:C,columns:G,actions:S||f?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:S&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Promotions...",value:s,onChange:B,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:r,onChange:H=>{n(H.target.value),u(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[S&&e.jsx(Xt,{title:"Export Promotions",description:"Are you sure you want to export the current promotions data to Excel? This will include all filtered results.",onConfirm:V,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:M.isPending,children:M.isPending?"Exporting...":"Export"})}),f&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:I,children:"Create"})]})]}):!1,getRowId:H=>H.id,initialOrderBy:"name",loading:v,totalCount:P,page:E,rowsPerPage:h,isPermission:S,onPageChange:q,emptyMessage:s?`No promotions found matching "${s}"`:"No promotions found in the system"}),e.jsx(DF,{selectedPromotion:i,setSelectedPromotion:o,drawerOpen:l,setDrawerOpen:c})]})},$d=t=>t?t.replace(/_/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "):"",FN=(...t)=>t.filter(Boolean).join(" ").trim();function Zh(t){const{children:s,value:a,index:r,...n}=t;return e.jsx("div",{role:"tabpanel",hidden:a!==r,id:`promotion-tabpanel-${r}`,"aria-labelledby":`promotion-tab-${r}`,...n,children:a===r&&e.jsx(y,{className:"!p-3",children:s})})}const n6e=()=>{const{id:t}=Kr(),s=Ws(),[a,r]=g.useState(0),[n,i]=g.useState(!1),[o,l]=g.useState(null),{data:c,isLoading:m,error:u}=MF(Number(t)),h=c?.data,f=Number(t),b=H5e(f,{onSuccess:()=>{console.log("Promotion activated successfully")}}),w=W5e(f,{onSuccess:()=>{console.log("Promotion deactivated successfully")}}),S=Y5e({onSuccess:F=>{console.log("Eligible promotions calculated:",F)}}),j=G5e({onSuccess:F=>{console.log("Promotion applied successfully:",F)}}),v=K5e(f,{onSuccess:F=>{console.log("Period promotion settled successfully:",F)}}),N=()=>{s("/masters/promotions")},C=()=>{l(h),i(!0)},P=(F,z)=>{r(z)},E=()=>{h?.is_active==="Y"?w.mutate(void 0):b.mutate(void 0)},M=()=>{console.warn("Calculate Eligible Promotions requires order data. This feature needs additional implementation.")},T=()=>{console.warn("Apply Promotion requires order data. This feature needs additional implementation.")},A=()=>{console.warn("Settle Period Promotion requires period dates and customer IDs. This feature needs additional implementation.")};if(m)return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-2",children:e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !mb-4 !border-3 !border-white"}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-yellow-50"})]})}),e.jsx("div",{className:"flex-4 !space-y-4",children:[1,2,3].map(F=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6",children:[e.jsx(X,{variant:"text",width:200,height:24}),e.jsx(X,{variant:"text",width:"100%",height:16,className:"!mt-2"})]},F))})]});if(u||!h)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(vg,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load promotion details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:N,className:"mt-4",children:"Back to Promotions"})]});const L=({title:F,children:z,icon:I})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[I&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(I,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:F})]}),z]})]});return e.jsxs(e.Fragment,{children:[e.jsxs(y,{className:"!mb-3 !flex !items-center !gap-3",children:[e.jsxs(y,{className:"!flex-1",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(x,{variant:"h5",className:"!font-bold !text-gray-900",children:h.name}),e.jsx(Me,{icon:h.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:h.is_active==="Y"?"Active":"Inactive",size:"small",color:h.is_active==="Y"?"success":"error"}),e.jsx(Me,{label:h.code,size:"small",variant:"outlined"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-500 !mt-1",children:h.description||"No description provided"})]}),e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(rs,{onClick:C,tooltip:"Edit promotion"}),e.jsx(Vt,{onClick:()=>{},tooltip:"Delete promotion",confirmDelete:!0,itemName:"promotion"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"!flex-2 flex flex-col gap-4",children:e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${h.is_active==="Y"?"!bg-green-400":"!bg-red-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:`!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg ${h.is_active==="Y"?"!bg-gradient-to-br !from-green-400 !to-green-600 !text-white":"!bg-gradient-to-br !from-red-400 !to-red-600 !text-white"}`,children:e.jsx(U4,{className:"!w-8 !h-8"})})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:h.name}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:h.code}),e.jsx(Me,{icon:h.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),color:h.is_active==="Y"?"success":"error",label:h.is_active==="Y"?"Active":"Inactive",size:"small"}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Start Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(h.start_date)})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"End Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(h.end_date)})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Created"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.createdate?Ie(h.createdate.toString()):"N/A"})]})]})]})}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsx(L,{title:"Promotion Information",icon:Bn,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Type"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.type||"N/A"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Status"}),e.jsx("div",{className:"!mt-1",children:e.jsx(Me,{icon:h.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),color:h.is_active==="Y"?"success":"error",label:h.is_active==="Y"?"Active":"Inactive",size:"small"})})]}),e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Description"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.description||"No description provided"})]})]})}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200",children:[e.jsx(y,{children:e.jsxs(Zo,{value:a,onChange:P,className:"!min-h-0",visibleScrollbar:!0,sx:{"& .MuiTab-root":{minHeight:"36px",padding:"10px 12px",fontSize:"0.875rem",textTransform:"none","& .MuiTab-iconWrapper":{marginRight:"6px",fontSize:"1rem"}}},children:[e.jsx(As,{icon:e.jsx(Bn,{}),label:"Overview",iconPosition:"start"}),e.jsx(As,{icon:e.jsx(yle,{}),label:`Eligibility (${(h.depots?.length||0)+(h.salespersons?.length||0)+(h.routes?.length||0)+(h.zones?.length||0)})`,iconPosition:"start"}),e.jsx(As,{icon:e.jsx(Jw,{}),label:`Conditions (${h.conditions?.length||0})`,iconPosition:"start"}),e.jsx(As,{icon:e.jsx(nle,{}),label:`Levels & Benefits (${h.levels?.length||0})`,iconPosition:"start"}),e.jsx(As,{icon:e.jsx(rp,{}),label:"Actions",iconPosition:"start"})]})}),e.jsx(Zh,{value:a,index:0,children:e.jsxs("div",{className:"!space-y-4",children:[e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !mb-3",children:"Channels & Platforms"}),h.channels&&h.channels.length>0?e.jsx("div",{className:"!flex !flex-wrap !gap-2",children:h.channels.map(F=>e.jsx(Me,{label:F.channel_type,size:"small",color:"primary",variant:"outlined"},F.id))}):e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No channels assigned"})]}),e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !mb-3",children:"Period Information"}),e.jsxs("div",{className:"!grid !grid-cols-2 !gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase",children:"Start Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold",children:Ie(h.start_date)})]}),e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase",children:"End Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold",children:Ie(h.end_date)})]})]})]})]})}),e.jsx(Zh,{value:a,index:1,children:e.jsxs("div",{className:"!space-y-4",children:[e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !mb-3",children:["Depots (",h.depots?.length||0,")"]}),h.depots&&h.depots.length>0?e.jsx(ot,{data:h.depots.map(F=>({id:F.id,name:F.depots?.name||"N/A",code:F.depots?.code||"N/A"})),columns:[{id:"name",label:"Depot Name"},{id:"code",label:"Code"}],pagination:!1,sortable:!1}):e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No depots assigned"})]}),e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !mb-3",children:["Salespersons (",h.salespersons?.length||0,")"]}),h.salespersons&&h.salespersons.length>0?e.jsx(ot,{data:h.salespersons.map(F=>({id:F.id,name:F.promotion_salesperson_users?.name||"N/A",email:F.promotion_salesperson_users?.email||"N/A"})),columns:[{id:"name",label:"Name"},{id:"email",label:"Email"}],pagination:!1,sortable:!1}):e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No salespersons assigned"})]}),e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !mb-3",children:["Routes (",h.routes?.length||0,")"]}),h.routes&&h.routes.length>0?e.jsx(ot,{data:h.routes.map(F=>({id:F.id,name:F.promotion_route?.name||"N/A",code:F.promotion_route?.code||"N/A"})),columns:[{id:"name",label:"Route Name"},{id:"code",label:"Code"}],pagination:!1,sortable:!1}):e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No routes assigned"})]}),e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !mb-3",children:["Zones (",h.zones?.length||0,")"]}),h.zones&&h.zones.length>0?e.jsx(ot,{data:h.zones.map(F=>({id:F.id,name:F.promotion_zones_zones?.name||"N/A",code:F.promotion_zones_zones?.code||"N/A"})),columns:[{id:"name",label:"Zone Name"},{id:"code",label:"Code"}],pagination:!1,sortable:!1}):e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No zones assigned"})]}),e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !mb-3",children:["Customer Categories (",h.customer_categories?.length||0,")"]}),h.customer_categories&&h.customer_categories.length>0?e.jsx(ot,{data:h.customer_categories.map(F=>({id:F.id,name:F.promotion_customer_categorys?.category_name||"N/A",code:F.promotion_customer_categorys?.category_code||"N/A"})),columns:[{id:"name",label:"Category Name"},{id:"code",label:"Code"}],pagination:!1,sortable:!1}):e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No customer categories assigned"})]}),e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !mb-3",children:["Customer Exclusions (",h.customer_exclusions?.length||0,")"]}),h.customer_exclusions&&h.customer_exclusions.length>0?e.jsxs(x,{variant:"body2",children:[h.customer_exclusions.length," customer(s) excluded"]}):e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No customer exclusions"})]})]})}),e.jsx(Zh,{value:a,index:2,children:e.jsx("div",{className:"!space-y-4",children:h.conditions&&h.conditions.length>0?h.conditions.map(F=>e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !mb-3",children:["Condition ",F.id]}),e.jsxs("div",{className:"!grid !grid-cols-2 !gap-4 !mb-3",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase",children:"Type"}),e.jsx(x,{variant:"body2",className:"!font-semibold",children:$d(F.condition_type)})]}),e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase",children:"Applies To"}),e.jsx(x,{variant:"body2",className:"!font-semibold",children:$d(F.applies_to_type)})]}),e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase",children:"Min Value"}),e.jsx(x,{variant:"body2",className:"!font-semibold",children:F.min_value})]})]}),F.promotion_condition_products&&F.promotion_condition_products.length>0?e.jsx(ot,{data:F.promotion_condition_products.map(z=>({id:z.id,type:$d(F.condition_type),product_group:z.product_group||(z.product_id?`Product ID: ${z.product_id}`:z.category_id?`Category ID: ${z.category_id}`:"N/A"),at_least:z.condition_quantity})),columns:[{id:"type",label:"Type"},{id:"product_group",label:"Product/Category"},{id:"at_least",label:"At least"}],pagination:!1,sortable:!1}):null]},F.id)):e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No conditions defined"})})}),e.jsx(Zh,{value:a,index:3,children:e.jsx("div",{className:"!space-y-4",children:h.levels&&h.levels.length>0?h.levels.map((F,z)=>e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !mb-3",children:["Level ",F.level_number]}),e.jsxs("div",{className:"!grid !grid-cols-2 !gap-4 !mb-3",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase",children:"Threshold Value"}),e.jsx(x,{variant:"body2",className:"!font-semibold",children:F.threshold_value})]}),e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase",children:"Discount Type"}),e.jsx(x,{variant:"body2",className:"!font-semibold",children:$d(F.discount_type)})]}),e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase",children:"Discount Value"}),e.jsx(x,{variant:"body2",className:"!font-semibold",children:F.discount_value})]})]}),F.promotion_benefit_level&&F.promotion_benefit_level.length>0?e.jsxs("div",{children:[e.jsx(x,{variant:"subtitle2",className:"!mb-2",children:"Benefits:"}),e.jsx(ot,{data:F.promotion_benefit_level.map(I=>({id:I.id,type:I.benefit_type,product:I.promotion_benefit_products?.name||"N/A",value:I.benefit_value,gift_limit:I.gift_limit})),columns:[{id:"type",label:"Type",render:I=>$d(I)},{id:"product",label:"Product"},{id:"value",label:"Value"},{id:"gift_limit",label:"Gift Limit"}],pagination:!1,sortable:!1})]}):null]},F.id)):e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No levels defined"})})}),e.jsx(Zh,{value:a,index:4,children:e.jsx("div",{className:"!space-y-4",children:e.jsxs(oa,{className:"!p-4 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !mb-3",children:"Promotion Actions"}),e.jsxs("div",{className:"!space-y-2",children:[e.jsx(K,{variant:h.is_active==="Y"?"outlined":"contained",startIcon:h.is_active==="Y"?e.jsx(Ct,{}):e.jsx(mt,{}),fullWidth:!0,onClick:E,disabled:b.isPending||w.isPending,children:b.isPending||w.isPending?"Processing...":h.is_active==="Y"?"Deactivate Promotion":"Activate Promotion"}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(oA,{}),fullWidth:!0,onClick:M,disabled:S.isPending,children:S.isPending?"Calculating...":"Calculate Eligible Promotions"}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(mt,{}),fullWidth:!0,onClick:T,disabled:j.isPending,children:j.isPending?"Applying...":"Apply Promotion"}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(_s,{}),fullWidth:!0,onClick:A,disabled:v.isPending,children:v.isPending?"Settling...":"Settle Period Promotion"})]})]})})})]})]})]}),e.jsx(DF,{selectedPromotion:o,setSelectedPromotion:l,drawerOpen:n,setDrawerOpen:i})]})},i6e=nt({file:hs().required("Please select a file to import")}),o6e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:i6e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("product_sub_categories")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"product_sub_categories",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Product Sub Categories",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple product sub categories. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},l6e=nt({sub_category_name:me().min(2,"Sub category name must be at least 2 characters").max(100,"Sub category name must not exceed 100 characters").required("Sub category name is required"),product_category_id:Ge().required("Product category is required").positive("Product category must be selected"),description:me().max(500,"Description must not exceed 500 characters").optional(),is_active:me().oneOf(["Y","N"],"Status must be either Active or Inactive").required("Status is required")}),c6e=({selectedProductSubCategory:t,setSelectedProductSubCategory:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=fCe(),l=xCe(),c=xt({initialValues:{sub_category_name:t?.sub_category_name||"",product_category_id:t?.product_category_id||0,description:t?.description||"",is_active:t?.is_active||"Y"},validationSchema:l6e,enableReinitialize:!0,onSubmit:async m=>{try{const u={sub_category_name:m.sub_category_name,product_category_id:m.product_category_id,description:m.description,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,data:u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving product sub category:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Product Sub Category":"Create Product Sub Category",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"sub_category_name",label:"Sub Category Name",placeholder:"Enter sub category name",formik:c,required:!0})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(fu,{name:"product_category_id",label:"Product Category",formik:c,required:!0,fullWidth:!0})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter description",formik:c,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:[o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," "]})]})]})})})},d6e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("product-sub-category"),{data:v,isFetching:N,error:C}=kF({search:t,page:u,limit:f,status:a==="all"?void 0:a==="active"?"active":"inactive"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=gCe(),A=ls(),L=v?.stats?.total_sub_categories??0,F=v?.stats?.active_sub_categories??0,z=v?.stats?.inactive_sub_categories??0,I=v?.stats?.new_sub_categories_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting product sub category:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,is_active:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"product_sub_categories",filters:D})}catch(D){console.error("Error exporting product sub categories:",D)}},[A,t,a]),H=[{id:"sub_category_name",label:"Sub Category Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.sub_category_name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:R.sub_category_name}),R.description&&e.jsx(qa,{title:R.description,placement:"top",arrow:!0,children:e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",title:R.description,sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",maxWidth:"300px",cursor:"help"},children:R.description})})]})]})},{id:"product_category",label:"Product Category",render:(D,R)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.product_category?.category_name||e.jsx("span",{className:"italic text-gray-400",children:"No Category"})})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.sub_category_name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.sub_category_name}`,itemName:R.sub_category_name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Product Sub Categories Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage product sub categories for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Sub Categories",value:L,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Sub Categories",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Sub Categories",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load product sub categories. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Product Sub Categories...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>r(D.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Product Sub Categories",description:"Are you sure you want to export the current product sub categories data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"sub_category_name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No product sub categories found matching "${t}"`:"No product sub categories found in the system"}),e.jsx(c6e,{selectedProductSubCategory:n,setSelectedProductSubCategory:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(o6e,{drawerOpen:c,setDrawerOpen:m})]})},kf={all:["product-flavours"],lists:()=>[...kf.all,"list"],list:t=>[...kf.lists(),t],details:()=>[...kf.all,"detail"],detail:t=>[...kf.details(),t]},u6e=(t,s)=>tt({queryKey:kf.list(t),queryFn:()=>JCe(t),staleTime:300*1e3,...s}),m6e=()=>De({mutationFn:e5e,invalidateQueries:["product-flavours"],loadingMessage:"Creating product flavour..."}),p6e=()=>De({mutationFn:({id:t,...s})=>t5e(t,s),invalidateQueries:["product-flavours"],loadingMessage:"Updating product flavour..."}),h6e=()=>De({mutationFn:s5e,invalidateQueries:["product-flavours"],loadingMessage:"Deleting product flavour..."}),f6e=nt({file:hs().required("Please select a file to import")}),x6e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:f6e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("product_flavours")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"product_flavours",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Product Flavours",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple product flavours. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},g6e=nt({name:me().required("Flavour name is required").min(2,"Name must be at least 2 characters").max(255,"Name must be less than 255 characters"),code:me().max(100,"Code must be less than 100 characters"),is_active:me().required("Status is required")}),y6e=({selectedFlavour:t,setSelectedFlavour:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=m6e(),l=p6e(),c=xt({initialValues:{name:t?.name||"",code:t?.code||"",is_active:t?.is_active||"Y"},validationSchema:g6e,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,code:m.code,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving product flavour:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Product Flavour":"Create Product Flavour",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Flavour Name",placeholder:"Enter flavour name",formik:c,required:!0}),e.jsx(oe,{name:"code",label:"Code",placeholder:"Enter code (optional)",formik:c,disabled:n}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},b6e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("product-flavour"),{data:v,isFetching:N,error:C}=u6e({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total_count||0,M=(v?.meta?.current_page||1)-1,T=h6e(),A=ls(),L=v?.stats?.total_product_flavours??P.length,F=v?.stats?.active_product_flavours??P.filter(D=>D.is_active==="Y").length,z=v?.stats?.inactive_product_flavours??P.filter(D=>D.is_active==="N").length,I=v?.stats?.new_product_flavours_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting product flavour:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"product_flavours",filters:D})}catch(D){console.error("Error exporting product flavours:",D)}},[A,t,a]),H=[{id:"name",label:"Flavour Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(l8,{className:"w-5 h-5"})}),e.jsx(x,{variant:"body1",className:"!text-gray-900",children:R.name})]})},{id:"code",label:"Code",render:(D,R)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.code||e.jsx("span",{className:"italic text-gray-400",children:"No Code"})})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Product Flavours Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage product flavours for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Flavours",value:L,icon:e.jsx(l8,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Flavours",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Flavours",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load product flavours. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Product Flavours...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>{r(D.target.value),h(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Product Flavours",description:"Are you sure you want to export the current product flavours data to Excel?",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No product flavours found matching "${t}"`:"No product flavours found in the system"}),e.jsx(y6e,{selectedFlavour:n,setSelectedFlavour:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(x6e,{drawerOpen:c,setDrawerOpen:m})]})},Ef={all:["product-volumes"],lists:()=>[...Ef.all,"list"],list:t=>[...Ef.lists(),t],details:()=>[...Ef.all,"detail"],detail:t=>[...Ef.details(),t]},v6e=(t,s)=>tt({queryKey:Ef.list(t),queryFn:()=>b5e(t),staleTime:300*1e3,...s}),j6e=()=>De({mutationFn:v5e,invalidateQueries:["product-volumes"],loadingMessage:"Creating product volume..."}),N6e=()=>De({mutationFn:({id:t,...s})=>j5e(t,s),invalidateQueries:["product-volumes"],loadingMessage:"Updating product volume..."}),w6e=()=>De({mutationFn:N5e,invalidateQueries:["product-volumes"],loadingMessage:"Deleting product volume..."}),_6e=nt({file:hs().required("Please select a file to import")}),S6e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:_6e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("product_volumes")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"product_volumes",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Product Volumes",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple product volumes. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},C6e=nt({name:me().required("Volume name is required").min(2,"Name must be at least 2 characters").max(255,"Name must be less than 255 characters"),code:me().max(100,"Code must be less than 100 characters"),is_active:me().required("Status is required")}),P6e=({selectedVolume:t,setSelectedVolume:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=j6e(),l=N6e(),c=xt({initialValues:{name:t?.name||"",code:t?.code||"",is_active:t?.is_active||"Y"},validationSchema:C6e,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,code:m.code,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving product volume:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Product Volume":"Create Product Volume",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Volume Name",placeholder:"Enter volume name",formik:c,required:!0}),e.jsx(oe,{name:"code",label:"Code",placeholder:"Enter code (optional)",formik:c,disabled:n}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},k6e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("product-volume"),{data:v,isFetching:N,error:C}=v6e({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total_count||0,M=(v?.meta?.current_page||1)-1,T=w6e(),A=ls(),L=v?.stats?.total_product_volumes??P.length,F=v?.stats?.active_product_volumes??P.filter(D=>D.is_active==="Y").length,z=v?.stats?.inactive_product_volumes??P.filter(D=>D.is_active==="N").length,I=v?.stats?.new_product_volumes_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting product volume:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"product_volumes",filters:D})}catch(D){console.error("Error exporting product volumes:",D)}},[A,t,a]),H=[{id:"name",label:"Volume Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsx(x,{variant:"body1",className:"!text-gray-900",children:R.name})]})},{id:"code",label:"Code",render:(D,R)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.code||e.jsx("span",{className:"italic text-gray-400",children:"No Code"})})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Product Volumes Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage product volumes for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Volumes",value:L,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Volumes",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Volumes",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load product volumes. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Product Volumes...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>{r(D.target.value),h(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Product Volumes",description:"Are you sure you want to export the current product volumes data to Excel?",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No product volumes found matching "${t}"`:"No product volumes found in the system"}),e.jsx(P6e,{selectedVolume:n,setSelectedVolume:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(S6e,{drawerOpen:c,setDrawerOpen:m})]})},Tf={all:["product-shelf-life"],lists:()=>[...Tf.all,"list"],list:t=>[...Tf.lists(),t],details:()=>[...Tf.all,"detail"],detail:t=>[...Tf.details(),t]},E6e=(t,s)=>tt({queryKey:Tf.list(t),queryFn:()=>r5e(t),staleTime:300*1e3,...s}),T6e=()=>De({mutationFn:n5e,invalidateQueries:["product-shelf-life"],loadingMessage:"Creating product shelf life..."}),M6e=()=>De({mutationFn:({id:t,...s})=>i5e(t,s),invalidateQueries:["product-shelf-life"],loadingMessage:"Updating product shelf life..."}),D6e=()=>De({mutationFn:o5e,invalidateQueries:["product-shelf-life"],loadingMessage:"Deleting product shelf life..."}),R6e=nt({file:hs().required("Please select a file to import")}),A6e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:R6e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("product_shelf_life")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"product_shelf_life",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Product Shelf Life",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple product shelf life. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},I6e=nt({name:me().required("Shelf life name is required").min(2,"Name must be at least 2 characters").max(255,"Name must be less than 255 characters"),code:me().max(100,"Code must be less than 100 characters"),is_active:me().required("Status is required")}),O6e=({selectedShelfLife:t,setSelectedShelfLife:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=T6e(),l=M6e(),c=xt({initialValues:{name:t?.name||"",code:t?.code||"",is_active:t?.is_active||"Y"},validationSchema:I6e,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,code:m.code,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving product shelf life:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Product Shelf Life":"Create Product Shelf Life",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Shelf Life Name",placeholder:"Enter shelf life name",formik:c,required:!0}),e.jsx(oe,{name:"code",label:"Code",placeholder:"Enter code (optional)",formik:c,disabled:n}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},F6e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("product-shelf-life"),{data:v,isFetching:N,error:C}=E6e({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total_count||0,M=(v?.meta?.current_page||1)-1,T=D6e(),A=ls(),L=v?.stats?.total_product_shelf_life??P.length,F=v?.stats?.active_product_shelf_life??P.filter(D=>D.is_active==="Y").length,z=v?.stats?.inactive_product_shelf_life??P.filter(D=>D.is_active==="N").length,I=v?.stats?.new_product_shelf_life_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting product shelf life:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"product_shelf_life",filters:D})}catch(D){console.error("Error exporting product shelf life:",D)}},[A,t,a]),H=[{id:"name",label:"Shelf Life Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Ds,{className:"w-5 h-5"})}),e.jsx(x,{variant:"body1",className:"!text-gray-900",children:R.name})]})},{id:"code",label:"Code",render:(D,R)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.code||e.jsx("span",{className:"italic text-gray-400",children:"No Code"})})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Product Shelf Life Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage product shelf life for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Shelf Life",value:L,icon:e.jsx(Ds,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Shelf Life",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Shelf Life",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load product shelf life. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Product Shelf Life...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>{r(D.target.value),h(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Product Shelf Life",description:"Are you sure you want to export the current product shelf life data to Excel?",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No product shelf life found matching "${t}"`:"No product shelf life found in the system"}),e.jsx(O6e,{selectedShelfLife:n,setSelectedShelfLife:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(A6e,{drawerOpen:c,setDrawerOpen:m})]})},Mf={all:["product-types"],lists:()=>[...Mf.all,"list"],list:t=>[...Mf.lists(),t],details:()=>[...Mf.all,"detail"],detail:t=>[...Mf.details(),t]},L6e=(t,s)=>tt({queryKey:Mf.list(t),queryFn:()=>h5e(t),staleTime:300*1e3,...s}),$6e=()=>De({mutationFn:f5e,invalidateQueries:["product-types"],loadingMessage:"Creating product type..."}),z6e=()=>De({mutationFn:({id:t,...s})=>x5e(t,s),invalidateQueries:["product-types"],loadingMessage:"Updating product type..."}),q6e=()=>De({mutationFn:g5e,invalidateQueries:["product-types"],loadingMessage:"Deleting product type..."}),B6e=nt({file:hs().required("Please select a file to import")}),U6e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:B6e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("product_type")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"product_type",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Product Types",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple product types. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},V6e=nt({name:me().required("Product type name is required").min(2,"Name must be at least 2 characters").max(255,"Name must be less than 255 characters"),code:me().max(100,"Code must be less than 100 characters"),is_active:me().required("Status is required")}),H6e=({selectedProductType:t,setSelectedProductType:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=$6e(),l=z6e(),c=xt({initialValues:{name:t?.name||"",code:t?.code||"",is_active:t?.is_active||"Y"},validationSchema:V6e,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,code:m.code,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving product type:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Product Type":"Create Product Type",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Product Type Name",placeholder:"Enter product type name",formik:c,required:!0}),e.jsx(oe,{name:"code",label:"Code",placeholder:"Enter code (optional)",formik:c,disabled:n}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},W6e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("product-type"),{data:v,isFetching:N,error:C}=L6e({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total_count||0,M=(v?.meta?.current_page||1)-1,T=q6e(),A=ls(),L=v?.stats?.total_product_types??P.length,F=v?.stats?.active_product_types??P.filter(D=>D.is_active==="Y").length,z=v?.stats?.inactive_product_types??P.filter(D=>D.is_active==="N").length,I=v?.stats?.new_product_types_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting product type:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"product_type",filters:D})}catch(D){console.error("Error exporting product types:",D)}},[A,t,a]),H=[{id:"name",label:"Product Type Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsx(x,{variant:"body1",className:"!text-gray-900",children:R.name})]})},{id:"code",label:"Code",render:(D,R)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.code||e.jsx("span",{className:"italic text-gray-400",children:"No Code"})})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Product Types Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage product types for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Product Types",value:L,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Types",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Types",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load product types. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Product Types...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>{r(D.target.value),h(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Product Types",description:"Are you sure you want to export the current product types data to Excel?",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No product types found matching "${t}"`:"No product types found in the system"}),e.jsx(H6e,{selectedProductType:n,setSelectedProductType:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(U6e,{drawerOpen:c,setDrawerOpen:m})]})},Df={all:["product-target-groups"],lists:()=>[...Df.all,"list"],list:t=>[...Df.lists(),t],details:()=>[...Df.all,"detail"],detail:t=>[...Df.details(),t]},Y6e=(t,s)=>tt({queryKey:Df.list(t),queryFn:()=>c5e(t),staleTime:300*1e3,...s}),G6e=()=>De({mutationFn:d5e,invalidateQueries:["product-target-groups"],loadingMessage:"Creating product target group..."}),K6e=()=>De({mutationFn:({id:t,...s})=>u5e(t,s),invalidateQueries:["product-target-groups"],loadingMessage:"Updating product target group..."}),Q6e=()=>De({mutationFn:m5e,invalidateQueries:["product-target-groups"],loadingMessage:"Deleting product target group..."}),Z6e=nt({file:hs().required("Please select a file to import")}),X6e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:Z6e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("product_target_group")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"product_target_group",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Product Target Groups",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple product target groups. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},J6e=nt({name:me().required("Product target group name is required").min(2,"Name must be at least 2 characters").max(255,"Name must be less than 255 characters"),code:me().max(100,"Code must be less than 100 characters"),is_active:me().required("Status is required")}),ePe=({selectedProductTargetGroup:t,setSelectedProductTargetGroup:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=G6e(),l=K6e(),c=xt({initialValues:{name:t?.name||"",code:t?.code||"",is_active:t?.is_active||"Y"},validationSchema:J6e,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,code:m.code,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving product target group:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Product Target Group":"Create Product Target Group",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Product Target Group Name",placeholder:"Enter product target group name",formik:c,required:!0}),e.jsx(oe,{name:"code",label:"Code",placeholder:"Enter code (optional)",formik:c,disabled:n}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},tPe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("product-target-group"),{data:v,isLoading:N,error:C}=Y6e({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total_count||0,M=(v?.meta?.page||1)-1,T=Q6e(),A=ls(),L=v?.stats?.total_product_target_groups??P.length,F=v?.stats?.active_product_target_groups??P.filter(D=>D.is_active==="Y").length,z=v?.stats?.inactive_product_target_groups??P.filter(D=>D.is_active==="N").length,I=v?.stats?.new_product_target_groups_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting product target group:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"product_target_group",filters:D})}catch(D){console.error("Error exporting product target groups:",D)}},[A,t,a]),H=[{id:"name",label:"Target Group Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsx(x,{variant:"body1",className:"!text-gray-900",children:R.name})]})},{id:"code",label:"Code",render:(D,R)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.code||e.jsx("span",{className:"italic text-gray-400",children:"No Code"})})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Product Target Groups Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage product target groups for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Target Groups",value:L,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Groups",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Groups",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load product target groups. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Product Target Groups...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>{r(D.target.value),h(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Product Target Groups",description:"Are you sure you want to export the current product target groups data to Excel?",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No product target groups found matching "${t}"`:"No product target groups found in the system"}),e.jsx(ePe,{selectedProductTargetGroup:n,setSelectedProductTargetGroup:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(X6e,{drawerOpen:c,setDrawerOpen:m})]})},Rf={all:["product-web-orders"],lists:()=>[...Rf.all,"list"],list:t=>[...Rf.lists(),t],details:()=>[...Rf.all,"detail"],detail:t=>[...Rf.details(),t]},sPe=(t,s)=>tt({queryKey:Rf.list(t),queryFn:()=>_5e(t),staleTime:300*1e3,...s}),aPe=()=>De({mutationFn:S5e,invalidateQueries:["product-web-orders"],loadingMessage:"Creating product web order..."}),rPe=()=>De({mutationFn:({id:t,...s})=>C5e(t,s),invalidateQueries:["product-web-orders"],loadingMessage:"Updating product web order..."}),nPe=()=>De({mutationFn:P5e,invalidateQueries:["product-web-orders"],loadingMessage:"Deleting product web order..."}),iPe=nt({file:hs().required("Please select a file to import")}),oPe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:iPe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("product_web_order")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"product_web_order",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Product Web Orders",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple product web orders. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},lPe=nt({name:me().required("Product web order name is required").min(2,"Name must be at least 2 characters").max(255,"Name must be less than 255 characters"),code:me().max(100,"Code must be less than 100 characters"),is_active:me().required("Status is required")}),cPe=({selectedProductWebOrder:t,setSelectedProductWebOrder:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=aPe(),l=rPe(),c=xt({initialValues:{name:t?.name||"",code:t?.code||"",is_active:t?.is_active||"Y"},validationSchema:lPe,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,code:m.code,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving product web order:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Product Web Order":"Create Product Web Order",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Product Web Order Name",placeholder:"Enter product web order name",formik:c,required:!0}),e.jsx(oe,{name:"code",label:"Code",placeholder:"Enter code (optional)",formik:c}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},dPe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("product-web-order"),{data:v,isLoading:N,error:C}=sPe({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total_count||0,M=(v?.meta?.current_page||1)-1,T=nPe(),A=ls(),L=v?.stats?.total_product_web_orders??P.length,F=v?.stats?.active_product_web_orders??P.filter(D=>D.is_active==="Y").length,z=v?.stats?.inactive_product_web_orders??P.filter(D=>D.is_active==="N").length,I=v?.stats?.new_product_web_orders_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting product web order:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"product_web_order",filters:D})}catch(D){console.error("Error exporting product web orders:",D)}},[A,t,a]),H=[{id:"name",label:"Web Order Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsx(x,{variant:"body1",className:"!text-gray-900",children:R.name})]})},{id:"code",label:"Code",render:(D,R)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.code||e.jsx("span",{className:"italic text-gray-400",children:"No Code"})})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Product Web Orders Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage product web orders for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Web Orders",value:L,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Orders",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Orders",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load product web orders. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Product Web Orders...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>{r(D.target.value),h(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Product Web Orders",description:"Are you sure you want to export the current product web orders data to Excel?",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No product web orders found matching "${t}"`:"No product web orders found in the system"}),e.jsx(cPe,{selectedProductWebOrder:n,setSelectedProductWebOrder:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(oPe,{drawerOpen:c,setDrawerOpen:m})]})},uPe=async t=>{try{return(await ie.get("/cooler-types",{params:t})).data}catch(s){throw console.error("Error fetching cooler types:",s),new Error(s.response?.data?.message||"Failed to fetch cooler types")}},mPe=async t=>{try{return(await ie.post("/cooler-types",t)).data}catch(s){throw console.error("Error creating cooler type:",s),new Error(s.response?.data?.message||"Failed to create cooler type")}},pPe=async(t,s)=>{try{return(await ie.put(`/cooler-types/${t}`,s)).data}catch(a){throw console.error("Error updating cooler type:",a),new Error(a.response?.data?.message||"Failed to update cooler type")}},hPe=async t=>{try{return(await ie.delete(`/cooler-types/${t}`)).data}catch(s){throw console.error("Error deleting cooler type:",s),new Error(s.response?.data?.message||"Failed to delete cooler type")}},fPe=async()=>{try{return(await ie.get("/cooler-types-dropdown")).data}catch(t){throw console.error("Error fetching cooler types dropdown:",t),new Error(t.response?.data?.message||"Failed to fetch cooler types dropdown")}},zd={all:["cooler-types"],lists:()=>[...zd.all,"list"],list:t=>[...zd.lists(),t],details:()=>[...zd.all,"detail"],detail:t=>[...zd.details(),t],dropdown:()=>[...zd.all,"dropdown"]},xPe=(t,s)=>tt({queryKey:zd.list(t),queryFn:()=>uPe(t),staleTime:300*1e3,...s}),gPe=()=>De({mutationFn:mPe,invalidateQueries:["cooler-types"],loadingMessage:"Creating cooler type..."}),yPe=()=>De({mutationFn:({id:t,...s})=>pPe(t,s),invalidateQueries:["cooler-types"],loadingMessage:"Updating cooler type..."}),bPe=()=>De({mutationFn:hPe,invalidateQueries:["cooler-types"],loadingMessage:"Deleting cooler type..."}),YS=t=>tt({queryKey:zd.dropdown(),queryFn:()=>fPe(),staleTime:600*1e3,...t}),vPe=nt({file:hs().required("Please select a file to import")}),jPe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:vPe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("cooler_types")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"cooler_types",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Cooler Types",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple cooler types. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},NPe=nt({name:me().required("Cooler type name is required").min(2,"Name must be at least 2 characters").max(255,"Name must be less than 255 characters"),code:me().max(100,"Code must be less than 100 characters"),description:me(),is_active:me().required("Status is required")}),wPe=({selectedCoolerType:t,setSelectedCoolerType:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=gPe(),l=yPe(),c=xt({initialValues:{name:t?.name||"",code:t?.code||"",description:t?.description||"",is_active:t?.is_active||"Y"},validationSchema:NPe,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,code:m.code,description:m.description,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving cooler type:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Cooler Type":"Create Cooler Type",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"name",label:"Cooler Type Name",placeholder:"Enter cooler type name",formik:c,required:!0}),e.jsx(oe,{name:"code",label:"Code",placeholder:"Enter code (optional)",formik:c}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter description",formik:c,multiline:!0,rows:3})}),e.jsx(Ts,{name:"is_active",formik:c,required:!0,className:"col-span-2"})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},_Pe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("cooler-type"),{data:v,isFetching:N,error:C}=xPe({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total_count||0,M=(v?.meta?.current_page||1)-1,T=bPe(),A=ls(),L=v?.stats,F=L?.total_cooler_types??P.length,z=L?.active_cooler_types??P.filter(R=>R.is_active==="Y").length,I=L?.inactive_cooler_types??P.filter(R=>R.is_active==="N").length,Q=L?.new_cooler_types??0,Y=g.useCallback(()=>{i(null),l(!0)},[]),B=g.useCallback(R=>{i(R),l(!0)},[]),q=g.useCallback(async R=>{try{await T.mutateAsync(R)}catch($){console.error("Error deleting cooler type:",$)}},[T]),V=g.useCallback(R=>{s(R),h(1)},[]),G=R=>{h(R+1)},H=g.useCallback(async()=>{try{const R={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"cooler_types",filters:R})}catch(R){console.error("Error exporting cooler types:",R)}},[A,t,a]),D=[{id:"name",label:"Cooler Type Name",render:(R,$)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:$.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900",children:$.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:$.code})]})]})},{id:"description",label:"Description",render:(R,$)=>e.jsx(x,{variant:"body2",className:"!text-gray-600",children:$.description||e.jsx("span",{className:"italic text-gray-400",children:"No Description"})})},{id:"is_active",label:"Status",render:R=>e.jsx(Me,{icon:R==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:R==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:R==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(R,$)=>Ie($.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(R,$)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>B($),tooltip:`Edit ${$.name}`}),S&&e.jsx(Vt,{onClick:()=>q($.id),tooltip:`Delete ${$.name}`,itemName:$.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Cooler Types Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage cooler types for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Cooler Types",value:F,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Types",value:z,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Types",value:I,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:Q,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load cooler types. Please try again."}),e.jsx(ot,{data:P,columns:D,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Cooler Types...",value:t,onChange:V,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:R=>{r(R.target.value),h(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Cooler Types",description:"Are you sure you want to export the current cooler types data to Excel?",onConfirm:H,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Y,children:"Create"})]})]}):!1,getRowId:R=>R.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:G,emptyMessage:t?`No cooler types found matching "${t}"`:"No cooler types found in the system"}),e.jsx(wPe,{selectedCoolerType:n,setSelectedCoolerType:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(jPe,{drawerOpen:c,setDrawerOpen:m})]})},SPe=async t=>{try{return(await ie.get("/cooler-sub-types",{params:t})).data}catch(s){throw console.error("Error fetching cooler sub types:",s),new Error(s.response?.data?.message||"Failed to fetch cooler sub types")}},CPe=async t=>{try{return(await ie.post("/cooler-sub-types",t)).data}catch(s){throw console.error("Error creating cooler sub type:",s),new Error(s.response?.data?.message||"Failed to create cooler sub type")}},PPe=async(t,s)=>{try{return(await ie.put(`/cooler-sub-types/${t}`,s)).data}catch(a){throw console.error("Error updating cooler sub type:",a),new Error(a.response?.data?.message||"Failed to update cooler sub type")}},kPe=async t=>{try{return(await ie.delete(`/cooler-sub-types/${t}`)).data}catch(s){throw console.error("Error deleting cooler sub type:",s),new Error(s.response?.data?.message||"Failed to delete cooler sub type")}},EPe=async t=>{try{return(await ie.get("/cooler-sub-types-dropdown",{params:{cooler_type_id:t}})).data}catch(s){throw console.error("Error fetching cooler sub types dropdown:",s),new Error(s.response?.data?.message||"Failed to fetch cooler sub types dropdown")}},qd={all:["cooler-sub-types"],lists:()=>[...qd.all,"list"],list:t=>[...qd.lists(),t],details:()=>[...qd.all,"detail"],detail:t=>[...qd.details(),t],dropdown:()=>[...qd.all,"dropdown"]},TPe=(t,s)=>tt({queryKey:qd.list(t),queryFn:()=>SPe(t),staleTime:300*1e3,...s}),MPe=()=>De({mutationFn:CPe,invalidateQueries:["cooler-sub-types"],loadingMessage:"Creating cooler sub type..."}),DPe=()=>De({mutationFn:({id:t,...s})=>PPe(t,s),invalidateQueries:["cooler-sub-types"],loadingMessage:"Updating cooler sub type..."}),RPe=()=>De({mutationFn:kPe,invalidateQueries:["cooler-sub-types"],loadingMessage:"Deleting cooler sub type..."}),APe=(t,s)=>tt({queryKey:[...qd.dropdown(),t],queryFn:()=>EPe(t),staleTime:600*1e3,enabled:!0,...s}),IPe=nt({file:hs().required("Please select a file to import")}),OPe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:IPe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("cooler_sub_types")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"cooler_sub_types",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Cooler Sub Types",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple cooler sub types. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},FPe=nt({name:me().required("Sub Type is required").min(2,"Sub Type must be at least 2 characters").max(255,"Sub Type must be less than 255 characters"),code:me().max(100,"Code must be less than 100 characters"),cooler_type_id:Ge().required("Cooler Type is required").integer("Cooler Type must be a valid integer"),description:me(),is_active:me().required("Status is required")}),LPe=({selectedCoolerSubType:t,setSelectedCoolerSubType:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,{data:i}=YS(),o=()=>{s(null),r(!1),m.resetForm()},l=MPe(),c=DPe(),m=xt({initialValues:{name:t?.name||"",code:t?.code||"",cooler_type_id:t?.cooler_type_id||"",description:t?.description||"",is_active:t?.is_active||"Y"},validationSchema:FPe,enableReinitialize:!0,onSubmit:async u=>{try{const h={name:u.name,code:u.code,cooler_type_id:Number(u.cooler_type_id),description:u.description,is_active:u.is_active};n&&t?await c.mutateAsync({id:t.id,...h}):await l.mutateAsync(h),o()}catch(h){console.error("Error saving cooler sub type:",h)}}});return e.jsx(it,{open:a,setOpen:o,title:n?"Edit Cooler Sub Type":"Create Cooler Sub Type",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:m.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"name",label:"Sub Type",placeholder:"Enter sub type",formik:m,required:!0})}),e.jsx(oe,{name:"code",label:"Code",placeholder:"Enter code (optional)",formik:m}),e.jsxs(_e,{name:"cooler_type_id",label:"Cooler Type",formik:m,required:!0,children:[e.jsx(Z,{value:"",children:"Select Cooler Type"}),i?.data?.map(u=>e.jsx(Z,{value:u.id,children:u.name},u.id))]}),e.jsx(Ts,{name:"is_active",formik:m,required:!0,className:"col-span-2"}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter description",formik:m,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:o,className:"!mr-3",disabled:l.isPending||c.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:l.isPending||c.isPending,children:l.isPending||c.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},$Pe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(0),[o,l]=g.useState(null),[c,m]=g.useState(!1),[u,h]=g.useState(!1),[f,b]=g.useState(1),[w]=g.useState(10),{isCreate:S,isUpdate:j,isDelete:v,isRead:N}=Qe("cooler-sub-type"),{data:C}=YS(),{data:P,isFetching:E,error:M}=TPe({search:t,page:f,limit:w,isActive:a==="all"?void 0:a==="active"?"Y":"N",coolerTypeId:n?Number(n):void 0},{enabled:N}),T=P?.data||[],A=P?.meta?.total_count||0,L=(P?.meta?.current_page||1)-1,F=RPe(),z=ls(),I=P?.stats,Q=I?.total_cooler_sub_types??T.length,Y=I?.active_cooler_sub_types??T.filter(J=>J.is_active==="Y").length,B=I?.inactive_cooler_sub_types??T.filter(J=>J.is_active==="N").length,q=I?.new_cooler_sub_types??0,V=g.useCallback(()=>{l(null),m(!0)},[]),G=g.useCallback(J=>{l(J),m(!0)},[]),H=g.useCallback(async J=>{try{await F.mutateAsync(J)}catch(te){console.error("Error deleting cooler sub type:",te)}},[F]),D=g.useCallback(J=>{s(J),b(1)},[]),R=J=>{b(J+1)},$=g.useCallback(async()=>{try{const J={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N",coolerTypeId:n?Number(n):void 0};await z.mutateAsync({tableName:"cooler_sub_types",filters:J})}catch(J){console.error("Error exporting cooler sub types:",J)}},[z,t,a,n]),W=[{id:"name",label:"Sub Type",render:(J,te)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:te.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900",children:te.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:te.code})]})]})},{id:"cooler_type",label:"Cooler Type",render:(J,te)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:te.cooler_type?.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900",children:te.cooler_type?.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:te.cooler_type?.code})]})]})},{id:"description",label:"Description",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-600",children:te.description||e.jsx("span",{className:"italic text-gray-400",children:"No Description"})})},{id:"is_active",label:"Status",render:J=>e.jsx(Me,{icon:J==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:J==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:J==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(J,te)=>Ie(te.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...j||v||N?[{id:"action",label:"Actions",sortable:!1,render:(J,te)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[j&&e.jsx(rs,{onClick:()=>G(te),tooltip:`Edit ${te.name}`}),v&&e.jsx(Vt,{onClick:()=>H(te.id),tooltip:`Delete ${te.name}`,itemName:te.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Cooler Sub Types Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage cooler sub types for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Cooler Sub Types",value:Q,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:E}),e.jsx(fe,{title:"Active Sub Types",value:Y,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:E}),e.jsx(fe,{title:"Inactive Sub Types",value:B,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:E}),e.jsx(fe,{title:"New This Month",value:q,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:E})]}),M&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load cooler sub types. Please try again."}),e.jsx(ot,{data:T,columns:W,actions:N||S?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:N&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Cooler Sub Types...",value:t,onChange:D,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:n,onChange:J=>{i(J.target.value===""?0:Number(J.target.value)),b(1)},className:"!w-48",disableClearable:!0,children:[e.jsx(Z,{value:"0",children:"All Cooler Types"}),C?.data?.map(J=>e.jsx(Z,{value:J.id,children:J.name},J.id))]}),e.jsxs(_e,{value:a,onChange:J=>{r(J.target.value),b(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx(Xt,{title:"Export Cooler Sub Types",description:"Are you sure you want to export the current cooler sub types data to Excel?",onConfirm:$,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:z.isPending,children:z.isPending?"Exporting...":"Export"})}),S&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>h(!0),children:"Import"}),S&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:V,children:"Create"})]})]}):!1,getRowId:J=>J.id,initialOrderBy:"name",loading:E,totalCount:A,page:L,rowsPerPage:w,isPermission:N,onPageChange:R,emptyMessage:t?`No cooler sub types found matching "${t}"`:"No cooler sub types found in the system"}),e.jsx(LPe,{selectedCoolerSubType:o,setSelectedCoolerSubType:l,drawerOpen:c,setDrawerOpen:m}),e.jsx(OPe,{drawerOpen:u,setDrawerOpen:h})]})},zPe=nt({name:me().required("Tax name is required").min(2,"Tax name must be at least 2 characters").max(255,"Tax name must be less than 255 characters"),code:me().required("Tax code is required").min(2,"Tax code must be at least 2 characters").max(100,"Tax code must be less than 100 characters"),tax_rate:Ge().required("Tax rate is required").min(0,"Tax rate must be at least 0").max(100,"Tax rate must be at most 100"),description:me().max(500,"Description must be less than 500 characters"),is_active:me().oneOf(["Y","N"]).required("Status is required")}),qPe=({selectedTaxMaster:t,setSelectedTaxMaster:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),m.resetForm()},o=MCe(),l=DCe(),{data:c}=TCe(t?.id||0,{enabled:n&&!!t?.id}),m=xt({initialValues:{name:t?.name||"",code:t?.code||"",tax_rate:t?.tax_rate||0,description:t?.description||"",is_active:t?.is_active||"Y"},validationSchema:zPe,enableReinitialize:!0,onSubmit:async u=>{try{const h={name:u.name,code:u.code,tax_rate:Number(u.tax_rate),description:u.description,is_active:u.is_active};n&&t?await l.mutateAsync({id:t.id,data:h}):await o.mutateAsync(h),i()}catch(h){console.error("Error saving tax master:",h)}}});return vt.useEffect(()=>{c&&n&&m.setValues({name:c.name||"",code:c.code||"",tax_rate:c.tax_rate||0,description:c.description||"",is_active:c.is_active||"Y"})},[c,n]),e.jsx(it,{open:a,setOpen:i,title:n?"Edit Tax Master":"Create Tax Master",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:m.handleSubmit,className:"!space-y-4",children:[e.jsx(oe,{name:"name",label:"Tax Name",placeholder:"Enter tax name",formik:m,required:!0}),e.jsx(oe,{name:"code",label:"Tax Code",placeholder:"Enter tax code",formik:m,required:!0,disabled:n}),e.jsx(oe,{name:"tax_rate",label:"Tax Rate (%)",type:"number",placeholder:"Enter tax rate (0-100)",formik:m,required:!0,inputProps:{min:0,max:100,step:.01}}),e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter description (optional)",formik:m,multiline:!0,rows:3}),e.jsx(Ts,{name:"is_active",label:"Status",formik:m,required:!0}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2 !mt-6 !pt-4",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},BPe=nt({file:hs().required("Please select a file to import")}),UPe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:BPe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("tax_master")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"tax_master",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Tax Masters",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple tax masters. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},VPe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("tax-master"),{data:v,isFetching:N,error:C}=EF({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=RCe(),A=ls(),L=v?.stats,F=L?.total||P.length,z=L?.active||P.filter(R=>R.is_active==="Y").length,I=L?.inactive||P.filter(R=>R.is_active==="N").length,Q=L?.new_this_month||0,Y=g.useCallback(()=>{i(null),l(!0)},[]),B=g.useCallback(R=>{i(R),l(!0)},[]),q=g.useCallback(async R=>{try{await T.mutateAsync(R)}catch($){console.error("Error deleting tax master:",$)}},[T]),V=g.useCallback(R=>{s(R),h(1)},[]),G=R=>{h(R+1)},H=g.useCallback(async()=>{try{const R={search:t,is_active:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"tax_master",filters:R})}catch(R){console.error("Error exporting tax masters:",R)}},[A,t,a]),D=[{id:"name",label:"Tax Name",render:(R,$)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:$.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Gr,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:$.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:$.code})]})]})},{id:"tax_rate",label:"Tax Rate (%)",render:R=>e.jsxs(x,{variant:"body2",className:"!font-medium",children:[R,"%"]})},{id:"description",label:"Description",render:R=>R?e.jsx(x,{variant:"body2",className:"!text-gray-600",children:R.length>50?`${R.substring(0,50)}...`:R}):e.jsx("span",{className:"italic text-gray-400",children:"No description"})},{id:"is_active",label:"Status",render:R=>e.jsx(Me,{icon:R==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:R==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:R==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(R,$)=>Ie($.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(R,$)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>B($),tooltip:`Edit ${$.name}`}),S&&e.jsx(Vt,{onClick:()=>q($.id),tooltip:`Delete ${$.name}`,itemName:$.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Tax Master Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage tax rates and their configurations"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Taxes",value:F,icon:e.jsx(Gr,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Taxes",value:z,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Taxes",value:I,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:Q,icon:e.jsx(_n,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load tax masters. Please try again."}),e.jsx(ot,{data:P,columns:D,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Tax Masters...",value:t,onChange:V,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:R=>r(R.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[j&&e.jsxs(e.Fragment,{children:[e.jsx(Xt,{title:"Export Tax Masters",description:"Are you sure you want to export the current tax masters data to Excel? This will include all filtered results.",onConfirm:H,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"})]}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Y,children:"Create"})]})]}):!1,getRowId:R=>R.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:G,emptyMessage:t?`No tax masters found matching "${t}"`:"No tax masters found in the system"}),e.jsx(qPe,{selectedTaxMaster:n,setSelectedTaxMaster:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(UPe,{drawerOpen:c,setDrawerOpen:m})]})},HPe=async()=>{try{return(await ie.get("/roles-dropdown")).data}catch(t){throw t}},WPe=async t=>{try{return(await ie.get("/roles",{params:t})).data}catch(s){throw s}},YPe=async t=>(await ie.post("/roles",t)).data,GPe=async(t,s)=>(await ie.put(`/roles/${t}`,s)).data,KPe=async t=>(await ie.delete(`/roles/${t}`)).data,Am={all:["roles"],lists:()=>[...Am.all,"list"],list:t=>[...Am.lists(),t],details:()=>[...Am.all,"detail"],detail:t=>[...Am.details(),t]},GS=t=>tt({queryKey:[...Am.all,"dropdown"],queryFn:()=>HPe(),staleTime:300*1e3,...t}),QPe=(t,s)=>tt({queryKey:Am.list(t),queryFn:()=>WPe(t),staleTime:300*1e3,...s}),ZPe=t=>De({mutationFn:s=>YPe(s),loadingMessage:"Creating role...",invalidateQueries:["roles"],onSuccess:t?.onSuccess,onError:t?.onError}),XPe=t=>De({mutationFn:({id:s,roleData:a})=>GPe(s,a),loadingMessage:"Updating role...",invalidateQueries:["roles"],onSuccess:t?.onSuccess,onError:t?.onError}),JPe=t=>De({mutationFn:s=>KPe(s),loadingMessage:"Deleting role...",invalidateQueries:["roles"],onSuccess:t?.onSuccess,onError:t?.onError}),eke=async()=>{try{return(await ie.get("/permissions/by-module")).data}catch(t){throw t}},Nm={all:["permissions"],lists:()=>[...Nm.all,"list"],list:t=>[...Nm.lists(),t],details:()=>[...Nm.all,"detail"],detail:t=>[...Nm.details(),t],modules:()=>[...Nm.all,"modules"]},tke=t=>tt({queryKey:Nm.modules(),queryFn:()=>eke(),staleTime:900*1e3,...t}),ske=nt({name:me().required("Role name is required").min(2,"Role name must be at least 2 characters").max(50,"Role name must not exceed 50 characters"),description:me().max(200,"Description must not exceed 200 characters"),is_active:me().required("Status is required"),permissions:il().min(1,"At least one permission must be selected")}),ake=({selectedRole:t,setSelectedRole:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,[i,o]=g.useState(""),{data:l,isLoading:c,error:m}=tke(),u=l?.data||[],h=g.useMemo(()=>{if(!i.trim())return u;const F=i.toLowerCase();return u.map(z=>({...z,permissions:z.permissions.filter(I=>I.name.toLowerCase().includes(F))})).filter(z=>z.permissions.length>0)},[u,i]),f=ZPe({onSuccess:()=>{v()}}),b=XPe({onSuccess:()=>{v()}}),w={name:t?.name||"",description:t?.description||"",is_active:t?.is_active||"Y",permissions:t?.permissions?.filter(F=>F.is_active==="Y").map(F=>F.permission_id)||[]},S=xt({initialValues:w,validationSchema:ske,enableReinitialize:!0,onSubmit:async F=>{try{n&&t?await b.mutateAsync({id:t.id,roleData:{name:F.name,description:F.description,is_active:F.is_active,permissions:F.permissions}}):await f.mutateAsync({name:F.name,description:F.description,is_active:F.is_active,permissions:F.permissions})}catch(z){console.error("Error saving role:",z)}}}),j=F=>{F.preventDefault(),S.handleSubmit()},v=()=>{r(!1),S.resetForm(),s(null)},N=(F,z)=>{const I=S.values.permissions;z?S.setFieldValue("permissions",[...I,F]):S.setFieldValue("permissions",I.filter(Q=>Q!==F))},C=(F,z)=>{const I=F.map(Y=>Y.id),Q=S.values.permissions;if(z){const Y=[...Q];I.forEach(B=>{Y.includes(B)||Y.push(B)}),S.setFieldValue("permissions",Y)}else S.setFieldValue("permissions",Q.filter(Y=>!I.includes(Y)))},P=F=>F.map(I=>I.id).every(I=>S.values.permissions.includes(I)),E=F=>{const z=F.map(Q=>Q.id),I=z.filter(Q=>S.values.permissions.includes(Q)).length;return I>0&&I<z.length},M=()=>{const F=new Set;return h.forEach(z=>{z.permissions.forEach(I=>{F.add(I.action)})}),Array.from(F).sort()},T=()=>{const F=h.flatMap(z=>z.permissions.map(I=>I.id));return F.length>0&&F.every(z=>S.values.permissions.includes(z))},A=()=>{const F=h.flatMap(I=>I.permissions.map(Q=>Q.id)),z=F.filter(I=>S.values.permissions.includes(I)).length;return z>0&&z<F.length},L=F=>{if(F.target.checked){const z=h.flatMap(I=>I.permissions.map(Q=>Q.id));S.setFieldValue("permissions",z)}else S.setFieldValue("permissions",[])};return e.jsxs("div",{children:[e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:()=>r(!0),children:"Create"}),e.jsx(it,{open:a,setOpen:v,title:n?`Edit Role: ${t?.name}`:"Create New Role",children:e.jsxs(y,{component:"form",onSubmit:j,className:"p-4",children:[e.jsxs(y,{className:"space-y-4",children:[e.jsx("p",{className:"!font-semibold !text-gray-900",children:"Role Information"}),e.jsx("div",{className:"flex sm:flex-row flex-col sm:gap-4 gap-2",children:e.jsx(oe,{name:"name",formik:S,label:"Role Name",placeholder:"Enter role name",required:!0})}),e.jsx(Ts,{name:"is_active",formik:S,required:!0,className:"col-span-2"}),e.jsx(oe,{name:"description",formik:S,label:"Description",placeholder:"Enter role description",multiline:!0,className:"!my-2",rows:3})]}),e.jsxs(y,{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 mb-2",children:[e.jsx("p",{className:"!font-semibold !text-gray-900",children:"Permissions"}),e.jsx(y,{children:e.jsx(oe,{name:"permissionSearch",label:"Search Permissions",placeholder:"Search by permission name...",value:i,onChange:F=>o(F.target.value),className:"!w-full"})})]}),S.errors.permissions&&S.touched.permissions&&e.jsx(lt,{severity:"error",className:"!mb-4",children:S.errors.permissions}),m&&e.jsx(lt,{severity:"warning",className:"!mb-4",children:"Failed to load permissions from server. Using default permissions."}),c&&e.jsx("div",{className:"!flex !justify-center !py-4",children:e.jsx("p",{className:"!text-gray-500",children:"Loading permissions..."})}),e.jsx(ZR,{component:oa,className:"!shadow-none !border !border-gray-200",children:e.jsxs(Mw,{size:"small",className:"!min-w-full",children:[e.jsx(XR,{children:e.jsxs(Qd,{className:"!bg-gray-50",children:[e.jsx($i,{className:"!font-semibold !text-gray-700 !py-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fo,{size:"small",checked:T(),indeterminate:A(),onChange:L,className:"!text-primary-600"}),"Module"]})}),M().map(F=>e.jsx($i,{align:"center",className:"!font-semibold !capitalize !text-gray-700 !py-3 !min-w-[100px]",children:F},F))]})}),e.jsx(Dw,{children:h.length===0?e.jsx(Qd,{children:e.jsx($i,{colSpan:M().length+1,className:"!text-center !py-8",children:e.jsx("p",{className:"!text-gray-500",children:i.trim()?`No permissions found matching "${i}"`:"No permissions available"})})}):h.map(F=>e.jsxs(Qd,{className:"hover:!bg-gray-50",children:[e.jsx($i,{className:"!py-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fo,{size:"small",checked:P(F.permissions),indeterminate:E(F.permissions),onChange:z=>C(F.permissions,z.target.checked),className:"!text-primary-600"}),e.jsx("span",{className:"!font-medium !text-gray-900 !capitalize",children:F.module})]})}),M().map(z=>{const I=F.permissions.find(Q=>Q.action===z);return e.jsx($i,{align:"center",className:"!py-2",children:I?e.jsx(ete,{size:"small",checked:S.values.permissions.includes(I.id),onChange:Q=>N(I.id,Q.target.checked),className:"!text-primary-600"}):e.jsx("span",{className:"text-gray-300",children:""})},z)})]},F.module))})]})})]}),e.jsxs("div",{className:"flex gap-4 justify-end pt-4",children:[e.jsx(K,{variant:"outlined",onClick:v,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",loading:f.isPending||b.isPending,children:n?"Update Role":"Create Role"})]})]})})]})},rke=nt({file:hs().required("Please select a file to import")}),nke=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:rke,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("roles")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"roles",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Roles",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple roles. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},ike=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(1),[o]=g.useState(10),[l,c]=g.useState(null),[m,u]=g.useState(!1),[h,f]=g.useState(!1),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("role"),{data:v,isFetching:N,error:C}=QPe({search:t,page:n,limit:o,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=v?.stats,A=JPe(),L=ls(),F=[{id:"name",label:"Role Name",render:(B,q)=>e.jsx("span",{className:"font-semibold",children:q.name})},{id:"is_active",label:"Status",render:B=>e.jsx(Me,{icon:B==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:B==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:B==="Y"?"success":"error"})},{id:"user_role",label:"Users Count",render:(B,q)=>e.jsxs(y,{className:"!flex !gap-1 !items-center",children:[e.jsx(ule,{className:"!text-gray-500 !text-sm"}),e.jsx(x,{variant:"body2",className:"!text-gray-700",children:q.user_role?.length||0})]})},{id:"permissions",label:"Permissions",render:(B,q)=>e.jsxs(x,{variant:"body2",className:"!text-gray-700",children:[q.permissions?.filter(V=>V.is_active==="Y").length||0," active"]})},{id:"description",label:"Description",render:(B,q)=>q.description?e.jsx(qa,{title:q.description,placement:"top",arrow:!0,children:e.jsx(y,{component:"span",className:"!block !max-w-[200px] !truncate",children:q.description})}):e.jsx("span",{className:"italic text-gray-400",children:"No Description"})},...w||S||j?[{id:"action",label:"Actions",width:"120px",sortable:!1,render:(B,q)=>e.jsxs(y,{className:"!flex !gap-1",children:[w&&e.jsx(rs,{onClick:()=>z(q),tooltip:`Edit ${q.name}`}),S&&e.jsx(Vt,{onClick:()=>I(q.id),tooltip:`Delete ${q.name}`,itemName:q.name,confirmDelete:!0})]})}]:[]],z=g.useCallback(B=>{c(B),console.log(B),u(!0)},[]),I=g.useCallback(async B=>{try{await A.mutateAsync(B)}catch(q){console.error("Error deleting role:",q)}},[A]),Q=g.useCallback(async()=>{try{const B={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await L.mutateAsync({tableName:"roles",filters:B})}catch(B){console.error("Error exporting roles:",B)}},[L,t,a]),Y=g.useCallback(B=>{s(B),i(1)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Role & Permissions Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage system roles and their associated permissions"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Roles",value:T?.total_roles||0,icon:e.jsx(eA,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Roles",value:T?.active_roles||0,icon:e.jsx(Soe,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Roles",value:T?.inactive_roles||0,icon:e.jsx(Poe,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:T?.new_roles||0,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load roles. Please try again."}),e.jsx(ot,{data:P,columns:F,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[j&&e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx(ts,{placeholder:"Search Roles",value:t,onChange:Y,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:B=>{r(B.target.value),i(1)},className:"!min-w-32",size:"small",placeholder:"Status",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]}),b&&e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Roles",description:"Are you sure you want to export current roles data to Excel? This will include all filtered results.",onConfirm:Q,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:L.isPending,children:L.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>f(!0),children:"Import"}),e.jsx(ake,{selectedRole:l,setSelectedRole:c,setDrawerOpen:u,drawerOpen:m}),e.jsx(nke,{drawerOpen:h,setDrawerOpen:f})]})]}):!1,getRowId:B=>B.id,initialOrderBy:"name",loading:N,pagination:!0,totalCount:E,page:M,rowsPerPage:o,onPageChange:B=>i(B+1),isPermission:j,emptyMessage:t?`No roles found matching "${t}"`:"No roles found in the system"})]})},oke=nt({file:hs().required("Please select a file to import")}),lke=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:oke,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("routes")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"routes",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Routes",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple routes. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},cke=nt({parent_id:me().required("Zone is required").test("is-number","Zone must be a valid selection",t=>t?!isNaN(Number(t)):!1),depot_id:me().required("Depot is required").test("is-number","Depot must be a valid selection",t=>t?!isNaN(Number(t)):!1),route_type_id:me().required("Route type is required").test("is-number","Route type must be a valid selection",t=>t?!isNaN(Number(t)):!1),name:me().required("Route name is required").min(2,"Route name must be at least 2 characters").max(100,"Route name must not exceed 100 characters").trim(),description:me().max(500,"Description must not exceed 500 characters").trim(),salesperson_id:me().test("is-number-or-empty","Salesperson must be a valid selection",t=>!t||!isNaN(Number(t))),start_location:me().max(200,"Start location must not exceed 200 characters").trim(),end_location:me().max(200,"End location must not exceed 200 characters").trim(),estimated_distance:me().test("is-positive-number-or-empty","Distance must be a positive number",t=>{if(!t)return!0;const s=Number(t);return!isNaN(s)&&s>0}),estimated_time:me().test("is-positive-integer-or-empty","Time must be a positive integer",t=>{if(!t)return!0;const s=Number(t);return!isNaN(s)&&s>0&&Number.isInteger(s)}),is_active:me().required("Status is required").oneOf(["Y","N"],"Status must be either Active or Inactive")}),dke=({name:t,label:s,required:a=!1,fullWidth:r=!0,size:n="small",formik:i,setValue:o,value:l,onChange:c,className:m,placeholder:u="Select Users...",colorPattern:h="blue"})=>{const[f,b]=g.useState(""),[w,S]=g.useState([]),{data:j,isFetching:v,refetch:N}=G9({search:f}),C=j?.data||[],E=(F=>{const z={blue:{chip:"!bg-blue-100 !text-blue-700 !border-blue-300",avatar:"!bg-blue-200 !text-blue-800",deleteIcon:"!text-blue-600 hover:!bg-blue-200"},green:{chip:"!bg-green-100 !text-green-700 !border-green-300",avatar:"!bg-green-200 !text-green-800",deleteIcon:"!text-green-600 hover:!bg-green-200"},orange:{chip:"!bg-orange-100 !text-orange-700 !border-orange-300",avatar:"!bg-orange-200 !text-orange-800",deleteIcon:"!text-orange-600 hover:!bg-orange-200"},red:{chip:"!bg-red-100 !text-red-700 !border-red-300",avatar:"!bg-red-200 !text-red-800",deleteIcon:"!text-red-600 hover:!bg-red-200"},purple:{chip:"!bg-purple-100 !text-purple-700 !border-purple-300",avatar:"!bg-purple-200 !text-purple-800",deleteIcon:"!text-purple-600 hover:!bg-purple-200"},blueish:{chip:"!bg-sky-100 !text-sky-700 !border-sky-300",avatar:"!bg-sky-200 !text-sky-800",deleteIcon:"!text-sky-600 hover:!bg-sky-200"},default:{chip:"!bg-gray-100 !text-gray-700 !border-gray-300",avatar:"!bg-gray-200 !text-gray-800",deleteIcon:"!text-gray-600 hover:!bg-gray-200"}};return z[F]||z.default})(h);g.useEffect(()=>{if(i&&t){const F=i.values[t];if(Array.isArray(F)&&F.length>0){const z=F,I=C.filter(Q=>z.includes(Q.id));S(I)}}else if(l&&Array.isArray(l)){const F=C.filter(z=>l.includes(z.id));S(F)}},[i,t,l,C]);const M=g.useCallback((F,z)=>{S(z);const I=z.map(Q=>Q.id);i&&t&&i.setFieldValue(t,I),o&&o(I),c&&c(F,z)},[i,t,o,c]),T=g.useCallback((F,z)=>{b(z),z.length>0&&N()},[N]),L=g.useCallback(()=>{if(i&&t){const F=i.touched[t],z=i.errors[t];return F&&z?String(z):""}return""},[i,t])();return e.jsx(Ir,{multiple:!0,id:`multi-user-select-${t||"default"}`,options:C,getOptionLabel:F=>F.name||"",isOptionEqualToValue:(F,z)=>F.id===z.id,value:w,onChange:M,onInputChange:T,inputValue:f,loading:v,renderOption:(F,z)=>g.createElement(y,{component:"li",...F,key:z.id,className:"!flex !items-center !gap-2 cursor-pointer py-1 px-2 hover:!bg-gray-50"},e.jsx(ut,{src:z.profile_image||"mkx",alt:z.name,className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{children:[e.jsx("p",{className:"!text-gray-900 !text-sm",children:z.name||""}),z.email&&e.jsx("p",{className:"!text-gray-500 !text-xs",children:z.email})]})),renderValue:(F,z)=>F.map((I,Q)=>e.jsx(Me,{avatar:e.jsx(ut,{src:I.profile_image,alt:I.name,className:FN("!w-4 !h-4",E.avatar),children:I.name.charAt(0).toUpperCase()}),size:"small",label:I.name,...z({index:Q}),onDelete:()=>{const Y=F.filter((q,V)=>V!==Q);S(Y);const B=Y.map(q=>q.id);i&&t&&i.setFieldValue(t,B),o&&o(B),c&&c({},Y)},className:FN("!m-1 !py-1 !border",E.chip,"[&_.MuiChip-deleteIcon]:!text-inherit [&_.MuiChip-deleteIcon:hover]:!bg-inherit")})),renderInput:F=>e.jsx(mr,{...F,label:s,required:a,error:!!L,helperText:L,placeholder:u,size:n,fullWidth:r,className:m,InputProps:{...F.InputProps,endAdornment:e.jsxs(e.Fragment,{children:[v?e.jsx(Ki,{color:"inherit",size:20}):null,F.InputProps.endAdornment]})}}),filterSelectedOptions:!0,noOptionsText:f?"No users found":"Type to search users",className:FN("w-full",m)})},uke=({selectedRoute:t,setSelectedRoute:s,drawerOpen:a,setDrawerOpen:r,depots:n,zones:i})=>{const o=!!t,l=()=>{s(null),r(!1),f.resetForm()},c=s3e(),m=a3e(),{data:u}=WS({status:"active"}),h=u?.data||[],f=xt({initialValues:{parent_id:t?.parent_id?.toString()||"",depot_id:t?.depot_id?.toString()||"",route_type_id:t?.route_type_id?.toString()||"",name:t?.name||"",description:t?.description||"",sales_persons:t?.salespersons?.map(b=>b.user.id)||[],start_location:t?.start_location||"",end_location:t?.end_location||"",estimated_distance:t?.estimated_distance?.toString()||"",estimated_time:t?.estimated_time?.toString()||"",is_active:t?.is_active||"Y"},validationSchema:cke,enableReinitialize:!0,onSubmit:async b=>{try{const w={parent_id:Number(b.parent_id),depot_id:Number(b.depot_id),route_type_id:Number(b.route_type_id),name:b.name,description:b.description,salespersons:b.sales_persons?.map(S=>({user_id:S}))||[],start_location:b.start_location,end_location:b.end_location,estimated_distance:b.estimated_distance?Number(b.estimated_distance):void 0,estimated_time:b.estimated_time?Number(b.estimated_time):void 0,is_active:b.is_active};o&&t?await m.mutateAsync({id:t.id,...w}):await c.mutateAsync(w),l()}catch(w){console.error("Error saving route:",w)}}});return e.jsx(it,{open:a,setOpen:l,title:o?"Edit Route":"Create Route",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(_e,{name:"parent_id",label:"Zone",formik:f,required:!0,children:i.map(b=>e.jsx(Z,{value:b.id.toString(),children:b.name},b.id))}),e.jsx(_e,{name:"depot_id",label:"Depot",formik:f,required:!0,children:n.map(b=>e.jsxs(Z,{value:b.id.toString(),children:[b.name," (",b.code,")"]},b.id))}),e.jsx(_e,{name:"route_type_id",label:"Route Type",formik:f,required:!0,children:h.map(b=>e.jsx(Z,{value:b.id.toString(),children:b.name},b.id))}),e.jsx(oe,{name:"name",label:"Route Name",placeholder:"Enter route name",formik:f,required:!0}),e.jsx(oe,{name:"start_location",label:"Start Location",placeholder:"Enter starting point",formik:f}),e.jsx(oe,{name:"end_location",label:"End Location",placeholder:"Enter ending point",formik:f}),e.jsx(oe,{name:"estimated_distance",label:"Estimated Distance (km)",type:"number",placeholder:"Enter distance in kilometers",formik:f,slotProps:{htmlInput:{step:"0.1",min:"0"}}}),e.jsx(oe,{name:"estimated_time",label:"Estimated Time (minutes)",type:"number",placeholder:"Enter time in minutes",formik:f,slotProps:{htmlInput:{min:"0"}}}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(dke,{name:"sales_persons",label:"Salespersons",formik:f,className:"!col-span-2"})}),e.jsx(y,{children:e.jsx(Ts,{name:"is_active",formik:f,required:!0})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter route description",formik:f,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3 !pt-4",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:l,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",loading:c.isPending||m.isPending,children:o?"Update Route":"Create Route"})]})]})})})},mke=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState("all"),[l,c]=g.useState(null),[m,u]=g.useState(!1),[h,f]=g.useState(!1),[b,w]=g.useState(1),[S]=g.useState(10),{isCreate:j,isUpdate:v,isDelete:N,isRead:C}=Qe("route"),{data:P,isFetching:E,error:M}=l1({search:s,page:b,limit:S,status:r==="all"?void 0:r==="active"?"active":"inactive",depot_id:i==="all"?void 0:Number(i)},{enabled:C}),{data:T}=No({page:1,limit:100,isActive:"Y"}),{data:A}=Jl({page:1,limit:100,isActive:"Y"}),L=P?.data||[],F=T?.data||[],z=A?.data||[],I=P?.meta?.total||0,Q=(P?.meta?.page||1)-1,Y=r3e(),B=ls(),q=P?.stats?.total_routes??L.length,V=P?.stats?.active_routes??L.filter(ce=>ce.is_active==="Y").length,G=P?.stats?.inactive_routes??L.filter(ce=>ce.is_active==="N").length,H=P?.stats?.routes_this_month||0,D=g.useCallback(()=>{c(null),u(!0)},[]),R=g.useCallback(async()=>{try{const ce={search:s,isActive:r==="all"?void 0:r==="active"?"Y":"N"};await B.mutateAsync({tableName:"routes",filters:ce})}catch(ce){console.error("Error exporting routes:",ce)}},[B,s,r]),$=g.useCallback(ce=>{c(ce),u(!0)},[]),W=g.useCallback(ce=>{t(`/masters/routes/${ce.id}`)},[t]),J=g.useCallback(async ce=>{try{await Y.mutateAsync({id:ce})}catch(he){console.error("Error deleting route:",he)}},[Y]),te=g.useCallback(ce=>{a(ce),w(1)},[]),ee=ce=>{w(ce+1)},ae=[{id:"name",label:"Route & Code",render:(ce,he)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:he.name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(qc,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:he.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:he.code})]})]})},{id:"depot",label:"Depot",render:(ce,he)=>e.jsxs(y,{className:"!flex !items-center !gap-2",children:[e.jsx(ut,{className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(_n,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!font-medium",children:he.route_depots?.name||"N/A"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:he.route_depots?.code||""})]})]})},{id:"zone",label:"Zone",render:(ce,he)=>e.jsxs(y,{className:"!flex !items-center !gap-2",children:[e.jsx(ut,{className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(Pie,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!font-medium",children:he.route_zones?.name||"N/A"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:he.route_zones?.code||""})]})]})},{id:"salesperson",label:"Sales Person",render:(ce,he)=>e.jsx(y,{className:"!flex !items-center !gap-2",children:he.salespersons&&he.salespersons.length>0?e.jsx(e.Fragment,{children:e.jsx(y,{className:"!flex !items-center !gap-2",children:e.jsx(YQ,{max:3,children:he.salespersons.map(ne=>e.jsx(qa,{title:`${ne.user.name} (${ne.role})`,arrow:!0,placement:"top",children:e.jsx(ut,{alt:ne.user.name,src:"mkx",className:"!bg-primary-100 !text-primary-600",children:ne.user.name.charAt(0).toUpperCase()},ne.id)}))})})}):e.jsxs(e.Fragment,{children:[e.jsx(Ct,{className:"w-4 h-4 text-gray-400"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Unassigned"})]})})},{id:"description",label:"Description",render:(ce,he)=>e.jsx(qa,{title:he.description,placement:"top",arrow:!0,children:e.jsx(x,{variant:"body2",className:"!text-gray-600 !max-w-xs !truncate",children:he.description||"No description"})})},{id:"is_active",label:"Status",render:ce=>e.jsx(Me,{icon:ce==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:ce==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:ce==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(ce,he)=>Ie(he.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...v||N||C?[{id:"action",label:"Actions",sortable:!1,render:(ce,he)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[C&&e.jsx(Wa,{onClick:()=>W(he),tooltip:`View ${he.name}`,icon:e.jsx(Sn,{fontSize:"small"}),color:"info"}),v&&e.jsx(rs,{onClick:()=>$(he),tooltip:`Edit ${he.name}`}),N&&e.jsx(Vt,{onClick:()=>J(he.id),tooltip:`Delete ${he.name}`,itemName:he.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Route Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage sales routes, assignments, and territory coverage"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Routes",value:q,icon:e.jsx(qc,{className:"w-6 h-6"}),color:"blue",isLoading:E}),e.jsx(fe,{title:"Active Routes",value:V,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:E}),e.jsx(fe,{title:"Inactive Routes",value:G,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:E}),e.jsx(fe,{title:"New This Month",value:H,icon:e.jsx(Xd,{className:"w-6 h-6"}),color:"purple",isLoading:E})]}),M&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load routes. Please try again."}),e.jsx(ot,{data:L,columns:ae,actions:C||j?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex items-center flex-wrap gap-2",children:C&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Routes",value:s,onChange:te,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:r,onChange:ce=>n(ce.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:i,onChange:ce=>o(ce.target.value),className:"!min-w-80",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Depots"}),F.map(ce=>e.jsx(Z,{value:ce.id.toString(),children:ce.name},ce.id))]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Routes",description:"Are you sure you want to export the current routes data to Excel? This will include all filtered results.",onConfirm:R,confirmText:"Export",cancelText:"Cancel",children:e.jsx(K,{variant:"outlined",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(St,{}),disabled:B.isPending,children:B.isPending?"Exporting...":"Export"})}),j&&e.jsx(K,{variant:"outlined",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(fs,{}),onClick:()=>f(!0),children:"Import"}),j&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:D,children:"Create"})]})]}):!1,getRowId:ce=>ce.id,initialOrderBy:"name",loading:E,totalCount:I,page:Q,rowsPerPage:S,isPermission:C,onPageChange:ee,emptyMessage:s?`No routes found matching "${s}"`:"No routes found in the system"}),e.jsx(uke,{selectedRoute:l,setSelectedRoute:c,drawerOpen:m,setDrawerOpen:u,depots:F,zones:z}),e.jsx(lke,{drawerOpen:h,setDrawerOpen:f})]})},pke=()=>{const{id:t}=Kr(),s=Ws(),{formatCurrency:a}=Ya(),{data:r,isLoading:n,error:i,isFetching:o}=t3e(Number(t)),l=r?.data,c=()=>{s("/masters/routes")},m=f=>{switch(f?.toLowerCase()){case"completed":return"success";case"in_progress":return"warning";case"planned":return"info";case"cancelled":return"error";default:return"default"}},u=f=>f?f.charAt(0).toUpperCase()+f.slice(1).replace("_"," "):"Unknown";if(n||o)return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"!flex-2 flex flex-col gap-4",children:e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"!absolute !top-3 !right-3",children:e.jsx(X,{variant:"circular",width:10,height:10,className:"!bg-green-200"})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !border-3 !border-white"})}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-green-50"}),e.jsxs("div",{className:"!space-y-2 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"30%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"60%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"40%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"70%",height:14})]})]})]})}),e.jsx("div",{className:"!flex-4 !space-y-4",children:e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4,5,6].map(f=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${40+f*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+f*6}%`,height:16})]},f))})]})]})})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 lg:!grid-cols-3 !gap-4",children:[1,2,3].map(f=>e.jsxs("div",{className:"!p-5 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx(X,{variant:"text",width:"60%",height:20,className:"!mb-2"}),e.jsx(X,{variant:"text",width:"40%",height:12,className:"!mb-3"}),e.jsxs("div",{className:"!space-y-2",children:[e.jsx(X,{variant:"text",width:"50%",height:10}),e.jsx(X,{variant:"text",width:"70%",height:14}),e.jsx(X,{variant:"text",width:"45%",height:10}),e.jsx(X,{variant:"text",width:"80%",height:14})]})]},f))})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!space-y-4",children:[1,2].map(f=>e.jsxs("div",{className:"!p-5 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx(X,{variant:"text",width:"40%",height:20,className:"!mb-3"}),e.jsx("div",{className:"!grid !grid-cols-2 md:!grid-cols-4 !gap-4 !mt-4",children:[1,2,3,4,5,6].map(b=>e.jsxs("div",{children:[e.jsx(X,{variant:"text",width:"60%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"80%",height:14})]},b))})]},f))})]})]})]});if(i||!l)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load route details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:c,className:"mt-4",children:"Back to Routes"})]});const h=({title:f,children:b,icon:w})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[w&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(w,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:f})]}),b]})]});return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${l.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":l.is_active==="Y","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":l.is_active!=="Y"}),children:e.jsx(qc,{className:"!w-8 !h-8"})})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:l.name}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:l.code}),e.jsx("div",{className:"!flex !justify-center !gap-2 !mb-4",children:e.jsx(Me,{icon:l.is_active==="Y"?e.jsx(mt,{fontSize:"small"}):e.jsx(cu,{fontSize:"small"}),label:l.is_active==="Y"?"Active":"Inactive",size:"small",color:l.is_active==="Y"?"success":"error"})}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[l.route_depots&&e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Depot"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[l.route_depots.name," (",l.route_depots.code,")"]})]}),l.createdate&&e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Created Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof l.createdate=="string"?l.createdate:String(l.createdate||""))})]})]})]}),e.jsx(h,{title:"Route Details",icon:Xd,children:e.jsx("div",{className:"!space-y-3",children:l.start_location||l.end_location?e.jsxs(e.Fragment,{children:[l.start_location&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Ks,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Start Location"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:l.start_location})]})]})}),l.end_location&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Ks,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"End Location"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:l.end_location})]})]})}),(l.estimated_distance||l.estimated_time)&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !gap-4",children:[l.estimated_distance&&e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Xd,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Distance"}),e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:[l.estimated_distance," km"]})]})]}),l.estimated_time&&e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Ds,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Duration"}),e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:[l.estimated_time," minutes"]})]})]})]})})]}):e.jsxs("div",{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(Xd,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:"No location details available for this route."})]})})})]}),e.jsx("div",{className:"!flex-4 !space-y-4",children:e.jsx(h,{title:"Route Information",icon:qc,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Route Code"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.code})]}),l.route_depots&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Depot"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.route_depots.name})]}),l.route_zones&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Zone"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.route_zones.name})]}),l.routes_route_type&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Route Type"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.routes_route_type.name})]}),l.routes_salesperson&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Salesperson"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.routes_salesperson.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:l.routes_salesperson.email})]}),l.start_location&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Start Location"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.start_location})]}),l.end_location&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"End Location"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.end_location})]}),l.estimated_distance&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Estimated Distance"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[l.estimated_distance," km"]})]}),l.estimated_time&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Estimated Time"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[l.estimated_time," minutes"]})]}),l.description&&e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Description"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.description})]}),l.createdate&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Created Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof l.createdate=="string"?l.createdate:String(l.createdate||""))})]}),l.updatedate&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Last Updated"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof l.updatedate=="string"?l.updatedate:String(l.updatedate||""))})]})]})})})]}),l.customer_routes&&l.customer_routes.length>0&&e.jsx(h,{title:"Assigned Customers",icon:la,children:e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 lg:!grid-cols-3 !gap-4",children:l.customer_routes.map(f=>e.jsxs("div",{className:"!p-5 !bg-gray-50 !rounded-md !border !border-gray-200 !hover:!shadow-md !transition-shadow",children:[e.jsx("div",{className:"!flex !items-start !justify-between !mb-3",children:e.jsxs("div",{className:"!flex-1",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-2 !flex-wrap",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:f.name}),f.code&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !bg-gray-200 !px-2 !py-0.5 !rounded !font-medium",children:f.code}),e.jsx(Me,{label:f.is_active==="Y"?"Active":"Inactive",size:"small",color:f.is_active==="Y"?"success":"error"})]}),f.type&&e.jsxs(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:["Type:"," ",e.jsx("span",{className:"!font-semibold",children:f.type})]})]})}),e.jsxs("div",{className:"!space-y-3",children:[f.contact_person&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Contact Person"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:f.contact_person})]}),e.jsxs("div",{className:"!grid !grid-cols-1 !gap-2",children:[f.phone_number&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Phone Number"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:f.phone_number})]}),f.email&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Email"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !break-all",children:f.email})]})]}),(f.city||f.state||f.zipcode)&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Location"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[f.city,f.state,f.zipcode].filter(Boolean).join(", ")||"N/A"})]}),f.address&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Address"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:f.address})]})]})]},f.id))})}),l.visit_routes&&l.visit_routes.length>0?e.jsx(h,{title:"Visits History",icon:Ds,children:e.jsx("div",{className:"!space-y-4",children:l.visit_routes.map(f=>e.jsxs("div",{className:"!p-5 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx("div",{className:"!flex !items-start !justify-between !mb-3",children:e.jsxs("div",{className:"!flex-1",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-2",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:f.visit_customers?.name||"Unknown Customer"}),f.visit_customers?.code&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !bg-gray-200 !px-2 !py-0.5 !rounded",children:f.visit_customers.code}),e.jsx(Me,{label:u(f.status),size:"small",color:m(f.status)})]}),f.visits_salesperson&&e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Salesperson: ",f.visits_salesperson.name," (",f.visits_salesperson.email,")"]})]})}),e.jsxs("div",{className:"!grid !grid-cols-2 md:!grid-cols-4 !gap-4 !mt-4",children:[f.visit_date&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Visit Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof f.visit_date=="string"?f.visit_date:String(f.visit_date||""))})]}),f.visit_time&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Visit Time"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:f.visit_time})]}),f.purpose&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Purpose"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:f.purpose})]}),f.duration&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Duration"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[f.duration," min"]})]}),f.orders_created!==null&&f.orders_created!==void 0&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Orders Created"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:f.orders_created})]}),f.amount_collected&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Amount Collected"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-primary-600",children:a(Number(f.amount_collected))})]}),f.next_visit_date&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Next Visit"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof f.next_visit_date=="string"?f.next_visit_date:String(f.next_visit_date||""))})]})]}),(f.check_in_time||f.check_out_time)&&e.jsx("div",{className:"!mt-4 !pt-4 !border-t !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !gap-6",children:[f.check_in_time&&e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Ds,{className:"w-4 h-4 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block",children:"Check-in"}),e.jsx(x,{variant:"body2",className:"!font-medium !text-gray-900",children:Ie(typeof f.check_in_time=="string"?f.check_in_time:String(f.check_in_time||""))})]})]}),f.check_out_time&&e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Ds,{className:"w-4 h-4 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block",children:"Check-out"}),e.jsx(x,{variant:"body2",className:"!font-medium !text-gray-900",children:Ie(typeof f.check_out_time=="string"?f.check_out_time:String(f.check_out_time||""))})]})]})]})}),f.visit_notes&&e.jsxs("div",{className:"!mt-4 !pt-4 !border-t !border-gray-200",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Visit Notes"}),e.jsx(x,{variant:"body2",className:"!text-gray-700 !bg-white !p-3 !rounded !border !border-gray-200",children:f.visit_notes})]}),f.customer_feedback&&e.jsxs("div",{className:"!mt-4 !pt-4 !border-t !border-gray-200",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Customer Feedback"}),e.jsx(x,{variant:"body2",className:"!text-gray-700 !bg-white !p-3 !rounded !border !border-gray-200",children:f.customer_feedback})]})]},f.id))})}):e.jsx(h,{title:"Visits History",icon:Ds,children:e.jsxs("div",{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(Ds,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:"No visits recorded for this route yet."})]})}),e.jsx("div",{className:"!mt-4",children:e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:c,children:"Back to Routes"})})]})},hke=nt({file:hs().required("Please select a file to import")}),fke=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:hke,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("route_type")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"route_type",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Route Types",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple route types. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},xke=nt().shape({name:me().required("Route type name is required").min(1,"Route type name must be at least 1 character").max(100,"Route type name must be at most 100 characters").trim(),is_active:me().oneOf(["Y","N"],"Status must be Y or N").required("Status is required")}),gke=({selectedRouteType:t,setSelectedRouteType:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=NCe(),o=wCe(),l=()=>{s(null),r(!1),c.resetForm()},c=xt({initialValues:{name:t?.name||"",is_active:t?.is_active||"Y"},validationSchema:xke,enableReinitialize:!0,onSubmit:async m=>{try{n&&t?await o.mutateAsync({id:t.id,data:m}):await i.mutateAsync(m),l()}catch(u){console.error("Error saving route type:",u)}}});return e.jsx(it,{open:a,setOpen:l,title:n?"Edit Route Type":"Create Route Type",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-5",children:[e.jsxs(y,{className:"!grid !grid-cols-1 !gap-5",children:[e.jsx(oe,{name:"name",label:"Route Type Name",placeholder:"Enter route type name",formik:c,required:!0}),e.jsx(Ts,{name:"is_active",formik:c,required:!0})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:l,className:"!mr-3",disabled:i.isPending||o.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:i.isPending||o.isPending,children:i.isPending||o.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},yke=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("route-type"),{data:v,isLoading:N,error:C}=WS({search:t,page:u,limit:f,status:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=_Ce(),A=ls(),L=v?.stats?.total_route_types??0,F=v?.stats?.active_route_types??0,z=v?.stats?.inactive_route_types??0,I=v?.stats?.route_types_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting route type:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,status:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"route_type",filters:D})}catch(D){console.error("Error exporting route types:",D)}},[A,t,a]),H=[{id:"name",label:"Route Type Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(y,{className:"!w-8 !h-8 !rounded !bg-primary-100 !flex !items-center !justify-center",children:e.jsx(qc,{className:"w-4 h-4 text-primary-500"})}),e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:R.name})]})},{id:"is_active",label:"Status",render:(D,R)=>e.jsx(Me,{icon:R.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:R.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:R.is_active==="Y"?"success":"error"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Route Types"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage and configure route types for your delivery routes"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Route Types",value:L,icon:e.jsx(qc,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Route Types",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Route Types",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"This Month",value:I,icon:e.jsx(qc,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load route types. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Route Types...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>r(D.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Route Types",description:"Are you sure you want to export the current route types data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No route types found matching "${t}"`:"No route types found in the system"}),e.jsx(gke,{selectedRouteType:n,setSelectedRouteType:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(fke,{drawerOpen:c,setDrawerOpen:m})]})},bke=async t=>{try{return(await ie.get("/sales-bonus-rule",{params:t})).data}catch(s){throw console.error("Error fetching sales bonus rules:",s),new Error(s.response?.data?.message||"Failed to fetch sales bonus rules")}},vke=async t=>{try{return(await ie.post("/sales-bonus-rule",t)).data.data}catch(s){throw console.error("Error creating sales bonus rule:",s),new Error(s.response?.data?.message||"Failed to create sales bonus rule")}},jke=async(t,s)=>{try{return(await ie.put(`/sales-bonus-rule/${t}`,s)).data.data}catch(a){throw console.error("Error updating sales bonus rule:",a),new Error(a.response?.data?.message||"Failed to update sales bonus rule")}},Nke=async t=>{try{await ie.delete(`/sales-bonus-rule/${t}`)}catch(s){throw console.error("Error deleting sales bonus rule:",s),new Error(s.response?.data?.message||"Failed to delete sales bonus rule")}},Af={all:["sales-bonus-rules"],lists:()=>[...Af.all,"list"],list:t=>[...Af.lists(),t],details:()=>[...Af.all,"detail"],detail:t=>[...Af.details(),t]},wke=(t,s)=>tt({queryKey:Af.list(t),queryFn:()=>bke(t),staleTime:300*1e3,...s}),_ke=()=>De({mutationFn:vke,invalidateQueries:["sales-bonus-rules"],loadingMessage:"Creating sales bonus rule..."}),Ske=()=>De({mutationFn:({id:t,data:s})=>jke(t,s),invalidateQueries:["sales-bonus-rules"],loadingMessage:"Updating sales bonus rule..."}),Cke=()=>De({mutationFn:Nke,invalidateQueries:["sales-bonus-rules"],loadingMessage:"Deleting sales bonus rule..."}),Pke=nt({file:hs().required("Please select a file to import")}),kke=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:Pke,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("sales_bonus_rules")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"sales_bonus_rules",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Sales Bonus Rules",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple sales bonus rules. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},Eke=async t=>{try{return(await ie.get("/sales-targets",{params:t})).data}catch(s){throw console.error("Error fetching sales targets:",s),new Error(s.response?.data?.message||"Failed to fetch sales targets")}},Tke=async t=>{try{return(await ie.post("/sales-targets",t)).data.data}catch(s){throw console.error("Error creating sales target:",s),new Error(s.response?.data?.message||"Failed to create sales target")}},Mke=async(t,s)=>{try{return(await ie.put(`/sales-targets/${t}`,s)).data.data}catch(a){throw console.error("Error updating sales target:",a),new Error(a.response?.data?.message||"Failed to update sales target")}},Dke=async t=>{try{await ie.delete(`/sales-targets/${t}`)}catch(s){throw console.error("Error deleting sales target:",s),new Error(s.response?.data?.message||"Failed to delete sales target")}},If={all:["sales-targets"],lists:()=>[...If.all,"list"],list:t=>[...If.lists(),t],details:()=>[...If.all,"detail"],detail:t=>[...If.details(),t]},RF=(t,s)=>tt({queryKey:If.list(t),queryFn:()=>Eke(t),staleTime:300*1e3,...s}),Rke=()=>De({mutationFn:Tke,invalidateQueries:["sales-targets"],loadingMessage:"Creating sales target..."}),Ake=()=>De({mutationFn:({id:t,data:s})=>Mke(t,s),invalidateQueries:["sales-targets"],loadingMessage:"Updating sales target..."}),Ike=()=>De({mutationFn:Dke,invalidateQueries:["sales-targets"],loadingMessage:"Deleting sales target..."}),Oke=nt().shape({sales_target_id:Ge().required("Sales target is required").min(1,"Please select a valid sales target"),achievement_min_percent:Ge().required("Minimum achievement percentage is required").min(0,"Minimum achievement percentage must be at least 0").max(100,"Minimum achievement percentage cannot exceed 100").test("less-than-max","Minimum achievement percentage must be less than maximum achievement percentage",function(t){const{achievement_max_percent:s}=this.parent;return!s||!t||t<s}),achievement_max_percent:Ge().required("Maximum achievement percentage is required").min(0,"Maximum achievement percentage must be at least 0").max(100,"Maximum achievement percentage cannot exceed 100").test("greater-than-min","Maximum achievement percentage must be greater than minimum achievement percentage",function(t){const{achievement_min_percent:s}=this.parent;return!s||!t||t>s}),bonus_amount:Ge().nullable().min(0,"Bonus amount must be non-negative").test("bonus-or-percent","Either bonus amount or bonus percentage must be provided",function(t){const{bonus_percent:s}=this.parent;return t||s}),bonus_percent:Ge().nullable().min(0,"Bonus percentage must be non-negative").max(100,"Bonus percentage cannot exceed 100").test("bonus-or-percent","Either bonus amount or bonus percentage must be provided",function(t){const{bonus_amount:s}=this.parent;return t||s}),is_active:me().required("Status is required").oneOf(["Y","N"],"Status must be either Active (Y) or Inactive (N)")}),Fke=({selectedRule:t,setSelectedRule:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,{data:i}=RF({page:1,limit:1e3,is_active:"Y"}),o=i?.data||[],l=_ke(),c=Ske(),m=()=>{s(null),r(!1),u.resetForm()},u=xt({initialValues:{sales_target_id:t?.sales_target_id||0,achievement_min_percent:t?.achievement_min_percent||"",achievement_max_percent:t?.achievement_max_percent||"",bonus_amount:t?.bonus_amount||"",bonus_percent:t?.bonus_percent||"",is_active:t?.is_active||"Y"},validationSchema:Oke,enableReinitialize:!0,onSubmit:async h=>{try{const f={...h,sales_target_id:Number(h.sales_target_id),achievement_min_percent:Number(h.achievement_min_percent),achievement_max_percent:Number(h.achievement_max_percent),bonus_amount:h.bonus_amount?Number(h.bonus_amount):void 0,bonus_percent:h.bonus_percent?Number(h.bonus_percent):void 0};n&&t?await c.mutateAsync({id:t.id,data:f}):await l.mutateAsync(f),m()}catch(f){console.error("Error submitting sales bonus rule:",f)}}});return e.jsx(it,{open:a,setOpen:m,title:n?"Edit Sales Bonus Rule":"Create Sales Bonus Rule",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:u.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(_e,{name:"sales_target_id",label:"Sales Target",formik:u,required:!0,children:o.map(h=>e.jsxs(Z,{value:h.id,children:[h.sales_target_group?.group_name||"Unknown Group"," -"," ",h.product_category?.category_name||"Unknown Category"," "]},h.id))}),e.jsx(oe,{name:"achievement_min_percent",label:"Minimum Achievement %",type:"number",placeholder:"Enter minimum achievement percentage",formik:u,required:!0,inputProps:{min:0,max:100,step:.01}}),e.jsx(oe,{name:"achievement_max_percent",label:"Maximum Achievement %",type:"number",placeholder:"Enter maximum achievement percentage",formik:u,required:!0,inputProps:{min:0,max:100,step:.01}}),e.jsx(oe,{name:"bonus_amount",label:"Bonus Amount",type:"number",placeholder:"Enter bonus amount (optional)",formik:u,inputProps:{min:0,step:.01}}),e.jsx(oe,{name:"bonus_percent",label:"Bonus Percentage",type:"number",placeholder:"Enter bonus percentage (optional)",formik:u,inputProps:{min:0,max:100,step:.01}}),e.jsx(Ts,{name:"is_active",formik:u,required:!0,className:"col-span-2"})]}),e.jsxs(y,{className:"!bg-blue-50 !p-4 !rounded-lg",children:[e.jsx("h4",{className:"!text-sm !font-medium !text-blue-900 !mb-2",children:"Rule Information"}),e.jsxs("ul",{className:"!text-sm !text-blue-800 !space-y-1",children:[e.jsx("li",{children:" Either bonus amount or bonus percentage must be provided"}),e.jsx("li",{children:" Minimum achievement percentage must be less than maximum"}),e.jsx("li",{children:" Achievement percentages should be between 0% and 100%"}),e.jsx("li",{children:" Bonus percentage should be between 0% and 100%"})]})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:m,className:"!mr-3",disabled:l.isPending||c.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:l.isPending||c.isPending,children:l.isPending||c.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},Lke=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("sales-bonus-rule"),{data:v}=_u(),{data:N}=Zl({limit:1e3}),C=v?.data,P=N?.data||[],E=C?.currency_id||1,M=P.find(ce=>ce.id===E),{data:T,isLoading:A,error:L}=wke({search:t,page:u,limit:f,status:a==="all"?void 0:a==="active"?"active":"inactive"},{enabled:j}),F=ce=>{if(ce==null)return"No amount";const he=M?.code||"INR",xe={USD:"en-US",EUR:"de-DE",GBP:"en-GB",JPY:"ja-JP",CNY:"zh-CN",AUD:"en-AU",CAD:"en-CA",INR:"en-IN",AED:"ar-AE",SAR:"ar-SA"}[he]||"en-IN";return new Intl.NumberFormat(xe,{style:"currency",currency:he,minimumFractionDigits:2,maximumFractionDigits:2}).format(ce)},z=T?.data||[],I=T?.meta?.total||0,Q=(T?.meta?.page||1)-1,Y=Cke(),B=ls(),q=T?.stats||{},V=q.total_rules??0,G=q.active_rules??0,H=q.inactive_rules??0,D=q.sales_bonus_rules_this_month??0,R=g.useCallback(()=>{i(null),l(!0)},[]),$=g.useCallback(ce=>{i(ce),l(!0)},[]),W=g.useCallback(async ce=>{try{await Y.mutateAsync(ce)}catch(he){console.error("Error deleting sales bonus rule:",he)}},[Y]),J=g.useCallback(ce=>{s(ce),h(1)},[]),te=ce=>{h(ce+1)},ee=g.useCallback(async()=>{try{const ce={search:t,status:a==="all"?void 0:a==="active"?"active":"inactive"};await B.mutateAsync({tableName:"sales_bonus_rules",filters:ce})}catch(ce){console.error("Error exporting sales bonus rules:",ce)}},[B,t,a]),ae=[{id:"rule_info",label:"Rule Info",sortable:!1,render:(ce,he)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:`Rule ${he.id}`,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(i8,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsxs(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:["Rule #",he.id]}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:[he.sales_targets?.sales_targets_groups?.group_name||"Unknown Group"," ","-"," ",he.sales_targets?.sales_targets_product_categories?.category_name||"Unknown Category"]})]})]})},{id:"achievement_min_percent",label:"Min Achievement %",render:(ce,he)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(np,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:"text-xs",children:[he.achievement_min_percent,"%"]})]})},{id:"achievement_max_percent",label:"Max Achievement %",render:(ce,he)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(np,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:"text-xs",children:[he.achievement_max_percent,"%"]})]})},{id:"bonus_amount",label:"Bonus Amount",render:(ce,he)=>e.jsx(y,{className:"flex flex-col items-start",children:e.jsx(x,{variant:"body2",className:"!text-gray-900",children:F(he.bonus_amount)})})},{id:"bonus_percent",label:"Bonus Percent",render:(ce,he)=>e.jsx(y,{className:"flex flex-col items-start",children:he.bonus_percent?e.jsxs(x,{variant:"body2",className:"!text-gray-900",children:[he.bonus_percent,"%"]}):e.jsx(x,{variant:"body2",className:"!text-gray-400 italic",children:"No percent"})})},{id:"is_active",label:"Status",render:(ce,he)=>e.jsx(Me,{icon:he.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:he.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:he.is_active==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(ce,he)=>Ie(he.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(ce,he)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>$(he),tooltip:`Edit Rule ${he.id}`}),S&&e.jsx(Vt,{onClick:()=>W(he.id),tooltip:`Delete Rule ${he.id}`,itemName:`Rule ${he.id}`,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Sales Bonus Rules Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage bonus rules for sales target achievements"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Rules",value:V,icon:e.jsx(i8,{className:"w-6 h-6"}),color:"blue",isLoading:A}),e.jsx(fe,{title:"Active Rules",value:G,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:A}),e.jsx(fe,{title:"Inactive Rules",value:H,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:A}),e.jsx(fe,{title:"This Month",value:D,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:A})]}),L&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load sales bonus rules. Please try again."}),e.jsx(ot,{data:z,columns:ae,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[j&&e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx(ts,{placeholder:"Search Sales Bonus Rules",value:t,onChange:J,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:ce=>r(ce.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[j&&e.jsx(Xt,{title:"Export Sales Bonus Rules",description:"Are you sure you want to export the current sales bonus rules data to Excel? This will include all filtered results.",onConfirm:ee,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:B.isPending,children:B.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:R,children:"Create"})]})]}):!1,getRowId:ce=>ce.id,initialOrderBy:"achievement_min_percent",loading:A,totalCount:I,page:Q,rowsPerPage:f,onPageChange:te,isPermission:j,emptyMessage:t?`No sales bonus rules found matching "${t}"`:"No sales bonus rules found in the system"}),e.jsx(Fke,{selectedRule:n,setSelectedRule:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(kke,{drawerOpen:c,setDrawerOpen:m})]})},$ke=async t=>{try{return(await ie.get("/sales-target-groups",{params:t})).data}catch(s){throw console.error("Error fetching sales target groups:",s),new Error(s.response?.data?.message||"Failed to fetch sales target groups")}},zke=async t=>{try{return(await ie.get(`/sales-target-groups/${t}`)).data}catch(s){throw console.error("Error fetching sales target group:",s),new Error(s.response?.data?.message||"Failed to fetch sales target group")}},qke=async t=>{try{return(await ie.post("/sales-target-groups",t)).data}catch(s){throw console.error("Error creating sales target group:",s),new Error(s.response?.data?.message||"Failed to create sales target group")}},Bke=async(t,s)=>{try{return(await ie.post("/sales-target-groups",{...s,id:t})).data}catch(a){throw console.error("Error updating sales target group:",a),new Error(a.response?.data?.message||"Failed to update sales target group")}},Uke=async t=>{try{return(await ie.delete(`/sales-target-groups/${t}`)).data}catch(s){throw console.error("Error deleting sales target group:",s),new Error(s.response?.data?.message||"Failed to delete sales target group")}},Vo={all:["salesTargetGroups"],lists:()=>[...Vo.all,"list"],list:t=>[...Vo.lists(),t],details:()=>[...Vo.all,"detail"],detail:t=>[...Vo.details(),t]},AF=(t,s)=>tt({queryKey:Vo.list(t||{}),queryFn:()=>$ke(t),staleTime:300*1e3,...s}),Vke=t=>tt({queryKey:Vo.detail(t),queryFn:()=>zke(t),enabled:!!t,staleTime:300*1e3}),Hke=t=>{const s=is();return De({mutationFn:qke,loadingMessage:"Creating sales target group...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Vo.lists()})},onError:t?.onError})},Wke=t=>{const s=is();return De({mutationFn:({id:a,...r})=>Bke(a,r),loadingMessage:"Updating sales target group...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Vo.lists()}),s.invalidateQueries({queryKey:Vo.detail(r.id)})},onError:t?.onError})},Yke=t=>{const s=is();return De({mutationFn:Uke,loadingMessage:"Deleting sales target group...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Vo.lists()})},onError:t?.onError})},Gke=nt({file:hs().required("Please select a file to import")}),Kke=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:Gke,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("sales_target_groups")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"sales_target_groups",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Sales Target Groups",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple sales target groups. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},Qke=nt({group_name:me().required("Group name is required").min(2,"Group name must be at least 2 characters").max(255,"Group name must be less than 255 characters").trim(),description:me().max(500,"Description must be less than 500 characters").nullable().optional(),is_active:me().oneOf(["Y","N"],"Must be Y or N").required("Active status is required"),salesTargetMember:il().of(nt({id:Ge().optional(),sales_person_id:Ge().required("Sales person is required").positive("Sales person ID must be positive"),is_active:me().oneOf(["Y","N"],"Must be Y or N").default("Y")})).min(1,"At least one sales person must be selected").optional()}),Zke=({open:t,onClose:s,group:a})=>{const r=!!a,[n,i]=g.useState([]),{data:o}=Vke(a?.id||0),l=Hke(),c=Wke(),m=()=>{s(),i([]),u.resetForm()};vt.useEffect(()=>{if(a&&o?.data){const j=o.data.sales_target_group_members?.map(v=>({sales_person_id:v.sales_person_id,is_active:v.is_active,id:v.id}))||[];i(j),u.setFieldValue("members",j)}else i([]),u.setFieldValue("members",[])},[a,o]);const u=xt({initialValues:{group_name:a?.group_name||"",description:a?.description||"",is_active:a?.is_active||"Y",members:[]},validationSchema:Qke,enableReinitialize:!0,onSubmit:async j=>{try{const v={...j,description:j.description,salesTargetMember:n.filter(N=>N.sales_person_id!=="").map(N=>({sales_person_id:Number(N.sales_person_id),is_active:N.is_active,...N.id&&{id:N.id}}))};r&&a?await c.mutateAsync({id:a.id,...v}):await l.mutateAsync(v),m()}catch(v){console.log("Error submitting sales target group:",v)}}}),h=()=>{const j={sales_person_id:"",is_active:"Y",id:null},v=[...n,j];i(v),u.setFieldValue("members",v)},f=j=>{const v=n.filter((N,C)=>C!==j);i(v),u.setFieldValue("members",v)},b=(j,v,N)=>{const C=[...n];C[j]={...C[j],[v]:N},i(C),u.setFieldValue("members",C)},w=n.map((j,v)=>({...j,_index:v})),S=[{id:"sales_person_id",label:"Sales Person",width:300,render:(j,v)=>e.jsx(pn,{name:"sales_person_id",label:"Sales Person",value:v.sales_person_id,setValue:N=>b(v._index,"sales_person_id",N.toString()),size:"small",fullWidth:!0})},{id:"is_active",label:"Status",width:120,render:(j,v)=>e.jsxs(_e,{value:v.is_active,onChange:N=>b(v._index,"is_active",N.target.value),size:"small",fullWidth:!0,label:"Status",children:[e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]})},{id:"actions",label:"Actions",sortable:!1,width:50,render:(j,v)=>e.jsx(Vt,{onClick:()=>f(v._index),tooltip:"Remove member",confirmDelete:!0,size:"medium",itemName:"member"})}];return e.jsx(it,{open:t,setOpen:m,title:r?"Edit Sales Target Group":"Create Sales Target Group",size:"medium",children:e.jsx(y,{className:"!p-4",children:e.jsxs("form",{onSubmit:u.handleSubmit,className:"!space-y-4",children:[e.jsxs(y,{className:"!grid !grid-cols-1 !gap-5",children:[e.jsx(oe,{name:"group_name",label:"Group Name",placeholder:"Enter group name",formik:u,required:!0}),e.jsx(Ts,{name:"is_active",formik:u,required:!0}),e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter group description",formik:u,multiline:!0,rows:3})]}),e.jsxs(y,{className:"!space-y-3",children:[e.jsxs(y,{className:"!flex !justify-between !items-center",children:[e.jsx(x,{variant:"body1",className:"!font-semibold !text-gray-900",children:"Group Members"}),e.jsx(K,{type:"button",variant:"outlined",startIcon:e.jsx(Wr,{}),onClick:h,size:"small",children:"Add Member"})]}),n.length>0&&e.jsx(ot,{data:w,columns:S,getRowId:j=>j._index.toString(),pagination:!1,sortable:!1,emptyMessage:"No members added yet."}),n.length===0&&e.jsxs(y,{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(la,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:'No members added yet. Click "Add Member" to get started.'})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 !pt-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:m,disabled:l.isPending||c.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:l.isPending||c.isPending,children:l.isPending||c.isPending?r?"Updating...":"Creating...":r?"Update":"Create"})]})]})})})},Xke=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("sales-target-group"),{data:v,isLoading:N,error:C}=AF({search:t,page:u,limit:f,status:a==="all"?void 0:a==="active"?"active":"inactive"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=Yke(),A=ls(),L=v?.stats?.total_groups??0,F=v?.stats?.active_groups??0,z=v?.stats?.inactive_groups??0,I=v?.stats?.sales_target_groups_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting sales target group:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,status:a?a==="all"?void 0:a==="active"?"active":"inactive":void 0};await A.mutateAsync({tableName:"sales_target_groups",filters:D})}catch(D){console.error("Error exporting sales target groups:",D)}},[A,t,a]),H=[{id:"group_name",label:"Group Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.group_name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(la,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:R.group_name}),R.description&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:R.description})]})]})},{id:"sales_target_group_members",label:"Members",render:(D,R)=>e.jsxs(x,{variant:"body2",className:"!text-gray-900",children:[R.sales_target_group_members?.length||0," members"]})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.group_name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.group_name}`,itemName:R.group_name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Sales Target Groups Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage sales target groups and assign sales personnel to groups"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Groups",value:L,icon:e.jsx(la,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Groups",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Groups",value:z,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load sales target groups. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex items-center flex-wrap gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Sales Target Groups",value:t,onChange:q,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:D=>r(D.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[j&&e.jsx(Xt,{title:"Export Sales Target Groups",description:"Are you sure you want to export the current sales target groups data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"group_name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No sales target groups found matching "${t}"`:"No sales target groups found in the system"}),e.jsx(Zke,{open:o,onClose:()=>{l(!1),i(null)},group:n}),e.jsx(Kke,{drawerOpen:c,setDrawerOpen:m})]})},Jke=nt({file:hs().required("Please select a file to import")}),eEe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:Jke,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("sales-targets")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"sales_targets",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Sales Targets",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple sales targets. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},tEe=nt({sales_target_group_id:Ge().required("Sales target group is required").positive("Sales target group must be selected"),product_category_id:Ge().required("Product category is required").positive("Product category must be selected"),target_quantity:Ge().required("Target quantity is required").min(1,"Target quantity must be at least 1").typeError("Target quantity must be a valid number"),target_amount:Ge().nullable().min(0,"Target amount must be non-negative").typeError("Target amount must be a valid number"),start_date:Ca().required("Start date is required").typeError("Start date must be a valid date"),end_date:Ca().required("End date is required").typeError("End date must be a valid date").when("start_date",(t,s)=>t&&t[0]?s.min(t[0],"End date must be after start date"):s),is_active:me().oneOf(["Y","N"],"Status must be Y or N").default("Y")}),sEe=({selectedTarget:t,setSelectedTarget:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,{data:i}=AF({page:1,status:"active",limit:1e3}),o=i?.data||[],{data:l}=Tp({page:1,status:"active",limit:1e3}),c=l?.data||[],m=Rke(),u=Ake(),h=()=>{s(null),r(!1),f.resetForm()},f=xt({initialValues:{sales_target_group_id:t?.sales_target_group_id||0,product_category_id:t?.product_category_id||0,target_quantity:t?.target_quantity||"",target_amount:t?.target_amount||"",start_date:t?.start_date?t.start_date.split("T")[0]:"",end_date:t?.end_date?t.end_date.split("T")[0]:"",is_active:t?.is_active||"Y"},validationSchema:tEe,enableReinitialize:!0,onSubmit:async b=>{try{const w={...b,sales_target_group_id:Number(b.sales_target_group_id),product_category_id:Number(b.product_category_id),target_quantity:Number(b.target_quantity),target_amount:b.target_amount?Number(b.target_amount):void 0};n&&t?await u.mutateAsync({id:t.id,data:w}):await m.mutateAsync(w),h()}catch(w){console.error("Error submitting sales target:",w)}}});return e.jsx(it,{open:a,setOpen:h,title:n?"Edit Sales Target":"Create Sales Target",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(_e,{name:"sales_target_group_id",label:"Sales Target Group",formik:f,required:!0,children:o.map(b=>e.jsx(Z,{value:b.id,children:b.group_name},b.id))}),e.jsx(_e,{name:"product_category_id",label:"Product Category",formik:f,required:!0,children:c.map(b=>e.jsx(Z,{value:b.id,children:b.category_name},b.id))}),e.jsx(oe,{name:"target_quantity",label:"Target Quantity",type:"number",placeholder:"Enter target quantity",formik:f,required:!0}),e.jsx(oe,{name:"target_amount",label:"Target Amount",type:"number",placeholder:"Enter target amount (optional)",formik:f}),e.jsx(oe,{name:"start_date",label:"Start Date",type:"date",formik:f,required:!0,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(oe,{name:"end_date",label:"End Date",type:"date",formik:f,required:!0,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(Ts,{name:"is_active",formik:f,required:!0})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,className:"!mr-3",disabled:m.isPending||u.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:m.isPending||u.isPending,children:m.isPending||u.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},aEe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{formatCurrency:b}=Ya(),{isCreate:w,isUpdate:S,isDelete:j,isRead:v}=Qe("sales-target"),{data:N,isLoading:C,error:P}=RF({search:t,page:u,limit:f,is_active:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:v}),E=N?.data||[],M=N?.meta?.total_count||0,T=N?.meta?.current_page||1,A=Ike(),L=ls(),F=N?.stats||{},z=F.total_sales_targets??E.length,I=F.active_sales_targets??E.filter($=>$.is_active==="Y").length,Q=F.inactive_sales_targets??E.filter($=>$.is_active==="N").length,Y=F.sales_targets_this_month??0,B=g.useCallback(()=>{i(null),l(!0)},[]),q=g.useCallback($=>{i($),l(!0)},[]),V=g.useCallback(async $=>{try{await A.mutateAsync($)}catch(W){console.error("Error deleting sales target:",W)}},[A]),G=g.useCallback($=>{s($),h(1)},[]),H=$=>{h($+1)},D=g.useCallback(async()=>{try{const $={search:t,is_active:a==="all"?void 0:a==="active"?"Y":"N"};await L.mutateAsync({tableName:"sales_targets",filters:$})}catch($){console.error("Error exporting sales targets:",$)}},[L,t,a]),R=[{id:"target_info",label:"Target Info",sortable:!1,render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:`Target ${W.id}`,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(sl,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:W.sales_target_group?.group_name||"Unknown Group"}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:["Qty: ",W.target_quantity," | Amount:"," ",W.target_amount?b(W.target_amount):"N/A"]})]})]})},{id:"product_category",label:"Product Category",sortable:!1,render:($,W)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Wt,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:W.product_category?.category_name||"Unknown Category"})]})},{id:"period",label:"Period",sortable:!1,render:($,W)=>{const J=Ie(W.start_date),te=Ie(W.end_date);return e.jsx(y,{className:"flex flex-col items-start",children:e.jsxs(y,{className:"flex items-center gap-1 mb-0.5",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:"text-xs font-medium text-gray-800",children:[J," - ",te]})]})})}},{id:"target_quantity",label:"Quantity",render:($,W)=>e.jsx(Me,{label:W.target_quantity,size:"small",variant:"outlined",color:"primary"})},{id:"target_amount",label:"Amount",render:($,W)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:W.target_amount?b(W.target_amount):"N/A"})},{id:"is_active",label:"Status",render:($,W)=>e.jsx(Me,{icon:W.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:W.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:W.is_active==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:($,W)=>Ie(W.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...S||j||v?[{id:"action",label:"Actions",sortable:!1,render:($,W)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[S&&e.jsx(rs,{onClick:()=>q(W),tooltip:`Edit Target ${W.id}`}),j&&e.jsx(Vt,{onClick:()=>V(W.id),tooltip:`Delete Target ${W.id}`,itemName:`Target ${W.id}`,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Sales Targets Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage sales targets for groups and product categories"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Targets",value:z,icon:e.jsx(sl,{className:"w-6 h-6"}),color:"blue",isLoading:C}),e.jsx(fe,{title:"Active Targets",value:I,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:C}),e.jsx(fe,{title:"Inactive Targets",value:Q,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:C}),e.jsx(fe,{title:"This Month",value:Y,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:C})]}),P&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load sales targets. Please try again."}),e.jsx(ot,{data:E,columns:R,actions:v||w?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[v&&e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx(ts,{placeholder:"Search Sales Targets",value:t,onChange:G,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:$=>r($.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[v&&e.jsx(Xt,{title:"Export Sales Targets",description:"Are you sure you want to export the current sales targets data to Excel? This will include all filtered results.",onConfirm:D,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:L.isPending,children:L.isPending?"Exporting...":"Export"})}),w&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),w&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:B,children:"Create"})]})]}):!1,getRowId:$=>$.id,initialOrderBy:"target_quantity",loading:C,totalCount:M,page:T,rowsPerPage:f,onPageChange:H,isPermission:v,emptyMessage:t?`No sales targets found matching "${t}"`:"No sales targets found in the system"}),e.jsx(sEe,{selectedTarget:n,setSelectedTarget:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(eEe,{drawerOpen:c,setDrawerOpen:m})]})},rEe=async t=>{try{return(await ie.get("/stock-movements",{params:t})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to fetch stock movements")}},nEe=async t=>{try{return(await ie.post("/stock-movements",t)).data}catch(s){throw new Error(s.response?.data?.message||"Failed to save stock movement")}},iEe=async t=>{try{return(await ie.delete(`/stock-movements/${t}`)).data}catch(s){throw new Error(s.response?.data?.message||"Failed to delete stock movement")}},Oc={all:["stockMovements"],lists:()=>[...Oc.all,"list"],list:t=>[...Oc.lists(),t],details:()=>[...Oc.all,"detail"],detail:t=>[...Oc.details(),t]},oEe=(t,s)=>tt({queryKey:Oc.list(t||{}),queryFn:()=>rEe(t),staleTime:300*1e3,...s}),lEe=t=>{const s=is();return De({mutationFn:nEe,loadingMessage:"Saving stock movement...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Oc.lists()}),r.id&&s.invalidateQueries({queryKey:Oc.detail(r.id)})},onError:t?.onError})},cEe=t=>{const s=is();return De({mutationFn:iEe,loadingMessage:"Deleting stock movement...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Oc.lists()})},onError:t?.onError})},dEe=nt({file:hs().required("Please select a file to import")}),uEe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:dEe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("stock_movements")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"stock_movements",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Stock Movements",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple stock movements. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},mEe=async t=>{try{return(await ie.get("/van-inventory",{params:t})).data}catch(s){throw console.error("Error fetching van inventory:",s),new Error(s.response?.data?.message||"Failed to fetch van inventory")}},pEe=async t=>{try{return(await ie.get(`/van-inventory/${t}`)).data}catch(s){throw console.error("Error fetching van inventory:",s),new Error(s.response?.data?.message||"Failed to fetch van inventory")}},hEe=async t=>{try{return(await ie.post("/van-inventory",t)).data}catch(s){throw console.error("Error creating van inventory:",s),new Error(s.response?.data?.message||"Failed to create van inventory")}},fEe=async(t,s)=>{try{return(await ie.post("/van-inventory",{id:t,...s})).data}catch(a){throw console.error("Error updating van inventory:",a),new Error(a.response?.data?.message||"Failed to update van inventory")}},xEe=async t=>{try{return(await ie.delete(`/van-inventory/${t}`)).data}catch(s){throw console.error("Error deleting van inventory:",s),new Error(s.response?.data?.message||"Failed to delete van inventory")}},Im={all:["van-inventory"],lists:()=>[...Im.all,"list"],list:t=>[...Im.lists(),t],details:()=>[...Im.all,"detail"],detail:t=>[...Im.details(),t]},IF=(t,s)=>tt({queryKey:Im.list(t),queryFn:()=>mEe(t),staleTime:300*1e3,...s}),OF=(t,s)=>tt({queryKey:Im.detail(t),queryFn:()=>pEe(t),enabled:!!t,staleTime:300*1e3,...s}),gEe=()=>De({mutationFn:hEe,invalidateQueries:["van-inventory"],loadingMessage:"Creating van inventory..."}),yEe=()=>De({mutationFn:({id:t,...s})=>fEe(t,s),invalidateQueries:["van-inventory"],loadingMessage:"Updating van inventory..."}),bEe=()=>De({mutationFn:xEe,invalidateQueries:["van-inventory"],loadingMessage:"Deleting van inventory..."}),vEe=nt({product_id:Ge().required("Product is required").min(1,"Please select a valid product"),batch_id:Ge().nullable().min(1,"Batch ID must be a positive number"),serial_id:Ge().nullable().min(1,"Serial ID must be a positive number"),movement_type:me().required("Movement type is required").min(2,"Movement type must be at least 2 characters").max(50,"Movement type must be less than 50 characters"),reference_type:me().nullable().max(50,"Reference type must be less than 50 characters"),reference_id:Ge().nullable().min(1,"Reference ID must be a positive number"),from_location_id:Ge().nullable().min(1,"From location ID must be a positive number"),to_location_id:Ge().nullable().min(1,"To location ID must be a positive number").test("different-locations","From and To locations cannot be the same",function(t){const{from_location_id:s}=this.parent;return t&&s&&t===s?this.createError({message:"From and To locations cannot be the same",path:"to_location_id"}):!0}),quantity:Ge().required("Quantity is required").min(1,"Quantity must be a positive number").integer("Quantity must be a whole number"),movement_date:Ca().nullable().typeError("Please enter a valid date"),remarks:me().nullable().max(1e3,"Remarks must be less than 1000 characters"),van_inventory_id:Ge().nullable().min(1,"Van inventory ID must be a positive number"),is_active:me().required("Status is required").oneOf(["Y","N"],"Status must be Active or Inactive")}),jEe=({open:t,onClose:s,movement:a})=>{const r=!!a,{data:n}=IF({limit:1e3}),i=n?.data||[],o=lEe(),l=f=>{switch(f){case"L":return"Load";case"U":return"Unload";default:return f}},c=f=>{switch(f){case"D":return"Draft";case"A":return"Confirmed";case"C":return"Canceled";default:return f}},m=f=>{if(!f)return"";try{return new Date(f).toLocaleDateString()}catch{return""}},u=()=>{s(),h.resetForm()},h=xt({initialValues:{product_id:a?.product_id||"",batch_id:a?.batch_id||"",serial_id:a?.serial_id||"",movement_type:a?.movement_type||"",reference_type:a?.reference_type||"",reference_id:a?.reference_id||"",from_location_id:a?.from_location_id||"",to_location_id:a?.to_location_id||"",quantity:a?.quantity||"",movement_date:a?.movement_date||"",remarks:a?.remarks||"",van_inventory_id:a?.van_inventory_id||"",is_active:a?.is_active||"Y"},validationSchema:vEe,enableReinitialize:!0,onSubmit:async f=>{try{const b={...r&&a?{id:a.id}:{},product_id:Number(f.product_id),batch_id:f.batch_id?Number(f.batch_id):null,serial_id:f.serial_id?Number(f.serial_id):null,movement_type:f.movement_type,reference_type:f.reference_type||null,reference_id:f.reference_id?Number(f.reference_id):null,from_location_id:f.from_location_id?Number(f.from_location_id):null,to_location_id:f.to_location_id?Number(f.to_location_id):null,quantity:Number(f.quantity),movement_date:f.movement_date||null,remarks:f.remarks||null,van_inventory_id:f.van_inventory_id?Number(f.van_inventory_id):null,is_active:f.is_active};await o.mutateAsync(b),u()}catch(b){console.log("Error submitting stock movement:",b)}}});return e.jsx(it,{open:t,setOpen:u,title:r?"Edit Stock Movement":"Create Stock Movement",size:"large",children:e.jsx(y,{className:"!p-4",children:e.jsxs("form",{onSubmit:h.handleSubmit,className:"!space-y-4",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-5",children:[e.jsx(bo,{name:"product_id",label:"Product",formik:h,required:!0}),e.jsxs(_e,{name:"movement_type",label:"Movement Type",formik:h,required:!0,children:[e.jsx(Z,{value:"IN",children:"Stock In"}),e.jsx(Z,{value:"OUT",children:"Stock Out"}),e.jsx(Z,{value:"TRANSFER",children:"Transfer"})]}),e.jsx(oe,{name:"reference_type",label:"Reference Type",placeholder:"e.g., ORDER, PURCHASE, ADJUSTMENT",formik:h}),e.jsx(oe,{name:"reference_id",label:"Reference ID",placeholder:"Optional",formik:h,type:"number"}),e.jsx(oe,{name:"quantity",label:"Quantity",placeholder:"Enter quantity",formik:h,type:"number",required:!0}),e.jsx(oe,{name:"movement_date",label:"Movement Date",type:"date",formik:h,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(_e,{name:"van_inventory_id",label:"Van Inventory",formik:h,children:i.map(f=>{const b=[f.user?.name||"Unknown User",l(f.loading_type||"L"),c(f.status||"D"),f.vehicle?.vehicle_number?`- ${f.vehicle.vehicle_number}`:"",f.document_date?`(${m(f.document_date)})`:""].filter(Boolean).join(" ");return e.jsx(Z,{value:f.id,children:b},f.id)})}),e.jsx(Ts,{name:"is_active",formik:h,required:!0,className:"col-span-2"})]}),e.jsxs(y,{className:"!space-y-3",children:[e.jsx(x,{variant:"body1",className:"!font-semibold !text-gray-900",children:"Remarks"}),e.jsx(oe,{name:"remarks",label:"Remarks",placeholder:"Enter any additional remarks about this movement",formik:h,multiline:!0,rows:3})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 !pt-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:u,disabled:o.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending,children:o.isPending?r?"Updating...":"Creating...":r?"Update":"Create"})]})]})})})},NEe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n]=g.useState("all"),[i,o]=g.useState(null),[l,c]=g.useState(!1),[m,u]=g.useState(!1),[h,f]=g.useState(1),[b]=g.useState(10),{isCreate:w,isUpdate:S,isDelete:j,isRead:v}=Qe("stock-movement"),{data:N,isLoading:C,error:P}=oEe({search:t,page:h,limit:b,status:a==="all"?void 0:a==="active"?"active":"inactive",movement_type:n==="all"?void 0:n},{enabled:v}),E=N?.data||[],M=N?.meta?.total||0,T=(N?.meta?.page||1)-1,A=cEe(),L=ls(),F=N?.stats?.total_stock_movements??0,z=N?.stats?.stock_movements_this_month??0,I=N?.stats?.total_in_movements??0,Q=N?.stats?.total_out_movements??0,Y=g.useCallback(()=>{o(null),c(!0)},[]),B=g.useCallback($=>{o($),c(!0)},[]),q=g.useCallback(async $=>{try{await A.mutateAsync($)}catch(W){console.error("Error deleting stock movement:",W)}},[A]),V=g.useCallback($=>{s($),f(1)},[]),G=$=>{f($+1)},H=g.useCallback(async()=>{try{const $={search:t,status:a==="all"?void 0:a==="active"?"active":"inactive",movement_type:n==="all"?void 0:n};await L.mutateAsync({tableName:"stock_movements",filters:$})}catch($){console.error("Error exporting stock movements:",$)}},[L,t,a,n]),D=$=>{switch($?.toUpperCase()){case"IN":return e.jsx(r8,{className:"w-4 h-4 text-green-600"});case"OUT":return e.jsx(n8,{className:"w-4 h-4 text-red-600"});case"TRANSFER":return e.jsx(iN,{className:"w-4 h-4 text-blue-600"});default:return e.jsx(iN,{className:"w-4 h-4 text-gray-600"})}},R=[{id:"movement_type",label:"Movement",render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:W.movement_type,className:"!rounded !bg-primary-100 !text-primary-600",sx:{width:32,height:32},children:D(W.movement_type)}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:$d(W.movement_type)}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:W.reference_type?`${$d(W.reference_type)} #${String(W.reference_id)}`:"Direct Movement"})]})]})},{id:"product",label:"Product",render:($,W)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:W.product?.name||`ID: ${W.product_id}`}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:W.product?.code||"No Code"})]})},{id:"quantity",label:"Quantity",render:($,W)=>e.jsx(y,{className:"!text-center",children:e.jsxs(x,{variant:"body2",className:`${W.movement_type?.toUpperCase()==="IN"?"!text-green-600":W.movement_type?.toUpperCase()==="OUT"?"!text-red-600":"!text-blue-600"}`,children:[W.movement_type?.toUpperCase()==="IN"?"+":W.movement_type?.toUpperCase()==="OUT"?"-":""," ",W.quantity]})})},{id:"locations",label:"Locations",render:($,W)=>e.jsxs(y,{children:[W.from_location&&e.jsxs(x,{variant:"caption",className:"!text-gray-500 !block",children:["From: ",W.from_location.name]}),W.to_location&&e.jsxs(x,{variant:"caption",className:"!text-gray-500 !block",children:["To: ",W.to_location.name]}),!W.from_location&&!W.to_location&&e.jsx(x,{variant:"caption",className:"!text-gray-400 !italic",children:"No location specified"})]})},{id:"movement_date",label:"Date",render:($,W)=>Ie(W.movement_date)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},{id:"is_active",label:"Active",render:$=>e.jsx(Me,{icon:$==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:$==="Y"?"Active":"Inactive",size:"small",className:"w-20",variant:"outlined",color:$==="Y"?"success":"error"})},{id:"createdate",label:"Created",render:($,W)=>Ie(W.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...S||j||v?[{id:"action",label:"Actions",sortable:!1,render:($,W)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[S&&e.jsx(rs,{onClick:()=>B(W),tooltip:`Edit movement ${W.id}`}),j&&e.jsx(Vt,{onClick:()=>q(W.id),tooltip:`Delete movement ${W.id}`,itemName:`movement ${W.id}`,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Stock Movements Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track and manage all stock movements including in, out, and transfer operations"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Movements",value:F,icon:e.jsx(iN,{className:"w-6 h-6"}),color:"blue",isLoading:C}),e.jsx(fe,{title:"Stock In",value:I,icon:e.jsx(r8,{className:"w-6 h-6"}),color:"green",isLoading:C}),e.jsx(fe,{title:"Stock Out",value:Q,icon:e.jsx(n8,{className:"w-6 h-6"}),color:"red",isLoading:C}),e.jsx(fe,{title:"This Month",value:z,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:C})]}),P&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load stock movements. Please try again."}),e.jsx(ot,{data:E,columns:R,actions:v||w?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[v&&e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx(ts,{placeholder:"Search Stock Movements",value:t,onChange:V,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:$=>r($.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[v&&e.jsx(Xt,{title:"Export Stock Movements",description:"Are you sure you want to export the current stock movements data to Excel? This will include all filtered results.",onConfirm:H,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:L.isPending,children:L.isPending?"Exporting...":"Export"})}),w&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>u(!0),children:"Import"}),w&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Y,children:"Create"})]})]}):!1,getRowId:$=>$.id,initialOrderBy:"createdate",loading:C,totalCount:M,page:T,rowsPerPage:b,onPageChange:G,isPermission:v,emptyMessage:t?`No stock movements found matching "${t}"`:"No stock movements found in the system"}),e.jsx(jEe,{open:l,onClose:()=>{c(!1),o(null)},movement:i}),e.jsx(uEe,{drawerOpen:m,setDrawerOpen:u})]})},wEe=async t=>{try{return(await ie.get("/stock-transfer-requests",{params:t})).data}catch(s){throw console.error("Error fetching stock transfer requests:",s),new Error(s.response?.data?.message||"Failed to fetch stock transfer requests")}},_Ee=async t=>{try{return(await ie.get(`/stock-transfer-requests/${t}`)).data}catch(s){throw console.error("Error fetching stock transfer request:",s),new Error(s.response?.data?.message||"Failed to fetch stock transfer request")}},SEe=async t=>{try{return(await ie.post("/stock-transfer-requests",t)).data}catch(s){throw console.error("Error upserting stock transfer request:",s),new Error(s.response?.data?.message||"Failed to save stock transfer request")}},CEe=async t=>{try{return(await ie.delete(`/stock-transfer-requests/${t}`)).data}catch(s){throw console.error("Error deleting stock transfer request:",s),new Error(s.response?.data?.message||"Failed to delete stock transfer request")}},Ll={all:["stockTransferRequests"],lists:()=>[...Ll.all,"list"],list:t=>[...Ll.lists(),t],details:()=>[...Ll.all,"detail"],detail:t=>[...Ll.details(),t]},PEe=(t,s)=>tt({queryKey:Ll.list(t||{}),queryFn:()=>wEe(t),staleTime:300*1e3,...s}),kEe=t=>tt({queryKey:Ll.detail(t),queryFn:()=>_Ee(t),enabled:!!t,staleTime:300*1e3}),EEe=t=>{const s=is();return De({mutationFn:SEe,loadingMessage:"Saving stock transfer request...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Ll.lists()}),r.id&&s.invalidateQueries({queryKey:Ll.detail(r.id)})},onError:t?.onError})},TEe=t=>{const s=is();return De({mutationFn:CEe,loadingMessage:"Deleting stock transfer request...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Ll.lists()})},onError:t?.onError})},MEe=nt({file:hs().required("Please select a file to import")}),DEe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:MEe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("stock_transfer_requests")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"stock_transfer_requests",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Stock Transfer Requests",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple stock transfer requests. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},REe=async t=>{try{return(await ie.get("/warehouses",{params:t})).data}catch(s){throw console.error("Error fetching warehouses:",s),new Error(s.response?.data?.message||"Failed to fetch warehouses")}},AEe=async t=>{try{return(await ie.post("/warehouses",t)).data}catch(s){throw console.error("Error creating warehouse:",s),new Error(s.response?.data?.message||"Failed to create warehouse")}},IEe=async(t,s)=>{try{return(await ie.put(`/warehouses/${t}`,s)).data}catch(a){throw console.error("Error updating warehouse:",a),new Error(a.response?.data?.message||"Failed to update warehouse")}},OEe=async t=>{try{return(await ie.delete(`/warehouses/${t}`)).data}catch(s){throw console.error("Error deleting warehouse:",s),new Error(s.response?.data?.message||"Failed to delete warehouse")}},Of={all:["warehouses"],lists:()=>[...Of.all,"list"],list:t=>[...Of.lists(),t],details:()=>[...Of.all,"detail"],detail:t=>[...Of.details(),t]},FF=(t,s)=>tt({queryKey:Of.list(t),queryFn:()=>REe(t),staleTime:300*1e3,...s}),FEe=()=>De({mutationFn:AEe,invalidateQueries:["warehouses"],loadingMessage:"Creating warehouse..."}),LEe=()=>De({mutationFn:({id:t,...s})=>IEe(t,s),invalidateQueries:["warehouses"],loadingMessage:"Updating warehouse..."}),$Ee=()=>De({mutationFn:OEe,invalidateQueries:["warehouses"],loadingMessage:"Deleting warehouse..."}),zEe=nt({source_type:me().required("Source type is required").min(2,"Source type must be at least 2 characters").max(50,"Source type must be less than 50 characters"),source_id:Ge().required("Source ID is required").positive("Source ID must be a positive number").integer("Source ID must be an integer"),destination_type:me().required("Destination type is required").min(2,"Destination type must be at least 2 characters").max(50,"Destination type must be less than 50 characters"),destination_id:Ge().required("Destination ID is required").positive("Destination ID must be a positive number").integer("Destination ID must be an integer").test("different-from-source","Source and destination cannot be the same",function(t){const{source_id:s}=this.parent;return t!==s}),requested_by:Ge().required("Requested by is required").positive("Requested by must be a positive number").integer("Requested by must be an integer"),status:me().oneOf(["pending","approved","rejected","in_progress","completed"],"Invalid status").optional(),approved_by:Ge().positive("Approved by must be a positive number").integer("Approved by must be an integer").nullable().optional(),approved_at:Ca().nullable().optional(),is_active:me().oneOf(["Y","N"],"Must be Y or N").default("Y"),stock_transfer_lines:il().of(nt({product_id:Ge().required("Product ID is required").positive("Product ID must be a positive number").integer("Product ID must be an integer"),batch_id:Ge().positive("Batch ID must be a positive number").integer("Batch ID must be an integer").nullable().optional(),quantity:Ge().required("Quantity is required").positive("Quantity must be a positive number").min(1,"Quantity must be at least 1")})).min(1,"At least one transfer line is required").required("Transfer lines are required")}),qEe=({open:t,onClose:s,request:a})=>{const r=!!a,[n,i]=g.useState([]),{data:o}=Qr({limit:1e3}),{data:l}=FF({limit:1e3}),{data:c}=kEe(a?.id||0),m=o?.data||[],u=l?.data||[],h=EEe(),f=()=>{s(),i([]),b.resetForm()};vt.useEffect(()=>{if(a&&c?.data){const C=c.data.transfer_lines?.map(P=>({product_id:P.product_id,batch_id:P.batch_id||"",quantity:P.quantity,id:P.id}))||[];i(C),b.setFieldValue("stock_transfer_lines",C)}else i([]),b.setFieldValue("stock_transfer_lines",[])},[a,c]);const b=xt({initialValues:{source_type:a?.source_type||"",source_id:a?.source_id||"",destination_type:a?.destination_type||"",destination_id:a?.destination_id||"",requested_by:a?.requested_by||"",status:a?.status||"pending",approved_by:a?.approved_by||"",approved_at:a?.approved_at||"",is_active:a?.is_active||"Y",stock_transfer_lines:[]},validationSchema:zEe,enableReinitialize:!0,onSubmit:async C=>{try{const P={...r&&a?{id:a.id}:{},source_type:C.source_type,source_id:Number(C.source_id),destination_type:C.destination_type,destination_id:Number(C.destination_id),requested_by:Number(C.requested_by),status:C.status,approved_by:C.approved_by?Number(C.approved_by):null,approved_at:C.approved_at||null,is_active:C.is_active,stock_transfer_lines:n.filter(E=>E.product_id!==""&&E.quantity!=="").map(E=>({product_id:Number(E.product_id),batch_id:E.batch_id?Number(E.batch_id):null,quantity:Number(E.quantity),...E.id&&{id:E.id}}))};await h.mutateAsync(P),f()}catch(P){console.log("Error submitting stock transfer request:",P)}}}),w=()=>{const C={product_id:"",batch_id:"",quantity:0,id:null},P=[...n,C];i(P),b.setFieldValue("stock_transfer_lines",P)},S=C=>{const P=n.filter((E,M)=>M!==C);i(P),b.setFieldValue("stock_transfer_lines",P)},j=(C,P,E)=>{const M=[...n];P==="quantity"?M[C]={...M[C],[P]:E===""?0:Number(E)}:M[C]={...M[C],[P]:E},i(M),b.setFieldValue("stock_transfer_lines",M)},v=n.map((C,P)=>({...C,_index:P})),N=[{id:"product_id",label:"Product",width:300,render:(C,P)=>e.jsx(bo,{value:P.product_id,onChange:(E,M)=>j(P._index,"product_id",M?M.id:""),size:"small",fullWidth:!0,label:"Product"})},{id:"batch_id",label:"Batch ID",width:150,render:(C,P)=>e.jsx(oe,{value:P.batch_id,onChange:E=>j(P._index,"batch_id",E.target.value),size:"small",fullWidth:!0,label:"Batch ID",type:"number",placeholder:"Optional"})},{id:"quantity",label:"Quantity",width:120,render:(C,P)=>e.jsx(oe,{value:P.quantity||0,onChange:E=>j(P._index,"quantity",E.target.value),size:"small",fullWidth:!0,label:"Quantity",type:"number",required:!0})},{id:"actions",label:"Actions",sortable:!1,width:50,render:(C,P)=>e.jsx(Vt,{onClick:()=>S(P._index),tooltip:"Remove line",confirmDelete:!0,size:"medium",itemName:"transfer line"})}];return e.jsx(it,{open:t,setOpen:f,title:r?"Edit Stock Transfer Request":"Create Stock Transfer Request",size:"large",children:e.jsx(y,{className:"!p-4",children:e.jsxs("form",{onSubmit:b.handleSubmit,className:"!space-y-4",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-5",children:[e.jsx(oe,{name:"source_type",label:"Source Type",placeholder:"e.g., Warehouse, Store",formik:b,required:!0}),e.jsx(_e,{name:"source_id",label:"Source Location",formik:b,required:!0,children:u.map(C=>e.jsx(Z,{value:C.id,children:C.name},C.id))}),e.jsx(oe,{name:"destination_type",label:"Destination Type",placeholder:"e.g., Warehouse, Store",formik:b,required:!0}),e.jsx(_e,{name:"destination_id",label:"Destination Location",formik:b,required:!0,children:u.map(C=>e.jsx(Z,{value:C.id,children:C.name},C.id))}),e.jsx(_e,{name:"requested_by",label:"Requested By",formik:b,required:!0,children:m.map(C=>e.jsxs(Z,{value:C.id,children:[C.name," (",C.email,")"]},C.id))}),e.jsxs(_e,{name:"status",label:"Status",formik:b,children:[e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"approved",children:"Approved"}),e.jsx(Z,{value:"rejected",children:"Rejected"}),e.jsx(Z,{value:"in_progress",children:"In Progress"}),e.jsx(Z,{value:"completed",children:"Completed"})]}),e.jsxs(_e,{name:"approved_by",label:"Approved By",formik:b,children:[e.jsx(Z,{value:"",children:"Not Approved"}),m.map(C=>e.jsxs(Z,{value:C.id,children:[C.name," (",C.email,")"]},C.id))]}),e.jsx(oe,{name:"approved_at",label:"Approved At",type:"datetime-local",formik:b}),e.jsxs(_e,{name:"is_active",label:"Status",formik:b,required:!0,children:[e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]})]}),e.jsxs(y,{className:"!space-y-3",children:[e.jsxs(y,{className:"!flex !justify-between !items-center",children:[e.jsx(x,{variant:"body1",className:"!font-semibold !text-gray-900",children:"Transfer Lines"}),e.jsx(K,{type:"button",variant:"outlined",startIcon:e.jsx(Wr,{}),onClick:w,size:"small",children:"Add Line"})]}),n.length>0&&e.jsx(ot,{data:v,columns:N,getRowId:C=>C._index.toString(),pagination:!1,sortable:!1,emptyMessage:"No transfer lines added yet."}),n.length===0&&e.jsxs(y,{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(Wt,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:'No transfer lines added yet. Click "Add Line" to get started.'})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 !pt-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:f,disabled:h.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:h.isPending,children:h.isPending?r?"Updating...":"Creating...":r?"Update":"Create"})]})]})})})},BEe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("stock-transfer"),{data:v,isLoading:N,error:C}=PEe({search:t,page:u,limit:f,status:a==="all"?void 0:a==="active"?"active":"inactive"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=TEe(),A=ls(),L=v?.stats?.total_requests??0,F=v?.stats?.active_requests??0,z=v?.stats?.inactive_requests??0,I=v?.stats?.requests_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback($=>{i($),l(!0)},[]),B=g.useCallback(async $=>{try{await T.mutateAsync($)}catch(W){console.error("Error deleting stock transfer request:",W)}},[T]),q=g.useCallback($=>{s($),h(1)},[]),V=$=>{h($+1)},G=g.useCallback(async()=>{try{const $={search:t,status:a==="all"?void 0:a==="active"?"active":"inactive"};await A.mutateAsync({tableName:"stock_transfer_requests",filters:$})}catch($){console.error("Error exporting stock transfer requests:",$)}},[A,t,a]),H=$=>{switch($?.toLowerCase()){case"pending":return"warning";case"approved":return"success";case"rejected":return"error";case"in_progress":return"info";case"completed":return"success";default:return"default"}},D=$=>{switch($?.toLowerCase()){case"pending":return"Pending";case"approved":return"Approved";case"rejected":return"Rejected";case"in_progress":return"In Progress";case"completed":return"Completed";default:return $||"Unknown"}},R=[{id:"request_number",label:"Request Number",render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:W.request_number,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(Un,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:W.request_number}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:[W.source_type,"  ",W.destination_type]})]})]})},{id:"source",label:"Source",render:($,W)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:W.source?.name||`ID: ${W.source_id}`}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:W.source_type})]})},{id:"destination",label:"Destination",render:($,W)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:W.destination?.name||`ID: ${W.destination_id}`}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:W.destination_type})]})},{id:"requested_by_user",label:"Requested By",render:($,W)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:W.requested_by_user?.name||"Unknown",className:"!rounded !bg-primary-100 !text-primary-600",sx:{width:32,height:32},children:W.requested_by_user?.name?.charAt(0)||"?"}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:W.requested_by_user?.name||"Unknown User"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:W.requested_by_user?.email||`ID: ${W.requested_by}`})]})]})},{id:"status",label:"Status",render:($,W)=>e.jsx(Me,{label:D(W.status||"pending"),size:"small",className:"w-24",variant:"outlined",color:H(W.status||"pending")})},{id:"transfer_lines",label:"Items",render:($,W)=>e.jsxs(x,{variant:"body2",className:"!text-gray-900",children:[W.transfer_lines?.length||0," items"]})},{id:"is_active",label:"Active",render:$=>e.jsx(Me,{icon:$==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:$==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:$==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:($,W)=>Ie(W.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:($,W)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(W),tooltip:`Edit ${W.request_number}`}),S&&e.jsx(Vt,{onClick:()=>B(W.id),tooltip:`Delete ${W.request_number}`,itemName:W.request_number,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Stock Transfer Requests Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage stock transfer requests between warehouses and locations"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Requests",value:L,icon:e.jsx(Un,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Requests",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Requests",value:z,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load stock transfer requests. Please try again."}),e.jsx(ot,{data:P,columns:R,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[j&&e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx(ts,{placeholder:"Search Stock Transfer Requests",value:t,onChange:q,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:$=>r($.target.value),className:"!min-w-32",size:"small",children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[j&&e.jsx(Xt,{title:"Export Stock Transfer Requests",description:"Are you sure you want to export the current stock transfer requests data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:$=>$.id,initialOrderBy:"request_number",loading:N,totalCount:E,page:M,rowsPerPage:f,onPageChange:V,isPermission:j,emptyMessage:t?`No stock transfer requests found matching "${t}"`:"No stock transfer requests found in the system"}),e.jsx(qEe,{open:o,onClose:()=>{l(!1),i(null)},request:n}),e.jsx(DEe,{drawerOpen:c,setDrawerOpen:m})]})},UEe=async t=>{try{return(await ie.get("/surveys",{params:t})).data}catch(s){throw s}},VEe=async t=>{try{return(await ie.get(`/surveys/${t}`)).data.data}catch(s){throw s}},HEe=async t=>(await ie.post("/surveys",t)).data,WEe=async t=>(await ie.delete(`/surveys/${t}`)).data,$l={all:["surveys"],lists:()=>[...$l.all,"list"],list:t=>[...$l.lists(),t],details:()=>[...$l.all,"detail"],detail:t=>[...$l.details(),t]},LF=(t,s)=>tt({queryKey:$l.list(t||{}),queryFn:()=>UEe(t),staleTime:300*1e3,...s}),YEe=t=>tt({queryKey:$l.detail(t),queryFn:()=>VEe(t),enabled:!!t,staleTime:300*1e3}),GEe=t=>{const s=is();return De({mutationFn:HEe,loadingMessage:"Saving survey...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:$l.lists()}),r.id&&s.invalidateQueries({queryKey:$l.detail(r.id)})},onError:t?.onError})},KEe=t=>{const s=is();return De({mutationFn:WEe,loadingMessage:"Deleting survey...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:$l.lists()})},onError:t?.onError})},QEe=nt({file:hs().required("Please select a file to import")}),ZEe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:QEe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("surveys")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"surveys",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Surveys",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple surveys. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},XEe=nt().shape({title:me().required("Survey title is required").min(2,"Survey title must be at least 2 characters").max(255,"Survey title must be at most 255 characters"),description:me().max(1e3,"Description must be at most 1000 characters").nullable(),category:me().oneOf(["cooler_inspection","customer_feedback","outlet_audit","competitor_analysis","brand_visibility","general"],"Category must be a valid survey category").required("Category is required"),target_roles:me().nullable(),expires_at:Ca().nullable(),is_active:me().oneOf(["Y","N"],"Status must be Y or N").required("Status is required"),fields:il().of(nt().shape({label:me().required("Field label is required"),field_type:me().oneOf(["text","textarea","number","select","checkbox","radio","date","time","photo","signature"],"Invalid field type").required("Field type is required"),options:me().nullable(),is_required:xO(),sort_order:Ge().integer()})).optional()}),JEe=({selectedSurvey:t,setSelectedSurvey:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,[i,o]=g.useState([]),{data:l,isLoading:c}=GS(),m=l?.data||[],u=()=>{s(null),r(!1),o([]),f.resetForm()},h=GEe();vt.useEffect(()=>{if(t?.fields&&t.fields.length>0){const N=t.fields.map(C=>({label:C.label,field_type:C.field_type||"text",options:C.options||null,is_required:C.is_required??!1,sort_order:C.sort_order||0,id:C.id||null}));o(N)}else o([])},[t]);const f=xt({initialValues:{title:t?.title||"",description:t?.description||"",category:t?.category||"general",target_roles:t?.target_roles!==null&&t?.target_roles!==void 0?String(t.target_roles):"",expires_at:t?.expires_at?new Date(t.expires_at).toISOString().split("T")[0]:"",is_active:t?.is_active||"Y"},validationSchema:XEe,enableReinitialize:!0,onSubmit:async N=>{try{const C={...n&&t?{id:t.id}:{},title:N.title,description:N.description,category:N.category,target_roles:N.target_roles&&N.target_roles!==""?Number(N.target_roles):void 0,expires_at:N.expires_at?new Date(N.expires_at).toISOString():void 0,is_active:N.is_active,survey_fields:i.filter(P=>P.label.trim()!=="").map((P,E)=>({...P.id?{id:P.id}:{},label:P.label.trim(),field_type:P.field_type,options:P.options||null,is_required:P.is_required,sort_order:P.sort_order||E+1}))};await h.mutateAsync(C),u()}catch(C){console.error("Error saving survey:",C)}}}),b=()=>{const N={label:"",field_type:"text",options:null,is_required:!1,sort_order:i.length+1,id:null};o([...i,N])},w=N=>{const C=i.filter((P,E)=>E!==N);o(C)},S=(N,C,P)=>{const E=[...i];E[N]={...E[N],[C]:P},o(E)},j=i.map((N,C)=>({...N,_index:C})),v=[{id:"label",label:"Label",width:200,render:(N,C)=>e.jsx(oe,{value:C.label,onChange:P=>S(C._index,"label",P.target.value),size:"small",fullWidth:!0,label:"Field Label",placeholder:"Enter field label"})},{id:"field_type",label:"Type",width:150,render:(N,C)=>e.jsxs(_e,{value:C.field_type,onChange:P=>S(C._index,"field_type",P.target.value),size:"small",fullWidth:!0,label:"Field Type",children:[e.jsx(Z,{value:"text",children:"Text"}),e.jsx(Z,{value:"number",children:"Number"}),e.jsx(Z,{value:"checkbox",children:"Checkbox"}),e.jsx(Z,{value:"radio",children:"Radio"})]})},{id:"options",label:"Options",width:200,render:(N,C)=>e.jsx(oe,{value:C.options||"",onChange:P=>S(C._index,"options",P.target.value),size:"small",fullWidth:!0,label:"Options",placeholder:"Comma-separated for select/radio",disabled:C.field_type!=="radio"&&C.field_type!=="checkbox"})},{id:"is_required",label:"Required",width:100,render:(N,C)=>e.jsxs(_e,{value:C.is_required?"true":"false",onChange:P=>S(C._index,"is_required",P.target.value==="true"),size:"small",fullWidth:!0,label:"Required",children:[e.jsx(Z,{value:"true",children:"Yes"}),e.jsx(Z,{value:"false",children:"No"})]})},{id:"actions",label:"Actions",sortable:!1,width:80,render:(N,C)=>e.jsx(Vt,{onClick:()=>w(C._index),tooltip:"Remove field",confirmDelete:!0,size:"medium",itemName:"field"})}];return e.jsx(it,{open:a,setOpen:u,title:n?"Edit Survey":"Create Survey",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"title",label:"Survey Title",placeholder:"Enter survey title",formik:f,required:!0}),e.jsxs(_e,{name:"category",label:"Category",formik:f,required:!0,children:[e.jsx(Z,{value:"general",children:"General"}),e.jsx(Z,{value:"cooler_inspection",children:"Cooler Inspection"}),e.jsx(Z,{value:"customer_feedback",children:"Customer Feedback"}),e.jsx(Z,{value:"outlet_audit",children:"Outlet Audit"}),e.jsx(Z,{value:"competitor_analysis",children:"Competitor Analysis"}),e.jsx(Z,{value:"brand_visibility",children:"Brand Visibility"})]}),e.jsxs(_e,{name:"target_roles",label:"Target Role",formik:f,disabled:c,children:[e.jsx(Z,{value:"",children:"Select a role (Optional)"}),m.map(N=>e.jsx(Z,{value:String(N.id),children:N.name},N.id))]}),e.jsx(oe,{name:"expires_at",label:"Expiry Date",placeholder:"Select expiry date",formik:f,type:"date"}),e.jsx(Ts,{name:"is_active",formik:f,required:!0,className:"col-span-2"}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter survey description",formik:f,multiline:!0,rows:4})})]}),e.jsxs(y,{className:"!space-y-3",children:[e.jsxs(y,{className:"!flex !justify-between !items-center",children:[e.jsx(x,{variant:"body1",className:"!font-semibold !text-gray-900",children:"Survey Fields"}),e.jsx(K,{type:"button",variant:"outlined",startIcon:e.jsx(Wr,{}),onClick:b,size:"small",children:"Add Field"})]}),i.length>0&&e.jsx(ot,{data:j,columns:v,getRowId:N=>N._index.toString(),pagination:!1,sortable:!1,emptyMessage:"No survey fields added yet."}),i.length===0&&e.jsxs(y,{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:'No survey fields added yet. Click "Add Field" to get started.'})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:u,className:"!mr-3",disabled:h.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:h.isPending,children:[h.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," ","Survey"]})]})]})})})},e8e=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState("all"),[l,c]=g.useState(null),[m,u]=g.useState(!1),[h,f]=g.useState(!1),[b,w]=g.useState(1),[S]=g.useState(10),{isCreate:j,isUpdate:v,isDelete:N,isRead:C}=Qe("survey"),{data:P,isLoading:E,error:M}=LF({search:s,page:b,limit:S,status:r==="all"?void 0:r,category:i==="all"?void 0:i},{enabled:C}),T=P?.data||[],A=P?.meta?.total||0,L=(P?.meta?.page||1)-1,F=KEe(),z=ls(),I=P?.stats?.total_surveys??T.length,Q=P?.stats?.published_surveys??0,Y=P?.stats?.active_surveys??0,B=P?.stats?.total_responses??0,q=g.useCallback(()=>{c(null),u(!0)},[]),V=g.useCallback(ee=>{c(ee),u(!0)},[]),G=g.useCallback(ee=>{t(`/masters/surveys/${ee.id}`)},[t]),H=g.useCallback(async ee=>{try{await F.mutateAsync(ee)}catch(ae){console.error("Error deleting survey:",ae)}},[F]),D=g.useCallback(ee=>{a(ee),w(1)},[]),R=ee=>{w(ee+1)},$=g.useCallback(async()=>{try{const ee={search:s,status:r==="all"?void 0:r,category:i==="all"?void 0:i};await z.mutateAsync({tableName:"surveys",filters:ee})}catch(ee){console.error("Error exporting surveys:",ee)}},[z,s,r,i]),W=ee=>({cooler_inspection:"primary",customer_feedback:"success",outlet_audit:"secondary",competitor_analysis:"error",brand_visibility:"warning",general:"default"})[ee]||"default",J=ee=>({cooler_inspection:"Cooler Inspection",customer_feedback:"Customer Feedback",outlet_audit:"Outlet Audit",competitor_analysis:"Competitor Analysis",brand_visibility:"Brand Visibility",general:"General"})[ee]||ee,te=[{id:"title",label:"Survey Info",render:(ee,ae)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:ae.title,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(ks,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:ae.title}),ae.description&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",title:ae.description,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",cursor:"help",width:"250px"},children:ae.description})]})]})},{id:"category",label:"Category",render:(ee,ae)=>e.jsx(Me,{label:J(ae.category),color:W(ae.category),size:"small"})},{id:"target_roles",label:"Target Roles",render:(ee,ae)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(la,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:ae.target_roles||"No roles specified"})]})},{id:"status",label:"Status",render:(ee,ae)=>e.jsxs(y,{className:"flex gap-2 items-center",children:[e.jsx(Me,{icon:ae.is_published?e.jsx(wb,{fontSize:"small"}):e.jsx(e_,{fontSize:"small"}),label:ae.is_published?"Published":"Draft",size:"small",variant:"outlined",color:ae.is_published?"success":"warning"}),e.jsx(Me,{icon:ae.is_active==="Y"?e.jsx(mt,{fontSize:"small"}):e.jsx(Ct,{fontSize:"small"}),label:ae.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:ae.is_active==="Y"?"success":"error"})]})},{id:"response_count",label:"Responses",render:(ee,ae)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Gc,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs font-medium",children:ae.response_count||0})]})},{id:"createdate",label:"Created Date",render:(ee,ae)=>Ie(typeof ae.createdate=="string"?ae.createdate:ae.createdate?.toString()||"")||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...v||N||C?[{id:"action",label:"Actions",sortable:!1,render:(ee,ae)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[C&&e.jsx(Wa,{onClick:()=>G(ae),tooltip:`View ${ae.title}`,icon:e.jsx(Sn,{fontSize:"small"}),color:"info"}),v&&e.jsx(rs,{onClick:()=>V(ae),tooltip:`Edit ${ae.title}`}),N&&e.jsx(Vt,{onClick:()=>H(ae.id),tooltip:`Delete ${ae.title}`,itemName:ae.title,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Survey Builder"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Create and manage dynamic surveys for field operations"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Surveys",value:I,icon:e.jsx(ks,{className:"w-6 h-6"}),color:"blue",isLoading:E}),e.jsx(fe,{title:"Published",value:Q,icon:e.jsx(wb,{className:"w-6 h-6"}),color:"green",isLoading:E}),e.jsx(fe,{title:"Active",value:Y,icon:e.jsx(cu,{className:"w-6 h-6"}),color:"purple",isLoading:E}),e.jsx(fe,{title:"Total Responses",value:B,icon:e.jsx(Gc,{className:"w-6 h-6"}),color:"teal",isLoading:E})]}),M&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load surveys. Please try again."}),e.jsx(ot,{data:T,columns:te,actions:C||j?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[C&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ts,{placeholder:"Search Surveys...",value:s,onChange:D,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:r,onChange:ee=>n(ee.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"published",children:"Published"}),e.jsx(Z,{value:"draft",children:"Draft"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:i,onChange:ee=>o(ee.target.value),className:"!w-68",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Categories"}),e.jsx(Z,{value:"cooler_inspection",children:"Cooler Inspection"}),e.jsx(Z,{value:"customer_feedback",children:"Customer Feedback"}),e.jsx(Z,{value:"outlet_audit",children:"Outlet Audit"}),e.jsx(Z,{value:"competitor_analysis",children:"Competitor Analysis"}),e.jsx(Z,{value:"brand_visibility",children:"Brand Visibility"}),e.jsx(Z,{value:"general",children:"General"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C&&e.jsx(Xt,{title:"Export Surveys",description:"Are you sure you want to export the current survey data to Excel? This will include all filtered results.",onConfirm:$,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:z.isPending,children:z.isPending?"Exporting...":"Export"})}),j&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>f(!0),children:"Import"}),j&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:q,children:"Create"})]})]}):!1,getRowId:ee=>ee.id,initialOrderBy:"title",loading:E,totalCount:A,page:L,rowsPerPage:S,onPageChange:R,isPermission:C,emptyMessage:s?`No surveys found matching "${s}"`:"No surveys found in the system"}),e.jsx(JEe,{selectedSurvey:l,setSelectedSurvey:c,drawerOpen:m,setDrawerOpen:u}),e.jsx(ZEe,{drawerOpen:h,setDrawerOpen:f})]})},t8e=()=>{const{id:t}=Kr(),s=Ws(),{data:a,isLoading:r,error:n,isFetching:i}=YEe(Number(t)),o=()=>{s("/masters/surveys")},l=h=>({cooler_inspection:"primary",customer_feedback:"success",outlet_audit:"secondary",competitor_analysis:"error",brand_visibility:"warning",general:"default"})[h]||"default",c=h=>({cooler_inspection:"Cooler Inspection",customer_feedback:"Customer Feedback",outlet_audit:"Outlet Audit",competitor_analysis:"Competitor Analysis",brand_visibility:"Brand Visibility",general:"General"})[h]||h,m=h=>({text:"Text",textarea:"Textarea",number:"Number",select:"Select",checkbox:"Checkbox",radio:"Radio",date:"Date",time:"Time",photo:"Photo",signature:"Signature"})[h]||h;if(r||i)return e.jsxs("div",{className:"!flex !items-start !gap-4",children:[e.jsxs("div",{className:"!flex-2 !flex !flex-col !gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"!absolute !top-3 !right-3",children:e.jsx(X,{variant:"circular",width:10,height:10,className:"!bg-green-200"})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !border-3 !border-white"})}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-green-50"}),e.jsxs("div",{className:"!space-y-2 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"30%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"60%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"40%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"70%",height:14})]})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:140,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4].map(h=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${40+h*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+h*6}%`,height:16})]},h))})]})]})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(h=>e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"40%",height:12})]}),e.jsx(X,{variant:"text",width:80,height:16,className:"!text-right"})]})},h))})]})]}),e.jsx("div",{className:"!flex-4 !space-y-4",children:e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(h=>e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"40%",height:12})]}),e.jsx(X,{variant:"text",width:80,height:16,className:"!text-right"})]})},h))})]})]})})]})]});if(n||!a)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load survey details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:o,className:"mt-4",children:"Back to Surveys"})]});const u=({title:h,children:f,icon:b})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[b&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(b,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:h})]}),f]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${a.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":a.is_active==="Y","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":a.is_active!=="Y"}),children:e.jsx(ks,{className:"!w-8 !h-8"})})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:a.title}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:c(a.category)}),e.jsxs("div",{className:"!flex !justify-center !gap-2 !mb-4",children:[e.jsx(Me,{icon:a.is_published?e.jsx(wb,{fontSize:"small"}):e.jsx(e_,{fontSize:"small"}),label:a.is_published?"Published":"Draft",size:"small",color:a.is_published?"success":"warning"}),e.jsx(Me,{icon:a.is_active==="Y"?e.jsx(mt,{fontSize:"small"}):e.jsx(cu,{fontSize:"small"}),label:a.is_active==="Y"?"Active":"Inactive",size:"small",color:a.is_active==="Y"?"success":"error"})]}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Response Count"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[a.response_count||0," responses"]})]}),a.expires_at&&e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Expires At"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof a.expires_at=="string"?a.expires_at:a.expires_at?.toString()||"")})]})]})]}),e.jsx(u,{title:"Survey Information",icon:ks,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Category"}),e.jsx(Me,{label:c(a.category),color:l(a.category),size:"small"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Target Roles"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:a.target_roles||"All Roles"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Created Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:a.createdate?Ie(typeof a.createdate=="string"?a.createdate:a.createdate?.toString()||""):"Not available"})]}),a.published_at&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Published Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof a.published_at=="string"?a.published_at:a.published_at?.toString()||"")})]}),a.description&&e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Description"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:a.description})]})]})})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsx(u,{title:"Survey Fields",icon:cu,children:a.fields&&a.fields.length>0?e.jsx("div",{className:"!space-y-3",children:a.fields.map((h,f)=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !items-center !justify-between !mb-2",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.label}),h.is_required&&e.jsx(Me,{label:"Required",size:"small",color:"error",className:"!text-xs"})]}),e.jsx(Me,{label:m(h.field_type||"text"),size:"small",color:"primary"})]}),h.options&&e.jsxs(x,{variant:"caption",className:"!text-gray-500 !block !mt-1",children:["Options: ",h.options]}),h.sort_order&&e.jsxs(x,{variant:"caption",className:"!text-gray-400 !block !mt-1",children:["Order: ",h.sort_order]})]},h.id||f))}):e.jsxs("div",{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:"No fields added to this survey yet."})]})}),e.jsx(u,{title:"Statistics",icon:Gc,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Total Responses"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"Number of completed surveys"})]}),e.jsx(x,{variant:"h6",className:"!font-bold !text-primary-600",children:a.response_count||0})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Total Fields"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"Number of survey fields"})]}),e.jsx(x,{variant:"h6",className:"!font-bold !text-blue-600",children:a.fields?.length||0})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Status"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"Current survey status"})]}),e.jsx(Me,{label:a.is_active==="Y"?"Active":"Inactive",color:a.is_active==="Y"?"success":"error",size:"small"})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Publication Status"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"Survey visibility"})]}),e.jsx(Me,{icon:a.is_published?e.jsx(wb,{fontSize:"small"}):e.jsx(e_,{fontSize:"small"}),label:a.is_published?"Published":"Draft",size:"small",color:a.is_published?"success":"warning"})]})})]})})]})]}),e.jsx("div",{className:"!mt-4",children:e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:o,children:"Back to Surveys"})})]})},s8e=nt({file:hs().required("Please select a file to import")}),a8e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:s8e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("unit_of_measurement")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"unit_of_measurement",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Units of Measurement",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple units of measurement. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},r8e=nt({name:me().required("Unit name is required").min(2,"Unit name must be at least 2 characters").max(100,"Unit name must not exceed 100 characters").trim(),description:me().max(500,"Description must not exceed 500 characters").nullable().transform(t=>t===""?null:t),category:me().max(50,"Category must not exceed 50 characters").nullable().transform(t=>t===""?null:t),symbol:me().max(10,"Symbol must not exceed 10 characters").nullable().transform(t=>t===""?null:t),is_active:me().required("Status is required").oneOf(["Y","N"],"Status must be either Active or Inactive")}),n8e=({selectedUnit:t,setSelectedUnit:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=LCe(),l=$Ce(),c=xt({initialValues:{name:t?.name||"",description:t?.description||"",category:t?.category||"",symbol:t?.symbol||"",is_active:t?.is_active||"Y"},validationSchema:r8e,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,description:m.description,category:m.category,symbol:m.symbol,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,data:u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving unit of measurement:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Unit of Measurement":"Create Unit of Measurement",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"name",label:"Unit Name",placeholder:"Enter unit name",formik:c,required:!0})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter description",formik:c,multiline:!0,rows:3})}),e.jsx(oe,{name:"category",label:"Category",placeholder:"Enter category (e.g., Weight, Volume, Length)",formik:c}),e.jsx(oe,{name:"symbol",label:"Symbol",placeholder:"Enter symbol (e.g., kg, L, m)",formik:c}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:[o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," "]})]})]})})})},i8e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("unit-of-measurement"),{data:v,isFetching:N,error:C}=c1({search:t,page:u,limit:f,status:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=zCe(),A=ls(),L=v?.stats?.total_units??0,F=v?.stats?.active_units??0,z=v?.stats?.inactive_units??0,I=v?.stats?.new_units_this_month??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting unit of measurement:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,status:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"unit_of_measurement",filters:D})}catch(D){console.error("Error exporting units of measurement:",D)}},[A,t,a]),H=[{id:"name",label:"Unit Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(u8,{className:"w-5 h-5"})}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:R.name}),R.symbol&&e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:["Symbol: ",R.symbol]}),R.category&&e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:["Category: ",R.category]})]})]})},{id:"description",label:"Description",render:(D,R)=>e.jsx(qa,{title:R.description,placement:"top",arrow:!0,children:e.jsx(x,{variant:"body2",className:"!text-gray-900 !max-w-xs !truncate",children:R.description})})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Unit of Measurement Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage units of measurement for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Units",value:L,icon:e.jsx(u8,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Units",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Units",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load units of measurement. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[j&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ts,{placeholder:"Search Units of Measurement...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>{r(D.target.value),h(1)},className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Units of Measurement",description:"Are you sure you want to export the current units of measurement data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,onPageChange:V,isPermission:j,emptyMessage:t?`No units of measurement found matching "${t}"`:"No units of measurement found in the system"}),e.jsx(n8e,{selectedUnit:n,setSelectedUnit:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(a8e,{drawerOpen:c,setDrawerOpen:m})]})},o8e=nt({file:hs().required("Please select a file to import")}),l8e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:o8e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("subunits")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"subunits",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Sub Units of Measurement",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple sub units of measurement. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},c8e=nt({name:me().min(2,"Sub unit name must be at least 2 characters").max(100,"Sub unit name must not exceed 100 characters").required("Sub unit name is required"),code:me().min(2,"Code must be at least 2 characters").max(20,"Code must not exceed 20 characters").matches(/^[A-Z0-9]+$/,"Code must contain only uppercase letters and numbers").optional(),description:me().max(500,"Description must not exceed 500 characters").optional(),unit_of_measurement_id:Ge().required("Unit of measurement is required").positive("Unit of measurement must be selected"),product_id:Ge().required("Product is required").positive("Product must be selected"),is_active:me().oneOf(["Y","N"],"Status must be either Active or Inactive").required("Status is required")}),d8e=({formik:t,setValue:s,onChange:a,name:r="unit_of_measurement_id",label:n="Unit of Measurement",placeholder:i="Select unit of measurement...",fullWidth:o=!0,size:l="small",disabled:c=!1,error:m=!1,helperText:u})=>{const{data:h=[],isLoading:f}=YCe(),b=h.map(C=>({value:C.id,label:`${C.name}`,disabled:!1})),w=t?.values[r]||"",S=b.find(C=>C.value===w)||null,j=C=>{t&&(t.setFieldValue(r,C?.value||""),t.setFieldTouched(r,!0)),s&&s(C?.value||""),a&&a(C)},v=m||t?.touched[r]&&!!t?.errors[r],N=u||t?.touched[r]&&t?.errors[r];return e.jsx(Ir,{options:b,value:S,onChange:(C,P)=>j(P),loading:f,disabled:c,size:l,fullWidth:o,renderInput:C=>e.jsx(mr,{...C,label:n,placeholder:i,error:v,helperText:N,InputProps:{...C.InputProps,startAdornment:e.jsxs(e.Fragment,{children:[S&&e.jsx(ut,{sx:{width:24,height:24,fontSize:"0.75rem",bgcolor:"primary.main",color:"primary.contrastText",mr:1},children:S.label.charAt(0).toUpperCase()}),C.InputProps.startAdornment]}),endAdornment:e.jsxs(e.Fragment,{children:[f?e.jsx(Ki,{color:"inherit",size:20}):null,C.InputProps.endAdornment]})}}),renderOption:(C,P)=>e.jsxs(y,{component:"li",...C,sx:{"& > img":{mr:2,flexShrink:0}},children:[e.jsx(ut,{sx:{width:24,height:24,fontSize:"0.75rem",bgcolor:"primary.main",color:"primary.contrastText",mr:2},children:P.label.charAt(0).toUpperCase()}),P.label]}),isOptionEqualToValue:(C,P)=>C.value===P?.value,getOptionLabel:C=>C.label,noOptionsText:"No units of measurement found",loadingText:"Loading units of measurement..."})},u8e=({formik:t,setValue:s,onChange:a,name:r="product_id",label:n="Product",placeholder:i="Select product...",fullWidth:o=!0,size:l="small",disabled:c=!1,error:m=!1,helperText:u})=>{const{data:h=[],isLoading:f}=GCe(),b=h.map(C=>({value:C.id,label:`${C.name} (${C.code})`,disabled:!1})),w=t?.values[r]||"",S=b.find(C=>C.value===w)||null,j=C=>{t&&(t.setFieldValue(r,C?.value||""),t.setFieldTouched(r,!0)),s&&s(C?.value||""),a&&a(C)},v=m||t?.touched[r]&&!!t?.errors[r],N=u||t?.touched[r]&&t?.errors[r];return e.jsx(Ir,{options:b,value:S,onChange:(C,P)=>j(P),loading:f,disabled:c,size:l,fullWidth:o,renderInput:C=>e.jsx(mr,{...C,label:n,placeholder:i,error:v,helperText:N,InputProps:{...C.InputProps,startAdornment:e.jsxs(e.Fragment,{children:[S&&e.jsx(ut,{sx:{width:24,height:24,fontSize:"0.75rem",bgcolor:"secondary.main",color:"secondary.contrastText",mr:1},children:S.label.charAt(0).toUpperCase()}),C.InputProps.startAdornment]}),endAdornment:e.jsxs(e.Fragment,{children:[f?e.jsx(Ki,{color:"inherit",size:20}):null,C.InputProps.endAdornment]})}}),renderOption:(C,P)=>e.jsxs(y,{component:"li",...C,sx:{"& > img":{mr:2,flexShrink:0}},children:[e.jsx(ut,{sx:{width:24,height:24,fontSize:"0.75rem",bgcolor:"secondary.main",color:"secondary.contrastText",mr:2},children:P.label.charAt(0).toUpperCase()}),P.label]}),isOptionEqualToValue:(C,P)=>C.value===P?.value,getOptionLabel:C=>C.label,noOptionsText:"No products found",loadingText:"Loading products..."})},m8e=({selectedSubUnit:t,setSelectedSubUnit:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=KCe(),l=QCe(),c=xt({initialValues:{name:t?.name||"",code:t?.code||"",description:t?.description||"",unit_of_measurement_id:t?.unit_of_measurement_id||0,product_id:t?.product_id||0,is_active:t?.is_active||"Y"},validationSchema:c8e,enableReinitialize:!0,onSubmit:async u=>{try{n&&t?await l.mutateAsync({id:t.id,data:u}):await o.mutateAsync(u),i()}catch(h){console.error("Error saving sub unit of measurement:",h)}}}),m=o.isPending||l.isPending;return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Sub Unit of Measurement":"Create Sub Unit of Measurement",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"name",label:"Sub Unit Name",placeholder:"Enter sub unit name",formik:c,required:!0})}),e.jsx(y,{className:"md:!col-span-1",children:e.jsx(oe,{name:"code",label:"Code",placeholder:"Enter code (optional)",formik:c,helperText:"Leave empty to auto-generate"})}),e.jsx(y,{className:"md:!col-span-1",children:e.jsx(d8e,{name:"unit_of_measurement_id",label:"Unit of Measurement",formik:c})}),e.jsx(y,{className:"md:!col-span-1",children:e.jsx(u8e,{formik:c})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter description",formik:c,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:m,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:m,loading:m,children:m?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},p8e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("unit-of-measurement"),{data:v,isFetching:N,error:C}=TF({search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N",page:u,limit:f},{enabled:j}),P=ZCe(),E=ls(),M=v?.data||[],T=v?.meta?.total||0,A=(v?.meta?.page||1)-1,L=v?.stats,F=g.useCallback(V=>{s(V),h(1)},[]),z=V=>{h(V+1)},I=g.useCallback(V=>{i(V),l(!0)},[]),Q=g.useCallback(async V=>{try{await P.mutateAsync(V.id)}catch(G){console.error("Error deleting sub unit of measurement:",G)}},[P]),Y=g.useCallback(()=>{i(null),l(!0)},[]),B=g.useCallback(async()=>{try{const V={search:t,is_active:a==="all"?void 0:a==="active"?"Y":"N"};await E.mutateAsync({tableName:"subunits",filters:V})}catch(V){console.error("Error exporting sub units of measurement:",V)}},[E,t,a]),q=[{id:"name",label:"Sub Unit Name",render:(V,G)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:G.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(bb,{className:"w-5 h-5"})}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:G.name||"Unknown"}),e.jsx(x,{variant:"caption",color:"text.secondary",children:G.code||"No Code"})]})]})},{id:"description",label:"Description",render:(V,G)=>G.description?e.jsx(qa,{title:G.description,placement:"top",arrow:!0,children:e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",maxWidth:"300px",cursor:"help"},children:G.description})}):"-"},{id:"unit_of_measurement_id",label:"Unit of Measurement",render:(V,G)=>e.jsx(Me,{label:G.subunits_unit_of_measurement?.name||"-",size:"small",variant:"outlined"})},{id:"is_active",label:"Status",render:V=>e.jsx(Me,{icon:V==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:V==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:V==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(V,G)=>Ie(G.createdate)},...w||S?[{id:"actions",label:"Actions",sortable:!1,render:(V,G)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>I(G),tooltip:`Edit ${G.name}`}),S&&e.jsx(Xt,{title:"Delete Sub Unit",description:`Are you sure you want to delete "${G.name||"this sub unit"}"? This action cannot be undone.`,onConfirm:()=>Q(G),children:e.jsx(qa,{title:"Delete Sub Unit",children:e.jsx(Vt,{})})})]})}]:[]];return j?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Sub Units of Measurement Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage sub units of measurement for your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Sub Units",value:L?.total_sub_units||0,icon:e.jsx(bb,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Sub Units",value:L?.active_sub_units||0,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Sub Units",value:L?.inactive_sub_units||0,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:L?.new_sub_units_this_month||0,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load sub units of measurement. Please try again."}),e.jsx(ot,{data:M,columns:q,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search sub units...",value:t,onChange:F,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:V=>r(V.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Sub Units",description:"Are you sure you want to export the current sub units of measurement data to Excel? This will include all filtered results.",onConfirm:B,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:E.isPending,children:E.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Y,children:"Create"})]})]}):!1,getRowId:V=>V.id,initialOrderBy:"name",loading:N,totalCount:T,page:A,rowsPerPage:f,isPermission:j,onPageChange:z,emptyMessage:t?"No sub units found matching your search criteria.":"No sub units of measurement found."}),e.jsx(m8e,{selectedSubUnit:n,setSelectedSubUnit:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(l8e,{drawerOpen:c,setDrawerOpen:m})]}):e.jsx(lt,{severity:"warning",children:"You don't have permission to view sub units of measurement."})},h8e=nt({name:me().required("Name is required").min(2,"Name must be at least 2 characters").max(100,"Name must not exceed 100 characters"),role_id:Ge().required("Role is required").positive("Please select a valid role"),phone_number:me().matches(/^[0-9+\-\s()]+$/,"Invalid phone number format"),employee_id:me().max(50,"Employee Code must not exceed 50 characters"),reporting_to:Ge().required("Reporting to is required"),password:me().when("isEdit",{is:!1,then:t=>t.required("Password is required").min(6,"Password must be at least 6 characters"),otherwise:t=>t.min(6,"Password must be at least 6 characters")}),is_active:me().required("Status is required")}),f8e=({selectedUser:t,setSelectedUser:s,drawerOpen:a,setDrawerOpen:r})=>{const[n,i]=g.useState(null),o=!!t,{data:l,isLoading:c}=GS({enabled:a}),m=l?.data||[],u=eie({onSuccess:()=>{j()}}),h=tie({onSuccess:()=>{j()}}),f={name:t?.name||"",email:t?.email||"",role_id:t?.role_id||"",phone_number:t?.phone_number||"",employee_id:t?.employee_id||"",address:t?.address||"",joining_date:Or(t?.joining_date),reporting_to:t?.reporting_to||"",password:"",is_active:t?.is_active||"Y",isEdit:!!t},b=xt({initialValues:f,validationSchema:h8e,enableReinitialize:!0,onSubmit:async N=>{try{const C=new FormData;C.append("name",N.name),C.append("email",N.email),C.append("role_id",N.role_id.toString()),C.append("phone_number",N.phone_number),C.append("employee_id",N.employee_id),C.append("address",N.address),C.append("joining_date",N.joining_date),C.append("reporting_to",N.reporting_to.toString()),C.append("is_active",N.is_active),N.password&&C.append("password",N.password),n&&C.append("profile_image",n),o&&t?await h.mutateAsync({id:t.id,userData:C}):await u.mutateAsync(C)}catch(C){console.error("Error saving user:",C)}}}),w=N=>{const C=N.target.files?.[0];C&&i(C)},S=N=>{N.preventDefault(),b.handleSubmit()},j=()=>{r(!1),b.resetForm(),s(null),i(null)},v=()=>{i(null)};return e.jsx(it,{open:a,setOpen:j,title:o?`Edit User: ${t?.name}`:"Create New User",children:e.jsxs(y,{component:"form",onSubmit:S,className:"p-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center mb-4 cursor-pointer flex flex-col items-center gap-2 hover:bg-gray-50",onClick:()=>document.getElementById("file-upload")?.click(),children:[e.jsx("input",{id:"file-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:w}),n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"body2",children:n.name}),e.jsx(ta,{size:"small",onClick:v,children:e.jsx(Vr,{fontSize:"small"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{variant:"contained",sx:{mb:1},children:"Upload file"}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"JPG, GIF or PNG. Max size of 10MB"})]})]}),e.jsxs(y,{className:"mb-6 flex flex-col gap-2",children:[e.jsx("p",{className:"!font-semibold !mb-4 !text-gray-900",children:"User Information"}),e.jsxs("div",{className:"flex mb-4 sm:flex-row flex-col sm:gap-4 gap-2",children:[e.jsx(oe,{name:"name",formik:b,label:"Full Name",placeholder:"Enter full name",required:!0}),e.jsx(oe,{name:"employee_id",formik:b,label:"Employee Code",placeholder:"Enter employee code"})]}),e.jsxs("div",{className:"flex mb-4 sm:flex-row flex-col sm:gap-4 gap-2",children:[e.jsx(oe,{name:"email",formik:b,label:"Email",placeholder:"Enter email address",type:"email"}),e.jsx(_e,{name:"role_id",formik:b,label:"Role",fullWidth:!0,required:!0,children:c?e.jsx(Z,{disabled:!0,children:"Loading roles..."}):m.map(N=>e.jsx(Z,{value:N.id,children:N.name},N.id))})]}),e.jsxs("div",{className:"flex mb-4 sm:flex-row flex-col sm:gap-4 gap-2",children:[e.jsx(oe,{name:"phone_number",formik:b,label:"Phone Number",placeholder:"Enter phone number"}),e.jsx(oe,{name:"joining_date",formik:b,label:"Joining Date",type:"date"})]}),e.jsx(pn,{name:"reporting_to",label:"Reporting Manager",formik:b,required:!0}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:b,required:!0})}),e.jsx(oe,{name:"address",formik:b,label:"Address",placeholder:"Enter address",multiline:!0,rows:3}),!o&&e.jsx(oe,{name:"password",formik:b,label:"Password",placeholder:"Enter password",type:"password",required:!0,className:"!mt-4"}),o&&e.jsx(oe,{name:"password",formik:b,label:"New Password (Optional)",placeholder:"Enter new password to change",type:"password",className:"!mt-4"})]}),e.jsxs("div",{className:"flex gap-4 justify-end",children:[e.jsx(K,{variant:"outlined",onClick:j,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:u.isPending||h.isPending,children:u.isPending||h.isPending?"Saving...":o?"Update":"Create"})]})]})})},x8e=nt({file:hs().required("Please select a file to import")}),g8e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:x8e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("users")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"users",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Users",size:"medium",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple users. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},y8e=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState(1),[l]=g.useState(10),[c,m]=g.useState(null),[u,h]=g.useState(!1),[f,b]=g.useState(!1),{isCreate:w,isUpdate:S,isDelete:j,isRead:v}=Qe("user"),{data:N,isFetching:C,error:P}=Qr({search:s,page:i,limit:l,isActive:r==="all"?void 0:r==="active"?"Y":r==="inactive"?"N":void 0},{enabled:v}),E=N?.data||[],M={total:N?.meta?.total||0,page:N?.meta?.page||1,limit:N?.meta?.limit||10,totalPages:N?.meta?.totalPages||0},T=[{id:"name",label:"Name & Avatar",render:(V,G)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",onClick:()=>q(G),children:[e.jsx(ut,{alt:G.name,src:G.profile_image||"mkx",className:nr("!rounded",{"!bg-primary-100 !text-primary-600":G.is_active==="Y","!bg-gray-200 !text-gray-600":G.is_active!=="Y"}),children:G.name.split(" ").map(H=>H[0]).join("")?.slice(0,2)}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:G.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:G.role?.name})]})]})},{id:"email",label:"Email Address",render:(V,G)=>G.email||e.jsx("span",{className:"italic text-gray-400",children:" No Email "})},{id:"role",label:"Role",render:(V,G)=>G.role?.name||e.jsx("span",{className:"italic text-gray-400",children:" No Role "})},{id:"is_active",label:"Status",render:V=>e.jsx(Me,{icon:V==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:V==="Y"?"Active":"Inactive",size:"small",variant:"outlined",className:"!text-start !justify-start",color:V==="Y"?"success":"error"})},{id:"phone_number",label:"Phone",render:(V,G)=>G.phone_number||e.jsx("span",{className:"italic text-gray-400",children:" No Phone "})},{id:"address",label:"Address",render:(V,G)=>G.address?e.jsx(qa,{title:G.address,placement:"top",arrow:!0,children:e.jsx("span",{className:"truncate text-ellipsis max-w-72",children:G.address})}):e.jsx("span",{className:"italic text-gray-400",children:" No Address "})},{id:"joining_date",label:"Join Date",render:(V,G)=>Ie(G.joining_date)||e.jsx("span",{className:"italic text-gray-400",children:" No Date "})},{id:"reporting_to",label:"Reports To",render:(V,G)=>G.reporting_manager?.name||e.jsx("span",{className:"italic text-gray-400",children:" No Reports To "})},...S||j?[{id:"action",label:"Actions",sortable:!1,render:(V,G)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[S&&e.jsx(rs,{onClick:()=>z(G),tooltip:`Edit ${G.name}`}),j&&e.jsx(Vt,{onClick:()=>I(G.id),tooltip:`Delete ${G.name}`,itemName:G.name,confirmDelete:!0})]})}]:[]],A=sie(),L=ls(),F=g.useCallback(()=>{m(null),h(!0)},[]),z=g.useCallback(V=>{m(V),h(!0)},[]),I=g.useCallback(V=>{A.mutate(V)},[A]),Q=g.useCallback(V=>{a(V),o(1)},[]),Y=V=>o(V+1),B=g.useCallback(async()=>{try{const V={search:s,isActive:r==="all"?void 0:r==="active"?"Y":"N"};await L.mutateAsync({tableName:"users",filters:V})}catch(V){console.error("Error exporting users:",V)}},[L,s,r]),q=g.useCallback(V=>{t(`/masters/users/${V.id}`)},[t]);return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Users Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage users, roles, and access across your organization"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Users",value:N?.stats?.total_users||0,icon:e.jsx(la,{className:"w-6 h-6"}),color:"blue",isLoading:C}),e.jsx(fe,{title:"Active Users",value:N?.stats?.active_users||0,icon:e.jsx(go,{className:"w-6 h-6"}),color:"green",isLoading:C}),e.jsx(fe,{title:"Inactive Users",value:N?.stats?.inactive_users||0,icon:e.jsx(Hoe,{className:"w-6 h-6"}),color:"red",isLoading:C}),e.jsx(fe,{title:"New This Month",value:N?.stats?.new_users||0,icon:e.jsx(sA,{className:"w-6 h-6"}),color:"purple",isLoading:C})]}),P&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load users. Please try again."}),e.jsx(ot,{data:E,columns:T,actions:v||w?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx(ts,{placeholder:"Search Users",value:s,onChange:Q,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),v&&e.jsxs(_e,{value:r,onChange:V=>n(V.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]}),w&&e.jsxs("div",{className:"flex items-center gap-2",children:[v&&e.jsx(Xt,{title:"Export Users",description:"Are you sure you want to export the current users data to Excel? This will include all filtered results.",onConfirm:B,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:L.isPending,children:L.isPending?"Exporting...":"Export"})}),w&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>b(!0),children:"Import"}),e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:F,children:"Create"})]})]}):!1,getRowId:V=>V.id,initialOrderBy:"name",loading:C,totalCount:M.total,page:i-1,rowsPerPage:l,isPermission:v,onPageChange:Y,emptyMessage:s?`No users found matching "${s}"`:"No users found in the system"}),e.jsx(f8e,{selectedUser:c,setSelectedUser:m,drawerOpen:u,setDrawerOpen:h}),e.jsx(g8e,{drawerOpen:f,setDrawerOpen:b})]})},b8e=()=>{const{id:t}=Kr();if(!t||isNaN(parseInt(t,10)))throw new Error("Invalid user ID");const s=parseInt(t,10),{data:a,isLoading:r,error:n}=Jne(s),i=a?.data;if(r)return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-2",children:e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-5 !text-center !relative",children:[e.jsx("div",{className:"!absolute !top-4 !right-4",children:e.jsx(X,{variant:"circular",width:12,height:12,className:"!bg-green-200"})}),e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !mb-4 !border-3 !border-white"}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-green-50"}),e.jsxs("div",{className:"!space-y-3 !text-left",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"50%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"70%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"40%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"80%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"35%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"60%",height:14})]})]})]})}),e.jsx("div",{className:"flex-4 !space-y-4",children:[1,2,3].map(h=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-5 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-20 !h-20 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-10 !translate-x-10"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1 !bg-blue-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-blue-200"})}),e.jsx(X,{variant:"text",width:140,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-5",children:[1,2,3,4].map(f=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${50+f*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+f*6}%`,height:16})]},f))})]})]},h))})]});if(n){if(n?.response?.status===404)throw new Error("User not found");return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsx(lt,{severity:"error",className:"!mb-3",children:"Failed to load user details. Please try again."}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"If this problem persists, please contact your system administrator."})]})})}if(!i)throw new Error("User not found");const o=h=>h.split(" ").map(f=>f[0]).join("")?.slice(0,2),l=h=>h.split("_").map(f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()).join(" "),c=h=>({CREATE:"created",UPDATE:"updated",DELETE:"deleted"})[h]||h.toLowerCase(),m=h=>{if(!h)return"Unknown device";const f=h.toLowerCase();if(f.includes("macintosh")||f.includes("mac os x")){const b=h.match(/Mac OS X (\d+[._]\d+[._]\d+)/),w=b?b[1].replace(/_/g,"."):"";if(f.includes("chrome")){const S=h.match(/Chrome\/(\d+\.\d+\.\d+\.\d+)/),j=S?S[1]:"";return`Mac${w?` (macOS ${w})`:""} - Chrome${j?` ${j}`:""}`}if(f.includes("safari")&&!f.includes("chrome"))return`Mac${w?` (macOS ${w})`:""} - Safari`;if(f.includes("firefox"))return`Mac${w?` (macOS ${w})`:""} - Firefox`}if(f.includes("windows")){if(f.includes("chrome"))return"Windows - Chrome";if(f.includes("firefox"))return"Windows - Firefox";if(f.includes("edge"))return"Windows - Edge"}return f.includes("android")&&f.includes("chrome")?"Android - Chrome":(f.includes("iphone")||f.includes("ipad"))&&f.includes("safari")?"iOS - Safari":f.includes("dart")?"Mobile App (Dart)":h},u=({title:h,children:f,icon:b,className:w=""})=>e.jsxs("div",{className:`!bg-white !rounded-lg !shadow !border !border-gray-200 !p-5 !relative !overflow-hidden ${w}`,children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-3 !mb-3",children:[b&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(b,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:h})]}),e.jsx("div",{className:"!mt-1",children:f})]})]});return e.jsxs("div",{className:"!grid !grid-cols-1 lg:!grid-cols-12 !gap-5 !items-start",children:[e.jsxs("div",{className:"lg:!col-span-4 flex flex-col gap-5",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-5 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${i.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{src:i.profile_image||void 0,className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-green-400 !to-green-600 !text-white":i.is_active==="Y","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":i.is_active==="N"}),children:o(i.name)})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:i.name}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:i.role?.name||"No Role Assigned"}),e.jsx(Me,{icon:i.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:i.is_active==="Y"?"Active":"Inactive",color:i.is_active==="Y"?"success":"error",size:"small",variant:"outlined"}),e.jsxs("div",{className:"!space-y-1 !text-left",children:[e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Employee ID"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.employee_id||"N/A"})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Contact"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.email})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Phone"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.phone_number||"N/A"})]})]})]}),e.jsx(u,{title:"Role & Organization",icon:Nle,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-5",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Role"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.role?.name||"Not assigned"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Company"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.company?.name||"Not assigned"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Depot"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.depot?.name||"Not assigned"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Zone"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.zone?.name||"Not assigned"})]}),e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Reports To"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.reporting_manager?.name||"Not assigned"})]})]})})]}),e.jsxs("div",{className:"lg:!col-span-8 flex flex-col gap-5",children:[e.jsx(u,{title:"Personal Information",icon:nA,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-5 !mt-2",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Full Name"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.name})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Email Address"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.email})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Phone Number"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.phone_number||"Not provided"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Employee ID"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.employee_id||"Not provided"})]}),e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Address"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:i.address||"Not provided"})]})]})}),e.jsx(u,{title:"Activity & Status",icon:h8,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-5",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Current Status"}),e.jsx("div",{className:"!mt-1",children:e.jsx(Me,{icon:i.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:i.is_active==="Y"?"Active":"Inactive",color:i.is_active==="Y"?"success":"error",size:"small",variant:"outlined"})})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Join Date"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:Ie(i.joining_date)||"N/A"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Last Login"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:Ie(i.last_login)||"Never"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Member Since"}),e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:Ie(i.created_at)||"N/A"})]})]})}),i.recent_activities&&e.jsx(u,{title:"Recent Audit Logs",icon:Yf,children:i.recent_activities.audit_logs.length>0?e.jsx("div",{className:"!space-y-3",children:i.recent_activities.audit_logs.map(h=>{const f=()=>{switch(h.action){case"CREATE":return e.jsx(os,{className:"!text-sm"});case"UPDATE":return e.jsx(rA,{className:"!text-sm"});case"DELETE":return e.jsx(Nb,{className:"!text-sm"});default:return e.jsx(Yf,{className:"!text-sm"})}};return e.jsx(y,{className:"!border !border-gray-200 !shadow-sm !rounded-lg !p-4 !bg-gradient-to-br !from-white !to-gray-50 hover:!shadow-md !transition-shadow !duration-200",children:e.jsxs("div",{className:"!flex !items-start !gap-3",children:[e.jsx("div",{className:`!flex-shrink-0 !w-10 !h-10 !rounded-lg !flex !items-center !justify-center ${h.action==="CREATE"?"!bg-green-100":h.action==="UPDATE"?"!bg-blue-100":"!bg-red-100"}`,children:f()}),e.jsxs("div",{className:"!flex-1 !min-w-0",children:[e.jsx("div",{className:"!flex !items-center !gap-2 !mb-2 !flex-wrap",children:e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:l(h.table_name)})}),e.jsxs(x,{variant:"body2",className:"!text-gray-700 !mb-2",children:[e.jsx("span",{className:"!font-semibold !text-gray-900",children:i.name})," ","has ",c(h.action)," the"," ",e.jsx("span",{className:"!font-bold !text-gray-900",children:l(h.table_name)})]}),e.jsxs("div",{className:"!flex !flex-wrap !items-center !gap-3 !text-xs !text-gray-500",children:[h.changed_at&&e.jsxs("div",{className:"!flex !items-center !gap-1",children:[e.jsx(h8,{className:"!text-xs"}),e.jsx("span",{className:"!font-medium",children:mp(h.changed_at)})]}),h.ip_address&&e.jsxs("div",{className:"!flex !items-center !gap-1",children:[e.jsx(hle,{className:"!text-xs"}),e.jsx("span",{className:"!font-medium",children:h.ip_address})]}),h.device_info&&e.jsxs("div",{className:"!flex !items-center !gap-1",children:[e.jsx(dle,{className:"!text-xs"}),e.jsx("span",{className:"!font-medium",children:m(h.device_info)})]})]})]})]})},h.id)})}):e.jsxs(y,{className:"!text-center !py-8",children:[e.jsx(Yf,{className:"!text-gray-300 !text-6xl !mb-3 !mx-auto"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No audit logs found"})]})})]})]})},v8e=nt({file:hs().required("Please select a file to import")}),j8e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:v8e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("van_inventory")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"van_inventory",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Van Inventory",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple van inventory records. Download the sample file to see the required format. Make sure User IDs and Product IDs exist in the system."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},N8e=async t=>{const s=new URLSearchParams;t?.page!==void 0&&s.append("page",t.page.toString()),t?.limit!==void 0&&s.append("limit",t.limit.toString()),t?.product_id!==void 0&&s.append("product_id",t.product_id.toString()),t?.include_expired_batches!==void 0&&s.append("include_expired_batches",t.include_expired_batches.toString()),t?.batch_status&&s.append("batch_status",t.batch_status),t?.serial_status&&s.append("serial_status",t.serial_status);const a=s.toString(),r=`/inventory-item-salesperson${a?`?${a}`:""}`;return(await ie.get(r)).data},$F=async(t,s)=>{const a=new URLSearchParams;s?.page!==void 0&&a.append("page",s.page.toString()),s?.limit!==void 0&&a.append("limit",s.limit.toString()),s?.product_id!==void 0&&a.append("product_id",s.product_id.toString()),s?.include_expired_batches!==void 0&&a.append("include_expired_batches",s.include_expired_batches.toString()),s?.batch_status&&a.append("batch_status",s.batch_status),s?.serial_status&&a.append("serial_status",s.serial_status);const r=a.toString(),n=`/inventory-item-salesperson/${t}${r?`?${r}`:""}`;return(await ie.get(n)).data},w8e=async(t,s)=>{const a=new URLSearchParams;s&&a.append("search",s);const r=a.toString(),n=`/inventory-items-dropdown/${t}${r?`?${r}`:""}`;return(await ie.get(n)).data},Om={all:["inventory-items"],lists:()=>[...Om.all,"list"],list:t=>[...Om.lists(),t],details:()=>[...Om.all,"detail"],detail:t=>[...Om.details(),t]},_8e=(t,s)=>tt({queryKey:Om.list(t),queryFn:async()=>{const a={page:t?.page,limit:t?.limit,product_id:t?.product_id,include_expired_batches:t?.include_expired_batches,batch_status:t?.batch_status,serial_status:t?.serial_status};return t?.salesperson_id?await $F(t.salesperson_id,a):await N8e(a)},staleTime:300*1e3,...s}),KS=(t,s)=>tt({queryKey:Om.detail(t),queryFn:async()=>await $F(t),enabled:!!t,staleTime:300*1e3,...s}),S8e=async t=>{try{return(await ie.get("/vehicles",{params:t})).data}catch(s){throw console.error("Error fetching vehicles:",s),new Error(s.response?.data?.message||"Failed to fetch vehicles")}},C8e=async t=>{try{return(await ie.post("/vehicles",t)).data}catch(s){throw console.error("Error creating vehicle:",s),new Error(s.response?.data?.message||"Failed to create vehicle")}},P8e=async(t,s)=>{try{return(await ie.put(`/vehicles/${t}`,s)).data}catch(a){throw console.error("Error updating vehicle:",a),new Error(a.response?.data?.message||"Failed to update vehicle")}},k8e=async t=>{try{return(await ie.delete(`/vehicles/${t}`)).data}catch(s){throw console.error("Error deleting vehicle:",s),new Error(s.response?.data?.message||"Failed to delete vehicle")}},Ff={all:["vehicles"],lists:()=>[...Ff.all,"list"],list:t=>[...Ff.lists(),t],details:()=>[...Ff.all,"detail"],detail:t=>[...Ff.details(),t]},QS=(t,s)=>tt({queryKey:Ff.list(t),queryFn:()=>S8e(t),staleTime:300*1e3,...s}),E8e=()=>De({mutationFn:C8e,invalidateQueries:["vehicles"],loadingMessage:"Creating vehicle..."}),T8e=()=>De({mutationFn:({id:t,...s})=>P8e(t,s),invalidateQueries:["vehicles"],loadingMessage:"Updating vehicle..."}),M8e=()=>De({mutationFn:k8e,invalidateQueries:["vehicles"],loadingMessage:"Deleting vehicle..."}),D8e=nt({user_id:Ge().required("Van Inventory User is required").positive("Van Inventory User ID must be a positive number").integer("Van Inventory User ID must be an integer"),loading_type:me().oneOf(["L","U"],"Loading Type must be Load (L) or Unload (U)").required("Loading Type is required"),status:me().oneOf(["D","A","C"],"Status must be Draft (D), Confirmed (A), or Canceled (C)").required("Status is required"),document_date:me().required("Document date is required"),vehicle_id:Ge().positive("Vehicle ID must be a positive number").integer("Vehicle ID must be an integer").nullable().optional(),location_type:me().oneOf(["van","warehouse","depot","store"],"Invalid location type").default("van").optional(),location_id:Ge().positive("Location ID must be a positive number").integer("Location ID must be an integer").nullable().optional(),is_active:me().oneOf(["Y","N"],"Must be Y or N").default("Y").required("Active status is required")}),R8e={remaining_quantity:0,total_quantity:0,batch_number:"",lot_number:"",manufacturing_date:"",expiry_date:"",quantity:null},A8e=({isOpen:t,setIsOpen:s,selectedRowIndex:a,setSelectedRowIndex:r,formik:n,quantity:i=null,inventoryByProductId:o,isUnloadType:l=!1})=>{const[c,m]=g.useState([]),[u,h]=g.useState("");g.useEffect(()=>{if(!t||a===null)return;const P=n.values.van_inventory_items[a];if(!P){m([]);return}const E=P.product_batches||[];if(E.length>0){console.log("ManageBatch - Loading existing batches:",E),m(E);return}if(l&&P.product_id&&o&&o[P.product_id]&&o[P.product_id].batches.length>0){const M=o[P.product_id].batches.map(T=>({...T,quantity:0}));console.log("ManageBatch - Initializing unload batches:",M),m(M);return}m([])},[t,a]);const f=g.useCallback(()=>{s(!1),m([]),r(null),h("")},[s,r]),b=g.useCallback(P=>{m(E=>E.filter((M,T)=>T!==P))},[]),w=g.useCallback((P,E,M)=>{m(T=>{const A=[...T];if(P==="quantity"){const L=Number(i),F=Number.isFinite(L)&&L>0,z=A.reduce((V,G,H)=>H===E?V:V+(Number(G.quantity)||0),0),I=F?Math.max(0,L-z):Number.POSITIVE_INFINITY,Q=Number(M),Y=Number.isFinite(Q)?Q:0,B=l&&A[E].batch_remaining_quantity?Number(A[E].batch_remaining_quantity):Number.POSITIVE_INFINITY,q=Math.min(Math.max(0,Y),I,B);return A[E]={...A[E],quantity:q},A}return A[E]={...A[E],[P]:M},A})},[i,l]),S=g.useCallback(()=>{m(P=>[...P,{...R8e}])},[]),j=g.useCallback(()=>{if(a===null)return;const P=Number(i),E=Number.isFinite(P)&&P>0,M=c.reduce((I,Q)=>I+(Number(Q.quantity)||0),0);if(E&&M>P){It.error(`Total batch quantity (${M}) cannot exceed item quantity (${P})`);return}const T=c.findIndex(I=>{const Q=(I.batch_number||"").trim(),Y=(I.manufacturing_date||"").trim(),B=(I.expiry_date||"").trim(),q=Number(I.quantity);return!Q||!Y||!B||!Number.isFinite(q)||q<=0});if(T!==-1){It.error(`Please fill Batch Number, MFG Date, EXP Date and Quantity (> 0) for row ${T+1}.`);return}const A=new Set,L=c.findIndex(I=>{const Q=`${(I.batch_number||"").trim().toLowerCase()}|${(I.lot_number||"").trim().toLowerCase()}`;return A.has(Q)?!0:(A.add(Q),!1)});if(L!==-1){It.error(`Duplicate batch entry found at row ${L+1}.`);return}const F=c.map(I=>({...I,batch_number:(I.batch_number||"").trim(),lot_number:(I.lot_number||"").trim(),quantity:Number(I.quantity)||0,manufacturing_date:(I.manufacturing_date||"").trim(),expiry_date:(I.expiry_date||"").trim()})),z=[...n.values.van_inventory_items];z[a]={...z[a],quantity:l?M:z[a].quantity,product_batches:F},n.setFieldValue("van_inventory_items",z),f()},[a,c,n,f,i,l]),v=g.useMemo(()=>{if(!u.trim())return c;const P=u.toLowerCase();return c?.filter(E=>E.batch_number?.toLowerCase().includes(P)||E.lot_number?.toLowerCase().includes(P))},[c,u]),N=g.useMemo(()=>{if(a===null)return!1;const P=Number(i),E=Number.isFinite(P)&&P>0,M=c.reduce((L,F)=>L+(Number(F.quantity)||0),0);if(E){if(M!==P)return!1}else if(c.length===0)return!1;if(c.some(L=>{const F=(L.batch_number||"").trim(),z=(L.manufacturing_date||"").trim(),I=(L.expiry_date||"").trim(),Q=Number(L.quantity);return!F||!z||!I||!Number.isFinite(Q)||Q<=0}))return!1;const A=new Set;for(const L of c){const F=`${(L.batch_number||"").trim().toLowerCase()}|${(L.lot_number||"").trim().toLowerCase()}`;if(A.has(F))return!1;A.add(F)}return!0},[a,c,i]),C=g.useMemo(()=>[{id:"batch_number",label:"Batch Number",render:(P,E,M)=>l?e.jsx("span",{className:"text-gray-900",children:E.batch_number}):e.jsx(oe,{value:E.batch_number,onChange:T=>w("batch_number",M,T.target.value),size:"small",className:"!w-52",placeholder:"Enter batch number",fullWidth:!0})},{id:"manufacturing_date",label:"MFG Date",render:(P,E,M)=>l?e.jsx("span",{className:"text-gray-900",children:Ie(E.manufacturing_date)}):e.jsx(oe,{type:"date",value:E.manufacturing_date,onChange:T=>w("manufacturing_date",M,T.target.value),className:"!w-52",size:"small",placeholder:"Enter manufacturing date"})},{id:"expiry_date",label:"EXP Date",render:(P,E,M)=>l?e.jsx("span",{className:"text-gray-900",children:Ie(E.expiry_date)}):e.jsx(oe,{type:"date",value:E.expiry_date,onChange:T=>w("expiry_date",M,T.target.value),className:"!w-52",size:"small",placeholder:"Enter expiry date"})},{id:"available_quantity",label:"Available",isVisible:l,render:(P,E)=>l?e.jsx("span",{className:"text-gray-600",children:E.batch_remaining_quantity||0}):null},{id:"quantity",label:l?"Unload Quantity":"Quantity",render:(P,E,M)=>e.jsx(oe,{type:"number",value:E.quantity,onChange:T=>w("quantity",M,T.target.value),size:"small",className:"!w-32",placeholder:l?"Enter unload quantity":"Enter quantity",fullWidth:!0,inputProps:{min:0,max:l&&E.batch_remaining_quantity||void 0}})},{id:"actions",label:"Actions",render:(P,E,M)=>e.jsx(Vt,{onClick:()=>b(M),tooltip:`Delete ${E.batch_number||"batch"}`,itemName:E.batch_number||"batch",confirmDelete:!0})}],[w,b,l]);return e.jsxs(Kl,{open:t,onClose:f,slotProps:{paper:{className:"!min-w-[60%] !max-w-[60%]"}},children:[e.jsxs("div",{className:"flex justify-between items-center !p-2",children:[e.jsxs("p",{className:"!font-semibold text-lg !text-gray-900",children:["Batch Information (",i,")"]}),e.jsx(Wa,{icon:e.jsx(Vr,{}),onClick:f,size:"small","aria-label":"Close dialog"})]}),e.jsx(pr,{}),e.jsxs(y,{className:"!p-2 min-h-[40vh]",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2",children:[e.jsx(ts,{placeholder:"Search Batch",value:u,onChange:P=>h(P)}),!l&&e.jsx(K,{variant:"contained",color:"primary",startIcon:e.jsx(Wr,{size:16}),onClick:S,children:"Add Batch"})]}),e.jsx(ot,{stickyHeader:!0,maxHeight:"50vh",columns:C,data:v,compact:!0,pagination:!1,sortable:!1})]}),e.jsxs(y,{className:"!p-2 !flex !justify-end !border-t gap-2 !border-gray-300",children:[e.jsx(K,{variant:"outlined",color:"info",onClick:f,children:"Cancel"}),e.jsx(K,{variant:"contained",color:"primary",onClick:j,disabled:!N,children:"Update"})]})]})},I8e={serial_number:"",quantity:1,product_id:0},O8e=({isOpen:t,setIsOpen:s,selectedRowIndex:a,setSelectedRowIndex:r,formik:n,quantity:i=null,inventoryByProductId:o,isUnloadType:l=!1})=>{const[c,m]=g.useState([]);g.useEffect(()=>{if(!t||a===null)return;const S=n.values.van_inventory_items[a];if(!S){m([]);return}let j=S.product_serials||[];if(j.length===0&&l&&o&&typeof S.product_id=="number"){const v=o[S.product_id];v&&v.serials.length>0&&(j=v.serials.map(N=>({...N,selected:!1})))}if(l)console.log("ManageSerial - Loading unload serials:",j),m(j);else{const v=j.length,N=Number(i),C=v>0?v:Number.isFinite(N)&&N>0?N:0,P=Array.from({length:C},(E,M)=>{const T=j[M];return{...I8e,...T||{},product_id:Number(S.product_id||0),quantity:1,serial_number:T?.serial_number||""}});console.log("ManageSerial - Loading load serials:",{desiredCount:C,existingSerialsCount:v,quantity:N,normalizedSerials:P}),m(P)}},[t,a]);const u=g.useCallback(()=>{s(!1),m([]),r(null)},[s,r]),h=g.useCallback((S,j,v)=>{m(N=>{const C=[...N];return S==="selected"&&l?C[j].selected=!!v:S!=="selected"&&(C[j]={...C[j],[S]:S==="quantity"?Number(v)||0:v}),C})},[l]),f=g.useMemo(()=>{if(a===null)return!1;if(l)return c.filter(P=>P.selected).length>0;const S=Number(i);if(Number.isFinite(S)&&S>0){if(c.length!==S)return!1}else if(c.length===0)return!1;const v=c.map(C=>(C.serial_number||"").trim());if(v.some(C=>C.length===0))return!1;const N=new Set;for(const C of v){const P=C.toLowerCase();if(N.has(P))return!1;N.add(P)}return!0},[a,c,i,l]),b=g.useCallback(()=>{if(a===null)return;if(l){const E=c.filter(T=>T.selected);if(E.length===0){It.error("Please select at least one serial number.");return}console.log("ManageSerial - Saving unload serials:",{selectedRowIndex:a,selectedCount:E.length,serials:E});const M=[...n.values.van_inventory_items];M[a]={...M[a],quantity:E.length,product_serials:E.map(T=>({...T,serial_number:(T.serial_number||"").trim(),quantity:1,selected:!0}))},n.setFieldValue("van_inventory_items",M),u();return}const S=Number(i);if(Number.isFinite(S)&&S>0&&c.length!==S){It.error(`Serial count (${c.length}) must match item quantity (${S}).`);return}const j=c.map(E=>(E.serial_number||"").trim()),v=j.findIndex(E=>E.length===0);if(v!==-1){It.error(`Serial number is required for row ${v+1}.`);return}const N=new Set,C=j.findIndex(E=>{const M=E.toLowerCase();return N.has(M)?!0:(N.add(M),!1)});if(C!==-1){It.error(`Duplicate serial number found: ${j[C]}`);return}const P=[...n.values.van_inventory_items];P[a]={...P[a],product_serials:c.map(E=>({...E,serial_number:(E.serial_number||"").trim(),quantity:1}))},n.setFieldValue("van_inventory_items",P),u()},[a,c,n,u,i,l]),w=g.useMemo(()=>{const S=[];return l&&S.push({id:"selected",label:"Select",width:80,render:(j,v,N)=>e.jsx("input",{type:"checkbox",checked:v.selected||!1,onChange:C=>h("selected",N,C.target.checked),className:"w-4 h-4"})}),S.push({id:"serial_number",label:"Serial Number",render:(j,v,N)=>l?e.jsx("span",{className:"text-gray-900",children:v.serial_number}):e.jsx(oe,{value:v.serial_number,onChange:C=>h("serial_number",N,C.target.value),size:"small",placeholder:"Enter serial number",fullWidth:!0})}),S.push({id:"quantity",label:"Quantity",render:(j,v)=>e.jsx(oe,{type:"number",value:v.quantity,disabled:!0,size:"small",placeholder:"1",fullWidth:!0,slotProps:{input:{inputProps:{min:1,max:1}}}})}),S},[h,l]);return e.jsxs(Kl,{open:t,onClose:u,slotProps:{paper:{className:"!min-w-[60%] !max-w-[60%]"}},children:[e.jsxs("div",{className:"flex justify-between items-center !p-2",children:[e.jsx("p",{className:"!font-semibold text-lg !text-gray-900",children:l?"Select Serials to Unload":`Serial Information (${i})`}),e.jsx(Wa,{icon:e.jsx(Vr,{}),onClick:u,size:"small","aria-label":"Close dialog"})]}),e.jsx(pr,{}),e.jsx(y,{className:"!p-2 min-h-[40vh]",children:e.jsx(ot,{stickyHeader:!0,maxHeight:"50vh",columns:w,data:c,compact:!0,pagination:!1,sortable:!1})}),e.jsxs(y,{className:"!p-2 !flex !justify-end !border-t gap-2 !border-gray-300",children:[e.jsx(K,{variant:"outlined",color:"info",onClick:u,children:"Cancel"}),e.jsx(K,{variant:"contained",color:"primary",onClick:b,disabled:!f,children:"Update"})]})]})};let F8e=0;const L8e=()=>`temp-${Date.now()}-${F8e++}`,$8e=({selectedVanInventory:t,setSelectedVanInventory:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=g.useRef(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(null),[f,b]=g.useState(null),w=gEe(),S=yEe(),{data:j}=OF(t?.id||0),{data:v}=Cu({limit:1e3,status:"active"}),{data:N}=QS({limit:1e3,isActive:"Y"}),{data:C}=No({limit:1e3,isActive:"Y"}),P=xt({initialValues:{user_id:t?.user_id||"",loading_type:t?.loading_type||"L",status:t?.status||"A",document_date:t?.document_date||new Date().toISOString().split("T")[0],vehicle_id:t?.vehicle_id||"",location_type:t?.location_type||"van",location_id:t?.location_id||"",is_active:t?.is_active||"Y",van_inventory_items:[]},validationSchema:D8e,enableReinitialize:!0,onSubmit:async J=>{try{if(J.van_inventory_items.length===0){It.error("Please add at least one item to the van inventory.");return}if(J.van_inventory_items.filter(ne=>ne.batch_lot_id&&ne.quantity!=null&&ne.remaining_quantity!=null&&Number(ne.quantity)>ne.remaining_quantity).length>0)return It.error("Some items have quantities exceeding available stock. Please adjust before submitting."),!1;if(J.van_inventory_items.filter(ne=>!ne.product_id||ne.quantity==null).length>0)return It.error("Please complete all fields (Product, Batch, and Quantity) for all items before submitting."),!1;const ae=J.van_inventory_items.some(ne=>ne.tracking_type?.toLowerCase()==="batch"&&ne.product_batches&&Array.isArray(ne.product_batches)&&ne.product_batches.length>0&&ne.quantity!=null&&Number(ne.quantity)!==ne.product_batches.reduce((xe,ge)=>xe+(ge.quantity??0),0)),ce=J.van_inventory_items.some(ne=>ne.tracking_type?.toLowerCase()==="serial"&&ne.product_serials&&Array.isArray(ne.product_serials)&&ne.product_serials.length>0&&ne.quantity!=null&&Number(ne.quantity)!==ne.product_serials.length);if(ae||ce)return It.error("Quantity mismatch detected. Please ensure the quantity matches the selected batch quantities or serial numbers."),!1;const he={...n&&t?{id:t.id}:{},user_id:Number(J.user_id),loading_type:J.loading_type,status:J.status,document_date:J.document_date||new Date().toISOString().split("T")[0],vehicle_id:J.vehicle_id?Number(J.vehicle_id):null,location_type:J.location_type,location_id:J.location_id?Number(J.location_id):null,is_active:J.is_active,van_inventory_items:J.van_inventory_items.filter(ne=>ne.product_id&&ne.quantity!=null).map(ne=>{const xe=ne.tracking_type?.toLowerCase()==="batch"&&ne.product_batches&&Array.isArray(ne.product_batches)&&ne.product_batches.length>0?ne.product_batches.filter(ge=>ge?.quantity&&ge?.quantity>0):null;return{product_id:Number(ne.product_id),product_name:ne.product_name||null,product_serials:ne.tracking_type?.toLowerCase()==="serial"&&ne.product_serials&&Array.isArray(ne.product_serials)&&ne.product_serials.length>0?ne.product_serials:null,product_batches:xe,quantity:Number(ne.quantity),notes:ne.notes||null,tracking_type:ne.tracking_type||null,batch_lot_id:ne.batch_lot_id?Number(ne.batch_lot_id):null,...ne.id&&{id:ne.id}}})};n&&t?await S.mutateAsync({id:t.id,...he}):await w.mutateAsync(he),V()}catch(te){console.error("Error saving van inventory:",te),It.error("Failed to save van inventory. Please try again.");return}}}),E=P.values.user_id?Number(P.values.user_id):0,M=P.values.loading_type==="U",{data:T,isLoading:A,refetch:L}=KS(E,{enabled:!!E&&a&&M}),F=g.useMemo(()=>v?.data||[],[v]),z=g.useMemo(()=>N?.data||[],[N]),I=g.useMemo(()=>C?.data||[],[C]),Q=g.useMemo(()=>M?T?.data?(T.data.products||[]).map(ee=>({id:ee.product_id,name:ee.product_name,code:ee.product_code,tracking_type:ee.tracking_type,unit_price:0})):[]:F,[M,T,F]),Y=g.useMemo(()=>{const J={};return!M||!T?.data||(T.data.products||[]).forEach(ae=>{const ce=(ae.batches||[]).map(ne=>({batch_lot_id:ne.batch_lot_id,total_quantity:ne.total_quantity,batch_number:ne.batch_number,lot_number:ne.lot_number,manufacturing_date:ne.manufacturing_date,expiry_date:ne.expiry_date,batch_total_quantity:ne.total_quantity,batch_remaining_quantity:ne.remaining_quantity,remaining_quantity:ne.remaining_quantity,supplier_name:ne.supplier_name,quality_grade:ne.quality_grade,days_until_expiry:ne.days_until_expiry,is_expired:ne.is_expired,is_expiring_soon:ne.is_expiring_soon,quantity:null})),he=(ae.serials||[]).map(ne=>({id:ne.serial_id,product_id:ae.product_id,serial_number:ne.serial_number,quantity:1,selected:!1}));J[ae.product_id]={batches:ce,serials:he}}),J},[M,T]),B=j?.data,q=B?.id,V=()=>{r(!1),s(null),P.resetForm(),i.current=null};g.useEffect(()=>{if(!a){i.current=null;return}if(i.current!==q)if(n&&B&&q){console.log("Loading van inventory items:",B);const J=new Map;B.items?.forEach(ee=>{const ae=J.get(ee.product_id),ce=F.find(ne=>ne.id===ee.product_id),he=ee.tracking_type||ce?.tracking_type||null;if(ae)ae.quantity=(Number(ae.quantity)||0)+(ee.quantity??0),he==="batch"&&ee.batch_lot_id&&(ae.product_batches||(ae.product_batches=[]),ae.product_batches.push({batch_lot_id:ee.batch_lot_id,batch_number:ee.batch_number||"",lot_number:ee.lot_number||"",quantity:ee.quantity??0,remaining_quantity:ee.product_remaining_quantity??0,total_quantity:ee.batch_total_remaining_quantity??0,manufacturing_date:"",expiry_date:ee.expiry_date||""})),he==="serial"&&ee.product_serials&&Array.isArray(ee.product_serials)&&(ae.product_serials||(ae.product_serials=[]),ae.product_serials.push(...ee.product_serials.map(ne=>({id:ne.id,product_id:ee.product_id,serial_number:ne.serial_number,quantity:1,selected:!0}))));else{const ne={product_id:ee.product_id,product_name:ee.product_name||null,quantity:ee.quantity??null,notes:ee.notes||null,batch_lot_id:ee.batch_lot_id??null,batch_number:ee.batch_number||null,lot_number:ee.lot_number||null,remaining_quantity:ee.product_remaining_quantity??null,total_quantity:ee.batch_total_remaining_quantity??null,tracking_type:he,id:ee.id,tempId:`edit-${ee.id}`,product_batches:[],product_serials:[]};he==="batch"&&ee.batch_lot_id&&(ne.product_batches=[{batch_lot_id:ee.batch_lot_id,batch_number:ee.batch_number||"",lot_number:ee.lot_number||"",quantity:ee.quantity??0,remaining_quantity:ee.product_remaining_quantity??0,total_quantity:ee.batch_total_remaining_quantity??0,manufacturing_date:"",expiry_date:ee.expiry_date||""}]),he==="serial"&&ee.product_serials&&Array.isArray(ee.product_serials)&&(ne.product_serials=ee.product_serials.map(xe=>({id:xe.id,product_id:ee.product_id,serial_number:xe.serial_number,quantity:1,selected:!0}))),J.set(ee.product_id,ne)}});const te=Array.from(J.values());console.log("Processed items for form:",te),P.setFieldValue("van_inventory_items",te),i.current=q}else n||i.current!==0&&(P.setFieldValue("van_inventory_items",[]),i.current=0)},[a,n,q,B,F]),g.useEffect(()=>{M&&E>0&&a&&L()},[M,E,a,L]);const G=g.useCallback(()=>{const J={product_id:null,quantity:null,id:null,batch_lot_id:null,batch_number:null,lot_number:null,remaining_quantity:null,total_quantity:null,product_batches:[],product_serials:[],tempId:L8e()};P.setFieldValue("van_inventory_items",[...P.values.van_inventory_items||[],J])},[P]),H=g.useCallback(J=>{const te=(P.values.van_inventory_items||[]).filter((ee,ae)=>ae!==J);P.setFieldValue("van_inventory_items",te)},[P]),D=g.useCallback((J,te,ee)=>{const ae=P.values.van_inventory_items||[],ce=ae[J];if(!ce)return;const he=[...ae];if(te==="product_id"){const ne=ee===""||ee===null?null:Number(ee),xe=Q.find(pe=>pe.id===ne);let ge=[],le=[];if(M&&ne&&Y[ne]){const pe=Y[ne];ge=pe.batches.map(Re=>({...Re,quantity:0})),le=pe.serials.map(Re=>({...Re,selected:!1}))}he[J]={...ce,product_id:ne,product_name:xe?.name||null,batch_lot_id:null,batch_number:null,tracking_type:xe?.tracking_type||null,lot_number:null,remaining_quantity:null,total_quantity:null,quantity:(M&&(xe?.tracking_type==="batch"||xe?.tracking_type==="serial"),null),notes:"",product_batches:ge,product_serials:le}}else te==="quantity"?he[J]={...ce,quantity:ee===""||ee===null?null:Number(ee)}:he[J]={...ce,[te]:ee===""||ee===null?null:ee};P.setFieldValue("van_inventory_items",he)},[P,Q,M,Y]),R=g.useCallback(J=>{const te=P.values.van_inventory_items[J];te?(h(J),b(te.quantity),l(!0)):(h(null),b(null),l(!1))},[P.values.van_inventory_items]),$=g.useCallback(J=>{const te=P.values.van_inventory_items[J];te?(h(J),b(te.quantity),m(!0)):(h(null),b(null),m(!1))},[P.values.van_inventory_items]),W=g.useMemo(()=>[{id:"product_id",label:"Product",width:450,render:(J,te,ee)=>e.jsx(_e,{name:`van_inventory_items[${ee}].product_id`,value:te.product_id??"",onChange:ae=>{const ce=ae.target.value;D(ee,"product_id",ce===""||ce===null?null:Number(ce))},fullWidth:!0,size:"small",placeholder:M?A?"Loading inventory...":Q.length===0?"No products in van inventory":"Select product from van inventory":"Select product",disableClearable:!1,children:Q.map(ae=>e.jsxs(Z,{value:ae.id,children:[ae.name,ae.code&&` [${ae.code}]`]},ae.id))})},{id:"tracking_type",label:"Tracking Type",width:300,render:(J,te,ee)=>e.jsxs(y,{className:"flex justify-between items-center",children:[e.jsx(x,{variant:"body2",className:"!text-gray-700 uppercase",children:J??"None"}),e.jsxs(y,{className:"flex justify-end items-center gap-2",children:[J&&J.toLowerCase()==="batch"||J&&J.toLowerCase()==="serial"?e.jsxs(K,{startIcon:e.jsx(U4,{}),variant:"text",onClick:()=>{if(!te.product_id){It.error("Please select a product first");return}if(P.values.loading_type==="L"&&(!te.quantity||te.quantity===""||te.quantity==="0")){It.error("Please enter quantity before selecting batch/serial");return}J&&J.toLowerCase()==="batch"?R(ee):$(ee)},children:["Select"," ",J&&J.toLowerCase()==="batch"?"Batch":J&&J.toLowerCase()==="serial"?"Serial":"None"]}):null,(te.tracking_type==="serial"&&te.product_serials?.length!==te.quantity||te.tracking_type==="batch"&&te.product_batches?.reduce((ae,ce)=>ae+(ce.quantity??0),0)!==te.quantity)&&e.jsx(qa,{placement:"top",color:"error",title:te.tracking_type==="serial"?`Mismatch: ${te.product_serials?.length||0} serial number(s) assigned, but quantity is ${te.quantity}. Please select serials to match the quantity.`:`Mismatch: ${te.product_batches?.reduce((ae,ce)=>ae+(ce.quantity??0),0)||0} units in batches, but quantity is ${te.quantity}. Please adjust batch quantities to match.`,arrow:!0,children:e.jsx(Cle,{color:"error",fontSize:"small"})})]})]})},{id:"quantity",label:`${P.values.loading_type==="L"?"Load":"Unload"} Quantity`,width:250,render:(J,te,ee)=>{const ae=(te.tracking_type==="batch"||te.tracking_type==="serial")&&M;return e.jsx(oe,{name:`van_inventory_items[${ee}].quantity`,type:"number",value:te.quantity??"",onChange:ce=>{const he=ce.target.value;D(ee,"quantity",he===""?null:he)},size:"small",fullWidth:!0,placeholder:"Enter Quantity",disabled:ae})}},{id:"action",label:"Actions",width:80,sortable:!1,render:(J,te,ee)=>e.jsx(Vt,{onClick:()=>H(ee),tooltip:"Remove item"})}],[Q,P.values.loading_type,D,H,R,$,M,A]);return e.jsxs(it,{open:a,setOpen:V,title:n?"Edit Van Stock":"Load/Unload Stock to Van",size:"large",children:[e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:P.handleSubmit,className:"!space-y-3",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(pn,{name:"user_id",label:"Van Inventory User",formik:P,required:!0}),e.jsxs(_e,{name:"loading_type",label:"Type",formik:P,required:!0,children:[e.jsx(Z,{value:"L",children:"Load"}),e.jsx(Z,{value:"U",children:"Unload"})]}),e.jsxs(_e,{name:"status",label:"Status",formik:P,required:!0,children:[e.jsx(Z,{value:"D",children:"Draft"}),e.jsx(Z,{value:"A",children:"Confirmed"}),e.jsx(Z,{value:"C",children:"Canceled"})]}),e.jsx(oe,{name:"document_date",label:"Document Date",type:"date",formik:P,required:!0}),e.jsx(_e,{name:"vehicle_id",label:"Vehicle",formik:P,placeholder:"Select Vehicle",children:z.map(J=>e.jsxs(Z,{value:J.id,children:[J.vehicle_number," (",J.type,")"]},J.id))}),e.jsx(_e,{name:"location_id",label:"Location/Depot",formik:P,placeholder:"Select Location/Depot",children:I.map(J=>e.jsxs(Z,{value:J.id,children:[J.name," (",J.code,")"]},J.id))})]}),e.jsx(Ts,{name:"is_active",label:"Active Status",formik:P,required:!0}),e.jsx(ot,{data:P.values.van_inventory_items,compact:!0,actions:e.jsxs(y,{className:"!flex !justify-between !items-center",children:[e.jsxs(x,{variant:"body1",className:"!font-semibold",children:["Inventory Items"," "]}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:G,startIcon:e.jsx(Wr,{size:16}),children:"Add Item"})]}),columns:W,getRowId:J=>J.tempId||J.id?.toString()||"unknown",pagination:!1,emptyMessage:M?"No items added. For Unload type, only products in user's van inventory are available.":"No items added. Click 'Add Item' to add inventory items"}),e.jsxs(y,{className:"!flex !justify-end !gap-3 !mt-6",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:V,disabled:w.isPending||S.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:w.isPending||S.isPending,children:w.isPending||S.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})}),e.jsx(A8e,{isOpen:o,setIsOpen:l,selectedRowIndex:u,setSelectedRowIndex:h,formik:P,quantity:f,inventoryByProductId:M?Y:void 0,isUnloadType:M}),e.jsx(O8e,{isOpen:c,setIsOpen:m,selectedRowIndex:u,setSelectedRowIndex:h,formik:P,quantity:f,inventoryByProductId:M?Y:void 0,isUnloadType:M})]})},z8e=({open:t,onClose:s,vanInventory:a})=>{const[r,n]=g.useState(!1),[i,o]=g.useState(!1),{data:l,isLoading:c,error:m}=OF(a?.id||0),u=l?.data||a;g.useEffect(()=>{t&&(n(!1),o(!1))},[t]),g.useEffect(()=>{if(m&&!r&&t){const P=setTimeout(()=>{o(!0)},2e3);return()=>clearTimeout(P)}},[m,r,t]);const h=()=>{n(!0),s()},f=P=>({D:"bg-yellow-100 text-yellow-800",A:"bg-green-100 text-green-800",C:"bg-red-100 text-red-800"})[P]||"bg-gray-100 text-gray-800",b=P=>({D:"Draft",A:"Confirmed",C:"Canceled"})[P]||P,w=P=>{switch(P){case"D":return e.jsx(ks,{className:"w-4 h-4"});case"A":return e.jsx(Da,{className:"w-4 h-4"});case"C":return e.jsx(ya,{className:"w-4 h-4"});default:return e.jsx(ks,{className:"w-4 h-4"})}},S=P=>{switch(P){case"L":return"Load";case"U":return"Unload";default:return P}},j=P=>P==="L"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800",v=()=>{h()};if(c)return e.jsx(it,{open:t,setOpen:h,title:"Van Inventory Details",size:"large",children:e.jsxs("div",{className:"!p-6 !space-y-6",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !mb-4"}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-2"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto"})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[1,2,3,4].map(P=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6",children:[e.jsx(X,{variant:"text",width:"40%",height:20,className:"!mb-4"}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(E=>e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(X,{variant:"text",width:"30%",height:16}),e.jsx(X,{variant:"text",width:"40%",height:16})]},E))})]},P))})]})});if(m||!u&&i)return e.jsx(it,{open:t,setOpen:h,title:"Van Inventory Details",size:"large",children:e.jsxs("div",{className:"!p-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ya,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load van inventory details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:v,className:"mt-4",children:"Back to Van Inventory"})]})});if(!u)return e.jsx(it,{open:t,setOpen:h,title:"Van Inventory Details",size:"large",children:e.jsx("div",{className:"!p-6",children:e.jsx(x,{variant:"body2",className:"!text-gray-500 text-center",children:"No van inventory data available"})})});const N=({title:P,children:E,icon:M})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-2 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[M&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(M,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:P})]}),E]})]}),C=[{id:"product_name",label:"Product",render:(P,E)=>e.jsx(x,{variant:"body2",className:"!font-medium !text-gray-900",children:E.product_name||`Product #${E.product_id}`})},{id:"tracking_type",label:"Tracking Type",render:(P,E)=>{const M=(E.tracking_type||"").toString().toLowerCase(),T=M||(Array.isArray(E.product_serials)?"serial":Array.isArray(E.product_batches)||E.batch_number||E.batch_lot_id?"batch":"");return e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(x,{variant:"body2",className:"!text-gray-700 uppercase",children:T||"None"})})}},{id:"quantity",label:"Quantity",render:(P,E)=>e.jsx(x,{variant:"body2",className:"!text-gray-700",children:E.quantity})}];return e.jsx(it,{open:t,setOpen:h,title:"Van Inventory Details",size:"large",children:e.jsxs("div",{className:"!p-5 mb-10 !space-y-5",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${u.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":u.loading_type==="L","!bg-gradient-to-br !from-purple-400 !to-purple-600 !text-white":u.loading_type==="U"}),children:e.jsx(Un,{className:"!w-8 !h-8"})})}),e.jsxs(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:["Van Inventory #",u.id]}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:u.user?.name||"Unknown User"}),e.jsxs("div",{className:"!flex !justify-center !gap-2 !mb-4",children:[e.jsx(Me,{icon:w(u.status||"D"),label:b(u.status||"D"),className:`${f(u.status||"D")} font-semibold`,size:"small"}),e.jsx(Me,{label:S(u.loading_type||"L"),className:`${j(u.loading_type||"L")} font-semibold`,size:"small"})]}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Total Items"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[u.items?.length||0," items"]})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Document Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(u.document_date)||"N/A"})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Last Updated"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(u.last_updated)||"N/A"})]})]})]}),e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(N,{title:"User Information",icon:Tr,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"User Name:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u.user?.name||"N/A"})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Email:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u.user?.email||"N/A"})]})]})}),e.jsx(N,{title:"Vehicle Information",icon:Un,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Vehicle Number:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u.vehicle?.vehicle_number||"No Vehicle"})]}),u.vehicle&&e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Vehicle Type:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !capitalize",children:u.vehicle.type||"N/A"})]})]})}),e.jsx(N,{title:"Inventory Information",icon:Bn,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Type:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:S(u.loading_type||"L")})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Status:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:b(u.status||"D")})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Document Date:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(u.document_date)||"N/A"})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Active Status:"}),e.jsx(x,{variant:"body2",className:`!font-semibold ${u.is_active==="Y"?"!text-green-600":"!text-red-600"}`,children:u.is_active==="Y"?"Active":"Inactive"})]})]})}),e.jsx(N,{title:"Location Information",icon:Ks,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Location Type:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !capitalize",children:u.location_type||"Van"})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Location ID:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u.location_id||"N/A"})]})]})})]}),e.jsx(N,{title:"Inventory Items",icon:Wt,children:e.jsx("div",{className:"!space-y-2",children:u.items&&u.items.length>0?e.jsx(ot,{data:u.items,columns:C,getRowId:P=>P.id?.toString()||`${P.product_id}-${P.batch_lot_id||""}-${P.batch_number||""}`,pagination:!1,compact:!0,sortable:!1,emptyMessage:"No items found"}):e.jsx(x,{variant:"body2",className:"!text-gray-500 !text-center !py-4",children:"No items found"})})})]})})},q8e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState("all"),[o,l]=g.useState(void 0),[c,m]=g.useState(null),[u,h]=g.useState(!1),[f,b]=g.useState(!1),[w,S]=g.useState(!1),[j,v]=g.useState(1),[N]=g.useState(10),{isCreate:C,isUpdate:P,isDelete:E,isRead:M}=Qe("van-stock"),{data:T,isLoading:A,error:L}=IF({search:t,page:j,limit:N,status:a==="all"?void 0:a==="active"?"active":"inactive",loading_type:n==="all"?void 0:n==="load"?"L":"U",user_id:o},{enabled:M}),F=T?.data||[],z=T?.meta?.total||0,I=(T?.meta?.page||1)-1,Q=bEe(),Y=ls(),B=T?.stats?.total_records??0,q=T?.stats?.active_records??0,V=T?.stats?.inactive_records??0,G=T?.stats?.van_inventory??0,H=g.useCallback(()=>{m(null),h(!0)},[]),D=g.useCallback(ge=>{m(ge),b(!0)},[]),R=g.useCallback(async ge=>{try{await Q.mutateAsync(ge)}catch(le){console.error("Error deleting van inventory:",le)}},[Q]),$=g.useCallback(ge=>{s(ge),v(1)},[]),W=g.useCallback((ge,le)=>{l(le?le.id:void 0),v(1)},[]),J=g.useCallback(ge=>{r(ge),v(1)},[]),te=g.useCallback(ge=>{i(ge),v(1)},[]),ee=ge=>{v(ge+1)},ae=g.useCallback(async()=>{try{const ge={search:t,status:a==="all"?void 0:a==="active"?"active":"inactive",user_id:o};await Y.mutateAsync({tableName:"van_inventory",filters:{...ge,user_id:o}})}catch(ge){console.error("Error exporting van inventory:",ge)}},[Y,t,a]),ce=ge=>{switch(ge){case"L":return"Load";case"U":return"Unload";default:return ge}},he=ge=>{switch(ge){case"D":return"Draft";case"A":return"Confirmed";case"C":return"Canceled";default:return ge}},ne=ge=>{switch(ge){case"D":return"warning";case"A":return"success";case"C":return"error";default:return"default"}},xe=[{id:"user_id",label:"User",render:(ge,le)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:le.user?.name||"Unknown",className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Un,{className:"w-5 h-5"})}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:le.user?.name||"Unknown User"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:le.user?.email||"No email"})]})]})},{id:"loading_type",label:"Type",render:(ge,le)=>e.jsx(Me,{label:ce(le.loading_type||"L"),size:"small",className:"w-24",variant:"outlined",color:le.loading_type==="L"?"success":"error",icon:le.loading_type==="L"?e.jsx(fs,{}):e.jsx(St,{})})},{id:"status",label:"Status",render:(ge,le)=>e.jsx(Me,{label:he(le.status||"D"),size:"small",className:"w-24",variant:"outlined",color:ne(le.status||"D")})},{id:"items",label:"Items",render:(ge,le)=>e.jsxs(x,{variant:"body2",className:"!text-gray-900",children:[le.items?.length||0," items"]})},{id:"vehicle",label:"Vehicle",render:(ge,le)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:le.vehicle?.vehicle_number||"No Vehicle"})},{id:"document_date",label:"Document Date",render:(ge,le)=>Ie(le.document_date)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},{id:"is_active",label:"Active",render:ge=>e.jsx(Me,{icon:ge==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:ge==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:ge==="Y"?"success":"error"})},{id:"last_updated",label:"Last Updated",render:(ge,le)=>{const pe=Ie(le.last_updated);return pe?e.jsx("span",{children:pe}):e.jsx("span",{className:"italic text-gray-400",children:"No Date"})}},...P||E||M?[{id:"id",label:"Actions",sortable:!1,render:(ge,le)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[M&&e.jsx(e.Fragment,{children:e.jsx(Wa,{onClick:()=>D(le),tooltip:"Manage van inventory items",icon:e.jsx(Sn,{fontSize:"small"}),color:"info"})}),E&&e.jsx(Vt,{onClick:()=>R(le.id),tooltip:`Delete Van Inventory #${le.id}`,itemName:`Van Inventory #${le.id}`,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Van Stock Load/Unload"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage van inventory, stock levels, and load/unload operations for sales personnel"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Records",value:B,icon:e.jsx(Un,{className:"w-6 h-6"}),color:"blue",isLoading:A}),e.jsx(fe,{title:"Active Records",value:q,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:A}),e.jsx(fe,{title:"Inactive Records",value:V,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:A}),e.jsx(fe,{title:"New This Month",value:G,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:A})]}),L&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load van inventory. Please try again."}),e.jsx(ot,{data:F,columns:xe,actions:M||C?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[M&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ts,{placeholder:"Search Van Inventory...",value:t,onChange:$,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:ge=>J(ge.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:n,onChange:ge=>te(ge.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Types"}),e.jsx(Z,{value:"load",children:"Load"}),e.jsx(Z,{value:"unload",children:"Unload"})]}),e.jsx(y,{className:"!w-70",children:e.jsx(pn,{label:"",placeholder:"Select User",value:o,onChange:W,fullWidth:!0,size:"small"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M&&e.jsx(Xt,{title:"Export Van Inventory",description:"Are you sure you want to export the current van inventory data to Excel? This will include all filtered results.",onConfirm:ae,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:Y.isPending,children:Y.isPending?"Exporting...":"Export"})}),C&&e.jsx(K,{variant:"outlined",startIcon:e.jsx(fs,{}),onClick:()=>S(!0),children:"Import"}),C&&e.jsx(K,{variant:"contained",startIcon:e.jsx(os,{}),onClick:H,children:"Create"})]})]}):!1,getRowId:ge=>ge.id,initialOrderBy:"last_updated",loading:A,totalCount:z,page:I,rowsPerPage:N,onPageChange:ee,isPermission:M,emptyMessage:t?`No van inventory found matching "${t}"`:"No van inventory found in the system"}),e.jsx($8e,{selectedVanInventory:c,setSelectedVanInventory:m,drawerOpen:u,setDrawerOpen:h}),e.jsx(z8e,{open:f,onClose:()=>{b(!1),m(null)},vanInventory:c}),e.jsx(j8e,{drawerOpen:w,setDrawerOpen:S})]})},B8e=nt({file:hs().required("Please select a file to import")}),U8e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:B8e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("vehicles")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"vehicles",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Vehicles",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple vehicles. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},V8e=nt({vehicle_number:me().required("Vehicle number is required").min(1,"Vehicle number must be at least 1 character").max(20,"Vehicle number must be less than 20 characters"),type:me().required("Vehicle type is required").max(20,"Type must be less than 20 characters"),make:me().max(50,"Make must be less than 50 characters"),model:me().max(50,"Model must be less than 50 characters"),capacity:Ge().positive("Capacity must be a positive number"),mileage:Ge().positive("Mileage must be a positive number"),is_active:me().required("Status is required")}),H8e=({selectedVehicle:t,setSelectedVehicle:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=E8e(),l=T8e(),c=xt({initialValues:{vehicle_number:t?.vehicle_number||"",type:t?.type||"",make:t?.make||"",model:t?.model||"",year:t?.year?t.year.toString():"",capacity:t?.capacity||"",fuel_type:t?.fuel_type||"",status:t?.status||"available",mileage:t?.mileage||"",is_active:t?.is_active||"Y"},validationSchema:V8e,enableReinitialize:!0,onSubmit:async m=>{try{const u={vehicle_number:m.vehicle_number,type:m.type,make:m.make,model:m.model,year:m.year?Number(m.year):void 0,capacity:m.capacity?Number(m.capacity):void 0,fuel_type:m.fuel_type,status:m.status,mileage:m.mileage?Number(m.mileage):void 0,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving vehicle:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Vehicle":"Create Vehicle",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(oe,{name:"vehicle_number",label:"Vehicle Number",placeholder:"Enter vehicle number",formik:c,required:!0}),e.jsxs(_e,{name:"type",label:"Vehicle Type",formik:c,required:!0,children:[e.jsx(Z,{value:"Truck",children:"Truck"}),e.jsx(Z,{value:"Trailer",children:"Trailer"}),e.jsx(Z,{value:"Van",children:"Van"}),e.jsx(Z,{value:"Pickup",children:"Pickup"}),e.jsx(Z,{value:"Motorcycle",children:"Motorcycle"}),e.jsx(Z,{value:"Car",children:"Car"}),e.jsx(Z,{value:"Bus",children:"Bus"}),e.jsx(Z,{value:"Other",children:"Other"})]}),e.jsx(oe,{name:"make",label:"Make",placeholder:"Enter vehicle make",formik:c}),e.jsx(oe,{name:"model",label:"Model",placeholder:"Enter vehicle model",formik:c}),e.jsx(oe,{name:"year",label:"Year",placeholder:"Select manufacturing year",type:"year",formik:c}),e.jsx(oe,{name:"capacity",label:"Capacity",placeholder:"Enter capacity (tons)",type:"number",formik:c}),e.jsxs(_e,{name:"fuel_type",label:"Fuel Type",formik:c,children:[e.jsx(Z,{value:"Petrol",children:"Petrol"}),e.jsx(Z,{value:"Diesel",children:"Diesel"}),e.jsx(Z,{value:"Electric",children:"Electric"}),e.jsx(Z,{value:"Hybrid",children:"Hybrid"}),e.jsx(Z,{value:"CNG",children:"CNG"}),e.jsx(Z,{value:"LPG",children:"LPG"}),e.jsx(Z,{value:"Other",children:"Other"})]}),e.jsxs(_e,{name:"status",label:"Status",formik:c,children:[e.jsx(Z,{value:"available",children:"Available"}),e.jsx(Z,{value:"in-use",children:"In Use"}),e.jsx(Z,{value:"maintenance",children:"Maintenance"}),e.jsx(Z,{value:"out-of-service",children:"Out of Service"})]}),e.jsx(oe,{name:"mileage",label:"Mileage (km)",placeholder:"Enter current mileage",type:"number",formik:c}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(Ts,{name:"is_active",formik:c,required:!0})})]}),e.jsxs(y,{className:"!flex !justify-end items-center ",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:[o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," ","Vehicle"]})]})]})})})},W8e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("vehicle"),{data:v,isFetching:N,error:C}=QS({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total_count||0,M=(v?.meta?.current_page||1)-1,T=M8e(),A=ls(),L=v?.stats?.total_vehicles??P.length,F=v?.stats?.active_vehicles??P.filter(D=>D.is_active==="Y").length,z=v?.stats?.inactive_vehicles??P.filter(D=>D.is_active==="N").length,I=v?.stats?.new_vehicles??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting vehicle:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"vehicles",filters:D})}catch(D){console.error("Error exporting vehicles:",D)}},[A,t,a]),H=[{id:"vehicle_number",label:"Vehicle Number",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.vehicle_number,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(o8,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:R.vehicle_number}),R.type&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block",children:R.type})]})]})},{id:"make",label:"Make & Model",render:(D,R)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.make||e.jsx("span",{className:"italic text-gray-400",children:"No Make"})}),R.model&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block",children:R.model})]})},{id:"year",label:"Year",render:D=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:D||e.jsx("span",{className:"italic text-gray-400",children:"-"})})},{id:"fuel_type",label:"Fuel Type",render:D=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:D||e.jsx("span",{className:"italic text-gray-400",children:"-"})})},{id:"status",label:"Status",render:D=>e.jsx(Me,{label:D||"available",size:"small",variant:"outlined",className:"!capitalize",color:D==="available"?"success":"default"})},{id:"is_active",label:"Active",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.vehicle_number}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.vehicle_number}`,itemName:R.vehicle_number,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Vehicle Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage vehicles, fleet tracking, and maintenance schedules"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Vehicles",value:L,icon:e.jsx(o8,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Vehicles",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Vehicles",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load vehicles. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Vehicles...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>r(D.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Vehicles",description:"Are you sure you want to export the current vehicles data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"vehicle_number",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No vehicles found matching "${t}"`:"No vehicles found in the system"}),e.jsx(H8e,{selectedVehicle:n,setSelectedVehicle:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(U8e,{drawerOpen:c,setDrawerOpen:m})]})},Y8e=nt({file:hs().required("Please select a file to import")}),G8e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:Y8e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("warehouses")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"warehouses",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Warehouses",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple warehouses. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},K8e=nt({name:me().required("Warehouse name is required").min(2,"Name must be at least 2 characters").max(100,"Name must be less than 100 characters"),type:me().max(50,"Type must be less than 50 characters"),location:me().max(255,"Location must be less than 255 characters"),is_active:me().required("Status is required")}),Q8e=({selectedWarehouse:t,setSelectedWarehouse:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=FEe(),l=LEe(),c=xt({initialValues:{name:t?.name||"",type:t?.type||"",location:t?.location||"",is_active:t?.is_active||"Y"},validationSchema:K8e,enableReinitialize:!0,onSubmit:async m=>{try{const u={name:m.name,type:m.type,location:m.location,is_active:m.is_active};n&&t?await l.mutateAsync({id:t.id,...u}):await o.mutateAsync(u),i()}catch(u){console.error("Error saving warehouse:",u)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Warehouse":"Create Warehouse",size:"medium",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"name",label:"Warehouse Name",placeholder:"Enter warehouse name",formik:c,required:!0})}),e.jsx(oe,{name:"type",label:"Warehouse Type",placeholder:"Enter warehouse type (e.g., Storage, Distribution)",formik:c}),e.jsxs(_e,{name:"is_active",label:"Status",formik:c,required:!0,children:[e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"location",label:"Location",placeholder:"Enter warehouse location",formik:c,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!flex !justify-end items-center ",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:[o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," ","Warehouse"]})]})]})})})},Z8e=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(1),[f]=g.useState(10),{isCreate:b,isUpdate:w,isDelete:S,isRead:j}=Qe("warehouse"),{data:v,isFetching:N,error:C}=FF({search:t,page:u,limit:f,isActive:a==="all"?void 0:a==="active"?"Y":"N"},{enabled:j}),P=v?.data||[],E=v?.meta?.total||0,M=(v?.meta?.page||1)-1,T=$Ee(),A=ls(),L=v?.stats?.total_warehouses??P.length,F=v?.stats?.active_warehouses??P.filter(D=>D.is_active==="Y").length,z=v?.stats?.inactive_warehouses??P.filter(D=>D.is_active==="N").length,I=v?.stats?.new_warehouses??0,Q=g.useCallback(()=>{i(null),l(!0)},[]),Y=g.useCallback(D=>{i(D),l(!0)},[]),B=g.useCallback(async D=>{try{await T.mutateAsync(D)}catch(R){console.error("Error deleting warehouse:",R)}},[T]),q=g.useCallback(D=>{s(D),h(1)},[]),V=D=>{h(D+1)},G=g.useCallback(async()=>{try{const D={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N"};await A.mutateAsync({tableName:"warehouses",filters:D})}catch(D){console.error("Error exporting warehouses:",D)}},[A,t,a]),H=[{id:"name",label:"Warehouse Name",render:(D,R)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:R.name,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(p8,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900",children:R.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:R.location})]})]})},{id:"type",label:"Type",render:(D,R)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:R.type||e.jsx("span",{className:"italic text-gray-400",children:"No Type"})})},{id:"is_active",label:"Status",render:D=>e.jsx(Me,{icon:D==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:D==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(D,R)=>Ie(R.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...w||S||j?[{id:"action",label:"Actions",sortable:!1,render:(D,R)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[w&&e.jsx(rs,{onClick:()=>Y(R),tooltip:`Edit ${R.name}`}),S&&e.jsx(Vt,{onClick:()=>B(R.id),tooltip:`Delete ${R.name}`,itemName:R.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Warehouse Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage warehouses, storage facilities, and distribution centers"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Warehouses",value:L,icon:e.jsx(p8,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Warehouses",value:F,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Inactive Warehouses",value:z,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:N}),e.jsx(fe,{title:"New This Month",value:I,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),C&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load warehouses. Please try again."}),e.jsx(ot,{data:P,columns:H,actions:j||b?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Warehouses...",value:t,onChange:q,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:D=>r(D.target.value),className:"!w-32",children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsx(Xt,{title:"Export Warehouses",description:"Are you sure you want to export the current warehouses data to Excel? This will include all filtered results.",onConfirm:G,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:A.isPending,children:A.isPending?"Exporting...":"Export"})}),b&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>m(!0),children:"Import"}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:D=>D.id,initialOrderBy:"name",loading:N,totalCount:E,page:M,rowsPerPage:f,isPermission:j,onPageChange:V,emptyMessage:t?`No warehouses found matching "${t}"`:"No warehouses found in the system"}),e.jsx(Q8e,{selectedWarehouse:n,setSelectedWarehouse:i,drawerOpen:o,setDrawerOpen:l}),e.jsx(G8e,{drawerOpen:c,setDrawerOpen:m})]})},X8e=nt({parent_id:Ge().required("Depot is required").positive("Invalid depot"),name:me().required("Zone name is required").min(2,"Name must be at least 2 characters").max(100,"Name must be less than 100 characters"),description:me().max(255,"Description must be less than 255 characters"),supervisor_id:Ge().positive("Invalid supervisor"),is_active:me().required("Status is required")}),J8e=({selectedZone:t,setSelectedZone:s,drawerOpen:a,setDrawerOpen:r,depots:n})=>{const i=!!t,{data:o,isLoading:l}=d3e(),c=o?.data||[],m=()=>{s(null),r(!1),f.resetForm()},u=u3e(),h=m3e(),f=xt({initialValues:{parent_id:t?.parent_id?.toString()||"",name:t?.name||"",description:t?.description||"",supervisor_id:t?.supervisor_id?.toString()||"",is_active:t?.is_active||"Y"},validationSchema:X8e,enableReinitialize:!0,onSubmit:async b=>{try{const w={parent_id:Number(b.parent_id),name:b.name,description:b.description,supervisor_id:b.supervisor_id?Number(b.supervisor_id):void 0,is_active:b.is_active};i&&t?await h.mutateAsync({id:t.id,...w}):await u.mutateAsync(w),m()}catch(w){console.error("Error saving zone:",w)}}});return e.jsx(it,{open:a,setOpen:m,title:i?"Edit Zone":"Create Zone",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(_e,{name:"parent_id",label:"Depot",formik:f,required:!0,children:n.map(b=>e.jsxs(Z,{value:b.id.toString(),children:[b.name," (",b.code,")"]},b.id))}),e.jsx(oe,{name:"name",label:"Zone Name",placeholder:"Enter zone name",formik:f,required:!0}),e.jsx(_e,{name:"supervisor_id",label:"Zone Supervisor",formik:f,disabled:l,children:c.map(b=>e.jsxs(Z,{value:b.id.toString(),children:[b.name," ",b.employee_id&&`(${b.employee_id})`]},b.id))}),e.jsx(Ts,{name:"is_active",formik:f,required:!0,className:"col-span-2"}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"description",label:"Description",placeholder:"Enter zone description",formik:f,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:m,disabled:u.isPending||h.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",loading:u.isPending||h.isPending,children:u.isPending?"Creating...":h.isPending?"Updating...":i?"Update":"Create"})]})]})})})},eTe=nt({file:hs().required("Please select a file to import")}),tTe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:eTe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("zones")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"zones",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Zones",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple zones. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},sTe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState("all"),[o,l]=g.useState(null),[c,m]=g.useState(!1),[u,h]=g.useState(!1),[f,b]=g.useState(1),[w]=g.useState(10),{isCreate:S,isUpdate:j,isDelete:v,isRead:N}=Qe("zone"),{data:C,isFetching:P,error:E}=Jl({search:t,page:f,limit:w,isActive:a==="all"?void 0:a==="active"?"Y":"N",parent_id:n==="all"?void 0:Number(n)},{enabled:N}),{data:M}=No({page:1,limit:100}),T=C?.data||[],A=M?.data||[],L=C?.meta?.total||0,F=(C?.meta?.page||1)-1,z=p3e(),I=ls(),Q=C?.stats?.total_zones??T.length,Y=C?.stats?.active_zones??T.filter(J=>J.is_active==="Y").length,B=C?.stats?.inactive_zones??T.filter(J=>J.is_active==="N").length,q=C?.stats?.new_zones||0,V=g.useCallback(()=>{l(null),m(!0)},[]),G=g.useCallback(J=>{l(J),m(!0)},[]),H=g.useCallback(async J=>{try{await z.mutateAsync(J)}catch(te){console.error("Error deleting zone:",te)}},[z]),D=g.useCallback(J=>{s(J),b(1)},[]),R=J=>{b(J+1)},$=g.useCallback(async()=>{try{const J={search:t,isActive:a==="all"?void 0:a==="active"?"Y":"N",parent_id:n==="all"?void 0:Number(n)};await I.mutateAsync({tableName:"zones",filters:J})}catch(J){console.error("Error exporting zones:",J)}},[I,t,a,n]),W=[{id:"name",label:"Zone & Code",render:(J,te)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:te.name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(Ks,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:te.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:te.code})]})]})},{id:"zone_depots",label:"Depot",render:(J,te)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:te.zone_depots?.name||"No Depot"})},{id:"description",label:"Description",render:J=>J?e.jsx(qa,{title:J,placement:"top",arrow:!0,children:e.jsx(y,{component:"span",className:"!block !max-w-[200px] !truncate",children:e.jsx(x,{variant:"body2",className:"!text-gray-600",children:J})})}):e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"No description"})},{id:"supervisor_id",label:"Supervisor",render:(J,te)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Tr,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:te.supervisor?.name||e.jsx("span",{className:"text-xs italic text-gray-500",children:"No Supervisor"})})]})},{id:"is_active",label:"Status",render:J=>e.jsx(Me,{icon:J==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:J==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:J==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(J,te)=>Ie(te.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...j||v||N?[{id:"action",label:"Actions",sortable:!1,render:(J,te)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[j&&e.jsx(rs,{onClick:()=>G(te),tooltip:`Edit ${te.name}`}),v&&e.jsx(Vt,{onClick:()=>H(te.id),tooltip:`Delete ${te.name}`,itemName:te.name,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Zone Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage zone territories, supervisor assignments, and operational areas"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Zones",value:Q,icon:e.jsx(Ks,{className:"w-6 h-6"}),color:"blue",isLoading:P}),e.jsx(fe,{title:"Active Zones",value:Y,icon:e.jsx(go,{className:"w-6 h-6"}),color:"green",isLoading:P}),e.jsx(fe,{title:"Inactive Zones",value:B,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:P}),e.jsx(fe,{title:"New This Month",value:q,icon:e.jsx(_n,{className:"w-6 h-6"}),color:"purple",isLoading:P})]}),E&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load zones. Please try again."}),e.jsx(ot,{data:T,columns:W,actions:N||S?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex items-center flex-wrap gap-2",children:N&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Zones",value:t,onChange:D,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:J=>r(J.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:n,onChange:J=>i(J.target.value),className:"!min-w-60",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Depots"}),A.map(J=>e.jsx(Z,{value:J.id.toString(),children:J.name},J.id))]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx(Xt,{title:"Export Zones",description:"Are you sure you want to export the current zones data to Excel? This will include all filtered results.",onConfirm:$,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:I.isPending,children:I.isPending?"Exporting...":"Export"})}),S&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>h(!0),children:"Import"}),S&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:V,children:"Create"})]})]}):!1,getRowId:J=>J.id,initialOrderBy:"name",loading:P,totalCount:L,page:F,rowsPerPage:w,isPermission:N,onPageChange:R,emptyMessage:t?`No zones found matching "${t}"`:"No zones found in the system"}),e.jsx(J8e,{selectedZone:o,setSelectedZone:l,drawerOpen:c,setDrawerOpen:m,depots:A}),e.jsx(tTe,{drawerOpen:u,setDrawerOpen:h})]})},aTe=()=>{const t=Ws();return e.jsx("div",{className:"flex items-center justify-center min-h-full bg-gray-50",children:e.jsxs("div",{className:"text-center px-4",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx(tle,{})}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"The page you're looking for doesn't exist or has been moved."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(K,{variant:"outlined",onClick:()=>t(-1),className:"!capitalize",children:"Go Back"}),e.jsx(K,{variant:"contained",onClick:()=>t("/"),startIcon:e.jsx(X9,{className:"w-4 h-4"}),className:"!capitalize",children:"Go Home"})]})]})})},rTe=nt({name:me().required("Name is required").min(2,"Name must be at least 2 characters").max(100,"Name must not exceed 100 characters"),email:me().required("Email is required").email("Invalid email format"),phone_number:me().matches(/^[0-9+\-\s()]+$/,"Invalid phone number format"),address:me().max(500,"Address must not exceed 500 characters"),joining_date:me(),password:me().min(6,"Password must be at least 6 characters")}),nTe=()=>{const[t,s]=g.useState(!1),[a,r]=g.useState(null),[n,i]=g.useState(null),{data:o,isLoading:l,error:c,refetch:m}=q4(),u=aie({onSuccess:()=>{s(!1),r(null),i(null),m()}}),h={name:o?.name||"",email:o?.email||"",phone_number:o?.phone_number||"",address:o?.address||"",joining_date:Or(o?.joining_date),password:""},f=xt({initialValues:h,validationSchema:rTe,enableReinitialize:!0,onSubmit:async N=>{try{const C=new FormData;C.append("name",N.name),C.append("phone_number",N.phone_number),C.append("address",N.address),C.append("joining_date",N.joining_date),N.password&&C.append("password",N.password),a&&C.append("profile_image",a),await u.mutateAsync(C)}catch(C){console.error("Error updating profile:",C)}}}),b=N=>{const C=N.target.files?.[0];if(C){r(C);const P=URL.createObjectURL(C);i(P)}},w=()=>{t&&(f.resetForm(),r(null),i(null)),s(!t)},S=N=>{N.preventDefault(),f.handleSubmit()},j=()=>{r(null),n&&(URL.revokeObjectURL(n),i(null))};if(l)return e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600",children:"Loading profile..."})});if(c)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:["Error loading profile: ",c.message]})});if(!o)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded",children:"No user data available"})});const v=n||o.profile_image||void 0;return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-600 mb-1",children:"My Profile"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manage your personal information and account settings"})]}),e.jsx("div",{className:"flex gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx(K,{variant:"outlined",color:"secondary",onClick:w,children:"Cancel"}),e.jsx(K,{variant:"contained",color:"success",onClick:S,disabled:u.isPending,children:u.isPending?"Saving...":"Save Changes"})]}):e.jsx(K,{variant:"contained",color:"primary",onClick:w,children:"Edit Profile"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(ut,{alt:o.name,src:v,className:"!w-32 !h-32 !rounded-xl !text-4xl !font-bold !bg-blue-500",children:o.name.split(" ").map(N=>N[0]).join("").toUpperCase()}),t&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",id:"profile-image-upload",accept:"image/*",onChange:b,className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>document.getElementById("profile-image-upload")?.click(),className:"absolute size-10 flex cursor-pointer items-center justify-center -bottom-2 -right-2 bg-blue-600 text-white hover:bg-blue-700 p-2 rounded-xl shadow-lg transition-colors",children:e.jsx(vle,{fontSize:"small"})})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:o.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o.email}),e.jsx("span",{className:`mt-3 px-3 py-1 rounded-full text-xs font-medium ${o.is_active==="Y"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:o.is_active==="Y"?"Active":"Inactive"}),a&&e.jsxs("div",{className:"mt-4 w-full text-center",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["New image: ",a.name]}),e.jsx("button",{type:"button",onClick:j,className:"text-red-600 text-sm hover:underline mt-1",children:"Remove"})]})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white shadow-sm p-6 rounded-lg border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(oe,{name:"name",label:"Full Name",formik:f,disabled:!t,fullWidth:!0}),e.jsx(oe,{name:"phone_number",label:"Phone Number",formik:f,disabled:!t,fullWidth:!0}),e.jsx(oe,{name:"role",label:"Role",value:o.role?.name||"No Role Assigned",disabled:!0,fullWidth:!0}),e.jsx(oe,{name:"joining_date",label:"Joining Date",type:"date",formik:f,disabled:!t,fullWidth:!0}),t&&e.jsx(oe,{name:"password",label:"New Password (Optional)",type:"password",formik:f,fullWidth:!0,helperText:"Leave blank to keep current password"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(oe,{name:"address",label:"Address",formik:f,disabled:!t,multiline:!0,rows:3,fullWidth:!0})})]})]})})]})]})},iTe=async t=>{const s=new URLSearchParams;return t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.customer_id&&s.append("customer_id",t.customer_id.toString()),t?.status&&s.append("status",t.status),(await ie.get(`/reports/orders-invoices-returns?${s.toString()}`)).data.data},oTe=async t=>{try{const s=new URLSearchParams;t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.customer_id&&s.append("customer_id",t.customer_id.toString()),t?.status&&s.append("status",t.status);const a=await ie.get(`/reports/orders-invoices-returns/export?${s.toString()}`,{responseType:"blob"}),r=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`Orders_Invoices_Returns_Report_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(s){throw console.error("Error exporting report to Excel:",s),s}},lTe=async t=>{const s=new URLSearchParams;return t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.salesperson_id&&s.append("salesperson_id",t.salesperson_id.toString()),t?.product_category_id&&s.append("product_category_id",t.product_category_id.toString()),t?.sales_target_group_id&&s.append("sales_target_group_id",t.sales_target_group_id.toString()),(await ie.get(`/reports/sales-vs-target?${s.toString()}`)).data.data},cTe=async t=>{try{const s=new URLSearchParams;t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.salesperson_id&&s.append("salesperson_id",t.salesperson_id.toString()),t?.product_category_id&&s.append("product_category_id",t.product_category_id.toString()),t?.sales_target_group_id&&s.append("sales_target_group_id",t.sales_target_group_id.toString());const a=await ie.get(`/reports/sales-vs-target/export?${s.toString()}`,{responseType:"blob"}),r=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`Sales_Vs_Target_Report_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(s){throw console.error("Error exporting report to Excel:",s),s}},dTe=async t=>{const s=new URLSearchParams;return t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.asset_type_id&&s.append("asset_type_id",t.asset_type_id.toString()),t?.asset_status&&s.append("asset_status",t.asset_status),t?.customer_id&&s.append("customer_id",t.customer_id.toString()),(await ie.get(`/reports/asset-movement-status?${s.toString()}`)).data.data},uTe=async t=>{try{const s=new URLSearchParams;t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.asset_type_id&&s.append("asset_type_id",t.asset_type_id.toString()),t?.asset_status&&s.append("asset_status",t.asset_status),t?.customer_id&&s.append("customer_id",t.customer_id.toString());const a=await ie.get(`/reports/asset-movement-status/export?${s.toString()}`,{responseType:"blob"}),r=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`Asset_Movement_Status_Report_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(s){throw console.error("Error exporting report to Excel:",s),s}},mTe=async t=>{const s=new URLSearchParams;return t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.salesperson_id&&s.append("salesperson_id",t.salesperson_id.toString()),t?.customer_id&&s.append("customer_id",t.customer_id.toString()),t?.status&&s.append("status",t.status),(await ie.get(`/reports/visit-frequency-completion?${s.toString()}`)).data.data},pTe=async t=>{try{const s=new URLSearchParams;t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.salesperson_id&&s.append("salesperson_id",t.salesperson_id.toString()),t?.customer_id&&s.append("customer_id",t.customer_id.toString()),t?.status&&s.append("status",t.status);const a=await ie.get(`/reports/visit-frequency-completion/export?${s.toString()}`,{responseType:"blob"}),r=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`Visit_Frequency_Completion_Report_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(s){throw console.error("Error exporting report to Excel:",s),s}},hTe=async t=>{const s=new URLSearchParams;return t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.promotion_id&&s.append("promotion_id",t.promotion_id.toString()),t?.depot_id&&s.append("depot_id",t.depot_id.toString()),t?.zone_id&&s.append("zone_id",t.zone_id.toString()),(await ie.get(`/reports/promo-effectiveness?${s.toString()}`)).data.data},fTe=async t=>{try{const s=new URLSearchParams;t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.promotion_id&&s.append("promotion_id",t.promotion_id.toString()),t?.depot_id&&s.append("depot_id",t.depot_id.toString()),t?.zone_id&&s.append("zone_id",t.zone_id.toString());const a=await ie.get(`/reports/promo-effectiveness/export?${s.toString()}`,{responseType:"blob"}),r=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`Promo_Effectiveness_Report_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(s){throw console.error("Error exporting report to Excel:",s),s}},xTe=async t=>{const s=new URLSearchParams;return t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.zone_id&&s.append("zone_id",t.zone_id.toString()),t?.depot_id&&s.append("depot_id",t.depot_id.toString()),t?.route_id&&s.append("route_id",t.route_id.toString()),(await ie.get(`/reports/region-territory-sales?${s.toString()}`)).data.data},gTe=async t=>{try{const s=new URLSearchParams;t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.zone_id&&s.append("zone_id",t.zone_id.toString()),t?.depot_id&&s.append("depot_id",t.depot_id.toString()),t?.route_id&&s.append("route_id",t.route_id.toString());const a=await ie.get(`/reports/region-territory-sales/export?${s.toString()}`,{responseType:"blob"}),r=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`Region_Territory_Sales_Report_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(s){throw console.error("Error exporting report to Excel:",s),s}},yTe=async t=>{const s=new URLSearchParams;return t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.salesperson_id&&s.append("salesperson_id",t.salesperson_id.toString()),t?.depot_id&&s.append("depot_id",t.depot_id.toString()),t?.zone_id&&s.append("zone_id",t.zone_id.toString()),(await ie.get(`/reports/rep-productivity?${s.toString()}`)).data.data},bTe=async t=>{try{const s=new URLSearchParams;t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.salesperson_id&&s.append("salesperson_id",t.salesperson_id.toString()),t?.depot_id&&s.append("depot_id",t.depot_id.toString()),t?.zone_id&&s.append("zone_id",t.zone_id.toString());const a=await ie.get(`/reports/rep-productivity/export?${s.toString()}`,{responseType:"blob"}),r=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`Rep_Productivity_Report_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(s){throw console.error("Error exporting report to Excel:",s),s}},vTe=async t=>{const s=new URLSearchParams;return t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.customer_id&&s.append("customer_id",t.customer_id.toString()),t?.brand_name&&s.append("brand_name",t.brand_name),(await ie.get(`/reports/competitor-analysis?${s.toString()}`)).data.data},jTe=async t=>{try{const s=new URLSearchParams;t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.customer_id&&s.append("customer_id",t.customer_id.toString()),t?.brand_name&&s.append("brand_name",t.brand_name);const a=await ie.get(`/reports/competitor-analysis/export?${s.toString()}`,{responseType:"blob"}),r=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`Competitor_Analysis_Report_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(s){throw console.error("Error exporting report to Excel:",s),s}},NTe=async t=>{const s=new URLSearchParams;return t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.customer_id&&s.append("customer_id",t.customer_id.toString()),t?.invoice_status&&s.append("invoice_status",t.invoice_status),(await ie.get(`/reports/outstanding-collection?${s.toString()}`)).data.data},wTe=async t=>{try{const s=new URLSearchParams;t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.customer_id&&s.append("customer_id",t.customer_id.toString()),t?.invoice_status&&s.append("invoice_status",t.invoice_status);const a=await ie.get(`/reports/outstanding-collection/export?${s.toString()}`,{responseType:"blob"}),r=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`Outstanding_Collection_Report_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(s){throw console.error("Error exporting report to Excel:",s),s}},_Te=async t=>{const s=new URLSearchParams;return t?.page&&s.append("page",t.page.toString()),t?.limit&&s.append("limit",t.limit.toString()),t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.user_id&&s.append("user_id",t.user_id.toString()),t?.action_type&&s.append("action_type",t.action_type),t?.search&&s.append("search",t.search),(await ie.get(`/reports/attendance-history?${s.toString()}`)).data},STe=async t=>{try{const s=new URLSearchParams;t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),t?.user_id&&s.append("user_id",t.user_id.toString()),t?.action_type&&s.append("action_type",t.action_type),t?.search&&s.append("search",t.search);const a=await ie.get(`/reports/attendance-history/export?${s.toString()}`,{responseType:"blob"}),r=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`Attendance_History_Report_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(s){throw console.error("Error exporting attendance history report to Excel:",s),s}},ur={all:["reports"],lists:()=>[...ur.all,"list"],ordersInvoicesReturns:t=>[...ur.lists(),"orders-invoices-returns",t],salesVsTarget:t=>[...ur.lists(),"sales-vs-target",t],assetMovementStatus:t=>[...ur.lists(),"asset-movement-status",t],visitFrequencyCompletion:t=>[...ur.lists(),"visit-frequency-completion",t],promoEffectiveness:t=>[...ur.lists(),"promo-effectiveness",t],regionTerritorySales:t=>[...ur.lists(),"region-territory-sales",t],repProductivity:t=>[...ur.lists(),"rep-productivity",t],competitorAnalysis:t=>[...ur.lists(),"competitor-analysis",t],outstandingCollection:t=>[...ur.lists(),"outstanding-collection",t],attendanceHistory:t=>[...ur.lists(),"attendance-history",t]},CTe=(t,s)=>tt({queryKey:ur.ordersInvoicesReturns(t),queryFn:()=>iTe(t),staleTime:120*1e3,...s}),PTe=(t,s)=>tt({queryKey:ur.salesVsTarget(t),queryFn:()=>lTe(t),staleTime:300*1e3,...s}),kTe=(t,s)=>tt({queryKey:ur.assetMovementStatus(t),queryFn:()=>dTe(t),staleTime:180*1e3,...s}),ETe=(t,s)=>tt({queryKey:ur.visitFrequencyCompletion(t),queryFn:()=>mTe(t),staleTime:180*1e3,...s}),TTe=(t,s)=>tt({queryKey:ur.promoEffectiveness(t),queryFn:()=>hTe(t),staleTime:300*1e3,...s}),MTe=(t,s)=>tt({queryKey:ur.regionTerritorySales(t),queryFn:()=>xTe(t),staleTime:180*1e3,...s}),DTe=(t,s)=>tt({queryKey:ur.repProductivity(t),queryFn:()=>yTe(t),staleTime:180*1e3,...s}),RTe=(t,s)=>tt({queryKey:ur.competitorAnalysis(t),queryFn:()=>vTe(t),staleTime:180*1e3,...s}),ATe=(t,s)=>tt({queryKey:ur.outstandingCollection(t),queryFn:()=>NTe(t),staleTime:180*1e3,...s}),ITe=(t,s)=>tt({queryKey:ur.attendanceHistory(t),queryFn:()=>_Te(t),staleTime:180*1e3,...s}),OTe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState("all"),{isRead:c}=Qe("report"),{data:m,isLoading:u}=kTe({start_date:t,end_date:a,asset_type_id:n,asset_status:o==="all"?void 0:o},{enabled:c}),{data:h}=BS(),f=h?.data||[],b=m?.summary||{total_assets:0,total_movements:0,total_customer_assets:0,total_warranty_claims:0},w=g.useCallback(async()=>{try{await uTe({start_date:t,end_date:a,asset_type_id:n,asset_status:o==="all"?void 0:o})}catch(C){console.error("Error exporting report to Excel:",C)}},[t,a,n,o]),S=[{id:"serial_number",label:"Serial Number",render:C=>e.jsx("span",{className:"font-semibold text-sm",children:C})},{id:"asset_type",label:"Asset Type",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"category",label:"Category",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"brand",label:"Brand",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"current_location",label:"Location",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"current_status",label:"Status",render:C=>{const P=String(C||"").toLowerCase();let E="default";return P==="active"||P==="working"?E="success":P==="maintenance"||P==="pending"?E="warning":P==="retired"||P==="decommissioned"?E="error":(P==="available"||P==="in_stock")&&(E="info"),e.jsx(Me,{label:C,size:"small",className:"!capitalize",color:E,variant:"outlined"})}},{id:"assigned_to",label:"Assigned To",render:C=>e.jsx("span",{className:"text-sm",children:C})}],j=[{id:"asset_serial",label:"Asset Serial",render:C=>e.jsx("span",{className:"font-semibold text-sm",children:C})},{id:"asset_type",label:"Asset Type",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"from_location",label:"From",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"to_location",label:"To",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"movement_type",label:"Type",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"movement_date",label:"Movement Date",render:C=>Ie(C)||"N/A"},{id:"performed_by",label:"Performed By",render:(C,P)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(la,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:P.performed_by||"N/A"}),e.jsx("span",{className:"text-xs text-gray-500",children:P.performed_by_email||"N/A"})]})]})},{id:"notes",label:"Notes",render:C=>e.jsx("span",{className:"text-sm max-w-xs truncate",title:C,children:C})}],v=[{id:"customer_name",label:"Customer",render:(C,P)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:P.customer_name}),e.jsx("span",{className:"text-xs text-gray-500",children:P.customer_code})]})},{id:"asset_type",label:"Asset Type",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"serial_number",label:"Serial Number",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"capacity",label:"Capacity",numeric:!0,render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"install_date",label:"Install Date",render:C=>Ie(C)||"N/A"},{id:"status",label:"Status",render:C=>{const P=String(C||"").toLowerCase();let E="default";return P==="working"||P==="active"?E="success":P==="maintenance"||P==="down"?E="warning":(P==="broken"||P==="damaged")&&(E="error"),e.jsx(Me,{label:C,size:"small",className:"!capitalize",color:E})}},{id:"technician_name",label:"Technician",render:C=>e.jsx("span",{className:"text-sm",children:C})}],N=[{id:"asset_serial",label:"Asset Serial",render:C=>e.jsx("span",{className:"font-semibold text-sm",children:C})},{id:"asset_type",label:"Asset Type",render:C=>e.jsx("span",{className:"text-sm",children:C})},{id:"claim_date",label:"Claim Date",render:C=>Ie(C)||"N/A"},{id:"issue_description",label:"Issue",render:C=>e.jsx("span",{className:"text-sm max-w-xs truncate",title:C,children:C})},{id:"claim_status",label:"Status",render:C=>{const P=String(C||"").toLowerCase();let E="default";return P==="resolved"||P==="completed"?E="success":P==="pending"||P==="in_progress"?E="warning":P==="rejected"||P==="denied"?E="error":P==="under_review"&&(E="info"),e.jsx(Me,{label:C,size:"small",className:"!capitalize",color:E})}},{id:"resolved_date",label:"Resolved Date",render:C=>Ie(C)||"N/A"}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs(y,{className:"!mb-3 !flex !justify-between !items-center",children:[e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Asset Movement/Status Report"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track asset movements, status, and warranty claims"})]}),c&&e.jsx(Xt,{title:"Export Report to Excel",description:"Are you sure you want to export the current report data to Excel?",onConfirm:w,confirmText:"Export",cancelText:"Cancel",placement:"bottom",children:e.jsx(K,{startIcon:e.jsx(jo,{className:"w-4 h-4"}),variant:"outlined",children:"Export to Excel"})})]}),c&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsx(oe,{type:"date",label:"Start Date",value:t,setValue:s}),e.jsx(oe,{type:"date",label:"End Date",value:a,setValue:r}),e.jsxs(_e,{label:"Asset Type",value:n?.toString()||"all",onChange:C=>i(C.target.value&&C.target.value!=="all"?parseInt(C.target.value):void 0),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Asset Types"}),f.map(C=>e.jsx(Z,{value:C.id.toString(),children:C.name},C.id))]}),e.jsxs(_e,{label:"Status",value:o,onChange:C=>l(C.target.value),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"working",children:"Working"}),e.jsx(Z,{value:"maintenance",children:"Maintenance"}),e.jsx(Z,{value:"retired",children:"Retired"}),e.jsx(Z,{value:"available",children:"Available"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-5",children:[e.jsx(fe,{title:"Total Assets",value:b.total_assets,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Movements",value:b.total_movements,icon:e.jsx(d8,{className:"w-6 h-6"}),color:"purple"}),e.jsx(fe,{title:"Customer Assets",value:b.total_customer_assets,icon:e.jsx(la,{className:"w-6 h-6"}),color:"green"}),e.jsx(fe,{title:"Warranty Claims",value:b.total_warranty_claims,icon:e.jsx(ks,{className:"w-6 h-6"}),color:"orange"})]}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(Wt,{className:"w-5 h-5"})," Asset Master (",m?.data?.assets?.length||0,")"]}),columns:S,data:m?.data?.assets||[],loading:u,pagination:!1,isPermission:c}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(d8,{className:"w-5 h-5"})," Asset Movements (",m?.data?.movements?.length||0,")"]}),columns:j,data:m?.data?.movements||[],loading:u,pagination:!1,isPermission:c}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(la,{className:"w-5 h-5"})," Customer Assets (",m?.data?.customer_assets?.length||0,")"]}),columns:v,data:m?.data?.customer_assets||[],loading:u,pagination:!1,isPermission:c}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(ks,{className:"w-5 h-5"})," Warranty Claims (",m?.data?.warranty_claims?.length||0,")"]}),columns:N,data:m?.data?.warranty_claims||[],loading:u,pagination:!1,isPermission:c})]})},FTe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState("all"),[c,m]=g.useState(1),[u]=g.useState(10),{isRead:h}=Qe("report"),{data:f,isLoading:b}=ITe({page:c,limit:u,start_date:t,end_date:a,user_id:n,action_type:o==="all"?void 0:o},{enabled:h}),w=f?.stats||{total_history_records:0,punch_in_count:0,punch_out_count:0,history_this_month:0},S=f?.meta||{current_page:1,total_count:0},j=E=>{m(E+1)},v=g.useCallback(async()=>{try{await STe({start_date:t,end_date:a,user_id:n,action_type:o==="all"?void 0:o})}catch(E){console.error("Error exporting report to Excel:",E)}},[t,a,n,o]),N=g.useCallback((E,M)=>{i(M?.id||void 0),m(1)},[]),C=g.useCallback(()=>{m(1)},[]),P=[{id:"attendance.user.name",label:"Employee",sortable:!0,render:(E,M)=>{const T=M.attendance?.user;return T?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ut,{className:"w-10 h-10 !rounded !bg-blue-100",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:T.name?T.name.split(" ").map(A=>A[0]).join("").toUpperCase().slice(0,2):"U"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:T.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[T.employee_id||`ID: ${T.id}`,"  ",T.email]})]})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"N/A"})}},{id:"action_type",label:"Action",render:E=>{const M=String(E||"").toLowerCase();let T="default";return M==="punch_in"?T="success":M==="punch_out"&&(T="info"),e.jsx(Me,{label:E?.replace(/_/g," "),size:"small",className:"!capitalize !text-xs",color:T,variant:"outlined"})}},{id:"action_time",label:"Date & Time",render:E=>e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-sm font-medium",children:E?mp(E):"N/A"})})},{id:"address",label:"Location",render:E=>e.jsx("div",{className:"flex items-center gap-1 max-w-md",children:E?e.jsxs(e.Fragment,{children:[e.jsx(Ks,{className:"w-3 h-3 text-gray-500 flex-shrink-0"}),e.jsx("span",{className:"text-xs text-gray-600 truncate",children:E})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"N/A"})})}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs(y,{className:"!flex !justify-between !items-center",children:[e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Attendance History Report"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"View and analyze employee attendance history records"})]}),e.jsx(Xt,{title:"Export Report to Excel",description:"Are you sure you want to export the current report data to Excel?",onConfirm:v,confirmText:"Export",cancelText:"Cancel",placement:"bottom",children:e.jsx(K,{startIcon:e.jsx(jo,{className:"w-4 h-4"}),variant:"outlined",children:"Export to Excel"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsx(oe,{type:"date",label:"Start Date",value:t,setValue:E=>{s(E),C()}}),e.jsx(oe,{type:"date",label:"End Date",value:a,setValue:E=>{r(E),C()}}),e.jsx(y,{className:"!w-full",children:e.jsx(pn,{label:"Employee",placeholder:"Select Employee",value:n,onChange:N,fullWidth:!0,size:"small"})}),e.jsxs(_e,{label:"Action Type",value:o,onChange:E=>{l(E.target.value),C()},disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Actions"}),e.jsx(Z,{value:"punch_in",children:"Punch In"}),e.jsx(Z,{value:"punch_out",children:"Punch Out"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-5",children:[e.jsx(fe,{title:"Total History Records",value:w.total_history_records,icon:e.jsx(la,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Punch In",value:w.punch_in_count,icon:e.jsx(Ds,{className:"w-6 h-6"}),color:"green"}),e.jsx(fe,{title:"Punch Out",value:w.punch_out_count,icon:e.jsx(Ds,{className:"w-6 h-6"}),color:"purple"}),e.jsx(fe,{title:"This Month",value:w.history_this_month,icon:e.jsx(Ds,{className:"w-6 h-6"}),color:"orange"})]}),e.jsx(ot,{columns:P,data:f?.data||[],loading:b,totalCount:S.total_count||0,page:S.current_page-1||0,rowsPerPage:u,onPageChange:j,emptyMessage:"No attendance history records found"})]})},LTe=async t=>{const s={};return t?.page&&(s.page=t.page),t?.limit&&(s.limit=t.limit),t?.action&&(s.action=t.action),t?.user_id&&(s.user_id=t.user_id),t?.start_date&&(s.start_date=t.start_date),t?.end_date&&(s.end_date=t.end_date),(await ie.get("/audit-logs",{params:s})).data.data},C_={all:["audit-logs"],lists:()=>[...C_.all,"list"],list:t=>[...C_.lists(),t]},$Te=(t,s)=>tt({queryKey:C_.list(t),queryFn:()=>LTe(t),staleTime:180*1e3,...s}),zTe=()=>{const[t,s]=g.useState(1),[a]=g.useState(10),[r,n]=g.useState(""),[i,o]=g.useState(""),[l,c]=g.useState("all"),[m,u]=g.useState("all"),{isRead:h}=Qe("report"),{data:f,isLoading:b}=$Te({page:t,limit:a,start_date:r===""?void 0:r,end_date:i===""?void 0:i,action:l==="all"?void 0:l,user_id:m==="all"?void 0:parseInt(m)},{enabled:h}),w=ls(),S=f?.logs||[],j=f?.statistics||{total_logs:0,by_action:{CREATE:0,UPDATE:0,DELETE:0}},v=f?.pagination||{total:0},N=g.useCallback(async()=>{try{const E={start_date:r===""?void 0:r,end_date:i===""?void 0:i,action:l==="all"?void 0:l,user_id:m==="all"?void 0:parseInt(m)};await w.mutateAsync({tableName:"audit_logs",filters:E})}catch(E){console.error("Error exporting audit logs:",E)}},[w,r,i,l,m]),C=()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[1,2,3,4].map(E=>e.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:20,className:"!mb-2"}),e.jsx(X,{variant:"text",width:"40%",height:32})]}),e.jsx(X,{variant:"circular",width:48,height:48,className:"!bg-gray-100"})]})},E))}),P=[{id:"user_name",label:"User",render:(E,M)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-lg text-blue-600",children:M.user_name?.charAt(0).toUpperCase()||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:M.user_name}),e.jsx("div",{className:"text-xs text-gray-500",children:M.user_email})]})]})},{id:"changed_at",label:"Date & Time",render:E=>e.jsx("span",{className:"text-sm text-gray-700",children:mp(E)})},{id:"table_name",label:"Table",render:E=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($ie,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:E})]})},{id:"record_id",label:"Record ID",numeric:!0,render:E=>e.jsx("span",{className:"text-sm",children:E})},{id:"action",label:"Action",render:E=>{const M=A=>{switch(A){case"CREATE":return e.jsx(ks,{className:"w-4 h-4 text-green-600"});case"UPDATE":return e.jsx(m8,{className:"w-4 h-4 text-blue-600"});case"DELETE":return e.jsx(jb,{className:"w-4 h-4 text-red-600"});default:return e.jsx(Bn,{className:"w-4 h-4 text-gray-600"})}},T=A=>{switch(A){case"CREATE":return"success";case"UPDATE":return"info";case"DELETE":return"error";default:return"default"}};return e.jsxs("div",{className:"flex items-center gap-2",children:[M(E),e.jsx(Me,{label:E,size:"small",color:T(E),variant:"outlined"})]})}},{id:"ip_address",label:"IP Address",render:E=>e.jsx(qa,{title:E||"N/A",placement:"top",arrow:!0,children:e.jsx("span",{className:"text-sm text-gray-600 font-mono",children:E||"N/A"})})},{id:"device_info",label:"Device",render:E=>e.jsx(qa,{title:E||"N/A",placement:"top",arrow:!0,children:e.jsx(x,{variant:"body2",className:"text-gray-600",children:E?E.substring(0,30)+"...":"N/A"})})}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"!font-bold text-xl !text-gray-900",children:"Audit Logs"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track and monitor all system activities and changes"})]}),h&&e.jsx(Xt,{title:"Export Audit Logs",description:"Are you sure you want to export the current audit logs data to Excel? This will include all filtered results.",onConfirm:N,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(jo,{}),disabled:w.isPending,children:w.isPending?"Exporting...":"Export"})})]}),h&&e.jsx("div",{className:"bg-white shadow-sm p-4 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsx("div",{children:e.jsx(oe,{type:"date",value:r,setValue:n,placeholder:"Start Date",label:"Start Date"})}),e.jsx("div",{children:e.jsx(oe,{type:"date",value:i,setValue:o,placeholder:"End Date",label:"End Date"})}),e.jsxs(_e,{label:"Action",value:l,onChange:E=>c(E.target.value),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Actions"}),e.jsx(Z,{value:"CREATE",children:"Create"}),e.jsx(Z,{value:"UPDATE",children:"Update"}),e.jsx(Z,{value:"DELETE",children:"Delete"})]}),e.jsx(pn,{label:"User",value:m||"all",setValue:u})]})}),b?e.jsx(C,{}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[e.jsx(fe,{title:"Total Logs",value:j.total_logs,icon:e.jsx(B4,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Created",value:j.by_action.CREATE,icon:e.jsx(ks,{className:"w-6 h-6"}),color:"green"}),e.jsx(fe,{title:"Updated",value:j.by_action.UPDATE,icon:e.jsx(m8,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Deleted",value:j.by_action.DELETE,icon:e.jsx(jb,{className:"w-6 h-6"}),color:"red"})]}),e.jsx(ot,{columns:P,data:S,loading:b,pagination:!0,page:t-1,rowsPerPage:a,totalCount:v.total,onPageChange:E=>s(E+1),isPermission:h})]})},qTe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState(""),{formatCurrency:c}=Ya(),{isRead:m}=Qe("report"),{data:u,isLoading:h}=RTe({start_date:t,end_date:a,customer_id:n,brand_name:o},{enabled:m}),f=u?.summary||{total_observations:0,unique_brands:0,unique_customers:0,avg_visibility_score:0},b=u?.data?.activities||[],w=u?.data?.brands_summary||[],S=g.useCallback(async()=>{try{await jTe({start_date:t,end_date:a,customer_id:n,brand_name:o})}catch(N){console.error("Error exporting report to Excel:",N)}},[t,a,n,o]),j=[{id:"brand_name",label:"Brand",render:N=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zc,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-semibold text-sm",children:N})]})},{id:"product_name",label:"Product",render:N=>e.jsx("span",{className:"text-sm",children:N})},{id:"customer_name",label:"Customer",render:(N,C)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:C.customer_name}),e.jsx("span",{className:"text-xs text-gray-500",children:C.customer_address})]})},{id:"observed_price",label:"Price",numeric:!0,render:N=>c(Number(N))},{id:"visibility_score",label:"Visibility",numeric:!0,render:N=>e.jsx(Me,{label:N,size:"small",color:Number(N)>=7?"success":Number(N)>=5?"warning":"error",variant:"outlined"})},{id:"promotion_details",label:"Promotion",render:N=>e.jsx("span",{className:"text-sm",children:N})},{id:"visit_status",label:"Visit Status",render:N=>{const C=String(N||"").toLowerCase();let P="default";return C==="completed"?P="success":C==="planned"?P="info":C==="cancelled"&&(P="error"),e.jsx(Me,{label:N,size:"small",className:"!capitalize",color:P,variant:"outlined"})}}],v=[{id:"brand_name",label:"Brand",render:N=>e.jsx("span",{className:"font-semibold text-sm",children:N})},{id:"observation_count",label:"Observations",numeric:!0,render:N=>e.jsx("span",{className:"font-semibold text-sm",children:N})},{id:"avg_price",label:"Avg Price",numeric:!0,render:N=>c(Number(N))},{id:"avg_visibility",label:"Avg Visibility",numeric:!0,render:N=>e.jsx(Me,{label:Number(N).toFixed(1),size:"small",color:Number(N)>=7?"success":Number(N)>=5?"warning":"error",variant:"outlined"})}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs(y,{className:"!mb-3 !flex !justify-between !items-center",children:[e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Competitor Analysis Report"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track competitor activities and market insights"})]}),e.jsx(Xt,{title:"Export Report to Excel",description:"Are you sure you want to export the current report data to Excel?",onConfirm:S,confirmText:"Export",cancelText:"Cancel",placement:"bottom",children:e.jsx(K,{startIcon:e.jsx(jo,{className:"w-4 h-4"}),variant:"outlined",children:"Export to Excel"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(oe,{type:"date",label:"Start Date",value:t,setValue:s}),e.jsx(oe,{type:"date",label:"End Date",value:a,setValue:r}),e.jsx(so,{name:"customer_id",label:"Customer",value:n?.toString()||"all",setValue:i}),e.jsx(oe,{label:"Brand Name",value:o,setValue:l,placeholder:"Search by brand"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-5",children:[e.jsx(fe,{title:"Total Observations",value:f.total_observations,icon:e.jsx(Hie,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Unique Brands",value:f.unique_brands,icon:e.jsx(zc,{className:"w-6 h-6"}),color:"orange"}),e.jsx(fe,{title:"Customers",value:f.unique_customers,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple"}),e.jsx(fe,{title:"Avg Visibility",value:f.avg_visibility_score.toFixed(1),icon:e.jsx(vs,{className:"w-6 h-6"}),color:"green"})]}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(zc,{className:"w-5 h-5"}),"Competitor Activities (",b.length,")"]}),columns:j,data:b,loading:h,pagination:!1,isPermission:m}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"})," Brands Summary (",w.length,")"]}),columns:v,data:w,loading:h,pagination:!1,isPermission:m})]})},BTe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState("all"),{formatCurrency:c}=Ya(),{isRead:m}=Qe("report"),{data:u,isLoading:h}=CTe({start_date:t,end_date:a,customer_id:n,status:o==="all"?void 0:o?.toUpperCase()},{enabled:m}),f=u?.summary||{total_orders:0,total_invoices:0,total_returns:0,total_order_value:0,total_invoice_value:0},b=u?.status_breakdown||{pending_orders:0,completed_orders:0,pending_invoices:0,paid_invoices:0,pending_returns:0,completed_returns:0},w=u?.statistics||{average_order_value:0,average_invoice_value:0,conversion_rate:0,return_rate:0},S=g.useCallback(async()=>{try{await oTe({start_date:t,end_date:a,customer_id:n,status:o==="all"?void 0:o?.toUpperCase()})}catch(C){console.error("Error exporting report to Excel:",C)}},[t,a,n,o]),j=[{id:"order_number",label:"Order Info",render:(C,P)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(ks,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:P.order_number}),e.jsxs("span",{className:"text-xs text-gray-500",children:[P.order_type||"Regular Order","  0 Items"]})]})]})},{id:"customer_name",label:"Customer",render:(C,P)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:P.customer_name}),e.jsx("span",{className:"text-xs text-gray-500",children:P.customer_code})]})},{id:"salesperson",label:"Salesperson",render:(C,P)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:P.salesperson_name?.split(" ").map(E=>E[0]).join("").toUpperCase().slice(0,2)||"U"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:P.salesperson_name||"N/A"}),e.jsx("span",{className:"text-xs text-gray-500",children:P.salesperson_email||"N/A"})]})]})},{id:"order_date",label:"Order Date",render:C=>Ie(C)||"N/A"},{id:"status",label:"Status",render:C=>{const P=String(C||"").toLowerCase();let E="default";return P==="delivered"||P==="completed"||P==="approved"?E="success":P==="processing"||P==="in_progress"||P==="ready"?E="warning":P==="shipped"||P==="dispatched"||P==="in_transit"||P==="confirmed"?E="info":P==="pending"||P==="draft"||P==="pending_approval"?E="default":(P==="cancelled"||P==="failed"||P==="rejected")&&(E="error"),e.jsx(Me,{icon:P==="pending"?e.jsx(dN,{fontSize:"small"}):e.jsx(mt,{fontSize:"small"}),label:C,size:"small",className:"!capitalize",color:E,variant:"outlined"})}},{id:"total_amount",label:"Amount",numeric:!0,render:C=>c(Number(C))}],v=[{id:"invoice_number",label:"Invoice Number",render:(C,P)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ks,{className:"w-5 h-5 text-green-600"})}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-semibold text-sm",children:P.invoice_number})})]})},{id:"customer_name",label:"Customer",render:(C,P)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:P.customer_name}),e.jsx("span",{className:"text-xs text-gray-500",children:P.customer_code})]})},{id:"invoice_date",label:"Invoice Date",render:C=>Ie(C)||"N/A"},{id:"due_date",label:"Due Date",render:C=>Ie(C)||"N/A"},{id:"status",label:"Status",render:C=>{const P=String(C||"").toLowerCase();let E="default";return P==="paid"||P==="paid_in_full"||P==="completed"?E="success":P==="pending"||P==="unpaid"||P==="overdue"?E="error":P==="sent"||P==="draft"||P==="partial"||P==="processing"?E="warning":(P==="cancelled"||P==="void")&&(E="default"),e.jsx(Me,{icon:P==="pending"?e.jsx(dN,{fontSize:"small"}):e.jsx(mt,{fontSize:"small"}),label:C,size:"small",variant:"outlined",className:"!capitalize",color:E})}},{id:"total_amount",label:"Amount",numeric:!0,render:C=>c(Number(C))},{id:"balance_due",label:"Balance Due",numeric:!0,render:C=>e.jsx("span",{className:`font-semibold ${Number(C)>0?"text-red-600":"text-green-600"}`,children:c(Number(C))})}],N=[{id:"customer_name",label:"Customer",render:(C,P)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:P.customer_name}),e.jsx("span",{className:"text-xs text-gray-500",children:P.customer_code})]})},{id:"product_name",label:"Product"},{id:"return_date",label:"Return Date",render:C=>Ie(C)||"N/A"},{id:"reason",label:"Reason",render:C=>e.jsx("span",{className:"text-sm max-w-xs truncate",title:C,children:C})},{id:"status",label:"Status",render:C=>{const P=String(C||"").toLowerCase();let E="default";return P==="completed"||P==="processed"?E="success":P==="pending"||P==="approval"||P==="awaiting_approval"?E="warning":P==="rejected"||P==="failed"||P==="cancelled"?E="error":(P==="in_progress"||P==="processing")&&(E="info"),e.jsx(Me,{icon:P==="pending"?e.jsx(dN,{fontSize:"small"}):e.jsx(mt,{fontSize:"small"}),label:C,size:"small",variant:"outlined",className:"!capitalize",color:E})}}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs(y,{className:"!mb-3 !flex !justify-between !items-center flex-wrap gap-4",children:[e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Orders, Invoices & Returns Report"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Comprehensive report on orders, invoices, and returns"})]}),m&&e.jsx(Xt,{title:"Export Report to Excel",description:"Are you sure you want to export the current report data to Excel? This will include all filtered results with Orders, Invoices, and Returns data.",onConfirm:S,confirmText:"Export",cancelText:"Cancel",placement:"bottom",children:e.jsx(K,{startIcon:e.jsx(jo,{className:"w-4 h-4"}),variant:"outlined",children:"Export to Excel"})})]}),m&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(oe,{type:"date",label:"Start Date",value:t,setValue:s}),e.jsx(oe,{type:"date",label:"End Date",value:a,setValue:r}),e.jsx(so,{name:"customer_id",label:"Customer",value:n,setValue:C=>i(C?parseInt(C.toString()):void 0),onChange:(C,P)=>i(P?P.id:void 0),fullWidth:!1}),e.jsx("div",{children:e.jsxs(_e,{label:"Status",value:o,fullWidth:!0,onChange:C=>l(C.target.value),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"completed",children:"Completed"}),e.jsx(Z,{value:"delivered",children:"Delivered"}),e.jsx(Z,{value:"paid",children:"Paid"}),e.jsx(Z,{value:"unpaid",children:"Unpaid"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.total_orders})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(lu,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.total_invoices})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ks,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Returns"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.total_returns})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ql,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c(f.total_order_value+f.total_invoice_value)})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(vs,{className:"w-6 h-6 text-purple-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:[e.jsx("h2",{className:"!font-bold text-lg !text-gray-900 !mb-4",children:"Key Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Order Value"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:c(w.average_order_value)})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Invoice Value"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:c(w.average_invoice_value)})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversion Rate"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:[w.conversion_rate.toFixed(2),"%"]})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Return Rate"}),e.jsxs("p",{className:"text-xl font-bold text-red-600",children:[w.return_rate.toFixed(2),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:[e.jsx("h2",{className:"!font-bold text-lg !text-gray-900 !mb-4",children:"Status Breakdown"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Orders"}),e.jsx("p",{className:"text-lg font-bold text-orange-600",children:b.pending_orders})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed Orders"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:b.completed_orders})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Invoices"}),e.jsx("p",{className:"text-lg font-bold text-yellow-600",children:b.pending_invoices})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid Invoices"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:b.paid_invoices})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Returns"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:b.pending_returns})]}),e.jsxs("div",{className:"text-center p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed Returns"}),e.jsx("p",{className:"text-lg font-bold text-emerald-600",children:b.completed_returns})]})]})]}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(lu,{className:"w-5 h-5"})," Orders (",u?.data?.orders?.length||0,")"]}),data:u?.data?.orders||[],columns:j,loading:h,pagination:!1,isPermission:m}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(ks,{className:"w-5 h-5"})," Invoices (",u?.data?.invoices?.length||0,")"]}),data:u?.data?.invoices||[],columns:v,loading:h,pagination:!1,isPermission:m}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(ql,{className:"w-5 h-5"})," Returns (",u?.data?.returns?.length||0,")"]}),data:u?.data?.returns||[],columns:N,loading:h,pagination:!1,isPermission:m})]})},UTe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState("all"),{formatCurrency:c}=Ya(),{isRead:m}=Qe("report"),{data:u,isLoading:h}=ATe({start_date:t,end_date:a,customer_id:n,invoice_status:o!=="all"?o:void 0},{enabled:m}),{data:f}=Ep(),b=f?.data||[],w=u?.summary||{total_outstanding_amount:0,total_outstanding_invoices:0,total_customers_with_outstanding:0,total_collections:0,total_collection_count:0,avg_days_overdue:0},S=u?.data?.outstanding_invoices||[],j=u?.data?.customer_summary||[],v=u?.data?.collections||[],N=g.useCallback(async()=>{try{await wTe({start_date:t,end_date:a,customer_id:n,invoice_status:o!=="all"?o:void 0})}catch(M){console.error("Error exporting report to Excel:",M)}},[t,a,n,o]),C=[{id:"invoice_number",label:"Invoice#",render:M=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Gr,{className:"w-5 h-5 text-red-600"})}),e.jsx("span",{className:"font-semibold text-sm",children:M})]})},{id:"customer_name",label:"Customer",render:M=>e.jsx("span",{className:"text-sm",children:M})},{id:"salesperson_name",label:"Salesperson",render:M=>e.jsx("span",{className:"text-sm",children:M})},{id:"invoice_date",label:"Invoice Date",render:M=>Ie(M)||"N/A"},{id:"due_date",label:"Due Date",render:M=>Ie(M)||"N/A"},{id:"balance_due",label:"Balance Due",numeric:!0,render:M=>c(Number(M))},{id:"days_overdue",label:"Days Overdue",numeric:!0,render:M=>{const T=Number(M);let A="default";return T===0?A="success":T<=30?A="warning":A="error",e.jsx(Me,{label:T,size:"small",color:A,variant:"outlined"})}},{id:"status",label:"Status",render:M=>{const T=String(M||"").toLowerCase();let A="default";return T==="paid"||T==="completed"?A="success":T==="overdue"||T==="pending"?A="error":A="warning",e.jsx(Me,{label:M,size:"small",className:"!capitalize",color:A,variant:"outlined"})}}],P=[{id:"customer_name",label:"Customer",render:M=>e.jsx("span",{className:"font-semibold text-sm",children:M})},{id:"invoice_count",label:"Invoice Count",numeric:!0,render:M=>e.jsx("span",{className:"text-sm",children:M})},{id:"total_outstanding",label:"Total Outstanding",numeric:!0,render:M=>c(Number(M))},{id:"avg_days_overdue",label:"Avg Days Overdue",numeric:!0,render:M=>{const T=Number(M);let A="default";return T===0?A="success":T<=30?A="warning":A="error",e.jsx(Me,{label:T.toFixed(0),size:"small",color:A,variant:"outlined"})}}],E=[{id:"payment_number",label:"Payment#",render:M=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Da,{className:"w-5 h-5 text-green-600"})}),e.jsx("span",{className:"font-semibold text-sm",children:M})]})},{id:"payment_date",label:"Date",render:M=>Ie(M)||"N/A"},{id:"customer_name",label:"Customer",render:M=>e.jsx("span",{className:"text-sm",children:M})},{id:"amount",label:"Amount",numeric:!0,render:M=>c(Number(M))},{id:"method",label:"Method",render:M=>e.jsx("span",{className:"text-sm capitalize",children:M})},{id:"collected_by",label:"Collected By",render:M=>e.jsx("span",{className:"text-sm",children:M})},{id:"reference_number",label:"Reference",render:M=>e.jsx("span",{className:"text-sm",children:M})}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs(y,{className:"!mb-3 !flex !justify-between !items-center",children:[e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Outstanding & Collection Report"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track outstanding invoices and payment collections"})]}),e.jsx(Xt,{title:"Export Report to Excel",description:"Are you sure you want to export the current report data to Excel?",onConfirm:N,confirmText:"Export",cancelText:"Cancel",placement:"bottom",children:e.jsx(K,{startIcon:e.jsx(jo,{className:"w-4 h-"}),variant:"outlined",children:"Export to Excel"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(oe,{type:"date",label:"Start Date",value:t,setValue:s}),e.jsx(oe,{type:"date",label:"End Date",value:a,setValue:r}),e.jsxs(_e,{label:"Customer",value:n?.toString()||"all",onChange:M=>i(M.target.value&&M.target.value!=="all"?parseInt(M.target.value):void 0),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Customers"}),b.map(M=>e.jsx(Z,{value:M.id.toString(),children:M.name},M.id))]}),e.jsxs(_e,{label:"Invoice Status",value:o,onChange:M=>l(M.target.value),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"draft",children:"Draft"}),e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"overdue",children:"Overdue"}),e.jsx(Z,{value:"paid",children:"Paid"}),e.jsx(Z,{value:"completed",children:"Completed"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:[e.jsx(fe,{title:"Outstanding Amount",value:c(w.total_outstanding_amount),icon:e.jsx(zc,{className:"w-6 h-6"}),color:"red"}),e.jsx(fe,{title:"Outstanding Invoices",value:w.total_outstanding_invoices,icon:e.jsx(Gr,{className:"w-6 h-6"}),color:"orange"}),e.jsx(fe,{title:"Customers with Outstanding",value:w.total_customers_with_outstanding,icon:e.jsx(la,{className:"w-6 h-6"}),color:"purple"}),e.jsx(fe,{title:"Total Collections",value:c(w.total_collections),icon:e.jsx(vs,{className:"w-6 h-6"}),color:"green"}),e.jsx(fe,{title:"Collection Count",value:w.total_collection_count,icon:e.jsx(ks,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Avg Days Overdue",value:w.avg_days_overdue.toFixed(1),icon:e.jsx(Ds,{className:"w-6 h-6"}),color:"yellow"})]}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(Gr,{className:"w-5 h-5"}),"Outstanding Invoices (",S.length,")"]}),columns:C,data:S,loading:h,pagination:!1,isPermission:m}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(la,{className:"w-5 h-5"}),"Customer Summary (",j.length,")"]}),columns:P,data:j,loading:h,pagination:!1,isPermission:m}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(Da,{className:"w-5 h-5"}),"Collections (",v.length,")"]}),columns:E,data:v,loading:h,pagination:!1,isPermission:m})]})},VTe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState(void 0),{isRead:c}=Qe("report"),{data:m,isLoading:u}=TTe({start_date:t,end_date:a,depot_id:n,zone_id:o},{enabled:c}),{data:h}=No({limit:1e3,isActive:"Y"}),{data:f}=Jl({limit:1e3,isActive:"Y"}),b=h?.data||[],w=f?.data||[],S=m?.summary||{total_promotions:0,active_promotions:0,upcoming_promotions:0,expired_promotions:0},j=g.useCallback(async()=>{try{await fTe({start_date:t,end_date:a,depot_id:n,zone_id:o})}catch(P){console.error("Error exporting report to Excel:",P)}},[t,a,n,o]),v=[{id:"name",label:"Promotion",render:(P,E)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(_r,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:E.name}),e.jsx("span",{className:"text-xs text-gray-500",children:E.code})]})]})},{id:"type",label:"Type",render:P=>e.jsx("span",{className:"text-sm",children:P})},{id:"start_date",label:"Start Date",render:P=>Ie(P)||"N/A"},{id:"end_date",label:"End Date",render:P=>Ie(P)||"N/A"},{id:"depot_name",label:"Depot",render:P=>e.jsx("span",{className:"text-sm",children:P})},{id:"zone_name",label:"Zone",render:P=>e.jsx("span",{className:"text-sm",children:P})},{id:"total_products",label:"Products",numeric:!0,render:P=>e.jsx("span",{className:"font-semibold text-sm",children:P})},{id:"total_parameters",label:"Parameters",numeric:!0,render:P=>e.jsx("span",{className:"font-semibold text-sm",children:P})},{id:"status",label:"Status",render:P=>{const E=String(P||"").toLowerCase();let M="default";return E==="active"||E==="running"?M="success":E==="upcoming"?M="info":E==="expired"&&(M="error"),e.jsx(Me,{label:P,size:"small",className:"!capitalize",color:M,variant:"outlined"})}}],N=[{id:"promotion_name",label:"Promotion",render:(P,E)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:E.promotion_name}),e.jsx("span",{className:"text-xs text-gray-500",children:E.promotion_code})]})},{id:"product_name",label:"Product",render:(P,E)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Wt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:E.product_name}),e.jsx("span",{className:"text-xs text-gray-500",children:E.product_code})]})]})}],C=[{id:"promotion_name",label:"Promotion",render:(P,E)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:E.promotion_name}),e.jsx("span",{className:"text-xs text-gray-500",children:E.promotion_code})]})},{id:"param_name",label:"Parameter Name",render:P=>e.jsx("span",{className:"text-sm",children:P})},{id:"param_type",label:"Type",render:P=>e.jsx("span",{className:"text-sm",children:P})},{id:"param_value",label:"Value",render:P=>e.jsx("span",{className:"text-sm max-w-xs truncate",title:P,children:P})},{id:"param_category",label:"Category",render:P=>e.jsx("span",{className:"text-sm",children:P})}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs(y,{className:"!mb-3 !flex !justify-between !items-center",children:[e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Promo Effectiveness Report"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track promotion performance and effectiveness"})]}),e.jsx(Xt,{title:"Export Report to Excel",description:"Are you sure you want to export the current report data to Excel?",onConfirm:j,confirmText:"Export",cancelText:"Cancel",placement:"bottom",children:e.jsx(K,{startIcon:e.jsx(jo,{className:"w-4 h-4"}),variant:"outlined",children:"Export to Excel"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(oe,{type:"date",label:"Start Date",value:t,setValue:s}),e.jsx(oe,{type:"date",label:"End Date",value:a,setValue:r}),e.jsxs(_e,{label:"Depot",value:n?.toString()||"all",onChange:P=>i(P.target.value&&P.target.value!=="all"?parseInt(P.target.value):void 0),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Depots"}),b.map(P=>e.jsx(Z,{value:P.id.toString(),children:P.name},P.id))]}),e.jsxs(_e,{label:"Zone",value:o?.toString()||"all",onChange:P=>l(P.target.value&&P.target.value!=="all"?parseInt(P.target.value):void 0),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Zones"}),w.map(P=>e.jsx(Z,{value:P.id.toString(),children:P.name},P.id))]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsx(fe,{title:"Total Promotions",value:S.total_promotions,icon:e.jsx(_r,{className:"w-6 h-6"}),color:"purple"}),e.jsx(fe,{title:"Active",value:S.active_promotions,icon:e.jsx(Da,{className:"w-6 h-6"}),color:"green"}),e.jsx(fe,{title:"Upcoming",value:S.upcoming_promotions,icon:e.jsx(Ds,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Expired",value:S.expired_promotions,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red"})]}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(_r,{className:"w-5 h-5"}),"Promotions (",m?.data?.promotions?.length||0,")"]}),columns:v,data:m?.data?.promotions||[],loading:u,pagination:!1}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(Wt,{className:"w-5 h-5"})," Promotion Products (",m?.data?.products?.length||0,")"]}),columns:N,data:m?.data?.products||[],loading:u,pagination:!1}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(bg,{className:"w-5 h-5"})," Promotion Parameters (",m?.data?.parameters?.length||0,")"]}),columns:C,data:m?.data?.parameters||[],loading:u,pagination:!1})]})},HTe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState(void 0),{formatCurrency:c}=Ya(),{isRead:m}=Qe("report"),{data:u,isLoading:h}=MTe({start_date:t,end_date:a,depot_id:n,zone_id:o},{enabled:m}),{data:f}=No({limit:1e3,isActive:"Y"}),{data:b}=Jl({limit:1e3,isActive:"Y"}),w=f?.data||[],S=b?.data||[],j=u?.summary||{total_zones:0,total_customers:0,total_orders:0,total_collection:0},v=g.useCallback(async()=>{try{await gTe({start_date:t,end_date:a,depot_id:n,zone_id:o})}catch(E){console.error("Error exporting report to Excel:",E)}},[t,a,n,o]),N=u?.data?.zones?.flatMap(E=>E.routes||[])||[],C=[{id:"name",label:"Territory",render:(E,M)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ks,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:M.name}),e.jsx("span",{className:"text-xs text-gray-500",children:M.code})]})]})},{id:"depot_name",label:"Depot",render:E=>e.jsx("span",{className:"text-sm",children:E})},{id:"customer_count",label:"Customers",numeric:!0,render:E=>e.jsx("span",{className:"font-semibold text-sm",children:E})},{id:"route_count",label:"Routes",numeric:!0,render:E=>e.jsx("span",{className:"font-semibold text-sm",children:E})},{id:"total_orders",label:"Orders",numeric:!0,render:E=>e.jsx("span",{className:"font-semibold text-sm",children:E})},{id:"total_order_value",label:"Order Value",numeric:!0,render:E=>c(Number(E))},{id:"total_invoices",label:"Invoices",numeric:!0,render:E=>e.jsx("span",{className:"font-semibold text-sm",children:E})},{id:"total_invoice_value",label:"Invoice Value",numeric:!0,render:E=>c(Number(E))},{id:"total_collection",label:"Collection",numeric:!0,render:E=>e.jsx("span",{className:"font-semibold text-green-600",children:c(Number(E))})}],P=[{id:"route_name",label:"Route",render:(E,M)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:M.route_name}),e.jsx("span",{className:"text-xs text-gray-500",children:M.route_code})]})},{id:"salesperson_name",label:"Sales Person",render:E=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(la,{className:"w-5 h-5 text-purple-600"})}),e.jsx("span",{className:"font-semibold text-sm",children:E})]})},{id:"customers",label:"Customers",numeric:!0,render:E=>e.jsx("span",{className:"font-semibold text-sm",children:E})},{id:"orders",label:"Orders",numeric:!0,render:E=>e.jsx("span",{className:"font-semibold text-sm",children:E})},{id:"order_value",label:"Order Value",numeric:!0,render:E=>c(Number(E))},{id:"invoices",label:"Invoices",numeric:!0,render:E=>e.jsx("span",{className:"font-semibold text-sm",children:E})},{id:"invoice_value",label:"Invoice Value",numeric:!0,render:E=>c(Number(E))}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs(y,{className:"!mb-3 !flex !justify-between !items-center",children:[e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Region/Territory Sales Report"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track sales performance across territories and routes"})]}),e.jsx(Xt,{title:"Export Report to Excel",description:"Are you sure you want to export the current report data to Excel?",onConfirm:v,confirmText:"Export",cancelText:"Cancel",placement:"bottom",children:e.jsx(K,{startIcon:e.jsx(jo,{className:"w-4 h-4"}),variant:"outlined",children:"Export to Excel"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(oe,{type:"date",label:"Start Date",value:t,setValue:s}),e.jsx(oe,{type:"date",label:"End Date",value:a,setValue:r}),e.jsxs(_e,{label:"Depot",value:n?.toString()||"all",onChange:E=>i(E.target.value&&E.target.value!=="all"?parseInt(E.target.value):void 0),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Depots"}),w.map(E=>e.jsx(Z,{value:E.id.toString(),children:E.name},E.id))]}),e.jsxs(_e,{label:"Territory",value:o?.toString()||"all",onChange:E=>l(E.target.value&&E.target.value!=="all"?parseInt(E.target.value):void 0),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Territories"}),S.map(E=>e.jsx(Z,{value:E.id.toString(),children:E.name},E.id))]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-5",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Territories"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:j.total_zones})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Ks,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:j.total_customers})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(la,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:j.total_orders})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(lu,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Collection"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:c(j.total_collection)})]}),e.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(vs,{className:"w-6 h-6 text-emerald-600"})})]})})]}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(Ks,{className:"w-5 h-5"}),"Territory Performance (",u?.data?.zones?.length||0,")"]}),columns:C,data:u?.data?.zones||[],loading:h,pagination:!1,isPermission:m}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"})," Route Performance (",N.length,")"]}),columns:P,data:N,loading:h,pagination:!1,isPermission:m})]})},WTe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState(void 0),{formatCurrency:c}=Ya(),{isRead:m}=Qe("report"),{data:u,isLoading:h}=DTe({start_date:t,end_date:a,salesperson_id:n,depot_id:o},{enabled:m}),{data:f}=No({limit:1e3,isActive:"Y"}),b=f?.data||[],w=u?.summary||{total_reps:0,total_visits:0,completed_tasks:0,total_orders:0,total_order_value:0,total_collection:0};console.log(n);const S=u?.data?.reps||[],j=g.useCallback(async()=>{try{await bTe({start_date:t,end_date:a,salesperson_id:n,depot_id:o})}catch(N){console.error("Error exporting report to Excel:",N)}},[t,a,n,o]),v=[{id:"name",label:"Rep Name",render:(N,C)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Tr,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:C.name}),e.jsx("span",{className:"text-xs text-gray-500",children:C.email})]})]})},{id:"employee_id",label:"Employee ID",render:N=>e.jsx("span",{className:"text-sm",children:N})},{id:"depot_name",label:"Depot",render:N=>e.jsx("span",{className:"text-sm",children:N})},{id:"total_visits",label:"Visits",numeric:!0,render:N=>e.jsx("span",{className:"font-semibold text-sm",children:N})},{id:"total_orders",label:"Orders",numeric:!0,render:N=>e.jsx("span",{className:"font-semibold text-sm",children:N})},{id:"order_value",label:"Order Value",numeric:!0,render:N=>c(Number(N))},{id:"total_collection",label:"Collection",numeric:!0,render:N=>e.jsx("span",{className:"font-semibold text-green-600",children:c(Number(N))})},{id:"days_active",label:"Days Active",numeric:!0,render:N=>e.jsx("span",{className:"text-sm",children:N})},{id:"productivity_score",label:"Score",numeric:!0,render:N=>e.jsx(Me,{label:N,size:"small",className:"!font-semibold",color:N>50?"success":N>25?"warning":"error"})}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs(y,{className:"!mb-3 !flex !justify-between !items-center",children:[e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Rep Productivity Report"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track individual sales rep performance and productivity"})]}),e.jsx(Xt,{title:"Export Report to Excel",description:"Are you sure you want to export the current report data to Excel?",onConfirm:j,confirmText:"Export",cancelText:"Cancel",placement:"bottom",children:e.jsx(K,{startIcon:e.jsx(jo,{className:"w-4 h-4"}),variant:"outlined",children:"Export to Excel"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(oe,{type:"date",label:"Start Date",value:t,onChange:N=>s(N.target.value)}),e.jsx(oe,{type:"date",label:"End Date",value:a,onChange:N=>r(N.target.value)}),e.jsx(pn,{label:"Sales Rep",value:n?.toString()||"all",setValue:i}),e.jsxs(_e,{label:"Depot",value:o?.toString()||"all",onChange:N=>l(N.target.value&&N.target.value!=="all"?parseInt(N.target.value):void 0),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Depots"}),b.map(N=>e.jsx(Z,{value:N.id.toString(),children:N.name},N.id))]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-5",children:[e.jsx(fe,{title:"Total Reps",value:w.total_reps,icon:e.jsx(Tr,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Total Visits",value:w.total_visits,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"purple"}),e.jsx(fe,{title:"Total Orders",value:w.total_orders,icon:e.jsx(lu,{className:"w-6 h-6"}),color:"green"}),e.jsx(fe,{title:"Completed Tasks",value:w.completed_tasks,icon:e.jsx(Da,{className:"w-6 h-6"}),color:"emerald"}),e.jsx(fe,{title:"Order Value",value:c(w.total_order_value),icon:e.jsx(oA,{className:"w-6 h-6"}),color:"orange"}),e.jsx(fe,{title:"Total Collection",value:c(w.total_collection),icon:e.jsx(rp,{className:"w-6 h-6"}),color:"teal"})]}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(Tr,{className:"w-5 h-5"}),"Rep Performance (",S.length,")"]}),columns:v,data:S,loading:h,pagination:!1,isPermission:m})]})},YTe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState(void 0),{formatCurrency:c}=Ya(),{isRead:m}=Qe("report"),{data:u,isLoading:h}=PTe({start_date:t,end_date:a,salesperson_id:n,product_category_id:o},{enabled:m}),{data:f}=Tp(),{data:b}=Qr(),w=f?.data||[],S=b?.data||[],j=u?.summary||{total_salespeople:0,total_categories:0,total_target_amount:0,total_actual_sales:0},v=u?.performance||[],N=u?.category_performance||[],C=g.useCallback(async()=>{try{await cTe({start_date:t,end_date:a,salesperson_id:n,product_category_id:o})}catch(M){console.error("Error exporting report to Excel:",M)}},[t,a,n,o]),P=[{id:"salesperson_name",label:"Sales Person",render:(M,T)=>{const A=T.salesperson_name||"N/A",L=A.split(" ").map(F=>F[0]).join("").toUpperCase().slice(0,2)||"U";return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:L})}),e.jsx("span",{className:"font-semibold text-sm",children:A})]})}},{id:"category_name",label:"Category",render:M=>e.jsx("span",{className:"text-sm",children:M})},{id:"target_amount",label:"Target",numeric:!0,render:M=>c(Number(M))},{id:"actual_sales",label:"Actual Sales",numeric:!0,render:M=>c(Number(M))},{id:"achievement_percentage",label:"Achievement %",numeric:!0,render:M=>{const T=Number(M);let A="default";return T>=100?A="success":T>=75?A="info":T>=50?A="warning":A="error",e.jsx(Me,{label:`${T.toFixed(1)}%`,size:"small",variant:"outlined",color:A})}},{id:"gap",label:"Gap",numeric:!0,render:M=>e.jsxs("span",{className:`font-semibold ${Number(M)>=0?"text-green-600":"text-red-600"}`,children:[Number(M)>=0?"+":""," ",c(Number(M))]})}],E=[{id:"category_name",label:"Category",render:M=>e.jsx("span",{className:"font-semibold text-sm",children:M})},{id:"target_amount",label:"Target",numeric:!0,render:M=>c(Number(M))},{id:"actual_sales",label:"Actual Sales",numeric:!0,render:M=>c(Number(M))},{id:"achievement_percentage",label:"Achievement %",numeric:!0,render:M=>{const T=Number(M);let A="default";return T>=100?A="success":T>=75?A="info":T>=50?A="warning":A="error",e.jsx(Me,{label:`${T.toFixed(1)}%`,size:"small",variant:"outlined",color:A})}},{id:"gap",label:"Gap",numeric:!0,render:M=>e.jsxs("span",{className:`font-semibold ${Number(M)>=0?"text-green-600":"text-red-600"}`,children:[Number(M)>=0?"+":""," ",c(Number(M))]})}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs(y,{className:"!mb-3 !flex !justify-between !items-center",children:[e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Sales vs Target Report"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track sales performance against targets"})]}),m&&e.jsx(Xt,{title:"Export Report to Excel",description:"Are you sure you want to export the current report data to Excel?",onConfirm:C,confirmText:"Export",cancelText:"Cancel",placement:"bottom",children:e.jsx(K,{startIcon:e.jsx(jo,{className:"w-4 h-4"}),variant:"outlined",children:"Export to Excel"})})]}),m&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{children:e.jsx(oe,{type:"date",value:t,setValue:s,placeholder:"Start Date",label:"Start Date"})}),e.jsx("div",{children:e.jsx(oe,{type:"date",value:a,setValue:r,placeholder:"End Date",label:"End Date"})}),e.jsx("div",{children:e.jsxs(_e,{label:"Sales Person",fullWidth:!0,value:n?n.toString():"all",onChange:M=>i(M.target.value==="all"?void 0:parseInt(M.target.value)),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Salespeople"}),S.map(M=>e.jsx(Z,{value:M.id.toString(),children:M.name},M.id))]})}),e.jsx("div",{children:e.jsxs(_e,{value:o?o.toString():"all",fullWidth:!0,label:"Product Category",onChange:M=>l(M.target.value==="all"?void 0:parseInt(M.target.value)),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Categories"}),w.map(M=>e.jsx(Z,{value:M.id.toString(),children:M.category_name},M.id))]})})]})}),m&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsx(fe,{title:"Sales Person",value:j.total_salespeople,icon:e.jsx(la,{className:"w-6 h-6"}),color:"blue",isLoading:h}),e.jsx(fe,{title:"Categories",value:j.total_categories,icon:e.jsx(Gc,{className:"w-6 h-6"}),color:"purple",isLoading:h}),e.jsx(fe,{title:"Target Amount",value:c(j.total_target_amount).toLocaleString(),icon:e.jsx(sl,{className:"w-6 h-6"}),color:"orange",isLoading:h}),e.jsx(fe,{title:"Actual Sales",value:c(j.total_actual_sales),icon:e.jsx(vs,{className:"w-6 h-6"}),color:"green",isLoading:h})]}),e.jsx(ot,{columns:P,actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(la,{className:"w-5 h-5"})," Performance by Sales Person (",v.length,")"]}),data:v,loading:h,pagination:!1,isPermission:m}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(Gc,{className:"w-5 h-5"})," Performance by Category (",N.length,")"]}),columns:E,data:N,loading:h,pagination:!1,isPermission:m})]})},GTe=async t=>{try{return(await ie.get("/survey-responses",{params:t})).data}catch(s){throw s}},KTe=async t=>{try{return(await ie.get(`/survey-responses/${t}`)).data.data}catch(s){throw s}},QTe=async t=>(await ie.delete(`/survey-responses/${t}`)).data,Gd={all:["survey-responses"],lists:()=>[...Gd.all,"list"],list:t=>[...Gd.lists(),t],details:()=>[...Gd.all,"detail"],detail:t=>[...Gd.details(),t]},ZTe=(t,s)=>tt({queryKey:Gd.list(t||{}),queryFn:()=>GTe(t),staleTime:300*1e3,...s}),XTe=t=>tt({queryKey:Gd.detail(t),queryFn:()=>KTe(t),enabled:!!t,staleTime:300*1e3}),JTe=t=>{const s=is();return De({mutationFn:QTe,loadingMessage:"Deleting survey response...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Gd.lists()})},onError:t?.onError})},eMe=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState(void 0),[l,c]=g.useState(1),[m]=g.useState(10),{isRead:u}=Qe("report"),{data:h,isLoading:f,error:b}=ZTe({search:s,page:l,limit:m,status:r==="all"?void 0:r,survey_id:i},{enabled:u}),{data:w}=LF({limit:1e3}),S=w?.data||[],j=h?.data||[],v=h?.meta?.total||0,N=(h?.meta?.page||1)-1,C=JTe(),P=ls(),E=h?.stats?.total_records??j.length,M=h?.stats?.active_records??0,T=h?.stats?.inactive_records??0,A=h?.stats?.records_this_month??0,L=g.useCallback(B=>{t(`/reports/survey-responses/${B.id}`)},[t]),F=g.useCallback(async B=>{try{await C.mutateAsync(B)}catch(q){console.error("Error deleting survey response:",q)}},[C]),z=g.useCallback(B=>{a(B),c(1)},[]),I=B=>{c(B+1)},Q=g.useCallback(async()=>{try{const B={search:s,status:r==="all"?void 0:r,survey_id:i};await P.mutateAsync({tableName:"survey_responses",filters:B})}catch(B){console.error("Error exporting survey responses:",B)}},[P,s,r,i]),Y=[{id:"survey",label:"Survey Info",render:(B,q)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:q.survey?.name||"Survey",className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(ks,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !leading-tight !font-semibold",children:q.survey?.name||`Survey #${q.parent_id}`}),q.survey?.description&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",title:q.survey.description,style:{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",cursor:"help",width:"250px"},children:q.survey.description})]})]})},{id:"customer",label:"Customer",render:(B,q)=>{const V=q.customer||q.survey_response_customer;return V?e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:V.name||"Survey",src:"mkx",className:"!rounded !bg-primary-100 !text-primary-500"}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!leading-tight !font-semibold",children:V.name}),V.code&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:V.code})]})]}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No customer"})}},{id:"submitted_user",label:"Submitted By",render:(B,q)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:q.submitted_user?.name||"Survey",src:"mkx",className:"!rounded !bg-primary-100 !text-primary-500"}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !leading-tight !font-semibold",children:q.submitted_user?.name}),q?.submitted_user?.email&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:q.submitted_user.email})]})]})},{id:"submitted_at",label:"Submitted At",render:(B,q)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:q.submitted_at?Ie(typeof q.submitted_at=="string"?q.submitted_at:q.submitted_at?.toString()||""):"Not submitted"})]})},{id:"answers_count",label:"Answers",render:(B,q)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Gc,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs font-medium",children:q.answers?.length||0})]})},{id:"location",label:"Location",render:(B,q)=>q.location?e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:q.location})]}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No location"})},{id:"status",label:"Status",render:(B,q)=>e.jsx(Me,{icon:q.is_active==="Y"?e.jsx(mt,{fontSize:"small"}):e.jsx(Zw,{fontSize:"small"}),label:q.is_active==="Y"?"Active":"Inactive",size:"small",color:q.is_active==="Y"?"success":"error",variant:"outlined"})},{id:"action",label:"Actions",sortable:!1,render:(B,q)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[e.jsx(Wa,{onClick:()=>L(q),tooltip:`View ${q.survey?.name||"Response"}`,icon:e.jsx(Sn,{fontSize:"small"}),color:"info"}),e.jsx(Vt,{onClick:()=>F(q.id),tooltip:"Delete response",itemName:"survey response",confirmDelete:!0})]})}];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Survey Responses"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"View and manage survey responses submitted by users"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Responses",value:E,icon:e.jsx(ks,{className:"w-6 h-6"}),color:"blue",isLoading:f}),e.jsx(fe,{title:"Active",value:M,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:f}),e.jsx(fe,{title:"Inactive",value:T,icon:e.jsx(ks,{className:"w-6 h-6"}),color:"red",isLoading:f}),e.jsx(fe,{title:"This Month",value:A,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"teal",isLoading:f})]}),b&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load survey responses. Please try again."}),e.jsx(ot,{data:j,columns:Y,actions:e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ts,{placeholder:"Search Responses...",value:s,onChange:z,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:r,onChange:B=>n(B.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:i||"all",onChange:B=>o(B.target.value==="all"?void 0:Number(B.target.value)),className:"!w-68",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Surveys"}),S.map(B=>e.jsx(Z,{value:B.id,children:B.title},B.id))]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Xt,{title:"Export Survey Responses",description:"Are you sure you want to export the current survey response data to Excel? This will include all filtered results.",onConfirm:Q,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:P.isPending,children:P.isPending?"Exporting...":"Export"})})})]}),getRowId:B=>B.id,initialOrderBy:"submitted_at",loading:f,totalCount:v,page:N,rowsPerPage:m,onPageChange:I,emptyMessage:s?`No responses found matching "${s}"`:"No survey responses found in the system"})]})},tMe=()=>{const{id:t}=Kr(),s=Ws(),{formatCurrency:a}=Ya(),{data:r,isLoading:n,error:i,isFetching:o}=XTe(Number(t)),l=()=>{s("/reports/survey-responses")},c=h=>{if(!h)return null;try{const f=JSON.parse(h);return Array.isArray(f)?f.join(", "):typeof f=="object"&&f!==null?JSON.stringify(f,null,2):h}catch{return h}},m=h=>({text:"Text",textarea:"Textarea",number:"Number",select:"Select",checkbox:"Checkbox",radio:"Radio",date:"Date",time:"Time",photo:"Photo",signature:"Signature"})[h]||h;if(n||o)return e.jsxs("div",{className:"!flex !items-start !gap-4",children:[e.jsxs("div",{className:"!flex-2 !flex !flex-col !gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"!absolute !top-3 !right-3",children:e.jsx(X,{variant:"circular",width:10,height:10,className:"!bg-green-200"})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !border-3 !border-white"})}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-green-50"}),e.jsxs("div",{className:"!space-y-2 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"30%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"60%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"40%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"70%",height:14})]})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:140,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4].map(h=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${40+h*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+h*6}%`,height:16})]},h))})]})]})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(h=>e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"40%",height:12})]}),e.jsx(X,{variant:"text",width:80,height:16,className:"!text-right"})]})},h))})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(h=>e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"40%",height:12})]}),e.jsx(X,{variant:"text",width:80,height:16,className:"!text-right"})]})},h))})]})]})]})]});if(i||!r)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load survey response details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:l,className:"mt-4",children:"Back to Survey Responses"})]});const u=({title:h,children:f,icon:b})=>e.jsxs("div",{className:"!bg-white mt-4 !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[b&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(b,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:h})]}),f]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${r.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":r.is_active==="Y","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":r.is_active!=="Y"}),children:e.jsx(ks,{className:"!w-8 !h-8"})})}),e.jsxs(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:["Response #",r.id]}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:r.survey?.name||`Survey #${r.parent_id}`}),e.jsx(Me,{label:r.is_active==="Y"?"Active":"Inactive",className:`${r.is_active==="Y"?"!bg-green-100 !text-green-800":"!bg-gray-100 !text-gray-800"} font-semibold`,size:"small"}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Submitted At"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:r.submitted_at?Ie(typeof r.submitted_at=="string"?r.submitted_at:r.submitted_at?.toString()||""):"Not submitted"})]}),r.location&&e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Location"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:r.location})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Total Answers"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[r.answers?.length||0," answers"]})]})]})]}),e.jsx(u,{title:"Response Statistics",icon:Gc,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Total Answers"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"Number of fields answered"})]}),e.jsx(x,{variant:"h6",className:"!font-bold !text-primary-600",children:r.answers?.length||0})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Status"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"Current response status"})]}),e.jsx(Me,{variant:"outlined",label:r.is_active==="Y"?"Active":"Inactive",color:r.is_active==="Y"?"success":"error",size:"small"})]})})]})})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsx(u,{title:"Response Information",icon:ks,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Survey"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:r.survey?.name||`Survey #${r.parent_id}`}),r.survey?.description&&e.jsx(x,{variant:"caption",className:"!text-gray-500",children:r.survey.description})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Submitted By"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:r.submitted_user?.name||`User #${r.submitted_by}`}),r.submitted_user?.email&&e.jsx(x,{variant:"caption",className:"!text-gray-500",children:r.submitted_user.email})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Submitted Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:r.submitted_at?Ie(typeof r.submitted_at=="string"?r.submitted_at:r.submitted_at?.toString()||""):"Not available"})]}),r.location&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Location"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:r.location})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Created Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:r.createdate?Ie(typeof r.createdate=="string"?r.createdate:r.createdate?.toString()||""):"Not available"})]})]})}),e.jsx(u,{title:"Survey Answers",icon:Gc,children:r.answers&&r.answers.length>0?e.jsx("div",{className:"!space-y-3",children:r.answers.map((h,f)=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx("div",{className:"!flex !items-center !justify-between !mb-2",children:e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.field?.name||`Field #${h.field_id}`}),h.field?.type&&e.jsx(Me,{label:m(h.field.type),size:"small",color:"primary",className:"!text-xs"})]})}),e.jsx(x,{variant:"body1",className:"!text-gray-700 !mt-2 !p-2 !bg-white !rounded !border !border-gray-200",children:c(h?.answer||"")||e.jsx("span",{className:"!text-gray-400 italic",children:"No answer provided"})})]},h.id||f))}):e.jsxs("div",{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:"No answers provided for this response."})]})})]})]}),(r.customer||r.survey_response_customer)&&e.jsx(u,{title:"Customer Information",icon:Tr,children:(()=>{const h=r.customer||r.survey_response_customer;return h?e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 lg:!grid-cols-3 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer Name"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.name})]}),h.code&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer Code"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.code})]}),h.type&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer Type"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.type})]}),h.contact_person&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Contact Person"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.contact_person})]}),h.phone_number&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Phone Number"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.phone_number})]}),h.email&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Email"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !break-all",children:h.email})]}),(h.city||h.state||h.zipcode)&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Location"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[h.city,h.state,h.zipcode].filter(Boolean).join(", ")||"N/A"})]}),h.address&&e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2 lg:!col-span-3",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Address"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:h.address})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Credit Limit"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:a(Number(h.credit_limit))})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Outstanding Amount"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-red-600",children:a(Number(h.outstanding_amount))})]}),e.jsxs("div",{className:"!space-y-0.5 flex flex-col items-start",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Status"}),e.jsx(Me,{label:h.is_active==="Y"?"Active":"Inactive",size:"small",color:h.is_active==="Y"?"success":"error",variant:"outlined"})]})]}):null})()}),e.jsx("div",{className:"!mt-4",children:e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:l,children:"Back to Survey Responses"})})]})},sMe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState(void 0),[c,m]=g.useState("all"),{isRead:u}=Qe("report"),{data:h,isLoading:f}=ETe({start_date:t,end_date:a,salesperson_id:n,customer_id:o,status:c==="all"?void 0:c},{enabled:u}),{data:b}=Ep(),{data:w}=Qr(),S=b?.data||[],j=w?.data||[],v=h?.summary||{total_visits:0,completed_visits:0,total_tasks:0,completed_tasks:0,avg_duration_minutes:0,gps_logs_count:0},N=g.useCallback(async()=>{try{await pTe({start_date:t,end_date:a,salesperson_id:n,customer_id:o,status:c==="all"?void 0:c})}catch(M){console.error("Error exporting report to Excel:",M)}},[t,a,n,o,c]),C=[{id:"customer_name",label:"Customer",render:(M,T)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:T.customer_name}),e.jsx("span",{className:"text-xs text-gray-500",children:T.customer_code})]})},{id:"salesperson_name",label:"Sales Person",render:(M,T)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:T.salesperson_name?.split(" ").map(A=>A[0]).join("").toUpperCase().slice(0,2)||"U"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:T.salesperson_name}),e.jsx("span",{className:"text-xs text-gray-500",children:T.salesperson_email})]})]})},{id:"route_name",label:"Route",render:M=>e.jsx("span",{className:"text-sm",children:M})},{id:"visit_date",label:"Visit Date",render:M=>Ie(M)||"N/A"},{id:"purpose",label:"Purpose",render:M=>e.jsx("span",{className:"text-sm",children:M})},{id:"status",label:"Status",render:M=>{const T=String(M||"").toLowerCase();let A="default";return T==="completed"||T==="closed"?A="success":T==="in_progress"||T==="started"?A="warning":T==="planned"||T==="scheduled"?A="info":(T==="cancelled"||T==="no_show")&&(A="error"),e.jsx(Me,{label:M,size:"small",className:"!capitalize",color:A,variant:"outlined"})}},{id:"duration_minutes",label:"Duration",numeric:!0,render:M=>e.jsxs("span",{className:"text-sm",children:[M," min"]})},{id:"orders_created",label:"Orders",numeric:!0,render:M=>e.jsx("span",{className:"font-semibold text-sm",children:M})},{id:"completion_rate",label:"Tasks Complete",numeric:!0,render:M=>e.jsx(Me,{label:`${M}%`,size:"small",color:Number(M)>=100?"success":Number(M)>=75?"info":"warning",variant:"outlined"})}],P=[{id:"customer_name",label:"Customer",render:M=>e.jsx("span",{className:"font-semibold text-sm",children:M})},{id:"visit_date",label:"Visit Date",render:M=>Ie(M)||"N/A"},{id:"task_type",label:"Task Type",render:M=>e.jsx("span",{className:"text-sm",children:M})},{id:"description",label:"Description",render:M=>e.jsx("span",{className:"text-sm max-w-xs truncate",title:M,children:M})},{id:"due_date",label:"Due Date",render:M=>Ie(M)||"N/A"},{id:"status",label:"Status",render:M=>{const T=String(M||"").toLowerCase();let A="default";return T==="completed"||T==="done"?A="success":T==="in_progress"||T==="started"?A="warning":T==="pending"&&(A="info"),e.jsx(Me,{label:M,size:"small",className:"!capitalize",color:A,variant:"outlined"})}}],E=[{id:"user_name",label:"User",render:M=>e.jsx("span",{className:"font-semibold text-sm",children:M})},{id:"log_time",label:"Log Time",render:M=>Ie(M)||"N/A"},{id:"latitude",label:"Latitude",numeric:!0,render:M=>e.jsx("span",{className:"text-sm",children:Number(M).toFixed(6)})},{id:"longitude",label:"Longitude",numeric:!0,render:M=>e.jsx("span",{className:"text-sm",children:Number(M).toFixed(6)})},{id:"speed_kph",label:"Speed",numeric:!0,render:M=>e.jsxs("span",{className:"text-sm",children:[Number(M).toFixed(1)," km/h"]})},{id:"battery_level",label:"Battery",numeric:!0,render:M=>{const T=Number(M),A=T>50?"text-green-600":T>20?"text-yellow-600":"text-red-600";return e.jsxs("span",{className:`text-sm ${A}`,children:[T,"%"]})}}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs(y,{className:"!mb-3 !flex !justify-between !items-center",children:[e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Visit Frequency/Completion Report"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track visit patterns, completion rates, and GPS logs"})]}),u&&e.jsx(Xt,{title:"Export Report to Excel",description:"Are you sure you want to export the current report data to Excel?",onConfirm:N,confirmText:"Export",cancelText:"Cancel",placement:"bottom",children:e.jsx(K,{startIcon:e.jsx(jo,{className:"w-4 h-4"}),variant:"outlined",children:"Export to Excel"})})]}),u&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(oe,{type:"date",label:"Start Date",value:t,setValue:s}),e.jsx(oe,{type:"date",label:"End Date",value:a,setValue:r}),e.jsxs(_e,{label:"Salesperson",value:n?.toString()||"all",onChange:M=>i(M.target.value&&M.target.value!=="all"?parseInt(M.target.value):void 0),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Salespeople"}),j.map(M=>e.jsx(Z,{value:M.id.toString(),children:M.name},M.id))]}),e.jsxs(_e,{label:"Customer",value:o?.toString()||"all",onChange:M=>l(M.target.value&&M.target.value!=="all"?parseInt(M.target.value):void 0),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Customers"}),S.map(M=>e.jsxs(Z,{value:M.id.toString(),children:[M.name," (",M.code,")"]},M.id))]}),e.jsxs(_e,{label:"Status",value:c,onChange:M=>m(M.target.value),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"planned",children:"Planned"}),e.jsx(Z,{value:"in_progress",children:"In Progress"}),e.jsx(Z,{value:"completed",children:"Completed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-5",children:[e.jsx(fe,{title:"Total Visits",value:v.total_visits,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Completed",value:v.completed_visits,icon:e.jsx(Da,{className:"w-6 h-6"}),color:"green"}),e.jsx(fe,{title:"Tasks Completed",value:`${v.completed_tasks}/${v.total_tasks}`,icon:e.jsx(sl,{className:"w-6 h-6"}),color:"purple"}),e.jsx(fe,{title:"Avg Duration",value:`${v.avg_duration_minutes} min`,icon:e.jsx(Ds,{className:"w-6 h-6"}),color:"orange"}),e.jsx(fe,{title:"GPS Logs",value:v.gps_logs_count,icon:e.jsx(Ks,{className:"w-6 h-6"}),color:"indigo"})]}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(_s,{className:"w-5 h-5"})," Visits (",h?.data?.visits?.length||0,")"]}),columns:C,data:h?.data?.visits||[],loading:f,pagination:!1,isPermission:u}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(sl,{className:"w-5 h-5"}),"Visit Tasks (",h?.data?.tasks?.length||0,")"]}),columns:P,data:h?.data?.tasks||[],loading:f,pagination:!1}),e.jsx(ot,{actions:e.jsxs(y,{className:"flex font-bold items-center gap-2",children:[e.jsx(Ks,{className:"w-5 h-5"})," GPS Logs (",h?.data?.gps_logs?.length||0,")"]}),columns:E,data:h?.data?.gps_logs||[],loading:f,pagination:!1,isPermission:u})]})},aMe=async t=>{const s=new URLSearchParams;return t?.user_id&&s.append("user_id",t.user_id.toString()),t?.start_date&&s.append("start_date",t.start_date),t?.end_date&&s.append("end_date",t.end_date),(await ie.get(`/tracking/gps?${s.toString()}`)).data.data},rMe=async()=>(await ie.get("/tracking/gps/realtime")).data.data,nMe=async t=>(await ie.post("/tracking/gps",t)).data.data,iMe=async t=>{const s={};return t?.start_date&&(s.start_date=t.start_date),t?.end_date&&(s.end_date=t.end_date),t?.salesperson_id&&(s.salesperson_id=t.salesperson_id),t?.route_id&&(s.route_id=t.route_id),t?.depot_id&&(s.depot_id=t.depot_id),(await ie.get("/tracking/route-effectiveness",{params:s})).data.data},Rl={all:["gps-tracking"],lists:()=>[...Rl.all,"list"],list:t=>[...Rl.lists(),t],realtime:()=>[...Rl.all,"realtime"],path:(t,s)=>[...Rl.all,"path",t,s],routeEffectiveness:t=>[...Rl.all,"route-effectiveness",t]},oMe=(t,s)=>tt({queryKey:Rl.list(t),queryFn:()=>aMe(t),staleTime:180*1e3,enabled:s?.enabled!==!1}),lMe=t=>tt({queryKey:Rl.realtime(),queryFn:()=>rMe(),staleTime:30*1e3,refetchInterval:t?.enabled!==!1?3e4:!1,enabled:t?.enabled!==!1}),cMe=()=>De({mutationFn:t=>nMe(t),invalidateQueries:[...Array.from(Rl.realtime())],loadingMessage:"Creating GPS log..."}),dMe=(t,s)=>tt({queryKey:Rl.routeEffectiveness(t),queryFn:()=>iMe(t),staleTime:300*1e3,enabled:s?.enabled!==!1}),uMe=({open:t,onClose:s,rep:a,onOpenMaps:r})=>a?e.jsx(it,{open:t,setOpen:s,title:"GPS Tracking Details",size:"large",anchor:"right",children:e.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-6 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(la,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:a.user_name}),e.jsxs("div",{className:"space-y-1 mt-2",children:[a.user_email&&e.jsx("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:e.jsx("span",{children:a.user_email})}),a.employee_id&&e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"Employee ID:"}),e.jsxs("span",{className:"font-medium",children:["#",a.employee_id]})]})]})]}),e.jsx("div",{className:"px-4 py-2 bg-green-600 text-white rounded-full text-sm font-medium",children:"Active"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Ks,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h4",{className:"font-semibold text-gray-700",children:"Location"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Latitude:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:Number(a.latitude).toFixed(6)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Longitude:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:Number(a.longitude).toFixed(6)})]}),a.accuracy_meters&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Accuracy:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:["",a.accuracy_meters,"m"]})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(rp,{className:"w-5 h-5 text-orange-600"})}),e.jsx("h4",{className:"font-semibold text-gray-700",children:"Speed & Movement"})]}),e.jsx("div",{className:"space-y-2 text-sm",children:a.speed_kph!==null?e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Current Speed:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900 text-lg",children:[a.speed_kph.toFixed(1)," km/h"]})]}):e.jsx("span",{className:"text-gray-400 italic",children:"No speed data"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Q9,{className:"w-5 h-5 text-purple-600"})}),e.jsx("h4",{className:"font-semibold text-gray-700",children:"Device Information"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[a.battery_level!==null?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-500",children:"Battery:"}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${a.battery_level>50?"bg-green-600":a.battery_level>20?"bg-orange-600":"bg-red-600"}`,style:{width:`${a.battery_level}%`}})}),e.jsxs("span",{className:"font-medium text-gray-900 w-12 text-right",children:[a.battery_level,"%"]})]})]}):e.jsx("span",{className:"text-gray-400 italic",children:"No battery data"}),a.network_type&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Network:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:a.network_type})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx(Ds,{className:"w-5 h-5 text-indigo-600"})}),e.jsx("h4",{className:"font-semibold text-gray-700",children:"Last Update"})]}),e.jsx("div",{className:"text-sm",children:a.last_update?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:Ie(a.last_update)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Real-time tracking active"})]}):e.jsx("span",{className:"text-gray-400 italic",children:"No timestamp available"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ks,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-gray-700",children:"Live Location Map"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("iframe",{src:`https://maps.google.com/maps?q=${Number(a.latitude)},${Number(a.longitude)}&z=16&output=embed`,width:"100%",height:"300",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Location Map",className:"w-full"}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-white p-2 rounded-lg shadow-md border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>r(Number(a.latitude),Number(a.longitude)),children:[e.jsx(Ks,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"Open in Maps"})]})]}),e.jsx("div",{className:"p-3 bg-gray-50 text-sm text-gray-600",children:e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Coordinates:"}),e.jsxs("span",{className:"font-mono text-xs",children:[Number(a.latitude).toFixed(6),","," ",Number(a.longitude).toFixed(6)]})]})})]})]})}):null,mMe=({open:t,onClose:s,onSubmit:a,isLoading:r})=>{const[n,i]=g.useState({latitude:"24.7136",longitude:"46.6753",accuracy_meters:"10",speed_kph:"45.5",battery_level:"85",network_type:"4G"}),o=()=>{a({latitude:parseFloat(n.latitude),longitude:parseFloat(n.longitude),accuracy_meters:n.accuracy_meters?parseInt(n.accuracy_meters):void 0,speed_kph:n.speed_kph?parseFloat(n.speed_kph):void 0,battery_level:n.battery_level?parseFloat(n.battery_level):void 0,network_type:n.network_type})};return e.jsxs(Kl,{open:t,onClose:s,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Nv,{className:"!font-bold !text-xl",children:"Create Test GPS Log"}),e.jsx(pr,{}),e.jsx(ug,{className:"!pt-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Latitude ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"any",value:n.latitude,onChange:l=>i({...n,latitude:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Longitude ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"any",value:n.longitude,onChange:l=>i({...n,longitude:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accuracy (meters)"}),e.jsx("input",{type:"number",value:n.accuracy_meters,onChange:l=>i({...n,accuracy_meters:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Speed (km/h)"}),e.jsx("input",{type:"number",value:n.speed_kph,onChange:l=>i({...n,speed_kph:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Battery Level (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:n.battery_level,onChange:l=>i({...n,battery_level:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Network Type"}),e.jsx("input",{type:"text",value:n.network_type,onChange:l=>i({...n,network_type:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors"})]})]})}),e.jsx(pr,{}),e.jsxs(dg,{className:"!px-6 !py-4",children:[e.jsx(K,{onClick:s,variant:"text",color:"primary",children:"Cancel"}),e.jsx(K,{onClick:o,variant:"contained",color:"primary",loading:r,loadingText:"Creating...",disabled:r,children:"Create GPS Log"})]})]})},pMe=()=>{const[t,s]=g.useState(!1),[a,r]=g.useState(!1),[n,i]=g.useState(null),[o,l]=g.useState({latitude:"24.7136",longitude:"46.6753",accuracy_meters:"10",speed_kph:"45.5",battery_level:"85",network_type:"4G"}),{isRead:c}=Qe("location"),{data:m,isLoading:u}=lMe({enabled:c}),{data:h,isLoading:f}=oMe({user_id:void 0},{enabled:c}),b=cMe(),w=m?.gps_data||[],S=h?.data?.gps_logs||[],j=w.filter(T=>T.latitude&&T.longitude),v=m?.summary||{total_users:0,users_with_location:0,timestamp:new Date().toISOString()},N=u||f,C=T=>{T.latitude&&T.longitude?(i(T),r(!0)):nn.warning("GPS is not active for this representative")},P=(T,A)=>{const L=`https://www.google.com/maps?q=${T},${A}`;window.open(L,"_blank")},E=()=>{b.mutate({latitude:parseFloat(o.latitude),longitude:parseFloat(o.longitude),accuracy_meters:o.accuracy_meters?parseInt(o.accuracy_meters):void 0,speed_kph:o.speed_kph?parseFloat(o.speed_kph):void 0,battery_level:o.battery_level?parseFloat(o.battery_level):void 0,network_type:o.network_type}),s(!1)},M=()=>e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-5",children:[1,2,3,4,5,6].map(T=>e.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(X,{variant:"circular",width:48,height:48,className:"!bg-gray-100"}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(X,{variant:"text",width:"60%",height:24}),e.jsx(X,{variant:"text",width:"20%",height:16})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{variant:"text",width:"80%",height:20}),e.jsx(X,{variant:"text",width:"70%",height:20}),e.jsx(X,{variant:"text",width:"75%",height:20}),e.jsx(X,{variant:"text",width:"50%",height:16})]})]})]})},T))});return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"!font-bold text-xl !text-gray-900",children:"Representatives Location Tracking"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Real-time GPS tracking and location history for sales representatives"})]}),c&&e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 border border-blue-500 text-blue-700 rounded-full bg-blue-50",children:[e.jsx(Ds,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["Last Update: ",Ie(v.timestamp)]})]})})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsx(fe,{title:"Total Reps",value:v.total_users,icon:e.jsx(la,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Active Now",value:v.users_with_location,icon:e.jsx(Xd,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Avg Speed",value:j.length>0?`${Math.round(j.reduce((T,A)=>T+(A.speed_kph||0),0)/j.length)} km/h`:"0 km/h",icon:e.jsx(rp,{className:"w-6 h-6"}),color:"orange",isLoading:N}),e.jsx(fe,{title:"Tracking Points",value:S.length,icon:e.jsx(Ks,{className:"w-6 h-6"}),color:"purple",isLoading:N})]}),!c&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(Ks,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"You do not have permission to view location tracking data"})]}),c&&e.jsx(e.Fragment,{children:N?e.jsx(M,{}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-5",children:[w.map(T=>e.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg border border-gray-100 transition-shadow cursor-pointer hover:shadow-md",onClick:()=>C(T),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${T.latitude&&T.longitude?"bg-green-100":"bg-gray-100"}`,children:T.latitude&&T.longitude?e.jsx(Ks,{className:"w-6 h-6 text-green-600"}):e.jsx(Ks,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 truncate",children:T.user_name}),T.employee_id&&e.jsxs("span",{className:"text-xs text-gray-500",children:["#",T.employee_id]})]}),T.latitude&&T.longitude?e.jsxs("div",{className:"flex items-center gap-4 pt-1",children:[T.speed_kph!==null&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(rp,{className:"w-4 h-4 text-orange-500"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:[T.speed_kph.toFixed(0)," km/h"]})]}),T.battery_level!==null&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(Q9,{className:"w-4 h-4 text-purple-500"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:[T.battery_level,"%"]})]}),T.last_update&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 ml-auto",children:[e.jsx(Ds,{className:"w-3 h-3"}),Ie(T.last_update)]})]}):e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No location data available"})]})]})},T.user_id)),w.length===0&&!N&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(Ks,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No GPS data available"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"No sales representatives are currently being tracked"})]})]})}),e.jsxs(Kl,{open:t,onClose:()=>s(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Nv,{className:"!font-bold !text-xl",children:"Create Test GPS Log"}),e.jsx(pr,{}),e.jsx(ug,{className:"!pt-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Latitude ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"any",value:o.latitude,onChange:T=>{l({...o,latitude:T.target.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Longitude ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"any",value:o.longitude,onChange:T=>l({...o,longitude:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accuracy (meters)"}),e.jsx("input",{type:"number",value:o.accuracy_meters,onChange:T=>l({...o,accuracy_meters:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Speed (km/h)"}),e.jsx("input",{type:"number",value:o.speed_kph,onChange:T=>l({...o,speed_kph:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Battery Level (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:o.battery_level,onChange:T=>l({...o,battery_level:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Network Type"}),e.jsx("input",{type:"text",value:o.network_type,onChange:T=>l({...o,network_type:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors"})]})]})}),e.jsx(pr,{}),e.jsxs(dg,{className:"!px-6 !py-4",children:[e.jsx(K,{onClick:()=>s(!1),variant:"text",color:"primary",children:"Cancel"}),e.jsx(K,{onClick:E,variant:"contained",color:"primary",loading:b.isPending,loadingText:"Creating...",disabled:b.isPending,children:"Create GPS Log"})]})]}),e.jsx(mMe,{open:t,onClose:()=>s(!1),onSubmit:E,isLoading:b.isPending}),e.jsx(uMe,{open:a,onClose:()=>r(!1),rep:n,onOpenMaps:P})]})},hMe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState(""),[n,i]=g.useState(void 0),[o,l]=g.useState(void 0),{isRead:c}=Qe("route-effectiveness"),{data:m,isLoading:u}=dMe({start_date:t,end_date:a,salesperson_id:n,depot_id:o},{enabled:c}),{data:h}=No({isActive:"Y"}),f=h?.data||[],b=m?.summary||{total_routes:0,missed_visits:0,avg_completion_rate:"0",avg_efficiency_score:"0"},w=m?.routes||[],S=[{id:"route_name",label:"Route",render:(j,v)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ks,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm",children:v.route_name}),e.jsx("span",{className:"text-xs text-gray-500",children:v.route_code})]})]})},{id:"salesperson_name",label:"Salesperson",render:j=>e.jsx("span",{className:"text-sm",children:j})},{id:"depot_name",label:"Depot",render:j=>e.jsx("span",{className:"text-sm",children:j})},{id:"total_customers",label:"Customers",numeric:!0,render:j=>e.jsx("span",{className:"font-semibold text-sm",children:j})},{id:"completed_visits",label:"Completed",numeric:!0,render:j=>e.jsx("span",{className:"font-semibold text-sm",children:j})},{id:"missed_visits",label:"Missed",numeric:!0,render:j=>e.jsx("span",{className:"font-semibold text-sm",children:j})},{id:"completion_rate",label:"Completion Rate",numeric:!0,render:j=>{const v=Number(j);return e.jsx(Me,{label:`${j}%`,size:"small",variant:"outlined",color:v>=80?"success":v>=60?"warning":"error",className:"w-20"})}},{id:"efficiency_score",label:"Efficiency",numeric:!0,render:j=>{const v=Number(j);return e.jsx(Me,{label:`${j}%`,size:"small",variant:"outlined",color:v>=80?"success":v>=60?"warning":"error"})}}];return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"!font-bold text-xl !text-gray-900",children:"Route Effectiveness"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Analyze route performance and effectiveness metrics"})]})}),c&&e.jsx("div",{className:"bg-white shadow-sm p-4 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{children:e.jsx(oe,{type:"date",value:t,onChange:j=>s(j.target.value),placeholder:"Start Date",label:"Start Date"})}),e.jsx("div",{children:e.jsx(oe,{type:"date",value:a,onChange:j=>r(j.target.value),placeholder:"End Date",label:"End Date"})}),e.jsx(pn,{label:"Sales Person",value:n?.toString()||"all",setValue:i}),e.jsxs(_e,{label:"Depot",value:o?.toString()||"all",onChange:j=>l(j.target.value&&j.target.value!=="all"?parseInt(j.target.value):void 0),disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Depots"}),f.map(j=>e.jsx(Z,{value:j.id.toString(),children:j.name},j.id))]})]})}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[e.jsx(fe,{title:"Total Routes",value:b.total_routes,icon:e.jsx(Xd,{className:"w-6 h-6"}),color:"blue",isLoading:u}),e.jsx(fe,{title:"Completion Rate",value:`${b.avg_completion_rate}%`,icon:e.jsx(sl,{className:"w-6 h-6"}),color:"green",isLoading:u}),e.jsx(fe,{title:"Efficiency Score",value:`${b.avg_efficiency_score}%`,icon:e.jsx(rp,{className:"w-6 h-6"}),color:"purple",isLoading:u}),e.jsx(fe,{title:"Missed Visits",value:b.missed_visits,icon:e.jsx(zc,{className:"w-6 h-6"}),color:"orange",isLoading:u})]}),c&&e.jsx(ot,{columns:S,actions:e.jsxs(y,{children:["Route Performance (",w.length,")"]}),data:w,loading:u,pagination:!1,isPermission:c}),!c&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(Xd,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"You do not have permission to view route effectiveness data"})]}),c&&!u&&w.length>0&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:w.slice(0,4).map(j=>e.jsxs("div",{className:"bg-white shadow-sm p-6 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:j.route_name}),e.jsx("p",{className:"text-sm text-gray-500",children:j.route_code})]}),e.jsx(Me,{label:`${j.efficiency_score}%`,color:Number(j.efficiency_score)>=80?"success":Number(j.efficiency_score)>=60?"warning":"error",size:"small",variant:"outlined"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-2",children:[e.jsx(la,{className:"w-4 h-4"}),"Customers"]}),e.jsx("span",{className:"font-medium",children:j.total_customers})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-2",children:[e.jsx(Da,{className:"w-4 h-4"}),"Completed"]}),e.jsx("span",{className:"font-medium",children:j.completed_visits})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-2",children:[e.jsx(zc,{className:"w-4 h-4"}),"Missed"]}),e.jsx("span",{className:"font-medium text-red-600",children:j.missed_visits})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500 flex items-center gap-2",children:[e.jsx(Ks,{className:"w-4 h-4"}),"Distance"]}),e.jsxs("span",{className:"font-medium",children:[j.actual_distance_km," km"]})]})]})]},j.route_id))})]})},fMe=async t=>{try{const s={...t};return s.inspector_id!==void 0&&(s.inspector_id===null&&(s.inspector_id="null"),delete s.inspected_by),(await ie.get("/cooler-inspections",{params:s})).data}catch(s){throw console.error("Error fetching cooler inspections:",s),new Error(s.response?.data?.message||"Failed to fetch cooler inspections")}},xMe=async t=>{try{return(await ie.get(`/cooler-inspections/${t}`)).data.data}catch(s){throw console.error("Error fetching cooler inspection:",s),new Error(s.response?.data?.message||"Failed to fetch cooler inspection")}},gMe=async t=>{try{return(await ie.post("/cooler-inspections",t)).data.data}catch(s){throw console.error("Error creating cooler inspection:",s),new Error(s.response?.data?.message||"Failed to create cooler inspection")}},yMe=async(t,s)=>{try{return(await ie.put(`/cooler-inspections/${t}`,s)).data}catch(a){throw console.error("Error updating cooler inspection:",a),new Error(a.response?.data?.message||"Failed to update cooler inspection")}},bMe=async t=>{try{await ie.delete(`/cooler-inspections/${t}`)}catch(s){throw console.error("Error deleting cooler inspection:",s),new Error(s.response?.data?.message||"Failed to delete cooler inspection")}},vMe=async(t,s,a)=>{try{return(await ie.patch(`/cooler-inspections/${t}/status`,{status:s,value:a})).data}catch(r){throw console.error("Error updating cooler inspection status:",r),new Error(r.response?.data?.message||"Failed to update cooler inspection status")}},Fm={all:["cooler-inspections"],lists:()=>[...Fm.all,"list"],list:t=>[...Fm.lists(),t],details:()=>[...Fm.all,"detail"],detail:t=>[...Fm.details(),t]},jMe=(t,s)=>tt({queryKey:Fm.list(t),queryFn:()=>fMe(t),staleTime:300*1e3,...s}),NMe=(t,s)=>tt({queryKey:Fm.detail(t),queryFn:()=>xMe(t),enabled:!!t,staleTime:300*1e3,...s}),wMe=()=>De({mutationFn:gMe,invalidateQueries:["cooler-inspections"],loadingMessage:"Creating cooler inspection..."}),_Me=()=>De({mutationFn:({id:t,...s})=>yMe(t,s),invalidateQueries:["cooler-inspections"],loadingMessage:"Updating cooler inspection..."}),SMe=()=>De({mutationFn:bMe,invalidateQueries:["cooler-inspections"],loadingMessage:"Deleting cooler inspection..."}),CMe=()=>De({mutationFn:({id:t,status:s,value:a})=>vMe(t,s,a),invalidateQueries:["cooler-inspections"],loadingMessage:"Updating cooler inspection status..."}),PMe=nt({file:hs().required("Please select a file to import")}),kMe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:PMe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("cooler_inspections")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"cooler_inspections",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Cooler Inspections",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple cooler inspections. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},EMe=async t=>{try{const s={...t};return s.technician_id===null&&(s.technician_id="null"),(await ie.get("/cooler-installations",{params:s})).data}catch(s){throw console.error("Error fetching cooler installations:",s),new Error(s.response?.data?.message||"Failed to fetch cooler installations")}},TMe=async t=>{try{return(await ie.get(`/cooler-installations/${t}`)).data.data}catch(s){throw console.error("Error fetching cooler installation:",s),new Error(s.response?.data?.message||"Failed to fetch cooler installation")}},MMe=async t=>(await ie.post("/cooler-installations",t)).data.data,DMe=async(t,s)=>(await ie.put(`/cooler-installations/${t}`,s)).data.data,RMe=async t=>{await ie.delete(`/cooler-installations/${t}`)},AMe=async(t,s,a)=>{try{return(await ie.patch(`/cooler-installations/${t}/status`,{status:s,value:a})).data}catch(r){throw console.error("Error updating cooler status:",r),new Error(r.response?.data?.message||"Failed to update cooler status")}},Lm={all:["cooler-installations"],lists:()=>[...Lm.all,"list"],list:t=>[...Lm.lists(),t],details:()=>[...Lm.all,"detail"],detail:t=>[...Lm.details(),t]},zF=(t,s)=>tt({queryKey:Lm.list(t),queryFn:()=>EMe(t),staleTime:300*1e3,...s}),IMe=(t,s)=>tt({queryKey:Lm.detail(t),queryFn:()=>TMe(t),enabled:!!t,staleTime:300*1e3,...s}),OMe=()=>De({mutationFn:MMe,invalidateQueries:["cooler-installations"],loadingMessage:"Creating cooler installation..."}),FMe=()=>De({mutationFn:({id:t,...s})=>DMe(t,s),invalidateQueries:["cooler-installations"],loadingMessage:"Updating cooler installation..."}),LMe=()=>De({mutationFn:RMe,invalidateQueries:["cooler-installations"],loadingMessage:"Deleting cooler installation..."}),$Me=()=>De({mutationFn:({id:t,status:s,value:a})=>AMe(t,s,a),invalidateQueries:["cooler-installations"],loadingMessage:"Updating cooler status..."}),zMe=nt({cooler_id:Ge().required("Cooler is required").positive("Please select a valid cooler"),inspected_by:Ge().required("Inspector is required").positive("Please select a valid inspector"),visit_id:Ge().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).nullable().positive("Please select a valid visit"),inspection_date:Ca().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).typeError("Inspection date must be a valid date").max(new Date,"Inspection date cannot be in the future").min(new Date(new Date().setFullYear(new Date().getFullYear()-30)),"Inspection date cannot be more than 30 years ago").nullable(),temperature:Ge().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).typeError("Temperature must be a number").min(-50,"Temperature must be at least -50C").max(50,"Temperature must be at most 50C").nullable(),is_working:me().oneOf(["Y","N"],"Please select working status").required("Working status is required"),issues:me().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).max(2e3,"Issues must be less than 2000 characters").nullable(),images:me().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).max(2e3,"Images must be less than 2000 characters").nullable(),latitude:Ge().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).typeError("Latitude must be a number").min(-90,"Latitude must be between -90 and 90").max(90,"Latitude must be between -90 and 90").nullable(),longitude:Ge().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).typeError("Longitude must be a number").min(-180,"Longitude must be between -180 and 180").max(180,"Longitude must be between -180 and 180").nullable(),action_required:me().oneOf(["Y","N"],"Please select action required status").required("Action required status is required"),action_taken:me().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).max(2e3,"Action taken must be less than 2000 characters").nullable(),next_inspection_due:Ca().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).typeError("Next inspection due must be a valid date").min(new Date,"Next inspection due must be in the future").max(new Date(new Date().setFullYear(new Date().getFullYear()+5)),"Next inspection due cannot be more than 5 years in the future").nullable().when("inspection_date",([t],s)=>t&&t!=="undefined"&&t!==""?s.min(t,"Next inspection due must be after inspection date"):s),is_active:me().oneOf(["Y","N"],"Please select active status").required("Active status is required")}),qMe=({selectedInspection:t,setSelectedInspection:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),w.resetForm()},o=wMe(),l=_Me(),{data:c}=zF({limit:1e3}),{data:m}=Qr({limit:1e3}),{data:u}=US({limit:1e3}),h=c?.data||[],f=m?.data||[],b=u?.data||[],w=xt({initialValues:{cooler_id:t?.cooler_id||"",inspected_by:t?.inspected_by||"",inspection_date:t?.inspection_date?Or(t.inspection_date):"",temperature:t?.temperature||"",is_working:t?.is_working||"Y",issues:t?.issues||"",images:t?.images||"",latitude:t?.latitude||"",longitude:t?.longitude||"",action_required:t?.action_required||"N",action_taken:t?.action_taken||"",next_inspection_due:t?.next_inspection_due?Or(t.next_inspection_due):"",visit_id:t?.visit_id||"",is_active:t?.is_active||"Y"},validationSchema:zMe,enableReinitialize:!0,onSubmit:async S=>{try{const j={cooler_id:Number(S.cooler_id),inspected_by:Number(S.inspected_by),inspection_date:S.inspection_date,temperature:S.temperature?Number(S.temperature):void 0,is_working:S.is_working,issues:S.issues,images:S.images,latitude:S.latitude?Number(S.latitude):void 0,longitude:S.longitude?Number(S.longitude):void 0,action_required:S.action_required,action_taken:S.action_taken,next_inspection_due:S.next_inspection_due,visit_id:S.visit_id?Number(S.visit_id):void 0,is_active:S.is_active};n&&t?await l.mutateAsync({id:t.id,...j}):await o.mutateAsync(j),i()}catch(j){console.error("Error saving cooler inspection:",j)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Cooler Inspection":"Create Cooler Inspection",children:e.jsx(y,{className:"!p-4",children:e.jsxs("form",{onSubmit:w.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(_e,{name:"cooler_id",label:"Cooler",formik:w,fullWidth:!0,children:h.map(S=>e.jsxs(Z,{value:S.id,children:[S.code," - ",S.brand," ",S.model," (",S.customer?.name,")"]},S.id))}),e.jsx(_e,{name:"inspected_by",label:"Inspector",formik:w,fullWidth:!0,children:f.map(S=>e.jsxs(Z,{value:S.id,children:[S.name," (",S.email,")"]},S.id))}),e.jsx(oe,{name:"inspection_date",label:"Inspection Date",formik:w,type:"date",required:!0}),e.jsx(oe,{name:"temperature",label:"Temperature (C)",placeholder:"Enter temperature",formik:w,type:"number"}),e.jsxs(_e,{name:"is_working",label:"Working Status",formik:w,required:!0,children:[e.jsx(Z,{value:"Y",children:"Working"}),e.jsx(Z,{value:"N",children:"Not Working"})]}),e.jsxs(_e,{name:"action_required",label:"Action Required",formik:w,required:!0,children:[e.jsx(Z,{value:"Y",children:"Yes"}),e.jsx(Z,{value:"N",children:"No"})]}),e.jsx(oe,{name:"latitude",label:"Latitude",placeholder:"Enter latitude",formik:w,type:"number",slotProps:{htmlInput:{inputMode:"decimal",pattern:"[+-]?[0-9]*\\.?[0-9]*",step:"any",onKeyPress:S=>{!/[0-9.-]/.test(S.key)&&S.key!=="Backspace"&&S.key!=="Delete"&&S.key!=="Tab"&&S.key!=="Enter"&&S.preventDefault()}}}}),e.jsx(oe,{name:"longitude",label:"Longitude",placeholder:"Enter longitude",formik:w,type:"number",slotProps:{htmlInput:{inputMode:"decimal",pattern:"[+-]?[0-9]*\\.?[0-9]*",step:"any",onKeyPress:S=>{!/[0-9.-]/.test(S.key)&&S.key!=="Backspace"&&S.key!=="Delete"&&S.key!=="Tab"&&S.key!=="Enter"&&S.preventDefault()}}}}),e.jsx(oe,{name:"next_inspection_due",label:"Next Inspection Due",formik:w,type:"date"}),e.jsx(_e,{name:"visit_id",label:"Visit",formik:w,children:b.map(S=>e.jsx(Z,{value:S.id,children:`Visit #${S.id} - ${S.customer?.name} (${S.visit_date?Or(S.visit_date):"No date"})`},S.id))}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"issues",label:"Issues Found",placeholder:"Describe any issues found during inspection...",formik:w,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"action_taken",label:"Action Taken",placeholder:"Describe any actions taken to resolve issues...",formik:w,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"images",label:"Images",placeholder:"Image URLs or file paths (comma-separated)...",formik:w,multiline:!0,rows:2})}),e.jsx(Ts,{name:"is_active",label:"Status",formik:w})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},BMe=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState("all"),[l,c]=g.useState("all"),[m,u]=g.useState("all"),[h,f]=g.useState(null),[b,w]=g.useState(!1),[S,j]=g.useState(!1),[v,N]=g.useState(1),[C]=g.useState(10),{isCreate:P,isUpdate:E,isDelete:M,isRead:T}=Qe("inspection"),{data:A,isLoading:L,error:F}=jMe({search:s,page:v,limit:C,isActive:r==="all"?void 0:r==="Y"?"Y":"N",isWorking:i==="all"?void 0:i,actionRequired:l==="all"?void 0:l,inspector_id:m==="all"||m===""||!m?void 0:Number(m)},{enabled:T}),z=A?.data||[],I=A?.meta?.total_count||0,Q=(A?.meta?.current_page||1)-1,Y=SMe(),B=ls(),q=A?.stats,V=q?.total_inspections??0,G=q?.active_inspections??0,H=q?.inactive_inspections??0,D=q?.new_inspections_this_month??0,R=g.useCallback(()=>{f(null),w(!0)},[]),$=g.useCallback(ge=>{f(ge),w(!0)},[]),W=g.useCallback(ge=>{t(`/transactions/inspections/${ge.id}`)},[t]),J=g.useCallback(async ge=>{try{await Y.mutateAsync(ge)}catch(le){console.error("Error deleting cooler inspection:",le)}},[Y]),te=g.useCallback(ge=>{a(ge),N(1)},[]),ee=g.useCallback((ge,le)=>{u(le?String(le.id):"all"),N(1)},[]),ae=ge=>{N(ge+1)},ce=g.useCallback(async()=>{try{const ge={search:s,isActive:r==="all"?void 0:r==="Y"?"Y":"N",isWorking:i==="all"?void 0:i,actionRequired:l==="all"?void 0:l,inspector_id:m==="all"||m===""||!m?void 0:Number(m)};await B.mutateAsync({tableName:"cooler_inspections",filters:ge})}catch(ge){console.error("Error exporting cooler inspections:",ge)}},[B,s,r,i,l,m]),he=ge=>{switch(ge){case"Y":return"success";case"N":return"error";default:return"default"}},ne=ge=>{switch(ge){case"Y":return"success";case"N":return"error";default:return"default"}},xe=[{id:"cooler_info",label:"Cooler Info",render:(ge,le)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:le.cooler?.code,className:"!rounded !bg-blue-100 !text-blue-500",children:e.jsx(jx,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:le.cooler?.code||"Unknown Cooler"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:le.cooler?.brand&&le.cooler?.model?`${le.cooler.brand} ${le.cooler.model}`:"Unknown Model"})]})]})},{id:"customer",label:"Customer",render:(ge,le)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(ut,{alt:le.cooler?.customer?.name||"Customer",src:"mkx",className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{className:"flex flex-col",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:le.cooler?.customer?.name||"Unknown Customer"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:le.cooler?.customer?.code??""})]})]})},{id:"inspection_details",label:"Inspection Details",render:(ge,le)=>e.jsxs(y,{className:"flex flex-col gap-1",children:[e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:le.inspection_date?Ie(le.inspection_date):"Not inspected"})]}),le.temperature&&e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Av,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:"text-xs",children:[le.temperature,"C"]})]})]})},{id:"working_status",label:"Working Status",render:(ge,le)=>e.jsx(Me,{icon:le.is_working==="Y"?e.jsx(zl,{}):e.jsx(Vr,{}),label:le.is_working==="Y"?"Working":"Not Working",size:"small",variant:"outlined",color:he(le.is_working)})},{id:"action_required",label:"Action Required",render:(ge,le)=>e.jsx(Me,{label:le.action_required==="Y"?"Yes":"No",size:"small",icon:le.action_required==="Y"?e.jsx(zl,{}):e.jsx(Vr,{}),variant:"outlined",color:ne(le.action_required)})},{id:"inspector",label:"Inspector",render:(ge,le)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(ut,{alt:le.inspector?.name||"Inspector",src:le.inspector?.profile_image||"mkx",className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{className:"flex flex-col",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:le.inspector?.name||"No inspector"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:le.inspector?.email||"No email"})]})]})},{id:"location",label:"Location",render:(ge,le)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:le.latitude&&le.longitude?`${le.latitude.toFixed(4)}, ${le.longitude.toFixed(4)}`:e.jsx("span",{className:"italic text-sm",children:"No Location"})})]})},{id:"next_inspection",label:"Next Inspection",render:(ge,le)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:le.next_inspection_due?Ie(le.next_inspection_due):e.jsx("span",{className:"italic text-sm",children:"No Date"})})]})},{id:"is_active",label:"Active Status",render:(ge,le)=>e.jsx(Me,{icon:le.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:le.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:le.is_active==="Y"?"success":"error"})},...T||E||M?[{id:"action",label:"Actions",sortable:!1,render:(ge,le)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[T&&e.jsx(Wa,{onClick:()=>W(le),tooltip:"View cooler inspection details",icon:e.jsx(Sn,{}),color:"success"}),E&&e.jsx(rs,{onClick:()=>$(le),tooltip:`Edit Inspection ${le.id}`}),M&&e.jsx(Vt,{onClick:()=>J(le.id),tooltip:`Delete Inspection ${le.id}`,itemName:`Inspection ${le.id}`,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Cooler Inspections"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track and manage cooler inspections across installations"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Inspections",value:V,icon:e.jsx(Xo,{className:"w-6 h-6"}),color:"blue",isLoading:L}),e.jsx(fe,{title:"Active Inspections",value:G,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:L}),e.jsx(fe,{title:"Inactive Inspections",value:H,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:L}),e.jsx(fe,{title:"This Month",value:D,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"purple",isLoading:L})]}),F&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load cooler inspections. Please try again."}),e.jsx(ot,{data:z,columns:xe,actions:T||P?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:T&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Cooler Inspections...",value:s,onChange:te,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:r,onChange:ge=>n(ge.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]}),e.jsxs(_e,{value:i,onChange:ge=>o(ge.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Working"}),e.jsx(Z,{value:"Y",children:"Working"}),e.jsx(Z,{value:"N",children:"Not Working"})]}),e.jsxs(_e,{value:l,onChange:ge=>c(ge.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Action"}),e.jsx(Z,{value:"Y",children:"Action Required"}),e.jsx(Z,{value:"N",children:"No Action"})]}),e.jsx(pn,{label:"",value:m==="all"||m==="null"?void 0:m,onChange:ee,fullWidth:!0,size:"small",className:"!w-60",placeholder:"Select Inspector"})]})}),T&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{title:"Export Cooler Inspections",description:"Are you sure you want to export the current cooler inspections data to Excel? This will include all filtered results.",onConfirm:ce,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:B.isPending,children:B.isPending?"Exporting...":"Export"})}),e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>j(!0),children:"Import"}),P&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:R,children:"Create"})]})]}):!1,getRowId:ge=>ge.id,initialOrderBy:"inspection_date",loading:L,totalCount:I,page:Q,rowsPerPage:C,isPermission:T,onPageChange:ae,emptyMessage:s?`No cooler inspections found matching "${s}"`:"No cooler inspections found in the system"}),e.jsx(qMe,{selectedInspection:h,setSelectedInspection:f,drawerOpen:b,setDrawerOpen:w}),e.jsx(kMe,{drawerOpen:S,setDrawerOpen:j})]})},UMe=()=>{const{id:t}=Kr(),s=Ws(),{data:a,isLoading:r,error:n,isFetching:i}=NMe(Number(t)),o=a,l=CMe(),c=async(S,j)=>{try{await l.mutateAsync({id:o?.id||0,status:S,value:j})}catch(v){console.error("Error updating status:",v)}},m=S=>({Y:"!bg-green-100 !text-green-800",N:"!bg-red-100 !text-red-800"})[S]||"bg-gray-100 text-gray-800",u=S=>({Y:"Working",N:"Not Working"})[S]||"Unknown",h=S=>({Y:"!bg-yellow-100 !text-yellow-800",N:"!bg-green-100 !text-green-800"})[S]||"!bg-gray-100 !text-gray-800",f=S=>({Y:"Action Required",N:"No Action Required"})[S]||"Unknown",b=()=>{s("/transactions/inspections")};if(r||i)return e.jsxs("div",{className:"!flex !items-start !gap-4",children:[e.jsxs("div",{className:"!flex-2 !flex !flex-col !gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"!absolute !top-3 !right-3",children:e.jsx(X,{variant:"circular",width:10,height:10,className:"!bg-green-200"})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !border-3 !border-white"})}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-green-50"}),e.jsxs("div",{className:"!space-y-2 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"30%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"60%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"40%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"70%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"25%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:14})]})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:140,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4].map(S=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${40+S*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+S*6}%`,height:16}),S===1&&e.jsx(X,{variant:"text",width:"50%",height:12,className:"!mt-1"})]},S))})]})]})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(S=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"40%",height:12})]}),e.jsx(X,{variant:"text",width:80,height:16,className:"!text-right"})]}),e.jsx(X,{variant:"text",width:"70%",height:12,className:"!mt-1"})]},S))})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:150,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2].map(S=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"70%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:12})]}),e.jsxs("div",{className:"!text-right",children:[e.jsx(X,{variant:"text",width:80,height:16,className:"!mb-1"}),e.jsx(X,{variant:"rectangular",width:60,height:20,className:"!rounded-full"})]})]}),e.jsxs("div",{className:"!flex !items-center !justify-between !text-xs",children:[e.jsx(X,{variant:"text",width:"30%",height:10}),e.jsx(X,{variant:"text",width:"40%",height:10})]})]},S))})]})]})]})]});if(n||!o)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load cooler inspection details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:b,className:"mt-4",children:"Back to Cooler Inspections"})]});const w=({title:S,children:j,icon:v})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[v&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(v,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:S})]}),j]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${o.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":o.is_active==="Y","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":o.is_active!=="Y"}),children:e.jsx(Xo,{className:"!w-8 !h-8"})})}),e.jsxs(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:["Inspection #",o.id]}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:o.cooler?.code||"Unknown Cooler"}),e.jsx(Me,{label:u(o.is_working),className:`${m(o.is_working)} font-semibold`,size:"small"}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Inspection Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.inspection_date?Ie(o.inspection_date):"Not inspected"})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Temperature"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.temperature?`${o.temperature}C`:"Not monitored"})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Action Required"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:f(o.action_required)})]})]})]}),e.jsx(w,{title:"Inspection Details",icon:_s,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(_s,{className:"!text-blue-500 !w-4 !h-4"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Inspection Date"})]}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-blue-600",children:o.inspection_date?Ie(o.inspection_date):"Not inspected"})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Av,{className:"!text-green-500 !w-4 !h-4"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Temperature"})]}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-green-600",children:o.temperature?`${o.temperature}C`:"Not monitored"})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(_s,{className:"!text-orange-500 !w-4 !h-4"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Next Inspection Due"})]}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-orange-600",children:o.next_inspection_due?Ie(o.next_inspection_due):"Not scheduled"})]})}),o.latitude&&o.longitude&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Ks,{className:"!text-purple-500 !w-4 !h-4"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Location"})]}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-purple-600",children:[o.latitude.toFixed(4),","," ",o.longitude.toFixed(4)]})]})})]})})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsx(w,{title:"Cooler Information",icon:jx,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Cooler Code"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.cooler?.code||"Unknown Cooler"}),e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:[o.cooler?.brand," ",o.cooler?.model]})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.cooler?.customer?.name||"Unknown Customer"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.cooler?.customer?.code})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Inspector"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.inspector?.name||"No inspector assigned"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.inspector?.email})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Serial Number"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !font-mono",children:o.cooler?.serial_number||"Not provided"})]}),o.issues&&e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Issues Found"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.issues})]})]})}),e.jsx(w,{title:"Status & Actions",icon:Xo,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Working Status"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"Operational status"})]}),e.jsx(Me,{label:u(o.is_working),className:`${m(o.is_working)} font-semibold`,size:"small"})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Action Required"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"Maintenance status"})]}),e.jsx(Me,{label:f(o.action_required),className:`${h(o.action_required)} font-semibold`,size:"small"})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Inspection Status"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"System status"})]}),e.jsx(Me,{label:o.is_active==="Y"?"Active":"Inactive",color:o.is_active==="Y"?"success":"error",size:"small"})]})}),o.action_taken&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsx("div",{className:"!flex !items-center !justify-between",children:e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Action Taken"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:o.action_taken})]})})})]})}),e.jsx(w,{title:"Status Management",icon:Xo,children:e.jsxs("div",{className:"!space-y-4",children:[e.jsxs("div",{className:"!space-y-2",children:[e.jsx(x,{variant:"subtitle2",className:"!font-semibold !text-gray-900",children:"Working Status"}),e.jsxs("div",{className:"!grid !grid-cols-1 sm:!grid-cols-2 !gap-2",children:[e.jsx(K,{variant:o.is_working==="Y"?"contained":"outlined",color:"success",onClick:()=>o.is_working!=="Y"&&c("is_working","Y"),disabled:l.isPending,className:"!w-full",size:"small",children:"Set Working"}),e.jsx(K,{variant:o.is_working==="N"?"contained":"outlined",color:"error",onClick:()=>o.is_working!=="N"&&c("is_working","N"),disabled:l.isPending,className:"!w-full",size:"small",children:"Set Not Working"})]})]}),e.jsxs("div",{className:"!space-y-2",children:[e.jsx(x,{variant:"subtitle2",className:"!font-semibold !text-gray-900",children:"Action Required"}),e.jsxs("div",{className:"!grid !grid-cols-1 sm:!grid-cols-2 !gap-2",children:[e.jsx(K,{variant:o.action_required==="N"?"contained":"outlined",color:"success",onClick:()=>o.action_required!=="N"&&c("action_required","N"),disabled:l.isPending,className:"!w-full",size:"small",children:"Set No Action Required"}),e.jsx(K,{variant:o.action_required==="Y"?"contained":"outlined",color:"warning",onClick:()=>o.action_required!=="Y"&&c("action_required","Y"),disabled:l.isPending,className:"!w-full",size:"small",children:"Set Action Required"})]})]}),e.jsxs("div",{className:"!space-y-2",children:[e.jsx(x,{variant:"subtitle2",className:"!font-semibold !text-gray-900",children:"Active Status"}),e.jsxs("div",{className:"!grid !grid-cols-1 sm:!grid-cols-2 !gap-2",children:[e.jsx(K,{variant:o.is_active==="Y"?"contained":"outlined",color:"success",onClick:()=>o.is_active!=="Y"&&c("is_active","Y"),disabled:l.isPending,className:"!w-full",size:"small",children:"Set Active"}),e.jsx(K,{variant:o.is_active==="N"?"contained":"outlined",color:"error",onClick:()=>o.is_active!=="N"&&c("is_active","N"),disabled:l.isPending,className:"!w-full",size:"small",children:"Set Inactive"})]})]})]})})]})]})})},VMe=nt({file:hs().required("Please select a file to import")}),HMe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:VMe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("cooler_installations")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"cooler_installations",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Cooler Installations",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple cooler installations. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},WMe=nt({customer_id:Ge().required("Customer is required").positive("Customer must be selected"),code:me().min(2,"Cooler code must be at least 2 characters").max(50,"Cooler code must be less than 50 characters"),brand:me().max(100,"Brand must be less than 100 characters"),model:me().max(100,"Model must be less than 100 characters"),serial_number:me().max(100,"Serial number must be less than 100 characters"),capacity:Ge().min(0,"Capacity must be non-negative"),install_date:Ca().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).typeError("Installation date must be a valid date").max(new Date,"Installation date cannot be in the future").min(new Date(new Date().setFullYear(new Date().getFullYear()-30)),"Installation date cannot be more than 30 years ago").nullable(),last_service_date:Ca().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).typeError("Last service date must be a valid date").max(new Date,"Last service date cannot be in the future").nullable().when("install_date",([t],s)=>t&&t!=="undefined"&&t!==""?s.min(t,"Last service date cannot be before installation date"):s),next_service_due:Ca().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).typeError("Next service due must be a valid date").min(new Date,"Next service due must be in the future").max(new Date(new Date().setFullYear(new Date().getFullYear()+5)),"Next service due cannot be more than 5 years in the future").nullable().when("last_service_date",([t],s)=>t&&t!=="undefined"&&t!==""?s.min(t,"Next service due must be after last service date"):s),status:me().max(20,"Status must be less than 20 characters"),temperature:Ge().typeError("Temperature must be a number").min(-30,"Temperature cannot be below -30C").max(50,"Temperature cannot be above 50C").nullable(),energy_rating:me().matches(/^(A\+\+|A\+|A|B|C|D|E|F|G)$/i,"Energy rating must be one of: A++, A+, A, B, C, D, E, F, G").max(10,"Energy rating must be less than 10 characters"),warranty_expiry:Ca().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).typeError("Warranty expiry must be a valid date").min(new Date,"Warranty expiry cannot be in the past").max(new Date(new Date().setFullYear(new Date().getFullYear()+20)),"Warranty expiry cannot be more than 20 years in the future").nullable(),maintenance_contract:me().max(100,"Maintenance contract must be less than 100 characters"),technician_id:Ge().positive("Technician must be selected"),last_scanned_date:Ca().transform((t,s)=>s==="undefined"||s===""||s===null?null:t).typeError("Last scanned date must be a valid date").max(new Date,"Last scanned date cannot be in the future").min(new Date(new Date().setFullYear(new Date().getFullYear()-2)),"Last scanned date cannot be more than 2 years ago").nullable(),is_active:me().oneOf(["Y","N"],"Status must be Active or Inactive").required("Status is required")}),YMe=({selectedInstallation:t,setSelectedInstallation:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),c.resetForm()},o=OMe(),l=FMe(),c=xt({initialValues:{customer_id:t?.customer_id||"",code:t?.code||"",brand:t?.brand||"",model:t?.model||"",serial_number:t?.serial_number||"",capacity:t?.capacity||"",install_date:t?.install_date?Or(t.install_date):"",last_service_date:t?.last_service_date?Or(t.last_service_date):"",next_service_due:t?.next_service_due?Or(t.next_service_due):"",cooler_type_id:t?.cooler_type_id||"",cooler_sub_type_id:t?.cooler_sub_type_id||"",status:t?.status||"working",temperature:t?.temperature||"",energy_rating:t?.energy_rating||"",warranty_expiry:t?.warranty_expiry?Or(t.warranty_expiry):"",maintenance_contract:t?.maintenance_contract||"",technician_id:t?.technician_id||"",last_scanned_date:t?.last_scanned_date?Or(t.last_scanned_date):"",is_active:t?.is_active||"Y"},validationSchema:WMe,enableReinitialize:!0,onSubmit:async j=>{j.cooler_type_id||c.setFieldValue("cooler_sub_type_id","");try{const v={customer_id:Number(j.customer_id),brand:j.brand,model:j.model,serial_number:j.serial_number,capacity:j.capacity?Number(j.capacity):void 0,install_date:j.install_date,last_service_date:j.last_service_date,next_service_due:j.next_service_due,cooler_type_id:j.cooler_type_id?Number(j.cooler_type_id):void 0,cooler_sub_type_id:j.cooler_sub_type_id?Number(j.cooler_sub_type_id):void 0,status:j.status,temperature:j.temperature?Number(j.temperature):void 0,energy_rating:j.energy_rating,warranty_expiry:j.warranty_expiry,maintenance_contract:j.maintenance_contract,technician_id:j.technician_id?Number(j.technician_id):void 0,last_scanned_date:j.last_scanned_date,is_active:j.is_active};n&&t?await l.mutateAsync({id:t.id,...v}):await o.mutateAsync(v),i()}catch(v){console.error("Error saving cooler installation:",v)}}}),{data:m}=Qr({limit:1e3}),{data:u}=YS(),h=c.values.cooler_type_id?Number(c.values.cooler_type_id):void 0,{data:f}=APe(h),b=m?.data||[],w=u?.data||[],S=f?.data||[];return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Cooler Installation":"Create Cooler Installation",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:c.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(so,{name:"customer_id",label:"Customer",formik:c,required:!0}),e.jsx(oe,{name:"brand",label:"Brand",placeholder:"Enter cooler brand",formik:c}),e.jsx(oe,{name:"model",label:"Model",placeholder:"Enter cooler model",formik:c}),e.jsx(oe,{name:"serial_number",label:"Serial Number",placeholder:"Enter serial number",formik:c}),e.jsx(oe,{name:"capacity",label:"Capacity (Liters)",placeholder:"Enter capacity",formik:c,type:"number"}),e.jsx(oe,{name:"install_date",label:"Installation Date",formik:c,type:"date"}),e.jsx(_e,{name:"cooler_type_id",label:"Cooler Type",formik:c,onChange:j=>{c.setFieldValue("cooler_type_id",j.target.value),c.setFieldValue("cooler_sub_type_id","")},children:w.map(j=>e.jsx(Z,{value:j.id,children:j.name},j.id))}),e.jsx(_e,{name:"cooler_sub_type_id",label:"Cooler Sub Type",formik:c,disabled:!c.values.cooler_type_id,children:S.map(j=>e.jsx(Z,{value:j.id,children:j.name},j.id))}),e.jsxs(_e,{name:"status",label:"Status",formik:c,children:[e.jsx(Z,{value:"working",children:"Working"}),e.jsx(Z,{value:"maintenance",children:"Maintenance"}),e.jsx(Z,{value:"broken",children:"Broken"}),e.jsx(Z,{value:"offline",children:"Offline"})]}),e.jsx(oe,{name:"temperature",label:"Temperature (C)",placeholder:"Enter current temperature",formik:c,type:"number"}),e.jsx(oe,{name:"energy_rating",label:"Energy Rating",placeholder:"e.g., A++, A+, A",formik:c}),e.jsx(oe,{name:"last_service_date",label:"Last Service Date",formik:c,type:"date"}),e.jsx(oe,{name:"next_service_due",label:"Next Service Due",formik:c,type:"date"}),e.jsx(oe,{name:"warranty_expiry",label:"Warranty Expiry",formik:c,type:"date"}),e.jsx(_e,{name:"technician_id",label:"Technician",formik:c,children:b.map(j=>e.jsxs(Z,{value:j.id,children:[j.name," (",j.email,")"]},j.id))}),e.jsx(oe,{name:"last_scanned_date",label:"Last Scanned Date",formik:c,type:"date"}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"maintenance_contract",label:"Maintenance Contract",placeholder:"Enter maintenance contract details",formik:c,multiline:!0,rows:3})}),e.jsx(Ts,{name:"is_active",label:"Status",formik:c,required:!0})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})})})},GMe=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState("all"),[l,c]=g.useState("all"),[m,u]=g.useState(null),[h,f]=g.useState(!1),[b,w]=g.useState(!1),[S,j]=g.useState(1),[v]=g.useState(10),{isCreate:N,isUpdate:C,isDelete:P,isRead:E}=Qe("installation"),{data:M,isLoading:T,isFetching:A,error:L}=zF({search:s,page:S,limit:v,isActive:r==="all"?void 0:r,status:i==="all"?void 0:i,technician_id:l==="all"||l===""||!l?void 0:Number(l)},{enabled:E}),F=M?.data||[],z=M?.meta?.total_count||0,I=(M?.meta?.page||1)-1,Q=LMe(),Y=ls(),B=M?.stats,q=B?.total_coolers??0,V=B?.active_coolers??0,G=B?.inactive_coolers??0,H=B?.new_coolers_this_month??0,D=g.useCallback(()=>{u(null),f(!0)},[]),R=g.useCallback(ne=>{u(ne),f(!0)},[]),$=g.useCallback(ne=>{t(`/transactions/installations/${ne.id}`)},[t]),W=g.useCallback(async ne=>{try{await Q.mutateAsync(ne)}catch(xe){console.error("Error deleting cooler installation:",xe)}},[Q]),J=g.useCallback(ne=>{a(ne),j(1)},[]),te=g.useCallback((ne,xe)=>{c(xe?String(xe.id):"all"),j(1)},[]),ee=ne=>{j(ne+1)},ae=g.useCallback(async()=>{try{const ne={search:s,isActive:r==="all"?void 0:r,status:i==="all"?void 0:i,technician_id:l==="all"||l===""||!l?void 0:Number(l)};await Y.mutateAsync({tableName:"cooler_installations",filters:ne})}catch(ne){console.error("Error exporting cooler installations:",ne)}},[Y,s,r]),ce=ne=>{switch(ne){case"working":return"success";case"maintenance":return"warning";case"broken":return"error";case"offline":return"default";default:return"default"}},he=[{id:"cooler_info",label:"Cooler Info",sortable:!1,render:(ne,xe)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:xe.code,className:"!rounded !bg-blue-100 !text-blue-500",children:e.jsx(jx,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:xe.code}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:[xe.brand?`${xe.brand}`:"Unknown Brand",xe.model?` ${xe.model}`:""]})]})]})},{id:"customer",label:"Customer",sortable:!1,render:(ne,xe)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(ut,{alt:xe.customer?.name||"Customer",src:"mkx",className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{className:"flex flex-col",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:xe.customer?.name||"Unknown Customer"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:xe.customer?.code??""})]})]})},{id:"installation_details",label:"Installation Details",sortable:!1,render:(ne,xe)=>e.jsxs(y,{className:"flex flex-col gap-1",children:[e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:xe.install_date?Ie(xe.install_date):"Not installed"})]}),xe.capacity&&e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Wt,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:"text-xs",children:[xe.capacity,"L"]})]})]})},{id:"cooler_type",label:"Cooler Type",render:(ne,xe)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:xe.cooler_type?.name||e.jsx("span",{className:"italic text-gray-400",children:"No Type"})})},{id:"cooler_sub_type",label:"Cooler Sub Type",render:(ne,xe)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:xe.cooler_sub_type?.name||e.jsx("span",{className:"italic text-gray-400",children:"No Sub Type"})})},{id:"status",label:"Status",render:(ne,xe)=>e.jsx(Me,{label:xe.status||"Unknown",size:"small",variant:"outlined",color:ce(xe.status),className:"!capitalize"})},{id:"temperature",label:"Temperature",render:(ne,xe)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Av,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:xe.temperature?`${xe.temperature}C`:"N/A"})]})},{id:"technician",label:"Technician",sortable:!1,render:(ne,xe)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(ut,{alt:xe.technician?.name||"Technician",src:xe.technician?.profile_image||"mkx",className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{className:"flex flex-col",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:xe.technician?.name||"No technician"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:xe.technician?.email||"No email"})]})]})},{id:"next_service",label:"Next Service",render:(ne,xe)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:xe.next_service_due?Ie(xe.next_service_due):"N/A"})]})},{id:"is_active",label:"Active Status",render:(ne,xe)=>e.jsx(Me,{icon:xe.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:xe.is_active==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:xe.is_active==="Y"?"success":"error"})},...E||C||P?[{id:"action",label:"Actions",sortable:!1,render:(ne,xe)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[E&&e.jsx(Wa,{onClick:()=>$(xe),tooltip:"View cooler installation details",icon:e.jsx(Sn,{}),color:"success"}),C&&e.jsx(rs,{onClick:()=>R(xe),tooltip:`Edit Installation ${xe.code}`}),P&&e.jsx(Vt,{onClick:()=>W(xe.id),tooltip:`Delete Installation ${xe.code}`,itemName:`Installation ${xe.code}`,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Cooler Installations"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Track and manage cooler installations across customers"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Installations",value:q,icon:e.jsx(jx,{className:"w-6 h-6"}),color:"blue",isLoading:T||A}),e.jsx(fe,{title:"Active Installations",value:V,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:T||A}),e.jsx(fe,{title:"Inactive Installations",value:G,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:T||A}),e.jsx(fe,{title:"This Month",value:H,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"purple",isLoading:T||A})]}),L&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load cooler installations. Please try again."}),e.jsx(ot,{data:F,columns:he,actions:E||N?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:E&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Cooler Installations...",value:s,onChange:J,debounceMs:400,className:"!w-52"}),e.jsxs(_e,{value:r,onChange:ne=>n(ne.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]}),e.jsxs(_e,{value:i,onChange:ne=>o(ne.target.value),className:"!w-50",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"working",children:"Working"}),e.jsx(Z,{value:"maintenance",children:"Maintenance"}),e.jsx(Z,{value:"broken",children:"Broken"}),e.jsx(Z,{value:"offline",children:"Offline"})]}),e.jsx(pn,{label:"",placeholder:"Select Technician",value:l==="all"||l==="null"?void 0:l,onChange:te,fullWidth:!0,size:"small",className:"!w-60"})]})}),E&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{title:"Export Cooler Installations",description:"Are you sure you want to export the current cooler installations data to Excel? This will include all filtered results.",onConfirm:ae,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:Y.isPending,children:Y.isPending?"Exporting...":"Export"})}),e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>w(!0),children:"Import"})]}),N&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:D,children:"Create"})]}):!1,getRowId:ne=>ne.id,initialOrderBy:"install_date",loading:T||A,totalCount:z,page:I,rowsPerPage:v,isPermission:E,onPageChange:ee,emptyMessage:s?`No cooler installations found matching "${s}"`:"No cooler installations found in the system"}),e.jsx(YMe,{selectedInstallation:m,setSelectedInstallation:u,drawerOpen:h,setDrawerOpen:f}),e.jsx(HMe,{drawerOpen:b,setDrawerOpen:w})]})},KMe=()=>{const{id:t}=Kr(),s=Ws(),{data:a,isLoading:r,error:n,isFetching:i}=IMe(Number(t)),o=a,l=$Me(),c=()=>{s("/transactions/installations")},m=async(b,w)=>{try{await l.mutateAsync({id:o?.id||0,status:b,value:w})}catch(S){console.error("Error updating status:",S)}},u=b=>{switch(b){case"working":return"success";case"maintenance":return"warning";case"broken":return"error";case"offline":return"default";default:return"default"}},h=b=>{switch(b){case"working":return"Working";case"maintenance":return"Maintenance";case"broken":return"Broken";case"offline":return"Offline";default:return"Unknown"}};if(r||i)return e.jsxs("div",{className:"!flex !items-start !gap-4",children:[e.jsxs("div",{className:"!flex-2 !flex !flex-col !gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"!absolute !top-3 !right-3",children:e.jsx(X,{variant:"circular",width:10,height:10,className:"!bg-green-200"})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !border-3 !border-white"})}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-green-50"}),e.jsxs("div",{className:"!space-y-2 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"30%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"60%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"40%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"70%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"25%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:14})]})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:140,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4].map(b=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${40+b*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+b*6}%`,height:16}),b===1&&e.jsx(X,{variant:"text",width:"50%",height:12,className:"!mt-1"})]},b))})]})]})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(b=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"40%",height:12})]}),e.jsx(X,{variant:"text",width:80,height:16,className:"!text-right"})]}),e.jsx(X,{variant:"text",width:"70%",height:12,className:"!mt-1"})]},b))})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:150,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2].map(b=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"70%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:12})]}),e.jsxs("div",{className:"!text-right",children:[e.jsx(X,{variant:"text",width:80,height:16,className:"!mb-1"}),e.jsx(X,{variant:"rectangular",width:60,height:20,className:"!rounded-full"})]})]}),e.jsxs("div",{className:"!flex !items-center !justify-between !text-xs",children:[e.jsx(X,{variant:"text",width:"30%",height:10}),e.jsx(X,{variant:"text",width:"40%",height:10})]})]},b))})]})]})]})]});if(n||!o)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load cooler installation details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:c,className:"mt-4",children:"Back to Cooler Installations"})]});const f=({title:b,children:w,icon:S})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[S&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(S,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:b})]}),w]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex lg:!flex-row flex-col items-start gap-4",children:[e.jsxs("div",{className:"lg:!flex-2 !w-full !flex-1 !flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${o.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":o.is_active==="Y","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":o.is_active!=="Y"}),children:e.jsx(jx,{className:"!w-8 !h-8"})})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:o.code}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:o.brand&&o.model?`${o.brand} ${o.model}`:"Unknown Model"}),e.jsx(Me,{label:h(o.status),color:u(o.status),size:"small"}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Capacity"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.capacity?`${o.capacity}L`:"Not specified"})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Temperature"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.temperature?`${o.temperature}C`:"Not monitored"})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Energy Rating"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.energy_rating||"Not rated"})]})]})]}),e.jsx(f,{title:"Installation Details",icon:_s,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(_s,{className:"!text-blue-500 !w-4 !h-4"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Installation Date"})]}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-blue-600",children:o.install_date?Ie(o.install_date):"Not installed"})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Xo,{className:"!text-green-500 !w-4 !h-4"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Last Service Date"})]}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-green-600",children:o.last_service_date?Ie(o.last_service_date):"No service history"})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(_s,{className:"!text-orange-500 !w-4 !h-4"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Next Service Due"})]}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-orange-600",children:o.next_service_due?Ie(o.next_service_due):"Not scheduled"})]})}),o.last_scanned_date&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Av,{className:"!text-purple-500 !w-4 !h-4"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Last Scanned"})]}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-purple-600",children:Ie(o.last_scanned_date)})]})})]})})]}),e.jsxs("div",{className:"lg:!flex-4 !w-full !flex-1 !space-y-4",children:[e.jsx(f,{title:"Cooler Information",icon:Wt,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:"Customer"}),e.jsxs(x,{variant:"body1",className:"!text-gray-800",children:[o.customer?.name||"Unknown Customer"," (",o.customer?.code,")"]})]}),e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:"Technician"}),e.jsx(x,{variant:"body1",className:"!text-gray-800",children:o.technician?.name||"No technician assigned"})]}),e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:"Brand & Model"}),e.jsx(x,{variant:"body1",className:"!text-gray-800",children:o.brand&&o.model?`${o.brand} ${o.model}`:"Unknown Brand & Model"})]}),e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:"Serial Number"}),e.jsx(x,{variant:"body1",className:"!text-gray-800",children:o.serial_number||"Not provided"})]}),e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:"Cooler Type"}),e.jsx(x,{variant:"body1",className:"!text-gray-800",children:o.cooler_type?.name||"Not specified"})]}),e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:"Cooler Sub Type"}),e.jsx(x,{variant:"body1",className:"!text-gray-800",children:o.cooler_sub_type?.name||"Not specified"})]}),o.maintenance_contract&&e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"body2",className:"!font-bold !text-gray-900",children:"Maintenance Contract"}),e.jsx(x,{variant:"body1",className:"!text-gray-800",children:o.maintenance_contract})]})]})}),e.jsx(f,{title:"Warranty & Service History",icon:Xo,children:e.jsxs("div",{className:"!space-y-3",children:[o.warranty_expiry&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"subtitle2",className:"!font-semibold !text-gray-900",children:"Warranty Expiry"}),e.jsx(x,{variant:"body1",className:"!text-gray-800",children:Ie(o.warranty_expiry)})]}),e.jsx(Me,{label:new Date(o.warranty_expiry)>new Date?"Active":"Expired",color:new Date(o.warranty_expiry)>new Date?"success":"error",size:"small"})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"subtitle2",className:"!font-semibold !text-gray-900",children:"Current Status"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Operational status"})]}),e.jsx(Me,{label:h(o.status),color:u(o.status),size:"small"})]})}),e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Installation Status"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:"System status"})]}),e.jsx(Me,{label:o.is_active==="Y"?"Active":"Inactive",color:o.is_active==="Y"?"success":"error",size:"small"})]})})]})}),e.jsx(f,{title:"Status Management",icon:Xo,children:e.jsxs("div",{className:"!space-y-4",children:[e.jsxs("div",{className:"!space-y-2",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"Operational Status"}),e.jsx("div",{className:"!grid !grid-cols-1 sm:!grid-cols-2 lg:!grid-cols-4 !gap-2",children:["working","maintenance","broken","offline"].map(b=>e.jsxs(K,{variant:o.status===b?"contained":"outlined",color:b==="working"?"success":b==="maintenance"?"warning":b==="broken"?"error":"secondary",onClick:()=>o.status!==b&&m("status",b),disabled:l.isPending,className:"!capitalize !w-full",size:"small",children:["Set ",b]}))})]}),e.jsxs("div",{className:"!space-y-2",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"Active Status"}),e.jsxs("div",{className:"!grid !grid-cols-1 sm:!grid-cols-2 !gap-2",children:[e.jsx(K,{variant:o.is_active==="Y"?"contained":"outlined",color:"success",onClick:()=>o.is_active!=="Y"&&m("is_active","Y"),disabled:l.isPending,className:"!w-full",size:"small",children:"Set Active"}),e.jsx(K,{variant:o.is_active==="N"?"contained":"outlined",color:"error",onClick:()=>o.is_active!=="N"&&m("is_active","N"),disabled:l.isPending,className:"!w-full",size:"small",children:"Set Inactive"})]})]})]})})]})]})})},QMe=async t=>{try{return(await ie.get("/transaction/credit-notes",{params:t})).data}catch(s){throw s}},ZMe=async t=>{try{return(await ie.get(`/transaction/credit-notes/${t}`)).data}catch(s){throw s}},XMe=async t=>(await ie.post("/transaction/credit-notes",t)).data,JMe=async(t,s)=>(await ie.post("/transaction/credit-notes",{...s,id:t})).data,eDe=async t=>(await ie.delete(`/transaction/credit-notes/${t}`)).data,Ho={all:["creditNotes"],lists:()=>[...Ho.all,"list"],list:t=>[...Ho.lists(),t],details:()=>[...Ho.all,"detail"],detail:t=>[...Ho.details(),t]},tDe=(t,s)=>tt({queryKey:Ho.list(t||{}),queryFn:()=>QMe(t),staleTime:300*1e3,enabled:s?.enabled??!0}),qF=t=>tt({queryKey:Ho.detail(t),queryFn:()=>ZMe(t),enabled:!!t,staleTime:300*1e3}),sDe=t=>{const s=is();return De({mutationFn:XMe,loadingMessage:"Creating credit note...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Ho.lists()})},onError:t?.onError})},aDe=t=>{const s=is();return De({mutationFn:({id:a,...r})=>JMe(a,r),loadingMessage:"Updating credit note...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Ho.lists()}),s.invalidateQueries({queryKey:Ho.detail(r.id)})},onError:t?.onError})},rDe=t=>{const s=is();return De({mutationFn:eDe,loadingMessage:"Deleting credit note...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Ho.lists()})},onError:t?.onError})},nDe=nt({file:hs().required("Please select a file to import")}),iDe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:nDe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("credit_notes")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"credit_notes",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Credit Notes",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple credit notes. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},oDe=async t=>{try{return(await ie.get("/orders",{params:t})).data}catch(s){throw s}},lDe=async t=>{try{return(await ie.get(`/orders/${t}`)).data}catch(s){throw s}},cDe=async t=>(await ie.post("/orders",t)).data,dDe=async(t,s)=>(await ie.put(`/orders/${t}`,s)).data,uDe=async t=>(await ie.delete(`/orders/${t}`)).data,Wo={all:["orders"],lists:()=>[...Wo.all,"list"],list:t=>[...Wo.lists(),t],details:()=>[...Wo.all,"detail"],detail:t=>[...Wo.details(),t]},d1=(t,s)=>tt({queryKey:Wo.list(t||{}),queryFn:()=>oDe(t),staleTime:300*1e3,enabled:s?.enabled??!0}),BF=t=>tt({queryKey:Wo.detail(t),queryFn:()=>lDe(t),enabled:!!t,staleTime:300*1e3}),mDe=t=>{const s=is();return De({mutationFn:cDe,loadingMessage:"Creating order...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Wo.lists()})},onError:t?.onError})},pDe=t=>{const s=is();return De({mutationFn:({id:a,...r})=>dDe(a,r),loadingMessage:"Updating order...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Wo.lists()}),s.invalidateQueries({queryKey:Wo.detail(r.id)})},onError:t?.onError})},hDe=t=>{const s=is();return De({mutationFn:uDe,loadingMessage:"Deleting order...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Wo.lists()})},onError:t?.onError})},fDe=nt({parent_id:Ge().positive("Parent ID must be a positive number").required("Parent ID is required"),customer_id:Ge().positive("Customer ID must be a positive number").required("Customer ID is required"),currency_id:Ge().positive("Currency ID must be a positive number").required("Currency ID is required"),credit_note_date:Ca().required("Credit note date is required"),due_date:Ca().min(x_("credit_note_date"),"Due date must be after credit note date").required("Due date is required"),status:me().oneOf(["draft","pending","approved","rejected","cancelled"],"Invalid status").required("Status is required"),reason:me().min(5,"Reason must be at least 5 characters").max(500,"Reason must be less than 500 characters").required("Reason is required"),payment_method:me().oneOf(["cash","credit","cheque","bank_transfer"],"Invalid payment method").required("Payment method is required"),subtotal:Ge().min(0,"Subtotal must be non-negative").required("Subtotal is required"),discount_amount:Ge().min(0,"Discount amount must be non-negative").required("Discount amount is required"),tax_amount:Ge().min(0,"Tax amount must be non-negative").required("Tax amount is required"),shipping_amount:Ge().min(0,"Shipping amount must be non-negative").required("Shipping amount is required"),total_amount:Ge().min(0,"Total amount must be non-negative").required("Total amount is required"),amount_applied:Ge().min(0,"Amount applied must be non-negative").required("Amount applied is required"),balance_due:Ge().min(0,"Balance due must be non-negative").required("Balance due is required"),notes:me().max(1e3,"Notes must be less than 1000 characters"),billing_address:me().max(500,"Billing address must be less than 500 characters"),is_active:me().oneOf(["Y","N"],"Must be Y or N").required("Is active is required"),creditNoteItems:il().of(nt({product_id:Ge().positive("Product ID must be a positive number").required("Product ID is required"),quantity:Ge().positive("Quantity must be positive").required("Quantity is required"),unit_price:Ge().min(0,"Unit price must be non-negative").required("Unit price is required"),discount_amount:Ge().min(0,"Discount amount must be non-negative"),tax_amount:Ge().min(0,"Tax amount must be non-negative"),notes:me().max(500,"Notes must be less than 500 characters")})).min(1,"At least one credit note item is required")}),xDe=({open:t,onClose:s,creditNote:a})=>{const r=!!a,[n,i]=g.useState([]),{data:o}=d1({limit:1e3}),{data:l}=Zl({limit:1e3}),{data:c}=qF(a?.id||0),m=o?.data||[],u=l?.data||[],h=sDe(),f=aDe(),b=()=>{s(),i([]),w.resetForm()};vt.useEffect(()=>{if(a&&c?.data){const A=c.data.creditNoteItems?.map(L=>({product_id:L.product_id,quantity:L.quantity?.toString()||"1",unit_price:L.unit_price?.toString()||"0",discount_amount:(L.discount_amount||0).toString(),tax_amount:(L.tax_amount||0).toString(),notes:L.notes||""}))||[];i(A),w.setFieldValue("creditNoteItems",A),w.setFieldValue("credit_note_date",Or(c.data.credit_note_date)),w.setFieldValue("due_date",Or(c.data.due_date))}else i([]),w.setFieldValue("creditNoteItems",[])},[a,c]);const w=xt({initialValues:{parent_id:a?.parent_id?.toString()||"",customer_id:a?.customer_id?.toString()||"",currency_id:a?.currency_id?.toString()||l?.data?.[0]?.id?.toString()||"",credit_note_date:Or(a?.credit_note_date),due_date:Or(a?.due_date),status:a?.status||"draft",reason:a?.reason||"",payment_method:a?.payment_method||"credit",subtotal:a?.subtotal||0,discount_amount:a?.discount_amount||0,tax_amount:a?.tax_amount||0,shipping_amount:a?.shipping_amount||0,total_amount:a?.total_amount||0,amount_applied:a?.amount_applied||0,balance_due:a?.balance_due||0,notes:a?.notes||"",billing_address:a?.billing_address||"",is_active:a?.is_active||"Y",creditNoteItems:[]},validationSchema:fDe,enableReinitialize:!0,onSubmit:async A=>{try{const L={...A,credit_note_date:new Date(A.credit_note_date).toISOString(),parent_id:Number(A.parent_id),customer_id:Number(A.customer_id),currency_id:A.currency_id?Number(A.currency_id):void 0,due_date:new Date(A.due_date).toISOString(),notes:A.notes,billing_address:A.billing_address,creditNoteItems:n.filter(F=>F.product_id!=="").map(F=>({product_id:Number(F.product_id),quantity:Number(F.quantity),unit_price:Number(F.unit_price),discount_amount:Number(F.discount_amount)||0,tax_amount:Number(F.tax_amount)||0,notes:F.notes}))};r&&a?await f.mutateAsync({id:a.id,...L}):await h.mutateAsync(L),b()}catch(L){console.log("Error submitting credit note:",L)}}}),S=()=>{const A={product_id:"",quantity:"1",unit_price:"0",discount_amount:"0",tax_amount:"0",notes:""},L=[...n,A];i(L),w.setFieldValue("creditNoteItems",L)},j=A=>{const L=n.filter((F,z)=>z!==A);i(L),w.setFieldValue("creditNoteItems",L)},v=(A,L,F)=>{const z=[...n];z[A]={...z[A],[L]:F},i(z),w.setFieldValue("creditNoteItems",z)},N=n.map((A,L)=>({...A,_index:L})),C=[{id:"product_id",label:"Product",render:(A,L)=>e.jsx(bo,{value:L.product_id,onChange:(F,z)=>v(L._index,"product_id",z?z.id.toString():""),size:"small",className:"!min-w-60"})},{id:"quantity",label:"Quantity",render:(A,L)=>e.jsx(oe,{value:L.quantity,onChange:F=>v(L._index,"quantity",F.target.value),placeholder:"1",type:"number",size:"small",className:"!min-w-20"})},{id:"unit_price",label:"Unit Price",render:(A,L)=>e.jsx(oe,{value:L.unit_price,onChange:F=>v(L._index,"unit_price",F.target.value),placeholder:"0.00",type:"number",size:"small",className:"!min-w-32"})},{id:"discount_amount",label:"Discount Amount",render:(A,L)=>e.jsx(oe,{value:L.discount_amount,onChange:F=>v(L._index,"discount_amount",F.target.value),placeholder:"0.00",type:"number",size:"small",className:"!min-w-20"})},{id:"tax_amount",label:"Tax Amount",render:(A,L)=>e.jsx(oe,{value:L.tax_amount,onChange:F=>v(L._index,"tax_amount",F.target.value),placeholder:"0.00",type:"number",size:"small",className:"!min-w-20"})},{id:"actions",label:"Actions",sortable:!1,render:(A,L)=>e.jsx(Vt,{onClick:()=>j(L._index),tooltip:"Remove item",confirmDelete:!0,size:"medium",itemName:"credit note item"})}],P=A=>(l?.data||[]).find(z=>z.id===Number(A))?.code||"USD",E=(A,L)=>A==null?`${L} 0.00`:new Intl.NumberFormat("en-US",{style:"currency",currency:L}).format(A),T=(()=>{const A=n.reduce((B,q)=>B+Number(q.quantity)*Number(q.unit_price),0),L=n.reduce((B,q)=>B+Number(q.discount_amount),0),F=n.reduce((B,q)=>B+Number(q.tax_amount),0),z=0,I=A-L+F+z,Q=0,Y=I-Q;return{subtotal:A,discount_amount:L,tax_amount:F,shipping_amount:z,total_amount:I,amount_applied:Q,balance_due:Y}})();return e.jsx(it,{open:t,setOpen:b,title:r?"Edit Credit Note":"Create Credit Note",size:"larger",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:w.handleSubmit,className:"!space-y-5",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-5",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"Credit Note Information"})}),e.jsx(_e,{name:"parent_id",label:"Related Order",formik:w,required:!0,children:m.map(A=>e.jsxs(Z,{value:A.id?.toString()||"",children:[A.order_number," - ",A.customer?.name]},A.id))}),e.jsx(so,{name:"customer_id",label:"Customer",formik:w,required:!0}),e.jsx(oe,{name:"credit_note_date",label:"Credit Note Date",type:"date",formik:w,required:!0,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(oe,{name:"due_date",label:"Due Date",type:"date",formik:w,required:!0,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(_e,{name:"currency_id",label:"Currency",formik:w,required:!0,children:u.map(A=>e.jsxs(Z,{value:A.id?.toString()||"",children:[A.code," - ",A.name]},A.id))}),e.jsxs(_e,{name:"status",label:"Status",formik:w,required:!0,children:[e.jsx(Z,{value:"draft",children:"Draft"}),e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"approved",children:"Approved"}),e.jsx(Z,{value:"rejected",children:"Rejected"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]}),e.jsx(oe,{name:"reason",label:"Reason",placeholder:"Enter reason for credit note",formik:w,required:!0}),e.jsxs(_e,{name:"payment_method",label:"Payment Method",formik:w,required:!0,children:[e.jsx(Z,{value:"cash",children:"Cash"}),e.jsx(Z,{value:"credit",children:"Credit"}),e.jsx(Z,{value:"cheque",children:"Cheque"}),e.jsx(Z,{value:"bank_transfer",children:"Bank Transfer"})]}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"billing_address",label:"Billing Address",placeholder:"Enter billing address",formik:w,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"notes",label:"Notes",placeholder:"Enter credit note notes",formik:w,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !justify-between !items-center",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"Credit Note Items"}),e.jsx(K,{type:"button",variant:"outlined",startIcon:e.jsx(Wr,{}),onClick:S,size:"small",children:"Add Item"})]}),n.length>0&&e.jsx(ot,{data:N,columns:C,getRowId:A=>A._index.toString(),pagination:!1,sortable:!1,emptyMessage:"No credit note items added yet."}),n.length===0&&e.jsxs(y,{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(Wt,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:'No items added yet. Click "Add Item" to get started.'})]}),n.length>0&&e.jsxs(y,{className:"!bg-gray-50 !rounded-lg !mt-4",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-2",children:"Credit Note Summary"}),e.jsxs(y,{className:"!space-y-2",children:[e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",children:"Subtotal:"}),e.jsx(x,{variant:"body2",children:E(T.subtotal,P(w.values.currency_id))})]}),e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",children:"Discount:"}),e.jsxs(x,{variant:"body2",children:["-",E(T.discount_amount,P(w.values.currency_id))]})]}),e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",children:"Tax:"}),e.jsx(x,{variant:"body2",children:E(T.tax_amount,P(w.values.currency_id))})]}),e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",children:"Shipping:"}),e.jsx(x,{variant:"body2",children:E(T.shipping_amount,P(w.values.currency_id))})]}),e.jsx(y,{className:"!border-t !border-gray-300 !pt-2 !mt-2",children:e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:"Total Amount:"}),e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:E(T.total_amount,P(w.values.currency_id))})]})}),e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",children:"Amount Applied:"}),e.jsx(x,{variant:"body2",children:E(T.amount_applied,P(w.values.currency_id))})]}),e.jsx(y,{className:"!border-t !border-gray-300 !pt-2 !mt-2",children:e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:"Balance Due:"}),e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:E(T.balance_due,P(w.values.currency_id))})]})})]})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:b,disabled:h.isPending||f.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:h.isPending||f.isPending,children:h.isPending||f.isPending?r?"Updating...":"Creating...":r?"Update":"Create"})]})]})})})},gDe=({open:t,onClose:s,creditNote:a})=>{const{data:r,isLoading:n,error:i}=qF(a?.id||0),o=r?.data||a,l=w=>({draft:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[w]||"bg-gray-100 text-gray-800",c=w=>({draft:"Draft",pending:"Pending",approved:"Approved",rejected:"Rejected",cancelled:"Cancelled"})[w]||w,m=w=>{switch(w){case"draft":return e.jsx(ks,{className:"w-4 h-4"});case"pending":return e.jsx(Ds,{className:"w-4 h-4"});case"approved":return e.jsx(Da,{className:"w-4 h-4"});case"rejected":return e.jsx(ya,{className:"w-4 h-4"});case"cancelled":return e.jsx(ya,{className:"w-4 h-4"});default:return e.jsx(ks,{className:"w-4 h-4"})}},u=w=>{if(w==null)return"N/A";const S=o?.currency?.code||"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:S}).format(w)},h=w=>!w.due_date||!w.balance_due?!1:new Date(w.due_date)<new Date&&w.balance_due>0,f=()=>{s()};if(n)return e.jsx(it,{open:t,setOpen:s,title:"Credit Note Details",size:"large",children:e.jsxs("div",{className:"!p-6 !space-y-6",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !mb-4"}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-2"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto"})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[1,2,3,4].map(w=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6",children:[e.jsx(X,{variant:"text",width:"40%",height:20,className:"!mb-4"}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(S=>e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(X,{variant:"text",width:"30%",height:16}),e.jsx(X,{variant:"text",width:"40%",height:16})]},S))})]},w))})]})});if(i||!o)return e.jsx(it,{open:t,setOpen:s,title:"Credit Note Details",size:"large",children:e.jsxs("div",{className:"!p-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load credit note details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:f,className:"mt-4",children:"Back to Credit Notes"})]})});const b=({title:w,children:S,icon:j})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[j&&e.jsx("div",{className:"!p-1.5 !w-8 !h-8 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(j,{className:"!text-primary-500"})}),e.jsx(x,{variant:"subtitle1",className:"!font-bold !text-gray-900",children:w})]}),S]})]});return e.jsx(it,{open:t,setOpen:s,title:"Credit Note Details",size:"large",children:e.jsxs("div",{className:"!p-5 mb-10 !space-y-5",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${o.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-green-400 !to-green-600 !text-white":o.status==="approved","!bg-gradient-to-br !from-yellow-400 !to-yellow-600 !text-white":o.status==="pending","!bg-gradient-to-br !from-red-400 !to-red-600 !text-white":o.status==="rejected"||o.status==="cancelled","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":o.status==="draft"}),children:e.jsx(Gr,{className:"!w-8 !h-8"})})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:o.credit_note_number}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:o.customer?.name||"Unknown Customer"}),e.jsxs("div",{className:"!flex !justify-center !gap-2 !mb-4",children:[e.jsx(Me,{icon:m(o.status||"draft"),label:c(o.status||"draft"),className:`${l(o.status||"draft")} font-semibold`,size:"small"}),h(o)&&e.jsx(Me,{label:"OVERDUE",className:"!bg-red-100 !text-red-800 !font-bold",size:"small"})]}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Total Amount"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u(o.total_amount)})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Amount Applied"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-green-600",children:u(o.amount_applied)})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Balance Due"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-red-600",children:u(o.balance_due)})]})]})]}),e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(b,{title:"Credit Note Information",icon:Bn,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Credit Note Date:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(o.credit_note_date)})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Due Date:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(o.due_date)})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Payment Method:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !capitalize",children:o.payment_method?.replaceAll("_"," ")||"N/A"})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Related Order:"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:["#",o.parent_id]})]})]})}),e.jsx(b,{title:"Customer Information",icon:Wt,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Customer Name:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.customer?.name||"N/A"})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Customer ID:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.customer?.id||"N/A"})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Customer Code:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.customer?.code||"N/A"})]})]})}),e.jsx(b,{title:"Amount Breakdown",icon:wr,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Subtotal:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u(o.subtotal)})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Discount:"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-green-600",children:["-",u(o.discount_amount)]})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Tax:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u(o.tax_amount)})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Shipping:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u(o.shipping_amount)})]}),e.jsx("div",{className:"!border-t !border-gray-300 !pt-2 !mt-2",children:e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:"Total:"}),e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:u(o.total_amount)})]})})]})}),e.jsx(b,{title:"Credit Note Items",icon:Wt,children:e.jsx("div",{className:"!space-y-2",children:o.creditNoteItems&&o.creditNoteItems.length>0?o.creditNoteItems.map((w,S)=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !justify-between !items-start !mb-1",children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:w.product_name||w.product?.name||`Product #${w.product_id}`}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u(w.total_amount)})]}),e.jsxs("div",{className:"!flex !justify-between !text-xs !text-gray-500",children:[e.jsxs("span",{children:["Qty: ",w.quantity||"N/A"," "," ",u(w.unit_price)]}),w.discount_amount&&w.discount_amount>0&&e.jsxs("span",{className:"!text-green-600",children:["Discount: -",u(w.discount_amount)]})]}),w.notes&&e.jsx(x,{variant:"caption",className:"!text-gray-600 !block !mt-1",children:w.notes})]},w.id||S)):e.jsx(x,{variant:"body2",className:"!text-gray-500 !text-center !py-4",children:"No items found"})})})]}),(o.reason||o.notes||o.billing_address)&&e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[o.reason&&e.jsx(b,{title:"Reason for Credit Note",icon:ks,children:e.jsx(x,{variant:"body2",className:"!text-gray-700",children:o.reason})}),o.notes&&e.jsx(b,{title:"Notes",icon:ks,children:e.jsx(x,{variant:"body2",className:"!text-gray-700",children:o.notes})}),o.billing_address&&e.jsx(b,{title:"Billing Address",icon:Bn,children:e.jsx(x,{variant:"body2",className:"!text-gray-700",children:o.billing_address})})]}),e.jsx("div",{className:"!flex !justify-end",children:e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:f,children:"Back to Credit Notes"})})]})})},yDe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState(null),[o,l]=g.useState(!1),[c,m]=g.useState(!1),[u,h]=g.useState(!1),[f,b]=g.useState(1),[w]=g.useState(10),{isCreate:S,isUpdate:j,isDelete:v,isRead:N}=Qe("credit-note"),{data:C,isLoading:P,error:E}=tDe({search:t,page:f,limit:w,status:a==="all"?void 0:a},{enabled:N}),M=C?.data||[],T=C?.meta?.total||0,A=(C?.meta?.page||1)-1,L=rDe(),F=ls(),z=M.length,I=M.reduce((ee,ae)=>ee+(ae.total_amount||0),0),Q=z>0?I/z:0,Y=M.filter(ee=>ee.status==="pending").length,B=g.useCallback(()=>{i(null),l(!0)},[]),q=g.useCallback(ee=>{i(ee),l(!0)},[]),V=g.useCallback(ee=>{i(ee),m(!0)},[]),G=g.useCallback(async ee=>{try{await L.mutateAsync(ee)}catch(ae){console.error("Error deleting credit note:",ae)}},[L]),H=g.useCallback(ee=>{s(ee),b(1)},[]),D=ee=>{b(ee+1)},R=g.useCallback(async()=>{try{const ee={search:t,status:a==="all"?void 0:a};await F.mutateAsync({tableName:"credit_notes",filters:ee})}catch(ee){console.error("Error exporting credit notes:",ee)}},[F,t,a]),$=ee=>ee==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(ee),W=ee=>({draft:"default",pending:"warning",approved:"success",rejected:"error",cancelled:"error"})[ee]||"default",J=ee=>{switch(ee){case"draft":return e.jsx(Wt,{className:"w-4 h-4"});case"pending":return e.jsx(Ds,{className:"w-4 h-4"});case"approved":return e.jsx(Da,{className:"w-4 h-4"});case"rejected":return e.jsx(ya,{className:"w-4 h-4"});case"cancelled":return e.jsx(ya,{className:"w-4 h-4"});default:return e.jsx(Wt,{className:"w-4 h-4"})}},te=[{id:"credit_note_info",label:"Credit Note Info",render:(ee,ae)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:ae.credit_note_number,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Gr,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !cursor-pointer !hover:!text-primary-500 !hover:!underline",onClick:()=>V(ae),children:ae.credit_note_number}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !capitalize !text-xs !block !mt-0.5",children:[ae.status||"draft","  ",ae.creditNoteItems?.length||0," items"]})]})]})},{id:"customer",label:"Customer",render:(ee,ae)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:ae.customer?.name||"N/A"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:ae.customer?.code||"N/A"})]})},{id:"order",label:"Related Order",render:(ee,ae)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:ae.order?.order_number||"N/A"}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:["Order ID: ",ae.parent_id]})]})},{id:"status",label:"Status",render:(ee,ae)=>e.jsx(Me,{icon:J(ae.status||"draft"),label:ae.status||"draft",size:"small",variant:"outlined",color:W(ae.status||"draft")})},{id:"dates",label:"Dates",render:(ee,ae)=>e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center text-sm text-gray-900",children:[e.jsx(_s,{className:"w-4 h-4 text-gray-400 mr-1"}),"Credit Note:"," ",ae.credit_note_date?new Date(ae.credit_note_date).toLocaleDateString():"N/A"]}),ae.due_date&&e.jsxs(y,{className:"flex items-center text-sm text-gray-500 mt-1",children:[e.jsx(Ds,{className:"w-4 h-4 text-gray-400 mr-1"}),"Due: ",new Date(ae.due_date).toLocaleDateString()]})]})},{id:"amount",label:"Amount",render:(ee,ae)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:$(ae.total_amount)}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:["Subtotal: ",$(ae.subtotal)]}),ae.discount_amount&&ae.discount_amount>0&&e.jsxs(x,{variant:"caption",className:"!text-green-600 !text-xs !block !mt-0.5",children:["Discount: -",$(ae.discount_amount)]})]})},{id:"reason",label:"Reason",render:(ee,ae)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:ae.reason||"N/A"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 capitalize !text-xs !block !mt-0.5",children:ae.payment_method?.replaceAll("_"," ")||"N/A"})]})},...j||v?[{id:"action",label:"Actions",sortable:!1,render:(ee,ae)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[j&&e.jsx(rs,{onClick:()=>q(ae),tooltip:`Edit ${ae.credit_note_number}`}),v&&e.jsx(Vt,{onClick:()=>G(ae.id),tooltip:`Delete ${ae.credit_note_number}`,itemName:ae.credit_note_number,confirmDelete:!0})]})}]:[]];return E?e.jsxs(lt,{severity:"error",className:"mb-4",children:["Error loading credit notes: ",E.message]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Credit Notes Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage credit notes, track refunds, and process adjustments"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Credit Notes",value:z,icon:e.jsx(Gr,{className:"w-6 h-6"}),color:"blue",isLoading:P}),e.jsx(fe,{title:"Total Value",value:$(I),icon:e.jsx(wr,{className:"w-6 h-6"}),color:"green",isLoading:P}),e.jsx(fe,{title:"Avg Credit Note Value",value:$(Q),icon:e.jsx(wr,{className:"w-6 h-6"}),color:"purple",isLoading:P}),e.jsx(fe,{title:"Pending Approval",value:Y,icon:e.jsx(na,{className:"w-6 h-6"}),color:"orange",isLoading:P})]}),E&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load credit notes. Please try again."}),e.jsx(ot,{data:M,columns:te,actions:N||S?e.jsxs("div",{className:"flex justify-between gap-3 items-center flex-wrap",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:N&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Credit Notes...",value:t,onChange:H,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:ee=>r(ee.target.value),className:"!w-40",children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"draft",children:"Draft"}),e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"approved",children:"Approved"}),e.jsx(Z,{value:"rejected",children:"Rejected"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]})]})}),N&&e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Xt,{title:"Export Credit Notes",description:"Are you sure you want to export the current credit notes data to Excel? This will include all filtered results.",onConfirm:R,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:F.isPending,children:F.isPending?"Exporting...":"Export"})}),e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>h(!0),children:"Import"})]}),S&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:B,children:"Create"})]}):!1,getRowId:ee=>ee.id,initialOrderBy:"credit_note_number",loading:P,totalCount:T,page:A,rowsPerPage:w,isPermission:N,onPageChange:D,emptyMessage:t?`No credit notes found matching "${t}"`:"No credit notes found in the system"}),e.jsx(xDe,{open:o,onClose:()=>l(!1),creditNote:n}),e.jsx(iDe,{drawerOpen:u,setDrawerOpen:h}),e.jsx(gDe,{open:c,onClose:()=>m(!1),creditNote:n})]})},bDe=async t=>{try{return(await ie.get("/delivery-schedules",{params:t})).data}catch(s){throw console.error("Error fetching delivery schedules:",s),new Error(s.response?.data?.message||"Failed to fetch delivery schedules")}},vDe=async t=>{try{return(await ie.post("/delivery-schedules",t)).data}catch(s){throw console.error("Error creating delivery schedule:",s),new Error(s.response?.data?.message||"Failed to create delivery schedule")}},jDe=async(t,s)=>{try{return(await ie.put(`/delivery-schedules/${t}`,s)).data}catch(a){throw console.error("Error updating delivery schedule:",a),new Error(a.response?.data?.message||"Failed to update delivery schedule")}},NDe=async t=>{try{return(await ie.delete(`/delivery-schedules/${t}`)).data}catch(s){throw console.error("Error deleting delivery schedule:",s),new Error(s.response?.data?.message||"Failed to delete delivery schedule")}},Lf={all:["delivery-schedules"],lists:()=>[...Lf.all,"list"],list:t=>[...Lf.lists(),t],details:()=>[...Lf.all,"detail"],detail:t=>[...Lf.details(),t]},wDe=(t,s)=>tt({queryKey:Lf.list(t),queryFn:()=>bDe(t),staleTime:300*1e3,...s}),_De=()=>De({mutationFn:vDe,invalidateQueries:["delivery-schedules"],loadingMessage:"Creating delivery schedule..."}),SDe=()=>De({mutationFn:({id:t,...s})=>jDe(t,s),invalidateQueries:["delivery-schedules"],loadingMessage:"Updating delivery schedule..."}),CDe=()=>De({mutationFn:NDe,invalidateQueries:["delivery-schedules"],loadingMessage:"Deleting delivery schedule..."}),PDe=nt({file:hs().required("Please select a file to import")}),kDe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:PDe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("delivery_schedules")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"delivery_schedules",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Delivery Schedules",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple delivery schedules. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing delivery schedules..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},EDe=nt({order_id:Ge().required("Order ID is required").positive("Order ID must be a positive number"),customer_id:Ge().required("Customer ID is required").positive("Customer ID must be a positive number"),scheduled_date:Ca().required("Scheduled date is required").min(new Date,"Scheduled date cannot be in the past"),scheduled_time_slot:me().optional().max(50,"Time slot must be less than 50 characters"),assigned_vehicle_id:Ge().optional().positive("Vehicle ID must be a positive number"),assigned_driver_id:Ge().optional().positive("Driver ID must be a positive number"),status:me().optional().oneOf(["scheduled","in_transit","delivered","failed","cancelled","rescheduled","returned","refunded"],"Invalid status"),priority:me().optional().oneOf(["low","medium","high","urgent"],"Invalid priority"),delivery_instructions:me().optional().max(500,"Delivery instructions must be less than 500 characters"),actual_delivery_time:me().optional().test("is-valid-date","Actual delivery time must be a valid date",t=>{if(!t)return!0;const s=new Date(t);return!isNaN(s.getTime())}),delivery_proof:me().optional().max(255,"Delivery proof must be less than 255 characters"),customer_signature:me().optional().max(255,"Customer signature must be less than 255 characters"),failure_reason:me().optional().max(500,"Failure reason must be less than 500 characters"),rescheduled_date:me().optional().test("is-valid-date","Rescheduled date must be a valid date",t=>{if(!t)return!0;const s=new Date(t);return!isNaN(s.getTime())}).test("is-future-date","Rescheduled date cannot be in the past",t=>t?new Date(t)>=new Date:!0),is_active:me().required("Active status is required").oneOf(["Y","N"],"Active status must be Y or N")}),TDe=({selectedDeliverySchedule:t,setSelectedDeliverySchedule:s,drawerOpen:a,setDrawerOpen:r,users:n,vehicles:i,orders:o})=>{const l=!!t,[c,m]=g.useState(null),u=g.useRef(null),h=()=>{s(null),r(!1),m(null),w.resetForm()},f=_De(),b=SDe(),w=xt({initialValues:{order_id:t?.order_id?.toString()||"",customer_id:t?.customer_id?.toString()||"",scheduled_date:t?.scheduled_date?t.scheduled_date.split("T")[0]:"",scheduled_time_slot:t?.scheduled_time_slot||"",assigned_vehicle_id:t?.assigned_vehicle_id?.toString()||"",assigned_driver_id:t?.assigned_driver_id?.toString()||"",status:t?.status||"scheduled",priority:t?.priority||"medium",delivery_instructions:t?.delivery_instructions||"",actual_delivery_time:t?.actual_delivery_time?t.actual_delivery_time.slice(0,16):"",delivery_proof:t?.delivery_proof||"",failure_reason:t?.failure_reason||"",rescheduled_date:t?.rescheduled_date?t.rescheduled_date.slice(0,16):"",is_active:t?.is_active||"Y"},validationSchema:EDe,enableReinitialize:!0,onSubmit:async N=>{try{const C={order_id:Number(N.order_id),customer_id:Number(N.customer_id),scheduled_date:N.scheduled_date,scheduled_time_slot:N.scheduled_time_slot,assigned_vehicle_id:N.assigned_vehicle_id?Number(N.assigned_vehicle_id):void 0,assigned_driver_id:N.assigned_driver_id?Number(N.assigned_driver_id):void 0,status:N.status,priority:N.priority,delivery_instructions:N.delivery_instructions,actual_delivery_time:N.actual_delivery_time?new Date(N.actual_delivery_time).toISOString():void 0,delivery_proof:N.delivery_proof,failure_reason:N.failure_reason,rescheduled_date:N.rescheduled_date?new Date(N.rescheduled_date).toISOString():void 0,is_active:N.is_active};l&&t?await b.mutateAsync({id:t.id,...C}):await f.mutateAsync(C),h()}catch(C){console.error("Error saving delivery schedule:",C)}}}),S=N=>{const C=N.target.files?.[0];C&&m(C)},j=()=>{m(null),u.current&&(u.current.value="")},v=n;return e.jsx(it,{open:a,setOpen:h,title:l?"Edit Delivery Schedule":"Create Delivery Schedule",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:w.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsxs(_e,{name:"order_id",label:"Order",formik:w,required:!0,children:[e.jsx(Z,{value:"",children:"Select Order"}),o.map(N=>e.jsxs(Z,{value:N.id.toString(),children:["#",N.order_number," -"," ",N.customer?.name||"Unknown Customer"]},N.id))]}),e.jsx(so,{name:"customer_id",label:"Customer",formik:w,required:!0}),e.jsx(oe,{name:"scheduled_date",label:"Scheduled Date",type:"date",formik:w,required:!0}),e.jsx(oe,{name:"scheduled_time_slot",label:"Scheduled Time Slot",placeholder:"e.g., 9:00 AM - 11:00 AM",formik:w}),e.jsxs(_e,{name:"assigned_vehicle_id",label:"Assigned Vehicle",formik:w,children:[e.jsx(Z,{value:"",children:"Select Vehicle"}),i.map(N=>e.jsxs(Z,{value:N.id.toString(),children:[N.vehicle_number," - ",N.type||"Unknown Type"]},N.id))]}),e.jsxs(_e,{name:"assigned_driver_id",label:"Assigned Driver",formik:w,children:[e.jsx(Z,{value:"",children:"Select Driver"}),v.map(N=>e.jsx(Z,{value:N.id.toString(),children:N.name},N.id))]}),e.jsxs(_e,{name:"status",label:"Status",formik:w,children:[e.jsx(Z,{value:"scheduled",children:"Scheduled"}),e.jsx(Z,{value:"in_transit",children:"In Transit"}),e.jsx(Z,{value:"delivered",children:"Delivered"}),e.jsx(Z,{value:"failed",children:"Failed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"}),e.jsx(Z,{value:"rescheduled",children:"Rescheduled"}),e.jsx(Z,{value:"returned",children:"Returned"}),e.jsx(Z,{value:"refunded",children:"Refunded"})]}),e.jsxs(_e,{name:"priority",label:"Priority",formik:w,children:[e.jsx(Z,{value:"low",children:"Low"}),e.jsx(Z,{value:"medium",children:"Medium"}),e.jsx(Z,{value:"high",children:"High"}),e.jsx(Z,{value:"urgent",children:"Urgent"})]}),e.jsx(oe,{name:"actual_delivery_time",label:"Actual Delivery Time",type:"datetime-local",formik:w}),e.jsx(oe,{name:"delivery_proof",label:"Delivery Proof",placeholder:"e.g., Photo URL or reference number",formik:w}),e.jsx(oe,{name:"rescheduled_date",label:"Rescheduled Date",type:"datetime-local",formik:w}),e.jsxs(_e,{name:"is_active",label:"Active Status",formik:w,required:!0,children:[e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"delivery_instructions",label:"Delivery Instructions",placeholder:"Enter delivery instructions",formik:w,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"failure_reason",label:"Failure Reason",placeholder:"Enter failure reason if delivery failed",formik:w,multiline:!0,rows:3})}),e.jsxs(y,{className:"md:!col-span-2",children:[e.jsx(y,{className:"!mb-2",children:e.jsx("label",{className:"!text-sm !font-medium !text-gray-700",children:"Customer Signature"})}),c?e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(y,{className:"!flex !items-center !gap-3",children:e.jsxs(y,{children:[e.jsx("p",{className:"!text-sm !font-medium !text-gray-900",children:c.name}),e.jsxs("p",{className:"!text-xs !text-gray-500",children:[(c.size/1024).toFixed(1)," KB"]})]})}),e.jsx(K,{color:"error",type:"button",variant:"outlined",size:"small",onClick:j,children:"Remove"})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-4 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>u.current?.click(),children:[e.jsx("p",{className:"!text-gray-600 !mb-2",children:"Click to upload customer signature"}),e.jsx("p",{className:"!text-sm !text-gray-500",children:"PNG, JPG, PDF files only"}),e.jsx("input",{ref:u,type:"file",accept:".png,.jpg,.jpeg,.pdf",onChange:S,className:"!hidden"})]})]})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:f.isPending||b.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",loading:f.isPending||b.isPending,children:f.isPending?"Creating...":b.isPending?"Updating...":l?"Update Delivery Schedule":"Create Delivery Schedule"})]})]})})})},MDe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState("all"),[o,l]=g.useState(null),[c,m]=g.useState(!1),[u,h]=g.useState(!1),[f,b]=g.useState(1),[w]=g.useState(10),{isCreate:S,isUpdate:j,isDelete:v,isRead:N}=Qe("delivery"),{data:C,isLoading:P,error:E}=wDe({search:t,page:f,limit:w,status:a==="all"?void 0:a,priority:n==="all"?void 0:n,isActive:"Y"},{enabled:N}),{data:M}=Qr({page:1,limit:1e3}),{data:T}=QS({page:1,limit:1e3}),{data:A}=d1({page:1,limit:1e3}),L=C?.data||[],F=M?.data||[],z=T?.data||[],I=A?.data||[],Q=C?.meta?.total||0,Y=(C?.meta?.page||1)-1,B=CDe(),q=ls(),V=C?.stats?.total_deliveries??L.length,G=C?.stats?.active_deliveries??L.filter(pe=>pe.is_active==="Y").length,H=C?.stats?.inactive_deliveries??L.filter(pe=>pe.is_active==="N").length,D=C?.stats?.new_deliveries_this_month||0,R=g.useCallback(()=>{l(null),m(!0)},[]),$=g.useCallback(()=>{h(!0)},[]),W=g.useCallback(async()=>{try{const pe={search:t,status:a==="all"?void 0:a,priority:n==="all"?void 0:n,isActive:"Y"};await q.mutateAsync({tableName:"delivery_schedules",filters:pe})}catch(pe){console.error("Error exporting delivery schedules:",pe)}},[q,t,a,n]),J=g.useCallback(pe=>{l(pe),m(!0)},[]),te=g.useCallback(async pe=>{try{await B.mutateAsync(pe)}catch(Re){console.error("Error deleting delivery schedule:",Re)}},[B]),ee=g.useCallback(pe=>{s(pe),b(1)},[]),ae=pe=>{b(pe+1)},ce=pe=>({scheduled:"bg-blue-100 text-blue-800",in_transit:"bg-yellow-100 text-yellow-800",delivered:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",rescheduled:"bg-gray-100 text-gray-800",returned:"bg-gray-100 text-gray-800",refunded:"bg-gray-100 text-gray-800"})[pe]||"bg-gray-100 text-gray-800",he=pe=>({scheduled:"Scheduled",in_transit:"In Transit",delivered:"Delivered",failed:"Failed",cancelled:"Cancelled",rescheduled:"Rescheduled",returned:"Returned",refunded:"Refunded"})[pe]||pe,ne=pe=>({low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"})[pe]||"bg-gray-100 text-gray-800",xe=pe=>({low:"Low",medium:"Medium",high:"High",urgent:"Urgent"})[pe]||pe,ge=[{id:"order_customer",label:"Order & Customer",render:(pe,Re)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:Re.customer?.name||"Customer",className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(Wt,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsxs(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:["Order #",Re.order?.order_number||"N/A"]}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:Re.customer?.name||"Unknown Customer"})]})]})},{id:"scheduled_info",label:"Scheduled Info",render:(pe,Re)=>e.jsxs(y,{children:[Re.scheduled_date&&e.jsxs(y,{className:"flex items-center gap-1 mb-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx(x,{variant:"caption",className:"!text-gray-600",children:new Date(Re.scheduled_date).toLocaleDateString()})]}),Re.scheduled_time_slot&&e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ds,{className:"w-3 h-3 text-gray-400"}),e.jsx(x,{variant:"caption",className:"!text-gray-600",children:Re.scheduled_time_slot})]})]})},{id:"assignment",label:"Vehicle & Driver",render:(pe,Re)=>e.jsxs(y,{children:[Re.vehicle&&e.jsxs(y,{className:"flex items-center gap-1 mb-1",children:[e.jsx(Un,{className:"w-3 h-3 text-gray-400"}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[Re.vehicle.vehicle_number," - ",Re.vehicle.type]})]}),Re.driver&&e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Tr,{className:"w-3 h-3 text-gray-400"}),e.jsx(x,{variant:"caption",className:"!text-gray-600",children:Re.driver.name})]}),!Re.vehicle&&!Re.driver&&e.jsx(x,{variant:"caption",className:"!text-gray-400 !italic",children:"Not assigned"})]})},{id:"status_priority",label:"Status & Priority",render:(pe,Re)=>e.jsxs(y,{className:"!space-y-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ce(Re.status||"")}`,children:he(Re.status||"")}),Re.priority&&e.jsx("div",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ne(Re.priority)}`,children:xe(Re.priority)})})]})},{id:"delivery_info",label:"Delivery Info",render:(pe,Re)=>{const Se=Re.actual_delivery_time,He=Re.failure_reason,ze=Re.delivery_instructions;return!Se&&!He&&!ze?e.jsx(x,{variant:"caption",className:"!text-gray-400 !italic",children:"No info"}):e.jsxs(y,{children:[Se&&e.jsxs(y,{className:"flex items-center gap-1 mb-1",children:[e.jsx(Ds,{className:"w-3 h-3 text-green-400"}),e.jsxs(x,{variant:"caption",className:"!text-green-600",children:["Delivered:"," ",new Date(Re.actual_delivery_time).toLocaleString()]})]}),He&&e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(na,{className:"w-3 h-3 text-red-400"}),e.jsx(x,{variant:"caption",className:"!text-red-600 !truncate",children:Re.failure_reason})]}),ze&&e.jsx(x,{variant:"caption",className:"!text-gray-600 !block !mt-1",children:Re.delivery_instructions?.length&&Re.delivery_instructions?.length>30?`${Re.delivery_instructions?.substring(0,30)}...`:Re.delivery_instructions})]})}},{id:"is_active",label:"Active Status",render:pe=>e.jsx(Me,{icon:pe==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:pe==="Y"?"Active":"Inactive",size:"small",className:"w-26",color:pe==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(pe,Re)=>Ie(Re.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...j||v?[{id:"action",label:"Actions",sortable:!1,render:(pe,Re)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[j&&e.jsx(rs,{onClick:()=>J(Re),tooltip:`Edit delivery schedule for order ${Re.order?.order_number}`}),v&&e.jsx(Vt,{onClick:()=>te(Re.id),tooltip:`Delete delivery schedule for order ${Re.order?.order_number}`,itemName:`delivery schedule for order ${Re.order?.order_number}`,confirmDelete:!0})]})}]:[]],le=F;return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Delivery Scheduling"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage delivery schedules, track vehicle assignments, and monitor delivery status"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Deliveries",value:V,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:P}),e.jsx(fe,{title:"Active Deliveries",value:G,icon:e.jsx(Un,{className:"w-6 h-6"}),color:"green",isLoading:P}),e.jsx(fe,{title:"Inactive Deliveries",value:H,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:P}),e.jsx(fe,{title:"New This Month",value:D,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"purple",isLoading:P})]}),E&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load delivery schedules. Please try again."}),e.jsx(ot,{data:L,columns:ge,actions:N||S?e.jsxs("div",{className:"flex justify-between items-center flex-wrap w-full gap-2",children:[e.jsx("div",{className:"flex gap-2 items-center flex-wrap",children:N&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Delivery Schedules",value:t,onChange:ee,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:a,onChange:pe=>r(pe.target.value),className:"!min-w-40",size:"small",children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"scheduled",children:"Scheduled"}),e.jsx(Z,{value:"in_transit",children:"In Transit"}),e.jsx(Z,{value:"delivered",children:"Delivered"}),e.jsx(Z,{value:"failed",children:"Failed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"}),e.jsx(Z,{value:"rescheduled",children:"Rescheduled"}),e.jsx(Z,{value:"returned",children:"Returned"}),e.jsx(Z,{value:"refunded",children:"Refunded"})]}),e.jsxs(_e,{value:n,onChange:pe=>i(pe.target.value),className:"!min-w-40",size:"small",children:[e.jsx(Z,{value:"all",children:"All Priority"}),e.jsx(Z,{value:"low",children:"Low"}),e.jsx(Z,{value:"medium",children:"Medium"}),e.jsx(Z,{value:"high",children:"High"}),e.jsx(Z,{value:"urgent",children:"Urgent"})]})]})}),N&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{title:"Export Delivery Schedules",description:"Are you sure you want to export the current delivery schedules data to Excel? This will include all filtered results.",onConfirm:W,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:q.isPending,children:q.isPending?"Exporting...":"Export"})}),e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:$,children:"Import"})]}),S&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:R,children:"Schedule"})]}):!1,getRowId:pe=>pe.id,initialOrderBy:"scheduled_date",loading:P,totalCount:Q,page:Y,rowsPerPage:w,isPermission:N,onPageChange:ae,emptyMessage:t?`No delivery schedules found matching "${t}"`:"No delivery schedules found in the system"}),e.jsx(TDe,{selectedDeliverySchedule:o,setSelectedDeliverySchedule:l,drawerOpen:c,setDrawerOpen:m,users:le,vehicles:z,orders:I}),e.jsx(kDe,{drawerOpen:u,setDrawerOpen:h})]})},DDe=async t=>{try{return(await ie.get("/invoices",{params:t})).data}catch(s){throw s}},RDe=async t=>{try{return(await ie.get(`/invoices/${t}`)).data}catch(s){throw s}},ADe=async t=>(await ie.post("/invoices",t)).data,IDe=async(t,s)=>(await ie.put(`/invoices/${t}`,s)).data,ODe=async t=>(await ie.delete(`/invoices/${t}`)).data,Yo={all:["invoices"],lists:()=>[...Yo.all,"list"],list:t=>[...Yo.lists(),t],details:()=>[...Yo.all,"detail"],detail:t=>[...Yo.details(),t]},FDe=(t,s)=>tt({queryKey:Yo.list(t||{}),queryFn:()=>DDe(t),staleTime:300*1e3,...s}),u1=t=>tt({queryKey:Yo.detail(t),queryFn:()=>RDe(t),enabled:!!t,staleTime:300*1e3}),LDe=t=>{const s=is();return De({mutationFn:ADe,loadingMessage:"Creating invoice...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Yo.lists()})},onError:t?.onError})},$De=t=>{const s=is();return De({mutationFn:({id:a,...r})=>IDe(a,r),loadingMessage:"Updating invoice...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Yo.lists()}),s.invalidateQueries({queryKey:Yo.detail(r.id)})},onError:t?.onError})},zDe=t=>{const s=is();return De({mutationFn:ODe,loadingMessage:"Deleting invoice...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:Yo.lists()})},onError:t?.onError})},qDe=nt({file:hs().required("Please select a file to import")}),BDe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:qDe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("invoices")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"invoices",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Invoices",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple invoices. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},UDe=({open:t,onClose:s,invoice:a})=>{const{data:r,isLoading:n,error:i}=u1(a?.id||0),o=r?.data||a,l=w=>({draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",paid:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[w]||"bg-gray-100 text-gray-800",c=w=>({draft:"Draft",sent:"Sent",paid:"Paid",overdue:"Overdue",cancelled:"Cancelled"})[w]||w,m=w=>{switch(w){case"draft":return e.jsx(ks,{className:"w-4 h-4"});case"sent":return e.jsx(Ds,{className:"w-4 h-4"});case"paid":return e.jsx(Da,{className:"w-4 h-4"});case"overdue":return e.jsx(na,{className:"w-4 h-4"});case"cancelled":return e.jsx(ya,{className:"w-4 h-4"});default:return e.jsx(ks,{className:"w-4 h-4"})}},u=w=>w==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(w),h=w=>!w.due_date||!w.balance_due?!1:new Date(w.due_date)<new Date&&w.balance_due>0,f=()=>{s()};if(n)return e.jsx(it,{open:t,setOpen:s,title:"Invoice Details",size:"large",children:e.jsxs("div",{className:"!p-6 !space-y-6",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !mb-4"}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-2"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto"})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[1,2,3,4].map(w=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6",children:[e.jsx(X,{variant:"text",width:"40%",height:20,className:"!mb-4"}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(S=>e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(X,{variant:"text",width:"30%",height:16}),e.jsx(X,{variant:"text",width:"40%",height:16})]},S))})]},w))})]})});if(i||!o)return e.jsx(it,{open:t,setOpen:s,title:"Invoice Details",size:"large",children:e.jsxs("div",{className:"!p-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load invoice details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:f,className:"mt-4",children:"Back to Invoices"})]})});const b=({title:w,children:S,icon:j})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[j&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(j,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:w})]}),S]})]});return e.jsx(it,{open:t,setOpen:s,title:"Invoice Details",size:"large",children:e.jsxs("div",{className:"!p-5 mb-10 !space-y-5",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${o.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-green-400 !to-green-600 !text-white":o.status==="paid","!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":o.status==="sent","!bg-gradient-to-br !from-red-400 !to-red-600 !text-white":o.status==="overdue","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":o.status==="draft"||o.status==="cancelled"}),children:e.jsx(Gr,{className:"!w-8 !h-8"})})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:o.invoice_number}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:o.customer?.name||"Unknown Customer"}),e.jsxs("div",{className:"!flex !justify-center !gap-2 !mb-4",children:[e.jsx(Me,{icon:m(o.status||"draft"),label:c(o.status||"draft"),className:`${l(o.status||"draft")} font-semibold`,size:"small"}),h(o)&&e.jsx(Me,{label:"OVERDUE",className:"!bg-red-100 !text-red-800 !font-bold",size:"small"})]}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Total Amount"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u(o.total_amount)})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Amount Paid"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-green-600",children:u(o.amount_paid)})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Balance Due"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-red-600",children:u(o.balance_due)})]})]})]}),e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(b,{title:"Invoice Information",icon:Bn,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Invoice Date:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(o.invoice_date)})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Due Date:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(o.due_date)})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Payment Method:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !capitalize",children:o.payment_method?.replaceAll("_"," ")||"N/A"})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Order Number:"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:["#",o.parent_id]})]})]})}),e.jsx(b,{title:"Customer Information",icon:Wt,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Customer Name:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.customer?.name||"N/A"})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Customer Code:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.customer?.code||"N/A"})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Customer Type:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !capitalize",children:o.customer?.type||"N/A"})]})]})}),e.jsx(b,{title:"Amount Breakdown",icon:wr,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Subtotal:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u(o.subtotal)})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Discount:"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-green-600",children:["-",u(o.discount_amount)]})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Tax:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u(o.tax_amount)})]}),e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Shipping:"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u(o.shipping_amount)})]}),e.jsx("div",{className:"!border-t !border-gray-300 !pt-2 !mt-2",children:e.jsxs("div",{className:"!flex !justify-between",children:[e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:"Total:"}),e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:u(o.total_amount)})]})})]})}),e.jsx(b,{title:"Invoice Items",icon:Wt,children:e.jsx("div",{className:"!space-y-2",children:o.invoice_items&&o.invoice_items.length>0?o.invoice_items.map((w,S)=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !justify-between !items-start !mb-1",children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:w.product_name||`Product #${w.product_id}`}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u(w.unit_price*w.quantity-(w.discount_amount||0)||0)})]}),e.jsxs("div",{className:"!flex !justify-between !text-xs !text-gray-500",children:[e.jsxs("span",{children:["Qty: ",w.quantity,"  ",u(w.unit_price)]}),w.discount_amount&&w.discount_amount>0&&e.jsxs("span",{className:"!text-green-600",children:["Discount: -",u(w.discount_amount)]})]}),w.notes&&e.jsx(x,{variant:"caption",className:"!text-gray-600 !block !mt-1",children:w.notes})]},w.id||S)):e.jsx(x,{variant:"body2",className:"!text-gray-500 !text-center !py-4",children:"No items found"})})})]}),(o.notes||o.billing_address)&&e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[o.notes&&e.jsx(b,{title:"Notes",icon:ks,children:e.jsx(x,{variant:"body2",className:"!text-gray-700",children:o.notes})}),o.billing_address&&e.jsx(b,{title:"Billing Address",icon:Bn,children:e.jsx(x,{variant:"body2",className:"!text-gray-700",children:o.billing_address})})]}),e.jsx("div",{className:"!flex !justify-end",children:e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:f,children:"Back to Invoices"})})]})})},VDe=async t=>(await ie.get(`/invoices/${t}/items`)).data,HDe=async(t,s)=>(await ie.delete(`/invoices/${t}/items/${s}`)).data,WDe=async(t,s)=>(await ie.put(`/invoices/${t}/items`,s)).data,$x={all:["invoice-items"],lists:()=>[...$x.all,"list"],list:t=>[...$x.lists(),t]},YDe=(t,s)=>tt({queryKey:$x.list(t),queryFn:()=>VDe(t),enabled:s?.enabled!==void 0?s.enabled:!!t,staleTime:0,refetchOnWindowFocus:!1,refetchOnMount:"always",retry:1}),GDe=t=>{const s=is();return De({mutationFn:({invoiceId:a,itemId:r})=>HDe(a,r),loadingMessage:"Deleting invoice item...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:$x.list(r.invoiceId)})},onError:t?.onError})},KDe=t=>{const s=is();return De({mutationFn:({invoiceId:a,...r})=>WDe(a,r),loadingMessage:"Updating invoice items...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:$x.list(r.invoiceId)})},onError:t?.onError})},QDe=nt({product_id:Ge().required("Product is required").min(1,"Please select a valid product"),quantity:Ge().required("Quantity is required").min(.01,"Quantity must be greater than 0").max(999999,"Quantity is too large"),unit_price:Ge().required("Unit price is required").min(.01,"Unit price must be greater than 0").max(999999999,"Unit price is too large"),discount_amount:Ge().min(0,"Discount cannot be negative").max(999999999,"Discount amount is too large"),tax_amount:Ge().min(0,"Tax cannot be negative").max(999999999,"Tax amount is too large"),notes:me().max(500,"Notes cannot exceed 500 characters")}),ZDe=({open:t,onClose:s,invoiceId:a})=>{const[r,n]=g.useState([]),[i,o]=g.useState(null),[l,c]=g.useState(!1),{formatCurrency:m}=Ya(),{data:u,isLoading:h}=Cu({limit:1e3}),{data:f,isLoading:b}=u1(a),{data:w,isLoading:S}=YDe(a,{enabled:t&&!!a}),j=u?.data||[],v=f?.data,N=w?.data||[],C=h||b||S,P=KDe(),E=GDe();vt.useEffect(()=>{if(N&&N.length>0){const Y=N.map(B=>{const q=Number(B.quantity),V=Number(B.unit_price),G=Number(B.discount_amount||0),H=Number(B.tax_amount||0),D=q*V-G+H,R=B;return{id:B.id,product_id:B.product_id,product_name:R.invoice_items_products?.name||B.product_name||"",unit:R.invoice_items_products?.product_unit_of_measurement?.name||R.invoice_items_products?.product_unit_of_measurement?.symbol||R.invoice_items_products?.unit_of_measurement?.toString()||B.unit||"pcs",quantity:B.quantity.toString(),unit_price:B.unit_price.toString(),discount_amount:(B.discount_amount||0).toString(),tax_amount:(B.tax_amount||0).toString(),total_amount:B.total_amount?.toString()||D.toString(),notes:B.notes||"",product_code:R.invoice_items_products?.code||""}});n(Y)}else n([])},[N,a]),vt.useEffect(()=>{t&&(c(!1),o(null),M.resetForm())},[t,a]);const M=xt({initialValues:{product_id:"",quantity:"1",unit_price:"0",discount_amount:"0",tax_amount:"0",notes:""},validationSchema:QDe,onSubmit:async Y=>{try{const B=j.find(V=>V.id===Number(Y.product_id));if(!B){It.error("Selected product not found");return}const q={...Y,product_name:B.name,unit:B.product_unit?.name?.toString()||"pcs",product_code:B.code,product_id:Number(Y.product_id),total_amount:(Number(Y.quantity)*Number(Y.unit_price)-Number(Y.discount_amount)+Number(Y.tax_amount)).toString()};if(l&&i){const V=r.map(G=>G.id===i.id?{...q,id:i.id}:G);n(V),c(!1),o(null)}else{const V={...q,id:Date.now()};n([...r,V])}M.resetForm()}catch(B){console.error("Error managing invoice item:",B)}}}),T=Y=>{o(Y),c(!0),M.setValues({product_id:Y.product_id.toString(),quantity:Y.quantity,unit_price:Y.unit_price,discount_amount:Y.discount_amount,tax_amount:Y.tax_amount,notes:Y.notes})},A=async Y=>{try{if(Y>1e6){n(r.filter(B=>B.id!==Y));return}await E.mutateAsync({invoiceId:a,itemId:Y}),n(r.filter(B=>B.id!==Y))}catch(B){console.error("Error deleting invoice item:",B)}},L=()=>{c(!1),o(null),M.resetForm()},F=async()=>{try{const Y=r.filter(B=>B.product_id!=="").map(B=>({parent_id:a,product_id:Number(B.product_id),quantity:Number(B.quantity),unit_price:Number(B.unit_price),discount_amount:Number(B.discount_amount)||0,tax_amount:Number(B.tax_amount)||0,notes:B.notes}));await P.mutateAsync({invoiceId:a,invoiceItems:Y}),s()}catch(Y){console.error("Error saving invoice items:",Y)}},I=(()=>{const Y=r.reduce((G,H)=>G+Number(H.quantity)*Number(H.unit_price),0),B=r.reduce((G,H)=>G+Number(H.discount_amount),0),q=r.reduce((G,H)=>G+Number(H.tax_amount),0),V=Y-B+q;return{subtotal:Y,totalDiscount:B,totalTax:q,totalAmount:V}})(),Q=[{id:"product_name",label:"Product",render:(Y,B)=>e.jsxs(y,{className:"!flex !flex-col !gap-1",children:[e.jsx(x,{variant:"caption",className:"!font-medium !text-xs",children:B.product_name}),B.product_code&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs",children:B.product_code})]})},{id:"quantity",label:"Quantity",render:(Y,B)=>e.jsxs(y,{className:"!flex !gap-1",children:[e.jsx(x,{variant:"caption",className:"!text-xs !font-medium",children:B.quantity}),B.unit&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs",children:B.unit})]})},{id:"unit_price",label:"Unit Price",render:(Y,B)=>e.jsx(x,{variant:"caption",className:"!text-xs",children:m(Number(B.unit_price))})},{id:"discount_amount",label:"Discount",render:(Y,B)=>e.jsxs(x,{variant:"caption",className:"!text-red-600 !text-xs",children:["-",m(Number(B.discount_amount))]})},{id:"tax_amount",label:"Tax",render:(Y,B)=>e.jsxs(x,{variant:"caption",className:"!text-green-600 !text-xs",children:["+",m(Number(B.tax_amount))]})},{id:"total_amount",label:"Total",render:(Y,B)=>e.jsx(x,{variant:"caption",className:"!font-medium !text-xs",children:m(Number(B.total_amount||0))})},{id:"actions",label:"Actions",sortable:!1,render:(Y,B)=>e.jsxs(y,{className:"!flex !gap-1",children:[e.jsx(rs,{onClick:()=>T(B),tooltip:"Edit item",size:"small"}),e.jsx(Xt,{title:"Delete Invoice Item",description:"Are you sure you want to delete this invoice item? This action cannot be undone.",onConfirm:()=>A(B.id),children:e.jsx(Vt,{tooltip:"Delete item",size:"small"})})]})}];return e.jsx(it,{open:t,setOpen:s,title:`Invoice Items - ${v?.invoice_number||"N/A"}`,size:"large",children:e.jsx(y,{className:"!p-4",children:e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!bg-gray-100 !rounded-lg !p-3",children:[e.jsx(x,{variant:"subtitle1",className:"!font-semibold !mb-3 !text-sm",children:"Invoice Information"}),e.jsxs(y,{className:"!grid !grid-cols-2 !gap-3",children:[e.jsxs(y,{children:[e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:"Invoice Number"}),C?e.jsx(X,{variant:"text",width:"60%",height:20}):e.jsx(x,{variant:"body2",className:"!font-medium !text-sm",children:v?.invoice_number||"N/A"})]}),e.jsxs(y,{children:[e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:"Customer"}),C?e.jsx(X,{variant:"text",width:"80%",height:20}):e.jsx(x,{variant:"body2",className:"!font-medium !text-sm",children:v?.customer?.name||"N/A"})]}),e.jsxs(y,{children:[e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:"Invoice Date"}),C?e.jsx(X,{variant:"text",width:"50%",height:20}):e.jsx(x,{variant:"body2",className:"!font-medium !text-sm",children:v?.invoice_date?new Date(v.invoice_date).toLocaleDateString():"N/A"})]}),e.jsxs(y,{children:[e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:"Status"}),C?e.jsx(X,{variant:"text",width:"40%",height:20}):e.jsx(x,{variant:"body2",className:"!font-medium capitalize !text-sm",children:v?.status||"N/A"})]})]})]}),e.jsxs(y,{className:"!bg-white !border !border-gray-200 !rounded-lg !p-3",children:[e.jsx(x,{variant:"subtitle1",className:"!font-semibold !mb-3 !text-sm",children:l?"Edit Invoice Item":"Add New Item"}),e.jsxs("form",{onSubmit:M.handleSubmit,className:"!space-y-4",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsx(bo,{name:"product_id",label:"Product",formik:M,required:!0,disabled:l}),e.jsx(oe,{name:"quantity",label:"Quantity",type:"number",formik:M,required:!0,placeholder:"1"}),e.jsx(oe,{name:"unit_price",label:"Unit Price",type:"number",formik:M,required:!0,placeholder:"0.00"}),e.jsx(oe,{name:"discount_amount",label:"Discount Amount",type:"number",formik:M,placeholder:"0.00"}),e.jsx(oe,{name:"tax_amount",label:"Tax Amount",type:"number",formik:M,placeholder:"0.00"}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"notes",label:"Notes",formik:M,placeholder:"Additional notes...",multiline:!0,rows:2})})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2",children:[l&&e.jsx(K,{type:"button",variant:"outlined",onClick:L,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",startIcon:e.jsx(Wr,{}),children:l?"Update Item":"Add Item"})]})]})]}),e.jsxs(y,{children:[e.jsx(y,{className:"!flex !justify-between !items-center !mb-3",children:e.jsxs(x,{variant:"subtitle1",className:"!font-semibold !text-sm",children:["Invoice Items (",r.length,")"]})}),C?e.jsxs(y,{className:"!space-y-2",children:[e.jsx(X,{variant:"rectangular",height:40}),e.jsx(X,{variant:"rectangular",height:40}),e.jsx(X,{variant:"rectangular",height:40})]}):r.length>0?e.jsx(ot,{data:r,columns:Q,getRowId:Y=>Y.id?.toString()||"",pagination:!1,sortable:!1,emptyMessage:"No invoice items found."}):e.jsxs(y,{className:"!text-center !py-6 !text-gray-500",children:[e.jsx(Wt,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"caption",className:"!text-xs",children:"No items added yet. Add items using the form above."})]})]}),r.length>0&&e.jsxs(y,{className:"!bg-gray-50 !rounded-lg !p-3",children:[e.jsx(x,{variant:"subtitle1",className:"!font-semibold !mb-3 !text-sm",children:"Invoice Summary"}),e.jsxs(y,{className:"!space-y-2",children:[e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"caption",className:"!text-xs",children:"Subtotal:"}),e.jsx(x,{variant:"caption",className:"!text-xs",children:m(I.subtotal)})]}),e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"caption",className:"!text-xs",children:"Total Discount:"}),e.jsxs(x,{variant:"caption",className:"!text-red-600 !text-xs",children:["-",m(I.totalDiscount)]})]}),e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"caption",className:"!text-xs",children:"Total Tax:"}),e.jsxs(x,{variant:"caption",className:"!text-green-600 !text-xs",children:["+",m(I.totalTax)]})]}),e.jsx(y,{className:"!border-t !border-gray-300 !pt-2 !mt-2",children:e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"caption",className:"!font-bold !text-xs",children:"Total Amount:"}),e.jsx(x,{variant:"caption",className:"!font-bold !text-xs",children:m(I.totalAmount)})]})})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:s,children:"Close"}),e.jsx(K,{type:"button",variant:"contained",onClick:F,disabled:r.length===0||P.isPending,children:P.isPending?"Saving...":"Save Changes"})]})]})})})},XDe=async t=>{try{return(await ie.get("/payments",{params:t})).data}catch(s){throw console.error("Error fetching payments:",s),new Error(s.response?.data?.message||"Failed to fetch payments")}},JDe=async t=>{try{return(await ie.get(`/payments/${t}`)).data}catch(s){throw console.error("Error fetching payment:",s),new Error(s.response?.data?.message||"Failed to fetch payment")}},e7e=async t=>{try{return(await ie.post("/payments",t)).data}catch(s){throw console.error("Error creating payment:",s),new Error(s.response?.data?.message||"Failed to create payment")}},t7e=async(t,s)=>{try{return(await ie.put(`/payments/${t}`,s)).data}catch(a){throw console.error("Error updating payment:",a),new Error(a.response?.data?.message||"Failed to update payment")}},s7e=async t=>{try{return(await ie.delete(`/payments/${t}`)).data}catch(s){throw console.error("Error deleting payment:",s),new Error(s.response?.data?.message||"Failed to delete payment")}},a7e=async(t,s)=>{try{return(await ie.post(`/payments/${t}/lines`,s)).data}catch(a){throw console.error("Error creating payment line:",a),new Error(a.response?.data?.message||"Failed to create payment line")}},r7e=async t=>{try{return(await ie.get(`/payments/${t}/lines`)).data}catch(s){throw console.error("Error fetching payment lines:",s),new Error(s.response?.data?.message||"Failed to fetch payment lines")}},n7e=async(t,s)=>{try{return(await ie.delete(`/payments/${t}/lines/${s}`)).data}catch(a){throw console.error("Error deleting payment line:",a),new Error(a.response?.data?.message||"Failed to delete payment line")}},i7e=async(t,s)=>{try{return(await ie.post(`/payments/${t}/refunds`,s)).data}catch(a){throw console.error("Error creating payment refund:",a),new Error(a.response?.data?.message||"Failed to create payment refund")}},o7e=async t=>{try{return(await ie.get(`/payments/${t}/refunds`)).data}catch(s){throw console.error("Error fetching payment refunds:",s),new Error(s.response?.data?.message||"Failed to fetch payment refunds")}},l7e=async(t,s,a)=>{try{return(await ie.put(`/payments/${t}/refunds/${s}`,a)).data}catch(r){throw console.error("Error updating payment refund:",r),new Error(r.response?.data?.message||"Failed to update payment refund")}},c7e=async(t,s)=>{try{return(await ie.delete(`/payments/${t}/refunds/${s}`)).data}catch(a){throw console.error("Error deleting payment refund:",a),new Error(a.response?.data?.message||"Failed to delete payment refund")}},Fc={all:["payments"],lists:()=>[...Fc.all,"list"],list:t=>[...Fc.lists(),t],details:()=>[...Fc.all,"detail"],detail:t=>[...Fc.details(),t]},UF=(t,s)=>tt({queryKey:Fc.list(t),queryFn:()=>XDe(t),staleTime:300*1e3,...s}),d7e=(t,s)=>tt({queryKey:Fc.detail(t),queryFn:()=>JDe(t),enabled:!!t,staleTime:300*1e3,...s}),u7e=()=>De({mutationFn:e7e,invalidateQueries:["payments"],loadingMessage:"Creating payment..."}),m7e=()=>De({mutationFn:({id:t,...s})=>t7e(t,s),invalidateQueries:["payments"],loadingMessage:"Updating payment..."}),p7e=()=>De({mutationFn:s7e,invalidateQueries:["payments"],loadingMessage:"Deleting payment..."}),h7e=(t,s)=>tt({queryKey:[...Fc.detail(t),"lines"],queryFn:()=>r7e(t),enabled:!!t,staleTime:300*1e3,...s}),f7e=()=>De({mutationFn:({paymentId:t,...s})=>a7e(t,s),invalidateQueries:["payments"],loadingMessage:"Creating payment line..."}),x7e=()=>De({mutationFn:({paymentId:t,lineId:s})=>n7e(t,s),invalidateQueries:["payments"],loadingMessage:"Deleting payment line..."}),g7e=(t,s)=>tt({queryKey:[...Fc.detail(t),"refunds"],queryFn:()=>o7e(t),enabled:!!t,staleTime:300*1e3,...s}),y7e=()=>De({mutationFn:({paymentId:t,...s})=>i7e(t,s),invalidateQueries:["payments"],loadingMessage:"Creating payment refund..."}),b7e=()=>De({mutationFn:({paymentId:t,refundId:s,...a})=>l7e(t,s,a),invalidateQueries:["payments"],loadingMessage:"Updating payment refund..."}),v7e=()=>De({mutationFn:({paymentId:t,refundId:s})=>c7e(t,s),invalidateQueries:["payments"],loadingMessage:"Deleting payment refund..."}),j7e=async t=>(await ie.get(`/invoices/${t}/payment-lines`)).data,N7e=async(t,s)=>(await ie.delete(`/invoices/${t}/payment-lines/${s}`)).data,w7e=async(t,s)=>(await ie.put(`/invoices/${t}/payment-lines`,s)).data,zx={all:["invoice-payment-lines"],lists:()=>[...zx.all,"list"],list:t=>[...zx.lists(),t]},_7e=(t,s)=>tt({queryKey:zx.list(t),queryFn:()=>j7e(t),enabled:s?.enabled!==void 0?s.enabled:!!t,staleTime:0,refetchOnWindowFocus:!1,refetchOnMount:"always",retry:1}),S7e=t=>{const s=is();return De({mutationFn:({invoiceId:a,lineId:r})=>N7e(a,r),loadingMessage:"Deleting payment line...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:zx.list(r.invoiceId)})},onError:t?.onError})},C7e=t=>{const s=is();return De({mutationFn:({invoiceId:a,...r})=>w7e(a,r),loadingMessage:"Updating payment lines...",onSuccess:(a,r)=>{s.invalidateQueries({queryKey:zx.list(r.invoiceId)})},onError:t?.onError})},P7e=nt({payment_id:Ge().required("Payment is required").min(1,"Please select a valid payment"),amount_applied:Ge().required("Amount applied is required").min(.01,"Amount must be greater than 0").max(999999999,"Amount is too large"),notes:me().max(500,"Notes cannot exceed 500 characters")}),k7e=({open:t,onClose:s,invoiceId:a})=>{const[r,n]=g.useState([]),[i,o]=g.useState(null),[l,c]=g.useState(!1),[m,u]=g.useState(!1),{formatCurrency:h}=Ya(),{data:f,isLoading:b}=u1(a),{data:w,isLoading:S}=UF({limit:1e3}),{data:j,isLoading:v}=_7e(a,{enabled:t&&!!a}),N=f?.data,C=w?.data||[],P=j?.data||[],E=b||S||v,M=C7e(),T=S7e();vt.useEffect(()=>{if(P&&P.length>0){const H=P.map(D=>({id:D.id,payment_id:D.parent_id,invoice_id:a,invoice_number:D.invoice_number||"",invoice_date:D.invoice_date?.split("T")[0]||"",amount_applied:D.amount_applied.toString(),notes:D.notes||"",payment:D.payments?{payment_number:D.payments.payment_number,payment_date:D.payments.payment_date,method:D.payments.method,collected_by_user:D.payments.users_payments_collected_byTousers}:void 0}));n(H)}else n([])},[P,a]),vt.useEffect(()=>{t&&(c(!1),o(null),A.resetForm())},[t,a]);const A=xt({initialValues:{payment_id:"",amount_applied:"",notes:""},validationSchema:P7e,onSubmit:async H=>{try{const D=C.find(ce=>ce.id===Number(H.payment_id));if(!D){It.error("Selected payment not found");return}const R=Number(D.total_amount),$=Number(H.amount_applied);if($>R){It.error(`Amount applied (${h($)}) cannot exceed payment total (${h(R)})`);return}const W=Number(N?.total_amount||0),J=r.reduce((ce,he)=>ce+Number(he.amount_applied),0),te=l?J-Number(i?.amount_applied||0)+$:J+$;if(te>W){It.error(`Total amount applied (${h(te)}) cannot exceed invoice total (${h(W)})`);return}if(r.find(ce=>ce.payment_id===Number(H.payment_id)&&ce.id!==i?.id)){It.error("This payment has already been applied to this invoice");return}const ae={...H,payment_id:Number(H.payment_id),invoice_id:a,invoice_number:N?.invoice_number||"",invoice_date:N?.invoice_date?.split("T")[0]||"",payment:D?{payment_number:D.payment_number,payment_date:D.payment_date?.split("T")[0]||"",method:D.method,collected_by_user:D.collected_by_user}:void 0};if(l&&i){const ce=r.map(he=>he.id===i.id?{...ae,id:i.id}:he);n(ce),c(!1),o(null)}else{const ce={...ae,id:Date.now()};n([...r,ce])}A.resetForm(),u(!1),It.success(l?"Payment line updated successfully":"Payment line added successfully")}catch(D){console.error("Error managing payment line:",D),It.error("Failed to save payment line. Please try again.")}}}),L=H=>{o(H),c(!0),u(!0),A.setValues({payment_id:H.payment_id.toString(),amount_applied:H.amount_applied,notes:H.notes})},F=async H=>{try{if(H>1e6){n(r.filter(D=>D.id!==H));return}await T.mutateAsync({invoiceId:a,lineId:H}),n(r.filter(D=>D.id!==H))}catch(D){console.error("Error deleting payment line:",D)}},z=()=>{c(!1),o(null),u(!1),A.resetForm()},I=async()=>{try{const H=r.filter(W=>W.payment_id!=="");if(H.length===0){It.error("No valid payment lines to save");return}const D=H.map(W=>W.payment_id),R=new Set(D);if(D.length!==R.size){It.error("Duplicate payment lines detected. Please remove duplicates before saving.");return}const $=H.map(W=>({parent_id:Number(W.payment_id),invoice_id:a,payment_id:Number(W.payment_id),amount_applied:Number(W.amount_applied),notes:W.notes}));await M.mutateAsync({invoiceId:a,paymentLines:$}),It.success("Payment lines saved successfully"),s()}catch(H){console.error("Error saving payment lines:",H),It.error("Failed to save payment lines. Please try again.")}},Y=(()=>{const H=r.reduce((W,J)=>W+Number(J.amount_applied),0),D=Number(N?.total_amount||0),R=D-H,$=D>0?H/D*100:0;return{totalApplied:H,invoiceTotal:D,balanceDue:R,paymentPercentage:$,isFullyPaid:R<=0,isOverpaid:R<0}})(),B=()=>Y.isOverpaid?"error":Y.isFullyPaid?"success":Y.paymentPercentage>50?"warning":"default",q=()=>Y.isOverpaid?"Overpaid":Y.isFullyPaid?"Fully Paid":Y.paymentPercentage>50?"Partially Paid":"Unpaid",V=()=>Y.isOverpaid?e.jsx(na,{className:"w-4 h-4"}):Y.isFullyPaid?e.jsx(Da,{className:"w-4 h-4"}):Y.paymentPercentage>50?e.jsx(Ds,{className:"w-4 h-4"}):e.jsx(na,{className:"w-4 h-4"}),G=[{id:"payment_info",label:"Payment Info",render:(H,D)=>e.jsxs(y,{className:"!flex !flex-col",children:[e.jsx(x,{variant:"caption",className:"!font-medium !text-xs",children:D.payment?.payment_number||"N/A"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 capitalize !text-xs",children:D.payment?.method?.replaceAll("_"," ")||"N/A"})]})},{id:"payment_date",label:"Payment Date",render:(H,D)=>e.jsx(x,{variant:"caption",className:"!text-xs",children:D.payment?.payment_date?new Date(D.payment.payment_date).toLocaleDateString():"N/A"})},{id:"collected_by",label:"Collected By",render:(H,D)=>e.jsx(x,{variant:"caption",className:"!text-xs",children:D.payment?.collected_by_user?.name||"N/A"})},{id:"amount_applied",label:"Amount Applied",render:(H,D)=>e.jsx(x,{variant:"caption",className:"!font-medium !text-green-600 !text-xs",children:h(Number(D.amount_applied))})},{id:"notes",label:"Notes",render:(H,D)=>e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:D.notes||"N/A"})},{id:"actions",label:"Actions",sortable:!1,render:(H,D)=>e.jsxs(y,{className:"!flex !gap-1",children:[e.jsx(rs,{onClick:()=>L(D),tooltip:"Edit payment line",size:"small"}),e.jsx(Xt,{title:"Delete Payment Line",description:"Are you sure you want to delete this payment line? This action cannot be undone.",onConfirm:()=>F(D.id),children:e.jsx(Vt,{tooltip:"Delete payment line",size:"small"})})]})}];return e.jsx(it,{open:t,setOpen:s,title:`Payment Tracking - ${N?.invoice_number||"N/A"}`,size:"larger",children:e.jsx(y,{className:"!p-4",children:e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!bg-gray-50 !rounded-lg !p-3",children:[e.jsx(x,{variant:"subtitle1",className:"!font-semibold !mb-3 !text-sm",children:"Invoice Information"}),e.jsxs(y,{className:"!grid !grid-cols-2 !gap-3",children:[e.jsxs(y,{children:[e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:"Invoice Number"}),E?e.jsx(X,{variant:"text",width:"60%",height:20}):e.jsx(x,{variant:"body2",className:"!font-medium !text-sm",children:N?.invoice_number||"N/A"})]}),e.jsxs(y,{children:[e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:"Customer"}),E?e.jsx(X,{variant:"text",width:"80%",height:20}):e.jsx(x,{variant:"body2",className:"!font-medium !text-sm",children:N?.customer?.name||"N/A"})]}),e.jsxs(y,{children:[e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:"Invoice Date"}),E?e.jsx(X,{variant:"text",width:"50%",height:20}):e.jsx(x,{variant:"body2",className:"!font-medium !text-sm",children:N?.invoice_date?new Date(N.invoice_date).toLocaleDateString():"N/A"})]}),e.jsxs(y,{children:[e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:"Due Date"}),E?e.jsx(X,{variant:"text",width:"50%",height:20}):e.jsx(x,{variant:"body2",className:"!font-medium !text-sm",children:N?.due_date?new Date(N.due_date).toLocaleDateString():"N/A"})]})]})]}),e.jsxs(y,{className:"!bg-white !border !border-gray-200 !rounded-lg !p-3",children:[e.jsx(x,{variant:"subtitle1",className:"!font-semibold !mb-3 !text-sm",children:"Payment Summary"}),e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-4 !gap-3",children:[e.jsxs(y,{className:"!text-center !p-2 !bg-blue-50 !rounded-lg",children:[e.jsx(wr,{className:"w-6 h-6 text-blue-600 mx-auto mb-1"}),E?e.jsx(X,{variant:"text",width:"80%",height:24,className:"!mx-auto !mb-1"}):e.jsx(x,{variant:"subtitle2",className:"!font-bold !text-blue-900 !text-sm",children:h(Y.invoiceTotal)}),e.jsx(x,{variant:"caption",className:"!text-blue-700 !text-xs",children:"Invoice Total"})]}),e.jsxs(y,{className:"!text-center !p-2 !bg-green-50 !rounded-lg",children:[e.jsx(Da,{className:"w-6 h-6 text-green-600 mx-auto mb-1"}),E?e.jsx(X,{variant:"text",width:"80%",height:24,className:"!mx-auto !mb-1"}):e.jsx(x,{variant:"subtitle2",className:"!font-bold !text-green-900 !text-sm",children:h(Y.totalApplied)}),e.jsx(x,{variant:"caption",className:"!text-green-700 !text-xs",children:"Total Paid"})]}),e.jsxs(y,{className:"!text-center !p-2 !bg-orange-50 !rounded-lg",children:[e.jsx(na,{className:"w-6 h-6 text-orange-600 mx-auto mb-1"}),E?e.jsx(X,{variant:"text",width:"80%",height:24,className:"!mx-auto !mb-1"}):e.jsx(x,{variant:"subtitle2",className:"!font-bold !text-orange-900 !text-sm",children:h(Math.abs(Y.balanceDue))}),e.jsx(x,{variant:"caption",className:"!text-orange-700 !text-xs",children:Y.isOverpaid?"Overpaid":"Balance Due"})]}),e.jsxs(y,{className:"!text-center !p-2 !bg-purple-50 !rounded-lg",children:[e.jsx(vs,{className:"w-6 h-6 text-purple-600 mx-auto mb-1"}),E?e.jsx(X,{variant:"text",width:"80%",height:24,className:"!mx-auto !mb-1"}):e.jsxs(x,{variant:"subtitle2",className:"!font-bold !text-purple-900 !text-sm",children:[Y.paymentPercentage.toFixed(1),"%"]}),e.jsx(x,{variant:"caption",className:"!text-purple-700 !text-xs",children:"Paid"})]})]}),e.jsx(y,{className:"!mt-3 !flex !justify-center",children:E?e.jsx(X,{variant:"rectangular",width:100,height:24,className:"!rounded-full"}):e.jsx(Me,{label:q(),icon:V(),color:B(),className:"!font-semibold !text-xs",size:"small"})})]}),m&&e.jsxs(y,{className:"!bg-white !border !border-gray-200 !rounded-lg !p-3",children:[e.jsx(x,{variant:"subtitle1",className:"!font-semibold !mb-3 !text-sm",children:l?"Edit Payment Line":"Add Payment Line"}),e.jsxs("form",{onSubmit:A.handleSubmit,className:"!space-y-4",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs(_e,{name:"payment_id",label:"Payment",formik:A,required:!0,disabled:l,children:[e.jsx(Z,{value:"",children:"Select Payment"}),C.map(H=>e.jsxs(Z,{value:H.id,children:[H.payment_number," - $",Number(H.total_amount).toFixed(2)," (",H.method,")"]},H.id))]}),e.jsx(oe,{name:"amount_applied",label:"Amount Applied",type:"number",formik:A,required:!0,placeholder:"0.00"}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"notes",label:"Notes",formik:A,placeholder:"Payment notes...",multiline:!0,rows:2})})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:z,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",startIcon:e.jsx(Wr,{}),children:l?"Update Payment Line":"Add Payment Line"})]})]})]}),e.jsxs(y,{children:[e.jsxs(y,{className:"!flex !justify-between !items-center !mb-3",children:[e.jsxs(x,{variant:"subtitle1",className:"!font-semibold !text-sm",children:["Payment History (",r.length,")"]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Wr,{}),onClick:()=>u(!0),disabled:m,size:"small",className:"!text-xs",children:"Add Payment Line"})]}),E?e.jsxs(y,{className:"!space-y-2",children:[e.jsx(X,{variant:"rectangular",height:40}),e.jsx(X,{variant:"rectangular",height:40}),e.jsx(X,{variant:"rectangular",height:40})]}):r.length>0?e.jsx(ot,{data:r,columns:G,getRowId:H=>H.id?.toString()||"",pagination:!1,sortable:!1,emptyMessage:"No payment lines found."}):e.jsxs(y,{className:"!text-center !py-6 !text-gray-500",children:[e.jsx(_p,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"caption",className:"!text-xs",children:"No payments recorded yet. Add payment lines to track payments against this invoice."})]})]}),Y.invoiceTotal>0&&e.jsxs(y,{className:"!bg-white !border !border-gray-200 !rounded-lg !p-3",children:[e.jsx(x,{variant:"subtitle1",className:"!font-semibold !mb-3 !text-sm",children:"Payment Progress"}),e.jsx(y,{className:"!w-full !bg-gray-200 !rounded-full !h-3 !mb-2",children:E?e.jsx(X,{variant:"rectangular",height:12,className:"!rounded-full"}):e.jsx(y,{className:`!h-3 !rounded-full !transition-all !duration-300 ${Y.isOverpaid?"!bg-red-500":Y.isFullyPaid?"!bg-green-500":Y.paymentPercentage>50?"!bg-yellow-500":"!bg-blue-500"}`,style:{width:`${Math.min(Y.paymentPercentage,100)}%`}})}),E?e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mx-auto"}):e.jsxs(x,{variant:"caption",className:"!text-gray-600 !text-center !text-xs",children:[Y.paymentPercentage.toFixed(1),"% of invoice total paid"]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:s,children:"Close"}),e.jsx(K,{type:"button",variant:"contained",onClick:I,disabled:r.length===0||M.isPending,children:M.isPending?"Saving...":"Save Changes"})]})]})})})},E7e=nt({invoice_number:me().optional().max(50,"Invoice number must not exceed 50 characters"),parent_id:Ge().required("Order is required").positive("Order must be a positive number"),customer_id:Ge().required("Customer is required").positive("Customer must be a positive number"),currency_id:Ge().optional().positive("Currency must be a positive number"),invoice_date:me().required("Invoice date is required"),due_date:me().optional().test("due-date-after-invoice","Due date must be after invoice date",function(t){const{invoice_date:s}=this.parent;return!t||!s?!0:new Date(t)>=new Date(s)}),status:me().required("Status is required").oneOf(["draft","sent","paid","overdue","cancelled"],"Please select a valid status"),payment_method:me().optional().oneOf(["cash","credit","debit","check","bank_transfer","online"],"Please select a valid payment method"),subtotal:Ge().required("Subtotal is required").min(0,"Subtotal must be greater than or equal to 0"),discount_amount:Ge().optional().min(0,"Discount amount must be greater than or equal to 0"),tax_amount:Ge().optional().min(0,"Tax amount must be greater than or equal to 0"),shipping_amount:Ge().optional().min(0,"Shipping amount must be greater than or equal to 0"),amount_paid:Ge().optional().min(0,"Amount paid must be greater than or equal to 0"),balance_due:Ge().optional().min(0,"Balance due must be greater than or equal to 0"),notes:me().optional().max(500,"Notes must not exceed 500 characters"),billing_address:me().optional().max(500,"Billing address must not exceed 500 characters"),is_active:me().required("Status is required").oneOf(["Y","N"],"Status must be Active or Inactive")}),T7e=({open:t,onClose:s,invoice:a})=>{const r=!!a,[n,i]=g.useState([]),o=g.useRef(null),{data:l}=d1({limit:1e3}),{data:c}=Zl({limit:1e3}),{data:m}=u1(a?.id||0),u=l?.data||[],h=c?.data||[],f=LDe(),b=$De(),w=()=>{s(),i([]),S.resetForm(),o.current=null};g.useEffect(()=>{const A=a?.id;if(A!==o.current)if(a&&m?.data){const L=m.data.invoice_items?.map(F=>({product_id:F.product_id,quantity:F.quantity.toString(),unit_price:F.unit_price.toString(),notes:F.notes||""}))||[];i(L),o.current=A??null}else a||(i([]),o.current=null)},[a?.id,m?.data]);const S=xt({initialValues:{invoice_number:a?.invoice_number||"",parent_id:a?.parent_id||"",customer_id:a?.customer_id||"",currency_id:a?.currency_id||(h.length>0?h[0].id.toString():""),invoice_date:a?.invoice_date?a.invoice_date.split("T")[0]:"",due_date:a?.due_date?a.due_date.split("T")[0]:"",status:a?.status||"draft",payment_method:a?.payment_method||"credit",subtotal:a?.subtotal||0,total_amount:a?.total_amount||0,balance_due:a?.balance_due||0,notes:a?.notes||"",billing_address:a?.billing_address||"",is_active:a?.is_active||"Y",invoice_items:[]},validationSchema:E7e,enableReinitialize:!0,onSubmit:async A=>{try{const L={...A,invoice_date:new Date(A.invoice_date).toISOString(),parent_id:Number(A.parent_id),customer_id:Number(A.customer_id),currency_id:A.currency_id?Number(A.currency_id):void 0,due_date:A.due_date?new Date(A.due_date).toISOString():void 0,notes:A.notes,billing_address:A.billing_address,subtotal:T.subtotal,total_amount:T.total_amount,balance_due:T.balance_due,invoiceItems:n.filter(F=>F.product_id!=="").map(F=>({product_id:Number(F.product_id),quantity:Number(F.quantity),unit_price:Number(F.unit_price),notes:F.notes}))};r&&a?await b.mutateAsync({id:a.id,...L}):await f.mutateAsync(L),w()}catch(L){console.log("Error submitting invoice:",L)}}}),j=()=>{const A={product_id:"",quantity:"1",unit_price:"0",notes:""},L=[...n,A];i(L)},v=A=>{const L=n.filter((F,z)=>z!==A);i(L)},N=(A,L,F)=>{if(n[A]&&n[A][L]===F)return;const z=[...n];z[A]={...z[A],[L]:F},i(z)},C=vt.useMemo(()=>n.map((A,L)=>({...A,_index:L})),[n]),P=[{id:"product_id",label:"Product",render:(A,L)=>e.jsx(bo,{value:L.product_id,onChange:(F,z)=>N(L._index,"product_id",z?String(z.id):""),size:"small",className:"!min-w-60"})},{id:"quantity",label:"Quantity",render:(A,L)=>e.jsx(oe,{value:L.quantity,onChange:F=>N(L._index,"quantity",F.target.value),placeholder:"1",type:"number",size:"small",className:"!min-w-20"})},{id:"unit_price",label:"Unit Price",render:(A,L)=>e.jsx(oe,{value:L.unit_price,onChange:F=>N(L._index,"unit_price",F.target.value),placeholder:"0.00",type:"number",size:"small",className:"!min-w-32"})},{id:"actions",label:"Actions",sortable:!1,render:(A,L)=>e.jsx(Vt,{onClick:()=>v(L._index),tooltip:"Remove item",confirmDelete:!0,size:"medium",itemName:"invoice item"})}],E=A=>h.find(F=>F.id===Number(A))?.code||"USD",M=(A,L)=>A==null?`${L} 0.00`:new Intl.NumberFormat("en-US",{style:"currency",currency:L}).format(A),T=vt.useMemo(()=>{const A=n.reduce((z,I)=>z+Number(I.quantity)*Number(I.unit_price),0),L=A;return{subtotal:A,total_amount:L,balance_due:L}},[n]);return e.jsx(it,{open:t,setOpen:w,title:r?"Edit Invoice":"Create Invoice",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:S.handleSubmit,className:"!space-y-5 mb-10",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-5",children:[e.jsx(y,{className:"md:!col-span-2",children:e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"Invoice Information"})}),e.jsx(_e,{name:"parent_id",label:"Order",formik:S,required:!0,children:u.map(A=>e.jsxs(Z,{value:A.id,children:[A.order_number," - ",A.customer?.name]},A.id))}),e.jsx(so,{name:"customer_id",label:"Customer",formik:S,required:!0}),e.jsx(oe,{name:"invoice_date",label:"Invoice Date",type:"date",formik:S,required:!0,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(oe,{name:"due_date",label:"Due Date",type:"date",formik:S,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(_e,{name:"currency_id",label:"Currency",formik:S,required:!0,children:h.map(A=>e.jsxs(Z,{value:A.id,children:[A.code," - ",A.name]},A.id))}),e.jsxs(_e,{name:"status",label:"Status",formik:S,required:!0,children:[e.jsx(Z,{value:"draft",children:"Draft"}),e.jsx(Z,{value:"sent",children:"Sent"}),e.jsx(Z,{value:"paid",children:"Paid"}),e.jsx(Z,{value:"overdue",children:"Overdue"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]}),e.jsxs(_e,{name:"payment_method",label:"Payment Method",formik:S,required:!0,children:[e.jsx(Z,{value:"cash",children:"Cash"}),e.jsx(Z,{value:"credit",children:"Credit"}),e.jsx(Z,{value:"debit",children:"Debit"}),e.jsx(Z,{value:"check",children:"Check"}),e.jsx(Z,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(Z,{value:"online",children:"Online Payment"})]}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"billing_address",label:"Billing Address",placeholder:"Enter billing address",formik:S,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"notes",label:"Notes",placeholder:"Enter invoice notes",formik:S,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !justify-between !items-center",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"Invoice Items"}),e.jsx(K,{type:"button",variant:"outlined",startIcon:e.jsx(Wr,{}),onClick:j,size:"small",children:"Add Item"})]}),n.length>0&&e.jsx(ot,{data:C,columns:P,getRowId:A=>A._index.toString(),pagination:!1,sortable:!1,emptyMessage:"No invoice items added yet."}),n.length===0&&e.jsxs(y,{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(Wt,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:'No items added yet. Click "Add Item" to get started.'})]}),n.length>0&&e.jsxs(y,{className:"!bg-gray-50 !rounded-lg !mt-4",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-2",children:"Invoice Summary"}),e.jsx(y,{className:"!space-y-2",children:e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:"Total Amount:"}),e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:M(T.total_amount,E(S.values.currency_id))})]})})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:w,disabled:f.isPending||b.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:f.isPending||b.isPending,children:f.isPending||b.isPending?r?"Updating...":"Creating...":r?"Update":"Create"})]})]})})})},M7e=()=>{const{formatCurrency:t}=Ya(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState(null),[l,c]=g.useState(!1),[m,u]=g.useState(!1),[h,f]=g.useState(!1),[b,w]=g.useState(!1),[S,j]=g.useState(!1),[v,N]=g.useState(1),[C]=g.useState(10),{isCreate:P,isUpdate:E,isDelete:M,isRead:T}=Qe("invoice"),{data:A,isLoading:L,error:F}=FDe({search:s,page:v,limit:C,status:r==="all"?void 0:r},{enabled:T}),z=A?.data||[],I=A?.pagination?.total_count||0,Q=(A?.pagination?.current_page||1)-1,Y=zDe(),B=ls(),q=z.length,V=z.reduce((le,pe)=>le+(pe.total_amount||0),0),G=z.reduce((le,pe)=>le+(pe.amount_paid||0),0),H=z.reduce((le,pe)=>le+(pe.balance_due||0),0),D=g.useCallback(()=>{o(null),c(!0)},[]),R=g.useCallback(le=>{o(le),c(!0)},[]),$=g.useCallback(le=>{o(le),u(!0)},[]),W=g.useCallback(le=>{o(le),f(!0)},[]),J=g.useCallback(le=>{o(le),w(!0)},[]),te=g.useCallback(async le=>{try{await Y.mutateAsync(le)}catch(pe){console.error("Error deleting invoice:",pe)}},[Y]),ee=g.useCallback(le=>{a(le),N(1)},[]),ae=le=>{N(le+1)},ce=g.useCallback(async()=>{try{const le={search:s,status:r==="all"?void 0:r};await B.mutateAsync({tableName:"invoices",filters:le})}catch(le){console.error("Error exporting invoices:",le)}},[B,s,r]),he=le=>({draft:"!bg-gray-100 !text-gray-800",sent:"!bg-blue-100 !text-blue-800",paid:"!bg-green-100 !text-green-800",overdue:"!bg-red-100 !text-red-800",cancelled:"!bg-gray-100 !text-gray-800"})[le]||"!bg-gray-100 !text-gray-800",ne=le=>{switch(le){case"draft":return e.jsx(ks,{className:"w-4 h-4"});case"sent":return e.jsx(Ds,{className:"w-4 h-4"});case"paid":return e.jsx(Da,{className:"w-4 h-4"});case"overdue":return e.jsx(na,{className:"w-4 h-4"});case"cancelled":return e.jsx(ya,{className:"w-4 h-4"});default:return e.jsx(ks,{className:"w-4 h-4"})}},xe=le=>!le.due_date||!le.balance_due?!1:new Date(le.due_date)<new Date&&le.balance_due>0,ge=[{id:"invoice_number",label:"Invoice Info",render:(le,pe)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:pe.invoice_number,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(Gr,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:pe.invoice_number}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:[pe.invoice_items?.length||0," items  Order #",pe.parent_id]})]})]})},{id:"customer.name",label:"Customer",render:(le,pe)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:pe.customer?.name||"N/A"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:pe.customer?.code||"N/A"})]})},{id:"status",label:"Status",render:(le,pe)=>e.jsxs(y,{className:"flex !gap-2 items-center",children:[e.jsx(Me,{icon:ne(pe.status||"draft"),label:pe.status||"draft",size:"small",className:`!text-xs !capitalize ${he(pe.status||"draft")} !min-w-20`}),xe(pe)&&e.jsx(Me,{label:"OVERDUE",size:"small",className:"!text-xs !bg-red-100 !text-red-800 !font-bold"})]})},{id:"invoice_date",label:"Dates",render:(le,pe)=>e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center text-sm text-gray-900",children:[e.jsx(_s,{className:"w-4 h-4 text-gray-400 mr-1"}),"Invoice:"," ",pe.invoice_date?new Date(pe.invoice_date).toLocaleDateString():"N/A"]}),pe.due_date&&e.jsxs(y,{className:"flex items-center text-sm text-gray-500 mt-1",children:[e.jsx(Ds,{className:"w-4 h-4 text-gray-400 mr-1"}),"Due: ",new Date(pe.due_date).toLocaleDateString()]})]})},{id:"total_amount",label:"Amounts",render:(le,pe)=>e.jsxs(y,{children:[e.jsxs(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:["Total: ",t(pe.total_amount||0)]}),e.jsxs(x,{variant:"caption",className:"!text-green-600 !text-xs !block !mt-0.5",children:["Paid: ",t(pe.amount_paid||0)]}),pe.balance_due&&pe.balance_due>0&&e.jsxs(x,{variant:"caption",className:"!text-red-600 !text-xs !block !mt-0.5",children:["Balance: ",t(pe.balance_due||0)]})]})},{id:"payment_method",label:"Payment Method",render:(le,pe)=>e.jsx(x,{variant:"body2",className:"!text-gray-600 !capitalize",children:pe.payment_method?.replaceAll("_"," ")||"N/A"})},...T||E||M?[{id:"action",label:"Actions",sortable:!1,render:(le,pe)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[T&&e.jsxs(e.Fragment,{children:[e.jsx(Wa,{onClick:()=>$(pe),tooltip:"View invoice details",icon:e.jsx(ks,{}),color:"success"}),e.jsx(Wa,{onClick:()=>W(pe),tooltip:"Manage invoice items",icon:e.jsx(Wt,{}),color:"info"}),e.jsx(Wa,{onClick:()=>J(pe),tooltip:"Track payments",icon:e.jsx(_p,{}),color:"secondary"})]}),E&&e.jsx(rs,{onClick:()=>R(pe),tooltip:`Edit ${pe.invoice_number}`}),M&&e.jsx(Vt,{onClick:()=>te(pe.id),tooltip:`Delete ${pe.invoice_number}`,itemName:pe.invoice_number,confirmDelete:!0})]})}]:[]];return F?e.jsxs(lt,{severity:"error",className:"mb-4",children:["Error loading invoices: ",F.message]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Invoices Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage customer invoices, track payments, and monitor outstanding balances"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Invoices",value:q,icon:e.jsx(Gr,{className:"w-6 h-6"}),color:"blue",isLoading:L}),e.jsx(fe,{title:"Total Amount",value:t(V),icon:e.jsx(wr,{className:"w-6 h-6"}),color:"green",isLoading:L}),e.jsx(fe,{title:"Amount Paid",value:t(G),icon:e.jsx(Da,{className:"w-6 h-6"}),color:"blue",isLoading:L}),e.jsx(fe,{title:"Outstanding Balance",value:t(H),icon:e.jsx(na,{className:"w-6 h-6"}),color:"red",isLoading:L})]}),F&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load invoices. Please try again."}),e.jsx(ot,{data:z,columns:ge,actions:T||P?e.jsxs("div",{className:"flex justify-between gap-3 items-center flex-wrap",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:T&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Invoices...",value:s,onChange:ee,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:r,onChange:le=>n(le.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"draft",children:"Draft"}),e.jsx(Z,{value:"sent",children:"Sent"}),e.jsx(Z,{value:"paid",children:"Paid"}),e.jsx(Z,{value:"overdue",children:"Overdue"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]})]})}),T&&e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Xt,{title:"Export Invoices",description:"Are you sure you want to export the current invoices data to Excel? This will include all filtered results.",onConfirm:ce,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:B.isPending,children:B.isPending?"Exporting...":"Export"})}),e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>j(!0),children:"Import"}),P&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:D,children:"Create"})]})]}):!1,getRowId:le=>le.id,initialOrderBy:"invoice_number",loading:L,totalCount:I,page:Q,rowsPerPage:C,isPermission:T,onPageChange:ae,emptyMessage:s?`No invoices found matching "${s}"`:"No invoices found in the system"}),l&&e.jsx(T7e,{open:l,onClose:()=>c(!1),invoice:i}),m&&e.jsx(UDe,{open:m,onClose:()=>u(!1),invoice:i}),h&&e.jsx(ZDe,{open:h,onClose:()=>f(!1),invoiceId:i?.id||0},`items-management-${i?.id||0}`),b&&e.jsx(k7e,{open:b,onClose:()=>w(!1),invoiceId:i?.id||0},`payment-tracking-${i?.id||0}`),S&&e.jsx(BDe,{drawerOpen:S,setDrawerOpen:j})]})},D7e=nt({file:hs().required("Please select a file to import")}),R7e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:D7e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("orders")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"orders",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Orders",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple orders. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})};nt().shape({product_id:Ge().required("Product is required").positive("Product ID must be positive"),product_name:me().nullable(),unit:me().nullable(),quantity:Ge().required("Quantity is required").positive("Quantity must be positive").integer("Quantity must be a whole number"),unit_price:Ge().required("Unit price is required").min(0,"Unit price must be non-negative"),total_amount:Ge().min(0,"Total amount must be non-negative").nullable(),notes:me().max(500,"Notes must be at most 500 characters").nullable()});const VF=nt().shape({order_number:me().min(3,"Order number must be at least 3 characters").max(50,"Order number must be at most 50 characters").nullable(),parent_id:Ge().typeError("Customer is required").required("Customer is required").positive("Customer ID must be positive"),salesperson_id:Ge().typeError("Sales Person is required").required("Sales Person is required").positive("Sales Person ID must be positive"),currency_id:Ge().positive("Currency ID must be positive").nullable(),order_date:me().nullable(),delivery_date:me().nullable(),status:me().oneOf(["draft","pending","confirmed","processing","shipped","delivered","cancelled"],"Invalid order status").nullable(),priority:me().oneOf(["low","medium","high","urgent"],"Invalid priority").nullable(),order_type:me().oneOf(["regular","urgent","promotional","sample"],"Invalid order type").nullable(),payment_method:me().oneOf(["cash","credit","cheque","bank_transfer"],"Invalid payment method").nullable(),payment_terms:me().max(50,"Payment terms must be at most 50 characters").nullable(),subtotal:Ge().min(0,"Subtotal must be non-negative").nullable(),shipping_amount:Ge().min(0,"Shipping amount must be non-negative").nullable(),total_amount:Ge().min(0,"Total amount must be non-negative").nullable(),notes:me().max(500,"Notes must be at most 500 characters").nullable(),shipping_address:me().max(500,"Shipping address must be at most 500 characters").nullable(),approval_status:me().oneOf(["P","A","R"],"Invalid approval status").nullable(),is_active:me().oneOf(["Y","N"],"Status must be Y or N").required("Status is required"),order_items:hs().nullable()});VF.shape({order_number:me().min(3,"Order number must be at least 3 characters").max(50,"Order number must be at most 50 characters").nullable(),parent_id:Ge().typeError("Customer is required").required("Customer is required").positive("Customer ID must be positive"),salesperson_id:Ge().typeError("Salesperson is required").required("Salesperson is required").positive("Salesperson ID must be positive"),order_items:hs().nullable()});const A7e=nt().shape({product_id:Ge().required("Product selection is required. Please select a product from the dropdown.").positive("Product ID must be positive").test("is-not-zero","Product selection is required",t=>t!==0),product_name:me().nullable(),quantity:Ge().required("Quantity is required").positive("Quantity must be positive").integer("Quantity must be a whole number").min(1,"Quantity must be at least 1"),unit_price:Ge().required("Unit price is required").min(0,"Unit price must be non-negative"),notes:me().max(500,"Notes must be at most 500 characters").nullable()});nt().shape({order_items:il().of(A7e).min(1,"At least one product must be added to the order").test("has-valid-products","All items must have valid products",function(t){return!t||t.length===0?!1:t.every(s=>{const a=Number(s.product_id),r=Number(s.quantity);return s&&a&&a>0&&!isNaN(a)&&r>0&&s.product_name})})});const HF={all:["salesperson-inventory-items-dropdown"],list:(t,s)=>[...HF.all,t,s]},I7e=(t,s,a)=>tt({queryKey:HF.list(t,s),queryFn:()=>w8e(t,s),enabled:a?.enabled!==void 0?a.enabled:!!t,staleTime:60*1e3}),O7e=({salespersonId:t,name:s="product_id",label:a="Sales Item",required:r=!1,fullWidth:n=!0,size:i="small",formik:o,setValue:l,value:c,nameToSearch:m="",onChange:u,className:h,placeholder:f="Search for a product",disabled:b=!1})=>{const[w,S]=g.useState(""),[j,v]=g.useState(""),[N,C]=g.useState(""),[P,E]=g.useState(!1),[M,T]=g.useState(null),[A,L]=g.useState(!1),F=g.useRef(!1),z=o?o.values[s]:c,I=z?typeof z=="number"?z.toString():String(z).trim():"";g.useEffect(()=>{const D=setTimeout(()=>{P||(C(j),j&&L(!0))},300);return()=>clearTimeout(D)},[j,P]);const Q=g.useMemo(()=>A||w?N:I&&m&&!A?m:N,[N,m,A,I,w]),{data:Y,isLoading:B}=I7e(t,Q,{enabled:!b&&!!t}),q=g.useMemo(()=>Y?.data?Y.data:[],[Y]);g.useEffect(()=>{if(I&&q.length>0&&!M&&!F.current){F.current=!0;const D=q.find(R=>String(R.product_id)===String(I));D&&(T(D),!A&&!w&&(S(D.name),L(!0))),F.current=!1}},[I,q,M,A,w]);const V=g.useMemo(()=>{if(!I)return null;if(typeof c=="number"&&c>0){const R=q.find($=>$.product_id===c);if(R)return R}const D=q.find(R=>String(R.product_id)===I);return D||(M&&String(M.product_id)===I?M:null)},[I,q,M,c]);g.useEffect(()=>{!I&&(M||w)&&(S(""),T(null),L(!1))},[I]);const G=(D,R)=>{if(P)return;E(!0),T(R);const $=R?.product_id||0;o?(o.setFieldValue(s,$,!1),o.setFieldTouched(s,!0,!1)):l&&l($),u&&u(D,R),R?S(R.name):(S(""),C(""),v("")),setTimeout(()=>E(!1),150)},H=(D,R,$)=>{$==="input"&&(S(R),P||v(R)),$==="clear"&&(S(""),v(""),C(""),T(null),o&&o.setFieldValue(s,0))};return e.jsx(Ir,{id:`sales-items-select-${s}`,options:q,getOptionLabel:D=>D.name,loading:B,value:V,onChange:G,onInputChange:H,inputValue:w,fullWidth:n,size:i,disabled:b,className:h,isOptionEqualToValue:(D,R)=>R?typeof R=="number"?D.product_id===R:D.product_id===R.product_id:!1,filterOptions:D=>D,renderOption:(D,R)=>g.createElement(y,{component:"li",...D,key:R.id,className:"!flex !items-center !gap-2 cursor-pointer py-1 px-2 hover:!bg-gray-50"},e.jsx(ut,{src:R.name||"mkx",alt:R.name,className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{children:[e.jsx("p",{className:"!text-gray-900 !text-sm",children:R.name||""}),R.code&&e.jsx("p",{className:"!text-gray-500 !text-xs",children:R.code})]})),noOptionsText:t?N&&!B?"No items found":"Type to search items":"Select a salesperson first",loadingText:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ki,{thickness:6,size:16,color:"inherit"})," Loading items..."]}),renderInput:D=>e.jsx(mr,{...D,label:a,placeholder:f,required:r,error:o&&!!(o.touched[s]&&o.errors[s]),helperText:o&&o.touched[s]&&o.errors[s],InputProps:{...D.InputProps,endAdornment:e.jsxs(vt.Fragment,{children:[B?e.jsx(Ki,{color:"inherit",size:20}):null,D.InputProps.endAdornment]})}})})},F7e=({isOpen:t,setIsOpen:s,selectedRowIndex:a,setSelectedRowIndex:r,orderItems:n,setOrderItems:i,inventoryByProductId:o})=>{const[l,c]=vt.useState([]);vt.useEffect(()=>{if(a===null)return;const j=n[a];if(!j){c([]);return}const v=j.product_batches||[];if(v.length>0){c(v);return}const N=typeof j.product_id=="number"?j.product_id:null;if(N&&o&&o[N]&&o[N].batches.length>0){const C=o[N].batches.map(P=>({...P,quantity:P.batch_remaining_quantity||P.quantity||0}));c(C);return}c([])},[a,n,o]);const m=vt.useCallback(()=>{s(!1),c([]),r(null)},[s,r]),u=vt.useCallback(j=>{c(v=>v.filter((N,C)=>C!==j))},[]),h=vt.useCallback((j,v,N)=>{c(C=>{const P=[...C];if(j==="quantity"){const E=Number(N),M=Number.isFinite(E)&&E>=0?E:0;return P[v]={...P[v],quantity:M},P}return P[v]={...P[v],[j]:N},P})},[]),f=vt.useCallback(()=>{if(a===null)return;const j=l.filter(M=>{const T=Number(M.quantity);return Number.isFinite(T)&&T>0}),v=j.reduce((M,T)=>M+(Number(T.quantity)||0),0);if(j.length===0||v<=0){It.error("Total batch quantity must be greater than 0.");return}const N=j.findIndex(M=>{const T=(M.batch_number||"").trim(),A=(M.manufacturing_date||"").trim(),L=(M.expiry_date||"").trim(),F=Number(M.quantity);return!T||!A||!L||!Number.isFinite(F)||F<=0});if(N!==-1){It.error(`Please fill Batch Number, MFG Date, EXP Date and Quantity (> 0) for row ${N+1}.`);return}const C=new Set,P=j.findIndex(M=>{const T=`${(M.batch_number||"").trim().toLowerCase()}|${(M.lot_number||"").trim().toLowerCase()}`;return C.has(T)?!0:(C.add(T),!1)});if(P!==-1){It.error(`Duplicate batch entry found at row ${P+1}.`);return}const E=[...n];E[a]={...E[a],quantity:String(v),product_batches:l.map(M=>({...M,batch_number:(M.batch_number||"").trim(),lot_number:(M.lot_number||"").trim(),quantity:Number(M.quantity)||0,manufacturing_date:(M.manufacturing_date||"").trim(),expiry_date:(M.expiry_date||"").trim()}))},i(E),m()},[a,l,n,i,m]),b=vt.useMemo(()=>{if(a===null)return!1;const j=l.filter(P=>{const E=Number(P.quantity);return Number.isFinite(E)&&E>0}),v=j.reduce((P,E)=>P+(Number(E.quantity)||0),0);if(j.length===0||v<=0||j.some(P=>{const E=(P.batch_number||"").trim(),M=(P.manufacturing_date||"").trim(),T=(P.expiry_date||"").trim(),A=Number(P.quantity);return!E||!M||!T||!Number.isFinite(A)||A<=0}))return!1;const C=new Set;for(const P of j){const E=`${(P.batch_number||"").trim().toLowerCase()}|${(P.lot_number||"").trim().toLowerCase()}`;if(C.has(E))return!1;C.add(E)}return!0},[a,l]),w=vt.useMemo(()=>l.reduce((j,v)=>j+(Number(v.quantity)||0),0),[l]),S=vt.useMemo(()=>[{id:"batch_number",label:"Batch Number",render:(j,v)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:v.batch_number})},{id:"manufacturing_date",label:"MFG Date",render:(j,v)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:Ie(v.manufacturing_date)})},{id:"expiry_date",label:"EXP Date",render:(j,v)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:Ie(v.expiry_date)})},{id:"total_quantity",label:"Total Quantity",render:(j,v)=>e.jsx(x,{variant:"body2",className:"!text-gray-600",children:v.batch_remaining_quantity})},{id:"quantity",label:"Quantity",render:(j,v,N)=>e.jsx(oe,{type:"number",value:v.quantity,onChange:C=>{const P=Number(C.target.value),E=Number(v.batch_remaining_quantity??v.quantity??0);if(!Number.isFinite(P)){h("quantity",N,0);return}const M=P>=0?P:0,T=Number.isFinite(E)&&E>0?Math.min(M,E):M;h("quantity",N,T)},size:"small",className:"!w-40",placeholder:"Enter quantity",fullWidth:!0})}],[h,u]);return e.jsxs(Kl,{open:t,onClose:m,slotProps:{paper:{className:"!min-w-[60%] !max-w-[60%]"}},children:[e.jsxs("div",{className:"flex justify-between items-center !p-2",children:[e.jsxs("p",{className:"!font-semibold text-lg !text-gray-900",children:["Batch Information (",w,")"]}),e.jsx(Wa,{icon:e.jsx(Vr,{}),onClick:m,size:"small","aria-label":"Close dialog"})]}),e.jsx(pr,{}),e.jsx(y,{className:"!p-2 min-h-[40vh]",children:e.jsx(ot,{stickyHeader:!0,maxHeight:"50vh",columns:S,data:l,compact:!0,pagination:!1,sortable:!1,emptyMessage:"No batches in this product"})}),e.jsxs(y,{className:"!p-2 !flex !justify-end !border-t gap-2 !border-gray-300",children:[e.jsx(K,{variant:"outlined",color:"info",onClick:m,children:"Cancel"}),e.jsx(K,{variant:"contained",color:"primary",onClick:f,disabled:!b,children:"Update"})]})]})},XM={serial_number:"",quantity:1,product_id:0},L7e=({isOpen:t,setIsOpen:s,selectedRowIndex:a,setSelectedRowIndex:r,orderItems:n,setOrderItems:i,inventoryByProductId:o})=>{const[l,c]=vt.useState([]);vt.useEffect(()=>{if(!t||a===null)return;const b=n[a];if(!b)return;let w=b.product_serials||[];if(w.length===0&&o&&typeof b.product_id=="number"){const j=o[b.product_id];j&&j.serials.length>0&&(w=j.serials)}const S=w.length>0?w.map(j=>{const N=j.selected!==!1;return{...XM,...j||{},product_id:Number(b.product_id||0),quantity:1,serial_number:j?.serial_number||"",selected:N}}):[{...XM,product_id:Number(b.product_id||0),selected:!0}];c(S)},[t,a,n,o]);const m=vt.useCallback(()=>{s(!1),c([]),r(null)},[s,r]),u=vt.useCallback(b=>{c(w=>{const S=[...w],j=S[b];return S[b]={...j,selected:j.selected===!1},S})},[]),h=vt.useMemo(()=>{if(a===null)return!1;const b=l.filter(j=>j.selected!==!1);if(b.length===0)return!1;const w=b.map(j=>(j.serial_number||"").trim());if(w.some(j=>j.length===0))return!1;const S=new Set;for(const j of w){const v=j.toLowerCase();if(S.has(v))return!1;S.add(v)}return!0},[a,l]),f=vt.useCallback(()=>{if(a===null)return;const b=l.filter(C=>C.selected!==!1),w=b.map(C=>(C.serial_number||"").trim()),S=w.findIndex(C=>C.length===0);if(S!==-1){It.error(`Serial number is required for row ${S+1}.`);return}const j=new Set,v=w.findIndex(C=>{const P=C.toLowerCase();return j.has(P)?!0:(j.add(P),!1)});if(v!==-1){It.error(`Duplicate serial number found: ${w[v]}`);return}const N=[...n];N[a]={...N[a],quantity:String(b.length),product_serials:l.map(C=>({...C,serial_number:(C.serial_number||"").trim(),quantity:1}))},i(N),m()},[a,l,n,i,m]);return e.jsxs(Kl,{open:t,onClose:m,slotProps:{paper:{className:"!min-w-[40%] !max-w-[40%]"}},children:[e.jsxs("div",{className:"flex justify-between items-center !p-2",children:[e.jsxs("p",{className:"!font-semibold text-lg !text-gray-900",children:["Serial Information (",l.length,")"]}),e.jsx(Wa,{icon:e.jsx(Vr,{}),onClick:m,size:"small","aria-label":"Close dialog"})]}),e.jsx(pr,{}),e.jsx(y,{className:"!p-2 min-h-[40vh]",children:e.jsx("div",{className:"max-h-[50vh] overflow-y-auto flex flex-col gap-2",children:l.map((b,w)=>{const S=b;return e.jsx("div",{className:"flex items-center justify-between border border-gray-200 rounded px-2 py-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fo,{checked:S.selected!==!1,onChange:()=>u(w),size:"small"}),e.jsx("span",{children:b.serial_number})]})},`${b.serial_number}-${w}`)})})}),e.jsxs(y,{className:"!p-2 !flex !justify-end !border-t gap-2 !border-gray-300",children:[e.jsx(K,{variant:"outlined",color:"info",onClick:m,children:"Cancel"}),e.jsx(K,{variant:"contained",color:"primary",onClick:f,disabled:!h,children:"Update"})]})]})},$7e=({open:t,onClose:s,order:a})=>{const r=!!a,[n,i]=g.useState([]),o=g.useRef(null),l=g.useRef(""),c=g.useRef(""),[m,u]=g.useState(!1),[h,f]=g.useState(!1),[b,w]=g.useState(null),{formatCurrency:S,defaultCurrencyId:j}=Ya(),{data:v,isFetching:N}=BF(a?.id||0),C=mDe(),P=pDe(),E=xt({initialValues:{order_number:"",parent_id:0,salesperson_id:0,currency_id:j,order_date:new Date().toISOString().split("T")[0],delivery_date:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],status:"draft",priority:"medium",order_type:"regular",payment_method:"credit",payment_terms:"Net 30",subtotal:0,shipping_amount:0,total_amount:0,notes:"",shipping_address:"",approval_status:"P",is_active:"Y",order_items:[]},validationSchema:VF,onSubmit:async D=>{try{if(n?.length===0){It.error("Please add at least one item to the order before submitting.");return}for(let $=0;$<n.length;$+=1){const W=n[$];if(!W.product_id||W.product_id===0){It.error(`Item ${$+1}: Please select a product`);return}if(!W.quantity||Number(W.quantity)<=0){It.error(`Item ${$+1}: Please enter a valid quantity`);return}const J=Number(W.quantity),te=(W.tracking_type||"").toLowerCase();if(te==="batch"&&J>0){const ae=(W.product_batches||[]).filter(he=>{const ne=Number(he.quantity);return Number.isFinite(ne)&&ne>0}),ce=ae.reduce((he,ne)=>he+(Number(ne.quantity)||0),0);if(ae.length===0||ce===0){It.error(`Item ${$+1}: Please allocate batch quantities to match the ordered quantity.`);return}if(ce!==J){It.error(`Item ${$+1}: Batch quantity mismatch (${ce}/${J}).`);return}}if(te==="serial"&&J>0){const ae=(W.product_serials||[]).filter(ne=>ne.selected!==!1);if(ae.length===0){It.error(`Item ${$+1}: Please assign serial numbers to match the ordered quantity.`);return}if(ae.length!==J){It.error(`Item ${$+1}: Serial count mismatch (${ae.length}/${J}).`);return}const ce=ae.map(ne=>(ne.serial_number||"").trim().toLowerCase());if(ce.some(ne=>!ne)){It.error(`Item ${$+1}: Serial number is required for all rows.`);return}const he=new Set;for(const ne of ce){if(he.has(ne)){It.error(`Item ${$+1}: Duplicate serial number "${ne}".`);return}he.add(ne)}}}const R={...D,order_date:new Date(D.order_date).toISOString(),parent_id:Number(D.parent_id),salesperson_id:Number(D.salesperson_id),currency_id:D.currency_id?Number(D.currency_id):void 0,delivery_date:new Date(D.delivery_date).toISOString(),notes:D.notes,shipping_address:D.shipping_address,order_items:n.filter($=>typeof $.product_id=="number"&&$.product_id>0).map($=>{const W=Number($.unit_price)||0,J=Number($.quantity)||0;return{tracking_type:$.tracking_type||null,product_id:Number($.product_id),product_name:$.product_name||void 0,unit:$.unit||void 0,quantity:J,unit_price:W,notes:$.notes,product_batches:$.product_batches,product_serials:$.product_serials}})};r&&a?await P.mutateAsync({id:a.id,...R}):await C.mutateAsync(R),L()}catch(R){console.error("Error submitting order:",R)}}}),M=E.values.salesperson_id?Number(E.values.salesperson_id):0;g.useEffect(()=>{a&&t&&E.setValues({order_number:a.order_number||"",parent_id:a.parent_id||0,salesperson_id:a.salesperson_id||0,currency_id:a.currency_id||j,order_date:a.order_date||new Date().toISOString().split("T")[0],delivery_date:a.delivery_date||new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],status:a.status||"draft",priority:a.priority||"medium",order_type:a.order_type||"regular",payment_method:a.payment_method||"credit",payment_terms:a.payment_terms||"Net 30",subtotal:a.subtotal||0,shipping_amount:a.shipping_amount||0,total_amount:a.total_amount||0,notes:a.notes||"",shipping_address:a.shipping_address||"",approval_status:a.approval_status?.slice(0,1)?.toUpperCase()||"P",is_active:a.is_active||"Y",order_items:[]})},[a,t,j]);const{data:T}=KS(M,{enabled:!!M&&t}),A=g.useMemo(()=>{const D={};return T?.data&&(T.data.products||[]).forEach(W=>{const J=(W.batches||[]).map(ee=>({batch_lot_id:ee.batch_lot_id,batch_number:ee.batch_number,total_quantity:ee.total_quantity,lot_number:ee.lot_number,remaining_quantity:ee.remaining_quantity||0,manufacturing_date:ee.manufacturing_date,expiry_date:ee.expiry_date,batch_total_quantity:ee.total_quantity,batch_remaining_quantity:ee.remaining_quantity,supplier_name:ee.supplier_name,quality_grade:ee.quality_grade,days_until_expiry:ee.days_until_expiry,is_expired:ee.is_expired,is_expiring_soon:ee.is_expiring_soon,quantity:null})),te=(W.serials||[]).map(ee=>({id:ee.serial_id,product_id:W.product_id,serial_number:ee.serial_number,quantity:1}));D[W.product_id]={batches:J,serials:te}}),D},[T]),L=()=>{s(),i([]),E.resetForm(),c.current="",o.current=null,l.current=""},F=g.useMemo(()=>t&&a?.id?`order-${a.id}`:t?"new-order":"closed",[t,a?.id]);g.useEffect(()=>{if(!t){o.current!==null&&(o.current=null,l.current="",c.current="");return}const D=a?.id,R=v?.data?.id,$=D&&R&&v?.data;if($&&o.current!==D&&v.data){const W=v.data.order_items?.map(te=>({product_id:te.product_id,product_name:te.product_name||null,unit:te.unit||null,tracking_type:te.tracking_type||null,quantity:te.quantity.toString(),unit_price:te.unit_price.toString(),notes:te.notes||"",product_batches:[],product_serials:[]}))||[],J=JSON.stringify(W);l.current!==J&&(o.current=D,l.current=J,i(W))}else!$&&o.current!==null&&!D&&(o.current=null,l.current="",c.current="",i([]))},[F,v?.data?.id,t]);const z=g.useMemo(()=>JSON.stringify(n),[n]);g.useEffect(()=>{if(!t)return;const D=JSON.stringify(E.values.order_items||[]);z!==D&&c.current!==z&&(E.setFieldValue("order_items",n,!1),c.current=z)},[t,z]);const I=()=>{if(!E.values.salesperson_id){It.error("Please select a Sales Person");return}const D={product_id:0,product_name:"",unit:"",tracking_type:null,quantity:"1",unit_price:"0",notes:"",product_batches:[],product_serials:[]},R=[...n,D];i(R),E.setFieldValue("order_items",R,!1),c.current=JSON.stringify(R)},Q=D=>{const R=n.filter(($,W)=>W!==D);i(R),E.setFieldValue("order_items",R,!1),c.current=JSON.stringify(R)},Y=(D,R,$)=>{const W=[...n];W[D]={...W[D],[R]:$},i(W),E.setFieldValue("order_items",W,!1),c.current=JSON.stringify(W)},B=g.useCallback((D,R,$)=>{const W=[...n],J=$?.tracking_type||null,te=J?J.toString().toLowerCase():null,ee=te==="batch"||te==="serial";W[D]={...W[D],product_id:$?$.product_id:0,product_name:$?$.name:"",tracking_type:J,unit_price:$?String($.unit_price):"0",quantity:$&&ee?"0":W[D].quantity||"1",product_batches:[],product_serials:[]},i(W),E.setFieldValue("order_items",W),c.current=JSON.stringify(W)},[n]),q=n.map((D,R)=>({...D,_index:R})),V=[{id:"product_id",label:"Product",render:(D,R)=>e.jsx(O7e,{salespersonId:M,value:R.product_id,onChange:($,W)=>B(R._index,$,W),size:"small",placeholder:"Search for a product",label:"",disabled:!E.values.salesperson_id,className:"!min-w-72"})},{id:"tracking_type",label:"Tracking",render:(D,R)=>{const $=(R.tracking_type||"").toString().toLowerCase(),W=$==="batch"||$==="serial"?$:null;return e.jsxs(y,{className:"!flex !justify-between !items-center !min-w-52",children:[e.jsx(x,{variant:"body2",className:"!text-gray-700 !uppercase !text-xs",children:$||"none"}),W&&e.jsx(K,{type:"button",startIcon:e.jsx(U4,{}),variant:"text",size:"small",onClick:()=>{const J=R._index,te=n[J];if(!te||!te.product_id){It.error("Please select a product first");return}w(J),W==="batch"?u(!0):f(!0)},children:W==="batch"?"Select Batches":"Select Serials"})]})}},{id:"quantity",label:"Quantity",render:(D,R)=>{const $=(R.tracking_type||"").toString().toLowerCase(),W=!$||$==="none";return e.jsx(oe,{value:R.quantity,onChange:J=>Y(R._index,"quantity",J.target.value),placeholder:"1",type:"number",size:"small",className:"!min-w-20",disabled:!W})}},{id:"unit_price",label:"Unit Price",render:(D,R)=>e.jsx(oe,{value:R.unit_price,onChange:$=>Y(R._index,"unit_price",$.target.value),placeholder:"0.00",type:"number",size:"small",className:"!min-w-32"})},{id:"actions",label:"Actions",sortable:!1,render:(D,R)=>e.jsx(Vt,{onClick:()=>Q(R._index),tooltip:"Remove item",confirmDelete:!0,size:"medium",itemName:"order item"})}],H=(()=>{const D=n.reduce((W,J)=>{const te=Number(J.quantity)||0,ee=Number(J.unit_price)||0;return W+te*ee},0),R=0,$=D+R;return{subtotal:D,shipping_amount:R,total_amount:$}})();return e.jsxs(it,{open:t,setOpen:L,title:r?"Edit Order":"Create Order",size:"large",children:[e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:E.handleSubmit,className:"!space-y-5",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-5",children:[e.jsx(so,{name:"parent_id",label:"Customer",formik:E,required:!0}),e.jsx(pn,{formik:E,required:!0}),e.jsx(oe,{name:"order_date",label:"Order Date",type:"date",formik:E,required:!0,slotProps:{inputLabel:{shrink:!0}}}),e.jsx(oe,{name:"delivery_date",label:"Delivery Date",type:"date",formik:E,slotProps:{inputLabel:{shrink:!0}}}),e.jsxs(_e,{name:"status",label:"Status",formik:E,required:!0,children:[e.jsx(Z,{value:"draft",children:"Draft"}),e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"confirmed",children:"Confirmed"}),e.jsx(Z,{value:"processing",children:"Processing"}),e.jsx(Z,{value:"shipped",children:"Shipped"}),e.jsx(Z,{value:"delivered",children:"Delivered"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]}),e.jsxs(_e,{name:"priority",label:"Priority",formik:E,required:!0,children:[e.jsx(Z,{value:"low",children:"Low"}),e.jsx(Z,{value:"medium",children:"Medium"}),e.jsx(Z,{value:"high",children:"High"}),e.jsx(Z,{value:"urgent",children:"Urgent"})]}),e.jsxs(_e,{name:"order_type",label:"Order Type",formik:E,required:!0,children:[e.jsx(Z,{value:"regular",children:"Regular"}),e.jsx(Z,{value:"urgent",children:"Urgent"}),e.jsx(Z,{value:"promotional",children:"Promotional"}),e.jsx(Z,{value:"sample",children:"Sample"})]}),e.jsxs(_e,{name:"payment_method",label:"Payment Method",formik:E,required:!0,children:[e.jsx(Z,{value:"cash",children:"Cash"}),e.jsx(Z,{value:"credit",children:"Credit"}),e.jsx(Z,{value:"cheque",children:"Cheque"}),e.jsx(Z,{value:"bank_transfer",children:"Bank Transfer"})]}),e.jsx(oe,{name:"payment_terms",label:"Payment Terms",placeholder:"e.g., Net 30, COD",formik:E}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"shipping_address",label:"Shipping Address",placeholder:"Enter shipping address",formik:E,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"notes",label:"Notes",placeholder:"Enter order notes",formik:E,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !justify-between !items-center",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"Order Items"}),e.jsx(K,{type:"button",variant:"outlined",startIcon:e.jsx(Wr,{}),onClick:I,size:"small",children:"Add Item"})]}),e.jsx(ot,{data:q,columns:V,getRowId:D=>D._index.toString(),pagination:!1,loading:N||C.isPending||P.isPending,sortable:!1,emptyMessage:'No items added yet. Click "Add Item" to get started.'}),n.length>0&&e.jsx(y,{className:"!bg-gray-50 !rounded-lg !mt-4",children:e.jsxs(y,{className:"!flex !justify-between",children:[e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:"Total:"}),e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:S(H.total_amount)})]})})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:L,disabled:C.isPending||P.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:C.isPending||P.isPending,children:C.isPending||P.isPending?r?"Updating...":"Creating...":r?"Update":"Create"})]})]})}),e.jsx(F7e,{isOpen:m,setIsOpen:u,selectedRowIndex:b,setSelectedRowIndex:w,orderItems:n,setOrderItems:i,inventoryByProductId:A}),e.jsx(L7e,{isOpen:h,setIsOpen:f,selectedRowIndex:b,setSelectedRowIndex:w,orderItems:n,setOrderItems:i,quantity:b!==null&&n[b]?n[b].quantity:null,inventoryByProductId:A})]})},z7e=()=>{const t=Ws(),{formatCurrency:s}=Ya(),[a,r]=g.useState(""),[n,i]=g.useState("all"),[o,l]=g.useState(null),[c,m]=g.useState(!1),[u,h]=g.useState(!1),[f,b]=g.useState(1),[w]=g.useState(10),{isCreate:S,isUpdate:j,isDelete:v,isRead:N}=Qe("order"),{data:C,isLoading:P,error:E}=d1({search:a,page:f,limit:w,status:n==="all"?void 0:n},{enabled:N}),M=C?.data||[],T=C?.meta?.total||0,A=(C?.meta?.page||1)-1,L=hDe(),F=ls(),z=C?.stats?.total_orders||0,I=C?.stats?.active_orders||0,Q=C?.stats?.orders_this_month||0,Y=C?.stats?.inactive_orders||0,B=g.useCallback(()=>{l(null),m(!0)},[]),q=g.useCallback(ae=>{l(ae),m(!0)},[]),V=g.useCallback(async ae=>{try{await L.mutateAsync(ae)}catch(ce){console.error("Error deleting order:",ce)}},[L]),G=g.useCallback(ae=>{r(ae),b(1)},[]),H=ae=>{b(ae+1)},D=g.useCallback(async()=>{try{const ae={search:a,status:n==="all"?void 0:n};await F.mutateAsync({tableName:"orders",filters:ae})}catch(ae){console.error("Error exporting orders:",ae)}},[F,a,n]),R=ae=>({draft:"info",pending:"warning",confirmed:"success",processing:"warning",shipped:"info",delivered:"success",cancelled:"error"})[ae]||"default",$=ae=>({low:"info",medium:"warning",high:"success",urgent:"error"})[ae]||"default",W=ae=>{const ce=ae?.slice(0,1)?.toUpperCase();return{P:"warning",A:"success",R:"error"}[ce]||"default"},J=ae=>{const ce=ae?.slice(0,1)?.toUpperCase();return{P:"Pending",R:"Pending",A:"Approved"}[ce]||"Pending"},te=ae=>{switch(ae){case"draft":return e.jsx(Wt,{className:"w-4 h-4"});case"pending":return e.jsx(Ds,{className:"w-4 h-4"});case"confirmed":return e.jsx(Da,{className:"w-4 h-4"});case"processing":return e.jsx(Wt,{className:"w-4 h-4"});case"shipped":return e.jsx(Un,{className:"w-4 h-4"});case"delivered":return e.jsx(Da,{className:"w-4 h-4"});case"cancelled":return e.jsx(ya,{className:"w-4 h-4"});default:return e.jsx(Wt,{className:"w-4 h-4"})}},ee=[{id:"order_number",label:"Order Info",render:(ae,ce)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:ce.order_number,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(ks,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !cursor-pointer !hover:!text-primary-600 !transition-colors",onClick:()=>t(`/transactions/orders/${ce.id}`),children:ce.order_number}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !capitalize !text-xs !block !mt-0.5",children:[ce.order_type||"regular"," order "," ",ce.order_items?.length||0," items"]})]})]})},{id:"customer.name",label:"Customer",render:(ae,ce)=>e.jsxs(y,{className:"flex items-center !gap-2",children:[e.jsx(ut,{alt:ce.customer?.name,src:ce.customer?.profile_image||"mkx",className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:ce.customer?.name||"N/A"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:ce.customer?.code||"N/A"})]})]})},{id:"salesperson.name",label:"Sales Person",render:(ae,ce)=>e.jsxs(y,{className:"flex items-center !gap-2",children:[e.jsx(ut,{alt:ce.salesperson?.name,src:ce.salesperson?.profile_image||"mkx",className:"!rounded !bg-primary-100 !text-primary-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !leading-tight",children:ce.salesperson?.name||"N/A"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:ce.salesperson?.email||"N/A"})]})]})},{id:"status",label:"Status & Priority",render:(ae,ce)=>e.jsxs(y,{className:"flex !gap-2 items-center",children:[e.jsx(Me,{icon:te(ce.status||"draft"),label:ce.status||"draft",size:"small",variant:"outlined",className:"!text-xs !capitalize !pl-1 !justify-start",color:R(ce.status||"draft")}),e.jsx(Me,{label:(ce.priority||"medium").toUpperCase(),size:"small",variant:"outlined",className:"!text-xs !capitalize",color:$(ce.priority||"medium")})]})},{id:"order_date",label:"Dates",render:(ae,ce)=>e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center text-sm text-gray-900",children:[e.jsx(_s,{className:"w-4 h-4 text-gray-400 mr-1"}),"Order: ",ce.order_date?Ie(ce.order_date):"N/A"]}),ce.delivery_date&&e.jsxs(y,{className:"flex items-center text-sm text-gray-500 mt-1",children:[e.jsx(Un,{className:"w-4 h-4 text-gray-400 mr-1"}),"Delivery: ",Ie(ce.delivery_date)]})]})},{id:"total_amount",label:"Amount",render:(ae,ce)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:s(ce.total_amount||0)}),e.jsxs(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:["Subtotal: ",s(ce.subtotal||0)]})]})},{id:"approval",label:"Approval",render:(ae,ce)=>e.jsx(y,{children:e.jsx(Me,{label:J(ce.approval_status),variant:"outlined",size:"small",icon:ce.approval_status?.slice(0,1)?.toUpperCase()==="A"?e.jsx(Da,{className:"w-4 h-4"}):ce.approval_status?.slice(0,1)?.toUpperCase()==="R"?e.jsx(ya,{className:"w-4 h-4"}):ce.approval_status?.slice(0,1)?.toUpperCase()==="P"?e.jsx(Ds,{className:"w-4 h-4"}):e.jsx(Ds,{className:"w-4 h-4"}),className:"!capitalize !pl-0.5",color:W(ce.approval_status||"P")})})},...j||v?[{id:"action",label:"Actions",sortable:!1,render:(ae,ce)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[j&&e.jsx(rs,{onClick:()=>q(ce),tooltip:`Edit ${ce.order_number}`}),v&&e.jsx(Vt,{onClick:()=>V(ce.id),tooltip:`Delete ${ce.order_number}`,itemName:ce.order_number,confirmDelete:!0})]})}]:[]];return E?e.jsxs(lt,{severity:"error",className:"mb-4",children:["Error loading orders: ",E.message]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Order Entry"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage customer orders, track status, and process deliveries"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Orders",value:z,icon:e.jsx(lu,{className:"w-6 h-6"}),color:"blue",isLoading:P}),e.jsx(fe,{title:"Active Orders",value:I,icon:e.jsx(lu,{className:"w-6 h-6"}),color:"green",isLoading:P}),e.jsx(fe,{title:"Inactive Orders",value:Y,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:P}),e.jsx(fe,{title:"Orders This Month",value:Q,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"purple",isLoading:P})]}),E&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load orders. Please try again."}),e.jsx(ot,{data:M,columns:ee,actions:N||S?e.jsxs("div",{className:"flex justify-between gap-3 items-center flex-wrap",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:N&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Orders...",value:a,onChange:G,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:n,onChange:ae=>i(ae.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"draft",children:"Draft"}),e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"confirmed",children:"Confirmed"}),e.jsx(Z,{value:"processing",children:"Processing"}),e.jsx(Z,{value:"shipped",children:"Shipped"}),e.jsx(Z,{value:"delivered",children:"Delivered"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[N&&e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Xt,{title:"Export Orders",description:"Are you sure you want to export the current orders data to Excel? This will include all filtered results.",onConfirm:D,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:F.isPending,children:F.isPending?"Exporting...":"Export"})}),e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>h(!0),children:"Import"})]}),S&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:B,children:"Create"})]})]}):!1,getRowId:ae=>ae.id,initialOrderBy:"order_number",loading:P,totalCount:T,page:A,rowsPerPage:w,isPermission:N,onPageChange:H,emptyMessage:a?`No orders found matching "${a}"`:"No orders found in the system"}),e.jsx($7e,{open:c,onClose:()=>m(!1),order:o}),e.jsx(R7e,{drawerOpen:u,setDrawerOpen:h})]})},q7e=()=>{const{id:t}=Kr(),s=Ws(),a=t?parseInt(t,10):0,{data:r,isLoading:n,error:i}=BF(a),o=r?.data,l=N=>({draft:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",processing:"bg-purple-100 text-purple-800",shipped:"bg-indigo-100 text-indigo-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[N]||"bg-gray-100 text-gray-800",c=N=>({draft:"Draft",pending:"Pending",confirmed:"Confirmed",processing:"Processing",shipped:"Shipped",delivered:"Delivered",cancelled:"Cancelled"})[N]||N,m=N=>{switch(N){case"draft":return e.jsx(Wt,{className:"w-4 h-4"});case"pending":return e.jsx(Ds,{className:"w-4 h-4"});case"confirmed":return e.jsx(Da,{className:"w-4 h-4"});case"processing":return e.jsx(Wt,{className:"w-4 h-4"});case"shipped":return e.jsx(Un,{className:"w-4 h-4"});case"delivered":return e.jsx(Da,{className:"w-4 h-4"});case"cancelled":return e.jsx(ya,{className:"w-4 h-4"});default:return e.jsx(Wt,{className:"w-4 h-4"})}},u=N=>({low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"})[N]||"bg-gray-100 text-gray-800",h=N=>{const C=N?.slice(0,1)?.toUpperCase();return{P:"bg-yellow-100 text-yellow-800",A:"bg-green-100 text-green-800",R:"bg-red-100 text-red-800"}[C]||"bg-gray-100 text-gray-800"},f=N=>{const C=N?.slice(0,1)?.toUpperCase();return{P:"Pending",A:"Approved",R:"Rejected"}[C]||N||"N/A"},b=N=>{const C=N?.slice(0,1)?.toUpperCase();return C==="A"?e.jsx(Da,{className:"w-4 h-4"}):C==="R"?e.jsx(ya,{className:"w-4 h-4"}):e.jsx(Ds,{className:"w-4 h-4"})},w=(N,C="USD")=>N==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:C}).format(N),S=()=>{s("/transactions/orders")};if(n)return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !mb-4"}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-2"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsxs("div",{className:"!flex !justify-center !gap-2 !mb-4",children:[e.jsx(X,{variant:"rectangular",width:80,height:24}),e.jsx(X,{variant:"rectangular",width:80,height:24}),e.jsx(X,{variant:"rectangular",width:80,height:24})]}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsx(X,{variant:"rectangular",width:"100%",height:60,className:"!mb-2"}),e.jsx(X,{variant:"rectangular",width:"100%",height:60})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6",children:[e.jsx(X,{variant:"text",width:"40%",height:24,className:"!mb-4"}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4,5].map(N=>e.jsxs("div",{className:"!space-y-2",children:[e.jsx(X,{variant:"text",width:"60%",height:12}),e.jsx(X,{variant:"text",width:"80%",height:16})]},N))})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6",children:[e.jsx(X,{variant:"text",width:"40%",height:24,className:"!mb-4"}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3].map(N=>e.jsxs("div",{className:"!space-y-2",children:[e.jsx(X,{variant:"text",width:"60%",height:12}),e.jsx(X,{variant:"text",width:"80%",height:16})]},N))})]})]}),e.jsxs("div",{className:"!flex-4 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6",children:[e.jsx(X,{variant:"text",width:"30%",height:24,className:"!mb-4"}),e.jsx("div",{className:"!space-y-2",children:[1,2,3].map(N=>e.jsx(X,{variant:"rectangular",width:"100%",height:80},N))})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6",children:[e.jsx(X,{variant:"text",width:"40%",height:24,className:"!mb-4"}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4,5].map(N=>e.jsxs("div",{className:"!space-y-2",children:[e.jsx(X,{variant:"text",width:"60%",height:12}),e.jsx(X,{variant:"text",width:"80%",height:16})]},N))})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6",children:[e.jsx(X,{variant:"text",width:"30%",height:24,className:"!mb-4"}),e.jsx(X,{variant:"rectangular",width:"100%",height:100})]})]})]});if(i||!o)return e.jsxs("div",{className:"!p-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load order details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:S,className:"mt-4",children:"Back to Orders"})]});const j=o?.currency?.code||"USD",v=({title:N,children:C,icon:P})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[P&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(P,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:N})]}),C]})]});return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-green-400 !to-green-600 !text-white":o.status==="delivered","!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":o.status==="confirmed"||o.status==="processing","!bg-gradient-to-br !from-indigo-400 !to-indigo-600 !text-white":o.status==="shipped","!bg-gradient-to-br !from-red-400 !to-red-600 !text-white":o.status==="cancelled","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":o.status==="draft"||o.status==="pending"}),children:e.jsx(lu,{className:"!w-8 !h-8"})})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:o.order_number}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:o.customer?.name||"Unknown Customer"}),e.jsxs("div",{className:"!flex !justify-center !gap-2 !mb-4",children:[e.jsx(Me,{icon:m(o.status||"draft"),label:c(o.status||"draft"),className:`${l(o.status||"draft")} font-semibold`,size:"small"}),e.jsx(Me,{label:(o.priority||"medium").toUpperCase(),className:`${u(o.priority||"medium")} font-semibold`,size:"small"}),e.jsx(Me,{icon:b(o.approval_status||"P"),label:f(o.approval_status||"P"),className:`${h(o.approval_status||"P")} font-semibold`,size:"small"})]}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Total Amount"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:w(o.total_amount,j)})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Items Count"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[o.order_items?.length||0," items"]})]})]})]}),e.jsx(v,{title:"Order Information",icon:Bn,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Order Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(o.order_date)})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Delivery Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(o.delivery_date)})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Order Type"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !capitalize",children:o.order_type||"regular"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Payment Method"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !capitalize",children:o.payment_method?.replaceAll("_"," ")||"N/A"})]}),e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Payment Terms"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.payment_terms||"N/A"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Approval Status"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:f(o.approval_status||"P")})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Approved At"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.approved_at?Ie(o.approved_at):"N/A"})]})]})}),e.jsx(v,{title:"Customer Information",icon:Wt,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer Name"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.customer?.name||"N/A"})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer Code"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o.customer?.code||"N/A"})]}),e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer Type"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !capitalize",children:o.customer?.type||"N/A"})]})]})})]}),e.jsxs("div",{className:"!flex-4 flex flex-col gap-4",children:[e.jsx(v,{title:"Order Items",icon:Wt,children:e.jsx("div",{className:"!space-y-2",children:o.order_items&&o.order_items.length>0?o.order_items.map((N,C)=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !justify-between !items-start !mb-1",children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:N.product_name||`Product #${N.product_id}`}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:w(N.total_amount,j)})]}),e.jsx("div",{className:"!flex !justify-between !text-xs !text-gray-500",children:e.jsxs("span",{children:["Qty: ",N.quantity," "," ",w(N.unit_price,j),N.unit&&` (${N.unit})`]})}),Array.isArray(N.product_batches)&&N.product_batches.length>0&&e.jsxs("div",{className:"!mt-2 !text-xs !text-gray-600",children:[e.jsx("span",{className:"!font-semibold",children:"Batches:"})," ",N.product_batches.filter(P=>Number(P?.quantity||0)>0).map((P,E)=>`${P?.batch_number||P?.lot_number||`Batch ${E+1}`} (${P?.quantity})`).join(", ")||"N/A"]}),Array.isArray(N.product_serials)&&N.product_serials.length>0&&e.jsxs("div",{className:"!mt-1 !text-xs !text-gray-600",children:[e.jsx("span",{className:"!font-semibold",children:"Serials:"})," ",N.product_serials.filter(P=>P?.selected!==!1).map(P=>P?.serial_number).filter(Boolean).join(", ")||"N/A"]}),N.notes&&e.jsx(x,{variant:"caption",className:"!text-gray-600 !block !mt-1",children:N.notes})]},N.id||C)):e.jsx(x,{variant:"body2",className:"!text-gray-500 !text-center !py-4",children:"No items found"})})}),e.jsx(v,{title:"Amount Breakdown",icon:wr,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Subtotal"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:w(o.subtotal,j)})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Discount"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-green-600",children:["-",w(o.discount_amount,j)]})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Tax"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:w(o.tax_amount,j)})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Shipping"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:w(o.shipping_amount,j)})]}),e.jsx("div",{className:"!space-y-0.5 md:!col-span-2",children:e.jsxs("div",{className:"!border-t !border-gray-300 !pt-2 !mt-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Total"}),e.jsx(x,{variant:"subtitle2",className:"!font-bold",children:w(o.total_amount,j)})]})})]})}),o.notes&&e.jsx(v,{title:"Notes",icon:ks,children:e.jsx(x,{variant:"body2",className:"!text-gray-700",children:o.notes})}),o.shipping_address&&e.jsx(v,{title:"Shipping Address",icon:Bn,children:e.jsx(x,{variant:"body2",className:"!text-gray-700",children:o.shipping_address})})]})]})},B7e=nt({file:hs().required("Please select a file to import")}),U7e=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:B7e,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("payments")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"payments",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Payments",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple payments. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing payments..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},V7e=nt({customer_id:me().required("Customer is required").test("is-number","Customer must be selected",t=>t?!isNaN(Number(t))&&Number(t)>0:!1),payment_date:me().required("Payment date is required").test("is-valid-date","Please enter a valid date",t=>{if(!t)return!1;const s=new Date(t);return!isNaN(s.getTime())}),collected_by:me().required("Collected by is required").test("is-number","Collector must be selected",t=>t?!isNaN(Number(t))&&Number(t)>0:!1),method:me().required("Payment method is required").oneOf(["cash","credit","debit","cheque","bank_transfer","online"],"Please select a valid payment method"),total_amount:Ge().required("Total amount is required").min(.01,"Amount must be greater than 0").test("is-positive","Amount must be a positive number",t=>t!==void 0&&t>0),notes:me().optional().max(500,"Notes must not exceed 500 characters"),currency_id:me().optional().test("is-number","Currency must be valid",t=>t?!isNaN(Number(t))&&Number(t)>0:!0),is_active:me().required("Active status is required").oneOf(["Y","N"],"Please select a valid status"),payment_lines:il().optional().of(nt({invoice_id:Ge().required("Invoice ID is required").min(1,"Invoice ID must be valid"),amount_applied:Ge().required("Amount applied is required").min(.01,"Amount applied must be greater than 0"),notes:me().optional().max(500,"Payment line notes must not exceed 500 characters")}))}),H7e=({selectedPayment:t,setSelectedPayment:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=()=>{s(null),r(!1),b.resetForm()},o=u7e(),l=m7e(),{data:c}=Qr({limit:1e3}),{data:m}=_u(),h=m?.data?.currency_id||"",f=c?.data||[],b=xt({initialValues:{customer_id:t?.customer_id?.toString()||"",payment_date:t?.payment_date?t.payment_date.split("T")[0]:rr().format("YYYY-MM-DD"),collected_by:t?.collected_by?.toString()||"",method:t?.method||"cash",total_amount:t?.total_amount?.toString()||"",notes:t?.notes||"",currency_id:h||"",is_active:t?.is_active||"Y"},validationSchema:V7e,enableReinitialize:!0,onSubmit:async w=>{try{const S={customer_id:Number(w.customer_id),payment_date:w.payment_date||"",collected_by:Number(w.collected_by),method:w.method||"cash",total_amount:Number(w.total_amount),notes:w.notes,currency_id:Number(w.currency_id),is_active:w.is_active};n&&t?await l.mutateAsync({id:t.id,...S}):await o.mutateAsync(S),i()}catch(S){console.error("Error saving payment:",S)}}});return e.jsx(it,{open:a,setOpen:i,title:n?"Edit Payment":"Create Payment",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:b.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(so,{name:"customer_id",label:"Customer",formik:b,required:!0}),e.jsx(oe,{name:"payment_date",label:"Payment Date",type:"date",formik:b,required:!0}),e.jsx(_e,{name:"collected_by",label:"Collected By",formik:b,required:!0,children:f.map(w=>e.jsxs(Z,{value:w.id.toString(),children:[w.name," (",w.email,")"]},w.id))}),e.jsxs(_e,{name:"method",label:"Payment Method",formik:b,required:!0,children:[e.jsx(Z,{value:"cash",children:"Cash"}),e.jsx(Z,{value:"credit",children:"Credit Card"}),e.jsx(Z,{value:"debit",children:"Debit Card"}),e.jsx(Z,{value:"cheque",children:"Cheque"}),e.jsx(Z,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(Z,{value:"online",children:"Online Payment"})]}),e.jsx(oe,{name:"total_amount",label:"Total Amount",type:"number",placeholder:"Enter amount",formik:b,required:!0}),e.jsx(Ts,{name:"is_active",formik:b,required:!0,className:"col-span-2"}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"notes",label:"Notes",placeholder:"Enter notes",formik:b,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!flex !justify-end",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:i,className:"!mr-3",disabled:o.isPending||l.isPending,children:"Cancel"}),e.jsxs(K,{type:"submit",variant:"contained",disabled:o.isPending||l.isPending,children:[o.isPending||l.isPending?n?"Updating...":"Creating...":n?"Update":"Create"," "]})]})]})})})},W7e=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState(null),[l,c]=g.useState(!1),[m,u]=g.useState(!1),[h,f]=g.useState(1),[b]=g.useState(10),{isCreate:w,isUpdate:S,isDelete:j,isRead:v}=Qe("payment"),{data:N,isFetching:C,error:P}=UF({search:s,page:h,limit:b,is_active:r==="all"?void 0:r==="active"?"Y":"N"},{enabled:v}),E=N?.data||[],M=N?.pagination?.total_count||0,T=(N?.pagination?.current_page||1)-1,A=p7e(),L=ls(),F=N?.stats?.total_payments??0,z=N?.stats?.total_amount??0,I={total_payments:F,total_amount:Number(z||0),payments_this_month:N?.stats?.payments_this_month??0,amount_this_month:Number(N?.stats?.amount_this_month||0),pending_collections:N?.stats?.pending_collections??0,overdue_amount:Number(N?.stats?.overdue_amount||0)},Q=g.useCallback(()=>{o(null),c(!0)},[]),Y=g.useCallback(R=>{o(R),c(!0)},[]),B=g.useCallback(R=>{t(`/transactions/payments/${R.id}`)},[t]),q=g.useCallback(async R=>{try{await A.mutateAsync(R)}catch($){console.error("Error deleting payment:",$)}},[A]),V=g.useCallback(R=>{a(R),f(1)},[]),G=R=>{f(R+1)},H=g.useCallback(async()=>{try{const R={search:s,isActive:r==="all"?void 0:r==="active"?"Y":"N"};await L.mutateAsync({tableName:"payments",filters:R})}catch(R){console.error("Error exporting payments:",R)}},[L,s,r]),D=[{id:"payment_number",label:"Payment Number",render:(R,$)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:$.payment_number,className:"!rounded !bg-primary-100 !text-primary-500",children:e.jsx(wr,{className:"w-5 h-5"})}),e.jsxs(y,{className:"!max-w-xs",children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:$.payment_number}),$.customer?.name&&e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",title:$.customer.name,sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",maxWidth:"300px",cursor:"help"},children:$.customer.name})]})]})},{id:"payment_date",label:"Payment Date",render:(R,$)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:$.payment_date?Ie($.payment_date):e.jsx("span",{className:"italic text-gray-400",children:"No Date"})})},{id:"method",label:"Payment Method",render:(R,$)=>e.jsx(x,{variant:"body2",className:"!text-gray-900 !capitalize",children:$.method?.replaceAll("_"," ")||e.jsx("span",{className:"italic text-gray-400",children:"No Method"})})},{id:"reference_number",label:"Reference",render:(R,$)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:$.reference_number||e.jsx("span",{className:"italic text-gray-400",children:"No Reference"})})},{id:"collected_by_user",label:"Collected By",render:(R,$)=>e.jsxs(y,{className:"!flex !items-center !gap-2",children:[e.jsx(ut,{alt:$.collected_by_user?.name,className:"!w-10 !h-10 !rounded !bg-green-100 !text-green-600",children:$.collected_by_user?.name?.[0]||"?"}),e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:$.collected_by_user?.name||"Unknown"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs",children:$.collected_by_user?.email||"N/A"})]})]})},{id:"total_amount",label:"Amount",render:(R,$)=>e.jsx(x,{variant:"body2",className:"!text-gray-900",children:$.total_amount?`${$.currency?.code||""} ${$.total_amount.toFixed(2)}`:e.jsx("span",{className:"italic text-gray-400",children:"No Amount"})})},{id:"notes",label:"Notes",render:(R,$)=>e.jsx(x,{variant:"body2",className:"!text-gray-900 !max-w-xs",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:$.notes||e.jsx("span",{className:"italic text-gray-400",children:"No Notes"})})},{id:"is_active",label:"Status",render:R=>e.jsx(Me,{icon:R==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:R==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:R==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(R,$)=>Ie($.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...v||S||j?[{id:"action",label:"Actions",sortable:!1,render:(R,$)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[v&&e.jsx(Wa,{onClick:()=>B($),tooltip:`View ${$.payment_number}`,icon:e.jsx(Sn,{}),color:"success"}),S&&e.jsx(rs,{onClick:()=>Y($),tooltip:`Edit ${$.payment_number}`}),j&&e.jsx(Vt,{onClick:()=>q($.id),tooltip:`Delete ${$.payment_number}`,itemName:$.payment_number,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Payment Collection Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage payment collections, track transactions, and monitor financial records"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Payments",value:I.total_payments,icon:e.jsx(wr,{className:"w-6 h-6"}),color:"blue",isLoading:C}),e.jsx(fe,{title:"Total Amount",value:I.total_amount.toFixed(2),icon:e.jsx(wr,{className:"w-6 h-6"}),color:"emerald",isLoading:C}),e.jsx(fe,{title:"Payments This Month",value:I.payments_this_month,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:C}),e.jsx(fe,{title:"Pending Collections",value:I.pending_collections,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"orange",isLoading:C})]}),P&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load payments. Please try again."}),e.jsx(ot,{data:E,columns:D,actions:v||w?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:v&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Payments...",value:s,onChange:V,debounceMs:400,showClear:!0,className:"lg:!min-w-80"}),e.jsxs(_e,{value:r,onChange:R=>n(R.target.value),className:"!w-32",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),v&&e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx(Xt,{title:"Export Payments",description:"Are you sure you want to export the current payments data to Excel? This will include all filtered results.",onConfirm:H,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:L.isPending,children:L.isPending?"Exporting...":"Export"})}),e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>u(!0),children:"Import"}),w&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:Q,children:"Create"})]})]}):!1,getRowId:R=>R.id,initialOrderBy:"payment_number",loading:C,totalCount:M,page:T,rowsPerPage:b,isPermission:v,onPageChange:G,emptyMessage:s?`No payments found matching "${s}"`:"No payments found in the system"}),e.jsx(H7e,{selectedPayment:i,setSelectedPayment:o,drawerOpen:l,setDrawerOpen:c}),e.jsx(U7e,{drawerOpen:m,setDrawerOpen:u})]})},Y7e=nt({invoice_id:me().required("Invoice ID is required"),amount_applied:Ge().required("Amount applied is required").min(.01,"Amount must be greater than 0"),notes:me().optional()}),G7e=({paymentId:t,drawerOpen:s,setDrawerOpen:a})=>{const{formatCurrency:r}=Ya(),[n,i]=g.useState(null),{data:o,isLoading:l}=h7e(t),c=o?.data||[],m=f7e(),u=x7e(),h=()=>{i(null),f.resetForm(),a(!1)},f=xt({initialValues:{invoice_id:n?.invoice_id?.toString()||"",amount_applied:n?.amount_applied?.toString()||"",notes:n?.notes||""},validationSchema:Y7e,enableReinitialize:!0,onSubmit:async j=>{try{await m.mutateAsync({paymentId:t,invoice_id:Number(j.invoice_id),amount_applied:Number(j.amount_applied),notes:j.notes}),h()}catch(v){console.error("Error creating payment line:",v)}}}),b=async j=>{try{await u.mutateAsync({paymentId:t,lineId:j})}catch(v){console.error("Error deleting payment line:",v)}},w=c.reduce((j,v)=>j+Number(v.amount_applied||"0"),0),S=({title:j,children:v,icon:N})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-4 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-12 !h-12 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-6 !translate-x-6"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-3",children:[N&&e.jsx("div",{className:"!p-1 !w-8 !h-8 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(N,{className:"!text-primary-500 !w-4 !h-4"})}),e.jsx(x,{variant:"body1",className:"!font-semibold !text-gray-900 !text-sm",children:j})]}),v]})]});return e.jsx(it,{open:s,setOpen:h,title:"Payment Lines Management",size:"large",children:e.jsxs("div",{className:"!p-4 !space-y-4",children:[e.jsx(S,{title:"Payment Lines Summary",icon:Gr,children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx("div",{className:"!p-1.5 !bg-green-100 !rounded-lg",children:e.jsx(wr,{className:"!text-green-600 !w-4 !h-4"})}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !text-sm",children:"Total Allocated"}),e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:r(Number(w||0))})]})]}),e.jsx(Me,{label:`${c.length} lines`,color:"primary",size:"small"})]})}),e.jsx(S,{title:n?"Edit Payment Line":"Add New Payment Line",icon:Wr,children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-3",children:[e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-3 !gap-3",children:[e.jsx(oe,{name:"invoice_id",label:"Invoice ID",placeholder:"Enter invoice ID",formik:f,required:!0,type:"number"}),e.jsx(oe,{name:"amount_applied",label:"Amount Applied",placeholder:"Enter amount",formik:f,required:!0,type:"number"}),e.jsx(oe,{name:"notes",label:"Notes",placeholder:"Optional notes",formik:f})]}),e.jsxs("div",{className:"!flex !justify-end !gap-2 !mt-3",children:[e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:h,disabled:m.isPending||u.isPending,startIcon:e.jsx(An,{className:"!w-3 !h-3"}),className:"!text-xs !px-3 !py-1",children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",size:"small",disabled:m.isPending||u.isPending,loading:m.isPending,startIcon:e.jsx(Da,{className:"!w-3 !h-3"}),className:"!text-xs !px-3 !py-1",children:n?"Update Line":"Add Line"})]})]})}),e.jsx(S,{title:`Payment Lines (${c.length})`,icon:Gr,children:l?e.jsx("div",{className:"!space-y-2",children:[1,2,3].map(j=>e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"60%",height:14,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"40%",height:12})]},j))}):c.length===0?e.jsxs("div",{className:"!text-center !py-6",children:[e.jsx(Gr,{className:"!text-gray-400 !text-3xl !mx-auto !mb-2"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs",children:"No payment lines found. Add one above to allocate payment to invoices."})]}):e.jsx("div",{className:"!space-y-2",children:c.map(j=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-lg !border !border-gray-200 !relative",children:[e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !flex-col !gap-1",children:[e.jsxs(x,{variant:"caption",className:"!font-semibold !text-gray-900 !text-xs",children:["Invoice #",j.invoice_number||j.invoice_id]}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs",children:Ie(j.invoice_date)})]}),e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(x,{variant:"caption",className:"!font-semibold !text-green-600 !text-xs",children:r(Number(j.amount_applied||"0"))}),e.jsxs("div",{className:"!flex !items-center !gap-1",children:[e.jsx(K,{variant:"outlined",size:"small",onClick:()=>i(j),className:"!min-w-0 !p-1 !h-6",title:"Edit line",children:e.jsx(tA,{className:"!w-3 !h-3"})}),e.jsx(K,{variant:"outlined",size:"small",onClick:()=>b(j.id),disabled:u.isPending,className:"!min-w-0 !p-1 !h-6 !text-red-500 !border-red-200 hover:!bg-red-50",title:"Delete line",children:e.jsx(jb,{className:"!w-3 !h-3"})})]})]})]}),j.notes&&e.jsx(x,{variant:"caption",className:"!text-gray-600 !block !mt-1 !text-xs",children:j.notes})]},j.id))})}),(m.error||u.error)&&e.jsx("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-3 text-white relative overflow-hidden shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"w-4 h-4"}),e.jsx(x,{variant:"caption",className:"!text-white !text-xs",children:m.error?.message||u.error?.message||"An error occurred while managing payment lines"})]})})]})})},K7e=nt({refund_date:me().required("Refund date is required"),amount:Ge().required("Refund amount is required").min(.01,"Amount must be greater than 0"),reason:me().required("Refund reason is required"),reference_number:me().optional(),method:me().optional(),status:me().required("Status is required"),notes:me().optional()}),Q7e=({paymentId:t,drawerOpen:s,setDrawerOpen:a})=>{const[r,n]=g.useState(null),{data:i,isLoading:o}=g7e(t),l=i?.data||[],c=y7e(),m=b7e(),u=v7e(),{formatCurrency:h}=Ya(),f=()=>{n(null),b.resetForm(),a(!1)},b=xt({initialValues:{refund_date:r?.refund_date?.split("T")[0]||new Date().toISOString().split("T")[0],amount:r?.amount?.toString()||"",reason:r?.reason||"",reference_number:r?.reference_number||"",method:r?.method||"cash",status:r?.status||"initiated",notes:r?.notes||""},validationSchema:K7e,enableReinitialize:!0,onSubmit:async C=>{try{r?await m.mutateAsync({paymentId:t,refundId:r.id,refund_date:C.refund_date,amount:Number(C.amount),reason:C.reason,reference_number:C.reference_number,method:C.method,status:C.status,notes:C.notes,updatedby:1}):await c.mutateAsync({paymentId:t,refund_date:C.refund_date,amount:Number(C.amount),reason:C.reason,reference_number:C.reference_number,method:C.method,status:C.status,notes:C.notes,createdby:1,log_inst:1}),f()}catch(P){console.error("Error managing payment refund:",P)}}}),w=async C=>{try{await u.mutateAsync({paymentId:t,refundId:C})}catch(P){console.error("Error deleting payment refund:",P)}},S=C=>({completed:"bg-green-100 text-green-800",initiated:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[C]||"bg-gray-100 text-gray-800",j=C=>({completed:"Completed",initiated:"Initiated",processing:"Processing",failed:"Failed",cancelled:"Cancelled"})[C]||C,v=l.reduce((C,P)=>C+(P.amount||0),0),N=({title:C,children:P,icon:E})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-4 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-12 !h-12 !bg-gradient-to-br !from-blue-100 !to-purple-100 !rounded-full !-translate-y-6 !translate-x-6"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-3",children:[E&&e.jsx("div",{className:"!p-1 !w-8 !h-8 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(E,{className:"!text-primary-500 !w-4 !h-4"})}),e.jsx(x,{variant:"body1",className:"!font-semibold !text-gray-900 !text-sm",children:C})]}),P]})]});return e.jsx(it,{open:s,setOpen:f,title:"Payment Refunds Management",size:"large",children:e.jsxs("div",{className:"!p-4 !space-y-4",children:[e.jsx(N,{title:"Payment Refunds Summary",icon:ql,children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx("div",{className:"!p-1.5 !bg-red-100 !rounded-lg",children:e.jsx(wr,{className:"!text-red-600 !w-4 !h-4"})}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !text-sm",children:"Total Refunded"}),e.jsx(x,{variant:"caption",className:"!text-gray-600 !text-xs",children:h(Number(v||"0"))})]})]}),e.jsx(Me,{label:`${l.length} refunds`,color:"primary",size:"small"})]})}),e.jsx(N,{title:r?"Edit Payment Refund":"Add New Payment Refund",icon:Wr,children:e.jsxs("form",{onSubmit:b.handleSubmit,className:"!space-y-4",children:[e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsx(oe,{name:"refund_date",label:"Refund Date",type:"date",formik:b,required:!0}),e.jsx(oe,{name:"amount",label:"Refund Amount",placeholder:"Enter amount",formik:b,required:!0,type:"number"}),e.jsx(oe,{name:"reason",label:"Refund Reason",placeholder:"Enter reason for refund",formik:b,required:!0}),e.jsx(oe,{name:"reference_number",label:"Reference Number",placeholder:"Optional reference number",formik:b}),e.jsxs(_e,{name:"method",label:"Refund Method",formik:b,children:[e.jsx(Z,{value:"cash",children:"Cash"}),e.jsx(Z,{value:"credit",children:"Credit Card"}),e.jsx(Z,{value:"debit",children:"Debit Card"}),e.jsx(Z,{value:"check",children:"Check"}),e.jsx(Z,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(Z,{value:"online",children:"Online Payment"})]}),e.jsxs(_e,{name:"status",label:"Refund Status",formik:b,required:!0,children:[e.jsx(Z,{value:"initiated",children:"Initiated"}),e.jsx(Z,{value:"processing",children:"Processing"}),e.jsx(Z,{value:"completed",children:"Completed"}),e.jsx(Z,{value:"failed",children:"Failed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]})]}),e.jsx(oe,{name:"notes",label:"Notes",placeholder:"Additional notes",formik:b,multiline:!0,rows:3}),e.jsxs("div",{className:"!flex !justify-end !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:f,disabled:c.isPending||m.isPending||u.isPending,startIcon:e.jsx(An,{}),children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",disabled:c.isPending||m.isPending||u.isPending,loading:c.isPending||m.isPending,startIcon:e.jsx(Da,{}),children:r?"Update Refund":"Add Refund"})]})]})}),e.jsx(N,{title:`Payment Refunds (${l.length})`,icon:ql,children:o?e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(C=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-2"}),e.jsx(X,{variant:"text",width:"40%",height:14})]},C))}):l.length===0?e.jsxs("div",{className:"!text-center !py-8",children:[e.jsx(ql,{className:"!text-gray-400 !text-4xl !mx-auto !mb-2"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No payment refunds found. Add one above to process a refund."})]}):e.jsx("div",{className:"!space-y-3",children:l.map(C=>e.jsxs("div",{className:"!p-4 !bg-gray-50 !rounded-lg !border !border-gray-200 !relative",children:[e.jsxs("div",{className:"!flex !items-center !justify-between !mb-2",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:C.reason}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:Ie(C.refund_date)})]}),e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-red-600",children:h(Number(C.amount||"0"))}),e.jsxs("div",{className:"!flex !items-center !gap-1",children:[e.jsx(K,{variant:"outlined",size:"small",onClick:()=>n(C),className:"!min-w-0 !p-1",title:"Edit refund",children:e.jsx(tA,{className:"!w-4 !h-4"})}),e.jsx(K,{variant:"outlined",size:"small",onClick:()=>w(C.id),disabled:u.isPending,className:"!min-w-0 !p-1 !text-red-500 !border-red-200 hover:!bg-red-50",title:"Delete refund",children:e.jsx(jb,{className:"!w-4 !h-4"})})]})]})]}),e.jsxs("div",{className:"!flex !items-center !justify-between !mb-2",children:[e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(_p,{className:"!w-4 !h-4 !text-gray-400"}),e.jsx(x,{variant:"caption",className:"!text-gray-600 !capitalize",children:C.method||"N/A"})]}),e.jsx(Me,{label:j(C.status||""),className:`${S(C.status||"")} font-semibold`,size:"small"})]}),C.reference_number&&e.jsxs(x,{variant:"caption",className:"!text-gray-600 !font-mono !block",children:["Ref: ",C.reference_number]}),C.notes&&e.jsx(x,{variant:"caption",className:"!text-gray-600 !block !mt-2",children:C.notes})]},C.id))})}),(c.error||m.error||u.error)&&e.jsx("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-4 text-white relative overflow-hidden shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"caption",className:"!text-white !text-xs",children:c.error?.message||m.error?.message||u.error?.message||"An error occurred while managing payment refunds"})]})})]})})},Z7e=()=>{const{id:t}=Kr(),s=Ws(),[a,r]=g.useState(!1),[n,i]=g.useState(!1),{formatCurrency:o}=Ya(),{data:l,isLoading:c,error:m}=d7e(Number(t)),u=l?.data,h=j=>({completed:"bg-green-100 text-green-800",paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"})[j]||"bg-gray-100 text-gray-800",f=j=>({completed:"Completed",paid:"Paid",pending:"Pending",processing:"Processing",failed:"Failed",cancelled:"Cancelled",active:"Active",inactive:"Inactive"})[j]||j,b=j=>{switch(j?.toLowerCase()){case"cash":return e.jsx(wr,{className:"w-4 h-4"});case"credit":case"debit":return e.jsx(_p,{className:"w-4 h-4"});case"bank_transfer":return e.jsx(ql,{className:"w-4 h-4"});case"online":return e.jsx(Gr,{className:"w-4 h-4"});default:return e.jsx(wr,{className:"w-4 h-4"})}},w=()=>{s("/transactions/payments")};if(c)return e.jsxs("div",{className:"!flex !items-start !gap-4",children:[e.jsxs("div",{className:"!flex-2 !flex !flex-col !gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"!absolute !top-3 !right-3",children:e.jsx(X,{variant:"circular",width:10,height:10,className:"!bg-green-200"})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !border-3 !border-white"})}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-green-50"}),e.jsxs("div",{className:"!space-y-2 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"30%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"60%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"40%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"70%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"25%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:14})]})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:140,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4].map(j=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${40+j*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+j*6}%`,height:16}),j===1&&e.jsx(X,{variant:"text",width:"50%",height:12,className:"!mt-1"})]},j))})]})]})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsxs("div",{className:"!flex !items-center !justify-between !mb-4",children:[e.jsx(X,{variant:"text",width:120,height:14}),e.jsx(X,{variant:"rectangular",width:100,height:32,className:"!rounded"})]}),e.jsx("div",{className:"!space-y-3",children:[1,2].map(j=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !items-center !justify-between !mb-2",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"40%",height:12})]}),e.jsx(X,{variant:"text",width:80,height:16,className:"!text-right"})]}),e.jsx(X,{variant:"text",width:"70%",height:12,className:"!mt-1"})]},j))})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:150,height:20})]}),e.jsxs("div",{className:"!flex !items-center !justify-between !mb-4",children:[e.jsx(X,{variant:"text",width:140,height:14}),e.jsx(X,{variant:"rectangular",width:100,height:32,className:"!rounded"})]}),e.jsx("div",{className:"!space-y-3",children:[1].map(j=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !items-center !justify-between !mb-2",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"70%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:12})]}),e.jsxs("div",{className:"!text-right",children:[e.jsx(X,{variant:"text",width:80,height:16,className:"!mb-1"}),e.jsx(X,{variant:"rectangular",width:60,height:20,className:"!rounded-full"})]})]}),e.jsxs("div",{className:"!flex !items-center !justify-between !text-xs",children:[e.jsx(X,{variant:"text",width:"30%",height:10}),e.jsx(X,{variant:"text",width:"40%",height:10})]})]},j))})]})]})]})]});if(m||!u)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load payment details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:w,className:"mt-4",children:"Back to Payments"})]});const S=({title:j,children:v,icon:N})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[N&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(N,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:j})]}),v]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${u.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-green-400 !to-green-600 !text-white":u.is_active==="Y","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":u.is_active!=="Y"}),children:e.jsx(wr,{className:"!w-8 !h-8"})})}),e.jsxs(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:["Payment #",u.payment_number]}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:u.customer?.name||"Unknown Customer"}),e.jsx(Me,{label:f(u.is_active==="Y"?"active":"inactive"),className:`${h(u.is_active==="Y"?"active":"inactive")} font-semibold`,size:"small"}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Amount"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:o(u.total_amount||0)})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Payment Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u.payment_date?Ie(u.payment_date):"Not specified"})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Method"}),e.jsx(x,{variant:"body2",className:"!font-semibold !capitalize !text-gray-900",children:u.method?.replaceAll("_"," ")})]})]})]}),e.jsx(S,{title:"Payment Information",icon:Bn,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u.customer?.name||"Unknown Customer"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:u.customer?.code})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Collected By"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u.collected_by_user?.name||"Unknown User"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:u.collected_by_user?.email})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Payment Method"}),e.jsxs("div",{className:"!flex !items-center !gap-2 !mt-1",children:[b(u.method),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !capitalize",children:u.method?.replaceAll("_"," ")})]})]}),u.currency&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Currency"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[u.currency.name," (",u.currency.code,")"]})]}),u.reference_number&&e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Reference Number"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !font-mono",children:u.reference_number})]}),u.notes&&e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Notes"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:u.notes})]})]})})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[e.jsxs(S,{title:"Payment Lines (Invoice Allocations)",icon:Gr,children:[e.jsxs("div",{className:"!flex !items-center !justify-between !mb-4",children:[e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:[u.payment_lines?.length||0," lines allocated"]}),e.jsx(K,{variant:"outlined",size:"small",startIcon:e.jsx(Wr,{}),onClick:()=>r(!0),children:"Manage Lines"})]}),u.payment_lines&&u.payment_lines.length>0?e.jsx("div",{className:"!space-y-2",children:u.payment_lines.map((j,v)=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:j.invoice_number||`Invoice #${j.invoice_id}`}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:Ie(j.invoice_date)})]}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-green-600",children:o(j.amount_applied?.toFixed(2))})]}),j.notes&&e.jsx(x,{variant:"caption",className:"!text-gray-600 !mt-1 !block",children:j.notes})]},j.id||v))}):e.jsxs("div",{className:"!text-center !py-8",children:[e.jsx(Gr,{className:"!text-gray-400 !text-4xl !mx-auto !mb-2"}),e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-4",children:'No payment lines found. Click "Manage Lines" to allocate this payment to invoices.'}),e.jsx(K,{variant:"contained",startIcon:e.jsx(Wr,{}),onClick:()=>r(!0),children:"Add Payment Line"})]})]}),e.jsxs(S,{title:"Payment Refunds",icon:ql,children:[e.jsxs("div",{className:"!flex !items-center !justify-between !mb-4",children:[e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:[u.payment_refunds?.length||0," refunds processed"]}),e.jsx(K,{variant:"outlined",size:"small",startIcon:e.jsx(Wr,{}),onClick:()=>i(!0),children:"Manage Refunds"})]}),u.payment_refunds&&u.payment_refunds.length>0?e.jsx("div",{className:"!space-y-2",children:u.payment_refunds.map((j,v)=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs("div",{className:"!flex !items-center !justify-between !mb-2",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:j.reason}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:Ie(j.refund_date)})]}),e.jsxs("div",{className:"!text-right",children:[e.jsxs(x,{variant:"body2",className:"!font-semibold !text-red-600",children:["$",j.amount?.toFixed(2)]}),e.jsx(Me,{label:f(j.status||""),className:`${h(j.status||"")} font-semibold`,size:"small"})]})]}),e.jsxs("div",{className:"!flex !items-center !justify-between !text-xs !text-gray-500",children:[e.jsx("span",{className:"!capitalize",children:j.method||"N/A"}),j.reference_number&&e.jsx("span",{className:"!font-mono",children:j.reference_number})]})]},j.id||v))}):e.jsxs("div",{className:"!text-center !py-8",children:[e.jsx(ql,{className:"!text-gray-400 !text-4xl !mx-auto !mb-2"}),e.jsx(x,{variant:"body2",className:"!text-gray-500 !mb-4",children:'No payment refunds found. Click "Manage Refunds" to process a refund.'}),e.jsx(K,{variant:"contained",startIcon:e.jsx(Wr,{}),onClick:()=>i(!0),children:"Add Payment Refund"})]})]})]})]}),e.jsx(G7e,{paymentId:Number(t),drawerOpen:a,setDrawerOpen:r}),e.jsx(Q7e,{paymentId:Number(t),drawerOpen:n,setDrawerOpen:i})]})},X7e=async t=>{try{return(await ie.get("/return-requests",{params:t})).data}catch(s){throw console.error("Error fetching return requests:",s),new Error(s.response?.data?.message||"Failed to fetch return requests")}},J7e=async t=>{try{return(await ie.get(`/return-requests/${t}`)).data}catch(s){throw console.error("Error fetching return request:",s),new Error(s.response?.data?.message||"Failed to fetch return request")}},eRe=async t=>{try{return(await ie.post("/return-requests",t)).data}catch(s){throw console.error("Error creating return request:",s),new Error(s.response?.data?.message||"Failed to create return request")}},tRe=async(t,s)=>{try{return(await ie.put(`/return-requests/${t}`,s)).data}catch(a){throw console.error("Error updating return request:",a),new Error(a.response?.data?.message||"Failed to update return request")}},sRe=async t=>{try{return(await ie.delete(`/return-requests/${t}`)).data}catch(s){throw console.error("Error deleting return request:",s),new Error(s.response?.data?.message||"Failed to delete return request")}},$m={all:["return-requests"],lists:()=>[...$m.all,"list"],list:t=>[...$m.lists(),t],details:()=>[...$m.all,"detail"],detail:t=>[...$m.details(),t]},aRe=(t,s)=>tt({queryKey:$m.list(t),queryFn:()=>X7e(t),staleTime:300*1e3,...s}),rRe=(t,s)=>tt({queryKey:$m.detail(t),queryFn:()=>J7e(t),enabled:!!t,staleTime:300*1e3,...s}),nRe=()=>De({mutationFn:eRe,invalidateQueries:["return-requests"],loadingMessage:"Creating return request..."}),iRe=()=>De({mutationFn:({id:t,...s})=>tRe(t,s),invalidateQueries:["return-requests"],loadingMessage:"Updating return request..."}),oRe=()=>De({mutationFn:sRe,invalidateQueries:["return-requests"],loadingMessage:"Deleting return request..."}),lRe=nt({file:hs().required("Please select a file to import")}),cRe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:lRe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("return_requests")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"return_requests",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Return Requests",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple return requests. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing return requests..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},dRe=nt({customer_id:Ge().required("Customer is required").min(1,"Please select a valid customer"),product_id:Ge().required("Product is required").min(1,"Please select a valid product"),serial_id:Ge().nullable().min(1,"Serial ID must be a positive number"),return_date:me().nullable().test("is-valid-date","Invalid date format",t=>{if(!t)return!0;const s=new Date(t);return!isNaN(s.getTime())}).test("not-future","Return date cannot be in the future",t=>{if(!t)return!0;const s=new Date(t),a=new Date;return a.setHours(23,59,59,999),s<=a}),reason:me().nullable().max(500,"Reason must be less than 500 characters"),status:me().nullable().oneOf(["pending","approved","rejected","processing","completed","cancelled"],"Invalid status"),approved_by:Ge().nullable().min(1,"Approved by must be a valid user ID").when("status",{is:"approved",then:t=>t.required("Approved by is required when status is approved"),otherwise:t=>t.nullable()}),approved_date:me().nullable().test("is-valid-date","Invalid date format",t=>{if(!t)return!0;const s=new Date(t);return!isNaN(s.getTime())}).test("not-future","Approved date cannot be in the future",t=>{if(!t)return!0;const s=new Date(t),a=new Date;return a.setHours(23,59,59,999),s<=a}),resolution_notes:me().nullable().max(1e3,"Resolution notes must be less than 1000 characters"),is_active:me().required("Active status is required").oneOf(["Y","N"],"Active status must be Y or N")}),WF=({selectedReturnRequest:t,setSelectedReturnRequest:s,drawerOpen:a,setDrawerOpen:r,users:n})=>{const i=!!t,o=()=>{s(null),r(!1),m.resetForm()},l=nRe(),c=iRe(),m=xt({initialValues:{customer_id:t?.customer_id?.toString()||"",product_id:t?.product_id?.toString()||"",serial_id:t?.serial_id?.toString()||"",return_date:t?.return_date?t.return_date.split("T")[0]:"",reason:t?.reason||"",status:t?.status||"pending",approved_by:t?.approved_by?.toString()||"",approved_date:t?.approved_date?t.approved_date.split("T")[0]:"",resolution_notes:t?.resolution_notes||"",is_active:t?.is_active||"Y"},validationSchema:dRe,enableReinitialize:!0,onSubmit:async u=>{try{const h={customer_id:Number(u.customer_id),product_id:Number(u.product_id),serial_id:u.serial_id?Number(u.serial_id):void 0,return_date:u.return_date,reason:u.reason,status:u.status,approved_by:u.approved_by?Number(u.approved_by):void 0,approved_date:u.approved_date,resolution_notes:u.resolution_notes,is_active:u.is_active};i&&t?await c.mutateAsync({id:t.id,...h}):await l.mutateAsync(h),o()}catch(h){console.error("Error saving return request:",h)}}});return e.jsx(it,{open:a,setOpen:o,title:i?"Edit Return Request":"Create Return Request",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:m.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(so,{name:"customer_id",label:"Customer",formik:m,required:!0}),e.jsx(bo,{name:"product_id",label:"Product",formik:m,required:!0}),e.jsx(oe,{name:"serial_id",label:"Serial ID",type:"number",placeholder:"Enter serial ID (optional)",formik:m}),e.jsx(oe,{name:"return_date",label:"Return Date",type:"date",formik:m}),e.jsxs(_e,{name:"status",label:"Status",formik:m,children:[e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"approved",children:"Approved"}),e.jsx(Z,{value:"rejected",children:"Rejected"}),e.jsx(Z,{value:"processing",children:"Processing"}),e.jsx(Z,{value:"completed",children:"Completed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]}),e.jsxs(_e,{name:"approved_by",label:"Approved By",formik:m,children:[e.jsx(Z,{value:"",children:"Select Approver"}),n.map(u=>e.jsxs(Z,{value:u.id.toString(),children:[u.name," (",u.email,")"]},u.id))]}),e.jsx(oe,{name:"approved_date",label:"Approved Date",type:"date",formik:m}),e.jsxs(_e,{name:"is_active",label:"Active Status",formik:m,required:!0,children:[e.jsx(Z,{value:"Y",children:"Active"}),e.jsx(Z,{value:"N",children:"Inactive"})]}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"reason",label:"Return Reason",placeholder:"Enter reason for return",formik:m,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"resolution_notes",label:"Resolution Notes",placeholder:"Enter resolution notes",formik:m,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!flex !justify-end items-center !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:o,disabled:l.isPending||c.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",loading:l.isPending||c.isPending,children:l.isPending?"Creating...":c.isPending?"Updating...":i?"Update Return Request":"Create Return Request"})]})]})})})},uRe=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState(null),[l,c]=g.useState(!1),[m,u]=g.useState(!1),[h,f]=g.useState(1),[b]=g.useState(10),{isCreate:w,isUpdate:S,isDelete:j,isRead:v}=Qe("return"),{data:N,isLoading:C,error:P}=aRe({search:s,page:h,limit:b,status:r==="all"?void 0:r,is_active:"Y"},{enabled:v}),{data:E}=Qr({page:1,limit:1e3}),{data:M}=Cu({page:1,limit:1e3}),T=N?.data||[],A=E?.data||[],L=M?.data||[],F=N?.pagination?.total_count||0,z=(N?.pagination?.current_page||1)-1,I=oRe(),Q=ls(),Y=N?.stats?.total_requests??0,B=N?.stats?.pending_requests??0,q=N?.stats?.approved_requests??0,V=N?.stats?.rejected_requests??0,G=N?.stats?.processing_requests??0,H=N?.stats?.completed_requests??0,D=N?.stats?.cancelled_requests??0,R=N?.stats?.new_requests_this_month??0,$=g.useCallback(()=>{o(null),c(!0)},[]),W=g.useCallback(()=>{u(!0)},[]),J=g.useCallback(async()=>{try{const le={search:s,status:r==="all"?void 0:r,isActive:"Y"};await Q.mutateAsync({tableName:"return_requests",filters:le})}catch(le){console.error("Error exporting return requests:",le)}},[Q,s,r]),te=g.useCallback(le=>{o(le),c(!0)},[]),ee=g.useCallback(le=>{t(`/transactions/returns/${le.id}`)},[t]),ae=g.useCallback(async le=>{try{await I.mutateAsync(le)}catch(pe){console.error("Error deleting return request:",pe)}},[I]),ce=g.useCallback(le=>{a(le),f(1)},[]),he=le=>{f(le+1)},ne=le=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",processing:"bg-blue-100 text-blue-800",completed:"bg-purple-100 text-purple-800",cancelled:"bg-gray-100 text-gray-800"})[le]||"bg-gray-100 text-gray-800",xe=le=>({pending:"Pending",approved:"Approved",rejected:"Rejected",processing:"Processing",completed:"Completed",cancelled:"Cancelled"})[le]||le,ge=[{id:"customer_product",label:"Customer & Product",render:(le,pe)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:pe.customer?.name||"Customer",className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(Tr,{className:"w-4 h-4"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:pe.customer?.name||"Unknown Customer"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:pe.product?.name||"Unknown Product"})]})]})},{id:"return_info",label:"Return Info",render:(le,pe)=>e.jsxs(y,{children:[pe.return_date&&e.jsxs(y,{className:"flex items-center gap-1 mb-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx(x,{variant:"caption",className:"!text-gray-600",children:new Date(pe.return_date).toLocaleDateString()})]}),pe.serial_number&&e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Wt,{className:"w-3 h-3 text-gray-400"}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:["Serial: ",pe.serial_number.serial_no]})]})]})},{id:"status_priority",label:"Status",render:(le,pe)=>e.jsx(y,{className:"!space-y-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ne(pe.status||"")}`,children:xe(pe.status||"")})})},{id:"reason_notes",label:"Reason & Notes",render:(le,pe)=>{const Re=pe.reason,Se=pe.resolution_notes;return!Re&&!Se?e.jsx(x,{variant:"caption",className:"!text-gray-400 !italic",children:"No info"}):e.jsxs(y,{children:[Re&&e.jsxs(y,{className:"flex items-center gap-1 mb-1",children:[e.jsx(na,{className:"w-3 h-3 text-orange-400"}),e.jsx(x,{variant:"caption",className:"!text-orange-600 !truncate",children:pe.reason?.length&&pe.reason?.length>30?`${pe.reason?.substring(0,30)}...`:pe.reason})]}),Se&&e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(ks,{className:"w-3 h-3 text-blue-400"}),e.jsx(x,{variant:"caption",className:"!text-blue-600 !truncate",children:pe.resolution_notes?.length&&pe.resolution_notes?.length>30?`${pe.resolution_notes?.substring(0,30)}...`:pe.resolution_notes})]})]})}},{id:"approval_info",label:"Approval Info",render:(le,pe)=>e.jsxs(y,{children:[pe.approved_user&&e.jsxs(y,{className:"flex items-center gap-1 mb-1",children:[e.jsx(Tr,{className:"w-3 h-3 text-green-400"}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:pe.approved_user.name})]}),pe.approved_date&&e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ds,{className:"w-3 h-3 text-gray-400"}),e.jsx(x,{variant:"caption",className:"!text-gray-600",children:new Date(pe.approved_date).toLocaleDateString()})]}),!pe.approved_user&&!pe.approved_date&&e.jsx(x,{variant:"caption",className:"!text-gray-400 !italic",children:"Not approved"})]})},{id:"is_active",label:"Active Status",render:le=>e.jsx(Me,{icon:le==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:le==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:le==="Y"?"success":"error"})},...v||S||j?[{id:"action",label:"Actions",sortable:!1,render:(le,pe)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[v&&e.jsx(Wa,{icon:e.jsx(Sn,{}),onClick:()=>ee(pe),tooltip:`View return request for ${pe.customer?.name}`,color:"success"}),S&&e.jsx(rs,{onClick:()=>te(pe),tooltip:`Edit return request for ${pe.customer?.name}`}),j&&e.jsx(Vt,{onClick:()=>ae(pe.id),tooltip:`Delete return request for ${pe.customer?.name}`,itemName:`return request for ${pe.customer?.name}`,confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Return Requests"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage product return requests, track approval status, and monitor return processing"})]})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-3 mb-6",children:[e.jsx(fe,{title:"Total",value:Y,icon:e.jsx(ks,{className:"w-4 h-4"}),color:"blue",isLoading:C}),e.jsx(fe,{title:"Pending",value:B,icon:e.jsx(Ds,{className:"w-4 h-4"}),color:"yellow",isLoading:C}),e.jsx(fe,{title:"Approved",value:q,icon:e.jsx(mt,{className:"w-4 h-4"}),color:"green",isLoading:C}),e.jsx(fe,{title:"Rejected",value:V,icon:e.jsx(ya,{className:"w-4 h-4"}),color:"red",isLoading:C}),e.jsx(fe,{title:"Processing",value:G,icon:e.jsx(Ds,{className:"w-4 h-4"}),color:"blue",isLoading:C}),e.jsx(fe,{title:"Completed",value:H,icon:e.jsx(mt,{className:"w-4 h-4"}),color:"green",isLoading:C}),e.jsx(fe,{title:"Cancelled",value:D,icon:e.jsx(ya,{className:"w-4 h-4"}),color:"gray",isLoading:C}),e.jsx(fe,{title:"New",value:R,icon:e.jsx(_s,{className:"w-4 h-4"}),color:"gray",isLoading:C})]}),P&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load return Requests. Please try again."}),e.jsx(ot,{data:T,columns:ge,actions:v||w?e.jsxs("div",{className:"flex justify-between items-center flex-wrap w-full gap-2",children:[e.jsx("div",{className:"flex gap-2 items-center flex-wrap",children:v&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Return Requests",value:s,onChange:ce,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:r,onChange:le=>n(le.target.value),className:"!min-w-40",size:"small",children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"approved",children:"Approved"}),e.jsx(Z,{value:"rejected",children:"Rejected"}),e.jsx(Z,{value:"processing",children:"Processing"}),e.jsx(Z,{value:"completed",children:"Completed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]})]})}),v&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{title:"Export Return Requests",description:"Are you sure you want to export the current return requests data to Excel? This will include all filtered results.",onConfirm:J,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:Q.isPending,children:Q.isPending?"Exporting...":"Export"})}),e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:W,children:"Import"})]}),w&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:$,children:"Create"})]}):!1,getRowId:le=>le.id,loading:C,totalCount:F,page:z,rowsPerPage:b,isPermission:v,onPageChange:he,emptyMessage:s?`No return requests found matching "${s}"`:"No return requests found in the system"}),e.jsx(WF,{selectedReturnRequest:i,setSelectedReturnRequest:o,drawerOpen:l,setDrawerOpen:c,users:A,products:L}),e.jsx(cRe,{drawerOpen:m,setDrawerOpen:u})]})},Mp={async getWorkflowSteps(t){return(await ie.get(`/workflow/steps/${t}`)).data.data},async executeWorkflowAction(t,s){const a=await ie.post(`/workflow/action/${t}`,s);return{...a.data.data,message:a.data.message}},async getWorkflowTemplates(){return(await ie.get("/workflow/templates")).data.data},async applyWorkflowTemplate(t,s){const a=await ie.post(`/workflow/template/${t}`,{templateId:s});return{workflowSteps:a.data.data,message:a.data.message}},async executeFullWorkflowFlow(t,s="standard_return"){const a=await ie.post(`/workflow/full-flow/${t}`,{templateId:s});return{workflowSteps:a.data.data,message:a.data.message}},async rejectReturnRequest(t,s){const a=await ie.post(`/workflow/reject/${t}`,{rejectionReason:s});return{rejectionStep:a.data.data,message:a.data.message}},async executeNextWorkflowStep(t){const s=await ie.post(`/workflow/next-step/${t}`);return{nextStep:s.data.data,message:s.data.message}}},mRe=t=>tt({queryKey:["workflow-steps",t],queryFn:()=>Mp.getWorkflowSteps(t),enabled:!!t}),pRe=()=>tt({queryKey:["workflow-templates"],queryFn:()=>Mp.getWorkflowTemplates()}),hRe=()=>De({mutationFn:({requestId:t,templateId:s})=>Mp.applyWorkflowTemplate(t,s),invalidateQueries:["workflow-steps","return-request"],loadingMessage:"Applying workflow template..."}),fRe=()=>De({mutationFn:({requestId:t,templateId:s})=>Mp.executeFullWorkflowFlow(t,s),invalidateQueries:["workflow-steps","return-request","return-requests"],loadingMessage:"Executing full workflow flow..."}),xRe=()=>De({mutationFn:({requestId:t,rejectionReason:s})=>Mp.rejectReturnRequest(t,s),invalidateQueries:["workflow-steps","return-request","return-requests"],loadingMessage:"Rejecting return request..."}),gRe=()=>De({mutationFn:({requestId:t})=>Mp.executeNextWorkflowStep(t),invalidateQueries:["workflow-steps","return-request","return-requests"],loadingMessage:"Executing next workflow step..."}),yRe=({requestId:t,currentStatus:s,onStatusChange:a})=>{const[r,n]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(""),{data:m=[],isLoading:u,refetch:h}=mRe(t),{data:f=[]}=pRe(),b=hRe(),w=fRe(),S=gRe(),j=xRe(),v=I=>{switch(I){case"completed":return e.jsx(Da,{className:"w-5 h-5 text-green-600"});case"in_progress":return e.jsx(Ds,{className:"w-5 h-5 text-blue-600"});case"pending":return e.jsx(Ds,{className:"w-5 h-5 text-gray-400"});case"rejected":return e.jsx(An,{className:"w-5 h-5 text-red-600"});default:return e.jsx(Ds,{className:"w-5 h-5 text-gray-400"})}},N=I=>{switch(I){case"completed":return"text-green-600";case"in_progress":return"text-blue-600";case"pending":return"text-gray-400";case"rejected":return"text-red-600";default:return"text-gray-400"}},C=async I=>{try{await b.mutateAsync({requestId:t,templateId:I}),n(!1),h()}catch{}},P=async(I="standard_return")=>{try{await w.mutateAsync({requestId:t,templateId:I}),h(),a&&a("completed")}catch{}},E=async()=>{try{await S.mutateAsync({requestId:t}),h()}catch{}},M=async()=>{if(l.trim())try{await j.mutateAsync({requestId:t,rejectionReason:l.trim()}),o(!1),c(""),h(),a&&a("rejected")}catch{}},T=m.length>0&&m.every(I=>I.status==="completed"),A=m.some(I=>I.status==="pending"||I.status==="in_progress"),L=m.filter(I=>I.status==="pending"||I.status==="in_progress").length===1,F=["completed","rejected","cancelled"].includes(s),z=m.length>0&&A&&!T&&!F;return u?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(I=>e.jsxs("div",{className:"flex items-start gap-3 animate-pulse",children:[e.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},I))}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"flex flex-col gap-2",children:m.length>0?m.map(I=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:v(I.status)}),e.jsxs("div",{className:"flex-1",children:[e.jsx(x,{variant:"subtitle2",className:`font-medium ${N(I.status)}`,children:I.step}),I.remarks&&e.jsx(x,{variant:"body2",className:`mt-1 ${I.status==="rejected"?"text-red-600 font-medium":"text-gray-600"}`,children:I.remarks}),I.action_date&&e.jsx(x,{variant:"caption",className:"text-gray-500 mt-1 block",children:Ie(I.action_date)}),I.action_by&&I.action_user&&e.jsxs(x,{variant:"caption",className:"text-gray-500",children:["by ",I.action_user.name]}),!I.action_by&&e.jsx(x,{variant:"caption",className:"text-gray-500",children:"by System"})]})]},I.id)):e.jsxs("div",{className:"text-center py-8 flex flex-col gap-2 items-center text-gray-500",children:[e.jsx(na,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx(x,{variant:"body2",className:"mb-4",children:"No workflow steps found"}),!F&&e.jsx(K,{variant:"outlined",startIcon:e.jsx(bg,{}),onClick:()=>n(!0),children:"Apply Workflow Template"})]})}),r&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx(x,{variant:"h6",className:"mb-3 text-blue-900",children:"Select Workflow Template"}),e.jsx("div",{className:"space-y-2 mb-4",children:f.map(I=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border",children:[e.jsxs("div",{children:[e.jsx(x,{variant:"subtitle2",className:"font-medium",children:I.name}),e.jsx(x,{variant:"caption",className:"text-gray-500",children:I.description})]}),e.jsx(K,{variant:"outlined",size:"small",onClick:()=>C(I.id),disabled:b.isPending,children:"Apply"})]},I.id))}),e.jsx(K,{variant:"outlined",onClick:()=>n(!1),className:"w-full",children:"Cancel"})]}),z&&e.jsxs("div",{className:"grid lg:grid-cols-3 md:grid-cols-2 gap-2 items-center",children:[e.jsx(K,{variant:"contained",className:" bg-purple-600 hover:bg-purple-700 text-white",startIcon:e.jsx(ele,{}),onClick:()=>P("standard_return"),disabled:w.isPending,children:w.isPending?"Processing...":"Complete the Process"}),e.jsx(K,{variant:L?"contained":"outlined",className:` ${L?"bg-green-600 hover:bg-green-700 text-white":"border-blue-300 text-blue-600 hover:bg-blue-50"}`,startIcon:e.jsx(Qw,{}),onClick:E,disabled:S.isPending,children:S.isPending?"Processing...":L?"Complete the Return Process":"Execute Next Step"}),e.jsx(K,{variant:"outlined",className:" border-red-300 text-red-600 hover:bg-red-50",startIcon:e.jsx(An,{}),color:"error",onClick:()=>o(!0),disabled:j.isPending,children:j.isPending?"Rejecting...":"Reject Request"})]}),e.jsx(jv,{open:i,onClose:()=>{o(!1),c("")},"aria-labelledby":"reject-modal-title","aria-describedby":"reject-modal-description",children:e.jsxs("div",{className:"!absolute !top-1/2 !left-1/2 !transform !-translate-x-1/2 !-translate-y-1/2 !w-[90%] sm:!w-[500px] !bg-white !rounded-lg !shadow-2xl !p-0",children:[e.jsxs("div",{className:"!flex !items-center !justify-between !p-4 !pb-3",children:[e.jsx(x,{id:"reject-modal-title",variant:"h6",component:"h2",className:"!font-semibold",children:"Reject Return Request"}),e.jsx(K,{onClick:()=>{o(!1),c("")},className:"!min-w-0 !p-1",children:e.jsx(An,{className:"w-5 h-5"})})]}),e.jsx(pr,{}),e.jsx("div",{className:"!p-4 !pb-3",children:e.jsx(oe,{label:"Rejection Reason",placeholder:"Please provide a reason for rejecting this return request...",value:l,onChange:I=>c(I.target.value),multiline:!0,rows:4,required:!0,error:!l.trim()&&i,helperText:!l.trim()&&i?"Rejection reason is required":"",className:"!w-full"})}),e.jsx(pr,{}),e.jsxs("div",{className:"!flex !gap-2 !justify-end !p-4 !pt-3",children:[e.jsx(K,{variant:"outlined",onClick:()=>{o(!1),c("")},disabled:j.isPending,children:"Cancel"}),e.jsx(K,{variant:"contained",color:"error",onClick:M,className:"!w-24",disabled:!l.trim()||j.isPending,children:j.isPending?"Rejecting...":"Reject"})]})]})})]})},bRe=()=>{const{id:t}=Kr(),s=Ws(),[a,r]=g.useState(!1),{data:n,isLoading:i,error:o}=rRe(Number(t)),{data:l}=Qr({page:1,limit:1e3}),{data:c}=Cu({page:1,limit:1e3}),m=n?.data,u=l?.data||[],h=c?.data||[],f=j=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",processing:"bg-blue-100 text-blue-800",completed:"bg-purple-100 text-purple-800",cancelled:"bg-gray-100 text-gray-800"})[j]||"bg-gray-100 text-gray-800",b=j=>({pending:"Pending",approved:"Approved",rejected:"Rejected",processing:"Processing",completed:"Completed",cancelled:"Cancelled"})[j]||j,w=()=>{s("/transactions/returns")};if(i)return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-2",children:e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"!absolute !top-4 !right-4",children:e.jsx(X,{variant:"circular",width:12,height:12,className:"!bg-yellow-200"})}),e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !mb-4 !border-3 !border-white"}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-yellow-50"}),e.jsxs("div",{className:"!space-y-3 !text-left",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"50%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"70%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"40%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"80%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"35%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"60%",height:14})]})]})]})}),e.jsx("div",{className:"flex-4 !space-y-4",children:[1,2,3].map(j=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-20 !h-20 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-10 !translate-x-10"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1 !bg-blue-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-blue-200"})}),e.jsx(X,{variant:"text",width:140,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4].map(v=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${50+v*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+v*6}%`,height:16})]},v))})]})]},j))})]});if(o||!m)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load return request details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:w,className:"mt-4",children:"Back to Return Requests"})]});const S=({title:j,children:v,icon:N})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[N&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(N,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:j})]}),v]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${m.status==="completed"?"!bg-green-400":m.status==="approved"?"!bg-blue-400":m.status==="rejected"?"!bg-red-400":"!bg-yellow-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-green-400 !to-green-600 !text-white":m.status==="completed","!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":m.status==="approved","!bg-gradient-to-br !from-red-400 !to-red-600 !text-white":m.status==="rejected","!bg-gradient-to-br !from-yellow-400 !to-yellow-600 !text-white":m.status==="pending"}),children:e.jsx(Wt,{className:"!w-8 !h-8"})})}),e.jsxs(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:["Return Request #",m.id]}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:m.customer?.name||"Unknown Customer"}),e.jsx(Me,{label:b(m.status||""),className:`${f(m.status||"")} font-semibold`,size:"small"}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Product"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:m.product?.name||"Unknown Product"})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Return Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:m.return_date?Ie(m.return_date):"Not specified"})]}),e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Created"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(m.createdate)})]})]})]}),e.jsx(S,{title:"Request Information",icon:Bn,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:m.customer?.name||"Unknown Customer"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:m.customer?.code})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Product"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:m.product?.name||"Unknown Product"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:m.product?.code})]}),m.serial_number&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Serial Number"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:m.serial_number.serial_no})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Current Status"}),e.jsx("div",{className:"!mt-1",children:e.jsx(Me,{label:b(m.status||""),className:`${f(m.status||"")} font-semibold`,size:"small"})})]}),e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Reason for Return"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:m.reason||"No reason provided"})]})]})})]}),e.jsxs("div",{className:"!flex-4 !space-y-4",children:[m.approved_user&&e.jsx(S,{title:"Approval Information",icon:Da,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Approved By"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:m.approved_user.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:m.approved_user.email})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Approval Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:m.approved_date?Ie(m.approved_date):"Not approved"})]}),m.resolution_notes&&e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Resolution Notes"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:m.resolution_notes})]})]})}),e.jsx(S,{title:"Workflow Timeline",icon:B4,children:e.jsx(yRe,{requestId:m.id,currentStatus:m.status||"pending",onStatusChange:j=>{window.location.reload()}})})]})]}),e.jsx(WF,{selectedReturnRequest:m,setSelectedReturnRequest:()=>{},drawerOpen:a,setDrawerOpen:r,users:u,products:h})]})},vRe=nt({file:hs().required("Please select a file to import")}),jRe=({drawerOpen:t,setDrawerOpen:s})=>{const[a,r]=g.useState(null),[n,i]=g.useState(null),[o,l]=g.useState("upload"),c=g.useRef(null),m=ys(),u=bs({onSuccess:v=>{i(v.data),l("results")}}),h=()=>{r(null),i(null),l("upload"),f.resetForm(),s(!1)},f=xt({initialValues:{file:null},validationSchema:vRe,onSubmit:async()=>{a&&await S()}}),b=async()=>{try{await m.mutateAsync("visits")}catch(v){console.error("Failed to download template:",v)}},w=v=>{const N=v.target.files?.[0];if(N){if(!N.name.endsWith(".xlsx")&&!N.name.endsWith(".xls")){alert("Please select an Excel file (.xlsx or .xls)");return}r(N),i(null),l("upload"),f.setFieldValue("file",N)}},S=async()=>{if(a)try{await u.mutateAsync({tableName:"visits",file:a,options:{batchSize:100,skipDuplicates:!1,updateExisting:!1}})}catch(v){console.error("Import failed:",v)}},j=()=>{r(null),i(null),l("upload"),f.setFieldValue("file",null),c.current&&(c.current.value="")};return e.jsx(it,{open:t,setOpen:h,title:"Import Visits",size:"large",children:e.jsx(y,{className:"!p-5",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsx(lt,{severity:"info",className:"!mb-4",children:e.jsx(x,{variant:"body2",children:"Upload an Excel file to import multiple visits. Download the sample file to see the required format."})}),e.jsx(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:e.jsxs(y,{className:"!flex !items-center !justify-between",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium",children:"Download Excel Template"}),e.jsx(x,{variant:"body2",className:"!text-gray-600",children:"Get the Excel template with required columns and sample data"})]})]}),e.jsxs(K,{type:"button",variant:"outlined",onClick:b,className:"!shrink-0",children:[e.jsx(St,{className:"!mr-2"}),"Download"]})]})}),e.jsxs(y,{className:"!p-4 !border !border-gray-200 !rounded-lg",children:[e.jsx(x,{variant:"subtitle1",className:"!font-medium !mb-3",children:"Upload File"}),a?e.jsxs(y,{className:"!space-y-4",children:[e.jsxs(y,{className:"!flex !items-center !justify-between !p-3 !bg-gray-50 !rounded-lg",children:[e.jsxs(y,{className:"!flex !items-center !gap-3",children:[e.jsx(Pt,{className:"!text-green-600"}),e.jsxs(y,{children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:a.name}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx(K,{color:"error",type:"button",variant:"outlined",onClick:j,disabled:u.isPending,children:"Remove"})]}),u.isPending&&e.jsxs(y,{className:"!space-y-2",children:[e.jsx(y,{className:"!flex !justify-between !items-center",children:e.jsx(x,{variant:"body2",children:"Importing data..."})}),e.jsx(gs,{})]}),n&&o==="results"&&e.jsxs(y,{className:"!space-y-3 !mt-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium",children:"Import Results"}),e.jsxs(y,{className:"!grid !grid-cols-3 !gap-4",children:[e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-blue-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-blue-700",children:n.totalProcessed}),e.jsx(x,{variant:"caption",className:"!text-blue-600",children:"Total Processed"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-green-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-green-700",children:n.success}),e.jsx(x,{variant:"caption",className:"!text-green-600",children:"Successful"})]}),e.jsxs(y,{className:"!flex !items-center !gap-2 !p-3 !bg-red-50 !rounded-lg",children:[e.jsx(x,{variant:"h6",className:"!text-red-700",children:n.failed}),e.jsx(x,{variant:"caption",className:"!text-red-600",children:"Failed"})]})]}),n.fileInfo&&e.jsxs(y,{className:"!mt-3 !p-3 !bg-gray-50 !rounded-lg",children:[e.jsx(x,{variant:"subtitle2",className:"!font-medium !mb-1",children:"File Information"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["File: ",n.fileInfo.originalName]}),e.jsxs(x,{variant:"body2",className:"!text-gray-600",children:["Total Rows: ",n.fileInfo.rows]})]}),n.errors&&n.errors.length>0&&e.jsxs(y,{className:"!mt-3",children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !mb-2 !text-red-700",children:["Import Errors (",n.errors.length,"):"]}),e.jsxs(y,{className:"!bg-red-50 !rounded-lg !max-h-32 !overflow-y-auto !p-2",children:[n.errors.slice(0,10).map((v,N)=>e.jsxs(x,{variant:"body2",className:"!text-red-600 !mb-1",children:[" ",v]},N)),n.errors.length>10&&e.jsxs(x,{variant:"body2",className:"!text-red-600 !font-medium",children:["... and ",n.errors.length-10," more errors"]})]})]})]})]}):e.jsxs(y,{className:"!border-2 !border-dashed !border-gray-300 !rounded-lg !p-8 !text-center hover:!border-primary-400 !transition-colors !cursor-pointer",onClick:()=>c.current?.click(),children:[e.jsx(xs,{className:"!mx-auto !mb-4 !text-gray-400 !text-5xl"}),e.jsx(x,{variant:"h6",className:"!mb-2 !text-gray-700",children:"Click to upload or drag and drop"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Excel files only (.xlsx, .xls)"}),e.jsx("input",{ref:c,type:"file",accept:".xlsx,.xls",onChange:w,className:"!hidden"})]})]}),e.jsxs(y,{className:"!flex !justify-end !gap-2 items-center",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:h,disabled:u.isPending,children:"Cancel"}),o==="upload"&&e.jsx(K,{type:"submit",variant:"contained",disabled:!a||u.isPending,loading:u.isPending,children:u.isPending?"Importing...":"Import Data"}),o==="results"&&e.jsx(K,{type:"button",variant:"contained",onClick:h,children:"Done"})]})]})})})},NRe=nt().shape({customer_id:me().required("Customer is required"),sales_person_id:me().required("Salesperson is required"),route_id:me().nullable(),zones_id:me().nullable(),visit_date:me().nullable(),visit_time:me().nullable(),purpose:me().max(500,"Purpose must be at most 500 characters").nullable(),status:me().oneOf(["planned","in_progress","completed","cancelled"],"Invalid status").nullable(),start_latitude:me().nullable(),start_longitude:me().nullable(),end_latitude:me().nullable(),end_longitude:me().nullable(),orders_created:Ge().min(0,"Orders created must be a positive number").nullable(),amount_collected:me().nullable(),visit_notes:me().max(1e3,"Visit notes must be at most 1000 characters").nullable(),customer_feedback:me().max(1e3,"Customer feedback must be at most 1000 characters").nullable(),next_visit_date:me().nullable(),is_active:me().oneOf(["Y","N"],"Status must be Y or N").required("Status is required")}),wRe=({selectedVisit:t,setSelectedVisit:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,i=l1({limit:1e3,status:"active"}),o=Jl({limit:1e3,isActive:"Y"}),l=i?.data?.data||[],c=o?.data?.data||[],m=()=>{s(null),r(!1),f.resetForm()},u=R_e(),h=A_e(),f=xt({initialValues:{customer_id:t?.customer_id?.toString()||"",sales_person_id:t?.sales_person_id?.toString()||"",route_id:t?.route_id?.toString()||"",zones_id:t?.zones_id?.toString()||"",visit_date:Or(t?.visit_date),visit_time:t?.visit_time||"",purpose:t?.purpose||"",status:t?.status||"planned",start_latitude:t?.start_latitude||"",start_longitude:t?.start_longitude||"",end_latitude:t?.end_latitude||"",end_longitude:t?.end_longitude||"",orders_created:t?.orders_created?.toString()||"",amount_collected:t?.amount_collected||"",visit_notes:t?.visit_notes||"",customer_feedback:t?.customer_feedback||"",next_visit_date:Or(t?.next_visit_date),is_active:t?.is_active||"Y"},validationSchema:NRe,enableReinitialize:!0,onSubmit:async j=>{try{const v={customer_id:Number(j.customer_id),sales_person_id:Number(j.sales_person_id),route_id:j.route_id?Number(j.route_id):void 0,zones_id:j.zones_id?Number(j.zones_id):void 0,visit_date:j.visit_date,visit_time:j.visit_time,purpose:j.purpose,status:j.status,start_latitude:j.start_latitude,start_longitude:j.start_longitude,end_latitude:j.end_latitude,end_longitude:j.end_longitude,orders_created:j.orders_created?Number(j.orders_created):void 0,amount_collected:j.amount_collected,visit_notes:j.visit_notes,customer_feedback:j.customer_feedback,next_visit_date:j.next_visit_date,is_active:j.is_active};n&&t?await h.mutateAsync({id:t.id,...v}):await u.mutateAsync(v),m()}catch(v){console.error("Error saving visit:",v)}}}),b=f.values.customer_id?Number(f.values.customer_id):null,{data:w}=H_e(b||0),S=!!b&&!n;return g.useEffect(()=>{if(w?.data&&!n&&b){const j=w.data;j.route_id&&f.setFieldValue("route_id",j.route_id.toString()),j.zones_id&&f.setFieldValue("zones_id",j.zones_id.toString())}},[w,n,b]),e.jsx(it,{open:a,setOpen:m,title:n?"Edit Visit":"Create Visit",size:"large",children:e.jsx(y,{className:"!p-6",children:e.jsxs("form",{onSubmit:f.handleSubmit,className:"!space-y-6",children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-6",children:[e.jsx(so,{name:"customer_id",label:"Customer",formik:f,required:!0}),e.jsx(pn,{name:"sales_person_id",label:"Sales Person",formik:f,required:!0}),e.jsx(_e,{name:"route_id",label:"Route",formik:f,disabled:S,children:l.map(j=>e.jsxs(Z,{value:j.id.toString(),children:[j.name," (",j.code,")"]},j.id))}),e.jsx(_e,{name:"zones_id",label:"Zone",formik:f,disabled:S,children:c.map(j=>e.jsx(Z,{value:j.id.toString(),children:j.name},j.id))}),e.jsx(oe,{name:"visit_date",label:"Visit Date",type:"date",formik:f}),e.jsx(oe,{name:"visit_time",label:"Visit Time",type:"time",formik:f}),e.jsxs(_e,{name:"status",label:"Status",formik:f,children:[e.jsx(Z,{value:"planned",children:"Planned"}),e.jsx(Z,{value:"in_progress",children:"In Progress"}),e.jsx(Z,{value:"completed",children:"Completed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]}),e.jsx(oe,{name:"orders_created",label:"Orders Created",placeholder:"Enter orders created",type:"number",formik:f}),e.jsx(oe,{type:"number",name:"amount_collected",label:"Amount Collected",placeholder:"Enter amount collected",formik:f}),e.jsx(oe,{name:"next_visit_date",label:"Next Visit Date",type:"date",formik:f}),e.jsx(Ts,{name:"is_active",formik:f,required:!0,className:"col-span-2"}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"purpose",label:"Purpose",placeholder:"Enter visit purpose",formik:f,multiline:!0,rows:2})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"visit_notes",label:"Visit Notes",placeholder:"Enter visit notes",formik:f,multiline:!0,rows:3})}),e.jsx(y,{className:"md:!col-span-2",children:e.jsx(oe,{name:"customer_feedback",label:"Customer Feedback",placeholder:"Enter customer feedback",formik:f,multiline:!0,rows:3})})]}),e.jsxs(y,{className:"!flex !justify-end items-center gap-2 flex-wrap",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:m,disabled:u.isPending||h.isPending,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",loading:u.isPending||h.isPending,children:u.isPending?"Creating...":h.isPending?"Updating...":n?"Update Visit":"Create Visit"})]})]})})})},_Re=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState("all"),[l,c]=g.useState(null),[m,u]=g.useState(!1),[h,f]=g.useState(!1),[b,w]=g.useState(1),[S]=g.useState(10),{isCreate:j,isUpdate:v,isDelete:N,isRead:C}=Qe("visit"),{data:P,isLoading:E,error:M}=US({search:s,page:b,limit:S,isActive:r==="all"?void 0:r==="active"?"Y":"N",sales_person_id:i==="all"?void 0:Number(i)},{enabled:C}),{data:T}=Qr({page:1,limit:1e3}),A=P?.data||[],L=T?.data||[],F=P?.meta?.total||0,z=(P?.meta?.page||1)-1,I=I_e(),Q=ls(),Y=P?.stats?.total_visits??0,B=P?.stats?.active_visits??0,q=P?.stats?.inactive_visits??0,V=P?.stats?.new_visits??0,G=g.useCallback(()=>{c(null),u(!0)},[]),H=g.useCallback(he=>{c(he),u(!0)},[]),D=g.useCallback(he=>{t(`/transactions/visits/${he.id}`)},[t]),R=g.useCallback(async he=>{try{await I.mutateAsync(he)}catch(ne){console.error("Error deleting visit:",ne)}},[I]),$=g.useCallback(he=>{a(he),w(1)},[]),W=he=>{w(he+1)},J=g.useCallback(async()=>{try{const he={search:s,status:r==="all"?void 0:r,salesperson:i==="all"?void 0:Number(i)};await Q.mutateAsync({tableName:"visits",filters:he})}catch(he){console.error("Error exporting visits:",he)}},[Q,s,r,i]),te=he=>({planned:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[he]||"bg-gray-100 text-gray-800",ee=he=>({planned:"Planned",in_progress:"In Progress",completed:"Completed",cancelled:"Cancelled"})[he]||he,ae=[{id:"customer",label:"Customer & Purpose",render:(he,ne)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:ne.customer?.name||"Customer",className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(Tr,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight",children:ne.customer?.name||"Unknown Customer"}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:ne.purpose||"No purpose specified"})]})]})},{id:"salesperson",label:"Sales Person",render:(he,ne)=>e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(go,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-sm",children:ne.salesperson?.name||e.jsx("span",{className:"text-sm italic text-gray-500",children:"No Sales Person"})})]})},{id:"route_zone",label:"Route & Zone",render:(he,ne)=>e.jsxs(y,{children:[e.jsxs(y,{className:"flex items-center gap-1 mb-1",children:[e.jsx(qc,{className:"w-3 h-3 text-gray-400"}),e.jsx(x,{variant:"caption",className:"!text-gray-600",children:ne.route?.name||"No Route"})]}),e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"w-3 h-3 text-gray-400"}),e.jsx(x,{variant:"caption",className:"!text-gray-600",children:ne.zone?.name||"No Zone"})]})]})},{id:"visit_details",label:"Visit Details",render:(he,ne)=>e.jsxs(y,{children:[ne.visit_date&&e.jsxs(y,{className:"flex items-center gap-1 mb-1",children:[e.jsx(_s,{className:"w-3 h-3 text-gray-400"}),e.jsx(x,{variant:"caption",className:"!text-gray-600",children:Ie(ne.visit_date)})]}),ne.visit_time&&e.jsxs(y,{className:"flex items-center gap-1",children:[e.jsx(Ds,{className:"w-3 h-3 text-gray-400"}),e.jsx(x,{variant:"caption",className:"!text-gray-600",children:ne.visit_time})]})]})},{id:"status",label:"Status",render:(he,ne)=>e.jsx("span",{className:`inline-flex px-2 py-1 text-xs capitalize font-semibold rounded-full ${te(ne.status||"")}`,children:ee(ne.status||"")})},{id:"orders_amount",label:"Orders & Amount",render:(he,ne)=>e.jsxs(y,{children:[e.jsxs(x,{variant:"caption",className:"!text-gray-600 !block",children:["Orders: ",ne.orders_created||0]}),e.jsxs(x,{variant:"caption",className:"!text-gray-600 !block",children:["Amount: ",ne.amount_collected||"N/A"]})]})},{id:"is_active",label:"Active Status",render:he=>e.jsx(Me,{icon:he==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:he==="Y"?"Active":"Inactive",size:"small",variant:"outlined",color:he==="Y"?"success":"error"})},{id:"createdate",label:"Created Date",render:(he,ne)=>Ie(ne.createdate)||e.jsx("span",{className:"italic text-gray-400",children:"No Date"})},...C||v||N?[{id:"action",label:"Actions",sortable:!1,render:(he,ne)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[C&&e.jsx(Wa,{onClick:()=>D(ne),tooltip:`View visit for ${ne.customer?.name}`,icon:e.jsx(Sn,{fontSize:"small"}),color:"info"}),v&&e.jsx(rs,{onClick:()=>H(ne),tooltip:`Edit visit for ${ne.customer?.name}`}),N&&e.jsx(Vt,{onClick:()=>R(ne.id),tooltip:`Delete visit for ${ne.customer?.name}`,itemName:`visit for ${ne.customer?.name}`,confirmDelete:!0})]})}]:[]],ce=L;return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Visit Logging"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage customer visits, track activities, and monitor field operations"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Visits",value:Y,icon:e.jsx(Tr,{className:"w-6 h-6"}),color:"blue",isLoading:E}),e.jsx(fe,{title:"Active Visits",value:B,icon:e.jsx(go,{className:"w-6 h-6"}),color:"green",isLoading:E}),e.jsx(fe,{title:"Inactive Visits",value:q,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:E}),e.jsx(fe,{title:"New This Month",value:V,icon:e.jsx(_s,{className:"w-6 h-6"}),color:"purple",isLoading:E})]}),M&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load visits. Please try again."}),e.jsx(ot,{data:A,columns:ae,actions:C||j?e.jsxs("div",{className:"flex justify-between !items-center gap-2 flex-wrap w-full",children:[e.jsx("div",{className:"flex gap-2 items-center flex-wrap",children:C&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Visits",value:s,onChange:$,debounceMs:400,showClear:!0,fullWidth:!1,className:"!min-w-80"}),e.jsxs(_e,{value:r,onChange:he=>n(he.target.value),className:"!min-w-32",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:i,onChange:he=>o(he.target.value),className:"!min-w-60",size:"small",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Sales Persons"}),ce.map(he=>e.jsx(Z,{value:he.id.toString(),children:he.name},he.id))]})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[C&&e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:Q.isPending,onClick:J,children:Q.isPending?"Exporting...":"Export"}),e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(fs,{}),onClick:()=>f(!0),children:"Import"}),j&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:G,children:"Create"})]})]}):!1,getRowId:he=>he.id,initialOrderBy:"visit_date",loading:E,totalCount:F,page:z,rowsPerPage:S,isPermission:C,onPageChange:W,emptyMessage:s?`No visits found matching "${s}"`:"No visits found in the system"}),e.jsx(wRe,{selectedVisit:l,setSelectedVisit:c,drawerOpen:m,setDrawerOpen:u}),e.jsx(jRe,{drawerOpen:h,setDrawerOpen:f})]})},SRe=()=>{const{id:t}=Kr(),s=Ws(),{formatCurrency:a}=Ya(),{data:r,isLoading:n,error:i,isFetching:o}=D_e(Number(t)),l=r?.data,c=()=>{s("/transactions/visit-logging")},m=f=>{switch(f?.toLowerCase()){case"completed":return"success";case"in_progress":return"warning";case"planned":return"info";case"cancelled":return"error";default:return"default"}},u=f=>f?f.charAt(0).toUpperCase()+f.slice(1).replace("_"," "):"Unknown";if(n||o)return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"!absolute !top-3 !right-3",children:e.jsx(X,{variant:"circular",width:10,height:10,className:"!bg-green-200"})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(X,{variant:"circular",width:96,height:96,className:"!mx-auto !border-3 !border-white"})}),e.jsx(X,{variant:"text",width:"70%",height:24,className:"!mx-auto !mb-1"}),e.jsx(X,{variant:"text",width:"50%",height:16,className:"!mx-auto !mb-3"}),e.jsx(X,{variant:"rectangular",width:"60%",height:24,className:"!mx-auto !mb-4 !bg-green-50"}),e.jsxs("div",{className:"!space-y-2 !text-left !mt-4",children:[e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"30%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"60%",height:14})]}),e.jsxs("div",{className:"!p-2 !bg-gray-50 !rounded-md",children:[e.jsx(X,{variant:"text",width:"40%",height:10,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"70%",height:14})]})]})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:140,height:20})]}),e.jsx("div",{className:"!space-y-3",children:[1,2,3].map(f=>e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !justify-between",children:[e.jsxs("div",{className:"!flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"40%",height:12})]}),e.jsx(X,{variant:"text",width:80,height:16,className:"!text-right"})]})},f))})]})]})]}),e.jsx("div",{className:"!flex-4 !space-y-4",children:e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[1,2,3,4,5,6].map(f=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${40+f*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+f*6}%`,height:16})]},f))})]})]})})]}),e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(X,{variant:"circular",width:16,height:16,className:"!bg-primary-200"})}),e.jsx(X,{variant:"text",width:200,height:20})]}),e.jsx("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 lg:!grid-cols-3 !gap-4",children:[1,2,3,4,5,6].map(f=>e.jsxs("div",{className:"!space-y-1",children:[e.jsx(X,{variant:"text",width:`${40+f*8}%`,height:12}),e.jsx(X,{variant:"text",width:`${60+f*6}%`,height:16})]},f))})]})]})]});if(i||!l)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-pink-600 to-red-600 rounded-lg p-6 mb-6 text-white relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx(x,{variant:"h6",className:"!text-white !font-bold",children:"Failed to load visit details"})]}),e.jsx(x,{variant:"body2",className:"!text-gray-200",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:c,className:"mt-4",children:"Back to Visits"})]});const h=({title:f,children:b,icon:w})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[w&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(w,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:f})]}),b]})]});return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"!flex-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !text-center !relative",children:[e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`!w-2.5 !h-2.5 !rounded-full ${l.is_active==="Y"?"!bg-green-400":"!bg-gray-400"}`})}),e.jsx("div",{className:"!relative !mb-4",children:e.jsx(ut,{className:nr("!w-24 !h-24 !mx-auto !text-xl !font-bold !border-3 !border-white !shadow-lg",{"!bg-gradient-to-br !from-blue-400 !to-blue-600 !text-white":l.is_active==="Y","!bg-gradient-to-br !from-gray-400 !to-gray-600 !text-white":l.is_active!=="Y"}),children:e.jsx(Tr,{className:"!w-8 !h-8"})})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900 !mb-1",children:l.customer?.name||"Unknown Customer"}),e.jsxs(x,{variant:"body2",className:"!text-gray-600 !mb-3",children:["Visit #",l.id]}),e.jsxs("div",{className:"!flex !justify-center !gap-2 !mb-4",children:[e.jsx(Me,{label:u(l.status),size:"small",color:m(l.status)}),e.jsx(Me,{icon:l.is_active==="Y"?e.jsx(mt,{fontSize:"small"}):e.jsx(cu,{fontSize:"small"}),label:l.is_active==="Y"?"Active":"Inactive",size:"small",color:l.is_active==="Y"?"success":"error"})]}),e.jsxs("div",{className:"!space-y-1 !text-left !mt-4",children:[l.visit_date&&e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Visit Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof l.visit_date=="string"?l.visit_date:String(l.visit_date||""))})]}),l.purpose&&e.jsxs("div",{className:"!p-1 !bg-gray-50 !rounded-md",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !mb-0.5",children:"Purpose"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.purpose})]})]})]}),e.jsx(h,{title:"Visit Timeline",icon:Ds,children:e.jsxs("div",{className:"!space-y-3",children:[l.visit_date&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(_s,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Visit Date"}),e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:[Ie(typeof l.visit_date=="string"?l.visit_date:String(l.visit_date||"")),l.visit_time&&` at ${l.visit_time}`]})]})]})}),l.check_in_time&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Ds,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Check-in Time"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:Ie(typeof l.check_in_time=="string"?l.check_in_time:String(l.check_in_time||""))})]})]})}),l.check_out_time&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Ds,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Check-out Time"}),e.jsx(x,{variant:"caption",className:"!text-gray-500",children:Ie(typeof l.check_out_time=="string"?l.check_out_time:String(l.check_out_time||""))})]})]})}),l.duration&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Ds,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:"Duration"}),e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:[l.duration," minutes"]})]})]})}),!l.visit_date&&!l.check_in_time&&e.jsxs("div",{className:"!text-center !py-8 !text-gray-500",children:[e.jsx(Ds,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx(x,{variant:"body2",children:"No timeline information available."})]})]})})]}),e.jsx("div",{className:"!flex-4 !space-y-4",children:e.jsx(h,{title:"Visit Information",icon:_s,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Visit ID"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:["#",l.id]})]}),l.visit_date&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Visit Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof l.visit_date=="string"?l.visit_date:String(l.visit_date||""))})]}),l.visit_time&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Visit Time"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.visit_time})]}),l.purpose&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Purpose"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.purpose})]}),l.status&&e.jsxs("div",{className:"!space-y-0.5 flex flex-col items-start",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Status"}),e.jsx(Me,{label:u(l.status),size:"small",color:m(l.status)})]}),l.salesperson&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Sales Person"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.salesperson.name})]}),l.route&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Route"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.route.name}),l.route.code&&e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:["Code: ",l.route.code]})]}),l.zone&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Zone"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.zone.name}),l.zone.code&&e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:["Code: ",l.zone.code]})]}),l.orders_created!==null&&l.orders_created!==void 0&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Orders Created"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.orders_created})]}),l.amount_collected&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Amount Collected"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-primary-600",children:a(Number(l.amount_collected))})]}),l.next_visit_date&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Next Visit Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof l.next_visit_date=="string"?l.next_visit_date:String(l.next_visit_date||""))})]}),l.createdate&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Created Date"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof l.createdate=="string"?l.createdate:String(l.createdate||""))})]}),l.updatedate&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Last Updated"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:Ie(typeof l.updatedate=="string"?l.updatedate:String(l.updatedate||""))})]})]})})})]}),l.customer&&e.jsx(h,{title:"Customer Information",icon:Tr,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 lg:!grid-cols-3 !gap-4",children:[e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer Name"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.customer.name})]}),l.customer.code&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer Code"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.customer.code})]}),l.customer.type&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Customer Type"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.customer.type})]}),l.customer.contact_person&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Contact Person"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.customer.contact_person})]}),l.customer.phone_number&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Phone Number"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.customer.phone_number})]}),l.customer.email&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Email"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !break-all",children:l.customer.email})]}),(l.customer.city||l.customer.state)&&e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Location"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:[l.customer.city,l.customer.state,l.customer.zipcode].filter(Boolean).join(", ")||"N/A"})]}),l.customer.address&&e.jsxs("div",{className:"!space-y-0.5 md:!col-span-2 lg:!col-span-3",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Address"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:l.customer.address})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Credit Limit"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:a(Number(l.customer.credit_limit))})]}),e.jsxs("div",{className:"!space-y-0.5",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Outstanding Amount"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-red-600",children:a(Number(l.customer.outstanding_amount))})]}),e.jsxs("div",{className:"!space-y-0.5 flex flex-col items-start",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide",children:"Status"}),e.jsx(Me,{label:l.customer.is_active==="Y"?"Active":"Inactive",size:"small",color:l.customer.is_active==="Y"?"success":"error"})]})]})}),(l.start_latitude||l.start_longitude||l.end_latitude||l.end_longitude)&&e.jsx(h,{title:"Location Details",icon:Ks,children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[(l.start_latitude||l.start_longitude)&&e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !mb-2",children:"Start Location"}),l.start_latitude&&e.jsxs(x,{variant:"caption",className:"!text-gray-600 !block",children:["Latitude: ",l.start_latitude]}),l.start_longitude&&e.jsxs(x,{variant:"caption",className:"!text-gray-600 !block",children:["Longitude: ",l.start_longitude]})]}),(l.end_latitude||l.end_longitude)&&e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900 !mb-2",children:"End Location"}),l.end_latitude&&e.jsxs(x,{variant:"caption",className:"!text-gray-600 !block",children:["Latitude: ",l.end_latitude]}),l.end_longitude&&e.jsxs(x,{variant:"caption",className:"!text-gray-600 !block",children:["Longitude: ",l.end_longitude]})]})]})}),(l.visit_notes||l.customer_feedback)&&e.jsx(h,{title:"Notes & Feedback",icon:go,children:e.jsxs("div",{className:"!space-y-4",children:[l.visit_notes&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Visit Notes"}),e.jsx(x,{variant:"body2",className:"!text-gray-700 !bg-gray-50 !p-3 !rounded !border !border-gray-200",children:l.visit_notes})]}),l.customer_feedback&&e.jsxs("div",{children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1 !font-medium",children:"Customer Feedback"}),e.jsx(x,{variant:"body2",className:"!text-gray-700 !bg-gray-50 !p-3 !rounded !border !border-gray-200",children:l.customer_feedback})]})]})}),e.jsx("div",{className:"!mt-4",children:e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:c,children:"Back to Visits"})})]})},CRe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState("all"),[o,l]=g.useState("all"),[c,m]=g.useState(1),[u]=g.useState(10),{isRead:h}=Qe("alert"),f=!1,b=[],w=b.filter(M=>M.type==="alert").length,S=b.filter(M=>M.type==="reminder").length,j=b.filter(M=>M.status==="active").length,v=b.filter(M=>M.priority==="high").length,N=M=>{switch(M?.toLowerCase()){case"active":return"success";case"completed":return"info";case"cancelled":return"error";default:return"default"}},C=M=>{switch(M?.toLowerCase()){case"high":return"error";case"medium":return"warning";case"low":return"info";default:return"default"}},P=M=>M==="alert"?e.jsx(ya,{className:"!w-4 !h-4 !text-red-500"}):e.jsx(oN,{className:"!w-4 !h-4 !text-blue-500"}),E=[{id:"type",label:"Type",render:(M,T)=>e.jsxs("div",{className:"!flex !items-center !gap-2",children:[P(T.type),e.jsx(x,{variant:"body2",className:"!capitalize",children:T.type})]})},{id:"title",label:"Title",render:(M,T)=>e.jsx(x,{variant:"body2",className:"!font-medium",children:T.title})},{id:"description",label:"Description",render:(M,T)=>e.jsx(x,{variant:"body2",className:"!max-w-md !truncate !text-gray-600",children:T.description})},{id:"category",label:"Category",render:(M,T)=>e.jsx(Me,{label:T.category,size:"small",className:"!capitalize"})},{id:"priority",label:"Priority",render:(M,T)=>e.jsx(Me,{label:T.priority,color:C(T.priority),size:"small",className:"!capitalize"})},{id:"status",label:"Status",render:(M,T)=>e.jsx(Me,{label:T.status,color:N(T.status),size:"small",className:"!capitalize"})},{id:"scheduled_date",label:"Scheduled Date",render:(M,T)=>T.scheduled_date?mp(T.scheduled_date):"-"},{id:"trigger_date",label:"Trigger Date",render:(M,T)=>T.trigger_date?mp(T.trigger_date):"-"},{id:"created_date",label:"Created Date",render:(M,T)=>Ie(T.created_date)}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs("div",{children:[e.jsx(x,{variant:"h5",className:"!font-bold !text-gray-900",children:"Alerts & Reminders"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Configure and manage system alerts and reminders for users and roles"})]})}),h&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Alerts",value:w,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:f}),e.jsx(fe,{title:"Total Reminders",value:S,icon:e.jsx(oN,{className:"w-6 h-6"}),color:"blue",isLoading:f}),e.jsx(fe,{title:"Active Alerts",value:j,icon:e.jsx(oN,{className:"w-6 h-6"}),color:"green",isLoading:f}),e.jsx(fe,{title:"High Priority",value:v,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"orange",isLoading:f})]}),e.jsx(ot,{columns:E,data:b,loading:f,page:c-1,onPageChange:M=>m(M+1),rowsPerPage:u,isPermission:h,actions:h?e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsx(ts,{placeholder:"Search Alerts & Reminders...",value:t,onChange:s,className:"min-w-[300px]"})}),e.jsx("div",{className:"w-[180px]",children:e.jsxs(_e,{label:"Type",value:a,onChange:M=>r(M.target.value),fullWidth:!0,disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Types"}),e.jsx(Z,{value:"alert",children:"Alerts"}),e.jsx(Z,{value:"reminder",children:"Reminders"})]})}),e.jsx("div",{className:"w-[180px]",children:e.jsxs(_e,{label:"Status",value:n,onChange:M=>i(M.target.value),fullWidth:!0,disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"completed",children:"Completed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]})}),e.jsx("div",{className:"w-[180px]",children:e.jsxs(_e,{label:"Priority",value:o,onChange:M=>l(M.target.value),fullWidth:!0,disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Priorities"}),e.jsx(Z,{value:"high",children:"High"}),e.jsx(Z,{value:"medium",children:"Medium"}),e.jsx(Z,{value:"low",children:"Low"})]})})]}):void 0})]})},m1={async getApprovalWorkflowSetups(t){const s={};t?.page&&(s.page=t.page),t?.size&&(s.size=t.size),t?.search&&(s.search=t.search),t?.request_type&&(s.request_type=t.request_type),t?.startDate&&(s.startDate=t.startDate),t?.endDate&&(s.endDate=t.endDate);const a=await ie.get("/approval-workflow-setup",{params:s});return{data:a.data.data||[],pagination:a.data.pagination||{currentPage:1,size:10,totalPages:0,totalCount:0},summary:a.data.summary||{total_workflows:0}}},async getApprovalWorkflowSetupById(t){return(await ie.get(`/approval-workflow-setup/${t}`)).data.data},async createApprovalWorkflowSetup(t){return(await ie.post("/approval-workflow-setup",t)).data.data},async updateApprovalWorkflowSetup(t,s){return(await ie.put(`/approval-workflow-setup/${t}`,s)).data.data},async deleteApprovalWorkflowSetupByRequestType(t){await ie.delete(`/approval-workflow-setup/${t}`)},async deleteApprovalWorkflowSetups(t){await ie.post("/approval-workflow-setup/delete-multiple",{ids:t})},async getApprovalWorkflowSetupsByRequest(t,s,a){const r={request_type:t};return s&&(r.zone_id=s),a&&(r.depot_id=a),(await ie.get("/approval-setup/get-all-workflow",{params:r})).data.data||[]},async getZonesWithWorkflows(t){return(await ie.get(`/zones-with-workflow-setup/${t}`)).data.data||[]},async getDepotsWithWorkflows(t){return(await ie.get(`/depots-with-workflow-setup/${t}`)).data.data||[]}},kl={all:["approval-workflow-setup"],lists:()=>[...kl.all,"list"],list:t=>[...kl.lists(),t],details:()=>[...kl.all,"detail"],detail:t=>[...kl.details(),t],byRequest:(t,s,a)=>[...kl.all,"by-request",t,s,a],zones:t=>[...kl.all,"zones",t],depots:t=>[...kl.all,"depots",t]},PRe=(t,s)=>tt({queryKey:kl.list(t),queryFn:()=>m1.getApprovalWorkflowSetups(t),staleTime:300*1e3,...s}),kRe=(t,s,a,r)=>tt({queryKey:kl.byRequest(t,s,a),queryFn:()=>m1.getApprovalWorkflowSetupsByRequest(t,s,a),enabled:!!t,staleTime:300*1e3,...r}),ERe=()=>De({mutationFn:t=>m1.createApprovalWorkflowSetup(t),invalidateQueries:["approval-workflow-setup"],loadingMessage:"Creating approval workflow setup..."}),TRe=()=>De({mutationFn:t=>m1.deleteApprovalWorkflowSetupByRequestType(t),invalidateQueries:["approval-workflow-setup"],loadingMessage:"Deleting approval workflow setup..."});function xn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var MRe=typeof Symbol=="function"&&Symbol.observable||"@@observable",JM=MRe,eD=()=>Math.random().toString(36).substring(7).split("").join("."),DRe={INIT:`@@redux/INIT${eD()}`,REPLACE:`@@redux/REPLACE${eD()}`},tD=DRe;function RRe(t){if(typeof t!="object"||t===null)return!1;let s=t;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(t)===s||Object.getPrototypeOf(t)===null}function YF(t,s,a){if(typeof t!="function")throw new Error(xn(2));if(typeof s=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(xn(0));if(typeof s=="function"&&typeof a>"u"&&(a=s,s=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(xn(1));return a(YF)(t,s)}let r=t,n=s,i=new Map,o=i,l=0,c=!1;function m(){o===i&&(o=new Map,i.forEach((j,v)=>{o.set(v,j)}))}function u(){if(c)throw new Error(xn(3));return n}function h(j){if(typeof j!="function")throw new Error(xn(4));if(c)throw new Error(xn(5));let v=!0;m();const N=l++;return o.set(N,j),function(){if(v){if(c)throw new Error(xn(6));v=!1,m(),o.delete(N),i=null}}}function f(j){if(!RRe(j))throw new Error(xn(7));if(typeof j.type>"u")throw new Error(xn(8));if(typeof j.type!="string")throw new Error(xn(17));if(c)throw new Error(xn(9));try{c=!0,n=r(n,j)}finally{c=!1}return(i=o).forEach(N=>{N()}),j}function b(j){if(typeof j!="function")throw new Error(xn(10));r=j,f({type:tD.REPLACE})}function w(){const j=h;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(xn(11));function N(){const P=v;P.next&&P.next(u())}return N(),{unsubscribe:j(N)}},[JM](){return this}}}return f({type:tD.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:b,[JM]:w}}function sD(t,s){return function(...a){return s(t.apply(this,a))}}function aD(t,s){if(typeof t=="function")return sD(t,s);if(typeof t!="object"||t===null)throw new Error(xn(16));const a={};for(const r in t){const n=t[r];typeof n=="function"&&(a[r]=sD(n,s))}return a}function GF(...t){return t.length===0?s=>s:t.length===1?t[0]:t.reduce((s,a)=>(...r)=>s(a(...r)))}function ARe(...t){return s=>(a,r)=>{const n=s(a,r);let i=()=>{throw new Error(xn(15))};const o={getState:n.getState,dispatch:(c,...m)=>i(c,...m)},l=t.map(c=>c(o));return i=GF(...l)(n.dispatch),{...n,dispatch:i}}}var LN={exports:{}},$N={};var rD;function IRe(){if(rD)return $N;rD=1;var t=Wb();function s(c,m){return c===m&&(c!==0||1/c===1/m)||c!==c&&m!==m}var a=typeof Object.is=="function"?Object.is:s,r=t.useSyncExternalStore,n=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return $N.useSyncExternalStoreWithSelector=function(c,m,u,h,f){var b=n(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=o(function(){function j(E){if(!v){if(v=!0,N=E,E=h(E),f!==void 0&&w.hasValue){var M=w.value;if(f(M,E))return C=M}return C=E}if(M=C,a(N,E))return M;var T=h(E);return f!==void 0&&f(M,T)?(N=E,M):(N=E,C=T)}var v=!1,N,C,P=u===void 0?null:u;return[function(){return j(m())},P===null?void 0:function(){return j(P())}]},[m,u,h,f]);var S=r(c,b[0],b[1]);return i(function(){w.hasValue=!0,w.value=S},[S]),l(S),S},$N}var nD;function ORe(){return nD||(nD=1,LN.exports=IRe()),LN.exports}ORe();var FRe=g.version.startsWith("19"),LRe=Symbol.for(FRe?"react.transitional.element":"react.element"),$Re=Symbol.for("react.portal"),zRe=Symbol.for("react.fragment"),qRe=Symbol.for("react.strict_mode"),BRe=Symbol.for("react.profiler"),URe=Symbol.for("react.consumer"),VRe=Symbol.for("react.context"),KF=Symbol.for("react.forward_ref"),HRe=Symbol.for("react.suspense"),WRe=Symbol.for("react.suspense_list"),ZS=Symbol.for("react.memo"),YRe=Symbol.for("react.lazy"),GRe=KF,KRe=ZS;function QRe(t){if(typeof t=="object"&&t!==null){const{$$typeof:s}=t;switch(s){case LRe:switch(t=t.type,t){case zRe:case BRe:case qRe:case HRe:case WRe:return t;default:switch(t=t&&t.$$typeof,t){case VRe:case KF:case YRe:case ZS:return t;case URe:return t;default:return s}}case $Re:return s}}}function ZRe(t){return QRe(t)===ZS}function XRe(t,s,a,r,{areStatesEqual:n,areOwnPropsEqual:i,areStatePropsEqual:o}){let l=!1,c,m,u,h,f;function b(N,C){return c=N,m=C,u=t(c,m),h=s(r,m),f=a(u,h,m),l=!0,f}function w(){return u=t(c,m),s.dependsOnOwnProps&&(h=s(r,m)),f=a(u,h,m),f}function S(){return t.dependsOnOwnProps&&(u=t(c,m)),s.dependsOnOwnProps&&(h=s(r,m)),f=a(u,h,m),f}function j(){const N=t(c,m),C=!o(N,u);return u=N,C&&(f=a(u,h,m)),f}function v(N,C){const P=!i(C,m),E=!n(N,c,C,m);return c=N,m=C,P&&E?w():P?S():E?j():f}return function(C,P){return l?v(C,P):b(C,P)}}function JRe(t,{initMapStateToProps:s,initMapDispatchToProps:a,initMergeProps:r,...n}){const i=s(t,n),o=a(t,n),l=r(t,n);return XRe(i,o,l,t,n)}function e9e(t,s){const a={};for(const r in t){const n=t[r];typeof n=="function"&&(a[r]=(...i)=>s(n(...i)))}return a}function P_(t){return function(a){const r=t(a);function n(){return r}return n.dependsOnOwnProps=!1,n}}function iD(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function QF(t,s){return function(r,{displayName:n}){const i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=t,i.dependsOnOwnProps=iD(t);let m=i(l,c);return typeof m=="function"&&(i.mapToProps=m,i.dependsOnOwnProps=iD(m),m=i(l,c)),m},i}}function XS(t,s){return(a,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${s} argument when connecting component ${r.wrappedComponentName}.`)}}function t9e(t){return t&&typeof t=="object"?P_(s=>e9e(t,s)):t?typeof t=="function"?QF(t):XS(t,"mapDispatchToProps"):P_(s=>({dispatch:s}))}function s9e(t){return t?typeof t=="function"?QF(t):XS(t,"mapStateToProps"):P_(()=>({}))}function a9e(t,s,a){return{...a,...t,...s}}function r9e(t){return function(a,{displayName:r,areMergedPropsEqual:n}){let i=!1,o;return function(c,m,u){const h=t(c,m,u);return i?n(h,o)||(o=h):(i=!0,o=h),o}}}function n9e(t){return t?typeof t=="function"?r9e(t):XS(t,"mergeProps"):()=>a9e}function i9e(t){t()}function o9e(){let t=null,s=null;return{clear(){t=null,s=null},notify(){i9e(()=>{let a=t;for(;a;)a.callback(),a=a.next})},get(){const a=[];let r=t;for(;r;)a.push(r),r=r.next;return a},subscribe(a){let r=!0;const n=s={callback:a,next:null,prev:s};return n.prev?n.prev.next=n:t=n,function(){!r||t===null||(r=!1,n.next?n.next.prev=n.prev:s=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}var oD={notify(){},get:()=>[]};function ZF(t,s){let a,r=oD,n=0,i=!1;function o(S){u();const j=r.subscribe(S);let v=!1;return()=>{v||(v=!0,j(),h())}}function l(){r.notify()}function c(){w.onStateChange&&w.onStateChange()}function m(){return i}function u(){n++,a||(a=s?s.addNestedSub(c):t.subscribe(c),r=o9e())}function h(){n--,a&&n===0&&(a(),a=void 0,r.clear(),r=oD)}function f(){i||(i=!0,u())}function b(){i&&(i=!1,h())}const w={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:m,trySubscribe:f,tryUnsubscribe:b,getListeners:()=>r};return w}var l9e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c9e=l9e(),d9e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",u9e=d9e(),m9e=()=>c9e||u9e?g.useLayoutEffect:g.useEffect,Lb=m9e();function lD(t,s){return t===s?t!==0||s!==0||1/t===1/s:t!==t&&s!==s}function zN(t,s){if(lD(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;const a=Object.keys(t),r=Object.keys(s);if(a.length!==r.length)return!1;for(let n=0;n<a.length;n++)if(!Object.prototype.hasOwnProperty.call(s,a[n])||!lD(t[a[n]],s[a[n]]))return!1;return!0}var p9e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},h9e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},f9e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},XF={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},x9e={[GRe]:f9e,[KRe]:XF};function cD(t){return ZRe(t)?XF:x9e[t.$$typeof]||p9e}var g9e=Object.defineProperty,y9e=Object.getOwnPropertyNames,dD=Object.getOwnPropertySymbols,b9e=Object.getOwnPropertyDescriptor,v9e=Object.getPrototypeOf,uD=Object.prototype;function k_(t,s){if(typeof s!="string"){if(uD){const i=v9e(s);i&&i!==uD&&k_(t,i)}let a=y9e(s);dD&&(a=a.concat(dD(s)));const r=cD(t),n=cD(s);for(let i=0;i<a.length;++i){const o=a[i];if(!h9e[o]&&!(n&&n[o])&&!(r&&r[o])){const l=b9e(s,o);try{g9e(t,o,l)}catch{}}}}return t}var j9e=Symbol.for("react-redux-context"),N9e=typeof globalThis<"u"?globalThis:{};function w9e(){if(!g.createContext)return{};const t=N9e[j9e]??=new Map;let s=t.get(g.createContext);return s||(s=g.createContext(null),t.set(g.createContext,s)),s}var JF=w9e(),_9e=[null,null];function S9e(t,s,a){Lb(()=>t(...s),a)}function C9e(t,s,a,r,n,i){t.current=r,a.current=!1,n.current&&(n.current=null,i())}function P9e(t,s,a,r,n,i,o,l,c,m,u){if(!t)return()=>{};let h=!1,f=null;const b=()=>{if(h||!l.current)return;const S=s.getState();let j,v;try{j=r(S,n.current)}catch(N){v=N,f=N}v||(f=null),j===i.current?o.current||m():(i.current=j,c.current=j,o.current=!0,u())};return a.onStateChange=b,a.trySubscribe(),b(),()=>{if(h=!0,a.tryUnsubscribe(),a.onStateChange=null,f)throw f}}function k9e(t,s){return t===s}function E9e(t,s,a,{pure:r,areStatesEqual:n=k9e,areOwnPropsEqual:i=zN,areStatePropsEqual:o=zN,areMergedPropsEqual:l=zN,forwardRef:c=!1,context:m=JF}={}){const u=m,h=s9e(t),f=t9e(s),b=n9e(a),w=!!t;return j=>{const v=j.displayName||j.name||"Component",N=`Connect(${v})`,C={shouldHandleStateChanges:w,displayName:N,wrappedComponentName:v,WrappedComponent:j,initMapStateToProps:h,initMapDispatchToProps:f,initMergeProps:b,areStatesEqual:n,areStatePropsEqual:o,areOwnPropsEqual:i,areMergedPropsEqual:l};function P(T){const[A,L,F]=g.useMemo(()=>{const{reactReduxForwardedRef:ge,...le}=T;return[T.context,ge,le]},[T]),z=g.useMemo(()=>{let ge=u;return A?.Consumer,ge},[A,u]),I=g.useContext(z),Q=!!T.store&&!!T.store.getState&&!!T.store.dispatch,Y=!!I&&!!I.store,B=Q?T.store:I.store,q=Y?I.getServerState:B.getState,V=g.useMemo(()=>JRe(B.dispatch,C),[B]),[G,H]=g.useMemo(()=>{if(!w)return _9e;const ge=ZF(B,Q?void 0:I.subscription),le=ge.notifyNestedSubs.bind(ge);return[ge,le]},[B,Q,I]),D=g.useMemo(()=>Q?I:{...I,subscription:G},[Q,I,G]),R=g.useRef(void 0),$=g.useRef(F),W=g.useRef(void 0),J=g.useRef(!1),te=g.useRef(!1),ee=g.useRef(void 0);Lb(()=>(te.current=!0,()=>{te.current=!1}),[]);const ae=g.useMemo(()=>()=>W.current&&F===$.current?W.current:V(B.getState(),F),[B,F]),ce=g.useMemo(()=>le=>G?P9e(w,B,G,V,$,R,J,te,W,H,le):()=>{},[G]);S9e(C9e,[$,R,J,F,W,H]);let he;try{he=g.useSyncExternalStore(ce,ae,q?()=>V(q(),F):ae)}catch(ge){throw ee.current&&(ge.message+=`
The error may be correlated with this previous error:
${ee.current.stack}

`),ge}Lb(()=>{ee.current=void 0,W.current=void 0,R.current=he});const ne=g.useMemo(()=>g.createElement(j,{...he,ref:L}),[L,j,he]);return g.useMemo(()=>w?g.createElement(z.Provider,{value:D},ne):ne,[z,ne,D])}const M=g.memo(P);if(M.WrappedComponent=j,M.displayName=P.displayName=N,c){const A=g.forwardRef(function(F,z){return g.createElement(M,{...F,reactReduxForwardedRef:z})});return A.displayName=N,A.WrappedComponent=j,k_(A,j)}return k_(M,j)}}var eL=E9e;function T9e(t){const{children:s,context:a,serverState:r,store:n}=t,i=g.useMemo(()=>{const c=ZF(n);return{store:n,subscription:c,getServerState:r?()=>r:void 0}},[n,r]),o=g.useMemo(()=>n.getState(),[n]);Lb(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==n.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=a||JF;return g.createElement(l.Provider,{value:i},s)}var M9e=T9e,D9e="Invariant failed";function R9e(t,s){throw new Error(D9e)}var fo=function(s){var a=s.top,r=s.right,n=s.bottom,i=s.left,o=r-i,l=n-a,c={top:a,right:r,bottom:n,left:i,width:o,height:l,x:i,y:a,center:{x:(r+i)/2,y:(n+a)/2}};return c},JS=function(s,a){return{top:s.top-a.top,left:s.left-a.left,bottom:s.bottom+a.bottom,right:s.right+a.right}},mD=function(s,a){return{top:s.top+a.top,left:s.left+a.left,bottom:s.bottom-a.bottom,right:s.right-a.right}},A9e=function(s,a){return{top:s.top+a.y,left:s.left+a.x,bottom:s.bottom+a.y,right:s.right+a.x}},qN={top:0,right:0,bottom:0,left:0},e3=function(s){var a=s.borderBox,r=s.margin,n=r===void 0?qN:r,i=s.border,o=i===void 0?qN:i,l=s.padding,c=l===void 0?qN:l,m=fo(JS(a,n)),u=fo(mD(a,o)),h=fo(mD(u,c));return{marginBox:m,borderBox:fo(a),paddingBox:u,contentBox:h,margin:n,border:o,padding:c}},Mi=function(s){var a=s.slice(0,-2),r=s.slice(-2);if(r!=="px")return 0;var n=Number(a);return isNaN(n)&&R9e(),n},I9e=function(){return{x:window.pageXOffset,y:window.pageYOffset}},$b=function(s,a){var r=s.borderBox,n=s.border,i=s.margin,o=s.padding,l=A9e(r,a);return e3({borderBox:l,border:n,margin:i,padding:o})},zb=function(s,a){return a===void 0&&(a=I9e()),$b(s,a)},tL=function(s,a){var r={top:Mi(a.marginTop),right:Mi(a.marginRight),bottom:Mi(a.marginBottom),left:Mi(a.marginLeft)},n={top:Mi(a.paddingTop),right:Mi(a.paddingRight),bottom:Mi(a.paddingBottom),left:Mi(a.paddingLeft)},i={top:Mi(a.borderTopWidth),right:Mi(a.borderRightWidth),bottom:Mi(a.borderBottomWidth),left:Mi(a.borderLeftWidth)};return e3({borderBox:s,margin:r,padding:n,border:i})},sL=function(s){var a=s.getBoundingClientRect(),r=window.getComputedStyle(s);return tL(a,r)},qx=function(s){var a=[],r=null,n=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];a=l,!r&&(r=requestAnimationFrame(function(){r=null,s.apply(void 0,a)}))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n};function aL(t,s){}aL.bind(null,"warn");aL.bind(null,"error");function Uc(){}function O9e(t,s){return{...t,...s}}function qi(t,s,a){const r=s.map(n=>{const i=O9e(a,n.options);return t.addEventListener(n.eventName,n.fn,i),function(){t.removeEventListener(n.eventName,n.fn,i)}});return function(){r.forEach(i=>{i()})}}const F9e="Invariant failed";class qb extends Error{}qb.prototype.toString=function(){return this.message};function Ft(t,s){throw new qb(F9e)}class L9e extends vt.Component{constructor(...s){super(...s),this.callbacks=null,this.unbind=Uc,this.onWindowError=a=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),a.error instanceof qb&&a.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=a=>{this.callbacks=a}}componentDidMount(){this.unbind=qi(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(s){if(s instanceof qb){this.setState({});return}throw s}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const $9e=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Bb=t=>t+1,z9e=t=>`
  You have lifted an item in position ${Bb(t.source.index)}
`,rL=(t,s)=>{const a=t.droppableId===s.droppableId,r=Bb(t.index),n=Bb(s.index);return a?`
      You have moved the item from position ${r}
      to position ${n}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${s.droppableId}
    in position ${n}
  `},nL=(t,s,a)=>s.droppableId===a.droppableId?`
      The item ${t}
      has been combined with ${a.draggableId}`:`
      The item ${t}
      in list ${s.droppableId}
      has been combined with ${a.draggableId}
      in list ${a.droppableId}
    `,q9e=t=>{const s=t.destination;if(s)return rL(t.source,s);const a=t.combine;return a?nL(t.draggableId,t.source,a):"You are over an area that cannot be dropped on"},pD=t=>`
  The item has returned to its starting position
  of ${Bb(t.index)}
`,B9e=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${pD(t.source)}
    `;const s=t.destination,a=t.combine;return s?`
      You have dropped the item.
      ${rL(t.source,s)}
    `:a?`
      You have dropped the item.
      ${nL(t.draggableId,t.source,a)}
    `:`
    The item has been dropped while not over a drop area.
    ${pD(t.source)}
  `},tb={dragHandleUsageInstructions:$9e,onDragStart:z9e,onDragUpdate:q9e,onDragEnd:B9e};function U9e(t,s){return!!(t===s||Number.isNaN(t)&&Number.isNaN(s))}function iL(t,s){if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(!U9e(t[a],s[a]))return!1;return!0}function ra(t,s){const a=g.useState(()=>({inputs:s,result:t()}))[0],r=g.useRef(!0),n=g.useRef(a),o=r.current||!!(s&&n.current.inputs&&iL(s,n.current.inputs))?n.current:{inputs:s,result:t()};return g.useEffect(()=>{r.current=!1,n.current=o},[o]),o.result}function ms(t,s){return ra(()=>t,s)}const Lr={x:0,y:0},Yr=(t,s)=>({x:t.x+s.x,y:t.y+s.y}),ii=(t,s)=>({x:t.x-s.x,y:t.y-s.y}),Vc=(t,s)=>t.x===s.x&&t.y===s.y,Dp=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),xu=(t,s,a=0)=>t==="x"?{x:s,y:a}:{x:a,y:s},Bx=(t,s)=>Math.sqrt((s.x-t.x)**2+(s.y-t.y)**2),hD=(t,s)=>Math.min(...s.map(a=>Bx(t,a))),oL=t=>s=>({x:t(s.x),y:t(s.y)});var V9e=(t,s)=>{const a=fo({top:Math.max(s.top,t.top),right:Math.min(s.right,t.right),bottom:Math.min(s.bottom,t.bottom),left:Math.max(s.left,t.left)});return a.width<=0||a.height<=0?null:a};const Tg=(t,s)=>({top:t.top+s.y,left:t.left+s.x,bottom:t.bottom+s.y,right:t.right+s.x}),fD=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],H9e={top:0,right:0,bottom:0,left:0},W9e=(t,s)=>s?Tg(t,s.scroll.diff.displacement):t,Y9e=(t,s,a)=>a&&a.increasedBy?{...t,[s.end]:t[s.end]+a.increasedBy[s.line]}:t,G9e=(t,s)=>s&&s.shouldClipSubject?V9e(s.pageMarginBox,t):fo(t);var fp=({page:t,withPlaceholder:s,axis:a,frame:r})=>{const n=W9e(t.marginBox,r),i=Y9e(n,a,s),o=G9e(i,r);return{page:t,withPlaceholder:s,active:o}},t3=(t,s)=>{t.frame||Ft();const a=t.frame,r=ii(s,a.scroll.initial),n=Dp(r),i={...a,scroll:{initial:a.scroll.initial,current:s,diff:{value:r,displacement:n},max:a.scroll.max}},o=fp({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:i});return{...t,frame:i,subject:o}};function Fr(t,s=iL){let a=null;function r(...n){if(a&&a.lastThis===this&&s(n,a.lastArgs))return a.lastResult;const i=t.apply(this,n);return a={lastResult:i,lastArgs:n,lastThis:this},i}return r.clear=function(){a=null},r}const lL=Fr(t=>t.reduce((s,a)=>(s[a.descriptor.id]=a,s),{})),cL=Fr(t=>t.reduce((s,a)=>(s[a.descriptor.id]=a,s),{})),p1=Fr(t=>Object.values(t)),K9e=Fr(t=>Object.values(t));var Rp=Fr((t,s)=>K9e(s).filter(r=>t===r.descriptor.droppableId).sort((r,n)=>r.descriptor.index-n.descriptor.index));function s3(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function h1(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var f1=Fr((t,s)=>s.filter(a=>a.descriptor.id!==t.descriptor.id)),Q9e=({isMovingForward:t,draggable:s,destination:a,insideDestination:r,previousImpact:n})=>{if(!a.isCombineEnabled||!s3(n))return null;function o(b){const w={type:"COMBINE",combine:{draggableId:b,droppableId:a.descriptor.id}};return{...n,at:w}}const l=n.displaced.all,c=l.length?l[0]:null;if(t)return c?o(c):null;const m=f1(s,r);if(!c){if(!m.length)return null;const b=m[m.length-1];return o(b.descriptor.id)}const u=m.findIndex(b=>b.descriptor.id===c);u===-1&&Ft();const h=u-1;if(h<0)return null;const f=m[h];return o(f.descriptor.id)},Ap=(t,s)=>t.descriptor.droppableId===s.descriptor.id;const dL={point:Lr,value:0},Ux={invisible:{},visible:{},all:[]},Z9e={displaced:Ux,displacedBy:dL,at:null};var Yi=(t,s)=>a=>t<=a&&a<=s,uL=t=>{const s=Yi(t.top,t.bottom),a=Yi(t.left,t.right);return r=>{if(s(r.top)&&s(r.bottom)&&a(r.left)&&a(r.right))return!0;const i=s(r.top)||s(r.bottom),o=a(r.left)||a(r.right);if(i&&o)return!0;const c=r.top<t.top&&r.bottom>t.bottom,m=r.left<t.left&&r.right>t.right;return c&&m?!0:c&&o||m&&i}},X9e=t=>{const s=Yi(t.top,t.bottom),a=Yi(t.left,t.right);return r=>s(r.top)&&s(r.bottom)&&a(r.left)&&a(r.right)};const a3={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},mL={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var J9e=t=>s=>{const a=Yi(s.top,s.bottom),r=Yi(s.left,s.right);return n=>t===a3?a(n.top)&&a(n.bottom):r(n.left)&&r(n.right)};const eAe=(t,s)=>{const a=s.frame?s.frame.scroll.diff.displacement:Lr;return Tg(t,a)},tAe=(t,s,a)=>s.subject.active?a(s.subject.active)(t):!1,sAe=(t,s,a)=>a(s)(t),r3=({target:t,destination:s,viewport:a,withDroppableDisplacement:r,isVisibleThroughFrameFn:n})=>{const i=r?eAe(t,s):t;return tAe(i,s,n)&&sAe(i,a,n)},aAe=t=>r3({...t,isVisibleThroughFrameFn:uL}),pL=t=>r3({...t,isVisibleThroughFrameFn:X9e}),rAe=t=>r3({...t,isVisibleThroughFrameFn:J9e(t.destination.axis)}),nAe=(t,s,a)=>{if(typeof a=="boolean")return a;if(!s)return!0;const{invisible:r,visible:n}=s;if(r[t])return!1;const i=n[t];return i?i.shouldAnimate:!0};function iAe(t,s){const a=t.page.marginBox,r={top:s.point.y,right:0,bottom:0,left:s.point.x};return fo(JS(a,r))}function Vx({afterDragging:t,destination:s,displacedBy:a,viewport:r,forceShouldAnimate:n,last:i}){return t.reduce(function(l,c){const m=iAe(c,a),u=c.descriptor.id;if(l.all.push(u),!aAe({target:m,destination:s,viewport:r,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const f=nAe(u,i,n),b={draggableId:u,shouldAnimate:f};return l.visible[u]=b,l},{all:[],visible:{},invisible:{}})}function oAe(t,s){if(!t.length)return 0;const a=t[t.length-1].descriptor.index;return s.inHomeList?a:a+1}function xD({insideDestination:t,inHomeList:s,displacedBy:a,destination:r}){const n=oAe(t,{inHomeList:s});return{displaced:Ux,displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:n}}}}function Ub({draggable:t,insideDestination:s,destination:a,viewport:r,displacedBy:n,last:i,index:o,forceShouldAnimate:l}){const c=Ap(t,a);if(o==null)return xD({insideDestination:s,inHomeList:c,displacedBy:n,destination:a});const m=s.find(w=>w.descriptor.index===o);if(!m)return xD({insideDestination:s,inHomeList:c,displacedBy:n,destination:a});const u=f1(t,s),h=s.indexOf(m),f=u.slice(h);return{displaced:Vx({afterDragging:f,destination:a,displacedBy:n,last:i,viewport:r.frame,forceShouldAnimate:l}),displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:o}}}}function Zc(t,s){return!!s.effected[t]}var lAe=({isMovingForward:t,destination:s,draggables:a,combine:r,afterCritical:n})=>{if(!s.isCombineEnabled)return null;const i=r.draggableId,l=a[i].descriptor.index;return Zc(i,n)?t?l:l-1:t?l+1:l},cAe=({isMovingForward:t,isInHomeList:s,insideDestination:a,location:r})=>{if(!a.length)return null;const n=r.index,i=t?n+1:n-1,o=a[0].descriptor.index,l=a[a.length-1].descriptor.index,c=s?l:l+1;return i<o||i>c?null:i},dAe=({isMovingForward:t,isInHomeList:s,draggable:a,draggables:r,destination:n,insideDestination:i,previousImpact:o,viewport:l,afterCritical:c})=>{const m=o.at;if(m||Ft(),m.type==="REORDER"){const h=cAe({isMovingForward:t,isInHomeList:s,location:m.destination,insideDestination:i});return h==null?null:Ub({draggable:a,insideDestination:i,destination:n,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})}const u=lAe({isMovingForward:t,destination:n,displaced:o.displaced,draggables:r,combine:m.combine,afterCritical:c});return u==null?null:Ub({draggable:a,insideDestination:i,destination:n,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:u})},uAe=({displaced:t,afterCritical:s,combineWith:a,displacedBy:r})=>{const n=!!(t.visible[a]||t.invisible[a]);return Zc(a,s)?n?Lr:Dp(r.point):n?r.point:Lr},mAe=({afterCritical:t,impact:s,draggables:a})=>{const r=h1(s);r||Ft();const n=r.draggableId,i=a[n].page.borderBox.center,o=uAe({displaced:s.displaced,afterCritical:t,combineWith:n,displacedBy:s.displacedBy});return Yr(i,o)};const hL=(t,s)=>s.margin[t.start]+s.borderBox[t.size]/2,pAe=(t,s)=>s.margin[t.end]+s.borderBox[t.size]/2,n3=(t,s,a)=>s[t.crossAxisStart]+a.margin[t.crossAxisStart]+a.borderBox[t.crossAxisSize]/2,gD=({axis:t,moveRelativeTo:s,isMoving:a})=>xu(t.line,s.marginBox[t.end]+hL(t,a),n3(t,s.marginBox,a)),yD=({axis:t,moveRelativeTo:s,isMoving:a})=>xu(t.line,s.marginBox[t.start]-pAe(t,a),n3(t,s.marginBox,a)),hAe=({axis:t,moveInto:s,isMoving:a})=>xu(t.line,s.contentBox[t.start]+hL(t,a),n3(t,s.contentBox,a));var fAe=({impact:t,draggable:s,draggables:a,droppable:r,afterCritical:n})=>{const i=Rp(r.descriptor.id,a),o=s.page,l=r.axis;if(!i.length)return hAe({axis:l,moveInto:r.page,isMoving:o});const{displaced:c,displacedBy:m}=t,u=c.all[0];if(u){const f=a[u];if(Zc(u,n))return yD({axis:l,moveRelativeTo:f.page,isMoving:o});const b=$b(f.page,m.point);return yD({axis:l,moveRelativeTo:b,isMoving:o})}const h=i[i.length-1];if(h.descriptor.id===s.descriptor.id)return o.borderBox.center;if(Zc(h.descriptor.id,n)){const f=$b(h.page,Dp(n.displacedBy.point));return gD({axis:l,moveRelativeTo:f,isMoving:o})}return gD({axis:l,moveRelativeTo:h.page,isMoving:o})},E_=(t,s)=>{const a=t.frame;return a?Yr(s,a.scroll.diff.displacement):s};const xAe=({impact:t,draggable:s,droppable:a,draggables:r,afterCritical:n})=>{const i=s.page.borderBox.center,o=t.at;return!a||!o?i:o.type==="REORDER"?fAe({impact:t,draggable:s,draggables:r,droppable:a,afterCritical:n}):mAe({impact:t,draggables:r,afterCritical:n})};var x1=t=>{const s=xAe(t),a=t.droppable;return a?E_(a,s):s},fL=(t,s)=>{const a=ii(s,t.scroll.initial),r=Dp(a);return{frame:fo({top:s.y,bottom:s.y+t.frame.height,left:s.x,right:s.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:s,diff:{value:a,displacement:r}}}};function bD(t,s){return t.map(a=>s[a])}function gAe(t,s){for(let a=0;a<s.length;a++){const r=s[a].visible[t];if(r)return r}return null}var yAe=({impact:t,viewport:s,destination:a,draggables:r,maxScrollChange:n})=>{const i=fL(s,Yr(s.scroll.current,n)),o=a.frame?t3(a,Yr(a.frame.scroll.current,n)):a,l=t.displaced,c=Vx({afterDragging:bD(l.all,r),destination:a,displacedBy:t.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),m=Vx({afterDragging:bD(l.all,r),destination:o,displacedBy:t.displacedBy,viewport:s.frame,last:l,forceShouldAnimate:!1}),u={},h={},f=[l,c,m];return l.all.forEach(w=>{const S=gAe(w,f);if(S){h[w]=S;return}u[w]=!0}),{...t,displaced:{all:l.all,invisible:u,visible:h}}},bAe=(t,s)=>Yr(t.scroll.diff.displacement,s),i3=({pageBorderBoxCenter:t,draggable:s,viewport:a})=>{const r=bAe(a,t),n=ii(r,s.page.borderBox.center);return Yr(s.client.borderBox.center,n)},xL=({draggable:t,destination:s,newPageBorderBoxCenter:a,viewport:r,withDroppableDisplacement:n,onlyOnMainAxis:i=!1})=>{const o=ii(a,t.page.borderBox.center),c={target:Tg(t.page.borderBox,o),destination:s,withDroppableDisplacement:n,viewport:r};return i?rAe(c):pL(c)},vAe=({isMovingForward:t,draggable:s,destination:a,draggables:r,previousImpact:n,viewport:i,previousPageBorderBoxCenter:o,previousClientSelection:l,afterCritical:c})=>{if(!a.isEnabled)return null;const m=Rp(a.descriptor.id,r),u=Ap(s,a),h=Q9e({isMovingForward:t,draggable:s,destination:a,insideDestination:m,previousImpact:n})||dAe({isMovingForward:t,isInHomeList:u,draggable:s,draggables:r,destination:a,insideDestination:m,previousImpact:n,viewport:i,afterCritical:c});if(!h)return null;const f=x1({impact:h,draggable:s,droppable:a,draggables:r,afterCritical:c});if(xL({draggable:s,destination:a,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:i3({pageBorderBoxCenter:f,draggable:s,viewport:i}),impact:h,scrollJumpRequest:null};const w=ii(f,o),S=yAe({impact:h,viewport:i,destination:a,draggables:r,maxScrollChange:w});return{clientSelection:l,impact:S,scrollJumpRequest:w}};const fn=t=>{const s=t.subject.active;return s||Ft(),s};var jAe=({isMovingForward:t,pageBorderBoxCenter:s,source:a,droppables:r,viewport:n})=>{const i=a.subject.active;if(!i)return null;const o=a.axis,l=Yi(i[o.start],i[o.end]),c=p1(r).filter(u=>u!==a).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>uL(n.frame)(fn(u))).filter(u=>{const h=fn(u);return t?i[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<i[o.crossAxisStart]}).filter(u=>{const h=fn(u),f=Yi(h[o.start],h[o.end]);return l(h[o.start])||l(h[o.end])||f(i[o.start])||f(i[o.end])}).sort((u,h)=>{const f=fn(u)[o.crossAxisStart],b=fn(h)[o.crossAxisStart];return t?f-b:b-f}).filter((u,h,f)=>fn(u)[o.crossAxisStart]===fn(f[0])[o.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const m=c.filter(u=>Yi(fn(u)[o.start],fn(u)[o.end])(s[o.line]));return m.length===1?m[0]:m.length>1?m.sort((u,h)=>fn(u)[o.start]-fn(h)[o.start])[0]:c.sort((u,h)=>{const f=hD(s,fD(fn(u))),b=hD(s,fD(fn(h)));return f!==b?f-b:fn(u)[o.start]-fn(h)[o.start]})[0]};const vD=(t,s)=>{const a=t.page.borderBox.center;return Zc(t.descriptor.id,s)?ii(a,s.displacedBy.point):a},NAe=(t,s)=>{const a=t.page.borderBox;return Zc(t.descriptor.id,s)?Tg(a,Dp(s.displacedBy.point)):a};var wAe=({pageBorderBoxCenter:t,viewport:s,destination:a,insideDestination:r,afterCritical:n})=>r.filter(o=>pL({target:NAe(o,n),destination:a,viewport:s.frame,withDroppableDisplacement:!0})).sort((o,l)=>{const c=Bx(t,E_(a,vD(o,n))),m=Bx(t,E_(a,vD(l,n)));return c<m?-1:m<c?1:o.descriptor.index-l.descriptor.index})[0]||null,Mg=Fr(function(s,a){const r=a[s.line];return{value:r,point:xu(s.line,r)}});const _Ae=(t,s,a)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return xu(r.line,s[r.line]);const n=t.subject.page.contentBox[r.size],c=Rp(t.descriptor.id,a).reduce((m,u)=>m+u.client.marginBox[r.size],0)+s[r.line]-n;return c<=0?null:xu(r.line,c)},gL=(t,s)=>({...t,scroll:{...t.scroll,max:s}}),yL=(t,s,a)=>{const r=t.frame;Ap(s,t)&&Ft(),t.subject.withPlaceholder&&Ft();const n=Mg(t.axis,s.displaceBy).point,i=_Ae(t,n,a),o={placeholderSize:n,increasedBy:i,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const u=fp({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return{...t,subject:u}}const l=i?Yr(r.scroll.max,i):r.scroll.max,c=gL(r,l),m=fp({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:c});return{...t,subject:m,frame:c}},SAe=t=>{const s=t.subject.withPlaceholder;s||Ft();const a=t.frame;if(!a){const o=fp({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:o}}const r=s.oldFrameMaxScroll;r||Ft();const n=gL(a,r),i=fp({page:t.subject.page,axis:t.axis,frame:n,withPlaceholder:null});return{...t,subject:i,frame:n}};var CAe=({previousPageBorderBoxCenter:t,moveRelativeTo:s,insideDestination:a,draggable:r,draggables:n,destination:i,viewport:o,afterCritical:l})=>{if(!s){if(a.length)return null;const h={displaced:Ux,displacedBy:dL,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},f=x1({impact:h,draggable:r,droppable:i,draggables:n,afterCritical:l}),b=Ap(r,i)?i:yL(i,r,n);return xL({draggable:r,destination:b,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=t[i.axis.line]<=s.page.borderBox.center[i.axis.line],m=(()=>{const h=s.descriptor.index;return s.descriptor.id===r.descriptor.id||c?h:h+1})(),u=Mg(i.axis,r.displaceBy);return Ub({draggable:r,insideDestination:a,destination:i,viewport:o,displacedBy:u,last:Ux,index:m})},PAe=({isMovingForward:t,previousPageBorderBoxCenter:s,draggable:a,isOver:r,draggables:n,droppables:i,viewport:o,afterCritical:l})=>{const c=jAe({isMovingForward:t,pageBorderBoxCenter:s,source:r,droppables:i,viewport:o});if(!c)return null;const m=Rp(c.descriptor.id,n),u=wAe({pageBorderBoxCenter:s,viewport:o,destination:c,insideDestination:m,afterCritical:l}),h=CAe({previousPageBorderBoxCenter:s,destination:c,draggable:a,draggables:n,moveRelativeTo:u,insideDestination:m,viewport:o,afterCritical:l});if(!h)return null;const f=x1({impact:h,draggable:a,droppable:c,draggables:n,afterCritical:l});return{clientSelection:i3({pageBorderBoxCenter:f,draggable:a,viewport:o}),impact:h,scrollJumpRequest:null}},di=t=>{const s=t.at;return s?s.type==="REORDER"?s.destination.droppableId:s.combine.droppableId:null};const kAe=(t,s)=>{const a=di(t);return a?s[a]:null};var EAe=({state:t,type:s})=>{const a=kAe(t.impact,t.dimensions.droppables),r=!!a,n=t.dimensions.droppables[t.critical.droppable.id],i=a||n,o=i.axis.direction,l=o==="vertical"&&(s==="MOVE_UP"||s==="MOVE_DOWN")||o==="horizontal"&&(s==="MOVE_LEFT"||s==="MOVE_RIGHT");if(l&&!r)return null;const c=s==="MOVE_DOWN"||s==="MOVE_RIGHT",m=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,{draggables:h,droppables:f}=t.dimensions;return l?vAe({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:m,destination:i,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):PAe({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:m,isOver:i,draggables:h,droppables:f,viewport:t.viewport,afterCritical:t.afterCritical})};function Ld(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function bL(t){const s=Yi(t.top,t.bottom),a=Yi(t.left,t.right);return function(n){return s(n.y)&&a(n.x)}}function TAe(t,s){return t.left<s.right&&t.right>s.left&&t.top<s.bottom&&t.bottom>s.top}function MAe({pageBorderBox:t,draggable:s,candidates:a}){const r=s.page.borderBox.center,n=a.map(i=>{const o=i.axis,l=xu(i.axis.line,t.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:Bx(r,l)}}).sort((i,o)=>o.distance-i.distance);return n[0]?n[0].id:null}function DAe({pageBorderBox:t,draggable:s,droppables:a}){const r=p1(a).filter(n=>{if(!n.isEnabled)return!1;const i=n.subject.active;if(!i||!TAe(t,i))return!1;if(bL(i)(t.center))return!0;const o=n.axis,l=i.center[o.crossAxisLine],c=t[o.crossAxisStart],m=t[o.crossAxisEnd],u=Yi(i[o.crossAxisStart],i[o.crossAxisEnd]),h=u(c),f=u(m);return!h&&!f?!0:h?c<l:m>l});return r.length?r.length===1?r[0].descriptor.id:MAe({pageBorderBox:t,draggable:s,candidates:r}):null}const vL=(t,s)=>fo(Tg(t,s));var RAe=(t,s)=>{const a=t.frame;return a?vL(s,a.scroll.diff.value):s};function jL({displaced:t,id:s}){return!!(t.visible[s]||t.invisible[s])}function AAe({draggable:t,closest:s,inHomeList:a}){return s?a&&s.descriptor.index>t.descriptor.index?s.descriptor.index-1:s.descriptor.index:null}var IAe=({pageBorderBoxWithDroppableScroll:t,draggable:s,destination:a,insideDestination:r,last:n,viewport:i,afterCritical:o})=>{const l=a.axis,c=Mg(a.axis,s.displaceBy),m=c.value,u=t[l.start],h=t[l.end],b=f1(s,r).find(S=>{const j=S.descriptor.id,v=S.page.borderBox.center[l.line],N=Zc(j,o),C=jL({displaced:n,id:j});return N?C?h<=v:u<v-m:C?h<=v+m:u<v})||null,w=AAe({draggable:s,closest:b,inHomeList:Ap(s,a)});return Ub({draggable:s,insideDestination:r,destination:a,viewport:i,last:n,displacedBy:c,index:w})};const OAe=4;var FAe=({draggable:t,pageBorderBoxWithDroppableScroll:s,previousImpact:a,destination:r,insideDestination:n,afterCritical:i})=>{if(!r.isCombineEnabled)return null;const o=r.axis,l=Mg(r.axis,t.displaceBy),c=l.value,m=s[o.start],u=s[o.end],f=f1(t,n).find(w=>{const S=w.descriptor.id,j=w.page.borderBox,N=j[o.size]/OAe,C=Zc(S,i),P=jL({displaced:a.displaced,id:S});return C?P?u>j[o.start]+N&&u<j[o.end]-N:m>j[o.start]-c+N&&m<j[o.end]-c-N:P?u>j[o.start]+c+N&&u<j[o.end]+c-N:m>j[o.start]+N&&m<j[o.end]-N});return f?{displacedBy:l,displaced:a.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:r.descriptor.id}}}:null},NL=({pageOffset:t,draggable:s,draggables:a,droppables:r,previousImpact:n,viewport:i,afterCritical:o})=>{const l=vL(s.page.borderBox,t),c=DAe({pageBorderBox:l,draggable:s,droppables:r});if(!c)return Z9e;const m=r[c],u=Rp(m.descriptor.id,a),h=RAe(m,l);return FAe({pageBorderBoxWithDroppableScroll:h,draggable:s,previousImpact:n,destination:m,insideDestination:u,afterCritical:o})||IAe({pageBorderBoxWithDroppableScroll:h,draggable:s,destination:m,insideDestination:u,last:n.displaced,viewport:i,afterCritical:o})},o3=(t,s)=>({...t,[s.descriptor.id]:s});const LAe=({previousImpact:t,impact:s,droppables:a})=>{const r=di(t),n=di(s);if(!r||r===n)return a;const i=a[r];if(!i.subject.withPlaceholder)return a;const o=SAe(i);return o3(a,o)};var $Ae=({draggable:t,draggables:s,droppables:a,previousImpact:r,impact:n})=>{const i=LAe({previousImpact:r,impact:n,droppables:a}),o=di(n);if(!o)return i;const l=a[o];if(Ap(t,l)||l.subject.withPlaceholder)return i;const c=yL(l,t,s);return o3(i,c)},sx=({state:t,clientSelection:s,dimensions:a,viewport:r,impact:n,scrollJumpRequest:i})=>{const o=r||t.viewport,l=a||t.dimensions,c=s||t.current.client.selection,m=ii(c,t.initial.client.selection),u={offset:m,selection:c,borderBoxCenter:Yr(t.initial.client.borderBoxCenter,m)},h={selection:Yr(u.selection,o.scroll.current),borderBoxCenter:Yr(u.borderBoxCenter,o.scroll.current),offset:Yr(u.offset,o.scroll.diff.value)},f={client:u,page:h};if(t.phase==="COLLECTING")return{...t,dimensions:l,viewport:o,current:f};const b=l.draggables[t.critical.draggable.id],w=n||NL({pageOffset:h.offset,draggable:b,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),S=$Ae({draggable:b,impact:w,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return{...t,current:f,dimensions:{draggables:l.draggables,droppables:S},impact:w,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function zAe(t,s){return t.map(a=>s[a])}var wL=({impact:t,viewport:s,draggables:a,destination:r,forceShouldAnimate:n})=>{const i=t.displaced,o=zAe(i.all,a),l=Vx({afterDragging:o,destination:r,displacedBy:t.displacedBy,viewport:s.frame,forceShouldAnimate:n,last:i});return{...t,displaced:l}},_L=({impact:t,draggable:s,droppable:a,draggables:r,viewport:n,afterCritical:i})=>{const o=x1({impact:t,draggable:s,draggables:r,droppable:a,afterCritical:i});return i3({pageBorderBoxCenter:o,draggable:s,viewport:n})},SL=({state:t,dimensions:s,viewport:a})=>{t.movementMode!=="SNAP"&&Ft();const r=t.impact,n=a||t.viewport,i=s||t.dimensions,{draggables:o,droppables:l}=i,c=o[t.critical.draggable.id],m=di(r);m||Ft();const u=l[m],h=wL({impact:r,viewport:n,destination:u,draggables:o}),f=_L({impact:h,draggable:c,droppable:u,draggables:o,viewport:n,afterCritical:t.afterCritical});return sx({impact:h,clientSelection:f,state:t,dimensions:i,viewport:n})},qAe=t=>({index:t.index,droppableId:t.droppableId}),CL=({draggable:t,home:s,draggables:a,viewport:r})=>{const n=Mg(s.axis,t.displaceBy),i=Rp(s.descriptor.id,a),o=i.indexOf(t);o===-1&&Ft();const l=i.slice(o+1),c=l.reduce((f,b)=>(f[b.descriptor.id]=!0,f),{}),m={inVirtualList:s.descriptor.mode==="virtual",displacedBy:n,effected:c};return{impact:{displaced:Vx({afterDragging:l,destination:s,displacedBy:n,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:n,at:{type:"REORDER",destination:qAe(t.descriptor)}},afterCritical:m}},BAe=(t,s)=>({draggables:t.draggables,droppables:o3(t.droppables,s)}),UAe=({draggable:t,offset:s,initialWindowScroll:a})=>{const r=$b(t.client,s),n=zb(r,a);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:n}},VAe=t=>{const s=t.frame;return s||Ft(),s},HAe=({additions:t,updatedDroppables:s,viewport:a})=>{const r=a.scroll.diff.value;return t.map(n=>{const i=n.descriptor.droppableId,o=s[i],c=VAe(o).scroll.diff.value,m=Yr(r,c);return UAe({draggable:n,offset:m,initialWindowScroll:a.scroll.initial})})},WAe=({state:t,published:s})=>{const a=s.modified.map(v=>{const N=t.dimensions.droppables[v.droppableId];return t3(N,v.scroll)}),r={...t.dimensions.droppables,...lL(a)},n=cL(HAe({additions:s.additions,updatedDroppables:r,viewport:t.viewport})),i={...t.dimensions.draggables,...n};s.removals.forEach(v=>{delete i[v]});const o={droppables:r,draggables:i},l=di(t.impact),c=l?o.droppables[l]:null,m=o.draggables[t.critical.draggable.id],u=o.droppables[t.critical.droppable.id],{impact:h,afterCritical:f}=CL({draggable:m,home:u,draggables:i,viewport:t.viewport}),b=c&&c.isCombineEnabled?t.impact:h,w=NL({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:b,viewport:t.viewport,afterCritical:f}),S={...t,phase:"DRAGGING",impact:w,onLiftImpact:h,dimensions:o,afterCritical:f,forceShouldAnimate:!1};return t.phase==="COLLECTING"?S:{...S,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const T_=t=>t.movementMode==="SNAP",BN=(t,s,a)=>{const r=BAe(t.dimensions,s);return!T_(t)||a?sx({state:t,dimensions:r}):SL({state:t,dimensions:r})};function UN(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const jD={phase:"IDLE",completed:null,shouldFlush:!1};var YAe=(t=jD,s)=>{if(s.type==="FLUSH")return{...jD,shouldFlush:!0};if(s.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&Ft();const{critical:a,clientSelection:r,viewport:n,dimensions:i,movementMode:o}=s.payload,l=i.draggables[a.draggable.id],c=i.droppables[a.droppable.id],m={selection:r,borderBoxCenter:l.client.borderBox.center,offset:Lr},u={client:m,page:{selection:Yr(m.selection,n.scroll.initial),borderBoxCenter:Yr(m.selection,n.scroll.initial),offset:Yr(m.selection,n.scroll.diff.value)}},h=p1(i.droppables).every(S=>!S.isFixedOnPage),{impact:f,afterCritical:b}=CL({draggable:l,home:c,draggables:i.draggables,viewport:n});return{phase:"DRAGGING",isDragging:!0,critical:a,movementMode:o,dimensions:i,initial:u,current:u,isWindowScrollAllowed:h,impact:f,afterCritical:b,onLiftImpact:f,viewport:n,scrollJumpRequest:null,forceShouldAnimate:null}}if(s.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&Ft(),{...t,phase:"COLLECTING"});if(s.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||Ft(),WAe({state:t,published:s.payload});if(s.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Ld(t)||Ft();const{client:a}=s.payload;return Vc(a,t.current.client.selection)?t:sx({state:t,clientSelection:a,impact:T_(t)?t.impact:null})}if(s.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return UN(t);Ld(t)||Ft();const{id:a,newScroll:r}=s.payload,n=t.dimensions.droppables[a];if(!n)return t;const i=t3(n,r);return BN(t,i,!1)}if(s.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Ld(t)||Ft();const{id:a,isEnabled:r}=s.payload,n=t.dimensions.droppables[a];n||Ft(),n.isEnabled===r&&Ft();const i={...n,isEnabled:r};return BN(t,i,!0)}if(s.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Ld(t)||Ft();const{id:a,isCombineEnabled:r}=s.payload,n=t.dimensions.droppables[a];n||Ft(),n.isCombineEnabled===r&&Ft();const i={...n,isCombineEnabled:r};return BN(t,i,!0)}if(s.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Ld(t)||Ft(),t.isWindowScrollAllowed||Ft();const a=s.payload.newScroll;if(Vc(t.viewport.scroll.current,a))return UN(t);const r=fL(t.viewport,a);return T_(t)?SL({state:t,viewport:r}):sx({state:t,viewport:r})}if(s.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ld(t))return t;const a=s.payload.maxScroll;if(Vc(a,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:a}};return{...t,viewport:r}}if(s.type==="MOVE_UP"||s.type==="MOVE_DOWN"||s.type==="MOVE_LEFT"||s.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&Ft();const a=EAe({state:t,type:s.type});return a?sx({state:t,impact:a.impact,clientSelection:a.clientSelection,scrollJumpRequest:a.scrollJumpRequest}):t}if(s.type==="DROP_PENDING"){const a=s.payload.reason;return t.phase!=="COLLECTING"&&Ft(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:a}}if(s.type==="DROP_ANIMATE"){const{completed:a,dropDuration:r,newHomeClientOffset:n}=s.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||Ft(),{phase:"DROP_ANIMATING",completed:a,dropDuration:r,newHomeClientOffset:n,dimensions:t.dimensions}}if(s.type==="DROP_COMPLETE"){const{completed:a}=s.payload;return{phase:"IDLE",completed:a,shouldFlush:!1}}return t};function ga(t,s){return t instanceof Object&&"type"in t&&t.type===s}const GAe=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),KAe=t=>({type:"LIFT",payload:t}),QAe=t=>({type:"INITIAL_PUBLISH",payload:t}),ZAe=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),XAe=()=>({type:"COLLECTION_STARTING",payload:null}),JAe=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),eIe=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),tIe=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),PL=t=>({type:"MOVE",payload:t}),sIe=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),aIe=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),rIe=()=>({type:"MOVE_UP",payload:null}),nIe=()=>({type:"MOVE_DOWN",payload:null}),iIe=()=>({type:"MOVE_RIGHT",payload:null}),oIe=()=>({type:"MOVE_LEFT",payload:null}),l3=()=>({type:"FLUSH",payload:null}),lIe=t=>({type:"DROP_ANIMATE",payload:t}),c3=t=>({type:"DROP_COMPLETE",payload:t}),kL=t=>({type:"DROP",payload:t}),cIe=t=>({type:"DROP_PENDING",payload:t}),EL=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var dIe=t=>({getState:s,dispatch:a})=>r=>n=>{if(!ga(n,"LIFT")){r(n);return}const{id:i,clientSelection:o,movementMode:l}=n.payload,c=s();c.phase==="DROP_ANIMATING"&&a(c3({completed:c.completed})),s().phase!=="IDLE"&&Ft(),a(l3()),a(GAe({draggableId:i,movementMode:l}));const u={draggableId:i,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:h,dimensions:f,viewport:b}=t.startPublishing(u);a(QAe({critical:h,dimensions:f,clientSelection:o,movementMode:l,viewport:b}))},uIe=t=>()=>s=>a=>{ga(a,"INITIAL_PUBLISH")&&t.dragging(),ga(a,"DROP_ANIMATE")&&t.dropping(a.payload.completed.result.reason),(ga(a,"FLUSH")||ga(a,"DROP_COMPLETE"))&&t.resting(),s(a)};const d3={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Hx={opacity:{drop:0,combining:.7},scale:{drop:.75}},TL={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Dd=`${TL.outOfTheWay}s ${d3.outOfTheWay}`,ax={fluid:`opacity ${Dd}`,snap:`transform ${Dd}, opacity ${Dd}`,drop:t=>{const s=`${t}s ${d3.drop}`;return`transform ${s}, opacity ${s}`},outOfTheWay:`transform ${Dd}`,placeholder:`height ${Dd}, width ${Dd}, margin ${Dd}`},ND=t=>Vc(t,Lr)?void 0:`translate(${t.x}px, ${t.y}px)`,M_={moveTo:ND,drop:(t,s)=>{const a=ND(t);if(a)return s?`${a} scale(${Hx.scale.drop})`:a}},{minDropTime:D_,maxDropTime:ML}=TL,mIe=ML-D_,wD=1500,pIe=.6;var hIe=({current:t,destination:s,reason:a})=>{const r=Bx(t,s);if(r<=0)return D_;if(r>=wD)return ML;const n=r/wD,i=D_+mIe*n,o=a==="CANCEL"?i*pIe:i;return Number(o.toFixed(2))},fIe=({impact:t,draggable:s,dimensions:a,viewport:r,afterCritical:n})=>{const{draggables:i,droppables:o}=a,l=di(t),c=l?o[l]:null,m=o[s.descriptor.droppableId],u=_L({impact:t,draggable:s,draggables:i,afterCritical:n,droppable:c||m,viewport:r});return ii(u,s.client.borderBox.center)},xIe=({draggables:t,reason:s,lastImpact:a,home:r,viewport:n,onLiftImpact:i})=>!a.at||s!=="DROP"?{impact:wL({draggables:t,impact:i,destination:r,viewport:n,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:a.at.type==="REORDER"?{impact:a,didDropInsideDroppable:!0}:{impact:{...a,displaced:Ux},didDropInsideDroppable:!0};const gIe=({getState:t,dispatch:s})=>a=>r=>{if(!ga(r,"DROP")){a(r);return}const n=t(),i=r.payload.reason;if(n.phase==="COLLECTING"){s(cIe({reason:i}));return}if(n.phase==="IDLE")return;n.phase==="DROP_PENDING"&&n.isWaiting&&Ft(),n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||Ft();const l=n.critical,c=n.dimensions,m=c.draggables[n.critical.draggable.id],{impact:u,didDropInsideDroppable:h}=xIe({reason:i,lastImpact:n.impact,afterCritical:n.afterCritical,onLiftImpact:n.onLiftImpact,home:n.dimensions.droppables[n.critical.droppable.id],viewport:n.viewport,draggables:n.dimensions.draggables}),f=h?s3(u):null,b=h?h1(u):null,w={index:l.draggable.index,droppableId:l.droppable.id},S={draggableId:m.descriptor.id,type:m.descriptor.type,source:w,reason:i,mode:n.movementMode,destination:f,combine:b},j=fIe({impact:u,draggable:m,dimensions:c,viewport:n.viewport,afterCritical:n.afterCritical}),v={critical:n.critical,afterCritical:n.afterCritical,result:S,impact:u};if(!(!Vc(n.current.client.offset,j)||!!S.combine)){s(c3({completed:v}));return}const C=hIe({current:n.current.client.offset,destination:j,reason:i});s(lIe({newHomeClientOffset:j,dropDuration:C,completed:v}))};var DL=()=>({x:window.pageXOffset,y:window.pageYOffset});function yIe(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:s=>{s.target!==window&&s.target!==window.document||t()}}}function bIe({onWindowScroll:t}){function s(){t(DL())}const a=qx(s),r=yIe(a);let n=Uc;function i(){return n!==Uc}function o(){i()&&Ft(),n=qi(window,[r])}function l(){i()||Ft(),a.cancel(),n(),n=Uc}return{start:o,stop:l,isActive:i}}const vIe=t=>ga(t,"DROP_COMPLETE")||ga(t,"DROP_ANIMATE")||ga(t,"FLUSH"),jIe=t=>{const s=bIe({onWindowScroll:a=>{t.dispatch(sIe({newScroll:a}))}});return a=>r=>{!s.isActive()&&ga(r,"INITIAL_PUBLISH")&&s.start(),s.isActive()&&vIe(r)&&s.stop(),a(r)}};var NIe=t=>{let s=!1,a=!1;const r=setTimeout(()=>{a=!0}),n=i=>{s||a||(s=!0,t(i),clearTimeout(r))};return n.wasCalled=()=>s,n},wIe=()=>{const t=[],s=n=>{const i=t.findIndex(l=>l.timerId===n);i===-1&&Ft();const[o]=t.splice(i,1);o.callback()};return{add:n=>{const i=setTimeout(()=>s(i)),o={timerId:i,callback:n};t.push(o)},flush:()=>{if(!t.length)return;const n=[...t];t.length=0,n.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const _Ie=(t,s)=>t==null&&s==null?!0:t==null||s==null?!1:t.droppableId===s.droppableId&&t.index===s.index,SIe=(t,s)=>t==null&&s==null?!0:t==null||s==null?!1:t.draggableId===s.draggableId&&t.droppableId===s.droppableId,CIe=(t,s)=>{if(t===s)return!0;const a=t.draggable.id===s.draggable.id&&t.draggable.droppableId===s.draggable.droppableId&&t.draggable.type===s.draggable.type&&t.draggable.index===s.draggable.index,r=t.droppable.id===s.droppable.id&&t.droppable.type===s.droppable.type;return a&&r},Xh=(t,s)=>{s()},ky=(t,s)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:s});function VN(t,s,a,r){if(!t){a(r(s));return}const n=NIe(a);t(s,{announce:n}),n.wasCalled()||a(r(s))}var PIe=(t,s)=>{const a=wIe();let r=null;const n=(h,f)=>{r&&Ft(),Xh("onBeforeCapture",()=>{const b=t().onBeforeCapture;b&&b({draggableId:h,mode:f})})},i=(h,f)=>{r&&Ft(),Xh("onBeforeDragStart",()=>{const b=t().onBeforeDragStart;b&&b(ky(h,f))})},o=(h,f)=>{r&&Ft();const b=ky(h,f);r={mode:f,lastCritical:h,lastLocation:b.source,lastCombine:null},a.add(()=>{Xh("onDragStart",()=>VN(t().onDragStart,b,s,tb.onDragStart))})},l=(h,f)=>{const b=s3(f),w=h1(f);r||Ft();const S=!CIe(h,r.lastCritical);S&&(r.lastCritical=h);const j=!_Ie(r.lastLocation,b);j&&(r.lastLocation=b);const v=!SIe(r.lastCombine,w);if(v&&(r.lastCombine=w),!S&&!j&&!v)return;const N={...ky(h,r.mode),combine:w,destination:b};a.add(()=>{Xh("onDragUpdate",()=>VN(t().onDragUpdate,N,s,tb.onDragUpdate))})},c=()=>{r||Ft(),a.flush()},m=h=>{r||Ft(),r=null,Xh("onDragEnd",()=>VN(t().onDragEnd,h,s,tb.onDragEnd))};return{beforeCapture:n,beforeStart:i,start:o,update:l,flush:c,drop:m,abort:()=>{if(!r)return;const h={...ky(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};m(h)}}},kIe=(t,s)=>{const a=PIe(t,s);return r=>n=>i=>{if(ga(i,"BEFORE_INITIAL_CAPTURE")){a.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(ga(i,"INITIAL_PUBLISH")){const l=i.payload.critical;a.beforeStart(l,i.payload.movementMode),n(i),a.start(l,i.payload.movementMode);return}if(ga(i,"DROP_COMPLETE")){const l=i.payload.completed.result;a.flush(),n(i),a.drop(l);return}if(n(i),ga(i,"FLUSH")){a.abort();return}const o=r.getState();o.phase==="DRAGGING"&&a.update(o.critical,o.impact)}};const EIe=t=>s=>a=>{if(!ga(a,"DROP_ANIMATION_FINISHED")){s(a);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&Ft(),t.dispatch(c3({completed:r.completed}))},TIe=t=>{let s=null,a=null;function r(){a&&(cancelAnimationFrame(a),a=null),s&&(s(),s=null)}return n=>i=>{if((ga(i,"FLUSH")||ga(i,"DROP_COMPLETE")||ga(i,"DROP_ANIMATION_FINISHED"))&&r(),n(i),!ga(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(EL())}};a=requestAnimationFrame(()=>{a=null,s=qi(window,[o])})}};var MIe=t=>()=>s=>a=>{(ga(a,"DROP_COMPLETE")||ga(a,"FLUSH")||ga(a,"DROP_ANIMATE"))&&t.stopPublishing(),s(a)},DIe=t=>{let s=!1;return()=>a=>r=>{if(ga(r,"INITIAL_PUBLISH")){s=!0,t.tryRecordFocus(r.payload.critical.draggable.id),a(r),t.tryRestoreFocusRecorded();return}if(a(r),!!s){if(ga(r,"FLUSH")){s=!1,t.tryRestoreFocusRecorded();return}if(ga(r,"DROP_COMPLETE")){s=!1;const n=r.payload.completed.result;n.combine&&t.tryShiftRecord(n.draggableId,n.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const RIe=t=>ga(t,"DROP_COMPLETE")||ga(t,"DROP_ANIMATE")||ga(t,"FLUSH");var AIe=t=>s=>a=>r=>{if(RIe(r)){t.stop(),a(r);return}if(ga(r,"INITIAL_PUBLISH")){a(r);const n=s.getState();n.phase!=="DRAGGING"&&Ft(),t.start(n);return}a(r),t.scroll(s.getState())};const IIe=t=>s=>a=>{if(s(a),!ga(a,"PUBLISH_WHILE_DRAGGING"))return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(kL({reason:r.reason})))},OIe=GF;var FIe=({dimensionMarshal:t,focusMarshal:s,styleMarshal:a,getResponders:r,announce:n,autoScroller:i})=>YF(YAe,OIe(ARe(uIe(a),MIe(t),dIe(t),gIe,EIe,TIe,IIe,AIe(i),jIe,DIe(s),kIe(r,n))));const HN=()=>({additions:{},removals:{},modified:{}});function LIe({registry:t,callbacks:s}){let a=HN(),r=null;const n=()=>{r||(s.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:m,modified:u}=a,h=Object.keys(c).map(w=>t.draggable.getById(w).getDimension(Lr)).sort((w,S)=>w.descriptor.index-S.descriptor.index),f=Object.keys(u).map(w=>{const j=t.droppable.getById(w).callbacks.getScrollWhileDragging();return{droppableId:w,scroll:j}}),b={additions:h,removals:Object.keys(m),modified:f};a=HN(),s.publish(b)}))};return{add:c=>{const m=c.descriptor.id;a.additions[m]=c,a.modified[c.descriptor.droppableId]=!0,a.removals[m]&&delete a.removals[m],n()},remove:c=>{const m=c.descriptor;a.removals[m.id]=!0,a.modified[m.droppableId]=!0,a.additions[m.id]&&delete a.additions[m.id],n()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,a=HN())}}}var RL=({scrollHeight:t,scrollWidth:s,height:a,width:r})=>{const n=ii({x:s,y:t},{x:r,y:a});return{x:Math.max(0,n.x),y:Math.max(0,n.y)}},AL=()=>{const t=document.documentElement;return t||Ft(),t},IL=()=>{const t=AL();return RL({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},$Ie=()=>{const t=DL(),s=IL(),a=t.y,r=t.x,n=AL(),i=n.clientWidth,o=n.clientHeight,l=r+i,c=a+o;return{frame:fo({top:a,left:r,right:l,bottom:c}),scroll:{initial:t,current:t,max:s,diff:{value:Lr,displacement:Lr}}}},zIe=({critical:t,scrollOptions:s,registry:a})=>{const r=$Ie(),n=r.scroll.current,i=t.droppable,o=a.droppable.getAllByType(i.type).map(u=>u.callbacks.getDimensionAndWatchScroll(n,s)),l=a.draggable.getAllByType(t.draggable.type).map(u=>u.getDimension(n));return{dimensions:{draggables:cL(l),droppables:lL(o)},critical:t,viewport:r}};function _D(t,s,a){return!(a.descriptor.id===s.id||a.descriptor.type!==s.type||t.droppable.getById(a.descriptor.droppableId).descriptor.mode!=="virtual")}var qIe=(t,s)=>{let a=null;const r=LIe({callbacks:{publish:s.publishWhileDragging,collectionStarting:s.collectionStarting},registry:t}),n=(f,b)=>{t.droppable.exists(f)||Ft(),a&&s.updateDroppableIsEnabled({id:f,isEnabled:b})},i=(f,b)=>{a&&(t.droppable.exists(f)||Ft(),s.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:b}))},o=(f,b)=>{a&&(t.droppable.exists(f)||Ft(),s.updateDroppableScroll({id:f,newScroll:b}))},l=(f,b)=>{a&&t.droppable.getById(f).callbacks.scroll(b)},c=()=>{if(!a)return;r.stop();const f=a.critical.droppable;t.droppable.getAllByType(f.type).forEach(b=>b.callbacks.dragStopped()),a.unsubscribe(),a=null},m=f=>{a||Ft();const b=a.critical.draggable;f.type==="ADDITION"&&_D(t,b,f.value)&&r.add(f.value),f.type==="REMOVAL"&&_D(t,b,f.value)&&r.remove(f.value)};return{updateDroppableIsEnabled:n,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:f=>{a&&Ft();const b=t.draggable.getById(f.draggableId),w=t.droppable.getById(b.descriptor.droppableId),S={draggable:b.descriptor,droppable:w.descriptor},j=t.subscribe(m);return a={critical:S,unsubscribe:j},zIe({critical:S,registry:t,scrollOptions:f.scrollOptions})},stopPublishing:c}},OL=(t,s)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===s?!1:t.completed.result.reason==="DROP",BIe=t=>{window.scrollBy(t.x,t.y)};const UIe=Fr(t=>p1(t).filter(s=>!(!s.isEnabled||!s.frame))),VIe=(t,s)=>UIe(s).find(r=>(r.frame||Ft(),bL(r.frame.pageMarginBox)(t)))||null;var HIe=({center:t,destination:s,droppables:a})=>{if(s){const n=a[s];return n.frame?n:null}return VIe(t,a)};const Wx={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var WIe=(t,s,a=()=>Wx)=>{const r=a(),n=t[s.size]*r.startFromPercentage,i=t[s.size]*r.maxScrollAtPercentage;return{startScrollingFrom:n,maxScrollValueAt:i}},FL=({startOfRange:t,endOfRange:s,current:a})=>{const r=s-t;return r===0?0:(a-t)/r},u3=1,YIe=(t,s,a=()=>Wx)=>{const r=a();if(t>s.startScrollingFrom)return 0;if(t<=s.maxScrollValueAt)return r.maxPixelScroll;if(t===s.startScrollingFrom)return u3;const i=1-FL({startOfRange:s.maxScrollValueAt,endOfRange:s.startScrollingFrom,current:t}),o=r.maxPixelScroll*r.ease(i);return Math.ceil(o)},GIe=(t,s,a)=>{const r=a(),n=r.durationDampening.accelerateAt,i=r.durationDampening.stopDampeningAt,o=s,l=i,m=Date.now()-o;if(m>=i)return t;if(m<n)return u3;const u=FL({startOfRange:n,endOfRange:l,current:m}),h=t*r.ease(u);return Math.ceil(h)},SD=({distanceToEdge:t,thresholds:s,dragStartTime:a,shouldUseTimeDampening:r,getAutoScrollerOptions:n})=>{const i=YIe(t,s,n);return i===0?0:r?Math.max(GIe(i,a,n),u3):i},CD=({container:t,distanceToEdges:s,dragStartTime:a,axis:r,shouldUseTimeDampening:n,getAutoScrollerOptions:i})=>{const o=WIe(t,r,i);return s[r.end]<s[r.start]?SD({distanceToEdge:s[r.end],thresholds:o,dragStartTime:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i}):-1*SD({distanceToEdge:s[r.start],thresholds:o,dragStartTime:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i})},KIe=({container:t,subject:s,proposedScroll:a})=>{const r=s.height>t.height,n=s.width>t.width;return!n&&!r?a:n&&r?null:{x:n?0:a.x,y:r?0:a.y}};const QIe=oL(t=>t===0?0:t);var LL=({dragStartTime:t,container:s,subject:a,center:r,shouldUseTimeDampening:n,getAutoScrollerOptions:i})=>{const o={top:r.y-s.top,right:s.right-r.x,bottom:s.bottom-r.y,left:r.x-s.left},l=CD({container:s,distanceToEdges:o,dragStartTime:t,axis:a3,shouldUseTimeDampening:n,getAutoScrollerOptions:i}),c=CD({container:s,distanceToEdges:o,dragStartTime:t,axis:mL,shouldUseTimeDampening:n,getAutoScrollerOptions:i}),m=QIe({x:c,y:l});if(Vc(m,Lr))return null;const u=KIe({container:s,subject:a,proposedScroll:m});return u?Vc(u,Lr)?null:u:null};const ZIe=oL(t=>t===0?0:t>0?1:-1),m3=(()=>{const t=(s,a)=>s<0?s:s>a?s-a:0;return({current:s,max:a,change:r})=>{const n=Yr(s,r),i={x:t(n.x,a.x),y:t(n.y,a.y)};return Vc(i,Lr)?null:i}})(),$L=({max:t,current:s,change:a})=>{const r={x:Math.max(s.x,t.x),y:Math.max(s.y,t.y)},n=ZIe(a),i=m3({max:r,current:s,change:n});return!i||n.x!==0&&i.x===0||n.y!==0&&i.y===0},p3=(t,s)=>$L({current:t.scroll.current,max:t.scroll.max,change:s}),XIe=(t,s)=>{if(!p3(t,s))return null;const a=t.scroll.max,r=t.scroll.current;return m3({current:r,max:a,change:s})},h3=(t,s)=>{const a=t.frame;return a?$L({current:a.scroll.current,max:a.scroll.max,change:s}):!1},JIe=(t,s)=>{const a=t.frame;return!a||!h3(t,s)?null:m3({current:a.scroll.current,max:a.scroll.max,change:s})};var eOe=({viewport:t,subject:s,center:a,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:i})=>{const o=LL({dragStartTime:r,container:t.frame,subject:s,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});return o&&p3(t,o)?o:null},tOe=({droppable:t,subject:s,center:a,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:i})=>{const o=t.frame;if(!o)return null;const l=LL({dragStartTime:r,container:o.pageMarginBox,subject:s,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});return l&&h3(t,l)?l:null},PD=({state:t,dragStartTime:s,shouldUseTimeDampening:a,scrollWindow:r,scrollDroppable:n,getAutoScrollerOptions:i})=>{const o=t.current.page.borderBoxCenter,c=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const h=t.viewport,f=eOe({dragStartTime:s,viewport:h,subject:c,center:o,shouldUseTimeDampening:a,getAutoScrollerOptions:i});if(f){r(f);return}}const m=HIe({center:o,destination:di(t.impact),droppables:t.dimensions.droppables});if(!m)return;const u=tOe({dragStartTime:s,droppable:m,subject:c,center:o,shouldUseTimeDampening:a,getAutoScrollerOptions:i});u&&n(m.descriptor.id,u)},sOe=({scrollWindow:t,scrollDroppable:s,getAutoScrollerOptions:a=()=>Wx})=>{const r=qx(t),n=qx(s);let i=null;const o=m=>{i||Ft();const{shouldUseTimeDampening:u,dragStartTime:h}=i;PD({state:m,scrollWindow:r,scrollDroppable:n,dragStartTime:h,shouldUseTimeDampening:u,getAutoScrollerOptions:a})};return{start:m=>{i&&Ft();const u=Date.now();let h=!1;const f=()=>{h=!0};PD({state:m,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:a}),i={dragStartTime:u,shouldUseTimeDampening:h},h&&o(m)},stop:()=>{i&&(r.cancel(),n.cancel(),i=null)},scroll:o}},aOe=({move:t,scrollDroppable:s,scrollWindow:a})=>{const r=(l,c)=>{const m=Yr(l.current.client.selection,c);t({client:m})},n=(l,c)=>{if(!h3(l,c))return c;const m=JIe(l,c);if(!m)return s(l.descriptor.id,c),null;const u=ii(c,m);return s(l.descriptor.id,u),ii(c,u)},i=(l,c,m)=>{if(!l||!p3(c,m))return m;const u=XIe(c,m);if(!u)return a(m),null;const h=ii(m,u);return a(h),ii(m,h)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const m=di(l.impact);m||Ft();const u=n(l.dimensions.droppables[m],c);if(!u)return;const h=l.viewport,f=i(l.isWindowScrollAllowed,h,u);f&&r(l,f)}},rOe=({scrollDroppable:t,scrollWindow:s,move:a,getAutoScrollerOptions:r})=>{const n=sOe({scrollWindow:s,scrollDroppable:t,getAutoScrollerOptions:r}),i=aOe({move:a,scrollWindow:s,scrollDroppable:t});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){n.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:n.start,stop:n.stop}};const xp="data-rfd",gp=(()=>{const t=`${xp}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),R_=(()=>{const t=`${xp}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),nOe=(()=>{const t=`${xp}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),kD={contextId:`${xp}-scroll-container-context-id`},iOe=t=>s=>`[${s}="${t}"]`,Jh=(t,s)=>t.map(a=>{const r=a.styles[s];return r?`${a.selector} { ${r} }`:""}).join(" "),oOe="pointer-events: none;";var lOe=t=>{const s=iOe(t),a=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:s(gp.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:oOe,dropAnimating:l}}})(),r=(()=>{const l=`
      transition: ${ax.outOfTheWay};
    `;return{selector:s(R_.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),n={selector:s(nOe.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,a,n,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Jh(o,"always"),resting:Jh(o,"resting"),dragging:Jh(o,"dragging"),dropAnimating:Jh(o,"dropAnimating"),userCancel:Jh(o,"userCancel")}};const ui=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?g.useLayoutEffect:g.useEffect,WN=()=>{const t=document.querySelector("head");return t||Ft(),t},ED=t=>{const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.type="text/css",s};function cOe(t,s){const a=ra(()=>lOe(t),[t]),r=g.useRef(null),n=g.useRef(null),i=ms(Fr(h=>{const f=n.current;f||Ft(),f.textContent=h}),[]),o=ms(h=>{const f=r.current;f||Ft(),f.textContent=h},[]);ui(()=>{!r.current&&!n.current||Ft();const h=ED(s),f=ED(s);return r.current=h,n.current=f,h.setAttribute(`${xp}-always`,t),f.setAttribute(`${xp}-dynamic`,t),WN().appendChild(h),WN().appendChild(f),o(a.always),i(a.resting),()=>{const b=w=>{const S=w.current;S||Ft(),WN().removeChild(S),w.current=null};b(r),b(n)}},[s,o,i,a.always,a.resting,t]);const l=ms(()=>i(a.dragging),[i,a.dragging]),c=ms(h=>{if(h==="DROP"){i(a.dropAnimating);return}i(a.userCancel)},[i,a.dropAnimating,a.userCancel]),m=ms(()=>{n.current&&i(a.resting)},[i,a.resting]);return ra(()=>({dragging:l,dropping:c,resting:m}),[l,c,m])}function zL(t,s){return Array.from(t.querySelectorAll(s))}var qL=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function g1(t){return t instanceof qL(t).HTMLElement}function dOe(t,s){const a=`[${gp.contextId}="${t}"]`,r=zL(document,a);if(!r.length)return null;const n=r.find(i=>i.getAttribute(gp.draggableId)===s);return!n||!g1(n)?null:n}function uOe(t){const s=g.useRef({}),a=g.useRef(null),r=g.useRef(null),n=g.useRef(!1),i=ms(function(f,b){const w={id:f,focus:b};return s.current[f]=w,function(){const j=s.current;j[f]!==w&&delete j[f]}},[]),o=ms(function(f){const b=dOe(t,f);b&&b!==document.activeElement&&b.focus()},[t]),l=ms(function(f,b){a.current===f&&(a.current=b)},[]),c=ms(function(){r.current||n.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const f=a.current;f&&o(f)}))},[o]),m=ms(function(f){a.current=null;const b=document.activeElement;b&&b.getAttribute(gp.draggableId)===f&&(a.current=f)},[]);return ui(()=>(n.current=!0,function(){n.current=!1;const f=r.current;f&&cancelAnimationFrame(f)}),[]),ra(()=>({register:i,tryRecordFocus:m,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[i,m,c,l])}function mOe(){const t={draggables:{},droppables:{}},s=[];function a(h){return s.push(h),function(){const b=s.indexOf(h);b!==-1&&s.splice(b,1)}}function r(h){s.length&&s.forEach(f=>f(h))}function n(h){return t.draggables[h]||null}function i(h){const f=n(h);return f||Ft(),f}const o={register:h=>{t.draggables[h.descriptor.id]=h,r({type:"ADDITION",value:h})},update:(h,f)=>{const b=t.draggables[f.descriptor.id];b&&b.uniqueId===h.uniqueId&&(delete t.draggables[f.descriptor.id],t.draggables[h.descriptor.id]=h)},unregister:h=>{const f=h.descriptor.id,b=n(f);b&&h.uniqueId===b.uniqueId&&(delete t.draggables[f],t.droppables[h.descriptor.droppableId]&&r({type:"REMOVAL",value:h}))},getById:i,findById:n,exists:h=>!!n(h),getAllByType:h=>Object.values(t.draggables).filter(f=>f.descriptor.type===h)};function l(h){return t.droppables[h]||null}function c(h){const f=l(h);return f||Ft(),f}const m={register:h=>{t.droppables[h.descriptor.id]=h},unregister:h=>{const f=l(h.descriptor.id);f&&h.uniqueId===f.uniqueId&&delete t.droppables[h.descriptor.id]},getById:c,findById:l,exists:h=>!!l(h),getAllByType:h=>Object.values(t.droppables).filter(f=>f.descriptor.type===h)};function u(){t.draggables={},t.droppables={},s.length=0}return{draggable:o,droppable:m,subscribe:a,clean:u}}function pOe(){const t=ra(mOe,[]);return g.useEffect(()=>function(){t.clean()},[t]),t}var f3=vt.createContext(null),Vb=()=>{const t=document.body;return t||Ft(),t};const hOe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},fOe=t=>`rfd-announcement-${t}`;function xOe(t){const s=ra(()=>fOe(t),[t]),a=g.useRef(null);return g.useEffect(function(){const i=document.createElement("div");return a.current=i,i.id=s,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),je(i.style,hOe),Vb().appendChild(i),function(){setTimeout(function(){const c=Vb();c.contains(i)&&c.removeChild(i),i===a.current&&(a.current=null)})}},[s]),ms(n=>{const i=a.current;if(i){i.textContent=n;return}},[])}const gOe={separator:"::"};function x3(t,s=gOe){const a=vt.useId();return ra(()=>`${t}${s.separator}${a}`,[s.separator,t,a])}function yOe({contextId:t,uniqueId:s}){return`rfd-hidden-text-${t}-${s}`}function bOe({contextId:t,text:s}){const a=x3("hidden-text",{separator:"-"}),r=ra(()=>yOe({contextId:t,uniqueId:a}),[a,t]);return g.useEffect(function(){const i=document.createElement("div");return i.id=r,i.textContent=s,i.style.display="none",Vb().appendChild(i),function(){const l=Vb();l.contains(i)&&l.removeChild(i)}},[r,s]),r}var y1=vt.createContext(null);function BL(t){const s=g.useRef(t);return g.useEffect(()=>{s.current=t}),s}function vOe(){let t=null;function s(){return!!t}function a(o){return o===t}function r(o){t&&Ft();const l={abandon:o};return t=l,l}function n(){t||Ft(),t=null}function i(){t&&(t.abandon(),n())}return{isClaimed:s,isActive:a,claim:r,release:n,tryAbandon:i}}function Yx(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const jOe=9,NOe=13,g3=27,UL=32,wOe=33,_Oe=34,SOe=35,COe=36,POe=37,kOe=38,EOe=39,TOe=40,MOe={[NOe]:!0,[jOe]:!0};var VL=t=>{MOe[t.keyCode]&&t.preventDefault()};const b1=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})(),HL=0,TD=5;function DOe(t,s){return Math.abs(s.x-t.x)>=TD||Math.abs(s.y-t.y)>=TD}const MD={type:"IDLE"};function ROe({cancel:t,completed:s,getPhase:a,setPhase:r}){return[{eventName:"mousemove",fn:n=>{const{button:i,clientX:o,clientY:l}=n;if(i!==HL)return;const c={x:o,y:l},m=a();if(m.type==="DRAGGING"){n.preventDefault(),m.actions.move(c);return}m.type!=="PENDING"&&Ft();const u=m.point;if(!DOe(u,c))return;n.preventDefault();const h=m.actions.fluidLift(c);r({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:n=>{const i=a();if(i.type!=="DRAGGING"){t();return}n.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),s()}},{eventName:"mousedown",fn:n=>{a().type==="DRAGGING"&&n.preventDefault(),t()}},{eventName:"keydown",fn:n=>{if(a().type==="PENDING"){t();return}if(n.keyCode===g3){n.preventDefault(),t();return}VL(n)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{a().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:n=>{const i=a();if(i.type==="IDLE"&&Ft(),i.actions.shouldRespectForcePress()){t();return}n.preventDefault()}},{eventName:b1,fn:t}]}function AOe(t){const s=g.useRef(MD),a=g.useRef(Uc),r=ra(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==HL||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const f=t.findClosestDraggableId(h);if(!f)return;const b=t.tryGetLock(f,o,{sourceEvent:h});if(!b)return;h.preventDefault();const w={x:h.clientX,y:h.clientY};a.current(),m(b,w)}}),[t]),n=ra(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const h=t.findClosestDraggableId(u);if(!h)return;const f=t.findOptionsForDraggable(h);f&&(f.shouldRespectForcePress||t.canGetLock(h)&&u.preventDefault())}}),[t]),i=ms(function(){const h={passive:!1,capture:!0};a.current=qi(window,[n,r],h)},[n,r]),o=ms(()=>{s.current.type!=="IDLE"&&(s.current=MD,a.current(),i())},[i]),l=ms(()=>{const u=s.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),c=ms(function(){const h={capture:!0,passive:!1},f=ROe({cancel:l,completed:o,getPhase:()=>s.current,setPhase:b=>{s.current=b}});a.current=qi(window,f,h)},[l,o]),m=ms(function(h,f){s.current.type!=="IDLE"&&Ft(),s.current={type:"PENDING",point:f,actions:h},c()},[c]);ui(function(){return i(),function(){a.current()}},[i])}function IOe(){}const OOe={[_Oe]:!0,[wOe]:!0,[COe]:!0,[SOe]:!0};function FOe(t,s){function a(){s(),t.cancel()}function r(){s(),t.drop()}return[{eventName:"keydown",fn:n=>{if(n.keyCode===g3){n.preventDefault(),a();return}if(n.keyCode===UL){n.preventDefault(),r();return}if(n.keyCode===TOe){n.preventDefault(),t.moveDown();return}if(n.keyCode===kOe){n.preventDefault(),t.moveUp();return}if(n.keyCode===EOe){n.preventDefault(),t.moveRight();return}if(n.keyCode===POe){n.preventDefault(),t.moveLeft();return}if(OOe[n.keyCode]){n.preventDefault();return}VL(n)}},{eventName:"mousedown",fn:a},{eventName:"mouseup",fn:a},{eventName:"click",fn:a},{eventName:"touchstart",fn:a},{eventName:"resize",fn:a},{eventName:"wheel",fn:a,options:{passive:!0}},{eventName:b1,fn:a}]}function LOe(t){const s=g.useRef(IOe),a=ra(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==UL)return;const o=t.findClosestDraggableId(i);if(!o)return;const l=t.tryGetLock(o,u,{sourceEvent:i});if(!l)return;i.preventDefault();let c=!0;const m=l.snapLift();s.current();function u(){c||Ft(),c=!1,s.current(),r()}s.current=qi(window,FOe(m,u),{capture:!0,passive:!1})}}),[t]),r=ms(function(){const i={passive:!1,capture:!0};s.current=qi(window,[a],i)},[a]);ui(function(){return r(),function(){s.current()}},[r])}const YN={type:"IDLE"},$Oe=120,zOe=.15;function qOe({cancel:t,getPhase:s}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:a=>{a.preventDefault()}},{eventName:"keydown",fn:a=>{if(s().type!=="DRAGGING"){t();return}a.keyCode===g3&&a.preventDefault(),t()}},{eventName:b1,fn:t}]}function BOe({cancel:t,completed:s,getPhase:a}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const n=a();if(n.type!=="DRAGGING"){t();return}n.hasMoved=!0;const{clientX:i,clientY:o}=r.touches[0],l={x:i,y:o};r.preventDefault(),n.actions.move(l)}},{eventName:"touchend",fn:r=>{const n=a();if(n.type!=="DRAGGING"){t();return}r.preventDefault(),n.actions.drop({shouldBlockNextClick:!0}),s()}},{eventName:"touchcancel",fn:r=>{if(a().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const n=a();n.type==="IDLE"&&Ft();const i=r.touches[0];if(!i||!(i.force>=zOe))return;const l=n.actions.shouldRespectForcePress();if(n.type==="PENDING"){l&&t();return}if(l){if(n.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:b1,fn:t}]}function UOe(t){const s=g.useRef(YN),a=g.useRef(Uc),r=ms(function(){return s.current},[]),n=ms(function(b){s.current=b},[]),i=ra(()=>({eventName:"touchstart",fn:function(b){if(b.defaultPrevented)return;const w=t.findClosestDraggableId(b);if(!w)return;const S=t.tryGetLock(w,l,{sourceEvent:b});if(!S)return;const j=b.touches[0],{clientX:v,clientY:N}=j,C={x:v,y:N};a.current(),h(S,C)}}),[t]),o=ms(function(){const b={capture:!0,passive:!1};a.current=qi(window,[i],b)},[i]),l=ms(()=>{const f=s.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),n(YN),a.current(),o())},[o,n]),c=ms(()=>{const f=s.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),m=ms(function(){const b={capture:!0,passive:!1},w={cancel:c,completed:l,getPhase:r},S=qi(window,BOe(w),b),j=qi(window,qOe(w),b);a.current=function(){S(),j()}},[c,r,l]),u=ms(function(){const b=r();b.type!=="PENDING"&&Ft();const w=b.actions.fluidLift(b.point);n({type:"DRAGGING",actions:w,hasMoved:!1})},[r,n]),h=ms(function(b,w){r().type!=="IDLE"&&Ft();const S=setTimeout(u,$Oe);n({type:"PENDING",point:w,actions:b,longPressTimerId:S}),m()},[m,r,n,u]);ui(function(){return o(),function(){a.current();const w=r();w.type==="PENDING"&&(clearTimeout(w.longPressTimerId),n(YN))}},[r,o,n]),ui(function(){return qi(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const VOe=["input","button","textarea","select","option","optgroup","video","audio"];function WL(t,s){if(s==null)return!1;if(VOe.includes(s.tagName.toLowerCase()))return!0;const r=s.getAttribute("contenteditable");return r==="true"||r===""?!0:s===t?!1:WL(t,s.parentElement)}function HOe(t,s){const a=s.target;return g1(a)?WL(t,a):!1}var WOe=t=>fo(t.getBoundingClientRect()).center;function YOe(t){return t instanceof qL(t).Element}const GOe=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function YL(t,s){return t==null?null:t[GOe](s)?t:YL(t.parentElement,s)}function KOe(t,s){return t.closest?t.closest(s):YL(t,s)}function QOe(t){return`[${gp.contextId}="${t}"]`}function ZOe(t,s){const a=s.target;if(!YOe(a))return null;const r=QOe(t),n=KOe(a,r);return!n||!g1(n)?null:n}function XOe(t,s){const a=ZOe(t,s);return a?a.getAttribute(gp.draggableId):null}function JOe(t,s){const a=`[${R_.contextId}="${t}"]`,n=zL(document,a).find(i=>i.getAttribute(R_.id)===s);return!n||!g1(n)?null:n}function eFe(t){t.preventDefault()}function Ey({expected:t,phase:s,isLockActive:a,shouldWarn:r}){return!(!a()||t!==s)}function GL({lockAPI:t,store:s,registry:a,draggableId:r}){if(t.isClaimed())return!1;const n=a.draggable.findById(r);return!(!n||!n.options.isEnabled||!OL(s.getState(),r))}function tFe({lockAPI:t,contextId:s,store:a,registry:r,draggableId:n,forceSensorStop:i,sourceEvent:o}){if(!GL({lockAPI:t,store:a,registry:r,draggableId:n}))return null;const c=r.draggable.getById(n),m=JOe(s,c.descriptor.id);if(!m||o&&!c.options.canDragInteractiveElements&&HOe(m,o))return null;const u=t.claim(i||Uc);let h="PRE_DRAG";function f(){return c.options.shouldRespectForcePress}function b(){return t.isActive(u)}function w(E,M){Ey({expected:E,phase:h,isLockActive:b,shouldWarn:!0})&&a.dispatch(M())}const S=w.bind(null,"DRAGGING");function j(E){function M(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(M(),Ft()),a.dispatch(KAe(E.liftActionArgs)),h="DRAGGING";function T(A,L={shouldBlockNextClick:!1}){if(E.cleanup(),L.shouldBlockNextClick){const F=qi(window,[{eventName:"click",fn:eFe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(F)}M(),a.dispatch(kL({reason:A}))}return{isActive:()=>Ey({expected:"DRAGGING",phase:h,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:f,drop:A=>T("DROP",A),cancel:A=>T("CANCEL",A),...E.actions}}function v(E){const M=qx(A=>{S(()=>PL({client:A}))});return{...j({liftActionArgs:{id:n,clientSelection:E,movementMode:"FLUID"},cleanup:()=>M.cancel(),actions:{move:M}}),move:M}}function N(){const E={moveUp:()=>S(rIe),moveRight:()=>S(iIe),moveDown:()=>S(nIe),moveLeft:()=>S(oIe)};return j({liftActionArgs:{id:n,clientSelection:WOe(m),movementMode:"SNAP"},cleanup:Uc,actions:E})}function C(){Ey({expected:"PRE_DRAG",phase:h,isLockActive:b,shouldWarn:!0})&&t.release()}return{isActive:()=>Ey({expected:"PRE_DRAG",phase:h,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:v,snapLift:N,abort:C}}const sFe=[AOe,LOe,UOe];function aFe({contextId:t,store:s,registry:a,customSensors:r,enableDefaultSensors:n}){const i=[...n?sFe:[],...r||[]],o=g.useState(()=>vOe())[0],l=ms(function(j,v){Yx(j)&&!Yx(v)&&o.tryAbandon()},[o]);ui(function(){let j=s.getState();return s.subscribe(()=>{const N=s.getState();l(j,N),j=N})},[o,s,l]),ui(()=>o.tryAbandon,[o.tryAbandon]);const c=ms(S=>GL({lockAPI:o,registry:a,store:s,draggableId:S}),[o,a,s]),m=ms((S,j,v)=>tFe({lockAPI:o,registry:a,contextId:t,store:s,draggableId:S,forceSensorStop:j||null,sourceEvent:v&&v.sourceEvent?v.sourceEvent:null}),[t,o,a,s]),u=ms(S=>XOe(t,S),[t]),h=ms(S=>{const j=a.draggable.findById(S);return j?j.options:null},[a.draggable]),f=ms(function(){o.isClaimed()&&(o.tryAbandon(),s.getState().phase!=="IDLE"&&s.dispatch(l3()))},[o,s]),b=ms(()=>o.isClaimed(),[o]),w=ra(()=>({canGetLock:c,tryGetLock:m,findClosestDraggableId:u,findOptionsForDraggable:h,tryReleaseLock:f,isLockClaimed:b}),[c,m,u,h,f,b]);for(let S=0;S<i.length;S++)i[S](w)}const rFe=t=>({onBeforeCapture:s=>{const a=()=>{t.onBeforeCapture&&t.onBeforeCapture(s)};Xx.flushSync(a)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),nFe=t=>({...Wx,...t.autoScrollerOptions,durationDampening:{...Wx.durationDampening,...t.autoScrollerOptions}});function ef(t){return t.current||Ft(),t.current}function iFe(t){const{contextId:s,setCallbacks:a,sensors:r,nonce:n,dragHandleUsageInstructions:i}=t,o=g.useRef(null),l=BL(t),c=ms(()=>rFe(l.current),[l]),m=ms(()=>nFe(l.current),[l]),u=xOe(s),h=bOe({contextId:s,text:i}),f=cOe(s,n),b=ms(F=>{ef(o).dispatch(F)},[]),w=ra(()=>aD({publishWhileDragging:ZAe,updateDroppableScroll:JAe,updateDroppableIsEnabled:eIe,updateDroppableIsCombineEnabled:tIe,collectionStarting:XAe},b),[b]),S=pOe(),j=ra(()=>qIe(S,w),[S,w]),v=ra(()=>rOe({scrollWindow:BIe,scrollDroppable:j.scrollDroppable,getAutoScrollerOptions:m,...aD({move:PL},b)}),[j.scrollDroppable,b,m]),N=uOe(s),C=ra(()=>FIe({announce:u,autoScroller:v,dimensionMarshal:j,focusMarshal:N,getResponders:c,styleMarshal:f}),[u,v,j,N,c,f]);o.current=C;const P=ms(()=>{const F=ef(o);F.getState().phase!=="IDLE"&&F.dispatch(l3())},[]),E=ms(()=>{const F=ef(o).getState();return F.phase==="DROP_ANIMATING"?!0:F.phase==="IDLE"?!1:F.isDragging},[]),M=ra(()=>({isDragging:E,tryAbort:P}),[E,P]);a(M);const T=ms(F=>OL(ef(o).getState(),F),[]),A=ms(()=>Ld(ef(o).getState()),[]),L=ra(()=>({marshal:j,focus:N,contextId:s,canLift:T,isMovementAllowed:A,dragHandleUsageInstructionsId:h,registry:S}),[s,j,h,N,T,A,S]);return aFe({contextId:s,store:C,registry:S,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),g.useEffect(()=>P,[P]),vt.createElement(y1.Provider,{value:L},vt.createElement(M9e,{context:f3,store:C},t.children))}function oFe(){return vt.useId()}function lFe(t){const s=oFe(),a=t.dragHandleUsageInstructions||tb.dragHandleUsageInstructions;return vt.createElement(L9e,null,r=>vt.createElement(iFe,{nonce:t.nonce,contextId:s,setCallbacks:r,dragHandleUsageInstructions:a,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const DD={dragging:5e3,dropAnimating:4500},cFe=(t,s)=>s?ax.drop(s.duration):t?ax.snap:ax.fluid,dFe=(t,s)=>{if(t)return s?Hx.opacity.drop:Hx.opacity.combining},uFe=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function mFe(t){const a=t.dimension.client,{offset:r,combineWith:n,dropping:i}=t,o=!!n,l=uFe(t),c=!!i,m=c?M_.drop(r,o):M_.moveTo(r);return{position:"fixed",top:a.marginBox.top,left:a.marginBox.left,boxSizing:"border-box",width:a.borderBox.width,height:a.borderBox.height,transition:cFe(l,i),transform:m,opacity:dFe(o,c),zIndex:c?DD.dropAnimating:DD.dragging,pointerEvents:"none"}}function pFe(t){return{transform:M_.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function hFe(t){return t.type==="DRAGGING"?mFe(t):pFe(t)}function fFe(t,s,a=Lr){const r=window.getComputedStyle(s),n=s.getBoundingClientRect(),i=tL(n,r),o=zb(i,a),l={client:i,tagName:s.tagName.toLowerCase(),display:r.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:t,placeholder:l,displaceBy:c,client:i,page:o}}function xFe(t){const s=x3("draggable"),{descriptor:a,registry:r,getDraggableRef:n,canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}=t,c=ra(()=>({canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}),[i,l,o]),m=ms(b=>{const w=n();return w||Ft(),fFe(a,w,b)},[a,n]),u=ra(()=>({uniqueId:s,descriptor:a,options:c,getDimension:m}),[a,m,c,s]),h=g.useRef(u),f=g.useRef(!0);ui(()=>(r.draggable.register(h.current),()=>r.draggable.unregister(h.current)),[r.draggable]),ui(()=>{if(f.current){f.current=!1;return}const b=h.current;h.current=u,r.draggable.update(u,b)},[u,r.draggable])}var y3=vt.createContext(null);function Hb(t){const s=g.useContext(t);return s||Ft(),s}function gFe(t){t.preventDefault()}const yFe=t=>{const s=g.useRef(null),a=ms((M=null)=>{s.current=M},[]),r=ms(()=>s.current,[]),{contextId:n,dragHandleUsageInstructionsId:i,registry:o}=Hb(y1),{type:l,droppableId:c}=Hb(y3),m=ra(()=>({id:t.draggableId,index:t.index,type:l,droppableId:c}),[t.draggableId,t.index,l,c]),{children:u,draggableId:h,isEnabled:f,shouldRespectForcePress:b,canDragInteractiveElements:w,isClone:S,mapped:j,dropAnimationFinished:v}=t;if(!S){const M=ra(()=>({descriptor:m,registry:o,getDraggableRef:r,canDragInteractiveElements:w,shouldRespectForcePress:b,isEnabled:f}),[m,o,r,w,b,f]);xFe(M)}const N=ra(()=>f?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":n,draggable:!1,onDragStart:gFe}:null,[n,i,h,f]),C=ms(M=>{j.type==="DRAGGING"&&j.dropping&&M.propertyName==="transform"&&Xx.flushSync(v)},[v,j]),P=ra(()=>{const M=hFe(j),T=j.type==="DRAGGING"&&j.dropping?C:void 0;return{innerRef:a,draggableProps:{"data-rfd-draggable-context-id":n,"data-rfd-draggable-id":h,style:M,onTransitionEnd:T},dragHandleProps:N}},[n,N,h,j,C,a]),E=ra(()=>({draggableId:m.id,type:m.type,source:{index:m.index,droppableId:m.droppableId}}),[m.droppableId,m.id,m.index,m.type]);return vt.createElement(vt.Fragment,null,u(P,j.snapshot,E))};var KL=(t,s)=>t===s,QL=t=>{const{combine:s,destination:a}=t;return a?a.droppableId:s?s.droppableId:null};const bFe=t=>t.combine?t.combine.draggableId:null,vFe=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function jFe(){const t=Fr((n,i)=>({x:n,y:i})),s=Fr((n,i,o=null,l=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:n,draggingOver:o,combineWith:l,combineTargetFor:null})),a=Fr((n,i,o,l,c=null,m=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:m,mode:i,offset:n,dimension:o,forceShouldAnimate:u,snapshot:s(i,l,c,m,null)}}));return(n,i)=>{if(Yx(n)){if(n.critical.draggable.id!==i.draggableId)return null;const o=n.current.client.offset,l=n.dimensions.draggables[i.draggableId],c=di(n.impact),m=vFe(n.impact),u=n.forceShouldAnimate;return a(t(o.x,o.y),n.movementMode,l,i.isClone,c,m,u)}if(n.phase==="DROP_ANIMATING"){const o=n.completed;if(o.result.draggableId!==i.draggableId)return null;const l=i.isClone,c=n.dimensions.draggables[i.draggableId],m=o.result,u=m.mode,h=QL(m),f=bFe(m),w={duration:n.dropDuration,curve:d3.drop,moveTo:n.newHomeClientOffset,opacity:f?Hx.opacity.drop:null,scale:f?Hx.scale.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:c,dropping:w,draggingOver:h,combineWith:f,mode:u,forceShouldAnimate:null,snapshot:s(u,l,h,f,w)}}}return null}}function ZL(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const NFe={mapped:{type:"SECONDARY",offset:Lr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ZL(null)}};function wFe(){const t=Fr((o,l)=>({x:o,y:l})),s=Fr(ZL),a=Fr((o,l=null,c)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:s(l)}})),r=o=>o?a(Lr,o,!0):null,n=(o,l,c,m)=>{const u=c.displaced.visible[o],h=!!(m.inVirtualList&&m.effected[o]),f=h1(c),b=f&&f.draggableId===o?l:null;if(!u){if(!h)return r(b);if(c.displaced.invisible[o])return null;const j=Dp(m.displacedBy.point),v=t(j.x,j.y);return a(v,b,!0)}if(h)return r(b);const w=c.displacedBy.point,S=t(w.x,w.y);return a(S,b,u.shouldAnimate)};return(o,l)=>{if(Yx(o))return o.critical.draggable.id===l.draggableId?null:n(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const c=o.completed;return c.result.draggableId===l.draggableId?null:n(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const _Fe=()=>{const t=jFe(),s=wFe();return(r,n)=>t(r,n)||s(r,n)||NFe},SFe={dropAnimationFinished:EL},CFe=eL(_Fe,SFe,null,{context:f3,areStatePropsEqual:KL})(yFe);function XL(t){return Hb(y3).isUsingCloneFor===t.draggableId&&!t.isClone?null:vt.createElement(CFe,t)}function RD(t){const s=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,a=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return vt.createElement(XL,je({},t,{isClone:!1,isEnabled:s,canDragInteractiveElements:a,shouldRespectForcePress:r}))}const JL=t=>s=>t===s,PFe=JL("scroll"),kFe=JL("auto"),AD=(t,s)=>s(t.overflowX)||s(t.overflowY),EFe=t=>{const s=window.getComputedStyle(t),a={overflowX:s.overflowX,overflowY:s.overflowY};return AD(a,PFe)||AD(a,kFe)},TFe=()=>!1,e$=t=>t==null?null:t===document.body?TFe()?t:null:t===document.documentElement?null:EFe(t)?t:e$(t.parentElement);var A_=t=>({x:t.scrollLeft,y:t.scrollTop});const t$=t=>t?window.getComputedStyle(t).position==="fixed"?!0:t$(t.parentElement):!1;var MFe=t=>{const s=e$(t),a=t$(t);return{closestScrollable:s,isFixedOnPage:a}},DFe=({descriptor:t,isEnabled:s,isCombineEnabled:a,isFixedOnPage:r,direction:n,client:i,page:o,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:f,client:b}=l,w=RL({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:b.paddingBox.height,width:b.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:b,scrollSize:f,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:w,diff:{value:Lr,displacement:Lr}}}})(),m=n==="vertical"?a3:mL,u=fp({page:o,withPlaceholder:null,axis:m,frame:c});return{descriptor:t,isCombineEnabled:a,isFixedOnPage:r,axis:m,isEnabled:s,client:i,page:o,frame:c,subject:u}};const RFe=(t,s)=>{const a=sL(t);if(!s||t!==s)return a;const r=a.paddingBox.top-s.scrollTop,n=a.paddingBox.left-s.scrollLeft,i=r+s.scrollHeight,o=n+s.scrollWidth,c=JS({top:r,right:o,bottom:i,left:n},a.border);return e3({borderBox:c,margin:a.margin,border:a.border,padding:a.padding})};var AFe=({ref:t,descriptor:s,env:a,windowScroll:r,direction:n,isDropDisabled:i,isCombineEnabled:o,shouldClipSubject:l})=>{const c=a.closestScrollable,m=RFe(t,c),u=zb(m,r),h=(()=>{if(!c)return null;const b=sL(c),w={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:b,page:zb(b,r),scroll:A_(c),scrollSize:w,shouldClipSubject:l}})();return DFe({descriptor:s,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:a.isFixedOnPage,direction:n,client:m,page:u,closest:h})};const IFe={passive:!1},OFe={passive:!0};var ID=t=>t.shouldPublishImmediately?IFe:OFe;const Ty=t=>t&&t.env.closestScrollable||null;function FFe(t){const s=g.useRef(null),a=Hb(y1),r=x3("droppable"),{registry:n,marshal:i}=a,o=BL(t),l=ra(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),c=g.useRef(l),m=ra(()=>Fr((P,E)=>{s.current||Ft();const M={x:P,y:E};i.updateDroppableScroll(l.id,M)}),[l.id,i]),u=ms(()=>{const P=s.current;return!P||!P.env.closestScrollable?Lr:A_(P.env.closestScrollable)},[]),h=ms(()=>{const P=u();m(P.x,P.y)},[u,m]),f=ra(()=>qx(h),[h]),b=ms(()=>{const P=s.current,E=Ty(P);if(P&&E||Ft(),P.scrollOptions.shouldPublishImmediately){h();return}f()},[f,h]),w=ms((P,E)=>{s.current&&Ft();const M=o.current,T=M.getDroppableRef();T||Ft();const A=MFe(T),L={ref:T,descriptor:l,env:A,scrollOptions:E};s.current=L;const F=AFe({ref:T,descriptor:l,env:A,windowScroll:P,direction:M.direction,isDropDisabled:M.isDropDisabled,isCombineEnabled:M.isCombineEnabled,shouldClipSubject:!M.ignoreContainerClipping}),z=A.closestScrollable;return z&&(z.setAttribute(kD.contextId,a.contextId),z.addEventListener("scroll",b,ID(L.scrollOptions))),F},[a.contextId,l,b,o]),S=ms(()=>{const P=s.current,E=Ty(P);return P&&E||Ft(),A_(E)},[]),j=ms(()=>{const P=s.current;P||Ft();const E=Ty(P);s.current=null,E&&(f.cancel(),E.removeAttribute(kD.contextId),E.removeEventListener("scroll",b,ID(P.scrollOptions)))},[b,f]),v=ms(P=>{const E=s.current;E||Ft();const M=Ty(E);M||Ft(),M.scrollTop+=P.y,M.scrollLeft+=P.x},[]),N=ra(()=>({getDimensionAndWatchScroll:w,getScrollWhileDragging:S,dragStopped:j,scroll:v}),[j,w,S,v]),C=ra(()=>({uniqueId:r,descriptor:l,callbacks:N}),[N,l,r]);ui(()=>(c.current=C.descriptor,n.droppable.register(C),()=>{s.current&&j(),n.droppable.unregister(C)}),[N,l,j,C,i,n.droppable]),ui(()=>{s.current&&i.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)},[t.isDropDisabled,i]),ui(()=>{s.current&&i.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)},[t.isCombineEnabled,i])}function GN(){}const OD={width:0,height:0,margin:H9e},LFe=({isAnimatingOpenOnMount:t,placeholder:s,animate:a})=>t||a==="close"?OD:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin},$Fe=({isAnimatingOpenOnMount:t,placeholder:s,animate:a})=>{const r=LFe({isAnimatingOpenOnMount:t,placeholder:s,animate:a});return{display:s.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?ax.placeholder:null}},zFe=t=>{const s=g.useRef(null),a=ms(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]),{animate:r,onTransitionEnd:n,onClose:i,contextId:o}=t,[l,c]=g.useState(t.animate==="open");g.useEffect(()=>l?r!=="open"?(a(),c(!1),GN):s.current?GN:(s.current=setTimeout(()=>{s.current=null,c(!1)}),a):GN,[r,l,a]);const m=ms(h=>{h.propertyName==="height"&&(n(),r==="close"&&i())},[r,i,n]),u=$Fe({isAnimatingOpenOnMount:l,animate:t.animate,placeholder:t.placeholder});return vt.createElement(t.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":o,onTransitionEnd:m,ref:t.innerRef})};var qFe=vt.memo(zFe);class BFe extends vt.PureComponent{constructor(...s){super(...s),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)}}const UFe=t=>{const s=g.useContext(y1);s||Ft();const{contextId:a,isMovementAllowed:r}=s,n=g.useRef(null),i=g.useRef(null),{children:o,droppableId:l,type:c,mode:m,direction:u,ignoreContainerClipping:h,isDropDisabled:f,isCombineEnabled:b,snapshot:w,useClone:S,updateViewportMaxScroll:j,getContainerForClone:v}=t,N=ms(()=>n.current,[]),C=ms((z=null)=>{n.current=z},[]);ms(()=>i.current,[]);const P=ms((z=null)=>{i.current=z},[]),E=ms(()=>{r()&&j({maxScroll:IL()})},[r,j]);FFe({droppableId:l,type:c,mode:m,direction:u,isDropDisabled:f,isCombineEnabled:b,ignoreContainerClipping:h,getDroppableRef:N});const M=ra(()=>vt.createElement(BFe,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:z,data:I,animate:Q})=>vt.createElement(qFe,{placeholder:I,onClose:z,innerRef:P,animate:Q,contextId:a,onTransitionEnd:E})),[a,E,t.placeholder,t.shouldAnimatePlaceholder,P]),T=ra(()=>({innerRef:C,placeholder:M,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":a}}),[a,l,M,C]),A=S?S.dragging.draggableId:null,L=ra(()=>({droppableId:l,type:c,isUsingCloneFor:A}),[l,A,c]);function F(){if(!S)return null;const{dragging:z,render:I}=S,Q=vt.createElement(XL,{draggableId:z.draggableId,index:z.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Y,B)=>I(Y,B,z));return af.createPortal(Q,v())}return vt.createElement(y3.Provider,{value:L},o(T,w),F())};function VFe(){return document.body||Ft(),document.body}const FD={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:VFe},s$=t=>{let s={...t},a;for(a in FD)t[a]===void 0&&(s={...s,[a]:FD[a]});return s},KN=(t,s)=>t===s.droppable.type,LD=(t,s)=>s.draggables[t.draggable.id],HFe=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},s={...t,shouldAnimatePlaceholder:!1},a=Fr(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),r=Fr((i,o,l,c,m,u)=>{const h=m.descriptor.id;if(m.descriptor.droppableId===i){const w=u?{render:u,dragging:a(m.descriptor)}:null,S={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!1,snapshot:S,useClone:w}}if(!o)return s;if(!c)return t;const b={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}});return(i,o)=>{const l=s$(o),c=l.droppableId,m=l.type,u=!l.isDropDisabled,h=l.renderClone;if(Yx(i)){const f=i.critical;if(!KN(m,f))return s;const b=LD(f,i.dimensions),w=di(i.impact)===c;return r(c,u,w,w,b,h)}if(i.phase==="DROP_ANIMATING"){const f=i.completed;if(!KN(m,f.critical))return s;const b=LD(f.critical,i.dimensions);return r(c,u,QL(f.result)===c,di(f.impact)===c,b,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const f=i.completed;if(!KN(m,f.critical))return s;const b=di(f.impact)===c,w=!!(f.impact.at&&f.impact.at.type==="COMBINE"),S=f.critical.droppable.id===c;return b?w?t:s:S?t:s}return s}},WFe={updateViewportMaxScroll:aIe},$D=eL(HFe,WFe,(t,s,a)=>({...s$(a),...t,...s}),{context:f3,areStatePropsEqual:KL})(UFe),YFe=t=>t.split(" ").map(s=>s[0]).join("").slice(0,2).toUpperCase(),GFe=t=>{const s=["!bg-blue-500","!bg-green-500","!bg-orange-500","!bg-teal-500","!bg-red-500","!bg-purple-500","!bg-pink-500","!bg-indigo-500"],a=t.charCodeAt(0)%s.length;return s[a]},KFe=t=>t?t.startsWith("EMP-")?t:`EMP-${t.padStart(3,"0")}`:"",QFe=({requestType:t,drawerOpen:s,setDrawerOpen:a})=>{const[r,n]=g.useState([]),[i,o]=g.useState(null),[l,c]=g.useState(null),[m,u]=g.useState(""),{data:h}=kRe(t||"",i??void 0,l??void 0),{data:f}=Jl({isActive:"Y"}),{data:b}=No({isActive:"Y"}),{data:w}=V4(),{data:S}=Qr({page:1,limit:1e3,search:m,isActive:"Y"}),j=ERe(),v=f?.data||[],N=b?.data||[],C=w?.data||[],P=S?.data||[],E=g.useMemo(()=>{if(!P)return[];const z=r.map(I=>I.approver_id)||[];return P.filter(I=>!z.includes(I.id)).filter(I=>I.name?.toLowerCase().includes(m?.toLowerCase()||"")).map(I=>({id:I.id,name:I.name,role:I.role?.name||"General",profile_pic:I.profile_image||"",employee_code:I.employee_id||"",department:I.role?.name||""}))},[P,r,m]),M=g.useMemo(()=>r.map(z=>{const I=P.find(Q=>Q.id===z.approver_id);return{...z,user:I}}),[r,P]),T=xt({initialValues:{request_type:t||"",zone_id:"",depot_id:""},validationSchema:nt({request_type:me().required("Request type is required")}),enableReinitialize:!0,onSubmit:async z=>{if(!z.request_type)return;const I=r.map((Q,Y)=>({request_type:z.request_type,sequence:Y+1,approver_id:Q.approver_id,zone_id:z.zone_id?Number(z.zone_id):null,depot_id:z.depot_id?Number(z.depot_id):null,is_active:Q.is_active||"Y"}));if(I.length===0){alert("Please assign at least one approver");return}try{await j.mutateAsync(I),A()}catch(Q){console.error("Error creating approval setup:",Q)}}});console.log("requestType",r);const A=()=>{a(!1),T.resetForm(),n([]),o(null),c(null),u("")};g.useEffect(()=>{h&&h.length>0?n(h.map(z=>({...z,isNew:!1}))):n([])},[h]);const L=z=>{const{destination:I,source:Q,draggableId:Y}=z;if(I&&!(I.droppableId===Q.droppableId&&I.index===Q.index)){if(Q.droppableId==="available-users"&&I.droppableId==="assigned-users"){const B=E.find(q=>q.id.toString()===Y);if(B){const q=P.find(V=>V.id===B.id);if(q){const V={id:0,request_type:T.values.request_type,sequence:I.index+1,approver_id:q.id,zone_id:T.values.zone_id?Number(T.values.zone_id):null,depot_id:T.values.depot_id?Number(T.values.depot_id):null,is_active:"Y",createdate:null,createdby:null,updatedate:null,updatedby:null,log_inst:null,isNew:!0,tempId:`temp-${Date.now()}-${Math.random()}`,user:q},G=Array.from(r);G.splice(I.index,0,V),n(G.map((H,D)=>({...H,sequence:D+1})))}}}else if(Q.droppableId==="assigned-users"&&I.droppableId==="available-users"){const B=parseInt(Y);n(q=>q.filter(V=>V.approver_id!==B))}else if(Q.droppableId==="assigned-users"&&I.droppableId==="assigned-users"){const B=Array.from(r),[q]=B.splice(Q.index,1);B.splice(I.index,0,q),n(B.map((V,G)=>({...V,sequence:G+1})))}}},F=({user:z,showSequence:I})=>e.jsxs("div",{className:nr("!flex !items-center !gap-3 !p-2 !pr-3 !bg-white !border !border-gray-200 !rounded-lg !mb-2",{"hover:!border-blue-300 hover:!shadow-md":!0}),children:[e.jsx(Qie,{className:"!w-5 !h-5 !text-gray-400 !cursor-grab !flex-shrink-0"}),e.jsx(ut,{alt:z.name,src:z.profile_pic||z.profile_image||void 0,className:nr("!w-10 !h-10 !flex-shrink-0 !text-white !font-medium",GFe(z.name)),children:YFe(z.name)}),e.jsxs(y,{className:"!flex-1 !min-w-0",children:[e.jsxs(x,{variant:"body2",className:"!font-medium !text-gray-900",children:[z.name," ",z.employee_code&&`(${KFe(z.employee_code)})`]}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:z.department||(typeof z.role=="string"?z.role:z.role?.name)||"No Role"})]}),I!==void 0&&e.jsx(y,{className:"!flex-shrink-0 !flex !items-center !justify-center !w-6 !h-6 !rounded-full !bg-primary-500 !text-white !text-xs !font-semibold",children:I})]});return e.jsx(it,{open:s,setOpen:A,title:t?`Manage Approval Setup - ${t.replace(/_/g," ")}`:"Create Approval Setup",size:"large",children:e.jsx(y,{className:"!p-4 select-none",children:e.jsxs("form",{onSubmit:T.handleSubmit,children:[e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 lg:!grid-cols-3 !gap-6",children:[e.jsxs(_e,{name:"request_type",label:"Request Type",formik:T,required:!0,disabled:!!t,children:[e.jsx(Z,{value:"",children:"Select Request Type"}),C.map(z=>e.jsx(Z,{value:z.value,children:z.label},z.value))]}),e.jsxs(_e,{name:"zone_id",label:"Zone (Optional)",formik:T,onChange:z=>{T.setFieldValue("zone_id",z.target.value),o(z.target.value?Number(z.target.value):null)},children:[e.jsx(Z,{value:"",children:"All Zones (Global)"}),v.map(z=>e.jsx(Z,{value:z.id||"",children:z.name},z.id||"global"))]}),e.jsxs(_e,{name:"depot_id",label:"Depot (Optional)",formik:T,onChange:z=>{T.setFieldValue("depot_id",z.target.value),c(z.target.value?Number(z.target.value):null)},children:[e.jsx(Z,{value:"",children:"All Depots (Global)"}),N.map(z=>e.jsx(Z,{value:z.id||"",children:z.name},z.id||"global"))]})]}),e.jsxs(y,{children:[e.jsx("p",{className:"!font-semibold !my-3",children:"Assign Approvers"}),e.jsx(lFe,{onDragEnd:L,children:e.jsxs("div",{className:"!grid !grid-cols-2 !gap-4 !h-[500px]",children:[e.jsxs(y,{className:"!border !border-gray-200 !rounded-t-lg !flex !flex-col !overflow-hidden",children:[e.jsxs(y,{className:"!p-2 !border-b !border-gray-200 !bg-gray-50",children:[e.jsxs(x,{variant:"subtitle1",className:"!font-semibold !text-blue-600",children:["Available Users (",E.length,")"]}),e.jsx("p",{className:"!text-gray-500 !text-xs !block !mt-1",children:"Drag users from the left panel to assign"})]}),e.jsx(y,{className:"!flex-1 !overflow-hidden",children:e.jsx($D,{droppableId:"available-users",children:(z,I)=>e.jsxs("div",{...z.droppableProps,ref:z.innerRef,className:nr("!h-full !p-2 !overflow-y-auto",{"!bg-blue-50":I.isDraggingOver}),style:{transition:"background-color 0.2s ease"},children:[E.length>0?E.map((Q,Y)=>e.jsx(RD,{draggableId:Q.id.toString(),index:Y,children:B=>e.jsx("div",{ref:B.innerRef,...B.draggableProps,...B.dragHandleProps,style:{...B.draggableProps.style},children:e.jsx(F,{user:Q})})},Q.id)):e.jsxs(y,{className:"!p-8 !text-center !h-full !flex !flex-col !justify-center !items-center",children:[e.jsx(la,{className:"!w-12 !h-12 !text-gray-300 !mb-2"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:m?"No users found":"All users are assigned"})]}),z.placeholder]})})})]}),e.jsxs(y,{className:"!border !border-gray-200 !rounded-t-lg !flex !flex-col !overflow-hidden",children:[e.jsxs(y,{className:"!p-2 !border-b !border-gray-200 !bg-gray-50",children:[e.jsxs(x,{variant:"subtitle1",className:"!font-semibold !text-green-600",children:["Assigned Users (",r.length,")"]}),e.jsx("p",{className:"!text-gray-500 !text-xs !block !mt-1",children:"Drag users from the right panel to reorder"})]}),e.jsx(y,{className:"!flex-1 !overflow-hidden",children:e.jsx($D,{droppableId:"assigned-users",children:(z,I)=>e.jsxs("div",{...z.droppableProps,ref:z.innerRef,className:nr("!h-full !p-2 !overflow-y-auto",{"!bg-green-50":I.isDraggingOver}),style:{transition:"background-color 0.2s ease"},children:[r.length>0?M.filter(Q=>Q.user!==void 0).map((Q,Y)=>e.jsx(RD,{draggableId:Q.approver_id.toString(),index:Y,children:B=>e.jsx("div",{ref:B.innerRef,...B.draggableProps,...B.dragHandleProps,style:{...B.draggableProps.style},children:e.jsx(F,{user:{...Q.user,employee_code:Q.user.employee_id,department:Q.user.role?.name||Q.user.role||"No Role",role:typeof Q.user.role=="string"?Q.user.role:Q.user.role?.name||"No Role"},showSequence:Q.sequence})})},Q.tempId||Q.id||Y)):e.jsxs(y,{className:"!p-8 !text-center !h-full !flex !flex-col !justify-center !items-center",children:[e.jsx(sA,{className:"!w-12 !h-12 !text-gray-300 !mb-2"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No assigned users"}),e.jsx(x,{variant:"caption",className:"!text-gray-400 !block !mt-1",children:"Drag users from the left panel to assign"})]}),z.placeholder]})})})]})]})})]}),e.jsxs(y,{className:"!flex !justify-end !gap-3 !pt-4",children:[e.jsx(K,{type:"button",variant:"outlined",onClick:A,children:"Cancel"}),e.jsx(K,{type:"submit",variant:"contained",color:"primary",loading:j.isPending,loadingText:"Saving...",children:"Create"})]})]})})})},ZFe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState("all"),[o,l]=g.useState(1),[c]=g.useState(10),[m,u]=g.useState(null),[h,f]=g.useState(!1),{isCreate:b,isRead:w,isUpdate:S,isDelete:j}=Qe("approval"),{data:v}=V4(),{data:N,isLoading:C,error:P}=PRe({page:o,size:c,search:t,request_type:n!=="all"?n:void 0},{enabled:w}),E=N?.data||[],M=N?.pagination,T=v?.data||[],A=M?.totalCount||E.length,L=E.filter(W=>W.is_active==="Y").length,F=E.filter(W=>W.is_active==="N").length,z=E.reduce((W,J)=>W+(J.no_of_approvers||0),0),I=E.filter(W=>a==="all"?!0:a==="active"?W.is_active==="Y":a==="inactive"?W.is_active==="N":!0),Q=TRe(),Y=W=>{u(W),f(!0)},B=g.useCallback(async W=>{try{await Q.mutateAsync(W)}catch(J){console.error("Error deleting approval setup:",J)}},[Q]),q=()=>{u(null),f(!0)},V=W=>{f(W),W||u(null)},G=g.useCallback(W=>{s(W),l(1)},[]),H=g.useCallback(W=>{r(W),l(1)},[]),D=g.useCallback(W=>{i(W),l(1)},[]),R=W=>{l(W+1)},$=[{id:"request_type",label:"Request Type",render:(W,J)=>e.jsx(x,{variant:"body2",className:"!font-medium !capitalize",children:J.request_type.replace(/_/g," ")})},{id:"zones",label:"Zones",render:(W,J)=>e.jsxs("div",{className:"!flex !flex-wrap !gap-1",children:[J.zones.slice(0,2).map((te,ee)=>e.jsx(Me,{label:te.name,size:"small",variant:"outlined",className:"!text-xs"},ee)),J.zones.length>2&&e.jsx(Me,{label:`+${J.zones.length-2} more`,size:"small",variant:"outlined",className:"!text-xs"})]})},{id:"depots",label:"Depots",render:(W,J)=>e.jsxs("div",{className:"!flex !flex-wrap !gap-1",children:[J.depots.slice(0,2).map((te,ee)=>e.jsx(Me,{label:te.name,size:"small",variant:"outlined",className:"!text-xs"},ee)),J.depots.length>2&&e.jsx(Me,{label:`+${J.depots.length-2} more`,size:"small",variant:"outlined",className:"!text-xs"})]})},{id:"no_of_approvers",label:"Approvers",render:(W,J)=>e.jsx(x,{variant:"body2",children:J.no_of_approvers})},{id:"is_active",label:"Status",render:(W,J)=>e.jsx(Me,{variant:"outlined",icon:J.is_active==="Y"?e.jsx(zl,{fontSize:"small"}):e.jsx(ya,{fontSize:"small"}),label:J.is_active==="Y"?"Active":"Inactive",color:J.is_active==="Y"?"success":"error",size:"small"})},...S||j?[{id:"actions",label:"Actions",sortable:!1,render:(W,J)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[S&&e.jsx(rs,{onClick:()=>Y(J.request_type),tooltip:`Manage ${J.request_type.replace(/_/g," ")}`}),j&&e.jsx(Vt,{onClick:()=>B(J.request_type),tooltip:`Delete ${J.request_type.replace(/_/g," ")}`,itemName:J.request_type.replace(/_/g," "),confirmDelete:!0})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs("div",{children:[e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:"Approval Setup"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Configure approval workflows for different request types"})]})}),w&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Workflows",value:A,icon:e.jsx(bg,{className:"w-6 h-6"}),color:"blue",isLoading:C}),e.jsx(fe,{title:"Active Workflows",value:L,icon:e.jsx(Da,{className:"w-6 h-6"}),color:"green",isLoading:C}),e.jsx(fe,{title:"Inactive Workflows",value:F,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:C}),e.jsx(fe,{title:"Total Approvers",value:z,icon:e.jsx(la,{className:"w-6 h-6"}),color:"purple",isLoading:C})]}),P&&w&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load approval workflows. Please try again."}),e.jsx(ot,{data:I,columns:$,actions:w||b?e.jsxs("div",{className:"flex justify-between gap-3 items-center flex-wrap",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:w&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search by request type...",value:t,onChange:G,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:W=>H(W.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]}),e.jsxs(_e,{value:n,onChange:W=>D(W.target.value),className:"!w-64",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Request Types"}),T.map(W=>e.jsx(Z,{value:W.value,children:W.label},W.value))]})]})}),b&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:q,children:"Create"})]}):void 0,getRowId:W=>W.request_type,initialOrderBy:"request_type",loading:C,totalCount:a!=="all"?I.length:M?.totalCount||0,page:o-1,rowsPerPage:c,isPermission:w,onPageChange:R,emptyMessage:t||a!=="all"||n!=="all"?"No workflows found matching your filters":"No approval workflows found in the system"}),e.jsx(QFe,{requestType:m,drawerOpen:h,setDrawerOpen:V})]})},XFe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState("all"),[o,l]=g.useState(1),[c]=g.useState(6),[m,u]=g.useState(!1),[h,f]=g.useState("approve"),[b,w]=g.useState(null),{isRead:S,isUpdate:j}=Qe("approval"),{data:v,isLoading:N}=Ble({page:o,limit:c,search:t,status:a!=="all"?a:void 0,request_type:n!=="all"?n:void 0},{enabled:S}),{data:C}=V4(),P=v?.data||[],E=v?.pagination,M=v?.stats,T=C?.data||[],A=pA(),L=xt({initialValues:{remarks:""},validationSchema:nt({remarks:me().required(`${h==="approve"?"Approval":"Rejection"} remarks are required`).trim().min(1,`${h==="approve"?"Approval":"Rejection"} remarks are required`)}),enableReinitialize:!0,onSubmit:async G=>{if(!(!b||!b.approvals?.[0]))try{await A.mutateAsync({request_id:b.id,approval_id:b.approvals[0].id,action:h==="approve"?"A":"R",remarks:G.remarks.trim()}),L.resetForm(),u(!1),w(null)}catch(H){console.error("Error taking action on request:",H)}}}),F=G=>{w(G),f("approve"),u(!0)},z=G=>{w(G),f("reject"),u(!0)},I=()=>{L.resetForm(),u(!1),w(null)},Q=G=>G.replace(/_/g," ").replace(/\w\S*/g,H=>H.charAt(0).toUpperCase()+H.substr(1)),Y=G=>G.reference_details?.order_number?G.reference_details.order_number:G.reference_id?`#${G.reference_id}`:`REQ-${G.id}`,B=G=>{if(!G)return"default";switch(G.toUpperCase()){case"A":case"APPROVED":return"success";case"R":case"REJECTED":return"error";case"P":case"PENDING":return"warning";default:return"default"}},q=G=>{if(!G)return"N/A";switch(G.toUpperCase()){case"A":case"APPROVED":return"Approved";case"R":case"REJECTED":return"Rejected";case"P":case"PENDING":return"Pending";default:return G}},V=[{id:"reference",label:"Reference",render:(G,H)=>e.jsx(x,{variant:"body2",className:"!font-medium",children:Y(H)})},{id:"request_type",label:"Request Type",render:(G,H)=>e.jsx(Me,{label:Q(H.request_type),size:"small",className:"!capitalize"})},{id:"requester",label:"Requested By",render:(G,H)=>H.requester?.name||`User #${H.requester_id}`},{id:"status",label:"Status",render:(G,H)=>{const D=H.approvals?.[0]?.status||H.status;return e.jsx(Me,{label:q(D),color:B(D),size:"small",className:"!capitalize"})}},{id:"createdate",label:"Request Date",render:(G,H)=>Ie(H.createdate instanceof Date?H.createdate.toISOString():String(H.createdate||""))||"N/A"},...j?[{id:"actions",label:"Actions",sortable:!1,render:(G,H)=>{const D=H.approvals?.[0]?.status||H.status;return e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[e.jsx(Wa,{onClick:()=>F(H),tooltip:"Approve request",icon:e.jsx(zl,{className:"!w-4 !h-4"}),color:"success",disabled:D?.toUpperCase()!=="P"||A.isPending}),e.jsx(Wa,{onClick:()=>z(H),tooltip:"Reject request",icon:e.jsx(An,{className:"!w-4 !h-4"}),color:"error",disabled:D?.toUpperCase()!=="P"||A.isPending})]})}}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs("div",{children:[e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:"Approval Requests"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Manage and track approval requests for various business processes"})]})}),S&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(fe,{title:"Total Requests",value:M?.total_requests||0,icon:e.jsx(ks,{className:"w-6 h-6"}),color:"blue",isLoading:N}),e.jsx(fe,{title:"Pending Requests",value:M?.pending_requests||0,icon:e.jsx(na,{className:"w-6 h-6"}),color:"orange",isLoading:N}),e.jsx(fe,{title:"Approved Requests",value:M?.approved_requests||0,icon:e.jsx(Da,{className:"w-6 h-6"}),color:"green",isLoading:N}),e.jsx(fe,{title:"Rejected Requests",value:M?.rejected_requests||0,icon:e.jsx(ya,{className:"w-6 h-6"}),color:"red",isLoading:N})]}),e.jsx(ot,{columns:V,data:P,loading:N,page:o-1,onPageChange:G=>l(G+1),rowsPerPage:c,totalCount:E?.total_count||0,isPermission:S,actions:S?e.jsx("div",{className:"flex justify-between gap-3 items-center flex-wrap",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(ts,{placeholder:"Search requests...",value:t,onChange:s,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:a,onChange:G=>r(G.target.value),className:"!w-40",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"P",children:"Pending"}),e.jsx(Z,{value:"A",children:"Approved"}),e.jsx(Z,{value:"R",children:"Rejected"})]}),e.jsxs(_e,{value:n,onChange:G=>i(G.target.value),className:"!w-48",disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Types"}),T.map(G=>e.jsx(Z,{value:G.value,children:G.label},G.value))]})]})}):void 0,emptyMessage:t?`No requests found matching "${t}"`:"No approval requests found"}),e.jsxs(Kl,{open:m,onClose:I,maxWidth:"sm",fullWidth:!0,className:"!rounded-lg",children:[e.jsxs(Nv,{className:"!flex !items-center !gap-3 !pb-4 !border-b !border-gray-200 !relative",children:[e.jsx("div",{className:`!w-12 !h-12 !rounded-full !flex !items-center !justify-center !shrink-0 ${h==="approve"?"!bg-green-100":"!bg-red-100"}`,children:h==="approve"?e.jsx(zl,{className:"!w-6 !h-6 !text-green-600"}):e.jsx(An,{className:"!w-6 !h-6 !text-red-600"})}),e.jsxs("div",{className:"!flex-1",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:h==="approve"?"Approve Request?":"Reject Request?"}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mt-1",children:h==="approve"?e.jsxs(e.Fragment,{children:["Are you sure you want to approve this"," ",b?.request_type?.replaceAll("_"," ").toLowerCase()||"request"," ","from"," ",e.jsx("span",{className:"!font-semibold !text-gray-900",children:b?.requester?.name||"User"}),"?"]}):e.jsxs(e.Fragment,{children:["Are you sure you want to reject this"," ",b?.request_type?.toLowerCase()||"request"," ","from"," ",e.jsx("span",{className:"!font-semibold !text-gray-900",children:b?.requester?.name||"User"}),"?"]})})]}),e.jsx(ta,{onClick:I,className:"!absolute !top-2 !right-2 !bg-white !rounded-full !shadow-md hover:!bg-gray-100 !border !border-gray-200",size:"small",children:e.jsx(An,{className:"!w-4 !h-4 !text-gray-600"})})]}),e.jsxs(ug,{className:"!p-4",children:[b&&e.jsxs("div",{className:"!mb-4 !pb-4 !border-b !border-gray-200",children:[e.jsx(x,{variant:"subtitle2",className:"!font-semibold !text-gray-700 !mb-3",children:"Request Details"}),b.reference_details?e.jsx("div",{className:"!bg-gray-50 !rounded-md !p-4 !border !border-gray-200",children:e.jsxs("div",{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-4",children:[b.reference_details.order_number&&e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !font-medium",children:"Order Number"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:b.reference_details.order_number})]}),b.reference_details.customer_name&&e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !font-medium",children:"Customer Name"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:b.reference_details.customer_name})]}),b.reference_details.total_amount&&e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !font-medium",children:"Total Amount"}),e.jsx(x,{variant:"body2",className:"!font-semibold !text-primary-600",children:b.reference_details.total_amount})]}),b.reference_id&&e.jsxs("div",{className:"!space-y-1",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !uppercase !tracking-wide !font-medium",children:"Reference ID"}),e.jsxs(x,{variant:"body2",className:"!font-semibold !text-gray-900",children:["#",b.reference_id]})]})]})}):e.jsx("div",{className:"!bg-gray-50 !rounded-md !p-4 !border !border-gray-200",children:e.jsx(x,{variant:"body2",className:"!text-gray-600 !text-center",children:"No request details available"})})]}),e.jsx(oe,{name:"remarks",multiline:!0,rows:3,label:h==="approve"?"Approval Remarks":"Rejection Remarks",placeholder:h==="approve"?"Enter approval remarks...":"Enter rejection remarks...",formik:L,required:!0})]}),e.jsxs(dg,{className:"!px-6 !py-4 !gap-2",children:[e.jsx(K,{variant:"outlined",onClick:I,children:"Cancel"}),e.jsx(K,{variant:"contained",color:h==="approve"?"success":"error",startIcon:h==="approve"?e.jsx(zl,{className:"!w-4 !h-4"}):e.jsx(An,{className:"!w-4 !h-4"}),onClick:()=>L.handleSubmit(),disabled:A.isPending||!L.isValid||!L.values.remarks.trim(),children:A.isPending?h==="approve"?"Approving...":"Rejecting...":h==="approve"?"Yes, Approve":"Yes, Reject"})]})]})]})},JFe=()=>{const[t,s]=g.useState(""),[a,r]=g.useState("all"),[n,i]=g.useState("all"),[o,l]=g.useState(1),[c]=g.useState(10),{isRead:m}=Qe("exception"),u=!1,h=[],f=h.length,b=h.filter(C=>C.status==="open").length,w=h.filter(C=>C.status==="resolved").length,S=h.filter(C=>C.severity==="critical").length,j=C=>{switch(C?.toLowerCase()){case"resolved":return"success";case"open":return"error";case"in_progress":return"warning";default:return"default"}},v=C=>{switch(C?.toLowerCase()){case"critical":return"error";case"high":return"warning";case"medium":return"info";case"low":return"default";default:return"default"}},N=[{id:"route_name",label:"Route",render:(C,P)=>e.jsxs("div",{className:"!flex !items-center !gap-2",children:[e.jsx(Un,{className:"!w-4 !h-4 !text-gray-400"}),e.jsx(x,{variant:"body2",children:P.route_name||`Route #${P.route_id}`})]})},{id:"exception_type",label:"Exception Type",render:(C,P)=>e.jsx(Me,{label:P.exception_type,size:"small",className:"!capitalize"})},{id:"description",label:"Description",render:(C,P)=>e.jsx(x,{variant:"body2",className:"!max-w-md !truncate",children:P.description})},{id:"severity",label:"Severity",render:(C,P)=>e.jsx(Me,{label:P.severity,color:v(P.severity),size:"small",className:"!capitalize"})},{id:"status",label:"Status",render:(C,P)=>e.jsx(Me,{label:P.status,color:j(P.status),size:"small",className:"!capitalize"})},{id:"reported_by",label:"Reported By",render:(C,P)=>P.reported_by_user?.name||`User #${P.reported_by}`},{id:"reported_date",label:"Reported Date",render:(C,P)=>Ie(P.reported_date)},{id:"resolved_date",label:"Resolved Date",render:(C,P)=>P.resolved_date?Ie(P.resolved_date):"-"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs("div",{children:[e.jsx(x,{variant:"h5",className:"!font-bold !text-gray-900",children:"Route Exceptions"}),e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"Monitor and manage exceptions reported for delivery routes"})]})}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Exceptions",value:f,icon:e.jsx(na,{className:"w-6 h-6"}),color:"blue",isLoading:u}),e.jsx(fe,{title:"Open Exceptions",value:b,icon:e.jsx(na,{className:"w-6 h-6"}),color:"red",isLoading:u}),e.jsx(fe,{title:"Resolved Exceptions",value:w,icon:e.jsx(Un,{className:"w-6 h-6"}),color:"green",isLoading:u}),e.jsx(fe,{title:"Critical Exceptions",value:S,icon:e.jsx(na,{className:"w-6 h-6"}),color:"orange",isLoading:u})]}),e.jsx(ot,{columns:N,data:h,loading:u,page:o-1,onPageChange:C=>l(C+1),rowsPerPage:c,isPermission:m,actions:m?e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ts,{placeholder:"Search Route Exceptions...",value:t,className:"!w-64",onChange:s,debounceMs:1e3})}),e.jsx("div",{className:"w-[180px]",children:e.jsxs(_e,{value:a,onChange:C=>r(C.target.value),fullWidth:!0,disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"open",children:"Open"}),e.jsx(Z,{value:"in_progress",children:"In Progress"}),e.jsx(Z,{value:"resolved",children:"Resolved"})]})}),e.jsx("div",{className:"w-[180px]",children:e.jsxs(_e,{value:n,onChange:C=>i(C.target.value),fullWidth:!0,disableClearable:!0,children:[e.jsx(Z,{value:"all",children:"All Severities"}),e.jsx(Z,{value:"critical",children:"Critical"}),e.jsx(Z,{value:"high",children:"High"}),e.jsx(Z,{value:"medium",children:"Medium"}),e.jsx(Z,{value:"low",children:"Low"})]})})]}):void 0})]})},eLe=nt({name:me().required("Company name is required"),address:me(),city:me(),state:me(),country:me(),zipcode:me(),phone_number:me(),email:me().email("Invalid email address"),website:me().url("Invalid URL"),smtp_host:me(),smtp_port:Ge().nullable(),smtp_username:me(),smtp_password:me(),smtp_mail_from_name:me(),smtp_mail_from_address:me().email("Invalid from email address"),currency_id:Ge().nullable()}),tLe=()=>{const{data:t,isLoading:s}=_u(),a=xbe(),{data:r}=Zl({status:"active",page:1}),[n,i]=g.useState(null),[o,l]=g.useState(null),c=t?.data,m=r?.data||[],u=xt({initialValues:{name:c?.name||"",address:c?.address||"",city:c?.city||"",state:c?.state||"",country:c?.country||"",zipcode:c?.zipcode||"",phone_number:c?.phone_number||"",email:c?.email||"",website:c?.website||"",is_active:c?.is_active||"Y",smtp_mail_from_name:c?.smtp_mail_from_name||"",smtp_mail_from_address:c?.smtp_mail_from_address||"",smtp_host:c?.smtp_host||"",smtp_port:c?.smtp_port||null,smtp_username:c?.smtp_username||"",smtp_password:c?.smtp_password||"",currency_id:c?.currency_id||null},validationSchema:eLe,enableReinitialize:!0,onSubmit:async b=>{try{if(!c?.id)return;const w=new FormData;w.append("name",b.name),w.append("address",b.address||""),w.append("city",b.city||""),w.append("state",b.state||""),w.append("country",b.country||""),w.append("zipcode",b.zipcode||""),w.append("phone_number",b.phone_number||""),w.append("email",b.email||""),w.append("website",b.website||""),w.append("is_active",b.is_active),w.append("smtp_mail_from_name",b.smtp_mail_from_name||""),w.append("smtp_mail_from_address",b.smtp_mail_from_address||""),w.append("smtp_host",b.smtp_host||""),w.append("smtp_port",b.smtp_port?b.smtp_port.toString():""),w.append("smtp_username",b.smtp_username||""),w.append("smtp_password",b.smtp_password||""),w.append("currency_id",b.currency_id?b.currency_id.toString():""),n&&w.append("logo",n),await a.mutateAsync({id:c.id,settingsData:w}),i(null),l(null)}catch(w){console.error("Error updating settings:",w)}}}),h=b=>{const w=b.target.files?.[0];if(w){i(w);const S=new FileReader;S.onloadend=()=>{l(S.result)},S.readAsDataURL(w)}},f=()=>{i(null),l(null)};return s?e.jsxs(y,{children:[e.jsxs(y,{className:"mb-2",children:[e.jsx(X,{variant:"text",width:200,height:32,className:"!mb-1"}),e.jsx(X,{variant:"text",width:400,height:20})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[e.jsxs(y,{className:"flex items-center gap-2 mb-4",children:[e.jsx(X,{variant:"circular",width:20,height:20}),e.jsx(X,{variant:"text",width:180,height:24})]}),e.jsx(pr,{className:"!mb-6"}),e.jsxs(y,{className:"mb-6",children:[e.jsx(X,{variant:"text",width:120,height:16,className:"!mb-4"}),e.jsxs(y,{className:"flex items-center gap-4",children:[e.jsx(X,{variant:"circular",width:96,height:96,className:"!bg-gray-200"}),e.jsxs(y,{children:[e.jsx(X,{variant:"rectangular",width:140,height:36}),e.jsx(X,{variant:"text",width:200,height:14,className:"!mt-2"})]})]})]}),e.jsx(y,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4,5,6,7,8,9,10,11].map(b=>e.jsxs(y,{className:"space-y-2",children:[e.jsx(X,{variant:"text",width:"40%",height:14}),e.jsx(X,{variant:"rectangular",width:"100%",height:56})]},b))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[e.jsxs(y,{className:"flex items-center gap-2 mb-4",children:[e.jsx(X,{variant:"circular",width:20,height:20}),e.jsx(X,{variant:"text",width:180,height:24})]}),e.jsx(pr,{className:"!mb-6"}),e.jsx(y,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4].map(b=>e.jsxs(y,{className:"space-y-2",children:[e.jsx(X,{variant:"text",width:"40%",height:14}),e.jsx(X,{variant:"rectangular",width:"100%",height:56})]},b))})]}),e.jsxs(y,{className:"flex justify-end gap-3",children:[e.jsx(X,{variant:"rectangular",width:100,height:36}),e.jsx(X,{variant:"rectangular",width:140,height:36})]})]}):c?e.jsxs(y,{children:[e.jsxs(y,{className:"mb-2",children:[e.jsx(x,{variant:"h5",className:"!font-semibold !text-gray-900",children:"System Settings"}),e.jsx(x,{variant:"body2",className:"!text-gray-600 !mt-1",children:"Manage your company settings and configuration"})]}),e.jsxs(y,{component:"form",onSubmit:u.handleSubmit,children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[e.jsxs(y,{className:"flex items-center gap-2 mb-4",children:[e.jsx(_n,{className:"w-5 h-5 text-primary-600"}),e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"Company Information"})]}),e.jsx(pr,{className:"!mb-6"}),e.jsxs(y,{className:"mb-6",children:[e.jsx(x,{variant:"body2",className:"!font-medium !text-gray-700 !mb-4",children:"Company Logo"}),e.jsxs(y,{className:"flex items-center gap-4",children:[e.jsx(ut,{src:o||c.logo||void 0,alt:c.name,className:"!w-24 !h-24 !bg-primary-100",children:e.jsx(_n,{className:"w-12 h-12 text-primary-600"})}),e.jsxs(y,{children:[e.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:h}),e.jsx("label",{htmlFor:"logo-upload",children:e.jsx(K,{variant:"outlined",component:"span",startIcon:e.jsx(qoe,{className:"w-4 h-4"}),size:"small",children:n?"Change Logo":"Upload Logo"})}),n&&e.jsx(ta,{size:"small",onClick:f,className:"!ml-2",children:e.jsx(An,{className:"w-4 h-4"})}),e.jsx(x,{variant:"caption",className:"!block !mt-2 !text-gray-500",children:"JPG, PNG or GIF. Max size of 10MB"})]})]})]}),e.jsxs(y,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(oe,{name:"name",formik:u,label:"Company Name",placeholder:"Enter company name",required:!0,fullWidth:!0}),e.jsx(oe,{name:"code",label:"Company Code",value:c.code,disabled:!0,fullWidth:!0}),e.jsx(oe,{name:"address",formik:u,label:"Address",placeholder:"Enter address",fullWidth:!0,className:"md:col-span-2"}),e.jsx(oe,{name:"city",formik:u,label:"City",placeholder:"Enter city",fullWidth:!0}),e.jsx(oe,{name:"state",formik:u,label:"State",placeholder:"Enter state",fullWidth:!0}),e.jsx(oe,{name:"country",formik:u,label:"Country",placeholder:"Enter country",fullWidth:!0}),e.jsx(oe,{name:"zipcode",formik:u,label:"Zip Code",placeholder:"Enter zip code",fullWidth:!0}),e.jsx(oe,{name:"phone_number",formik:u,label:"Phone Number",placeholder:"Enter phone number",fullWidth:!0}),e.jsx(oe,{name:"email",formik:u,label:"Email",placeholder:"Enter email address",type:"email",fullWidth:!0}),e.jsx(oe,{name:"website",formik:u,label:"Website",placeholder:"https://example.com",fullWidth:!0}),e.jsxs(_e,{name:"currency_id",formik:u,label:"Currency",fullWidth:!0,children:[e.jsx(Z,{value:"",children:"Select Currency"}),m.map(b=>e.jsxs(Z,{value:b.id,children:[b.code," - ",b.name]},b.id))]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[e.jsxs(y,{className:"flex items-center gap-2 mb-4",children:[e.jsx(bg,{className:"w-5 h-5 text-primary-600"}),e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900",children:"SMTP Configuration"})]}),e.jsx(pr,{className:"!mb-6"}),e.jsxs(y,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(oe,{name:"smtp_mail_from_name",formik:u,label:"From Name",placeholder:"Company Name",fullWidth:!0}),e.jsx(oe,{name:"smtp_mail_from_address",formik:u,label:"From Email",placeholder:"noreply@company.com",type:"email",fullWidth:!0}),e.jsx(oe,{name:"smtp_host",formik:u,label:"SMTP Host",placeholder:"smtp.example.com",fullWidth:!0}),e.jsx(oe,{name:"smtp_port",formik:u,label:"SMTP Port",placeholder:"587",type:"number",fullWidth:!0}),e.jsx(oe,{name:"smtp_username",formik:u,label:"SMTP Username",placeholder:"Enter SMTP username",fullWidth:!0}),e.jsx(oe,{name:"smtp_password",formik:u,label:"SMTP Password",placeholder:"Enter SMTP password",type:"password",autoComplete:"new-password",fullWidth:!0})]})]}),e.jsxs(y,{className:"flex justify-end gap-3",children:[e.jsx(K,{variant:"outlined",onClick:()=>{u.resetForm(),i(null),l(null)},children:"Reset"}),e.jsx(K,{type:"submit",variant:"contained",loading:a.isPending,startIcon:e.jsx(Da,{className:"w-4 h-4"}),children:"Save Settings"})]})]})]}):e.jsx(y,{children:e.jsx(x,{variant:"h6",className:"!text-gray-900",children:"No settings found"})})},sLe=async t=>{try{return(await ie.get("/promotions",{params:t})).data}catch(s){throw s}},aLe=async t=>{try{return(await ie.get(`/promotions/${t}`)).data}catch(s){throw s}},rLe=async t=>(await ie.post("/promotions",t)).data,nLe=async(t,s)=>(await ie.put(`/promotions/${t}`,s)).data,iLe=async t=>(await ie.delete(`/promotions/${t}`)).data,zm={all:["promotions"],lists:()=>[...zm.all,"list"],list:t=>[...zm.lists(),t],details:()=>[...zm.all,"detail"],detail:t=>[...zm.details(),t]},oLe=(t,s)=>tt({queryKey:zm.list(t),queryFn:()=>sLe(t),staleTime:300*1e3,...s}),a$=(t,s)=>tt({queryKey:zm.detail(t),queryFn:()=>aLe(t),enabled:!!t,staleTime:300*1e3,...s}),lLe=()=>De({mutationFn:t=>rLe(t),invalidateQueries:[["promotions"]],loadingMessage:"Saving..."}),cLe=()=>De({mutationFn:({id:t,data:s})=>nLe(t,s),invalidateQueries:[["promotions"]],loadingMessage:"Saving..."}),dLe=()=>De({mutationFn:t=>iLe(t),invalidateQueries:[["promotions"]],loadingMessage:"Deleting..."}),uLe=["Quantity","Price","Weight"],zD=["Free Product","Percent","Amount"],mLe=["Cash","Credit","Both"],pLe=["(B) Distributor Channel","(C) Customer Channel"],hLe=["All","Invoice","Waybill","Order"],fLe=["Normal","Exclusive","Priority"],xLe=["Normal","Override","Combine"],gLe=nt({name:me().required("Name is required"),start_date:me().required("Start date is required"),finish_date:me().required("Finish date is required").test("is-after-start","Finish date must be after start date",function(t){const{start_date:s}=this.parent;return!t||!s?!0:new Date(t)>=new Date(s)}),description:me(),is_active:me().oneOf(["Y","N"]).required()}),yLe=({selectedPromotion:t,setSelectedPromotion:s,drawerOpen:a,setDrawerOpen:r})=>{const n=!!t,{data:i,isLoading:o}=a$(t?.id||null),{data:l}=Cu({limit:1e3}),c=l?.data||[],{data:m}=No({limit:1e3}),u=m?.data||[],{data:h}=Jl({limit:1e3}),f=h?.data||[],{data:b}=Ep({limit:1e3}),w=b?.data||[],{data:S}=Tp({limit:1e3}),j=S?.data||[],{data:v}=GS(),N=v?.data||[],{data:C}=c1({limit:1e3}),P=C?.data||[],E=lLe(),M=cLe(),[T,A]=g.useState([]),[L,F]=g.useState([]),[z,I]=g.useState([]),[Q,Y]=g.useState(0),[B,q]=g.useState(null),[V,G]=g.useState({area:"",group:"",distributor_id:"",role:"",slip_limit:!1,disc_limit:!1,date_limit:!1,dc_par:!1}),[H,D]=g.useState(null),[R,$]=g.useState(0),[W,J]=g.useState(""),[te,ee]=g.useState(""),[ae,ce]=g.useState(!1),[he,ne]=g.useState(""),[xe,ge]=g.useState("0.00"),[le,pe]=g.useState("Amount"),[Re,Se]=g.useState({group:"",dyn_group:"",product:"",quant_group:"",dyn_prod_groups:"",at_least:"",unit:"unit"}),[He,ze]=g.useState({});g.useEffect(()=>{(!i?.data||!n)&&(A([]),F([]),I([]))},[i,n]);const st=()=>{s(null),r(!1),ke.resetForm(),A([]),F([]),I([]),q(null),D(null),G({area:"",group:"",distributor_id:"",role:"",slip_limit:!1,disc_limit:!1,date_limit:!1,dc_par:!1}),Se({group:"",dyn_group:"",product:"",quant_group:"",dyn_prod_groups:"",at_least:"",unit:"unit"})},ke=xt({initialValues:{disabled:!1,name:t?.name||"",short_name:t?.name||"",code:t?.code||"",pay_type:"",scope:"",slip_type:"All",mandatory:!1,prom_conflict:"Normal",degree:"1",nr:"1",reg_disc_conf:"Normal",conflict_with_constant_disc:!1,start_date:t?.start_date?new Date(t.start_date).toISOString().split("T")[0]:"",finish_date:t?.end_date?new Date(t.end_date).toISOString().split("T")[0]:"",platform:["Mobile"],group:"",dist_comp_participation_min:"0",dist_comp_participation_max:"100",quantity_type:"Quantity",description:t?.description||"",is_active:t?.is_active||"Y"},validationSchema:gLe,enableReinitialize:!0,onSubmit:async be=>{try{const Oe=L.filter(rt=>rt.distributor_id).map(rt=>Number(rt.distributor_id)).filter((rt,Lt,Nt)=>Nt.indexOf(rt)===Lt),Le=L.filter(rt=>rt.group).map(rt=>Number(rt.group)).filter((rt,Lt,Nt)=>Nt.indexOf(rt)===Lt),jt=T.filter(rt=>rt.product_id||rt.product_group).map(rt=>{const Lt=rt.product_id?c.find(ps=>ps.id===rt.product_id):null,Nt=j.length>0?j[0].id:1;return{product_id:rt.product_id||1,category_id:Lt?.category_id||Nt,product_group:rt.product_group,min_quantity:rt.min_quantity||0,min_value:rt.min_quantity||0}}),Jt=z.filter(rt=>rt.product_id).map(rt=>({benefit_type:rt.type==="Free Product"?"FREE_PRODUCT":"PERCENT",product_id:rt.product_id,benefit_value:rt.benefit_value||0,condition_type:rt.application||null,gift_limit:rt.gift_limit||0})),Kt={name:be.name,description:be.description,start_date:be.start_date,end_date:be.finish_date,platforms:["Mobile"],quantity_type:be.quantity_type||"QUANTITY",product_conditions:jt.length>0?jt:void 0,location_areas:Oe.length>0?Oe:void 0,outlet1_groups:Le.length>0?Le:void 0,levels:Jt.length>0?[{level_number:1,threshold_value:0,discount_type:"PERCENTAGE",discount_value:0,benefits:Jt}]:void 0};if(n&&t){const rt=L.filter(Nt=>Nt.distributor_id).map(Nt=>Number(Nt.distributor_id)).filter((Nt,ps,cs)=>cs.indexOf(Nt)===ps),Lt=L.filter(Nt=>Nt.group).map(Nt=>Number(Nt.group)).filter((Nt,ps,cs)=>cs.indexOf(Nt)===ps);await M.mutateAsync({id:t.id,data:{name:be.name,start_date:be.start_date,end_date:be.finish_date,description:be.description,is_active:be.is_active,platforms:["Mobile"],location_areas:rt.length>0?rt:void 0,outlet1_groups:Lt.length>0?Lt:void 0}})}else{const rt={...Kt,levels:Kt.levels?Kt.levels.map(Lt=>({...Lt,benefits:Lt.benefits?.map(Nt=>({...Nt,condition_type:Nt.condition_type??void 0}))})):void 0};await E.mutateAsync(rt)}st()}catch(Oe){console.error("Error saving updated promotion:",Oe)}}}),We=()=>{if(!Re.group&&!Re.product){ze({...He,productCondition_new:"Product or Group must be selected"});return}if(!Re.at_least||parseFloat(Re.at_least)<=0){ze({...He,productCondition_quantity_new:"At least value must be greater than 0"});return}const be={_index:T.length,product_group:Re.group,product_id:Re.product?parseInt(Re.product):void 0,min_quantity:parseFloat(Re.at_least)||0};A([...T,be]),Se({group:"",dyn_group:"",product:"",quant_group:"",dyn_prod_groups:"",at_least:"",unit:"unit"}),ze({})},ye=be=>{A(T.filter((Oe,Le)=>Le!==be))},Ye=(be,Oe,Le)=>{const jt=[...T];jt[be]={...jt[be],[Oe]:Le},A(jt)},at=()=>{const be={_index:L.length,outlet_condition:"Distributor",dist:V.distributor_id&&u.find(Oe=>Oe.id.toString()===V.distributor_id)?.code||"",outlet_value:"",start:ke.values.start_date,finish:ke.values.finish_date,area:V.area,group:V.group,distributor_id:V.distributor_id,role:V.role,slip_limit:V.slip_limit?"1":"",disc_limit:V.disc_limit?"1":"",date_limit:V.date_limit,dc_par:V.dc_par};F([...L,be]),G({area:"",group:"",distributor_id:"",role:"",slip_limit:!1,disc_limit:!1,date_limit:!1,dc_par:!1})},bt=be=>{F(L.filter((Oe,Le)=>Le!==be))},ct=(be,Oe,Le)=>{const jt=[...L];jt[be]={...jt[be],[Oe]:Le},F(jt)},ht=be=>{I(z.filter((Oe,Le)=>Le!==be))},Et=(be,Oe,Le)=>{const jt=[...z];jt[be]={...jt[be],[Oe]:Le},I(jt)};return o&&n?e.jsx(it,{open:a,setOpen:st,title:n?"Edit Updated Promotion":"Create Updated Promotion",fullWidth:!0,children:e.jsx(y,{className:"!p-6",children:e.jsx(x,{children:"Loading..."})})}):e.jsx(it,{open:a,setOpen:st,title:n?"Edit Updated Promotion":"Create Updated Promotion",fullWidth:!0,children:e.jsxs(y,{className:"!p-4 !overflow-auto !max-h-[calc(100vh-100px)]",children:[Object.keys(He).length>0&&e.jsxs(lt,{severity:"error",className:"!mb-4",children:[e.jsx(x,{variant:"subtitle2",className:"!font-semibold !mb-1",children:"Please fix the following errors:"}),e.jsx("ul",{className:"!list-disc !list-inside !space-y-1",children:Object.values(He).map((be,Oe)=>e.jsx("li",{className:"!text-sm",children:be},Oe))})]}),e.jsxs("form",{onSubmit:ke.handleSubmit,className:"!space-y-3 !grid !grid-cols-2 !gap-3",children:[e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-2 !text-base",children:"Header Information"}),e.jsxs(y,{className:"!space-y-2 !grid !grid-cols-2 !gap-2",children:[e.jsx(oe,{name:"name",label:"Name",formik:ke,required:!0,fullWidth:!0}),e.jsx(oe,{name:"short_name",label:"Short Name",formik:ke,fullWidth:!0}),e.jsx(oe,{name:"code",label:"Code",formik:ke,required:!0,fullWidth:!0}),e.jsx(_e,{name:"pay_type",label:"Pay Type",formik:ke,fullWidth:!0,children:mLe.map(be=>e.jsx(Z,{value:be,children:be},be))}),e.jsx(_e,{name:"scope",label:"Scope",formik:ke,fullWidth:!0,children:pLe.map(be=>e.jsx(Z,{value:be,children:be},be))}),e.jsx(_e,{name:"slip_type",label:"Slip Type",formik:ke,fullWidth:!0,children:hLe.map(be=>e.jsx(Z,{value:be,children:be},be))}),e.jsx(_e,{name:"prom_conflict",label:"Prom. Conflict",formik:ke,fullWidth:!0,children:fLe.map(be=>e.jsx(Z,{value:be,children:be},be))}),e.jsx(oe,{name:"degree",label:"Degree",type:"number",formik:ke,fullWidth:!0}),e.jsx(oe,{name:"nr",label:"Nr",type:"number",formik:ke,fullWidth:!0}),e.jsx(_e,{name:"reg_disc_conf",label:"Reg.Disc. Conf.",formik:ke,fullWidth:!0,children:xLe.map(be=>e.jsx(Z,{value:be,children:be},be))}),e.jsx(Xn,{control:e.jsx(Fo,{checked:ke.values.conflict_with_constant_disc,onChange:be=>ke.setFieldValue("conflict_with_constant_disc",be.target.checked)}),className:"!col-span-2",label:"Conflict with Constant disc."}),e.jsx(oe,{name:"start_date",label:"Start",type:"date",formik:ke,required:!0,fullWidth:!0}),e.jsx(oe,{name:"finish_date",label:"Finish",type:"date",formik:ke,required:!0,fullWidth:!0}),e.jsx(oe,{name:"group",label:"Group",formik:ke,fullWidth:!0}),e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(oe,{name:"dist_comp_participation_min",label:"Dist./Comp. Participation",type:"number",formik:ke,fullWidth:!0}),e.jsx(oe,{name:"dist_comp_participation_max",label:"",type:"number",formik:ke,fullWidth:!0})]}),e.jsxs(y,{className:"!col-span-2 !flex !gap-2",children:[e.jsx(K,{type:"submit",variant:"contained",size:"small",disabled:E.isPending||M.isPending,children:"Save"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:st,children:"Cancel"})]})]})]}),e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-2 !text-base",children:"Suitable Outlets"}),e.jsx(y,{className:"!mb-3",children:e.jsxs(Zo,{value:Q,onChange:(be,Oe)=>Y(Oe),variant:"scrollable",scrollButtons:"auto",children:[e.jsx(As,{label:"Depots"}),e.jsx(As,{label:"Zones"}),e.jsx(As,{label:"Routes"}),e.jsx(As,{label:"Outlet"})]})}),e.jsxs(y,{className:"!grid !grid-cols-1 md:!grid-cols-2 !gap-2 !mb-2",children:[e.jsxs(_e,{value:V.area,onChange:be=>G({...V,area:be.target.value}),label:"Area",fullWidth:!0,children:[e.jsx(Z,{value:"",children:"Select Area"}),f.map(be=>e.jsx(Z,{value:be.id.toString(),children:be.name},be.id))]}),e.jsx(fu,{value:V.group,onChange:(be,Oe)=>G({...V,group:Oe?Oe.id.toString():""}),label:"Group",fullWidth:!0}),e.jsxs(_e,{value:V.distributor_id,onChange:be=>G({...V,distributor_id:be.target.value}),label:"Distributor",fullWidth:!0,children:[e.jsx(Z,{value:"",children:"Select Distributor"}),u.map(be=>e.jsxs(Z,{value:be.id.toString(),children:[be.name," (",be.code,")"]},be.id))]}),e.jsxs(_e,{value:V.role,onChange:be=>G({...V,role:be.target.value}),label:"Role",fullWidth:!0,children:[e.jsx(Z,{value:"",children:"Select Role"}),N.map(be=>e.jsx(Z,{value:be.id.toString(),children:be.name},be.id))]})]}),e.jsxs(y,{className:"!flex !gap-2 !mb-2",children:[e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:at,children:"New"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{if(B!==null){const be=[...L];be[B]={...be[B],area:V.area,group:V.group,distributor_id:V.distributor_id,role:V.role,dist:V.distributor_id&&u.find(Oe=>Oe.id.toString()===V.distributor_id)?.code||"",slip_limit:V.slip_limit?"1":"",disc_limit:V.disc_limit?"1":"",date_limit:V.date_limit,dc_par:V.dc_par},F(be),q(null),G({area:"",group:"",distributor_id:"",role:"",slip_limit:!1,disc_limit:!1,date_limit:!1,dc_par:!1})}},disabled:B===null,children:"Update"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{B!==null&&(bt(B),q(null),G({area:"",group:"",distributor_id:"",role:"",slip_limit:!1,disc_limit:!1,date_limit:!1,dc_par:!1}))},disabled:B===null,children:"Del"})]}),e.jsxs(y,{className:"!flex !gap-2 !mb-2 !flex-wrap",children:[e.jsx(Xn,{control:e.jsx(Fo,{checked:V.slip_limit,size:"small",onChange:be=>G({...V,slip_limit:be.target.checked})}),label:"Slip Lim."}),e.jsx(Xn,{control:e.jsx(Fo,{checked:V.disc_limit,onChange:be=>G({...V,disc_limit:be.target.checked})}),label:"Disc. Lim."}),e.jsx(Xn,{control:e.jsx(Fo,{checked:V.date_limit,onChange:be=>G({...V,date_limit:be.target.checked})}),label:"Date"}),e.jsx(Xn,{control:e.jsx(Fo,{checked:V.dc_par,onChange:be=>G({...V,dc_par:be.target.checked})}),label:"D/C Par."})]}),L.length>0&&e.jsx(y,{className:"!mt-3",children:e.jsx(ot,{data:L.map((be,Oe)=>({id:be._index,condition:be.outlet_condition||"Distributor",dist:be.dist||"-",outlet_value:be.outlet_value||"-",location:be.area&&f.find(Le=>Le.id.toString()===be.area)?f.find(Le=>Le.id.toString()===be.area)?.name:"-",distributor:be.distributor_id&&u.find(Le=>Le.id.toString()===be.distributor_id)?u.find(Le=>Le.id.toString()===be.distributor_id)?.name:"-",seller:be.role&&N.find(Le=>Le.id.toString()===be.role)?N.find(Le=>Le.id.toString()===be.role)?.name:"-",start:be.start||"-",finish:be.finish||"-",slip_limit:be.slip_limit||"-",disc_limit:be.disc_limit||"-",_index:Oe,_row:be})),columns:[{id:"condition",label:"Outlet Condition",render:(be,Oe)=>{const Le=L[Oe._index];return e.jsxs(_e,{value:Le.outlet_condition,onChange:jt=>ct(Oe._index,"outlet_condition",jt.target.value),size:"small",fullWidth:!1,children:[e.jsx(Z,{value:"Distributor",children:"Distributor"}),e.jsx(Z,{value:"Customer Category",children:"Customer Category"}),e.jsx(Z,{value:"Customer",children:"Customer"})]})}},{id:"dist",label:"Dist.",render:(be,Oe)=>{const Le=L[Oe._index];return e.jsx(oe,{value:Le.dist,onChange:jt=>ct(Oe._index,"dist",jt.target.value),placeholder:"Dist",size:"small",className:"!w-20",fullWidth:!1})}},{id:"outlet_value",label:"Outlet Value",render:(be,Oe)=>{const Le=L[Oe._index];return e.jsxs(_e,{value:Le.outlet_value,onChange:jt=>ct(Oe._index,"outlet_value",jt.target.value),size:"small",className:"!w-40",fullWidth:!1,children:[e.jsx(Z,{value:"",children:"Select..."}),w.map(jt=>e.jsxs(Z,{value:jt.id.toString(),children:[jt.name," (",jt.code,")"]},jt.id))]})}},{id:"location",label:"Location"},{id:"distributor",label:"Distributor"},{id:"seller",label:"Seller"},{id:"start",label:"Start",render:(be,Oe)=>{const Le=L[Oe._index];return e.jsx(oe,{type:"date",value:Le.start,className:"!w-40",onChange:jt=>ct(Oe._index,"start",jt.target.value),size:"small",fullWidth:!1})}},{id:"finish",label:"Finish",render:(be,Oe)=>{const Le=L[Oe._index];return e.jsx(oe,{type:"date",value:Le.finish,className:"!w-40",onChange:jt=>ct(Oe._index,"finish",jt.target.value),size:"small",fullWidth:!1})}},{id:"slip_limit",label:"Slip Lim.",render:(be,Oe)=>{const Le=L[Oe._index];return e.jsx(oe,{value:Le.slip_limit||"",onChange:jt=>ct(Oe._index,"slip_limit",jt.target.value),placeholder:"Slip Lim",size:"small",className:"!w-24",fullWidth:!1})}},{id:"disc_limit",label:"Disc. Lim.",render:(be,Oe)=>{const Le=L[Oe._index];return e.jsx(oe,{value:Le.disc_limit||"",onChange:jt=>ct(Oe._index,"disc_limit",jt.target.value),placeholder:"Disc Lim",size:"small",className:"!w-24",fullWidth:!1})}},{id:"actions",label:"Actions",render:(be,Oe)=>e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(rs,{onClick:()=>{q(Oe._index);const Le=L[Oe._index];G({area:Le.area||"",group:Le.group||"",distributor_id:Le.distributor_id||"",role:Le.role||"",slip_limit:Le.slip_limit==="1",disc_limit:Le.disc_limit==="1",date_limit:Le.date_limit||!1,dc_par:Le.dc_par||!1})},tooltip:"Edit outlet",size:"small"}),e.jsx(Vt,{onClick:()=>bt(Oe._index),tooltip:"Delete outlet",size:"small"})]})}],pagination:!1,sortable:!1,compact:!0})})]}),e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsx(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-2 !text-base",children:"Promotion Product Condition"}),e.jsxs(y,{className:"!mb-2",children:[e.jsx(x,{className:"!mb-1 !text-xs !font-medium",children:"Quantity Type"}),e.jsx(yx,{value:ke.values.quantity_type,onChange:be=>ke.setFieldValue("quantity_type",be.target.value),row:!0,children:uLe.map(be=>e.jsx(Xn,{value:be,control:e.jsx(gx,{}),label:be},be))})]}),T.length>0&&e.jsx(y,{className:"!mb-2",children:e.jsx(ot,{data:T.map((be,Oe)=>({id:be._index,product_group:be.product_group||(be.product_id?c.find(Le=>Le.id===be.product_id)?.name:"-")||"-",at_least:`${be.min_quantity||0} ${Re.unit}`,_index:Oe})),columns:[{id:"product_group",label:"Product/Group"},{id:"at_least",label:"At least"},{id:"actions",label:"Actions",render:(be,Oe)=>e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(rs,{onClick:()=>{const Le=T[Oe._index];D(Oe._index),Se({group:Le.product_group||"",dyn_group:"",product:Le.product_id?.toString()||"",quant_group:"",dyn_prod_groups:"",at_least:Le.min_quantity?.toString()||"",unit:Re.unit})},tooltip:"Edit condition",size:"small"}),e.jsx(Vt,{onClick:()=>ye(Oe._index),tooltip:"Delete condition",size:"small"})]})}],pagination:!1,sortable:!1,compact:!0})}),e.jsxs(y,{className:"!space-y-2 !mt-2",children:[e.jsxs(y,{className:"!grid !grid-cols-2 !gap-2",children:[e.jsx(fu,{value:Re.group?j.find(be=>be.category_name===Re.group)?.id.toString():"",nameToSearch:Re.group||"",onChange:(be,Oe)=>Se({...Re,group:Oe?Oe.category_name:""}),label:"Group",size:"small",fullWidth:!0}),e.jsx(bo,{value:Re.product,onChange:(be,Oe)=>Se({...Re,product:Oe?Oe.id.toString():""}),label:"Product",size:"small",fullWidth:!0}),e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(oe,{type:"number",value:Re.at_least,onChange:be=>Se({...Re,at_least:be.target.value}),label:"At least",size:"small",className:"!flex-1",fullWidth:!1}),e.jsxs(_e,{value:Re.unit,onChange:be=>Se({...Re,unit:be.target.value}),size:"small",className:"!w-24",fullWidth:!1,children:[e.jsx(Z,{value:"unit",children:"unit"}),P.map(be=>e.jsx(Z,{value:be.name,children:be.name},be.id))]})]})]}),e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{if(H!==null){const be=H;Ye(be,"product_group",Re.group),Ye(be,"product_id",Re.product?parseInt(Re.product):void 0),Ye(be,"min_quantity",parseFloat(Re.at_least)||0),D(null),Se({group:"",dyn_group:"",product:"",quant_group:"",dyn_prod_groups:"",at_least:"",unit:"unit"}),ze({})}},disabled:H===null,children:"Update"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:We,children:"New"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{H!==null&&(ye(H),D(null),Se({group:"",dyn_group:"",product:"",quant_group:"",dyn_prod_groups:"",at_least:"",unit:"unit"}))},disabled:H===null,children:"Del"})]})]})]}),e.jsxs(oa,{className:"!p-3 !rounded-lg !shadow-sm !border !bg-white !border-gray-200",children:[e.jsxs(x,{variant:"h6",className:"!font-semibold !text-gray-900 !mb-2 !text-base",children:["GIFT ",e.jsxs("span",{className:"!text-gray-500",children:["(",z.length,")"]})]}),z.length>0&&e.jsx(y,{className:"!mb-4",children:e.jsx(ot,{data:z.map((be,Oe)=>({id:Oe,type:be.type,application:be.application,gift:be.gift,_index:Oe})),columns:[{id:"type",label:"Type",render:(be,Oe)=>{const Le=z[Oe._index];return e.jsx(_e,{value:Le.type,onChange:jt=>Et(Oe._index,"type",jt.target.value),size:"small",fullWidth:!1,children:zD.map(jt=>e.jsx(Z,{value:jt,children:jt},jt))})}},{id:"application",label:"Application",render:(be,Oe)=>{const Le=z[Oe._index];return e.jsx(oe,{value:Le.application,onChange:jt=>Et(Oe._index,"application",jt.target.value),placeholder:"Application",size:"small",fullWidth:!1})}},{id:"gift",label:"Gift",render:(be,Oe)=>{const Le=z[Oe._index];return e.jsx(oe,{value:Le.gift,onChange:jt=>Et(Oe._index,"gift",jt.target.value),placeholder:"Gift",size:"small",fullWidth:!1})}},{id:"actions",label:"Actions",render:(be,Oe)=>e.jsx(Vt,{onClick:()=>ht(Oe._index),tooltip:"Delete gift",size:"small"})}],pagination:!1,sortable:!1,compact:!0})}),e.jsxs(y,{className:"!space-y-2 !mt-2",children:[e.jsxs(y,{children:[e.jsx(x,{className:"!mb-1 !text-xs !font-medium",children:"Type"}),e.jsx(yx,{value:le,onChange:be=>{const Oe=be.target.value;pe(Oe),z.forEach((Le,jt)=>{Et(jt,"type",Oe)})},row:!0,children:zD.map(be=>e.jsx(Xn,{value:be,control:e.jsx(gx,{}),label:be},be))})]}),e.jsx(oe,{label:"Disc. (Amount)",type:"number",value:he,onChange:be=>ne(be.target.value),fullWidth:!0,size:"small"}),e.jsx(oe,{label:"Maximum",type:"number",value:xe,onChange:be=>ge(be.target.value),fullWidth:!0,size:"small"}),e.jsx(y,{children:e.jsxs(Zo,{value:R,onChange:(be,Oe)=>$(Oe),variant:"scrollable",scrollButtons:"auto",children:[e.jsx(As,{label:"Product"}),e.jsx(As,{label:"Prod. Group"}),e.jsx(As,{label:"Dyn. Prod. Gr."}),e.jsx(As,{label:"Conditional Products"}),e.jsx(As,{label:"Invoice"})]})}),e.jsx(oe,{label:"Code",value:W,onChange:be=>J(be.target.value),fullWidth:!0,size:"small"}),e.jsx(bo,{label:"Name",value:te,onChange:(be,Oe)=>ee(Oe?Oe.id.toString():""),fullWidth:!0,size:"small"}),e.jsx(Xn,{control:e.jsx(Fo,{checked:ae,onChange:be=>ce(be.target.checked),size:"small"}),label:"Product may not be in condition"}),e.jsxs(y,{className:"!flex !gap-2",children:[e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{z.length>0&&W&&te&&(Et(z.length-1,"gift",`${he} ${te}`),Et(z.length-1,"product_id",parseInt(te)),ne(""),J(""),ee(""))},children:"Update"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{const be={_index:z.length,type:le,application:"n. Prod. Gr.",gift:he?`${he} ${te||""}`:"",product_id:te?parseInt(te):void 0,benefit_value:parseFloat(he)||0,gift_limit:0};I([...z,be]),ne(""),J(""),ee("")},children:"New"}),e.jsx(K,{type:"button",variant:"outlined",size:"small",onClick:()=>{z.length>0&&(ht(z.length-1),ne(""),J(""),ee(""))},disabled:z.length===0,children:"Del"})]})]})]})]})]})})},bLe=()=>{const t=Ws(),[s,a]=g.useState(""),[r,n]=g.useState("all"),[i,o]=g.useState(null),[l,c]=g.useState(!1),[m,u]=g.useState(1),[h]=g.useState(10),{isCreate:f,isUpdate:b,isDelete:w,isRead:S}=Qe("promotions"),{data:j,isLoading:v,error:N}=oLe({search:s,page:m,limit:h,is_active:r==="all"?void 0:r==="active"?"Y":"N"},{enabled:S}),C=j?.data||[],P=j?.pagination?.total_count||0,E=(j?.pagination?.current_page||1)-1,M=ls(),T=dLe(),A=j?.stats?.total_promotions||j?.pagination?.total_count||0,L=j?.stats?.active_promotions||C.filter(H=>H.is_active==="Y").length,F=j?.stats?.inactive_promotions||C.filter(H=>H.is_active==="N").length,z=j?.stats?.promotions_this_month||0,I=g.useCallback(()=>{o(null),c(!0)},[]),Q=g.useCallback(H=>{o(H),c(!0)},[]),Y=g.useCallback(async H=>{try{await T.mutateAsync(H)}catch(D){console.error("Error deleting updated promotion:",D)}},[T]),B=g.useCallback(H=>{a(H),u(1)},[]),q=H=>{u(H+1)},V=g.useCallback(async()=>{try{const H={search:s,status:r==="all"?void 0:r==="active"?"Y":"N"};await M.mutateAsync({tableName:"updated-promotions",filters:H})}catch(H){console.error("Error exporting updated promotions:",H)}},[M,s,r]),G=[{id:"name",label:"Promotion Info",render:(H,D)=>e.jsxs(y,{className:"!flex !gap-2 !items-center",children:[e.jsx(ut,{alt:D.name,className:"!rounded !bg-primary-100 !text-primary-600",children:e.jsx(_r,{className:"w-5 h-5"})}),e.jsxs(y,{children:[e.jsx(x,{variant:"body1",className:"!text-gray-900 !leading-tight !font-medium",children:D.name}),e.jsx(x,{variant:"caption",className:"!text-gray-500 !text-xs !block !mt-0.5",children:D.code})]})]})},{id:"start_date",label:"Period",render:(H,D)=>e.jsxs(y,{children:[e.jsx(x,{variant:"body2",className:"!text-gray-900",children:Ie(D.start_date)}),e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:["to ",Ie(D.end_date)]})]})},{id:"description",label:"Description",render:(H,D)=>e.jsx(x,{variant:"body2",className:"!text-gray-700 !max-w-xs !truncate",children:D.description||"N/A"})},{id:"is_active",label:"Status",render:(H,D)=>e.jsx(Me,{icon:D.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:D.is_active==="Y"?"Active":"Inactive",size:"small",color:D.is_active==="Y"?"success":"error"})},{id:"createdate",label:"Created",render:(H,D)=>e.jsx(x,{variant:"body2",className:"!text-gray-500",children:Ie(D.createdate?.toString())})},...b||w||S?[{id:"action",label:"Actions",sortable:!1,render:(H,D)=>e.jsxs("div",{className:"!flex !gap-2 !items-center",children:[b&&e.jsx(rs,{onClick:()=>Q(D),tooltip:"Edit updated promotion"}),S&&e.jsx(Wa,{onClick:()=>t(`/masters/updated-promotions/${D.id}`),tooltip:"View updated promotion",icon:e.jsx(Sn,{fontSize:"small"}),color:"info"}),w&&e.jsx(Vt,{onClick:()=>Y(D.id),tooltip:"Delete updated promotion",confirmDelete:!0,itemName:"updated promotion"})]})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"!mb-3 !flex !justify-between !items-center",children:e.jsxs(y,{children:[e.jsx("p",{className:"!font-bold text-xl !text-gray-900",children:"Updated Promotions Management"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage updated promotional offers, discounts, and special deals for your products"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(fe,{title:"Total Promotions",value:A,icon:e.jsx(_r,{className:"w-6 h-6"}),color:"blue",isLoading:v}),e.jsx(fe,{title:"Active Promotions",value:L,icon:e.jsx(mt,{className:"w-6 h-6"}),color:"green",isLoading:v}),e.jsx(fe,{title:"Inactive Promotions",value:F,icon:e.jsx(Ct,{className:"w-6 h-6"}),color:"red",isLoading:v}),e.jsx(fe,{title:"New This Month",value:z,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"purple",isLoading:v})]}),N&&e.jsx(lt,{severity:"error",className:"!mb-4",children:"Failed to load updated promotions. Please try again."}),e.jsx(ot,{data:C,columns:G,actions:S||f?e.jsxs("div",{className:"flex justify-between w-full items-center flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:S&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{placeholder:"Search Updated Promotions...",value:s,onChange:B,debounceMs:400,showClear:!0,className:"!w-80"}),e.jsxs(_e,{value:r,onChange:H=>{n(H.target.value),u(1)},className:"!w-32",children:[e.jsx(Z,{value:"all",children:"All Status"}),e.jsx(Z,{value:"active",children:"Active"}),e.jsx(Z,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[S&&e.jsx(Xt,{title:"Export Updated Promotions",description:"Are you sure you want to export the current updated promotions data to Excel? This will include all filtered results.",onConfirm:V,confirmText:"Export",cancelText:"Cancel",placement:"top",children:e.jsx(K,{variant:"outlined",className:"!capitalize",startIcon:e.jsx(St,{}),disabled:M.isPending,children:M.isPending?"Exporting...":"Export"})}),f&&e.jsx(K,{variant:"contained",className:"!capitalize",disableElevation:!0,startIcon:e.jsx(os,{}),onClick:I,children:"Create"})]})]}):!1,getRowId:H=>H.id,initialOrderBy:"name",loading:v,totalCount:P,page:E,rowsPerPage:h,isPermission:S,onPageChange:q,emptyMessage:s?`No updated promotions found matching "${s}"`:"No updated promotions found in the system"}),e.jsx(yLe,{selectedPromotion:i,setSelectedPromotion:o,drawerOpen:l,setDrawerOpen:c})]})},vLe=()=>{const{id:t}=Kr(),s=Ws(),{data:a,isLoading:r,error:n,isFetching:i}=a$(Number(t)),o=a?.data,l=()=>{s("/masters/updated-promotions")};if(r||i)return e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6",children:[e.jsx(X,{variant:"text",width:200,height:32,className:"!mb-4"}),e.jsx(X,{variant:"rectangular",width:"100%",height:200})]})});if(n||!o)return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"!bg-red-50 !border !border-red-200 !rounded-lg !p-6 !mb-6",children:[e.jsx(x,{variant:"h6",className:"!text-red-800 !font-bold !mb-2",children:"Failed to load updated promotion details"}),e.jsx(x,{variant:"body2",className:"!text-red-600",children:"Please try again or contact your system administrator if this problem persists."})]}),e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:l,className:"!mt-4",children:"Back to Updated Promotions"})]});const c=({title:m,children:u,icon:h})=>e.jsxs("div",{className:"!bg-white !rounded-lg !shadow !border !border-gray-200 !p-6 !relative !overflow-hidden",children:[e.jsx("div",{className:"!absolute !top-0 !right-0 !w-16 !h-16 !bg-gradient-to-br !from-blue-50 !to-purple-50 !rounded-full !-translate-y-8 !translate-x-8"}),e.jsxs("div",{className:"!relative !z-10",children:[e.jsxs("div",{className:"!flex !items-center !gap-2 !mb-4",children:[h&&e.jsx("div",{className:"!p-1.5 !w-10 !h-10 flex items-center justify-center !bg-primary-100 !rounded-md",children:e.jsx(h,{className:"!text-primary-500"})}),e.jsx(x,{variant:"h6",className:"!font-bold !text-gray-900",children:m})]}),u]})]});return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"!mb-6 !flex !items-center !gap-3",children:[e.jsx(K,{variant:"outlined",startIcon:e.jsx(Qa,{}),onClick:l,className:"!capitalize",children:"Back"}),e.jsx(x,{variant:"h5",className:"!font-bold !text-gray-900",children:"Updated Promotion Details"})]}),e.jsxs("div",{className:"!grid !grid-cols-1 lg:!grid-cols-3 !gap-6 !mb-6",children:[e.jsxs("div",{className:"lg:!col-span-2 !space-y-6",children:[e.jsx(c,{title:"Promotion Information",icon:_r,children:e.jsxs("div",{className:"!space-y-4",children:[e.jsxs("div",{className:"!flex !items-start !gap-4",children:[e.jsx(ut,{alt:o.name,className:"!rounded !bg-primary-100 !text-primary-600 !w-16 !h-16",children:e.jsx(_r,{className:"w-8 h-8"})}),e.jsxs("div",{className:"!flex-1",children:[e.jsx(x,{variant:"h5",className:"!font-bold !text-gray-900 !mb-1",children:o.name}),e.jsxs(x,{variant:"body2",className:"!text-gray-500 !mb-2",children:["Code: ",o.code]}),e.jsx(Me,{icon:o.is_active==="Y"?e.jsx(mt,{}):e.jsx(Ct,{}),label:o.is_active==="Y"?"Active":"Inactive",size:"small",color:o.is_active==="Y"?"success":"error"})]})]}),o.description&&e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsx(x,{variant:"body2",className:"!text-gray-700 !whitespace-pre-wrap",children:o.description})})]})}),e.jsx(c,{title:"Period & Dates",icon:_s,children:e.jsxs("div",{className:"!space-y-3",children:[e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1",children:"Start Date"}),e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:Ie(o.start_date)})]}),e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1",children:"Finish Date"}),e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:Ie(o.end_date)})]})]})}),o.conditions&&o.conditions.length>0&&e.jsx(c,{title:"Product Conditions",icon:Wt,children:e.jsx("div",{className:"!space-y-4",children:o.conditions.map(m=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs(x,{variant:"body2",className:"!text-gray-900 !font-medium !mb-2",children:[m.condition_type," - ",m.applies_to_type]}),m.promotion_condition_products&&m.promotion_condition_products.length>0&&e.jsx("div",{className:"!space-y-1",children:m.promotion_condition_products.map(u=>e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:["Min: ",u.condition_quantity]},u.id))})]},m.id))})})]}),e.jsxs("div",{className:"!space-y-6",children:[e.jsx(c,{title:"Locations",icon:Ks,children:e.jsxs("div",{className:"!space-y-4",children:[o.depots&&o.depots.length>0&&e.jsxs("div",{children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !text-gray-700 !mb-2",children:["Depots (",o.depots.length,")"]}),e.jsx("div",{className:"!space-y-2",children:o.depots.map(m=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:m.depots?.name||`Depot ID: ${m.depot_id}`}),m.depots?.code&&e.jsxs(x,{variant:"caption",className:"!text-gray-500",children:["Code: ",m.depots.code]})]},m.id))})]}),o.routes&&o.routes.length>0&&e.jsxs("div",{children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !text-gray-700 !mb-2",children:["Routes (",o.routes.length,")"]}),e.jsx("div",{className:"!space-y-2",children:o.routes.map(m=>e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:["Route ID: ",m.route_id]})},m.id))})]}),o.customer_categories&&o.customer_categories.length>0&&e.jsxs("div",{children:[e.jsxs(x,{variant:"subtitle2",className:"!font-medium !text-gray-700 !mb-2",children:["Customer Categories (",o.customer_categories.length,")"]}),e.jsx("div",{className:"!space-y-2",children:o.customer_categories.map(m=>e.jsx("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:e.jsxs(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:["Category ID: ",m.customer_category_id]})},m.id))})]}),(!o.depots||o.depots.length===0)&&(!o.routes||o.routes.length===0)&&(!o.customer_categories||o.customer_categories.length===0)&&e.jsx(x,{variant:"body2",className:"!text-gray-500",children:"No locations assigned"})]})}),o.levels&&o.levels.length>0&&e.jsx(c,{title:"Levels & Benefits",icon:Bn,children:e.jsx("div",{className:"!space-y-4",children:o.levels.map(m=>e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsxs(x,{variant:"body2",className:"!text-gray-900 !font-medium !mb-2",children:["Level ",m.level_number," - Threshold:"," ",m.threshold_value]}),e.jsxs(x,{variant:"caption",className:"!text-gray-600",children:["Discount: ",m.discount_type," - ",m.discount_value]}),m.promotion_benefit_level&&m.promotion_benefit_level.length>0&&e.jsx("div",{className:"!mt-2 !space-y-1",children:m.promotion_benefit_level.map(u=>e.jsxs(x,{variant:"caption",className:"!text-gray-600 !block",children:["Benefit: ",u.benefit_type," -"," ",u.benefit_value]},u.id))})]},m.id))})}),e.jsx(c,{title:"Metadata",icon:Bn,children:e.jsxs("div",{className:"!space-y-3",children:[o.createdate&&e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1",children:"Created Date"}),e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:Ie(o.createdate.toString())})]}),o.updatedate&&e.jsxs("div",{className:"!p-3 !bg-gray-50 !rounded-md !border !border-gray-200",children:[e.jsx(x,{variant:"caption",className:"!text-gray-500 !block !mb-1",children:"Last Updated"}),e.jsx(x,{variant:"body2",className:"!text-gray-900 !font-medium",children:Ie(o.updatedate.toString())})]})]})})]})]})]})},jLe=()=>{const[t,s]=g.useState(""),a=Ws(),{isRead:r}=Qe("inventory-items"),{formatCurrency:n}=Ya(),{data:i,isLoading:o}=_8e({page:1,limit:50},{enabled:r}),l=o,c=N=>!!N&&"statistics"in N,m=g.useMemo(()=>c(i)?i:null,[i]),u=!!m,h=g.useMemo(()=>m?.data??[],[m]),f=m?.statistics,b=g.useMemo(()=>{const N=h.filter(P=>P.total_quantity>0&&P.total_quantity<=10).length,C=f?.total_quantity?Number(f.total_quantity)*100:0;return{total_items:f?.total_van_inventories||0,low_stock_items:N,total_value:C,active_users:f?.total_salespersons||0,last_updated:new Date().toISOString()}},[f?.total_salespersons,f?.total_van_inventories,f?.total_quantity,h]),w=g.useCallback(N=>{N.salesperson_id&&a(`/masters/inventory-items/${N.salesperson_id}`)},[a]),S=()=>e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-5",children:[1,2,3,4,5,6].map(N=>e.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(X,{variant:"circular",width:48,height:48,className:"!bg-gray-100"}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(X,{variant:"text",width:"60%",height:24}),e.jsx(X,{variant:"text",width:"20%",height:16})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{variant:"text",width:"80%",height:20}),e.jsx(X,{variant:"text",width:"70%",height:20}),e.jsx(X,{variant:"text",width:"75%",height:20}),e.jsx(X,{variant:"text",width:"50%",height:16})]})]})]})},N))}),j=u,v=g.useMemo(()=>h.filter(N=>t?N.salesperson_name?.toLowerCase().includes(t.toLowerCase()):!0),[t,h]);return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"!font-bold text-xl !text-gray-900",children:"Sales Person Inventory"}),e.jsx("p",{className:"!text-gray-500 text-sm",children:"Manage and track inventory items by sales representative"})]}),r&&e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 border border-blue-500 text-blue-700 rounded-full bg-blue-50",children:[e.jsx(Ds,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["Last Update: ",Ie(b.last_updated)]})]})})]}),r&&e.jsx("div",{className:"bg-white shadow-sm p-4 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center flex-wrap gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ts,{placeholder:"Search Sales Person...",value:t,onChange:s,className:"!w-80"})}),e.jsx("div",{className:"ml-auto flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 rounded-full",children:[e.jsx(Wt,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-green-700",children:[b.total_items," Items"]})]})})]})}),r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsx(fe,{title:"Total Inventories",value:b.total_items,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue",isLoading:l}),e.jsx(fe,{title:"Low Stock Alert",value:b.low_stock_items,icon:e.jsx(na,{className:"w-6 h-6"}),color:"orange",isLoading:l}),e.jsx(fe,{title:"Total Value",value:`${n(b.total_value/1e3)}K`,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"green",isLoading:l}),e.jsx(fe,{title:"Active Reps",value:b.active_users,icon:e.jsx(Tr,{className:"w-6 h-6"}),color:"purple",isLoading:l})]}),!r&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(Wt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"You do not have permission to view inventory data"})]}),r&&e.jsx(e.Fragment,{children:l?e.jsx(S,{}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-5",children:[j&&v.map(N=>e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-100 transition-shadow cursor-pointer hover:shadow-md",onClick:()=>w(N),children:[e.jsx("div",{className:"flex justify-between items-center p-3 gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{src:N.salesperson_profile_image||"mkx",alt:N.salesperson_name,className:"!bg-green-100 !text-xl !rounded !text-green-600"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-700 text font-semibold",children:N.salesperson_name}),e.jsx("span",{className:"text-gray-500 text-xs",children:N.salesperson_email})]})]})}),e.jsx("div",{className:"px-4 pb-2",children:e.jsxs("div",{className:"flex flex-col gap-3 pt-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(Wt,{className:"!w-4 !h-4 text-blue-500"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:["Van Inventories: ",N.total_van_inventories]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(vs,{className:"!w-4 !h-4 text-green-500"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:["Total Quantity: ",N.total_quantity]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(bb,{className:"!w-4 !h-4 text-purple-500"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:["Batches: ",N.total_batches]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(Z9,{className:"!w-4 !h-4 text-indigo-500"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:["Serials: ",N.total_serials]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(Wt,{className:"!w-4 !h-4 text-orange-500"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:["Products: ",N.total_products]})]})]})}),N.total_quantity>0&&N.total_quantity<=10&&e.jsx("div",{className:"p-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2 text-orange-600 text-sm",children:[e.jsx(na,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Low Quantity Alert"})]})})]},N.salesperson_id)),j&&v.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(Wt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No inventory items found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:t?"Try adjusting your search":"No inventory items have been added yet"})]})]})})]})},NLe=()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-5",children:Array.from({length:4}).map((t,s)=>e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-100 p-6 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(X,{variant:"circular",width:40,height:40}),e.jsx(X,{variant:"rectangular",width:100,height:24})]}),e.jsx(X,{variant:"rectangular",width:60,height:28})]},s))}),wLe=()=>e.jsx("div",{className:"bg-white mb-5 shadow-sm rounded-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx(X,{variant:"circular",width:80,height:80}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4 justify-between",children:[e.jsxs("div",{children:[e.jsx(X,{variant:"text",width:180,height:28}),e.jsx(X,{variant:"text",width:120,height:20})]}),e.jsx(X,{variant:"rectangular",width:64,height:28})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Array.from({length:3}).map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{variant:"circular",width:20,height:20}),e.jsx(X,{variant:"text",width:90,height:18})]},s))})]})]})}),_Le=()=>e.jsx(y,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((t,s)=>e.jsx(X,{variant:"rectangular",width:120,height:40,sx:{borderRadius:2}},s))})}),SLe=()=>e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-5",children:Array.from({length:6}).map((t,s)=>e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-100 p-4 flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 pb-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{variant:"circular",width:40,height:40}),e.jsxs("div",{children:[e.jsx(X,{variant:"text",width:90,height:18}),e.jsx(X,{variant:"text",width:54,height:14})]})]}),e.jsx(X,{variant:"rectangular",width:64,height:24,sx:{borderRadius:16}})]}),e.jsx("div",{className:"space-y-1 pb-3 px-2",children:Array.from({length:5}).map((a,r)=>e.jsxs("div",{className:"flex items-center justify-between my-1",children:[e.jsx(X,{variant:"text",width:100,height:17}),e.jsx(X,{variant:"text",width:32,height:17})]},r))}),e.jsx(X,{variant:"rectangular",width:"90%",height:18,sx:{mx:2,my:1,borderRadius:2}})]},s))}),qD=({columns:t=6,rows:s=5})=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm px-1 py-3 w-full mb-3",children:[e.jsx("div",{className:"flex gap-2 mb-2",children:Array.from({length:t}).map((a,r)=>e.jsx(X,{width:90,height:18,sx:{borderRadius:2}},r))}),e.jsx("div",{className:"flex flex-col gap-2",children:Array.from({length:s}).map((a,r)=>e.jsx("div",{className:"flex gap-2",children:Array.from({length:t}).map((n,i)=>e.jsx(X,{width:90,height:18,sx:{borderRadius:2}},i))},r))})]});function QN({children:t,value:s,index:a,...r}){return e.jsx("div",{role:"tabpanel",hidden:s!==a,id:`inventory-tabpanel-${a}`,"aria-labelledby":`inventory-tab-${a}`,...r,children:s===a&&e.jsx(y,{sx:{py:3,px:0},children:t})})}const CLe=t=>{switch(t){case"active":return"success";case"expiring_soon":return"warning";case"expired":return"error";default:return"default"}},PLe=t=>t===0?{status:"out_of_stock",color:"error",label:"Out of Stock"}:t<=10?{status:"low_stock",color:"warning",label:"Low Stock"}:{status:"in_stock",color:"success",label:"In Stock"},kLe=()=>{const{id:t}=Kr(),s=Ws(),[a,r]=g.useState(0),n=t?Number(t):void 0,{data:i,isLoading:o,error:l}=KS(n,{enabled:n!==void 0}),c=g.useCallback((j,v)=>r(v),[]),m=g.useCallback(()=>s("/masters/inventory-items"),[s]),u=g.useMemo(()=>i?.data||null,[i]),h=g.useMemo(()=>!u?.products||!Array.isArray(u.products)?[]:u.products.map(j=>({...j,product_name:j.product_name??"",batches:j.batches??[],serials:j.serials??[]})),[u]),f=g.useMemo(()=>!Array.isArray(h)||h.length===0?[]:h.flatMap(j=>!j.batches||!Array.isArray(j.batches)?[]:j.batches.map(v=>({...v,product_id:j.product_id}))),[h]),b=g.useMemo(()=>!Array.isArray(h)||h.length===0?[]:h.flatMap(j=>!j.serials||!Array.isArray(j.serials)?[]:j.serials.map(v=>({...v,product_id:j.product_id,warranty_expiry:v.warranty_expiry??null,customer:v.customer}))),[h]),w=g.useMemo(()=>[{id:"batch_number",label:"Batch Number",sortable:!0},{id:"lot_number",label:"Lot Number",sortable:!0},{id:"remaining_quantity",label:"Quantity",sortable:!0},{id:"expiry_date",label:"Expiry Date",sortable:!0,render:j=>j?Ie(j):"N/A"},{id:"status",label:"Status",sortable:!0,render:j=>e.jsx(Me,{label:String(j||"").replace("_"," "),size:"small",color:CLe(String(j)),variant:"outlined",className:"!capitalize"})}],[]),S=g.useMemo(()=>[{id:"serial_number",label:"Serial Number",sortable:!0,render:j=>e.jsx("span",{className:"font-mono text-sm",children:j?String(j):"N/A"})},{id:"status",label:"Status",sortable:!0,render:j=>e.jsx(Me,{label:j?String(j)?.replace("_"," "):"N/A",size:"small",variant:"outlined",className:"!capitalize"})},{id:"warranty_expiry",label:"Warranty Expiry",sortable:!0,render:j=>j?Ie(j):"N/A"},{id:"customer",label:"Customer",sortable:!1,render:(j,v)=>v.customer?`${v.customer.name} (${v.customer.code})`:"N/A"},{id:"sold_date",label:"Sold Date",sortable:!0,render:j=>j?Ie(j):"Not Sold"}],[]);return o?e.jsxs("div",{className:"flex flex-col animate-pulse",children:[e.jsxs("div",{className:"flex items-center mb-5 justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx(X,{variant:"text",width:220,height:32}),e.jsx(X,{variant:"text",width:160,height:20,sx:{mt:1}})]})}),e.jsx(X,{variant:"rectangular",width:210,height:34,sx:{borderRadius:26}})]}),e.jsx(wLe,{}),e.jsx(NLe,{}),e.jsx(_Le,{}),a===0&&e.jsx(SLe,{}),a===1&&e.jsx(qD,{columns:7,rows:7}),a===2&&e.jsx(qD,{columns:5,rows:7})]}):l||!i?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Wt,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx(x,{variant:"h6",className:"text-gray-600 mb-2",children:"Inventory Not Found"}),e.jsx(x,{variant:"body2",className:"text-gray-500 mb-4",children:"The inventory item you're looking for doesn't exist or you don't have permission to view it."}),e.jsx(K,{onClick:m,children:"Go Back to Inventory"})]}):u?e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center mb-5 justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-900",children:[u?.salesperson_name||"Unknown","'s Inventory"]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Detailed view of all inventory items and stock levels"})]})}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 rounded-full",children:[e.jsx(_s,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["Last Updated: ",Ie(new Date().toISOString())]})]})]}),e.jsx("div",{className:"bg-white mb-5 shadow-sm rounded-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx(ut,{src:u?.salesperson_profile_image||void 0,alt:u?.salesperson_name||"Unknown",className:"!w-20 !h-20 !bg-green-100 !text-green-600 !text-2xl",children:u?.salesperson_name?.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-2 justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:u?.salesperson_name||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Sales Representative"})]}),e.jsx(Me,{label:"Active",size:"small",color:"success",variant:"outlined"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Nx,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:u?.salesperson_email||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Rv,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:u?.salesperson_phone||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Region: North Zone"})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-5",children:[e.jsx(fe,{title:"Total Products",value:u?.total_products||0,icon:e.jsx(Wt,{className:"w-6 h-6"}),color:"blue"}),e.jsx(fe,{title:"Total Quantity",value:u?.total_remaining_quantity||0,icon:e.jsx(vs,{className:"w-6 h-6"}),color:"green"}),e.jsx(fe,{title:"Total Batches",value:u?.total_batches||0,icon:e.jsx(bb,{className:"w-6 h-6"}),color:"purple"}),e.jsx(fe,{title:"Total Serials",value:u?.total_serials||0,icon:e.jsx(Z9,{className:"w-6 h-6"}),color:"orange"})]}),e.jsx(y,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(Zo,{value:a,onChange:c,children:[e.jsx(As,{label:`Products (${Array.isArray(h)?h.length:0})`}),e.jsx(As,{label:`Batches (${u?.total_batches||0})`}),e.jsx(As,{label:`Serial Numbers (${u?.total_serials||0})`})]})}),e.jsx(QN,{value:a,index:0,children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-5",children:Array.isArray(h)&&h.map(j=>{const v=PLe(j.total_quantity);return e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 pb-0 p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ut,{className:"!bg-blue-100 !rounded-md !text-blue-600",src:"",children:j.product_name?.charAt(0)||"P"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:j.product_name||"Unknown Product"}),e.jsx("p",{className:"text-xs text-gray-500 truncate text-ellipsis w-[90%]",children:j.product_code||"N/A"})]})]}),e.jsx(Me,{label:v.label,size:"small",color:v.color,variant:"outlined"})]}),e.jsxs("div",{className:"space-y-1 pb-3 px-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Quantity"}),e.jsx("span",{className:"font-medium",children:j.total_remaining_quantity})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tracking Type"}),e.jsx("span",{className:"font-medium uppercase",children:j.tracking_type})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Van Entries"}),e.jsx("span",{className:"font-medium",children:j.van_inventories?.length||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Batches"}),e.jsx("span",{className:"font-medium",children:j.batches?.length||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Serial Numbers"}),e.jsx("span",{className:"font-medium",children:j.serials?.length||0})]})]}),j.total_quantity>0&&j.total_quantity<=10&&e.jsx("div",{className:"border-t border-gray-100 p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-orange-600 text-sm",children:[e.jsx(na,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Low Stock Alert"})]})})]},j.product_id)})})}),e.jsx(QN,{value:a,index:1,children:e.jsx(ot,{data:f,columns:w,getRowId:j=>`${j.batch_lot_id}-${j.product_id}`,pagination:!1,emptyMessage:"No batches found"})}),e.jsx(QN,{value:a,index:2,children:e.jsx(ot,{data:b,columns:S,getRowId:j=>j.serial_id,pagination:!1,emptyMessage:"No serial numbers found"})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Wt,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx(x,{variant:"h6",className:"text-gray-600 mb-2",children:"Invalid Inventory Data"}),e.jsx(x,{variant:"body2",className:"text-gray-500 mb-4",children:"The inventory data could not be loaded properly."}),e.jsx(K,{onClick:m,children:"Go Back to Inventory"})]})},ELe=RU([{path:"/login",element:e.jsx(jbe,{})},{path:"/privacy-policy",element:e.jsx(Nbe,{})},{path:"/",element:e.jsx(YU,{children:e.jsx(bbe,{})}),errorElement:e.jsx(Rw,{showFallback:!0}),children:[{path:"/",element:e.jsx(WM,{})},{path:"/dashboard/executive",element:e.jsx(WM,{})},{path:"/masters/brands",element:e.jsx(At,{module:"brand",action:"read",children:e.jsx(i_e,{})})},{path:"/masters/company",element:e.jsx(At,{module:"company",action:"read",children:e.jsx(x_e,{})})},{path:"/masters/users",element:e.jsx(At,{module:"user",action:"read",children:e.jsx(y8e,{})})},{path:"/masters/users/:id",element:e.jsx(At,{module:"user",action:"read",children:e.jsx(b8e,{})})},{path:"/masters/roles",element:e.jsx(At,{module:"role",action:"read",children:e.jsx(ike,{})})},{path:"/masters/depots",element:e.jsx(At,{module:"depot",action:"read",children:e.jsx(TSe,{})})},{path:"/masters/depots/:id",element:e.jsx(At,{module:"depot",action:"read",children:e.jsx(MSe,{})})},{path:"/masters/zones",element:e.jsx(At,{module:"zone",action:"read",children:e.jsx(sTe,{})})},{path:"/masters/currency",element:e.jsx(At,{module:"currency",action:"read",children:e.jsx(xSe,{})})},{path:"/masters/routes",element:e.jsx(At,{module:"route",action:"read",children:e.jsx(mke,{})})},{path:"/masters/routes/:id",element:e.jsx(At,{module:"route",action:"read",children:e.jsx(pke,{})})},{path:"/masters/route-types",element:e.jsx(At,{module:"route-type",action:"read",children:e.jsx(yke,{})})},{path:"/masters/outlets",element:e.jsx(At,{module:"outlet",action:"read",children:e.jsx(v3e,{})})},{path:"/masters/outlets/:id",element:e.jsx(At,{module:"outlet",action:"read",children:e.jsx(j3e,{})})},{path:"/masters/outlet-groups",element:e.jsx(At,{module:"outlet-group",action:"read",children:e.jsx(D3e,{})})},{path:"/masters/outlet-category",element:e.jsx(At,{module:"customer-category",action:"read",children:e.jsx(_4e,{})})},{path:"/masters/outlet-type",element:e.jsx(At,{module:"customer-type",action:"read",children:e.jsx(L4e,{})})},{path:"/masters/outlet-channel",element:e.jsx(At,{module:"customer-channel",action:"read",children:e.jsx(X4e,{})})},{path:"/masters/asset-types",element:e.jsx(At,{module:"asset-type",action:"read",children:e.jsx(Fwe,{})})},{path:"/masters/asset-master",element:e.jsx(At,{module:"asset-master",action:"read",children:e.jsx(bwe,{})})},{path:"/masters/warehouses",element:e.jsx(At,{module:"warehouse",action:"read",children:e.jsx(Z8e,{})})},{path:"/masters/vehicles",element:e.jsx(At,{module:"vehicle",action:"read",children:e.jsx(W8e,{})})},{path:"/masters/products",element:e.jsx(At,{module:"product",action:"read",children:e.jsx(T5e,{})})},{path:"/masters/products/:id",element:e.jsx(At,{module:"product",action:"read",children:e.jsx(M5e,{})})},{path:"/masters/batch-lots",element:e.jsx(At,{module:"batch-lots",action:"read",children:e.jsx(Ywe,{})})},{path:"/masters/batch-lots/:id",element:e.jsx(At,{module:"batch-lots",action:"read",children:e.jsx(Gwe,{})})},{path:"/masters/product-categories",element:e.jsx(At,{module:"product-category",action:"read",children:e.jsx(lCe,{})})},{path:"/masters/product-sub-categories",element:e.jsx(At,{module:"product-sub-category",action:"read",children:e.jsx(d6e,{})})},{path:"/masters/unit-of-measurement",element:e.jsx(At,{module:"unit-of-measurement",action:"read",children:e.jsx(i8e,{})})},{path:"/masters/sub-unit-of-measurement",element:e.jsx(At,{module:"unit-of-measurement",action:"read",children:e.jsx(p8e,{})})},{path:"/masters/product-flavours",element:e.jsx(At,{module:"product-flavour",action:"read",children:e.jsx(b6e,{})})},{path:"/masters/product-volumes",element:e.jsx(At,{module:"product-volume",action:"read",children:e.jsx(k6e,{})})},{path:"/masters/product-shelf-life",element:e.jsx(At,{module:"product-shelf-life",action:"read",children:e.jsx(F6e,{})})},{path:"/masters/product-types",element:e.jsx(At,{module:"product-type",action:"read",children:e.jsx(W6e,{})})},{path:"/masters/product-target-groups",element:e.jsx(At,{module:"product-target-group",action:"read",children:e.jsx(tPe,{})})},{path:"/masters/product-web-orders",element:e.jsx(At,{module:"product-web-order",action:"read",children:e.jsx(dPe,{})})},{path:"/masters/inventory-items",element:e.jsx(At,{module:"inventory-items",action:"read",children:e.jsx(jLe,{})})},{path:"/masters/inventory-items/:id",element:e.jsx(At,{module:"inventory-items",action:"read",children:e.jsx(kLe,{})})},{path:"/masters/tax-master",element:e.jsx(At,{module:"tax-master",action:"read",children:e.jsx(VPe,{})})},{path:"/masters/cooler-types",element:e.jsx(At,{module:"cooler-type",action:"read",children:e.jsx(_Pe,{})})},{path:"/masters/cooler-sub-types",element:e.jsx(At,{module:"cooler-sub-type",action:"read",children:e.jsx($Pe,{})})},{path:"/masters/pricelists",element:e.jsx(At,{module:"pricelist",action:"read",children:e.jsx(aCe,{})})},{path:"/masters/promotions",element:e.jsx(At,{module:"promotions",action:"read",children:e.jsx(r6e,{})})},{path:"/masters/promotions/:id",element:e.jsx(At,{module:"promotions",action:"read",children:e.jsx(n6e,{})})},{path:"/masters/updated-promotions",element:e.jsx(At,{module:"updated-promotion",action:"read",children:e.jsx(bLe,{})})},{path:"/masters/updated-promotions/:id",element:e.jsx(At,{module:"updated-promotion",action:"read",children:e.jsx(vLe,{})})},{path:"/settings/login-history",element:e.jsx(At,{module:"login-history",action:"read",children:e.jsx(KSe,{})})},{path:"/masters/sales-target-groups",element:e.jsx(At,{module:"sales-target-group",action:"read",children:e.jsx(Xke,{})})},{path:"/masters/sales-targets",element:e.jsx(At,{module:"sales-target",action:"read",children:e.jsx(aEe,{})})},{path:"/masters/sales-bonus-rules",element:e.jsx(At,{module:"sales-bonus-rule",action:"read",children:e.jsx(Lke,{})})},{path:"/masters/kpi-targets",element:e.jsx(At,{module:"kpi-target",action:"read",children:e.jsx(VSe,{})})},{path:"/masters/surveys",element:e.jsx(At,{module:"survey",action:"read",children:e.jsx(e8e,{})})},{path:"/masters/surveys/:id",element:e.jsx(At,{module:"survey",action:"read",children:e.jsx(t8e,{})})},{path:"/masters/customer-complaints",element:e.jsx(At,{module:"customer-complaint",action:"read",children:e.jsx(uSe,{})})},{path:"/transactions/orders",element:e.jsx(At,{module:"order",action:"read",children:e.jsx(z7e,{})})},{path:"/transactions/orders/:id",element:e.jsx(At,{module:"order",action:"read",children:e.jsx(q7e,{})})},{path:"/transactions/delivery",element:e.jsx(At,{module:"delivery",action:"read",children:e.jsx(MDe,{})})},{path:"/transactions/returns",element:e.jsx(At,{module:"return",action:"read",children:e.jsx(uRe,{})})},{path:"/transactions/returns/:id",element:e.jsx(At,{module:"return",action:"read",children:e.jsx(bRe,{})})},{path:"/transactions/payments",element:e.jsx(At,{module:"payment",action:"read",children:e.jsx(W7e,{})})},{path:"/transactions/payments/:id",element:e.jsx(At,{module:"payment",action:"read",children:e.jsx(Z7e,{})})},{path:"/transactions/invoices",element:e.jsx(At,{module:"invoice",action:"read",children:e.jsx(M7e,{})})},{path:"/transactions/credit-notes",element:e.jsx(At,{module:"credit-note",action:"read",children:e.jsx(yDe,{})})},{path:"/transactions/visits",element:e.jsx(At,{module:"visit",action:"read",children:e.jsx(_Re,{})})},{path:"/transactions/visits/:id",element:e.jsx(At,{module:"visit",action:"read",children:e.jsx(SRe,{})})},{path:"/transactions/asset-movement",element:e.jsx(At,{module:"asset-movement",action:"read",children:e.jsx(Dwe,{})})},{path:"/transactions/competitor",element:e.jsx(At,{module:"competitor",action:"read",children:e.jsx(Z_e,{})})},{path:"/transactions/maintenance",element:e.jsx(At,{module:"maintenance",action:"read",children:e.jsx(owe,{})})},{path:"/transactions/installations",element:e.jsx(At,{module:"installation",action:"read",children:e.jsx(GMe,{})})},{path:"/transactions/installations/:id",element:e.jsx(At,{module:"installation",action:"read",children:e.jsx(KMe,{})})},{path:"/transactions/inspections",element:e.jsx(At,{module:"inspection",action:"read",children:e.jsx(BMe,{})})},{path:"/transactions/inspections/:id",element:e.jsx(At,{module:"inspection",action:"read",children:e.jsx(UMe,{})})},{path:"/transactions/stock-transfer",element:e.jsx(At,{module:"stock-transfer",action:"read",children:e.jsx(BEe,{})})},{path:"/transactions/stock-movements",element:e.jsx(At,{module:"stock-movement",action:"read",children:e.jsx(NEe,{})})},{path:"/transactions/van-stock",element:e.jsx(At,{module:"van-stock",action:"read",children:e.jsx(q8e,{})})},{path:"/tracking/location",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(pMe,{})})},{path:"/tracking/routes",element:e.jsx(At,{module:"route-effectiveness",action:"read",children:e.jsx(hMe,{})})},{path:"/reports/orders",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(BTe,{})})},{path:"/reports/sales-target",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(YTe,{})})},{path:"/reports/asset-status",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(OTe,{})})},{path:"/reports/visits",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(sMe,{})})},{path:"/reports/promos",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(VTe,{})})},{path:"/reports/territory",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(HTe,{})})},{path:"/reports/productivity",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(WTe,{})})},{path:"/reports/competitor",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(qTe,{})})},{path:"/reports/collection",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(UTe,{})})},{path:"/reports/attendance-history",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(FTe,{})})},{path:"/reports/audit-logs",element:e.jsx(At,{module:"report",action:"read",children:e.jsx(zTe,{})})},{path:"/reports/survey-responses",element:e.jsx(At,{module:"survey",action:"read",children:e.jsx(eMe,{})})},{path:"/reports/survey-responses/:id",element:e.jsx(At,{module:"survey",action:"read",children:e.jsx(tMe,{})})},{path:"/workflows/approvals",element:e.jsx(At,{module:"approval",action:"read",children:e.jsx(XFe,{})})},{path:"/workflows/approval-setup",element:e.jsx(At,{module:"approval",action:"read",children:e.jsx(ZFe,{})})},{path:"/workflows/exceptions",element:e.jsx(At,{module:"exception",action:"read",children:e.jsx(JFe,{})})},{path:"/workflows/alerts",element:e.jsx(At,{module:"alert",action:"read",children:e.jsx(CRe,{})})},{path:"/settings/tokens",element:e.jsx(At,{module:"token",action:"read",children:e.jsx(FNe,{})})},{path:"/settings/system",element:e.jsx(At,{module:"setting",action:"read",children:e.jsx(tLe,{})})},{path:"/profile",element:e.jsx(At,{module:"profile",action:"read",children:e.jsx(nTe,{})})},{path:"*",element:e.jsx(aTe,{})}]}],{future:{v7_startTransition:!0,v7_relativeSplatPath:!0}}),TLe=()=>e.jsx(HU,{router:ELe}),_c={50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},MLe=({children:t})=>{const s=uv({palette:{mode:"light",primary:{main:_c[500],light:_c[400],dark:_c[600],contrastText:"#ffffff"},secondary:{main:"#6b7280",light:"#9ca3af",dark:"#4b5563",contrastText:"#ffffff"}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:500}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:_c[600]}}},MuiChip:{styleOverrides:{colorPrimary:{backgroundColor:_c[100],color:_c[800],"&:hover":{backgroundColor:_c[200]}}}},MuiIconButton:{styleOverrides:{root:{borderRadius:"6px","& .MuiTouchRipple-root":{borderRadius:"6px",overflow:"hidden"},"& .MuiTouchRipple-ripple":{borderRadius:"6px !important"},"& .MuiTouchRipple-rippleVisible":{borderRadius:"6px !important"},"& .MuiTouchRipple-child":{borderRadius:"6px !important"}}}}},primaryColors:_c});return e.jsx(wY,{theme:s,children:t})};var sb={exports:{}},DLe=sb.exports,BD;function RLe(){return BD||(BD=1,(function(t,s){(function(a,r){t.exports=r()})(DLe,(function(){var a="week",r="year";return function(n,i,o){var l=i.prototype;l.week=function(c){if(c===void 0&&(c=null),c!==null)return this.add(7*(c-this.week()),"day");var m=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=o(this).startOf(r).add(1,r).date(m),h=o(this).endOf(a);if(u.isBefore(h))return 1}var f=o(this).startOf(r).date(m).startOf(a).subtract(1,"millisecond"),b=this.diff(f,a,!0);return b<0?o(this).startOf("week").week():Math.ceil(b)},l.weeks=function(c){return c===void 0&&(c=null),this.week(c)}}}))})(sb)),sb.exports}var ALe=RLe();const ILe=Ji(ALe);var ab={exports:{}},OLe=ab.exports,UD;function FLe(){return UD||(UD=1,(function(t,s){(function(a,r){t.exports=r()})(OLe,(function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d/,i=/\d\d/,o=/\d\d?/,l=/\d*[^-_:/,()\s\d]+/,c={},m=function(j){return(j=+j)+(j>68?1900:2e3)},u=function(j){return function(v){this[j]=+v}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(j){(this.zone||(this.zone={})).offset=(function(v){if(!v||v==="Z")return 0;var N=v.match(/([+-]|\d\d)/g),C=60*N[1]+(+N[2]||0);return C===0?0:N[0]==="+"?-C:C})(j)}],f=function(j){var v=c[j];return v&&(v.indexOf?v:v.s.concat(v.f))},b=function(j,v){var N,C=c.meridiem;if(C){for(var P=1;P<=24;P+=1)if(j.indexOf(C(P,0,v))>-1){N=P>12;break}}else N=j===(v?"pm":"PM");return N},w={A:[l,function(j){this.afternoon=b(j,!1)}],a:[l,function(j){this.afternoon=b(j,!0)}],Q:[n,function(j){this.month=3*(j-1)+1}],S:[n,function(j){this.milliseconds=100*+j}],SS:[i,function(j){this.milliseconds=10*+j}],SSS:[/\d{3}/,function(j){this.milliseconds=+j}],s:[o,u("seconds")],ss:[o,u("seconds")],m:[o,u("minutes")],mm:[o,u("minutes")],H:[o,u("hours")],h:[o,u("hours")],HH:[o,u("hours")],hh:[o,u("hours")],D:[o,u("day")],DD:[i,u("day")],Do:[l,function(j){var v=c.ordinal,N=j.match(/\d+/);if(this.day=N[0],v)for(var C=1;C<=31;C+=1)v(C).replace(/\[|\]/g,"")===j&&(this.day=C)}],w:[o,u("week")],ww:[i,u("week")],M:[o,u("month")],MM:[i,u("month")],MMM:[l,function(j){var v=f("months"),N=(f("monthsShort")||v.map((function(C){return C.slice(0,3)}))).indexOf(j)+1;if(N<1)throw new Error;this.month=N%12||N}],MMMM:[l,function(j){var v=f("months").indexOf(j)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,u("year")],YY:[i,function(j){this.year=m(j)}],YYYY:[/\d{4}/,u("year")],Z:h,ZZ:h};function S(j){var v,N;v=j,N=c&&c.formats;for(var C=(j=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(F,z,I){var Q=I&&I.toUpperCase();return z||N[I]||a[I]||N[Q].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(Y,B,q){return B||q.slice(1)}))}))).match(r),P=C.length,E=0;E<P;E+=1){var M=C[E],T=w[M],A=T&&T[0],L=T&&T[1];C[E]=L?{regex:A,parser:L}:M.replace(/^\[|\]$/g,"")}return function(F){for(var z={},I=0,Q=0;I<P;I+=1){var Y=C[I];if(typeof Y=="string")Q+=Y.length;else{var B=Y.regex,q=Y.parser,V=F.slice(Q),G=B.exec(V)[0];q.call(z,G),F=F.replace(G,"")}}return(function(H){var D=H.afternoon;if(D!==void 0){var R=H.hours;D?R<12&&(H.hours+=12):R===12&&(H.hours=0),delete H.afternoon}})(z),z}}return function(j,v,N){N.p.customParseFormat=!0,j&&j.parseTwoDigitYear&&(m=j.parseTwoDigitYear);var C=v.prototype,P=C.parse;C.parse=function(E){var M=E.date,T=E.utc,A=E.args;this.$u=T;var L=A[1];if(typeof L=="string"){var F=A[2]===!0,z=A[3]===!0,I=F||z,Q=A[2];z&&(Q=A[2]),c=this.$locale(),!F&&Q&&(c=N.Ls[Q]),this.$d=(function(V,G,H,D){try{if(["x","X"].indexOf(G)>-1)return new Date((G==="X"?1e3:1)*V);var R=S(G)(V),$=R.year,W=R.month,J=R.day,te=R.hours,ee=R.minutes,ae=R.seconds,ce=R.milliseconds,he=R.zone,ne=R.week,xe=new Date,ge=J||($||W?1:xe.getDate()),le=$||xe.getFullYear(),pe=0;$&&!W||(pe=W>0?W-1:xe.getMonth());var Re,Se=te||0,He=ee||0,ze=ae||0,st=ce||0;return he?new Date(Date.UTC(le,pe,ge,Se,He,ze,st+60*he.offset*1e3)):H?new Date(Date.UTC(le,pe,ge,Se,He,ze,st)):(Re=new Date(le,pe,ge,Se,He,ze,st),ne&&(Re=D(Re).week(ne).toDate()),Re)}catch{return new Date("")}})(M,L,T,N),this.init(),Q&&Q!==!0&&(this.$L=this.locale(Q).$L),I&&M!=this.format(L)&&(this.$d=new Date("")),c={}}else if(L instanceof Array)for(var Y=L.length,B=1;B<=Y;B+=1){A[1]=L[B-1];var q=N.apply(this,A);if(q.isValid()){this.$d=q.$d,this.$L=q.$L,this.init();break}B===Y&&(this.$d=new Date(""))}else P.call(this,E)}}}))})(ab)),ab.exports}var LLe=FLe();const $Le=Ji(LLe);var rb={exports:{}},zLe=rb.exports,VD;function qLe(){return VD||(VD=1,(function(t,s){(function(a,r){t.exports=r()})(zLe,(function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,n,i){var o=n.prototype,l=o.format;i.en.formats=a,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var m=this.$locale().formats,u=(function(h,f){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(b,w,S){var j=S&&S.toUpperCase();return w||f[S]||a[S]||f[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(v,N,C){return N||C.slice(1)}))}))})(c,m===void 0?{}:m);return l.call(this,u)}}}))})(rb)),rb.exports}var BLe=qLe();const ULe=Ji(BLe);var nb={exports:{}},VLe=nb.exports,HD;function HLe(){return HD||(HD=1,(function(t,s){(function(a,r){t.exports=r()})(VLe,(function(){return function(a,r,n){r.prototype.isBetween=function(i,o,l,c){var m=n(i),u=n(o),h=(c=c||"()")[0]==="(",f=c[1]===")";return(h?this.isAfter(m,l):!this.isBefore(m,l))&&(f?this.isBefore(u,l):!this.isAfter(u,l))||(h?this.isBefore(m,l):!this.isAfter(m,l))&&(f?this.isAfter(u,l):!this.isBefore(u,l))}}}))})(nb)),nb.exports}var WLe=HLe();const YLe=Ji(WLe);var ib={exports:{}},GLe=ib.exports,WD;function KLe(){return WD||(WD=1,(function(t,s){(function(a,r){t.exports=r()})(GLe,(function(){return function(a,r){var n=r.prototype,i=n.format;n.format=function(o){var l=this,c=this.$locale();if(!this.isValid())return i.bind(this)(o);var m=this.$utils(),u=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(h){switch(h){case"Q":return Math.ceil((l.$M+1)/3);case"Do":return c.ordinal(l.$D);case"gggg":return l.weekYear();case"GGGG":return l.isoWeekYear();case"wo":return c.ordinal(l.week(),"W");case"w":case"ww":return m.s(l.week(),h==="w"?1:2,"0");case"W":case"WW":return m.s(l.isoWeek(),h==="W"?1:2,"0");case"k":case"kk":return m.s(String(l.$H===0?24:l.$H),h==="k"?1:2,"0");case"X":return Math.floor(l.$d.getTime()/1e3);case"x":return l.$d.getTime();case"z":return"["+l.offsetName()+"]";case"zzz":return"["+l.offsetName("long")+"]";default:return h}}));return i.bind(this)(u)}}}))})(ib)),ib.exports}var QLe=KLe();const ZLe=Ji(QLe);rr.extend(ULe);rr.extend(ILe);rr.extend(YLe);rr.extend(ZLe);const XLe={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},JLe={year:"YYYY",month:"MMMM",monthShort:"MMM",dayOfMonth:"D",dayOfMonthFull:"Do",weekday:"dddd",weekdayShort:"dd",hours24h:"HH",hours12h:"hh",meridiem:"A",minutes:"mm",seconds:"ss",fullDate:"ll",keyboardDate:"L",shortDate:"MMM D",normalDate:"D MMMM",normalDateWithWeekday:"ddd, MMM D",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},ZN=["Missing UTC plugin","To be able to use UTC or timezones, you have to enable the `utc` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc"].join(`
`),YD=["Missing timezone plugin","To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone"].join(`
`);class e$e{isMUIAdapter=!0;isTimezoneCompatible=!0;lib="dayjs";escapedCharacters={start:"[",end:"]"};formatTokenMap=XLe;constructor({locale:s,formats:a}={}){this.locale=s,this.formats=je({},JLe,a),rr.extend($Le)}setLocaleToValue=s=>{const a=this.getCurrentLocaleCode();return a===s.locale()?s:s.locale(a)};hasUTCPlugin=()=>typeof rr.utc<"u";hasTimezonePlugin=()=>typeof rr.tz<"u";isSame=(s,a,r)=>{const n=this.setTimezone(a,this.getTimezone(s));return s.format(r)===n.format(r)};cleanTimezone=s=>{switch(s){case"default":return;case"system":return rr.tz.guess();default:return s}};createSystemDate=s=>{let a;if(this.hasUTCPlugin()&&this.hasTimezonePlugin()){const r=rr.tz.guess();r==="UTC"?a=rr(s):a=rr.tz(s,r)}else a=rr(s);return this.setLocaleToValue(a)};createUTCDate=s=>{if(!this.hasUTCPlugin())throw new Error(ZN);return this.setLocaleToValue(rr.utc(s))};createTZDate=(s,a)=>{if(!this.hasUTCPlugin())throw new Error(ZN);if(!this.hasTimezonePlugin())throw new Error(YD);const r=s!==void 0&&!s.endsWith("Z");return this.setLocaleToValue(rr(s).tz(this.cleanTimezone(a),r))};getLocaleFormats=()=>{const s=rr.Ls,a=this.locale||"en";let r=s[a];return r===void 0&&(r=s.en),r.formats};adjustOffset=s=>{if(!this.hasTimezonePlugin())return s;const a=this.getTimezone(s);if(a!=="UTC"){const r=s.tz(this.cleanTimezone(a),!0);if(r.$offset===(s.$offset??0))return s;s.$offset=r.$offset}return s};date=(s,a="default")=>s===null?null:a==="UTC"?this.createUTCDate(s):a==="system"||a==="default"&&!this.hasTimezonePlugin()?this.createSystemDate(s):this.createTZDate(s,a);getInvalidDate=()=>rr(new Date("Invalid date"));getTimezone=s=>{if(this.hasTimezonePlugin()){const a=s.$x?.$timezone;if(a)return a}return this.hasUTCPlugin()&&s.isUTC()?"UTC":"system"};setTimezone=(s,a)=>{if(this.getTimezone(s)===a)return s;if(a==="UTC"){if(!this.hasUTCPlugin())throw new Error(ZN);return s.utc()}if(a==="system")return s.local();if(!this.hasTimezonePlugin()){if(a==="default")return s;throw new Error(YD)}return this.setLocaleToValue(rr.tz(s,this.cleanTimezone(a)))};toJsDate=s=>s.toDate();parse=(s,a)=>s===""?null:rr(s,a,this.locale,!0);getCurrentLocaleCode=()=>this.locale||"en";is12HourCycleInCurrentLocale=()=>/A|a/.test(this.getLocaleFormats().LT||"");expandFormat=s=>{const a=this.getLocaleFormats(),r=n=>n.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(i,o,l)=>o||l.slice(1));return s.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(n,i,o)=>{const l=o&&o.toUpperCase();return i||a[o]||r(a[l])})};isValid=s=>s==null?!1:s.isValid();format=(s,a)=>this.formatByString(s,this.formats[a]);formatByString=(s,a)=>this.setLocaleToValue(s).format(a);formatNumber=s=>s;isEqual=(s,a)=>s===null&&a===null?!0:s===null||a===null?!1:s.toDate().getTime()===a.toDate().getTime();isSameYear=(s,a)=>this.isSame(s,a,"YYYY");isSameMonth=(s,a)=>this.isSame(s,a,"YYYY-MM");isSameDay=(s,a)=>this.isSame(s,a,"YYYY-MM-DD");isSameHour=(s,a)=>s.isSame(a,"hour");isAfter=(s,a)=>s>a;isAfterYear=(s,a)=>this.hasUTCPlugin()?!this.isSameYear(s,a)&&s.utc()>a.utc():s.isAfter(a,"year");isAfterDay=(s,a)=>this.hasUTCPlugin()?!this.isSameDay(s,a)&&s.utc()>a.utc():s.isAfter(a,"day");isBefore=(s,a)=>s<a;isBeforeYear=(s,a)=>this.hasUTCPlugin()?!this.isSameYear(s,a)&&s.utc()<a.utc():s.isBefore(a,"year");isBeforeDay=(s,a)=>this.hasUTCPlugin()?!this.isSameDay(s,a)&&s.utc()<a.utc():s.isBefore(a,"day");isWithinRange=(s,[a,r])=>s>=a&&s<=r;startOfYear=s=>this.adjustOffset(s.startOf("year"));startOfMonth=s=>this.adjustOffset(s.startOf("month"));startOfWeek=s=>this.adjustOffset(this.setLocaleToValue(s).startOf("week"));startOfDay=s=>this.adjustOffset(s.startOf("day"));endOfYear=s=>this.adjustOffset(s.endOf("year"));endOfMonth=s=>this.adjustOffset(s.endOf("month"));endOfWeek=s=>this.adjustOffset(this.setLocaleToValue(s).endOf("week"));endOfDay=s=>this.adjustOffset(s.endOf("day"));addYears=(s,a)=>this.adjustOffset(s.add(a,"year"));addMonths=(s,a)=>this.adjustOffset(s.add(a,"month"));addWeeks=(s,a)=>this.adjustOffset(s.add(a,"week"));addDays=(s,a)=>this.adjustOffset(s.add(a,"day"));addHours=(s,a)=>this.adjustOffset(s.add(a,"hour"));addMinutes=(s,a)=>this.adjustOffset(s.add(a,"minute"));addSeconds=(s,a)=>this.adjustOffset(s.add(a,"second"));getYear=s=>s.year();getMonth=s=>s.month();getDate=s=>s.date();getHours=s=>s.hour();getMinutes=s=>s.minute();getSeconds=s=>s.second();getMilliseconds=s=>s.millisecond();setYear=(s,a)=>this.adjustOffset(s.set("year",a));setMonth=(s,a)=>this.adjustOffset(s.set("month",a));setDate=(s,a)=>this.adjustOffset(s.set("date",a));setHours=(s,a)=>this.adjustOffset(s.set("hour",a));setMinutes=(s,a)=>this.adjustOffset(s.set("minute",a));setSeconds=(s,a)=>this.adjustOffset(s.set("second",a));setMilliseconds=(s,a)=>this.adjustOffset(s.set("millisecond",a));getDaysInMonth=s=>s.daysInMonth();getWeekArray=s=>{const a=this.startOfWeek(this.startOfMonth(s)),r=this.endOfWeek(this.endOfMonth(s));let n=0,i=a;const o=[];for(;i<r;){const l=Math.floor(n/7);o[l]=o[l]||[],o[l].push(i),i=this.addDays(i,1),n+=1}return o};getWeekNumber=s=>s.week();getDayOfWeek(s){return s.day()+1}getYearRange=([s,a])=>{const r=this.startOfYear(s),n=this.endOfYear(a),i=[];let o=r;for(;this.isBefore(o,n);)i.push(o),o=this.addYears(o,1);return i}}const t$e=({children:t})=>{const s=new pae({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1,staleTime:3e5,gcTime:6e5,retry:(a,r)=>{const n=r?.response?.status||r?.statusCode||r?.originalError?.response?.status||r?.originalError?.statusCode;return n===403||n===401||n>=400&&n<500?!1:a<3},retryOnMount:!1},mutations:{retry:(a,r)=>{const n=r?.response?.status||r?.statusCode||r?.originalError?.response?.status;return n===403||n===401||n>=400&&n<500?!1:a<1}}}});return e.jsx(VA,{dateAdapter:e$e,children:e.jsx(MLe,{children:e.jsx(hae,{client:s,children:e.jsx(dA,{children:t})})})})},s$e=()=>e.jsx(ire,{position:"top-right",autoClose:3e3,closeOnClick:!0,draggable:!0,theme:"light"}),a$e=({message:t="Loading your profile..."})=>{const[s,a]=g.useState(0);return g.useEffect(()=>{const r=setInterval(()=>{a(n=>{if(n>=100)return 100;const i=Math.random()*8+2,o=n+i;return Math.min(o,100)})},600);return()=>{clearInterval(r)}},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"flex h-screen",children:[e.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{variant:"rectangular",width:32,height:32,className:"!rounded-lg !bg-blue-600"}),e.jsx(X,{variant:"text",width:100,height:24})]})}),e.jsx("div",{className:"flex-1 p-4 space-y-2",children:[1,2,3,4,5,6].map(r=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg",children:[e.jsx(X,{variant:"rectangular",width:20,height:20}),e.jsx(X,{variant:"text",width:120,height:16})]},r))}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{variant:"circular",width:40,height:40}),e.jsxs("div",{className:"flex-1",children:[e.jsx(X,{variant:"text",width:80,height:16,className:"!mb-1"}),e.jsx(X,{variant:"text",width:60,height:12})]})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(X,{variant:"text",width:200,height:24})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(X,{variant:"circular",width:32,height:32}),e.jsx(X,{variant:"circular",width:32,height:32}),e.jsx(X,{variant:"circular",width:40,height:40})]})]})}),e.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(X,{variant:"text",width:300,height:32,className:"!mb-2"}),e.jsx(X,{variant:"text",width:400,height:16})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[1,2,3,4].map(r=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(X,{variant:"text",width:"60%",height:16,className:"!mb-2"}),e.jsx(X,{variant:"text",width:"40%",height:28,className:"!mb-1"}),e.jsx(X,{variant:"text",width:"30%",height:14})]}),e.jsx(X,{variant:"rectangular",width:48,height:48,className:"!rounded-full"})]})},r))}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(X,{variant:"text",width:150,height:24}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{variant:"rectangular",width:200,height:40,className:"!rounded-lg"}),e.jsx(X,{variant:"rectangular",width:120,height:40,className:"!rounded-lg"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-6 gap-4 pb-2 border-b border-gray-200",children:[1,2,3,4,5,6].map(r=>e.jsx(X,{variant:"text",width:"80%",height:16},r))}),[1,2,3,4,5].map(r=>e.jsx("div",{className:"grid grid-cols-6 gap-4 py-3 border-b border-gray-100",children:[1,2,3,4,5,6].map(n=>e.jsxs("div",{className:"flex items-center space-x-2",children:[n===1&&e.jsx(X,{variant:"circular",width:32,height:32}),e.jsx(X,{variant:"text",width:"70%",height:16})]},n))},r))]}),e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[e.jsx(X,{variant:"text",width:150,height:16}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"rectangular",width:32,height:32,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:32,height:32,className:"!rounded"}),e.jsx(X,{variant:"rectangular",width:32,height:32,className:"!rounded"})]})]})]})]})]})]}),e.jsx("div",{className:"absolute inset-0 bg-white/30 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"p-8 text-center min-w-[400px] max-w-[500px]",children:[e.jsxs("div",{className:"inline-flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-600 rounded-lg flex items-center justify-center animate-pulse",children:e.jsx("span",{className:"text-white font-bold text-sm sm:text-lg",children:"D"})}),e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"DCC-SFA"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce"}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"text-sm text-gray-500",children:[Math.round(s),"% complete"]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-6",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${s}%`}})}),e.jsx("p",{className:"text-gray-600 text-sm",children:t})]})})]})},r$e=({children:t})=>{const{isLoading:s,error:a}=uA(),[r,n]=g.useState(()=>!navigator.onLine);vt.useEffect(()=>{const o=()=>n(!1),l=()=>n(!0);return window.addEventListener("online",o),window.addEventListener("offline",l),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",l)}},[]);const i=g.useMemo(()=>{if(r)return!0;if(!a)return!1;const o=a,l=o?.statusCode||o?.response?.status||o?.originalError?.response?.status,c=l===401||l===403,m=o?.errorType==="NETWORK_ERROR"||o?.errorType==="TIMEOUT"||o?.errorType==="AUTHENTICATION_ERROR"||o?.errorType==="AUTHORIZATION_ERROR"||l===0&&!o?.response||!o?.response&&(o?.code==="ERR_NETWORK"||o?.code==="ECONNREFUSED"||o?.code==="ETIMEDOUT"||o?.code==="ENOTFOUND")||o?.message&&(o.message.includes("Network")||o.message.includes("network"));return c||m},[a,r]);return s?e.jsx(a$e,{message:"Loading..."}):i?e.jsx(aA,{}):e.jsx(e.Fragment,{children:t})},n$e=({children:t})=>e.jsx(dA,{children:e.jsx(r$e,{children:t})}),i$e=()=>e.jsx(Rw,{onError:(t,s)=>{},children:e.jsx(t$e,{children:e.jsx(Rw,{children:e.jsxs(n$e,{children:[e.jsx(TLe,{}),e.jsx(s$e,{})]})})})});yq.createRoot(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(i$e,{})}))});export default o$e();
